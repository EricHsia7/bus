"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[327],{5427(t,e,n){n.d(e,{Qx:()=>g});var r=n(467),i=n(9566),a=n(5352),o=n(5314),u=n(3459),l=n(4311);function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t){return c.apply(this,arguments)}function c(){return(c=(0,r.A)(function*(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r,o=!1,u=!1,s=`f_${a.id}`;if((yield(0,l.Ct)(11,s))?o=yield(0,i.g$)(a.id,a.name,a.icon):u=yield(0,i.vV)(a.name,a.icon),o){var y,c=f(r.content);try{for(c.s();!(y=c.n()).done;){var p=y.value;yield(0,i.z$)(r.id,p)}}catch(t){c.e(t)}finally{c.f()}}if(u){var d,v=f(r.content);try{for(v.s();!(d=v.n()).done;){var h=d.value;yield(0,i.z$)(u,h)}}catch(t){v.e(t)}finally{v.f()}}}}catch(t){n.e(t)}finally{n.f()}})).apply(this,arguments)}function p(t){return d.apply(this,arguments)}function d(){return(d=(0,r.A)(function*(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=(0,u.PL)(r.key);i&&"select"===i.type&&(yield(0,u.aN)(r.key,r.option))}}catch(t){n.e(t)}finally{n.f()}return!0})).apply(this,arguments)}function v(t){return h.apply(this,arguments)}function h(){return(h=(0,r.A)(function*(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;(yield(0,a.qZ)(r.id))?yield(0,a.nL)(r):yield(0,a.Qh)(r.name,r.period.start.hours,r.period.start.minutes,r.period.end.hours,r.period.end.minutes,r.days)}}catch(t){n.e(t)}finally{n.f()}return!0})).apply(this,arguments)}function m(){return(m=(0,r.A)(function*(t){var e,n=f(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;switch(r.type){case"route":(yield(0,o.DF)("route",r.id))||(yield(0,o.XK)(r.type,r.id));break;case"location":(yield(0,o.DF)("location",r.hash))||(yield(0,o.XK)(r.type,r.hash));break;case"bus":(yield(0,o.DF)("bus",r.id))||(yield(0,o.XK)(r.type,r.id))}}}catch(t){n.e(t)}finally{n.f()}return!0})).apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return b=(0,r.A)(function*(t){var e=JSON.parse(t);switch(e.version){case 1:return yield y(e.folders),!0;case 2:return yield y(e.folders),yield p(e.settings),!0;case 3:return yield y(e.folders),yield p(e.settings),yield v(e.personal_schedules),!0;case 4:return yield y(e.folders),yield p(e.settings),yield v(e.personal_schedules),yield function(t){return m.apply(this,arguments)}(e.recent_views),!0;default:return!1}}),b.apply(this,arguments)}},5976(t,e,n){n.d(e,{R:()=>l});var r=n(467),i=n(9566),a=n(5352),o=n(5314),u=n(3459);function l(){return f.apply(this,arguments)}function f(){return(f=(0,r.A)(function*(){var t=yield(0,i.Xi)(),e=(0,u.Gn)(),n=yield(0,a.ty)(),r=yield(0,o.Qj)(),l={};return l.time=(new Date).toISOString(),l.version=4,l.folders=t,l.settings=e,l.personal_schedules=n,l.recent_views=r,JSON.stringify(l)})).apply(this,arguments)}},6160(t,e,n){n.d(e,{i:()=>d});var r=n(467),i=n(6802),a=n(7810),o=n(9734),u=n(8011),l=n(424),f=n(2303),s=n(6788),y=n(8134);function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return p(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){return v.apply(this,arguments)}function v(){return(v=(0,r.A)(function*(t,e){var n=`c_${t}`,r=yield(0,o.j)(e,!0),p=yield(0,i.d)(e),d=yield(0,a.J)(e),v=yield(0,l.T)(e),h=yield(0,u.g)(e,0),m={properties:[],LocationName:""},g={};if(!r.hasOwnProperty(n))return m;var b=(g=r[n]).CarNum;m.properties.push({key:"car_number",icon:"tag",value:b});var A=g.CarType,_=(0,f.Ov)(A);m.properties.push({key:"car_type",icon:"directions_bus",value:_});var S,$={},O=c(p);try{for(O.s();!(S=O.n()).done;){var w=S.value;if(w.BusID===b){$=w;break}}}catch(t){O.e(t)}finally{O.f()}var C,I=parseInt($.RouteID),J=$.BusStatus,L=(0,f.eu)(J),N=parseInt($.GoBack),k={},x=c(d);try{for(x.s();!(C=x.n()).done;){var D=C.value;if(D.BusID===b){k=D;break}}}catch(t){x.e(t)}finally{x.f()}var P=k.CarOnStop,T=(0,f.zi)(P);m.properties.push({key:"status",icon:"vital_signs",value:`${T} | ${L}`});var Q=k.StopID,j=yield(0,y.F6)(I),z={};if(!(j.length>0))return m;var E=(z=j[0]).id,M=z.pid,R=z.n,F=z.dep,B=[z.des,F,""][N||0];m.properties.push({key:"route",icon:"route",value:`${R} - å¾€${B}`}),m.RouteID=E,m.FullPathAttributeId=M;var X=`s_${Q}`;if(!v.hasOwnProperty(X))return m;var q=h[`l_${v[X].stopLocationId}`].n;return m.properties.push({key:"location_name",icon:"location_on",value:q}),(0,s.LQ)(e),(0,s.gC)(e),m})).apply(this,arguments)}},9566(t,e,n){n.d(e,{$j:()=>D,DW:()=>U,Fq:()=>q,L2:()=>C,LH:()=>E,NC:()=>R,R_:()=>T,Rh:()=>A,Xi:()=>k,aq:()=>B,bq:()=>Z,eD:()=>I,g$:()=>O,vV:()=>S,z$:()=>j});var r=n(2284),i=n(467),a=n(8024),o=n(6483),u=n(5767),l=n(2063),f=n(8011),s=n(9218),y=n(4293),c=n(424),p=n(2303),d=n(6788),v=n(3459),h=n(4311);function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var b={};function A(){return _.apply(this,arguments)}function _(){return(_=(0,i.A)(function*(){var t,e=m(yield(0,h.Su)(11));try{for(e.s();!(t=e.n()).done;){var n=t.value,r=yield(0,h.Ct)(11,n);if(r){var i=JSON.parse(r);b.hasOwnProperty(n)||(b[n]=i)}}}catch(t){e.e(t)}finally{e.f()}})).apply(this,arguments)}function S(t,e){return $.apply(this,arguments)}function $(){return($=(0,i.A)(function*(t,e){var n=(0,a.zx)(),r=yield(0,s.l)(n);if((0,d.LQ)(n),!r.symbols.hasOwnProperty(e))return!1;var i=(0,a.zx)(),o=`f_${i}`;if(b.hasOwnProperty(o))return!1;if(yield(0,h.Ct)(11,o))return!1;var u={name:t,icon:e,id:i,timestamp:(new Date).getTime()};return b[o]=u,yield(0,h.mL)(11,o,JSON.stringify(u)),yield(0,h.mL)(12,o,JSON.stringify([])),i})).apply(this,arguments)}function O(t,e,n){return w.apply(this,arguments)}function w(){return(w=(0,i.A)(function*(t,e,n){var r=`f_${t}`,i=yield(0,h.Ct)(11,r);if(!i)return!1;var o=JSON.parse(i),u=(0,a.zx)(),l=yield(0,s.l)(u);if((0,d.LQ)(u),!l.symbols.hasOwnProperty(n))return!1;var f={name:e,icon:n,id:t,timestamp:o.timestamp};return b[r]=f,yield(0,h.mL)(11,r,JSON.stringify(f)),!0})).apply(this,arguments)}function C(t){var e=`f_${t}`;return!!b.hasOwnProperty(e)&&{name:b[e].name,icon:b[e].icon,id:b[e].id,timestamp:b[e].timestamp}}function I(t){return J.apply(this,arguments)}function J(){return(J=(0,i.A)(function*(t){var e=[],n=`f_${t}`,r=C(t);if("boolean"==typeof r&&!1===r)return e;var i=yield(0,h.Ct)(12,n);if(!i)return e;var a=JSON.parse(i);if(0===a.length){return e.push({type:"empty",id:0,index:0}),e}var o,u=m(a);try{for(u.s();!(o=u.n()).done;){var l=o.value,f=yield(0,h.Ct)(13,l);if(f){var s=JSON.parse(f);e.push(s)}}}catch(t){u.e(t)}finally{u.f()}return e})).apply(this,arguments)}function L(t){return N.apply(this,arguments)}function N(){return(N=(0,i.A)(function*(t){var e=`f_${t}`,n=yield(0,h.Ct)(12,e);return n?JSON.parse(n).length:0})).apply(this,arguments)}function k(){return x.apply(this,arguments)}function x(){return(x=(0,i.A)(function*(){var t,e=yield function(){var t=[];for(var e in b){var n={name:b[e].name,icon:b[e].icon,id:b[e].id,timestamp:b[e].timestamp};t.push(n)}return t.sort(function(t,e){return t.timestamp-e.timestamp}),t}(),n=[],r=m(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=yield I(i.id),o=yield L(i.id);n.push({name:i.name,icon:i.icon,id:i.id,timestamp:i.timestamp,content:a,contentLength:o})}}catch(t){r.e(t)}finally{r.f()}return n})).apply(this,arguments)}function D(t){return P.apply(this,arguments)}function P(){return(P=(0,i.A)(function*(t){var e=!0;"object"===(0,r.A)(t)&&Array.isArray(t)||(e=!1);var n,i=[],a=m(yield(0,h.Su)(13));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=yield(0,h.Ct)(13,o);if(u){var l=JSON.parse(u);e?t.indexOf(l.type)>-1&&i.push(l):i.push(l)}}}catch(t){a.e(t)}finally{a.f()}return i})).apply(this,arguments)}function T(t){return Q.apply(this,arguments)}function Q(){return(Q=(0,i.A)(function*(t){(0,d.Mf)(t,"getEstimateTime_0",0,!1),(0,d.Mf)(t,"getEstimateTime_1",0,!1),(0,d.Mf)(t,"getRoute_0",0,!1),(0,d.Mf)(t,"getRoute_1",0,!1);var e,n=yield(0,l.K)(t),r=yield(0,y.a)(t,!0),i=yield k(),a=(0,v.Js)("time_formatting_mode"),f=(0,v.Js)("power_saving"),s=(0,v.Js)("refresh_interval"),c=[],h=m(i);try{for(h.s();!(e=h.n()).done;){var g=e.value;c=c.concat(g.content.filter(function(t){return"stop"===t.type}).map(function(t){return t.id}))}}catch(t){h.e(t)}finally{h.f()}var b,A={},_=m(n);try{for(_.s();!(b=_.n()).done;){var S=b.value;if(c.indexOf(S.StopID)>-1)A[`s_${S.StopID}`]=S}}catch(t){_.e(t)}finally{_.f()}var $,O=[],w=m(i);try{for(w.s();!($=w.n()).done;){var C,I=$.value,J={name:I.name,icon:I.icon,id:I.id,timestamp:I.timestamp,content:[],contentLength:I.contentLength},L=m(I.content);try{for(L.s();!(C=L.n()).done;){var N=C.value;switch(N.type){case"stop":var x=`s_${N.id}`,D={};if(!A.hasOwnProperty(x))break;D=A[x],N.status=(0,p.$Q)(D.EstimateTime,a);var P=r[`r_${N.route.id}`];N.route.pathAttributeId=P.pid;break;case"route":var T=r[`r_${N.id}`];N.pathAttributeId=T.pid}J.content.push(N)}}catch(t){L.e(t)}finally{L.f()}O.push(J)}}catch(t){w.e(t)}finally{w.f()}var Q={folders:O,dataUpdateTime:(0,d.Zt)(t)};return(0,d.LQ)(t),(0,d.gC)(t),f||(s.dynamic&&(yield(0,u.Eu)(n)),yield(0,o.VZ)(n)),Q})).apply(this,arguments)}function j(t,e){return z.apply(this,arguments)}function z(){return(z=(0,i.A)(function*(t,e){var n=`f_${t}`,r=`${e.type}_${e.id}`,i=C(t);if("boolean"==typeof i&&!1===i)return!1;var a=yield(0,h.Ct)(12,n);if(!a)return!1;var o=JSON.parse(a);return(0===o.length||o.indexOf(r)<0)&&(yield(0,h.mL)(12,n,JSON.stringify(o.concat(r))),yield(0,h.mL)(13,r,JSON.stringify(e)),!0)})).apply(this,arguments)}function E(t,e){return M.apply(this,arguments)}function M(){return(M=(0,i.A)(function*(t,e){var n,r=`${t}_${e}`,i=m(yield(0,h.Su)(12));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=yield(0,h.Ct)(12,a);if(o)if(JSON.parse(o).indexOf(r)>-1)return!0}}catch(t){i.e(t)}finally{i.f()}return!1})).apply(this,arguments)}function R(t,e,n){return F.apply(this,arguments)}function F(){return(F=(0,i.A)(function*(t,e,n){var r=`f_${t}`,i=`${e}_${n}`,a=C(t);if("boolean"==typeof a&&!1===a)return!1;var o=yield(0,h.Ct)(12,r);if(!o)return!1;var u=JSON.parse(o),l=u.indexOf(i);return l>-1&&u.length>0&&(u.splice(l,1),yield(0,h.mL)(12,r,JSON.stringify(u))),!1===(yield E(e,n))&&(yield(0,h.iQ)(13,i)),!0})).apply(this,arguments)}function B(t,e,n){return X.apply(this,arguments)}function X(){return(X=(0,i.A)(function*(t,e,n){var r=(0,a.zx)(),i=yield(0,c.T)(r),o=yield(0,f.g)(r,0),u=yield(0,y.a)(r,!0),l=i[`s_${e}`],s=parseInt(l.goBack),p=o[`l_${l.stopLocationId}`].n,d=u[`r_${n}`],v=d.n,h=d.dep,m=d.des,g={type:"stop",id:e,timestamp:(new Date).getTime(),name:p,direction:s,route:{name:v,endPoints:{departure:h,destination:m},id:n}};return yield j(t,g)})).apply(this,arguments)}function q(t,e){return K.apply(this,arguments)}function K(){return(K=(0,i.A)(function*(t,e){var n=(0,a.zx)(),r=yield(0,y.a)(n,!0);(0,d.LQ)(n),(0,d.gC)(n);var i=`r_${e}`,o={};if(!r.hasOwnProperty(i))return!1;o=r[i];var u={type:"route",id:e,timestamp:(new Date).getTime(),name:o.n,endPoints:{departure:o.dep,destination:o.des}};return yield j(t,u)})).apply(this,arguments)}function U(t,e){return V.apply(this,arguments)}function V(){return(V=(0,i.A)(function*(t,e){var n=(0,a.zx)(),r=yield(0,f.g)(n,1);(0,d.LQ)(n),(0,d.gC)(n);var i=`ml_${e}`,o={};if(!r.hasOwnProperty(i))return!1;o=r[i];var u={type:"location",id:e,timestamp:(new Date).getTime(),name:o.n};return yield j(t,u)})).apply(this,arguments)}function Z(t,e,n,r){return G.apply(this,arguments)}function G(){return(G=(0,i.A)(function*(t,e,n,r){var i=`f_${t}`,a=`${e}_${n}`,o=C(t);if("boolean"==typeof o&&!1===o)return!1;var u=yield(0,h.Ct)(12,i);if(!u)return!1;var l=JSON.parse(u),f=l.indexOf(a);if(f>-1&&l.length>1){var s=0;switch(r){case"up":s=-1;break;case"down":s=1;break;default:s=0}return l.splice(f,1),l.splice(f+s,0,a),yield(0,h.mL)(12,i,JSON.stringify(l)),!0}return!1})).apply(this,arguments)}}}]);
//# sourceMappingURL=ede32397b745b1ff226c.js.map