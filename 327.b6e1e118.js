!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():r.bus=e()}(self,()=>(()=>{"use strict";var r,e,n={3327(r,e,n){function t(r,e){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,e){if(r){if("string"==typeof r)return u(r,e);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(r,e):void 0}}(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var t=0,o=function(){};return{s:o,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return a=r.done,r},e:function(r){s=!0,i=r},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function u(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=Array(e);n<e;n++)t[n]=r[n];return t}function o(r){var e=[{suffixes:"市",key:"city",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"區",key:"district",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"鄉鎮村里",key:"area",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"路街道",key:"road",process:function(r){return null===r?null:r.map(function(r){return r.replaceAll(/[\(\)（）]/gim,"").trim()})},type:0},{suffixes:"段",key:"road_section",process:function(r){for(var e=function(r){switch(r){case"一":return 1;case"二":return 2;case"三":return 3;case"四":return 4;case"五":return 5;case"六":return 6;case"七":return 7;case"八":return 8;case"九":return 9;case"十":return 10}return isNaN(parseInt(r))?0:parseInt(r)},n=String(r).length,t=[],u=0;u<n;u++){var o=e(String(r).charAt(u));10===o?t.length>0&&(t=[10*t.reduce(function(r,e){return r+e},0)]):t=[t.reduce(function(r,e){return r+e},0)+o]}return t},type:0},{suffixes:"巷",key:"alley",process:function(r){return null===r?null:r.map(function(r){return parseInt(r.trim().replaceAll(/[巷]/gim))})},type:0},{suffixes:"弄",key:"alley_branch",process:function(r){return null===r?null:r.map(function(r){return parseInt(r.trim().replaceAll(/[弄]/gim))})},type:0},{suffixes:"號",key:"doorplate",process:function(r){var e,n=String(r).match(/[0-9]+/gim);return n=(null===(e=n)||void 0===e?void 0:e.map(function(r){return null===r?null:parseInt(r)}))||null},type:0},{suffixes:"樓",key:"floornumber",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{key:"exit",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:2},{key:"direction",process:function(r){return null===r?null:r.map(function(r){return r.trim().replace(/[往向]/gim,"")})},type:1}];function n(r){function n(r,e){return 0===e?new RegExp(`([^市區鄉鎮村里路段街道巷弄號樓與]+[${r}])`,"gmi"):1===e?new RegExp("([往向]+[東南西北])","gmi"):2===e?new RegExp("([0-9]+[號]出口)","gmi"):void 0}for(var t={},u=0,o=e;u<o.length;u++){var i,a=o[u],s=n(null===(i=a)||void 0===i?void 0:i.suffixes,a.type);t[a.key]=a.process(String(r).match(s))}return t}return function(r){var u,o={},i=t(r);try{for(i.s();!(u=i.n()).done;)for(var a=n(u.value),s=0,l=e;s<l.length;s++){var f=l[s];o.hasOwnProperty(f.key)||(o[f.key]=[]),o[f.key]=o[f.key].concat(a[f.key])}}catch(r){i.e(r)}finally{i.f()}for(var c in o)o[c]=Array.from(new Set(o[c])).filter(function(r){return!!r}).sort(function(r,e){return"number"==typeof r&&"number"==typeof e?r-e:String(r).charCodeAt(0)-String(e).charCodeAt(0)});return o}(r)}var i=n(3503);n(4462).sha512;self.onmessage=function(r){var e=function(r){var e={};for(var n in r){var t=i(String(r[n].n).trim().replaceAll(/[\(（）\)\:：\~～]*/gim,"")),u=`ml_${t}`;e.hasOwnProperty(u)?(e[u].lo.push(r[n].lo),e[u].la.push(r[n].la),e[u].g.indexOf(r[n].g)<0&&e[u].g.push(r[n].g),e[u].r.push(r[n].r),e[u].s.push(r[n].s),e[u].v.push(r[n].v),e[u].a.push(o(r[n].a)),e[u].id.push(r[n].id)):e[u]={n:r[n].n,lo:[r[n].lo],la:[r[n].la],g:[r[n].g],r:[r[n].r],s:[r[n].s],v:[r[n].v],a:[o(r[n].a)],id:[r[n].id],hash:t}}return e}(r.data);self.postMessage(e)}}},t={};function u(r){var e=t[r];if(void 0!==e)return e.exports;var o=t[r]={exports:{}};return n[r](o,o.exports,u),o.exports}u.m=n,u.x=()=>{var r=u.O(void 0,[248],()=>u(3327));return r=u.O(r)},u.amdO={},r=[],u.O=(e,n,t,o)=>{if(!n){var i=1/0;for(f=0;f<r.length;f++){for(var[n,t,o]=r[f],a=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(u.O).every(r=>u.O[r](n[s]))?n.splice(s--,1):(a=!1,o<i&&(i=o));if(a){r.splice(f--,1);var l=t();void 0!==l&&(e=l)}}return e}o=o||0;for(var f=r.length;f>0&&r[f-1][2]>o;f--)r[f]=r[f-1];r[f]=[n,t,o]},u.f={},u.e=r=>Promise.all(Object.keys(u.f).reduce((e,n)=>(u.f[n](r,e),e),[])),u.u=r=>"24c556f3.js",u.miniCssF=r=>{},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),u.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),u.p="./",(()=>{var r={327:1};u.f.i=(e,n)=>{r[e]||importScripts(u.p+u.u(e))};var e=self.webpackChunkbus=self.webpackChunkbus||[],n=e.push.bind(e);e.push=e=>{var[t,o,i]=e;for(var a in o)u.o(o,a)&&(u.m[a]=o[a]);for(i&&i(u);t.length;)r[t.pop()]=1;n(e)}})(),e=u.x,u.x=()=>u.e(248).then(e);var o=u.x();return o=o.default})());
//# sourceMappingURL=327.b6e1e118.js.map