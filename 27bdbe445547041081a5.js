"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[3052,8018],{2174(t,e,n){n.d(e,{Sv:()=>D,m_:()=>q});var r=n(5767),a=n(365),i=n(77),u=n(3459),o=n(8179),l=n(8024),s=n(4537),c=n(904),d=n(9119);function f(t,e,n,r,a,i,u){try{var o=t[i](u),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,a)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function u(t){f(i,r,a,u,o,"next",t)}function o(t){f(i,r,a,u,o,"throw",t)}u(void 0)})}}var h=(0,o.bv)(".w"),v=(0,o.aI)(h,".x"),m=(0,o.aI)(v,".y"),y=(0,o.aI)(m,".z"),b=(0,o.aI)(h,"._"),g=(0,o.aI)(b,".aa"),I={},A=!1,w=15e3,x=5e3,_=15e3,S=!0,k=0,j=0,C="",P=!1,E=!1,L=!1;function T(t){var e=t;if(P){var n=e.detail.progress-1;y.style.setProperty("--da",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,T)}function Z(){var t=(0,l.zx)(),e=document.createElement("div");e.classList.add("ea"),e.id=t;var n=document.createElement("div");n.classList.add("fa"),e.appendChild(n);var r=document.createElement("div");r.classList.add("ga");var a=document.createElement("div");a.classList.add("ha"),r.appendChild(a);var i=document.createElement("div");i.classList.add("ia"),r.appendChild(i);var u=document.createElement("div");u.classList.add("ja"),r.appendChild(u);var o=document.createElement("div");o.classList.add("ka");var c=document.createElement("span");return c.appendChild((0,s.YC)("close")),o.appendChild(c),r.appendChild(o),e.appendChild(r),{element:e,id:t}}function $(t,e,n){function r(t,r,a){function i(t,e){(0,o.aI)(t,".fa").innerText=e.hours}function u(t,e){var n=(0,o.aI)(t,".ga");(0,o.aI)(n,".ha").innerText=e.minutes}function s(t,e){var n=(0,o.aI)(t,".ga");(0,o.aI)(n,".ja").innerText=e.name}function c(t,e){var n=(0,o.aI)(t,".ga");(0,o.aI)(n,".ia").innerText=`${e.route.name} - 往${e.route.direction}`}function d(t,e){var n=(0,o.aI)(t,".ga");(0,o.aI)(n,".ka").onclick=function(){!function(t,e){J.apply(this,arguments)}(t.id,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,l.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,l.xZ)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,l.xZ)(e))}null==a?(i(t,r),u(t,r),s(t,r),c(t,r),d(t,r),f(t,r),p(t,n),h(t,e)):(r.hours!==a.hours&&i(t,r),r.minutes!==a.minutes&&u(t,r),(0,l.hw)(a.schedule_id,r.schedule_id)||(s(t,r),c(t,r),d(t,r)),a.is_first!==r.is_first&&f(t,r),false!==n&&p(t,n),A!==e&&h(t,e))}var a=t.itemQuantity,i=t.items,u=(0,o.jg)(g,".ea").length;if(a!==u){var s=u-a;if(s<0){for(var c=new DocumentFragment,d=0,f=Math.abs(s);d<f;d++){var p=Z();c.appendChild(p.element)}g.append(c)}else for(var h=(0,o.jg)(g,".ea"),v=0,m=Math.abs(s);v<m;v++){h[u-1-v].remove()}}for(var y=(0,o.jg)(g,".ea"),b=0;b<a;b++){var w=y[b],x=i[b];if(I.hasOwnProperty("items"))if(I.items[b])r(w,x,I.items[b]);else r(w,x,null);else r(w,x,null)}I=t,A=e}function M(){return O.apply(this,arguments)}function O(){return(O=p(function*(){var t=(0,u.Js)("playing_animation"),e=(0,u.Js)("refresh_interval");S=e.dynamic,w=e.baseInterval,P=!0,C=(0,l.zx)(),y.setAttribute("refreshing","true"),y.classList.remove("ca"),document.addEventListener(C,T);var n=yield(0,i.e3)(C);$(n,!1,t);var a=0;S&&(a=yield(0,r.wz)()),k=(new Date).getTime(),j=S?Math.max(k+x,n.dataUpdateTime+w/a):k+w,_=Math.max(x,j-k),P=!1,y.setAttribute("refreshing","false"),y.style.setProperty("--ba",`${_}ms`),y.classList.add("ca")})).apply(this,arguments)}function R(){return z.apply(this,arguments)}function z(){return(z=p(function*(){M().then(function(){E?setTimeout(function(){R()},Math.max(x,j-(new Date).getTime())):L=!1}).catch(function(t){E?setTimeout(function(){R()},1e4):L=!1})})).apply(this,arguments)}function D(){(0,c.WR)("NotificationScheduleManager"),h.setAttribute("displayed","true"),function(){for(var t=(0,u.Js)("playing_animation"),e=(0,c.gO)("window"),n=(e.width,e.height),r=Math.floor(n/50)+5,a=[],i=0;i<r;i++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});$({items:a,itemQuantity:r,dataUpdateTime:0},!0,t)}(),E||(E=!0,L?M():(L=!0,R())),(0,c.Z_)()}function q(){h.setAttribute("displayed","false"),E=!1,(0,c.l$)()}function J(){return(J=p(function*(t,e){if((0,d.a)("manufacturing","處理中"),yield(0,a.G)(e)){if((0,o.aI)(g,`.ea#${t}`).remove(),(0,d.a)("check_circle","已取消通知"),!P){var n=(0,u.Js)("playing_animation");$(yield(0,i.e3)(C),!1,n)}}else(0,d.a)("error","取消失敗")})).apply(this,arguments)}},5693(t,e,n){n.d(e,{Dn:()=>k,Xy:()=>S,bF:()=>_,gv:()=>A});var r=n(5352),a=n(8179),i=n(5579),u=n(904);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,u,o=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(t){s=!0,a=t}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n,r,a,i,u){try{var o=t[i](u),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function u(t){s(i,r,a,u,o,"next",t)}function o(t){s(i,r,a,u,o,"throw",t)}u(void 0)})}}var d=(0,a.bv)(".la"),f=(0,a.aI)(d,".ma"),p=(0,a.aI)(d,".na"),h=(0,a.aI)(p,".oa"),v=(0,a.aI)(f,".pa"),m=(0,a.aI)(v,'.qa[group="schedule-name"] .ra input'),y=(0,a.aI)(v,'.qa[group="schedule-start-time"] .ra input'),b=(0,a.aI)(v,'.qa[group="schedule-end-time"] .ra input'),g=(0,a.aI)(v,'.qa[group="schedule-days"] .ra'),I=(0,a.jg)(g,".sa");function A(t){return w.apply(this,arguments)}function w(){return(w=c(function*(t){for(var e=m.value,n=y.value,a=b.value,i=o(String(n).split(":").map(function(t){return parseInt(t)}),2),u=i[0],l=i[1],s=o(String(a).split(":").map(function(t){return parseInt(t)}),2),c=s[0],d=s[1],f=[],p=0;p<7;p++){var h=I[p],v=h.getAttribute("highlighted"),g=parseInt(h.getAttribute("day"));"true"===v&&f.push(g)}var A=yield(0,r.qZ)(t);A.name=e,A.days=f,A.period.start.hours=u,A.period.start.minutes=l,A.period.end.hours=c,A.period.end.minutes=d,yield(0,r.nL)(A),S()})).apply(this,arguments)}function x(){return(x=c(function*(t){var e=yield(0,r.qZ)(t);m.value=e.name,y.value=(0,i.pn)(e.period.start),b.value=(0,i.pn)(e.period.end);for(var n=0;n<7;n++){var a=I[n];e.days.indexOf(n)>-1?a.setAttribute("highlighted","true"):a.setAttribute("highlighted","false")}h.onclick=function(){A(t)}})).apply(this,arguments)}function _(t){(0,u.WR)("PersonalScheduleEditor"),d.setAttribute("displayed","true"),function(t){x.apply(this,arguments)}(t),(0,u.Z_)()}function S(){d.setAttribute("displayed","false"),(0,u.l$)()}function k(t){var e=(0,a.aI)(g,`.sa[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6443(t,e,n){n.d(e,{GS:()=>E,GZ:()=>L,VY:()=>C,b7:()=>j,kP:()=>A,zk:()=>w});var r=n(9566),a=n(8621),i=n(3459),u=n(8179),o=n(8024),l=n(904),s=n(3041),c=n(8332),d=n(9009),f=n(2530);function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){o=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw i}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e,n,r,a,i,u){try{var o=t[i](u),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,a)}var m=(0,u.bv)(".ta"),y=(0,u.aI)(m,".ua"),b=(0,u.aI)(y,".va"),g=(0,u.aI)(b,'.wa[group="calendar"]'),I=(0,u.aI)(g,".xa"),A=(0,u.aI)(I,".ya"),w=(0,u.aI)(I,".za"),x=(0,u.aI)(m,'.ua .va .wa[group="actions"]'),_=(0,u.aI)(x,'.xa ._a[action="save-to-folder"]'),S=(0,u.aI)(x,'.xa ._a[action="get-permalink"]'),k=(0,u.aI)(x,'.xa ._a[action="show-permalink-qrcode"]'),j=(0,u.aI)(b,'.wa[group="properties"]'),C=(0,u.aI)(j,".xa");function P(){var t;return t=function*(t,e){var n=(0,i.Js)("playing_animation"),u=yield(0,r.LH)("route",t);_.setAttribute("animation",(0,o.xZ)(n)),_.setAttribute("highlighted",(0,o.xZ)(u)),_.onclick=function(){(0,s.B)("route",[t])},S.setAttribute("animation",(0,o.xZ)(n)),S.onclick=function(){(0,c.w)(t)},k.setAttribute("animation",(0,o.xZ)(n)),k.onclick=function(){(0,c.e)(t)},(0,f.h)(j),(0,d.OS)();var l=(0,o.zx)(),p=yield(0,a.p)(t,e,l);(0,f.D)(p.properties,!1,n),(0,d.fB)(p.calendar,!1,n)},P=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function u(t){v(i,r,a,u,o,"next",t)}function o(t){v(i,r,a,u,o,"throw",t)}u(void 0)})},P.apply(this,arguments)}function E(t,e){(0,l.WR)("RouteDetails"),m.setAttribute("displayed","true"),function(t,e){P.apply(this,arguments)}(t,e)}function L(){(0,l.kr)("RouteDetails"),m.setAttribute("displayed","false");var t,e=p((0,u.jg)(w,".s"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,r=p((0,u.jg)(A,".r"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(t){r.e(t)}finally{r.f()}}},7908(t,e,n){n.d(e,{NW:()=>y,XG:()=>v,hy:()=>m});var r=n(3937),a=n(77),i=n(8179),u=n(8024),o=n(904),l=n(9119);function s(t,e,n,r,a,i,u){try{var o=t[i](u),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,a)}var c=(0,i.bv)(".ab"),d=(0,i.aI)(c,".bb"),f=(0,i.aI)(d,".cb"),p=(0,i.aI)(f,'.db[group="provider"] .eb input'),h=(0,i.aI)(f,'.db[group="registration-key"] .eb input');function v(){(0,o.WR)("RegisterNotification"),c.setAttribute("displayed","true"),p.value=(0,a.D7)(),h.value="",(0,o.Z_)()}function m(){c.setAttribute("displayed","false"),(0,o.l$)()}function y(){return b.apply(this,arguments)}function b(){var t;return t=function*(){(0,l.a)("manufacturing","處理中");var t=p.value,e=h.value;if((0,u.Gz)(t))return(0,a.Je)(t),(yield(0,r.e)(e))?void(0,l.a)("check_circle","註冊成功"):void(0,l.a)("error","註冊失敗");(0,l.a)("error","無效的提供者")},b=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function u(t){s(i,r,a,u,o,"next",t)}function o(t){s(i,r,a,u,o,"throw",t)}u(void 0)})},b.apply(this,arguments)}},8279(t,e,n){n.d(e,{Vc:()=>s,X8:()=>l});var r=n(8179),a=n(2648),i=n(904),u=(0,r.bv)(".fb"),o=(0,r.aI)(u,".gb");function l(t){(0,i.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,a.$)(t,"M",.5,.3,1,"var(--a)",4);o.innerHTML=e}(t)}function s(){(0,i.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>g,I1:()=>b,Ps:()=>y,om:()=>I});var r=n(5352),a=n(8179),i=n(904),u=n(9119);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,u,o=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(t){s=!0,a=t}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s=(0,a.bv)(".hb"),c=(0,a.aI)(s,".ib"),d=(0,a.aI)(c,".jb"),f=(0,a.aI)(d,'.kb[group="schedule-name"] .lb input'),p=(0,a.aI)(d,'.kb[group="schedule-start-time"] .lb input'),h=(0,a.aI)(d,'.kb[group="schedule-end-time"] .lb input'),v=(0,a.aI)(d,'.kb[group="schedule-days"] .lb'),m=(0,a.jg)(v,".mb");function y(){for(var t=f.value,e=p.value,n=h.value,a=o(String(e).split(":").map(function(t){return parseInt(t)}),2),i=a[0],l=a[1],s=o(String(n).split(":").map(function(t){return parseInt(t)}),2),c=s[0],d=s[1],v=[],y=0;y<7;y++){var b=m[y],I=b.getAttribute("highlighted"),A=parseInt(b.getAttribute("day"));"true"===I&&v.push(A)}(0,r.Qh)(t,i,l,c,d,v).then(function(t){t?(g(),(0,u.a)("calendar_view_day","已建立個人化行程")):(0,u.a)("error","無法建立個人化行程")})}function b(){(0,i.WR)("PersonalScheduleCreator"),s.setAttribute("displayed","true"),(0,i.Z_)()}function g(){s.setAttribute("displayed","false"),(0,i.l$)()}function I(t){var e=(0,a.aI)(v,`.mb[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}}}]);
//# sourceMappingURL=27bdbe445547041081a5.js.map