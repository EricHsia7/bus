"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[9472],{2174(e,t,n){n.d(t,{Sv:()=>J});var a=n(467),r=n(5767),i=n(365),o=n(3422),u=n(3459),d=n(8179),l=n(8024),s=n(4537),c=n(904),f=n(9119),p=(0,d.bv)(".zj"),m=(0,d.aI)(p,".bk"),v=(0,d.aI)(m,".fk"),h=(0,d.aI)(v,".gk"),y=(0,d.aI)(p,".ik"),g=(0,d.aI)(y,".jk"),b={},k=!1,A=15e3,I=5e3,C=15e3,x=!0,j=0,w=0,E="",L=!1,_=!1,S=!1;function T(e){var t=e;if(L){var n=t.detail.progress-1;h.style.setProperty("--_j",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,T)}function M(){var e=(0,l.zx)(),t=document.createElement("div");t.classList.add("kk"),t.id=e;var n=document.createElement("div");n.classList.add("lk"),t.appendChild(n);var a=document.createElement("div");a.classList.add("mk");var r=document.createElement("div");r.classList.add("nk"),a.appendChild(r);var i=document.createElement("div");i.classList.add("ok"),a.appendChild(i);var o=document.createElement("div");o.classList.add("pk"),a.appendChild(o);var u=document.createElement("div");u.classList.add("qk");var d=document.createElement("span");return d.appendChild((0,s.YC)("close")),u.appendChild(d),a.appendChild(u),t.appendChild(a),{element:t,id:e}}function Z(e,t,n){function a(e,a,r){function i(e,t){(0,d.aI)(e,".lk").innerText=t.hours}function o(e,t){var n=(0,d.aI)(e,".mk");(0,d.aI)(n,".nk").innerText=t.minutes}function u(e,t){var n=(0,d.aI)(e,".mk");(0,d.aI)(n,".pk").innerText=t.name}function s(e,t){var n=(0,d.aI)(e,".mk");(0,d.aI)(n,".ok").innerText=`${t.route.name} - 往${t.route.direction}`}function c(e,t){var n=(0,d.aI)(e,".mk");(0,d.aI)(n,".qk").onclick=function(){!function(e,t){O.apply(this,arguments)}(e.id,t.schedule_id)}}function f(e,t){e.setAttribute("first",(0,l.xZ)(t.is_first))}function p(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function m(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}null==r?(i(e,a),o(e,a),u(e,a),s(e,a),c(e,a),f(e,a),p(e,n),m(e,t)):(a.hours!==r.hours&&i(e,a),a.minutes!==r.minutes&&o(e,a),(0,l.hw)(r.schedule_id,a.schedule_id)||(u(e,a),s(e,a),c(e,a)),r.is_first!==a.is_first&&f(e,a),false!==n&&p(e,n),k!==t&&m(e,t))}var r=e.itemQuantity,i=e.items,o=(0,d.jg)(g,".kk").length;if(r!==o){var u=o-r;if(u<0){for(var s=new DocumentFragment,c=0,f=Math.abs(u);c<f;c++){var p=M();s.appendChild(p.element)}g.append(s)}else for(var m=(0,d.jg)(g,".kk"),v=0,h=Math.abs(u);v<h;v++){m[o-1-v].remove()}}for(var y=(0,d.jg)(g,".kk"),A=0;A<r;A++){var I=y[A],C=i[A];if(b.hasOwnProperty("items"))if(b.items[A])a(I,C,b.items[A]);else a(I,C,null);else a(I,C,null)}b=e,k=t}function $(){return z.apply(this,arguments)}function z(){return(z=(0,a.A)(function*(){var e=(0,u.Js)("playing_animation"),t=(0,u.Js)("refresh_interval");x=t.dynamic,A=t.baseInterval,L=!0,E=(0,l.zx)(),h.setAttribute("refreshing","true"),h.classList.remove("hk"),document.addEventListener(E,T);var n=yield(0,o.e3)(E);Z(n,!1,e);var a=0;x&&(a=yield(0,r.wz)()),j=(new Date).getTime(),w=x?Math.max(j+I,n.dataUpdateTime+A/a):j+A,C=Math.max(I,w-j),L=!1,h.setAttribute("refreshing","false"),h.style.setProperty("--ak",`${C}ms`),h.classList.add("hk")})).apply(this,arguments)}function P(){return q.apply(this,arguments)}function q(){return(q=(0,a.A)(function*(){$().then(function(){_?setTimeout(function(){P()},Math.max(I,w-(new Date).getTime())):S=!1}).catch(function(e){_?setTimeout(function(){P()},1e4):S=!1})})).apply(this,arguments)}function J(){(0,c.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var e=(0,u.Js)("playing_animation"),t=(0,c.gO)("window"),n=(t.width,t.height),a=Math.floor(n/50)+5,r=[],i=0;i<a;i++)r.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});Z({items:r,itemQuantity:a,dataUpdateTime:0},!0,e)}(),_||(_=!0,S?$():(S=!0,P())),(0,c.Z_)()}function O(){return(O=(0,a.A)(function*(e,t){if((0,f.a)("manufacturing","處理中"),yield(0,i.G)(t)){if((0,d.aI)(g,`.kk#${e}`).remove(),(0,f.a)("check_circle","已取消通知"),!L){var n=(0,u.Js)("playing_animation");Z(yield(0,o.e3)(E),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},5693(e,t,n){n.d(t,{Xy:()=>I,bF:()=>A});var a=n(3453),r=n(467),i=n(5352),o=n(8179),u=n(5579),d=n(904),l=(0,o.bv)(".mj"),s=(0,o.aI)(l,".rj"),c=(0,o.aI)(l,".nj"),f=(0,o.aI)(c,".oj"),p=(0,o.aI)(s,".sj"),m=(0,o.aI)(p,'.tj[group="schedule-name"] .xj input'),v=(0,o.aI)(p,'.tj[group="schedule-start-time"] .xj input'),h=(0,o.aI)(p,'.tj[group="schedule-end-time"] .xj input'),y=(0,o.aI)(p,'.tj[group="schedule-days"] .xj'),g=(0,o.jg)(y,".yj");function b(){return(b=(0,r.A)(function*(e){for(var t=m.value,n=v.value,r=h.value,o=String(n).split(":").map(function(e){return parseInt(e)}),u=(0,a.A)(o,2),d=u[0],l=u[1],s=String(r).split(":").map(function(e){return parseInt(e)}),c=(0,a.A)(s,2),f=c[0],p=c[1],y=[],b=0;b<7;b++){var k=g[b],A=k.getAttribute("highlighted"),C=parseInt(k.getAttribute("day"));"true"===A&&y.push(C)}var x=yield(0,i.qZ)(e);x.name=t,x.days=y,x.period.start.hours=d,x.period.start.minutes=l,x.period.end.hours=f,x.period.end.minutes=p,yield(0,i.nL)(x),I()})).apply(this,arguments)}function k(){return k=(0,r.A)(function*(e){var t=yield(0,i.qZ)(e);m.value=t.name,v.value=(0,u.pn)(t.period.start),h.value=(0,u.pn)(t.period.end);for(var n=0;n<7;n++){var a=g[n];t.days.indexOf(n)>-1?a.setAttribute("highlighted","true"):a.setAttribute("highlighted","false")}f.onclick=function(){!function(e){b.apply(this,arguments)}(e)}}),k.apply(this,arguments)}function A(e){(0,d.WR)("PersonalScheduleEditor"),l.setAttribute("displayed","true"),function(e){k.apply(this,arguments)}(e),(0,d.Z_)()}function I(){l.setAttribute("displayed","false"),(0,d.l$)()}},7891(e,t,n){n.d(t,{Z:()=>y,z:()=>h});var a=n(467),r=n(5352),i=n(8179),o=n(4537),u=n(904),d=n(5693);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var c=(0,i.bv)(".qi"),f=(0,i.aI)(c,".vi"),p=(0,i.aI)(f,".wi");function m(e){var t=document.createElement("div");t.classList.add("xi"),t.onclick=function(){(0,d.bF)(e.id)};var n=document.createElement("div");n.classList.add("yi"),n.appendChild(document.createTextNode(e.name)),t.appendChild(n);var a=document.createElement("div");a.classList.add("zi");var r=document.createElement("span");return r.appendChild((0,o.YC)("arrow_forward_ios")),a.appendChild(r),t.appendChild(a),{element:t,id:""}}function v(){return(v=(0,a.A)(function*(){p.innerHTML="";var e,t=yield(0,r.ty)(),n=new DocumentFragment,a=l(t);try{for(a.s();!(e=a.n()).done;){var i=m(e.value);n.appendChild(i.element)}}catch(e){a.e(e)}finally{a.f()}p.append(n)})).apply(this,arguments)}function h(){(0,u.WR)("PersonalScheduleManager"),c.setAttribute("displayed","true"),function(){v.apply(this,arguments)}()}function y(){(0,u.kr)("PersonalScheduleManager"),c.setAttribute("displayed","false")}},8279(e,t,n){n.d(t,{X8:()=>d});var a=n(8179),r=n(2648),i=n(904),o=(0,a.bv)(".rk"),u=(0,a.aI)(o,".wk");function d(e){(0,i.WR)("QRCode"),o.setAttribute("displayed","true"),function(e){var t=(0,r.$)(e,"M",.5,.3,1,"var(--a)",4);u.innerHTML=t}(e)}},9119(e,t,n){n.d(t,{a:()=>s});var a=n(2284),r=n(3459),i=n(8179),o=n(8024),u=n(4537);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t,n){var l=(0,i.e0)(".xk");if(null!==l){var s,c=d(l);try{for(c.s();!(s=c.n()).done;){s.value.remove()}}catch(e){c.e(e)}finally{c.f()}}var f=(0,r.Js)("playing_animation"),p=document.createElement("div");p.classList.add("xk"),p.setAttribute("animation",(0,o.xZ)(f));var m=document.createElement("div");m.classList.add("yk"),m.appendChild((0,u.YC)(e)),p.appendChild(m);var v=document.createElement("div");if(v.classList.add("zk"),v.innerText=t,p.appendChild(v),"object"===(0,a.A)(n)&&null!=n&&"function"==typeof(null==n?void 0:n.action)){var h=document.createElement("div");h.classList.add("_k"),h.innerText=n.text,h.addEventListener("click",function(){n.action()},{once:!0}),p.appendChild(h)}p.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(p)}}}]);
//# sourceMappingURL=0dd27de4f848d0195c34.js.map