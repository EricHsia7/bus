"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[784],{6052:(e,t,n)=>{n.d(t,{c6:()=>p,pd:()=>v,z1:()=>m});var r=n(9566),a=n(3648),o=n(6189),i=n(904),c=n(9119),d=(0,a.bv)(".rs"),u=(0,a.aI)(d,".ws"),l=(0,a.aI)(u,".xs"),s=(0,a.aI)(l,'.ys[group="folder-name"] .bt input'),f=(0,a.aI)(l,'.ys[group="folder-icon"] .bt .ct input');function p(){var e=s.value,t=f.value;(0,r.vV)(e,t).then(function(e){e?(m(),(0,c.a)("已建立資料夾","folder")):(0,c.a)("無法建立資料夾","error")})}function v(){(0,i.WR)("FolderCreator"),d.setAttribute("displayed","true"),(0,i.Z_)()}function m(){d.setAttribute("displayed","false"),(0,i.l$)()}(0,a.aI)(l,'.rs .ws .xs .ys[group="folder-icon"] .bt .ct .dt').onclick=function(){(0,o.r7)("creator")}},6189:(e,t,n)=>{n.d(t,{Pk:()=>L,jW:()=>A,r7:()=>k});var r=n(9218),a=n(6788),o=n(972),i=n(8024),c=n(3648),d=n(4781),u=n(6082),l=n(4537),s=n(904),f=n(9119);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,a,o,i){try{var c=e[o](i),d=c.value}catch(e){return void n(e)}c.done?t(d):Promise.resolve(d).then(r,a)}var y="",h=(0,c.bv)(".wr"),b=(0,c.bv)(".rs"),g=(0,c.bv)(".i");function w(e){var t=document.createElement("div");return t.classList.add("it"),t.onclick=function(){!function(e){var t;switch(y){case"editor":t=(0,c.aI)(h,'._r .as .bs[group="folder-icon"] .fs .gs input');break;case"creator":t=(0,c.aI)(b,'.ws .xs .ys[group="folder-icon"] .bt .ct input')}t.value=e,A()}(e)},t.innerHTML=(0,l.Z)(e),{element:t,id:""}}function I(){var e;return e=function*(){var e=(0,c.aI)(g,".ft .gt");e.innerHTML="";var t=(0,i.zx)(),n=yield(0,r.l)(t);(0,a.LQ)(t);var o=new DocumentFragment;for(var d in n.symbols){var u=w(d);o.appendChild(u.element)}e.append(o)},I=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){m(o,r,a,i,c,"next",e)}function c(e){m(o,r,a,i,c,"throw",e)}i(void 0)})},I.apply(this,arguments)}function L(e){var t=(0,c.aI)(g,".ft .ht"),n=(0,c.aI)(g,".ft .gt");if(!(0,d.iO)(e)){var r,a=(0,o.U)(e),i=new DocumentFragment,u=p(a);try{for(u.s();!(r=u.n()).done;){var l=w(r.value.item);i.appendChild(l.element)}}catch(e){u.e(e)}finally{u.f()}t.innerHTML="",t.append(i),t.setAttribute("displayed",a.length>0?"true":"false"),n.setAttribute("displayed",a.length>0?"false":"true")}}function k(e){switch((0,s.WR)("FolderIconSelector"),e){case"editor":y="editor",(0,c.aI)(h,'._r .as .bs[group="folder-icon"] .fs .gs .hs');break;case"creator":y="creator",(0,c.aI)(b,'.ws .xs .ys[group="folder-icon"] .bt .ct .dt')}u.m?(g.setAttribute("displayed","true"),function(){I.apply(this,arguments)}(y),(0,o.L)()):(0,f.a)("資料還在下載中","download_for_offline")}function A(){(0,s.kr)("FolderIconSelector"),g.setAttribute("displayed","false")}},8379:(e,t,n)=>{n.d(t,{g:()=>y,m:()=>h});var r=n(9566),a=n(3648),o=n(9333),i=n(4537),c=n(904);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,a,o,i){try{var c=e[o](i),d=c.value}catch(e){return void n(e)}c.done?t(d):Promise.resolve(d).then(r,a)}var s=(0,a.bv)(".kr"),f=(0,a.aI)(s,".pr"),p=(0,a.aI)(f,".qr");function v(e){var t=document.createElement("div");t.classList.add("rr"),t.onclick=function(){(0,o.uy)(e.id)};var n=document.createElement("div");n.classList.add("sr"),n.innerHTML=(0,i.Z)(e.icon);var r=document.createElement("div");r.classList.add("tr"),r.appendChild(document.createTextNode(e.name));var a=document.createElement("div");a.classList.add("ur"),a.appendChild(document.createTextNode(String(e.contentLength)));var c=document.createElement("div");return c.classList.add("vr"),c.innerHTML=(0,i.Z)("arrow_forward_ios"),t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(c),{element:t,id:""}}function m(){var e;return e=function*(){var e=yield(0,r.Xi)();p.innerHTML="";var t,n=new DocumentFragment,a=d(e);try{for(a.s();!(t=a.n()).done;){var o=v(t.value);n.appendChild(o.element)}}catch(e){a.e(e)}finally{a.f()}p.append(n)},m=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){l(o,r,a,i,c,"next",e)}function c(e){l(o,r,a,i,c,"throw",e)}i(void 0)})},m.apply(this,arguments)}function y(){(0,c.WR)("FolderManager"),s.setAttribute("displayed","true"),function(){m.apply(this,arguments)}()}function h(){(0,c.kr)("FolderManager"),s.setAttribute("displayed","false")}},9333:(e,t,n)=>{n.d(t,{Bo:()=>_,I6:()=>C,uy:()=>A});var r=n(9566),a=n(8024),o=n(3648),i=n(6189),c=n(4537),d=n(904),u=n(9119);function l(e,t,n,r,a,o,i){try{var c=e[o](i),d=c.value}catch(e){return void n(e)}c.done?t(d):Promise.resolve(d).then(r,a)}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,o.bv)(".wr"),v=(0,o.aI)(p,".xr"),m=(0,o.aI)(v,".yr"),y=(0,o.aI)(p,"._r"),h=(0,o.aI)(y,".as"),b=(0,o.aI)(h,'.bs[group="folder-name"] .fs input'),g=(0,o.aI)(h,'.bs[group="folder-icon"] .fs .gs input'),w=(0,o.aI)(h,'.bs[group="folder-icon"] .fs .gs .hs'),I=(0,o.aI)(h,'.bs[group="folder-content"] .fs');function L(e,t){var n=(0,a.zx)(),i=document.createElement("div");i.id=n,i.classList.add("is"),i.setAttribute("type",t.type);var d="",l="",s="";switch(t.type){case"stop":s="location_on",d=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`,l=t.name;break;case"route":s="route",d=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`,l=t.name;break;case"location":s="location_on",d="地點",l=t.name;break;case"bus":d="",l=t.name;break;case"empty":s="lightbulb",d="提示",l="沒有內容";break;default:s="",d="null",l="null"}var f=document.createElement("div");f.classList.add("js"),f.innerHTML=(0,c.Z)(s);var v=document.createElement("div");v.classList.add("ks"),v.appendChild(document.createTextNode(d));var m=document.createElement("div");m.classList.add("ls"),m.appendChild(document.createTextNode(l));var y=document.createElement("div");y.classList.add("ms");var h=document.createElement("div");h.classList.add("ns"),h.innerHTML=(0,c.Z)("keyboard_arrow_down"),h.onclick=function(){E(n,e.id,t.type,t.id,"up")};var b=document.createElement("div");b.classList.add("os"),b.innerHTML=(0,c.Z)("keyboard_arrow_down"),b.onclick=function(){E(n,e.id,t.type,t.id,"down")};var g=document.createElement("div");g.classList.add("ps"),g.innerHTML=(0,c.Z)("delete"),g.onclick=function(){!function(e,t,n,a){var i=(0,o.aI)(p,`._r .as .bs[group="folder-content"] .fs .is#${e}`);(0,r.NC)(t,n,a).then(function(e){if(e)switch(i.remove(),n){case"stop":(0,u.a)("已移除站牌","delete");break;case"route":(0,u.a)("已移除路線","delete");break;case"location":(0,u.a)("已移除地點","delete")}else(0,u.a)("無法移除","error")})}(n,e.id,t.type,t.id)};var w=document.createElement("div");w.classList.add("qs");var I=document.createElement("div");return I.classList.add("qs"),y.appendChild(h),y.appendChild(b),y.appendChild(g),y.appendChild(w),y.appendChild(I),i.appendChild(f),i.appendChild(v),i.appendChild(m),i.appendChild(y),{element:i,id:n}}function k(){var e;return e=function*(e){!function(e,t){b.value=e.name,g.value=e.icon,m.onclick=function(){_(e.id)},I.innerHTML="";var n,r=new DocumentFragment,a=s(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,i=L(e,o);r.appendChild(i.element)}}catch(e){a.e(e)}finally{a.f()}I.append(r)}(yield(0,r.L2)(e),yield(0,r.eD)(e))},k=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){l(o,r,a,i,c,"next",e)}function c(e){l(o,r,a,i,c,"throw",e)}i(void 0)})},k.apply(this,arguments)}function A(e){(0,d.WR)("FolderEditor"),p.setAttribute("displayed","true"),function(e){k.apply(this,arguments)}(e),(0,d.Z_)()}function C(){p.setAttribute("displayed","false"),(0,d.l$)()}function E(e,t,n,a,i){var c=(0,o.aI)(p,`._r .as .bs[group="folder-content"] .fs .is#${e}`);(0,r.bq)(t,n,a,i).then(function(e){if(e)switch(i){case"up":var t=c.previousElementSibling;t&&c.parentNode.insertBefore(c,t),(0,u.a)("已往上移","arrow_circle_up");break;case"down":var n=c.nextElementSibling;n&&c.parentNode.insertBefore(n,c),(0,u.a)("已往下移","arrow_circle_down")}else(0,u.a)("無法移動","error")})}function _(e){var t=b.value,n=g.value;(0,r.g$)(e,t,n),C()}w.onclick=function(){(0,i.r7)("editor")}}}]);
//# sourceMappingURL=4e7eeb73b0b11a87fd51.js.map