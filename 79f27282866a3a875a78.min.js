!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,(()=>(()=>{"use strict";var t,e={4256:(t,e,r)=>{r.d(e,{_q:()=>l,pD:()=>u});var n=r(8024);function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function c(t,e){if(t){if("string"==typeof t)return i(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function u(t){return"".concat(t.city.join("")).concat(t.district.join("")).concat(t.road.join("、")).concat(t.road_section.sort((function(t,e){return t-e})).length>0?t.road_section.join("、")+"段":"").concat(t.alley.length>0?t.alley.sort((function(t,e){return t-e})).join("、")+"巷":"").concat(t.alley_branch.length>0?t.alley_branch.sort((function(t,e){return t-e})).join("、")+"弄":"").concat(t.doorplate.length>0?t.doorplate.sort((function(t,e){return t-e})).join("、")+"號":"").concat(t.floornumber.length>0?t.floornumber.join("、")+"樓":"").concat(t.direction.length>0?"（朝"+t.direction.join("、")+"）":"")}function l(t){var e,r=[],c={},i=o(t);try{for(i.s();!(e=i.n()).done;){var u=e.value;for(var l in u)c.hasOwnProperty(l)||(c[l]=0),u[l].length>0&&(c[l]=c[l]+1)}}catch(t){i.e(t)}finally{i.f()}var f=Object.entries(c).map((function(t){return{key:t[0],value:t[1]}})).filter((function(e){return e.value===t.length})).sort((function(t,e){return t.value-e.value}));if(f.length>0){var s,h=o(f);try{for(h.s();!(s=h.n()).done;){var d,v=s.value,p=[],g=o(t);try{for(g.s();!(d=g.n()).done;){u=d.value;p.push(u[v.key].join(""))}}catch(t){g.e(t)}finally{g.f()}(0,n.W8)(p)&&r.push({components:p,len:Math.max.apply(Math,a(p.map((function(t){return t.length}))))})}}catch(t){h.e(t)}finally{h.f()}}if(r.length>0)return(r=r.sort((function(t,e){return t.len-e.len})))[0].components;var y=t.length;return(0,n.VO)(y)}},8024:(t,e,r)=>{function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=a(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,c=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw c}}}}function a(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,{B5:()=>I,D9:()=>h,FU:()=>m,MR:()=>S,MX:()=>g,QX:()=>s,VO:()=>p,W8:()=>d,_N:()=>O,e5:()=>A,hw:()=>l,iO:()=>M,p1:()=>j,q_:()=>i,t9:()=>w,tH:()=>f,wg:()=>u,zx:()=>b});var c=r(3503);function i(t,e,r,n){var a=(i.canvas||(i.canvas=document.createElement("canvas"))).getContext("2d"),o="".concat(e," ").concat(r," ").concat(n);return a.font=o,a.measureText(t).width}function u(t,e,r,n,a,o,c){o="number"==typeof o?{tl:o,tr:o,br:o,bl:o}:{tl:o.tl||0,tr:o.tr||0,br:o.br||0,bl:o.bl||0},t.beginPath(),t.moveTo(e+o.tl,r),t.lineTo(e+n-o.tr,r),t.quadraticCurveTo(e+n,r,e+n,r+o.tr),t.lineTo(e+n,r+a-o.br),t.quadraticCurveTo(e+n,r+a,e+n-o.br,r+a),t.lineTo(e+o.bl,r+a),t.quadraticCurveTo(e,r+a,e,r+a-o.bl),t.lineTo(e,r+o.tl),t.quadraticCurveTo(e,r,e+o.tl,r),t.closePath(),t.fillStyle=c,t.fill()}function l(t,e){function r(t){return JSON.stringify({e:t})}var n=r(t),a=r(e),o=n.length,i=a.length;if(o===i){if(o>32||i>32){for(var u=c(n),l=c(a),f=!0,s=0;s<8;s++){if(u.charAt(s)!==l.charAt(s)){f=!1;break}}return f}return n===a}return!1}function f(t){for(var e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;t>=1024&&r<e.length-1;)t/=1024,r++;return"".concat(t.toFixed(2)," ").concat(e[r])}function s(t){for(var e=[],r=[],n=0;n<t.length;n++)0===n||t[n][0]-t[n-1][0]>0?(r.length>0&&e.push(r),r=[t[n]]):r.push(t[n]);return r.length>0&&e.push(r),e}function h(t,e){var r=t.length;if(r!==e.length)throw new Error("Arrays must have the same length");for(var n=0,a=0,o=0,c=0,i=0,u=0;u<r;u++)n+=t[u],a+=e[u],o+=t[u]*e[u],c+=Math.pow(t[u],2),i+=Math.pow(e[u],2);var l=r*o-n*a,f=Math.sqrt((r*c-Math.pow(n,2))*(r*i-Math.pow(a,2)));return 0===f?0:l/f}function d(t){for(var e=0;e<t.length;e++)for(var r=e+1;r<t.length;r++)if(t[e]===t[r])return!1;return!0}function v(t){for(var e="";t>0;){var r=(t-1)%26;e=String.fromCharCode(r+65)+e,t=Math.floor((t-1)/26)}return e}function p(t){for(var e=[],r=0;r<t;r++)e.push("地點".concat(v(r+1)));return e}function g(t){var e,r=[],a=[{vector:[0,0],label:"未知"},{vector:[0,1],label:"北"},{vector:[1,0],label:"東"},{vector:[0,-1],label:"南"},{vector:[-1,0],label:"西"},{vector:[Math.sqrt(2)/2,Math.sqrt(2)/2],label:"東北"},{vector:[Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"東南"},{vector:[-Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"西南"},{vector:[-Math.sqrt(2)/2,Math.sqrt(2)/2],label:"西北"}],o=n(t);try{for(o.s();!(e=o.n()).done;){var c,i=e.value,u=0,l=0,f=n(i);try{for(f.s();!(c=f.n()).done;){var s=c.value;u+=s[0],l+=s[1]}}catch(t){f.e(t)}finally{f.f()}var h,d=x([u,l]),v=[],p=n(a);try{for(p.s();!(h=p.n()).done;){var g=h.value,y=g.vector[0]*d[0]+g.vector[1]*d[1];v.push({label:g.label,dotProduct:y})}}catch(t){p.e(t)}finally{p.f()}var b=(v=v.sort((function(t,e){return e.dotProduct-t.dotProduct})))[0];r.push(b.label)}}catch(t){o.e(t)}finally{o.f()}return r}var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function b(){for(var t="".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","_"),e=0;e<16;e++){var r=Math.round(Math.random()*y.length);t+=y.substring(r,r+1)}return t}function m(t){return(((new Date).getTime()/t).toFixed(0)*t).toString(36)}function M(t){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(t)}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r=arguments.length>2?arguments[2]:void 0,n=new Blob([t],{type:e}),a=new File([n],r,{type:e});if(navigator.canShare&&navigator.canShare({files:[a]}))navigator.share({files:[a]}).catch((function(t){}));else{var o=URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=r,document.body.appendChild(c),c.click(),c.remove(),setTimeout((function(){URL.revokeObjectURL(o)}),1e4)}}function w(){return window.matchMedia("(display-mode: standalone)").matches}function x(t){var e=Math.hypot(t),r=[];if(e>0){var a,o=1/e,c=n(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;r.push(i*o)}}catch(t){c.e(t)}finally{c.f()}return r}return t}function j(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)}function A(t,e){var r=t.length;if(r<3)return t;for(var n=0,a=0;a<r;a++)n+=t[a];for(var o=n/r,c=0,i=0;i<r;i++)c+=Math.pow(t[i]-o,2);for(var u=Math.sqrt(c/r),l=[],f=0,s=0;s<r;s++){var h=Math.exp(t[s]/u);f+=h,l.push(h)}for(var d=Math.pow(r,1.37),v={},p=0;p<r;p++){var g="k_".concat(Math.floor(l[p]/f*d));v.hasOwnProperty(g)||(v[g]={sum:0,len:0}),v[g].sum+=t[p],v[g].len+=1}var y=[];for(var b in v){var m=v[b];y.push(Math.floor(m.sum/m.len))}return y.sort((function(t,e){return t-e})),y}function I(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[],n=t.length,a=0;a<n;a++){var o=t.charCodeAt(a);(r.indexOf(o)<0||!e)&&r.push(o)}return r}function O(t,e){var r=[];if(t.length<=e.length){var a,o=n(t);try{for(o.s();!(a=o.n()).done;){var c=a.value;e.indexOf(c)>-1&&r.push(c)}}catch(t){o.e(t)}finally{o.f()}}else{var i,u=n(e);try{for(u.s();!(i=u.n()).done;){var l=i.value;t.indexOf(l)>-1&&r.push(l)}}catch(t){u.e(t)}finally{u.f()}}return r}},8141:(t,e,r)=>{function n(t,e,r){var n=r.x-e.x,a=r.y-e.y,o=n*n+a*a,c=((t.x-e.x)*n+(t.y-e.y)*a)/o;if(c<0)n=t.x-e.x,a=t.y-e.y;else if(c>1)n=t.x-r.x,a=t.y-r.y;else{var i={x:e.x+c*n,y:e.y+c*a};n=t.x-i.x,a=t.y-i.y}return Math.sqrt(n*n+a*a)}function a(t,e){if(t.length<3)return t;for(var r=0,o=0,c=1;c<t.length-1;c++){var i=n(t[c],t[0],t[t.length-1]);i>r&&(o=c,r=i)}if(r>e){var u=t.slice(0,o+1),l=t.slice(o),f=a(u,e),s=a(l,e);return f.slice(0,f.length-1).concat(s)}return[t[0],t[t.length-1]]}function o(t,e){if(t.length<1)return"";for(var r="M".concat(t[0].x*e,",").concat(t[0].y*e),n=1;n<t.length-1;n++){var a=t[n],o=t[n+1]||a;r+="Q".concat(a.x*e,",").concat(a.y*e,",").concat((a.x*e+o.x*e)/2,",").concat((a.y*e+o.y*e)/2)}var c=t[t.length-1];return r+="L".concat(c.x*e,",").concat(c.y*e)}r.d(e,{p:()=>o,z:()=>a})},9469:(t,e,r)=>{r.d(e,{_:()=>c,i:()=>i});var n=r(8134),a=r(4690),o=r(3030);function c(){var t=new URL(location.href).searchParams.get("permalink");if(null!==t){var e=String(t);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(e)){var r=e.split(/[\@\~]/);switch(parseInt(r[0])){case 0:(0,n.Rk)(parseInt(r[1],16)).then((function(t){t.length>0?(0,a.SR)(t[0].id,t[0].pid):(0,n.k9)(r[2]).then((function(t){t.length>0&&(0,a.SR)(t[0].id,t[0].pid)}))}));break;case 1:var c=r[1];(0,o.so)(c)}}}}function i(t,e){var r=new URL("https://erichsia7.github.io/bus/");switch(t){case 0:r.searchParams.set("permalink","0@".concat(parseInt(e.id).toString(16),"~").concat(e.name));break;case 1:r.searchParams.set("permalink","1@".concat(e.hash))}return decodeURIComponent(r.toString())}},841:(t,e,r)=>{function n(t,e,r,n){var a=r*Math.PI/180-t*Math.PI/180,o=n*Math.PI/180-e*Math.PI/180,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))))}r.d(e,{b:()=>n})},3648:(t,e,r)=>{function n(t){return document.querySelector(t)}function a(t){return document.querySelectorAll(t)}function o(t,e){return t.querySelector(e)}function c(t,e){return t.querySelectorAll(e)}r.d(e,{aI:()=>o,bv:()=>n,e0:()=>a,jg:()=>c})},5579:(t,e,r)=>{function n(){var t=new Date,e=t.getDay(),r=t.getDate()-e,n=new Date;return n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function a(t,e,r,n){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(r),a.setMinutes(n),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(t.getFullYear()),a.setMonth(t.getMonth()),a.setDate(t.getDate()),a.setDate(a.getDate()+e),a}function o(t){var e=t.match(/[0-9\.]*/gm);if(e){var r=parseInt(e[0]),n=parseInt(e[2]),a=parseInt(e[4]),o=parseInt(e[6]),c=parseInt(e[8]),i=parseInt(e[10]),u=new Date;return u.setDate(1),u.setMonth(0),u.setFullYear(r),u.setMonth(n-1),u.setDate(a),u.setHours(o),u.setMinutes(c),u.setSeconds(i),u.getTime()}return 0}function c(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,t.getFullYear()).replaceAll(/M{2,2}/g,String(t.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(t.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(t.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(t.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(t.getSeconds()).padStart(2,"0"))}function i(t){var e=t.getTime(),r=Math.floor(((new Date).getTime()-e)/1e3),n=Math.floor(r/31536e3);return n>=1?"".concat(n,"年前"):(n=Math.floor(r/2592e3))>=1?"".concat(n,"個月前"):(n=Math.floor(r/86400))>=1?"".concat(n,"天前"):(n=Math.floor(r/3600))>=1?"".concat(n,"小時前"):(n=Math.floor(r/60))>=1?"".concat(n,"分鐘前"):"".concat(r,"秒前")}function u(t,e){switch(t=Math.round(t),e){case 0:return"".concat(t,"秒");case 1:return[r=String((t-t%60)/60),String(t%60)].map((function(t){return t.padStart(2,"0")})).join(":");case 2:var r=String(Math.floor(t/60));return"".concat(r,"分");case 3:if(t>=3600){var n=String(parseFloat((t/3600).toFixed(1)));return"".concat(n,"時")}if(60<=t&&t<3600){r=String(Math.floor(t/60));return"".concat(r,"分")}if(t<60)return"".concat(t,"秒");break;default:return"--"}}function l(t){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][t]}function f(t){return l(parseInt(t)-1)}function s(t){return"".concat(String(t.hours).padStart(2,"0"),":").concat(String(t.minutes).padStart(2,"0"))}r.d(e,{$T:()=>c,HN:()=>i,P$:()=>n,S1:()=>a,Zn:()=>o,fU:()=>u,kd:()=>l,mr:()=>f,pn:()=>s})}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={id:t,loaded:!1,exports:{}};return e[t](o,o.exports,n),o.loaded=!0,o.exports}n.m=e,t=[],n.O=(e,r,a,o)=>{if(!r){var c=1/0;for(f=0;f<t.length;f++){for(var[r,a,o]=t[f],i=!0,u=0;u<r.length;u++)(!1&o||c>=o)&&Object.keys(n.O).every((t=>n.O[t](r[u])))?r.splice(u--,1):(i=!1,o<c&&(c=o));if(i){t.splice(f--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var f=t.length;f>0&&t[f-1][2]>o;f--)t[f]=t[f-1];t[f]=[r,a,o]},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.u=t=>({132:"1b8b8854ae98108b421e",148:"6263d1cb68695d5439b0",152:"d3d70f08aba9045c7810",332:"d2e5e6feb1651ba6c722",648:"f523bd06cb542838f829",892:"31c74de07a7678303fe2"}[t]+".min.js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="./",(()=>{n.b=document.baseURI||self.location.href;var t={687:0,827:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var a,o,[c,i,u]=r,l=0;if(c.some((e=>0!==t[e]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(u)var f=u(n)}for(e&&e(r);l<c.length;l++)o=c[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(f)},r=self.webpackChunkbus=self.webpackChunkbus||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var a=n.O(void 0,[609,331,790,592,765,491,354,350,935,799,802,446,84,777,462,762,853,874,977,680,150,335,827,724,794,238,69,236,960,927],(()=>n(4381)));return a=(a=n.O(a)).default})()));
//# sourceMappingURL=79f27282866a3a875a78.min.js.map