"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(t,e,a){a.d(e,{a:()=>ut,b:()=>lt,c:()=>G,d:()=>ot,e:()=>nt});var i=a(467),s=a(5767),r=a(9566),d=a(3422),n=a(5314),l=a(7123),o=a(3459),u=a(8179),p=a(7968),c=a(8024),h=a(9915),f=a(5579),v=a(4537),b=a(904),m=a(3030),g=a(9119),A=a(4373),y=a(3041),C=a(752),L=(0,u.c)(".gi"),w=(0,u.e)(L,".qi"),x=(0,u.e)(w,".ti"),k=(0,u.e)(x,"span"),T=(0,u.e)(w,".si"),j=(0,u.e)(w,".zi ._i"),_=(0,u.e)(w,".ui"),R=(0,u.e)(_,".vi"),P=(0,u.e)(w,".xi"),$=(0,u.e)(P,".yi"),S=(0,u.e)(L,".bj"),I={},D=!1,E=!1,N=0,B=0,M=0,F={},q=0,z=!1,Q=new h.a(function(){return rt.apply(this,arguments)},15e3),H=0,U=[],W=(0,c.e)();function G(){S.addEventListener("touchstart",function(){N=Math.round(S.scrollLeft/q)},{passive:!0}),S.addEventListener("scroll",function(t){z=!0;var e=t.target.scrollLeft/q;B=e>N?N+1:N-1;var a=e-N,i=Math.abs(a);i>1&&(a>0?(N=Math.floor(e),B=N+1):(N=Math.ceil(e),B=N-1),i=Math.abs(e-N));var s=F[`g_${N}`]||{width:0,offset:0},r=F[`g_${B}`]||{width:0,offset:0},d=s.width+(r.width-s.width)*i,n=-1*(s.offset+(r.offset-s.offset)*i)+.5*q-.5*d;J(M,n,d-20,e)},{passive:!0}),S.addEventListener("scrollend",function(t){var e=t.target.scrollLeft/q,a=e-B;-.01<a&&a<.01&&(N=Math.round(e),z=!1)},{passive:!0})}function J(t,e,a,i){S.style.setProperty("--fi",t.toString()),$.style.setProperty("--ki",a.toString()),R.style.setProperty("--li",`${e.toFixed(W)}px`),R.style.setProperty("--ni",i.toString())}function K(t){j.style.setProperty("--pi",`${t.toString()}ms`),j.classList.add("aj")}function O(t){var e=t,a=e.detail.progress-1;j.style.setProperty("--oi",a.toString()),"end"===e.detail.stage&&document.removeEventListener(e.detail.target,O)}function V(t){var e=(0,u.a)();e.classList.add("kj"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0"),e.style.setProperty("--yk",t.toString());var a=(0,u.a)();a.classList.add("lj");var i=(0,u.a)();i.classList.add("zk"),i.setAttribute("displayed","false"),a.appendChild(i);var s=(0,u.a)();s.classList.add("mj");var r=(0,u.a)();r.classList.add("la"),r.setAttribute("code","0"),r.setAttribute("displayed","false"),s.appendChild(r);var d=(0,u.a)();return d.classList.add("ma"),d.setAttribute("code","0"),d.setAttribute("displayed","true"),s.appendChild(d),e.appendChild(a),e.appendChild(s),e}function X(t){var e=(0,u.a)();e.classList.add("gj"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var a=(0,u.a)();a.classList.add("hj");var i=(0,u.a)();i.classList.add("ij"),a.appendChild(i);var s=(0,u.a)();s.classList.add("jj");var r=(0,u.a)();r.classList.add("_k");var d=(0,u.a)();d.classList.add("la"),d.setAttribute("code","0"),d.setAttribute("displayed","false"),r.appendChild(d);var n=(0,u.a)();n.classList.add("ma"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),r.appendChild(n),s.appendChild(r);var l=(0,u.a)();l.classList.add("al"),l.appendChild((0,v.b)("keyboard_arrow_down")),l.onclick=function(){!function(t,e){var a=(0,u.e)(t,".cl"),i=t.parentElement,s=e.parentElement,r=(0,u.f)(e,"kj"),d=(0,u.f)(t,"gj"),n=d.length,l=i.getBoundingClientRect(),o=t.getBoundingClientRect(),p=s.getBoundingClientRect(),c=e.getBoundingClientRect(),h=c.top-p.top,f=o.top-l.top,v="true"===t.getAttribute("stretched"),b="true"===t.getAttribute("animation");if(b){var m=v?"2":"1";e.setAttribute("stretching","true"),e.style.setProperty("--pm",`${h}px`),t.setAttribute("stretching","true"),t.style.setProperty("--rm",`${f}px`);for(var g=0;g<n;g++){var A=d[g],y=r[g];y.setAttribute("push-direction",m),y.setAttribute("push-state","1"),A.setAttribute("push-direction",m),A.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){console.log(1,performance.now());for(var a=0;a<n;a++){var i=d[a],s=r[a];s.setAttribute("push-direction","0"),s.setAttribute("push-state","0"),i.setAttribute("push-direction","0"),i.setAttribute("push-state","0")}e.setAttribute("stretching","false"),t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){console.log(0,performance.now());for(var t=0;t<n;t++){var e=d[t];r[t].setAttribute("push-state","2"),e.setAttribute("push-state","2")}},{once:!0})}v?(b?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"),e.setAttribute("stretched","true"))}(e,t)},s.appendChild(l);var o=(0,u.a)();o.classList.add("bl"),s.appendChild(o),a.appendChild(s);var p=(0,u.a)();p.classList.add("cl"),p.setAttribute("displayed","false");var c=(0,u.a)();c.classList.add("dl");var h=(0,u.a)();h.classList.add("el"),h.setAttribute("highlighted","true"),h.setAttribute("type","tab"),h.setAttribute("code","0"),h.onclick=function(){ct(e,0)};var f=(0,u.a)();f.classList.add("fl"),f.appendChild((0,v.b)("directions_bus")),h.appendChild(f),h.appendChild(document.createTextNode("公車")),c.appendChild(h);var b=(0,u.a)();b.classList.add("el"),b.setAttribute("highlighted","false"),b.setAttribute("type","tab"),b.setAttribute("code","1"),b.onclick=function(){ct(e,1)};var m=(0,u.a)();m.classList.add("fl"),m.appendChild((0,v.b)("departure_board")),b.appendChild(m),b.appendChild(document.createTextNode("抵達時間")),c.appendChild(b);var g=(0,u.a)();g.classList.add("el"),g.setAttribute("highlighted","false"),g.setAttribute("type","tab"),g.setAttribute("code","2"),g.onclick=function(){ct(e,2)};var A=(0,u.a)();A.classList.add("fl"),A.appendChild((0,v.b)("route")),g.appendChild(A),g.appendChild(document.createTextNode("路線")),c.appendChild(g);var y=(0,u.a)();y.classList.add("el"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){ct(e,3)};var C=(0,u.a)();C.classList.add("fl"),C.appendChild((0,v.b)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),c.appendChild(y);var L=(0,u.a)();L.classList.add("el"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var w=(0,u.a)();w.classList.add("fl"),w.appendChild((0,v.b)("folder")),L.appendChild(w),L.appendChild(document.createTextNode("儲存")),c.appendChild(L);var x=(0,u.a)();x.classList.add("el"),x.setAttribute("highlighted","false"),x.setAttribute("type","schedule-notification"),x.setAttribute("enabled","true");var k=(0,u.a)();k.classList.add("fl"),k.appendChild((0,v.b)("notifications")),x.appendChild(k),x.appendChild(document.createTextNode("通知")),c.appendChild(x),p.appendChild(c);var T=(0,u.a)();T.classList.add("gl"),T.setAttribute("displayed","true"),p.appendChild(T);var j=(0,u.a)();j.classList.add("hl"),j.setAttribute("displayed","false"),p.appendChild(j);var _=(0,u.a)();_.classList.add("il"),_.setAttribute("displayed","false"),p.appendChild(_);var R=(0,u.a)();return R.classList.add("jl"),R.setAttribute("displayed","false"),p.appendChild(R),e.appendChild(a),e.appendChild(p),e}function Y(){var t=(0,u.a)();t.classList.add("cj");var e=(0,u.a)();e.classList.add("dj");var a=(0,u.a)();a.classList.add("ej");var i=(0,u.a)();i.classList.add("kl");var s=(0,u.a)();s.classList.add("fj");var r=(0,u.a)();return r.classList.add("ll"),s.appendChild(r),a.appendChild(i),e.appendChild(a),e.appendChild(s),t.appendChild(e),t}function Z(){var t=(0,u.a)();t.classList.add("wi");var e=document.createElement("span");return t.appendChild(e),t}function tt(){var t=(0,u.a)();t.classList.add("ml"),t.setAttribute("on-this-route","false");var e=(0,u.a)();e.classList.add("nl");var a=(0,u.a)();a.classList.add("ol"),a.appendChild((0,v.b)("directions_bus"));var i=(0,u.a)();i.classList.add("pl");var s=(0,u.a)();s.classList.add("ql");var r=(0,u.a)();r.classList.add("rl");var d=(0,u.a)();d.classList.add("sl");var n=(0,u.a)();return n.classList.add("tl"),e.appendChild(a),e.appendChild(i),t.appendChild(e),s.appendChild(r),s.appendChild(d),s.appendChild(n),t.appendChild(s),t}function et(){var t=(0,u.a)();t.classList.add("ul");var e=(0,u.a)();e.classList.add("vl");var a=(0,u.a)();a.classList.add("wl"),a.appendChild((0,v.b)("route"));var i=(0,u.a)();i.classList.add("xl");var s=(0,u.a)();s.classList.add("yl");var r=(0,u.a)();r.classList.add("zl");var d=(0,u.a)();d.classList.add("_l"),d.setAttribute("type","view-route"),d.innerText="查看路線";var n=(0,u.a)();return n.classList.add("_l"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存路線",e.appendChild(a),e.appendChild(i),t.appendChild(e),t.appendChild(s),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function at(){var t=(0,u.a)();t.classList.add("am");var e=(0,u.a)();e.classList.add("bm");var a=(0,u.a)();a.classList.add("cm"),a.appendChild((0,v.b)("calendar_view_day"));var i=(0,u.a)();i.classList.add("dm");var s=(0,u.a)();s.classList.add("em");var r=(0,u.a)();return r.classList.add("fm"),e.appendChild(a),e.appendChild(i),e.appendChild(s),t.appendChild(e),t.appendChild(r),t}function it(){var t=(0,u.a)();t.classList.add("gm");var e=(0,u.a)();e.classList.add("hm");var a=(0,u.a)();a.classList.add("im"),a.appendChild((0,v.b)("location_on"));var i=(0,u.a)();i.classList.add("jm");var s=(0,u.a)();s.classList.add("km");var r=(0,u.a)();r.classList.add("lm");var d=(0,u.a)();d.classList.add("mm"),d.setAttribute("type","view-location"),d.innerText="查看地點";var n=(0,u.a)();return n.classList.add("mm"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存地點",e.appendChild(a),e.appendChild(i),t.appendChild(e),t.appendChild(s),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function st(t,e,a){var i,s;function n(e,a,i,s,n,l){function o(t,e,a,i,s){var r=(0,u.e)(e,".mj"),d=(0,u.e)(r,".ma"),n=(0,u.e)(r,".la"),l=(0,u.e)(t,"._k"),o=(0,u.e)(l,".ma"),p=(0,u.e)(l,".la");if(n.setAttribute("code",a.status.code.toString()),p.setAttribute("code",a.status.code.toString()),p.innerText=a.status.text,!i&&s){var c=t.getBoundingClientRect(),h=c.top,f=c.left,v=c.bottom,b=c.right,m=window.innerWidth,g=window.innerHeight;if(v>0&&h<g&&b>0&&f<m)return d.addEventListener("animationend",function(){d.setAttribute("code",a.status.code.toString()),d.classList.remove("qb"),n.setAttribute("displayed","false")},{once:!0}),o.addEventListener("animationend",function(){o.setAttribute("code",a.status.code.toString()),o.innerText=a.status.text,o.classList.remove("qb"),p.setAttribute("displayed","false")},{once:!0}),p.setAttribute("displayed","true"),n.setAttribute("displayed","true"),d.classList.add("qb"),void o.classList.add("qb")}d.setAttribute("code",a.status.code.toString()),o.setAttribute("code",a.status.code.toString()),o.innerText=a.status.text}function p(t,e,a){t.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer)),e.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer))}function h(t,e){(0,u.e)(t,".ij").innerText=e.name}function v(t,e){var a=(0,u.e)(t,".gl"),i=Array.from((0,u.d)(a,".ml")),s=i.length,r=e.buses.length,d=s-r;if(d<0){for(var n=new DocumentFragment,l=0;l>d;l--){var o=tt();n.appendChild(o),i.push(o)}a.append(n)}else if(d>0)for(var p=s-1,h=s-d-1;p>h;p--)i[p].remove(),i.splice(p,1);for(var f=0;f<r;f++){var v=e.buses[f],b=i[f],m=(0,u.e)(b,".nl"),g=(0,u.e)(m,".pl"),A=(0,u.e)(b,".ql"),y=(0,u.e)(A,".rl"),C=(0,u.e)(A,".sl"),L=(0,u.e)(A,".tl");b.setAttribute("on-this-route",(0,c.a)(v.onThisRoute)),g.innerText=v.carNumber,y.innerText=`路線：${v.RouteName}`,C.innerText=`狀態：${v.status.text}`,L.innerText=`類型：${v.type}`}a.setAttribute("empty",(0,c.a)(0===r))}function b(t,e){var a=(0,u.e)(t,".hl"),i=Array.from((0,u.d)(a,".ul")),s=i.length,d=e.overlappingRoutes.length,n=s-d;if(n<0){for(var l=new DocumentFragment,o=0;o>n;o--){var p=et();l.appendChild(p),i.push(p)}a.append(l)}else if(n>0)for(var h=s-1,f=s-n-1;h>f;h--)i[h].remove(),i.splice(h,1);for(var v=0;v<d;v++){var b=e.overlappingRoutes[v],m=i[v],g=(0,u.e)(m,".vl"),A=(0,u.e)(g,".xl"),C=(0,u.e)(m,".yl"),L=(0,u.e)(m,".zl"),w=(0,u.e)(L,'._l[type="view-route"]'),x=(0,u.e)(L,'._l[type="save-to-folder"]');A.innerText=b.name,C.innerText=b.RouteEndPoints.text,function(t,e,a){t.onclick=function(){pt(e,a)}}(w,b.RouteID,b.PathAttributeId),function(t,e){t.onclick=function(){(0,y.c)("route",[e],t)},(0,r.e)("route",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(x,b.RouteID)}a.setAttribute("empty",(0,c.a)(0===d))}function g(t,e){var a=(0,u.e)(t,".il"),i=Array.from((0,u.d)(a,".am")),s=i.length,r=e.busArrivalTimes.length,d=s-r;if(d<0){for(var n=new DocumentFragment,l=0;l>d;l--){var o=at();n.appendChild(o),i.push(o)}a.append(n)}else if(d>0)for(var p=s-1,h=s-d-1;p>h;p--)i[p].remove(),i.splice(p,1);for(var v=0;v<r;v++){var b=e.busArrivalTimes[v],m=i[v],g=(0,u.e)(m,".bm"),A=(0,u.e)(g,".dm"),y=(0,u.e)(g,".em"),C=(0,u.e)(m,".fm");A.innerText=b.personalSchedule.name,y.innerText=`週${(0,f.e)(b.day).name} ${(0,f.g)(b.personalSchedule.period.start)} - ${(0,f.g)(b.personalSchedule.period.end)}`,C.innerHTML=b.chart}a.setAttribute("empty",(0,c.a)(0===r))}function A(t,e){var a=(0,u.e)(t,".jl"),i=Array.from((0,u.d)(a,".gm")),s=i.length,d=e.nearbyLocations.length,n=s-d;if(n<0){for(var l=new DocumentFragment,o=0;o>n;o--){var p=it();l.appendChild(p),i.push(p)}a.append(l)}else if(n>0)for(var h=s-1,f=s-n-1;h>f;h--)i[h].remove(),i.splice(h,1);for(var v=0;v<d;v++){var b=e.nearbyLocations[v],g=i[v],A=(0,u.e)(g,".hm"),C=(0,u.e)(A,".jm"),L=(0,u.e)(g,".km"),w=(0,u.e)(g,".lm"),x=(0,u.e)(w,'.mm[type="view-location"]'),k=(0,u.e)(w,'.mm[type="save-to-folder"]');C.innerText=b.name,L.innerText=`${b.distance}公尺`,function(t,e){t.onclick=function(){(0,m.d)(e)}}(x,b.hash),function(t,e){t.onclick=function(){(0,y.c)("location",[e],t)},(0,r.e)("location",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(k,b.hash)}a.setAttribute("empty",(0,c.a)(0===d))}function L(t,e,a){t.setAttribute("nearest",(0,c.a)(a.nearest)),e.setAttribute("nearest",(0,c.a)(a.nearest))}function w(t,e,a,i,s){var r=(null==a?void 0:a.progress)||0,d=(null==e?void 0:e.progress)||0,n=(0,u.e)(t,".lj .zk");if(!i&&s&&0!==r&&0===d&&Math.abs(d-r)>0)return n.style.setProperty("--nm","100%"),void n.addEventListener("transitionend",function(){n.setAttribute("displayed","false"),n.style.setProperty("--nm","-100%")},{once:!0});d>0?(n.setAttribute("displayed","true"),n.style.setProperty("--nm",100*(d-1)+"%")):n.setAttribute("displayed","false")}function x(t,e,a){a&&((0,u.e)(t,".cl").setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false"))}function k(t,e,a){t.setAttribute("animation",(0,c.a)(a)),e.setAttribute("animation",(0,c.a)(a))}function T(t,e,a){t.setAttribute("skeleton-screen",(0,c.a)(a)),e.setAttribute("skeleton-screen",(0,c.a)(a))}function j(e,a){var i=(0,u.e)(e,'.cl .dl .el[type="save-to-folder"]');i.onclick=function(){(0,y.c)("stop",[a.id,t.RouteID],i)},(0,r.e)("stop",a.id).then(function(t){i.setAttribute("highlighted",(0,c.a)(t))})}function _(e,a){var i=(0,u.e)(e,'.cl .dl .el[type="schedule-notification"]');i.onclick=function(){(0,C.c)(i,a.id,t.RouteID,a.status.time)};var s=(0,d.r)(a.id);i.setAttribute("highlighted",(0,c.a)(s))}null===s?(o(e,a,i,n,l),h(e,i),v(e,i),b(e,i),g(e,i),A(e,i),p(e,a,i),L(e,a,i),w(a,i,s,n,l),x(e,a,n),k(e,a,l),T(e,a,n),j(e,i),_(e,i)):(i.status.time!==s.status.time&&(o(e,a,i,n,l),_(e,i)),(0,c.b)(s.buses,i.buses)||v(e,i),(0,c.b)(s.busArrivalTimes,i.busArrivalTimes)||g(e,i),s.nearest!==i.nearest&&L(e,a,i),s.progress!==i.progress&&w(a,i,s,n,l),s.id!==i.id&&(h(e,i),p(e,a,i),b(e,i),A(e,i),j(e,i),_(e,i)),D!==l&&k(e,a,l),E!==n&&(x(e,a,n),T(e,a,n)))}var l=(0,b.d)("window"),o=l.width,h=l.height,v=t.groupQuantity,g=t.itemQuantity,L=t.groupedItems,w=t.groupNames;M=v,q=o;for(var j=0,$=0;$<v;$++){var B=`g_${$}`,Q=(0,p.c)(w[$],500,"17px",'"Noto Sans TC", sans-serif')+20;F[B]={width:Q,offset:j},j+=Q}if(F[`g_${v}`]={width:0,offset:j},!z){var H=F[`g_${N}`],U=-1*H.offset+.5*q-.5*H.width,W=H.width-20;J(M,U,W,N)}E!==e&&(x.setAttribute("skeleton-screen",(0,c.a)(e)),_.setAttribute("skeleton-screen",(0,c.a)(e)),P.setAttribute("skeleton-screen",(0,c.a)(e))),D!==a&&(x.setAttribute("animation",(0,c.a)(a)),_.setAttribute("animation",(0,c.a)(a)),P.setAttribute("animation",(0,c.a)(a))),(null===(i=I)||void 0===i?void 0:i.RouteID)!==t.RouteID&&(T.onclick=function(){(0,A.c)(t.RouteID,t.PathAttributeId)}),(null===(s=I)||void 0===s?void 0:s.RouteName)!==t.RouteName&&(k.innerText=t.RouteName);var G=Array.from((0,u.d)(S,".cj")),K=Array.from((0,u.d)(R,".wi")),O=G.length;if(v!==O){var st=O-v;if(st<0){for(var rt=new DocumentFragment,dt=new DocumentFragment,nt=0;nt>st;nt--){var lt=Y();rt.appendChild(lt),G.push(lt);var ot=Z();dt.appendChild(ot),K.push(ot)}S.append(rt),R.append(dt)}else if(st>0)for(var ut=O-1,ct=O-st-1;ut>ct;ut--)G[ut].remove(),G.splice(ut,1),K[ut].remove(),K.splice(ut,1)}for(var ht=0;ht<v;ht++){var ft=`g_${ht}`,vt=G[ht],bt=(0,u.e)(vt,".fj"),mt=(0,u.e)(vt,".ej"),gt=Array.from((0,u.d)(bt,".gj")),At=Array.from((0,u.d)(mt,".kj")),yt=gt.length;if(g[ft]!==yt){var Ct=yt-g[ft];if(Ct<0){for(var Lt=new DocumentFragment,wt=new DocumentFragment,xt=0;xt>Ct;xt--){var kt=V(-1*yt+xt),Tt=X(kt);Lt.appendChild(Tt),gt.push(Tt),wt.appendChild(kt),At.push(kt)}bt.append(Lt),mt.append(wt)}else if(Ct>0)for(var jt=yt-1,_t=yt-Ct-1;jt>_t;jt--)gt[jt].remove(),gt.splice(jt,1),At[jt].remove(),At.splice(jt,1)}var Rt=K[ht];(0,u.e)(Rt,"span").innerText=w[ht],Rt.style.setProperty("--hi",`${F[ft].offset}px`),Rt.style.setProperty("--ii",`${F[ft].width}px`),Rt.style.setProperty("--ji",ht.toString()),e&&(vt.scrollTop=0);for(var Pt=0;Pt<g[ft];Pt++){var $t=gt[Pt],St=At[Pt],It=L[ft][Pt];if((0,c.f)(I,"groupedItems"))if((0,c.f)(I.groupedItems,ft))if(I.groupedItems[ft][Pt])n($t,St,It,I.groupedItems[ft][Pt],e,a);else n($t,St,It,null,e,a);else n($t,St,It,null,e,a);else n($t,St,It,null,e,a)}}R.style.setProperty("--mi",`${j}px`),I=t,D=a,E=e}function rt(){return(rt=(0,i.a)(function*(){try{var t=(0,o.b)("playing_animation"),e=(0,o.b)("refresh_interval"),a=(0,b.d)("route-bus-arrival-time-chart"),i=(0,c.c)();j.setAttribute("refreshing","true"),j.classList.remove("aj"),document.addEventListener(i,O);var r=yield(0,l.a)(H,U,a.width,a.height,i);st(r,!1,t);var d=0;e.dynamic&&(d=yield(0,s.c)());var n=(new Date).getTime(),u=0;u=e.dynamic?Math.max(n+5e3,r.dataUpdateTime+e.baseInterval/d):n+e.baseInterval,j.setAttribute("refreshing","false");var p=Math.max(5e3,u-n);return K(p),p}catch(t){var h=1e4;return(0,g.a)("error","路線發生錯誤，將在10秒後重試。"),K(h),h}})).apply(this,arguments)}function dt(t,e){H=t,U=e,N=0,F={},S.scrollLeft=0,S.focus(),function(t,e){for(var a=(0,o.b)("playing_animation"),i=(0,b.d)("window"),s=(i.width,i.height),r=Math.floor(s/50)+5,d={},n=0;n<2;n++){var l=`g_${n}`;d[l]=[];for(var u=0;u<r;u++)d[l].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:u,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}st({groupNames:["往載入中","往載入中"],groupedItems:d,groupQuantity:2,itemQuantity:{g_0:r,g_1:r},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:t,PathAttributeId:e,dataUpdateTime:0},!0,a)}(t,e),Q.isPaused?Q.resume(!0):Q.tick()}function nt(){L.setAttribute("displayed","true")}function lt(){L.setAttribute("displayed","false")}function ot(t,e){(0,b.c)("Route"),(0,n.e)("route",t),nt(),dt(t,e),(0,b.b)()}function ut(){lt(),Q.pause(),(0,b.i)(),(0,b.e)("Route")}function pt(t,e){Q.pause(),ot(t,e)}function ct(t,e){var a=(0,u.e)(t,".dl"),i=(0,u.d)(a,'.el[highlighted="true"][type="tab"]');for(var s of i)s.setAttribute("highlighted","false");switch((0,u.e)(a,`.el[code="${e}"]`).setAttribute("highlighted","true"),e){case 0:(0,u.e)(t,".gl").setAttribute("displayed","true"),(0,u.e)(t,".il").setAttribute("displayed","false"),(0,u.e)(t,".hl").setAttribute("displayed","false"),(0,u.e)(t,".jl").setAttribute("displayed","false");break;case 1:(0,u.e)(t,".gl").setAttribute("displayed","false"),(0,u.e)(t,".il").setAttribute("displayed","true"),(0,u.e)(t,".hl").setAttribute("displayed","false"),(0,u.e)(t,".jl").setAttribute("displayed","false");break;case 2:(0,u.e)(t,".gl").setAttribute("displayed","false"),(0,u.e)(t,".il").setAttribute("displayed","false"),(0,u.e)(t,".hl").setAttribute("displayed","true"),(0,u.e)(t,".jl").setAttribute("displayed","false");break;case 3:(0,u.e)(t,".gl").setAttribute("displayed","false"),(0,u.e)(t,".il").setAttribute("displayed","false"),(0,u.e)(t,".hl").setAttribute("displayed","false"),(0,u.e)(t,".jl").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=e84ddcb628d77342834a.js.map