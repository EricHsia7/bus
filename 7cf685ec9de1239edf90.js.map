{"version":3,"file":"7cf685ec9de1239edf90.js","mappings":"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","sources":["webpack://bus/./src/interface/route-calendar/index.ts","webpack://bus/./src/interface/route-details/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/schedule-notification/index.ts"],"sourcesContent":["import { SimplifiedRouteItem } from '../../data/apis/getRoute/index';\nimport { integratedRouteCalendar, integrateRouteCalendar } from '../../data/route/calendar';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { generateRoundedRectPath } from '../../tools/graphic';\nimport { generateIdentifier } from '../../tools/index';\nimport { dateToString, offsetDate } from '../../tools/time';\nimport { hidePreviousPage, pushPageHistory, querySize, revokePageHistory, showPreviousPage } from '../index';\n\nconst routeCalendarField = documentQuerySelector('.css_route_calendar_field');\nconst headElement = elementQuerySelector(routeCalendarField, '.css_route_calendar_head');\nconst dateElement = elementQuerySelector(headElement, '.css_route_calendar_date');\nconst timelinesElement = elementQuerySelector(routeCalendarField, '.css_route_calendar_timelines');\nconst timelineElements = Array.from(elementQuerySelectorAll(timelinesElement, '.css_route_calendar_timeline'));\n\nlet currentDate = new Date();\nlet currentIntegration = {} as integratedRouteCalendar;\nconst currentTimelineSVGs = ['', '', ''];\n\nlet routeCalendarSliding_fieldWidth: number = 0;\nlet routeCalendarSliding_initialized: boolean = false;\n\nfunction generateRouteCalendarSVG(integration: integratedRouteCalendar, date: Date, width: number): string {\n  const verticalPadding = 10;\n  const fontFamily = \"'Noto Sans TC', sans-serif\";\n\n  const gridLabelWidth = 35;\n  const gridHeight = 70;\n  const gridLineLabelFontWeight = 400;\n  const gridLineLabelFontSize = 10;\n\n  const borderRadius = 5;\n  const decorationWidth = 3;\n  const eventBoxPadding = 3;\n  const eventBoxFontWeight = 500;\n  const eventBoxFontSize = 15;\n\n  const gridLinePathCommands = [];\n  const gridLineLabels = [];\n  for (let i = 0; i < 24; i++) {\n    const text = `${i.toString().padStart(2, '0')}:00`;\n    const textWidth = 30;\n    const textHeight = 12;\n    // TODO: measure text width and height\n    const y = i * gridHeight + verticalPadding;\n    gridLinePathCommands.push(`M${gridLabelWidth} ${y}`, `h${width - gridLabelWidth}`);\n    gridLineLabels.push(`<text x=\"${gridLabelWidth - textWidth}\" y=\"${y + 3}\" font-weight=\"${gridLineLabelFontWeight}\" font-size=\"${gridLineLabelFontSize}\" font-family=\"${fontFamily}\" component=\"gridline-label\">${text}</text>`);\n  }\n\n  const gridLine = `<path d=\"${gridLinePathCommands.join(' ')}\" fill=\"none\" stroke-width=\"0.35\" component=\"gridline\"/>`;\n  const height = gridHeight * 24 + verticalPadding * 2;\n\n  const day = date.getDay();\n  const index = day < 1 ? 6 : day - 1;\n  const events = integration.repeated[index];\n  const scheduledEvents = integration.scheduled;\n  const date2 = offsetDate(date, 0, 0, integration.timeZoneOffset - date.getTimezoneOffset());\n  const eventDate = [date2.getFullYear(), date2.getMonth() + 1, date2.getDate()];\n  for (let i = scheduledEvents.length - 1; i >= 0; i--) {\n    if (eventDate[0] === scheduledEvents[i].date[0] && eventDate[1] === scheduledEvents[i].date[1] && eventDate[2] === scheduledEvents[i].date[2]) {\n      events.push({\n        type: 'repeated',\n        time: scheduledEvents[i].time,\n        interval: scheduledEvents[i].interval,\n        count: scheduledEvents[i].count,\n        day: day\n      });\n    }\n  }\n\n  const eventBoxPathCommands = [];\n  const eventBoxDecorationPathCommands = [];\n  const eventBoxTexts = [];\n  const minutesPerDay = 24 * 60;\n  for (let i = events.length - 1; i >= 0; i--) {\n    const x = gridLabelWidth;\n    const y = (events[i].time[0] / minutesPerDay) * height;\n    const boxWidth = width - gridLabelWidth;\n    const boxHeight = ((events[i].time[1] - events[i].time[0]) / minutesPerDay) * height;\n    const startMinutes = events[i].time[0] % 60;\n    const startHours = (events[i].time[0] - startMinutes) / 60;\n    const endMinutes = events[i].time[1] % 60;\n    const endHours = (events[i].time[1] - endMinutes) / 60;\n    const title = `${startHours.toString().padStart(2, '0')}:${startMinutes.toString().padStart(2, '0')} - ${endHours.toString().padStart(2, '0')}:${endMinutes.toString().padStart(2, '0')}`;\n    const titleWidth = 30;\n    const titleHeight = 17;\n    const description = `每${events[i].interval[0] === events[i].interval[1] ? events[i].interval[0] : events[i].interval.join(' - ')}分鐘一班 | ${events[i].count[0] === events[i].count[1] ? events[i].count[0] : events[i].count.join(' - ')}班`;\n    const descriptionWidth = 30;\n    const descriptionHeight = 17;\n    Array.prototype.push.apply(eventBoxPathCommands, generateRoundedRectPath(x, y, boxWidth, boxHeight, borderRadius, false));\n    eventBoxDecorationPathCommands.push(`M${x + eventBoxPadding} ${y + eventBoxPadding}`, `v${boxHeight - eventBoxPadding * 2}`);\n    eventBoxTexts.push(`<text x=\"${x + eventBoxPadding + decorationWidth + eventBoxPadding}\" y=\"${y + eventBoxPadding + titleHeight}\" font-weight=\"${eventBoxFontWeight}\" font-size=\"${eventBoxFontSize}\" font-family=\"${fontFamily}\" component=\"event-title\">${title}</text>`, `<text x=\"${x + eventBoxPadding + decorationWidth + eventBoxPadding}\" y=\"${y + eventBoxPadding + titleHeight + descriptionHeight}\" font-weight=\"${eventBoxFontWeight}\" font-size=\"${eventBoxFontSize}\" font-family=\"${fontFamily}\" component=\"event-description\">${description}</text>`);\n  }\n\n  const eventBoxes = `<path d=\"${eventBoxPathCommands.join(' ')}\" stroke=\"none\" component=\"event-box\"/>`;\n  const eventBoxDecorations = `<path d=\"${eventBoxDecorationPathCommands.join(' ')}\" fill=\"none\" stroke-width=\"${decorationWidth}\" stroke-linecap=\"round\" stroke-linejoin=\"round\" component=\"event-decoration\"/>`;\n  const svg = `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" xmlns=\"http://www.w3.org/2000/svg\">${gridLine}${gridLineLabels.join('')}${eventBoxes}${eventBoxDecorations}${eventBoxTexts.join('')}</svg>`;\n  return svg;\n}\n\nfunction initializeRouteCalendarSliding(): void {\n  if (routeCalendarSliding_initialized) return;\n  routeCalendarSliding_initialized = true;\n\n  timelinesElement.addEventListener('scrollend', function () {\n    const scrollLeft = timelinesElement.scrollLeft;\n    const idx = Math.round(scrollLeft / routeCalendarSliding_fieldWidth);\n    if (idx === 0) {\n      currentDate = offsetDate(currentDate, -1, 0, 0);\n      const yesterday = offsetDate(currentDate, -1, 0, 0);\n      timelineElements[0].before(timelineElements[2]);\n      timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n      [timelineElements[0], timelineElements[1], timelineElements[2]] = [timelineElements[2], timelineElements[0], timelineElements[1]];\n      [currentTimelineSVGs[0], currentTimelineSVGs[1], currentTimelineSVGs[2]] = [generateRouteCalendarSVG(currentIntegration, yesterday, routeCalendarSliding_fieldWidth), currentTimelineSVGs[0], currentTimelineSVGs[1]];\n      timelineElements[0].innerHTML = currentTimelineSVGs[0];\n      dateElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n    } else if (idx === 2) {\n      currentDate = offsetDate(currentDate, 1, 0, 0);\n      const tomorrow = offsetDate(currentDate, 1, 0, 0);\n      timelineElements[2].after(timelineElements[0]);\n      timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n      [timelineElements[0], timelineElements[1], timelineElements[2]] = [timelineElements[1], timelineElements[2], timelineElements[0]];\n      [currentTimelineSVGs[0], currentTimelineSVGs[1], currentTimelineSVGs[2]] = [currentTimelineSVGs[1], currentTimelineSVGs[2], generateRouteCalendarSVG(currentIntegration, tomorrow, routeCalendarSliding_fieldWidth)];\n      timelineElements[2].innerHTML = currentTimelineSVGs[2];\n      dateElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n    }\n  });\n\n  timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n}\n\nasync function initializeRouteCalendar(PathAttributeId: SimplifiedRouteItem['pid']) {\n  const FieldSize = querySize('window');\n  routeCalendarSliding_fieldWidth = FieldSize.width;\n  currentDate = new Date();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteCalendar(PathAttributeId, requestID);\n  currentIntegration = integration;\n  for (let i = 0; i < 3; i++) {\n    const date = offsetDate(currentDate, i - 1, 0, 0);\n    currentTimelineSVGs[i] = generateRouteCalendarSVG(integration, date, routeCalendarSliding_fieldWidth);\n    timelineElements[i].innerHTML = currentTimelineSVGs[i];\n  }\n  dateElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n  initializeRouteCalendarSliding();\n}\n\nexport function showRouteCalendar(): void {\n  routeCalendarField.setAttribute('displayed', 'true');\n}\n\nexport function hideRouteCalendar(): void {\n  routeCalendarField.setAttribute('displayed', 'false');\n}\n\nexport function openRouteCalendar(PathAttributeId: SimplifiedRouteItem['pid']): void {\n  pushPageHistory('RouteCalendar');\n  showRouteCalendar();\n  initializeRouteCalendar(PathAttributeId);\n  hidePreviousPage();\n}\n\nexport function closeRouteCalendar(): void {\n  hideRouteCalendar();\n  showPreviousPage();\n  revokePageHistory('RouteCalendar');\n}\n","import { getRoute, SimplifiedRoute, SimplifiedRouteItem } from '../../data/apis/getRoute/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../../data/apis/loader';\nimport { IntegratedRouteDetails, IntegratedRouteDetailsAction, integrateRouteDetails } from '../../data/route/details';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString, generateIdentifier, hasOwnProperty } from '../../tools/index';\nimport { getPermalink } from '../../tools/permalink';\nimport { shareLink } from '../../tools/share';\nimport { getBlankIconElement, setIcon } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { openQRCode } from '../qrcode/index';\n\nlet previousIntegration = {} as IntegratedRouteDetails;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst RouteDetailsField = documentQuerySelector('.css_route_details_field');\nconst RouteDetailsBodyElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body');\nconst RouteDetailsActionsElement = elementQuerySelector(RouteDetailsBodyElement, '.css_route_details_actions');\n\nfunction generateElementOfItem(): HTMLElement {\n  const element = documentCreateDivElement();\n  element.classList.add('css_route_details_action');\n\n  // Icon\n  const icon = documentCreateDivElement();\n  icon.classList.add('css_route_details_action_icon');\n  icon.appendChild(getBlankIconElement());\n  element.appendChild(icon);\n\n  // Name\n  const name = documentCreateDivElement();\n  name.classList.add('css_route_details_action_name');\n  element.appendChild(name);\n\n  return element;\n}\n\nfunction updateRouteDetailsField(integration: IntegratedRouteDetails, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction, previousItem: IntegratedRouteDetailsAction | null): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_route_details_action_icon');\n      setIcon(thisIconElement, thisItem.icon);\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction): void {\n      const nameElement = elementQuerySelector(thisElement, '.css_route_details_action_name');\n      nameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction): void {\n      thisElement.onclick = thisItem.action;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateIcon(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (previousItem.key !== thisItem.key) {\n        updateIcon(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n      }\n\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const actions = integration.actions;\n  const actionsQuantity = integration.actionsQuantity;\n\n  const actionElements = Array.from(elementQuerySelectorAll(RouteDetailsActionsElement, '.css_route_details_action'));\n  const currentActionElementsLength = actionElements.length;\n  if (actionsQuantity !== currentActionElementsLength) {\n    const difference = currentActionElementsLength - actionsQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement);\n        actionElements.push(newItemElement);\n      }\n      RouteDetailsActionsElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentActionElementsLength - 1, q = currentActionElementsLength - difference - 1; p > q; p--) {\n        actionElements[p].remove();\n        actionElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < actionsQuantity; i++) {\n    const thisElement = actionElements[i];\n    const thisItem = actions[i];\n    if (hasOwnProperty(previousIntegration, 'actions')) {\n      if (previousIntegration.actions[i]) {\n        const previousItem = previousIntegration.actions[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setupRouteDetailsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const actions: IntegratedRouteDetailsAction[] = [];\n  /*\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  */\n  const defaultActionsQuantity = 4;\n  for (let i = 0; i < defaultActionsQuantity; i++) {\n    actions.push({\n      name: '',\n      icon: '',\n      key: `action-${i}`,\n      action: function () {}\n    });\n  }\n\n  updateRouteDetailsField(\n    {\n      actions: actions,\n      actionsQuantity: defaultActionsQuantity,\n      RouteID: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function initializeRouteDetailsField(RouteID: SimplifiedRouteItem['id'], PathAttributeId: SimplifiedRouteItem['pid']) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  setupRouteDetailsFieldSkeletonScreen();\n  const integration = await integrateRouteDetails(RouteID, PathAttributeId, requestID);\n  updateRouteDetailsField(integration, false, playing_animation);\n}\n\nexport function showRouteDetails(): void {\n  RouteDetailsField.setAttribute('displayed', 'true');\n}\n\nexport function hideRouteDetails(): void {\n  RouteDetailsField.setAttribute('displayed', 'false');\n}\n\nexport function openRouteDetails(RouteID: SimplifiedRouteItem['id'], PathAttributeId: SimplifiedRouteItem['pid']): void {\n  pushPageHistory('RouteDetails');\n  showRouteDetails();\n  initializeRouteDetailsField(RouteID, PathAttributeId);\n  hidePreviousPage();\n}\n\nexport function closeRouteDetails(): void {\n  hideRouteDetails();\n  showPreviousPage();\n  revokePageHistory('RouteDetails');\n}\n\nexport async function shareRoutePermalink(RouteID: SimplifiedRouteItem['id']) {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisRouteKey = `r_${RouteID}`;\n  if (hasOwnProperty(Route, thisRouteKey)) {\n    const thisRoute = Route[thisRouteKey] as SimplifiedRouteItem;\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    shareLink(thisRoute.n, link);\n  }\n}\n\nexport async function showRoutePermalinkQRCode(RouteID: SimplifiedRouteItem['id']) {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisRouteKey = `r_${RouteID}`;\n  if (hasOwnProperty(Route, thisRouteKey)) {\n    const thisRoute = Route[thisRouteKey] as SimplifiedRouteItem;\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    openQRCode(thisRoute.n, link);\n  }\n}\n","import { Folder, FolderContent, isFolderContentSaved, listFolders, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { openFolderCreator } from '../folder-creator/index';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst SaveToFolderField = documentQuerySelector('.css_save_to_folder_field');\nconst bodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst listElement = elementQuerySelector(bodyElement, '.css_save_to_folder_list');\nconst headElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_head');\nconst rightButtonElement = elementQuerySelector(headElement, '.css_save_to_folder_button_right');\n\nconst successfulSaveMessage = '已儲存至資料夾';\nconst failedSaveMessage = '無法儲存';\n\nfunction generateElementOfItem(item: Folder, type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined): HTMLElement {\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.innerText = item.name;\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  // Event handler\n  switch (type) {\n    case 'stop': {\n      itemElement.onclick = function () {\n        saveStop(item.id, parameters[0], parameters[1]).then((e) => {\n          if (e) {\n            isFolderContentSaved('stop', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n\n    case 'route': {\n      itemElement.onclick = function () {\n        saveRoute(item.id, parameters[0]).then((e) => {\n          if (e) {\n            isFolderContentSaved('route', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n\n    case 'location': {\n      itemElement.onclick = function () {\n        saveLocation(item.id, parameters[0]).then((e) => {\n          if (e) {\n            isFolderContentSaved('location', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n    case 'bus':\n      break;\n    case 'empty':\n      break;\n    default:\n      break;\n  }\n\n  return itemElement;\n}\n\nfunction initializeSaveToFolderField(type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined) {\n  rightButtonElement.onclick = function () {\n    openFolderCreator(function () {\n      initializeSaveToFolderField(type, parameters, saveToFolderButtonElement);\n    });\n  };\n  const folders = listFolders();\n  listElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of folders) {\n    const newItemElement = generateElementOfItem(item, type, parameters, saveToFolderButtonElement);\n    fragment.appendChild(newItemElement);\n  }\n  listElement.append(fragment);\n}\n\nexport function showSaveToFolder(): void {\n  SaveToFolderField.setAttribute('displayed', 'true');\n}\n\nexport function hideSaveToFolder(): void {\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nexport function openSaveToFolder(type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined): void {\n  pushPageHistory('SaveToFolder');\n  showSaveToFolder();\n  initializeSaveToFolderField(type, parameters, saveToFolderButtonElement);\n  hidePreviousPage();\n}\n\nexport function closeSaveToFolder(): void {\n  hideSaveToFolder();\n  showPreviousPage();\n  revokePageHistory('SaveToFolder');\n}\n","import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = documentQuerySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): HTMLElement {\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.innerText = item.name;\n\n  // Event handler\n  const index = item.index;\n  itemElement.onclick = function () {\n    scheduleNotificationForStopItem(thisButtonElement, StopID, RouteID, EstimateTime, index);\n  };\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return itemElement;\n}\n\nfunction initializeScheduleNotificationField(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, thisButtonElement, StopID, RouteID, EstimateTime);\n    fragment.appendChild(newElement);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function showScheduleNotification(): void {\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n}\n\nexport function hideScheduleNotification(): void {\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function openScheduleNotification(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): void {\n  pushPageHistory('ScheduleNotification');\n  showScheduleNotification();\n  initializeScheduleNotificationField(thisButtonElement, StopID, RouteID, EstimateTime);\n  hidePreviousPage();\n}\n\nexport function closeScheduleNotification(): void {\n  hideScheduleNotification();\n  showPreviousPage();\n  revokePageHistory('ScheduleNotification');\n}\n\nexport function scheduleNotificationForStopItem(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  promptMessage('manufacturing', '處理中');\n  thisButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        thisButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        thisButtonElement.setAttribute('enabled', 'true');\n        thisButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        thisButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n"],"names":["routeCalendarField","documentQuerySelector","headElement","elementQuerySelector","dateElement","timelinesElement","timelineElements","Array","from","elementQuerySelectorAll","currentDate","Date","currentIntegration","currentTimelineSVGs","routeCalendarSliding_fieldWidth","routeCalendarSliding_initialized","generateRouteCalendarSVG","integration","date","width","fontFamily","gridLinePathCommands","gridLineLabels","i","text","toString","padStart","y","push","gridLine","join","height","gridHeight","day","getDay","index","events","repeated","scheduledEvents","scheduled","date2","offsetDate","timeZoneOffset","getTimezoneOffset","eventDate","getFullYear","getMonth","getDate","length","type","time","interval","count","eventBoxPathCommands","eventBoxDecorationPathCommands","eventBoxTexts","boxWidth","boxHeight","startMinutes","startHours","endMinutes","endHours","title","description","prototype","apply","generateRoundedRectPath","eventBoxPadding","eventBoxes","eventBoxDecorations","_initializeRouteCalendar","_asyncToGenerator","PathAttributeId","FieldSize","querySize","requestID","generateIdentifier","integrateRouteCalendar","innerHTML","innerText","dateToString","addEventListener","scrollLeft","idx","Math","round","yesterday","before","scrollTo","left","_ref","_ref2","tomorrow","after","_ref3","_ref4","arguments","showRouteCalendar","setAttribute","hideRouteCalendar","openRouteCalendar","pushPageHistory","_x","initializeRouteCalendar","hidePreviousPage","closeRouteCalendar","showPreviousPage","revokePageHistory","previousIntegration","previousAnimation","previousSkeletonScreen","RouteDetailsField","RouteDetailsBodyElement","RouteDetailsActionsElement","generateElementOfItem","element","documentCreateDivElement","classList","add","icon","appendChild","getBlankIconElement","name","updateRouteDetailsField","skeletonScreen","animation","updateItem","thisElement","thisItem","previousItem","updateIcon","thisIconElement","setIcon","updateName","updateOnclick","onclick","action","updateAnimation","booleanToString","updateSkeletonScreen","key","actions","actionsQuantity","actionElements","currentActionElementsLength","difference","fragment","DocumentFragment","o","newItemElement","append","p","q","remove","splice","hasOwnProperty","_initializeRouteDetailsField","RouteID","playing_animation","getSettingOptionValue","setupRouteDetailsFieldSkeletonScreen","integrateRouteDetails","showRouteDetails","hideRouteDetails","openRouteDetails","_x2","initializeRouteDetailsField","closeRouteDetails","shareRoutePermalink","_x3","_shareRoutePermalink","Route","getRoute","deleteDataReceivingProgress","deleteDataUpdateTime","thisRouteKey","thisRoute","link","getPermalink","id","n","shareLink","SaveToFolderField","bodyElement","listElement","rightButtonElement","successfulSaveMessage","failedSaveMessage","item","parameters","saveToFolderButtonElement","itemElement","iconElement","iconSpanElement","document","createElement","getIconElement","nameElement","saveStop","then","e","isFolderContentSaved","k","promptMessage","closeSaveToFolder","saveRoute","saveLocation","initializeSaveToFolderField","openFolderCreator","folders","listFolders","showSaveToFolder","hideSaveToFolder","openSaveToFolder","ScheduleNotificationField","ScheduleNotificationBodyElement","ScheduleNotificationListElement","thisButtonElement","StopID","EstimateTime","closeScheduleNotification","scheduleNotificationForStop","result","scheduleNotificationForStopItem","showScheduleNotification","hideScheduleNotification","openScheduleNotification","scheduleNotificationOptions","newElement","initializeScheduleNotificationField"],"sourceRoot":""}