"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[270],{112(){},124(){},245(){},321(){},626(){},969(){},1003(){},1195(){},1351(t,e,n){n.d(e,{ID:()=>C,co:()=>w,k9:()=>L,qp:()=>E});var i=n(467),a=n(8011),r=n(6788),u=n(6983),l=n(3459),o=n(8179),d=n(8024),s=n(9469),c=n(4537),f=n(904),p=n(9119),m=n(8279),h={},v=!1,y=!1,g=(0,o.bv)(".wj"),b=(0,o.aI)(g,".ak"),A=(0,o.aI)(b,".bk");function I(){var t=document.createElement("div");t.classList.add("ck");var e=document.createElement("div");e.classList.add("dk"),e.appendChild((0,c.oC)()),t.appendChild(e);var n=document.createElement("div");return n.classList.add("ek"),t.appendChild(n),{element:t,id:""}}function k(t,e,n){function i(t,i,a){function r(t,e){var n=(0,o.aI)(t,".dk");(0,c.yD)(n,e.icon)}function u(t,e){(0,o.aI)(t,".ek").innerText=e.name}function l(t,e){t.onclick=e.action}function s(t,e){t.setAttribute("animation",(0,d.xZ)(e))}function f(t,e){t.setAttribute("skeleton-screen",(0,d.xZ)(e))}null==a?(r(t,i),u(t,i),l(t,i),s(t,n),f(t,e)):(a.key!==i.key&&(r(t,i),u(t,i),l(t,i)),n!==v&&s(t,n),e!==y&&f(t,e))}var a=t.actions,r=t.actionsQuantity,u=(0,o.jg)(A,".ck").length;if(r!==u){var l=u-r;if(l<0){for(var s=new DocumentFragment,f=0,p=Math.abs(l);f<p;f++){var m=I();s.appendChild(m.element)}A.append(s)}else for(var g=(0,o.jg)(A,".ck"),b=0,k=Math.abs(l);b<k;b++){g[u-1-b].remove()}}for(var _=(0,o.jg)(A,".ck"),C=0;C<r;C++){var w=_[C],L=a[C];if((0,d.mQ)(h,"actions"))if(h.actions[C])i(w,L,h.actions[C]);else i(w,L,null);else i(w,L,null)}h=t,v=n,y=e}function _(){return(_=(0,i.A)(function*(t){var e=(0,l.Js)("playing_animation"),n=(0,d.zx)();k(yield(0,u.v)(t,n),!1,e)})).apply(this,arguments)}function C(t){(0,f.WR)("LocationDetails"),g.setAttribute("displayed","true"),function(){for(var t=(0,l.Js)("playing_animation"),e=[],n=0;n<3;n++)e.push({name:"",icon:"",key:`action-${n}`,action:function(){}});k({actions:e,actionsQuantity:3,hash:""},!0,t)}(),function(t){_.apply(this,arguments)}(t)}function w(){(0,f.kr)("LocationDetails"),g.setAttribute("displayed","false")}function L(t){return x.apply(this,arguments)}function x(){return(x=(0,i.A)(function*(t){var e=(0,d.zx)(),n=yield(0,a.g)(e,1);(0,r.LQ)(e),(0,r.gC)(e);var i=`ml_${t}`;if((0,d.mQ)(n,i)){var u=n[i],l=(0,s.i)(1,{hash:t});navigator.share&&navigator.share({title:u.n,url:l}).then(function(){(0,p.a)("check_circle","已分享地點")}).catch(function(t){(0,p.a)("cancel","已取消分享")})}})).apply(this,arguments)}function E(t){return S.apply(this,arguments)}function S(){return(S=(0,i.A)(function*(t){var e=(0,d.zx)(),n=yield(0,a.g)(e,1);(0,r.LQ)(e),(0,r.gC)(e);var i=`ml_${t}`;if((0,d.mQ)(n,i)){var u=(0,s.i)(1,{hash:t});(0,m.X8)(u)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(t,e,n){n.d(e,{Sv:()=>J,m_:()=>R});var i=n(467),a=n(5767),r=n(365),u=n(3422),l=n(3459),o=n(8179),d=n(8024),s=n(4537),c=n(904),f=n(9119),p=(0,o.bv)(".ol"),m=(0,o.aI)(p,".rl"),h=(0,o.aI)(m,".vl"),v=(0,o.aI)(h,".wl"),y=(0,o.aI)(p,".yl"),g=(0,o.aI)(y,".zl"),b={},A=!1,I=15e3,k=5e3,_=15e3,C=!0,w=0,L=0,x="",E=!1,S=!1,T=!1;function M(t){var e=t;if(E){var n=e.detail.progress-1;v.style.setProperty("--pl",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,M)}function $(){var t=(0,d.zx)(),e=document.createElement("div");e.classList.add("_l"),e.id=t;var n=document.createElement("div");n.classList.add("am"),e.appendChild(n);var i=document.createElement("div");i.classList.add("bm");var a=document.createElement("div");a.classList.add("cm"),i.appendChild(a);var r=document.createElement("div");r.classList.add("dm"),i.appendChild(r);var u=document.createElement("div");u.classList.add("em"),i.appendChild(u);var l=document.createElement("div");l.classList.add("fm");var o=document.createElement("span");return o.appendChild((0,s.YC)("close")),l.appendChild(o),i.appendChild(l),e.appendChild(i),{element:e,id:t}}function Q(t,e,n){function i(t,i,a){function r(t,e){(0,o.aI)(t,".am").innerText=e.hours}function u(t,e){var n=(0,o.aI)(t,".bm");(0,o.aI)(n,".cm").innerText=e.minutes}function l(t,e){var n=(0,o.aI)(t,".bm");(0,o.aI)(n,".em").innerText=e.name}function s(t,e){var n=(0,o.aI)(t,".bm");(0,o.aI)(n,".dm").innerText=`${e.route.name} - 往${e.route.direction}`}function c(t,e){var n=(0,o.aI)(t,".bm");(0,o.aI)(n,".fm").onclick=function(){!function(t,e){P.apply(this,arguments)}(t,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,d.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,d.xZ)(e))}function m(t,e){t.setAttribute("skeleton-screen",(0,d.xZ)(e))}null==a?(r(t,i),u(t,i),l(t,i),s(t,i),c(t,i),f(t,i),p(t,n),m(t,e)):(i.hours!==a.hours&&r(t,i),i.minutes!==a.minutes&&u(t,i),(0,d.hw)(a.schedule_id,i.schedule_id)||(l(t,i),s(t,i),c(t,i)),a.is_first!==i.is_first&&f(t,i),false!==n&&p(t,n),A!==e&&m(t,e))}var a=t.itemQuantity,r=t.items,u=(0,o.jg)(g,"._l").length;if(a!==u){var l=u-a;if(l<0){for(var s=new DocumentFragment,c=0,f=Math.abs(l);c<f;c++){var p=$();s.appendChild(p.element)}g.append(s)}else for(var m=(0,o.jg)(g,"._l"),h=0,v=Math.abs(l);h<v;h++){m[u-1-h].remove()}}for(var y=(0,o.jg)(g,"._l"),I=0;I<a;I++){var k=y[I],_=r[I];if((0,d.mQ)(b,"items"))if(b.items[I])i(k,_,b.items[I]);else i(k,_,null);else i(k,_,null)}b=t,A=e}function j(){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.A)(function*(){var t=(0,l.Js)("playing_animation"),e=(0,l.Js)("refresh_interval");C=e.dynamic,I=e.baseInterval,E=!0,x=(0,d.zx)(),v.setAttribute("refreshing","true"),v.classList.remove("xl"),document.addEventListener(x,M);var n=yield(0,u.e3)(x);Q(n,!1,t);var i=0;C&&(i=yield(0,a.wz)()),w=(new Date).getTime(),L=C?Math.max(w+k,n.dataUpdateTime+I/i):w+I,_=Math.max(k,L-w),E=!1,v.setAttribute("refreshing","false"),v.style.setProperty("--ql",`${_}ms`),v.classList.add("xl")})).apply(this,arguments)}function D(){return z.apply(this,arguments)}function z(){return(z=(0,i.A)(function*(){j().then(function(){S?setTimeout(function(){D()},Math.max(k,L-(new Date).getTime())):T=!1}).catch(function(t){S?setTimeout(function(){D()},1e4):T=!1})})).apply(this,arguments)}function J(){(0,c.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var t=(0,l.Js)("playing_animation"),e=(0,c.gO)("window"),n=(e.width,e.height),i=Math.floor(n/50)+5,a=[],r=0;r<i;r++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});Q({items:a,itemQuantity:i,dataUpdateTime:0},!0,t)}(),S||(S=!0,T?j():(T=!0,D())),(0,c.Z_)()}function R(){p.setAttribute("displayed","false"),S=!1,(0,c.l$)()}function P(){return(P=(0,i.A)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,r.G)(e)){if(t.remove(),(0,f.a)("check_circle","已取消通知"),!E){var n=(0,l.Js)("playing_animation");Q(yield(0,u.e3)(x),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(t,e,n){n.d(e,{Dn:()=>C,Xy:()=>_,bF:()=>k,gv:()=>b});var i=n(3453),a=n(467),r=n(5352),u=n(8179),l=n(5579),o=n(904),d=(0,u.bv)(".bl"),s=(0,u.aI)(d,".gl"),c=(0,u.aI)(d,".cl"),f=(0,u.aI)(c,".dl"),p=(0,u.aI)(s,".hl"),m=(0,u.aI)(p,'.il[group="schedule-name"] .ml input'),h=(0,u.aI)(p,'.il[group="schedule-start-time"] .ml input'),v=(0,u.aI)(p,'.il[group="schedule-end-time"] .ml input'),y=(0,u.aI)(p,'.il[group="schedule-days"] .ml'),g=(0,u.jg)(y,".nl");function b(t){return A.apply(this,arguments)}function A(){return(A=(0,a.A)(function*(t){for(var e=m.value,n=h.value,a=v.value,u=String(n).split(":").map(function(t){return parseInt(t)}),l=(0,i.A)(u,2),o=l[0],d=l[1],s=String(a).split(":").map(function(t){return parseInt(t)}),c=(0,i.A)(s,2),f=c[0],p=c[1],y=[],b=0;b<7;b++){var A=g[b],I=A.getAttribute("highlighted"),k=parseInt(A.getAttribute("day"));"true"===I&&y.push(k)}var C=yield(0,r.qZ)(t);C.name=e,C.days=y,C.period.start.hours=o,C.period.start.minutes=d,C.period.end.hours=f,C.period.end.minutes=p,yield(0,r.nL)(C),_()})).apply(this,arguments)}function I(){return(I=(0,a.A)(function*(t){var e=yield(0,r.qZ)(t);m.value=e.name,h.value=(0,l.pn)(e.period.start),v.value=(0,l.pn)(e.period.end);for(var n=0;n<7;n++){var i=g[n];e.days.indexOf(n)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}f.onclick=function(){b(t)}})).apply(this,arguments)}function k(t){(0,o.WR)("PersonalScheduleEditor"),d.setAttribute("displayed","true"),function(t){I.apply(this,arguments)}(t),(0,o.Z_)()}function _(){d.setAttribute("displayed","false"),(0,o.l$)()}function C(t){var e=(0,u.aI)(y,`.nl[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(t,e,n){n.d(e,{Z:()=>y,z:()=>v});var i=n(467),a=n(5352),r=n(8179),u=n(4537),l=n(904),o=n(5693);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var r,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,r=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw r}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var c=(0,r.bv)(".fk"),f=(0,r.aI)(c,".kk"),p=(0,r.aI)(f,".lk");function m(t){var e=document.createElement("div");e.classList.add("mk"),e.onclick=function(){(0,o.bF)(t.id)};var n=document.createElement("div");n.classList.add("nk"),n.appendChild(document.createTextNode(t.name)),e.appendChild(n);var i=document.createElement("div");i.classList.add("ok");var a=document.createElement("span");return a.appendChild((0,u.YC)("arrow_forward_ios")),i.appendChild(a),e.appendChild(i),{element:e,id:""}}function h(){return(h=(0,i.A)(function*(){p.innerHTML="";var t,e=yield(0,a.ty)(),n=new DocumentFragment,i=d(e);try{for(i.s();!(t=i.n()).done;){var r=m(t.value);n.appendChild(r.element)}}catch(t){i.e(t)}finally{i.f()}p.append(n)})).apply(this,arguments)}function v(){(0,l.WR)("PersonalScheduleManager"),c.setAttribute("displayed","true"),function(){h.apply(this,arguments)}()}function y(){(0,l.kr)("PersonalScheduleManager"),c.setAttribute("displayed","false")}},7943(){},8279(t,e,n){n.d(e,{Vc:()=>d,X8:()=>o});var i=n(8179),a=n(2648),r=n(904),u=(0,i.bv)(".nm"),l=(0,i.aI)(u,".sm");function o(t){(0,r.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,a.$)(t,"M",.5,.3,1,"var(--a)",4);l.innerHTML=e}(t)}function d(){(0,r.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>g,I1:()=>y,Ps:()=>v,om:()=>b});var i=n(3453),a=n(5352),r=n(8179),u=n(904),l=n(9119),o=(0,r.bv)(".pk"),d=(0,r.aI)(o,".uk"),s=(0,r.aI)(d,".vk"),c=(0,r.aI)(s,'.wk[group="schedule-name"] ._k input'),f=(0,r.aI)(s,'.wk[group="schedule-start-time"] ._k input'),p=(0,r.aI)(s,'.wk[group="schedule-end-time"] ._k input'),m=(0,r.aI)(s,'.wk[group="schedule-days"] ._k'),h=(0,r.jg)(m,".al");function v(){for(var t=c.value,e=f.value,n=p.value,r=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,i.A)(r,2),o=u[0],d=u[1],s=String(n).split(":").map(function(t){return parseInt(t)}),m=(0,i.A)(s,2),v=m[0],y=m[1],b=[],A=0;A<7;A++){var I=h[A],k=I.getAttribute("highlighted"),_=parseInt(I.getAttribute("day"));"true"===k&&b.push(_)}(0,a.Qh)(t,o,d,v,y,b).then(function(t){t?(g(),(0,l.a)("calendar_view_day","已建立個人化行程")):(0,l.a)("error","無法建立個人化行程")})}function y(){(0,u.WR)("PersonalScheduleCreator"),o.setAttribute("displayed","true"),(0,u.Z_)()}function g(){o.setAttribute("displayed","false"),(0,u.l$)()}function b(t){var e=(0,r.aI)(m,`.al[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},8558(){},8969(){},9119(t,e,n){n.d(e,{a:()=>s});var i=n(2284),a=n(3459),r=n(8179),u=n(8024),l=n(4537);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var r,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,r=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw r}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e,n){var d=(0,r.e0)(".tm");if(null!==d){var s,c=o(d);try{for(c.s();!(s=c.n()).done;){s.value.remove()}}catch(t){c.e(t)}finally{c.f()}}var f=(0,a.Js)("playing_animation"),p=document.createElement("div");p.classList.add("tm"),p.setAttribute("animation",(0,u.xZ)(f));var m=document.createElement("div");m.classList.add("um"),m.appendChild((0,l.YC)(t)),p.appendChild(m);var h=document.createElement("div");if(h.classList.add("vm"),h.innerText=e,p.appendChild(h),"object"===(0,i.A)(n)&&null!=n&&"function"==typeof(null==n?void 0:n.action)){var v=document.createElement("div");v.classList.add("wm"),v.innerText=n.text,v.addEventListener("click",function(){n.action()},{once:!0}),p.appendChild(v)}p.addEventListener("animationend",function(t){null!=t&&t.target&&t.target.remove()},{once:!0}),document.body.appendChild(p)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=418f72a9792cd6092063.js.map