{"version":3,"file":"e2b8d46ac5d3db0dbe7e.js","mappings":"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","sources":["webpack://bus/./src/interface/index.ts","webpack://bus/./src/interface/location/index.ts","webpack://bus/./src/interface/folder-creator/index.ts","webpack://bus/./src/interface/folder-icon-selector/index.ts","webpack://bus/./src/interface/folder-manager/index.ts","webpack://bus/./src/interface/folder-editor/index.ts","webpack://bus/./src/interface/location/details/actions.ts","webpack://bus/./src/interface/location/details/index.ts"],"sourcesContent":["import { isRunningStandalone } from '../tools/index';\nimport { documentQuerySelector } from '../tools/query-selector';\nimport { closeBus, openBus } from './bus/index';\nimport { closeFolderCreator, openFolderCreator } from './folder-creator/index';\nimport { closeFolderEditor, openFolderEditor } from './folder-editor/index';\nimport { closeFolderManager, openFolderManager } from './folder-manager/index';\nimport { closePersonalScheduleEditor, openPersonalScheduleEditor } from './personal-schedule-editor/index';\nimport { closePersonalScheduleManager, openPersonalScheduleManager } from './personal-schedule-manager/index';\nimport { closeRegisterNotification, openRegisterNotification } from './register-notification/index';\nimport { closeSearch, openSearch } from './search/index';\nimport { closeSettings, openSettings } from './settings/index';\n\nconst SplashScreenElement = documentQuerySelector('.css_splash_screen');\nconst ErrorMessageElement = documentQuerySelector('.css_error_message');\n\nconst splashScreenTimer_minimalTimeOut = 100;\nconst splashScreenTimer_openTime = new Date().getTime();\n\ntype Page = 'Home' | 'FolderCreator' | 'FolderEditor' | 'FolderIconSelector' | 'FolderManager' | 'LocationDetails' | 'Location' | 'RouteDetails' | 'Route' | 'SaveToFolder' | 'Search' | 'Settings' | 'SettingsOptions' | 'DataUsage' | 'PersonalScheduleManager' | 'PersonalScheduleCreator' | 'PersonalScheduleEditor' | 'Bus' | 'RegisterNotification' | 'ScheduleNotification' | 'NotificationScheduleManager' | 'QRCode';\n\nlet pageHistory: Array<Page> = ['Home'];\n\nexport function pushPageHistory(page: Page): void {\n  const pageHistoryLength = pageHistory.length;\n  const lastPage = pageHistory[pageHistoryLength - 1];\n  if (lastPage !== page) {\n    pageHistory.push(page);\n  }\n}\n\nexport function revokePageHistory(page: Page): void {\n  if (pageHistory.indexOf(page) > -1) {\n    const pageHistoryLength = pageHistory.length;\n    if (pageHistory[pageHistoryLength - 1] === page) {\n      pageHistory.pop();\n    }\n  }\n}\n\nexport function closePreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        closeFolderCreator();\n        break;\n      case 'FolderEditor':\n        closeFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        closeFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        closeSearch();\n        break;\n      case 'Settings':\n        closeSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        closePersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        closePersonalScheduleEditor();\n        break;\n      case 'Bus':\n        closeBus();\n        break;\n      case 'RegisterNotification':\n        closeRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function openPreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    pageHistory.pop();\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        openFolderCreator();\n        break;\n      case 'FolderEditor':\n        openFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        openFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        openSearch();\n        break;\n      case 'Settings':\n        openSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        openPersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        openPersonalScheduleEditor();\n        break;\n      case 'Bus':\n        openBus();\n        break;\n      case 'RegisterNotification':\n        openRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function setSplashScreenIconOffsetY(): void {\n  let offset = 0;\n  if (isRunningStandalone()) {\n    offset = (-1 * (window.outerHeight - window.innerHeight)) / 2;\n  }\n  documentQuerySelector('.css_splash_screen svg.css_splash_screen_icon').style.setProperty('--b-cssvar-splash-screen-icon-offset-y', `${offset}px`);\n}\n\nexport function fadeOutSplashScreen(callback: Function): void {\n  function fadeOut() {\n    SplashScreenElement.classList.add('css_splash_screen_fade_out');\n    SplashScreenElement.addEventListener(\n      'animationend',\n      function () {\n        SplashScreenElement.setAttribute('displayed', 'false');\n        SplashScreenElement.classList.remove('css_splash_screen_fade_out');\n        if (typeof callback === 'function') {\n          callback();\n        }\n      },\n      { once: true }\n    );\n  }\n  const cureentTime = new Date().getTime();\n  if (cureentTime - splashScreenTimer_openTime < splashScreenTimer_minimalTimeOut) {\n    setTimeout(fadeOut, Math.max(1, cureentTime - splashScreenTimer_openTime));\n  } else {\n    fadeOut();\n  }\n}\n\nexport function showErrorMessage(): void {\n  ErrorMessageElement.setAttribute('displayed', 'true');\n}\n\nexport interface GeneratedElement {\n  element: HTMLElement;\n  id: string;\n}\n\nexport type GroupStyles = {\n  [key: string]: {\n    width: number;\n    offset: number;\n  };\n};\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\ntype SizeType = 'window' | 'head' | 'head-one-button' | 'head-two-button' | 'route-details-canvas' | 'route-bus-arrival-time-chart' | 'location-bus-arrival-time-chart';\n\nexport function querySize(type: SizeType): Size {\n  let width: number = 0;\n  let height: number = 0;\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n  switch (type) {\n    case 'window':\n      width = windowWidth;\n      height = windowHeight;\n      break;\n    case 'head':\n      width = windowWidth;\n      height = 55;\n      break;\n    case 'head-one-button':\n      width = windowWidth - 55;\n      height = 55;\n      break;\n    case 'head-two-button':\n      width = windowWidth - 55 * 2;\n      height = 55;\n      break;\n    case 'route-details-canvas':\n      width = windowWidth - 10 * 2 - 10 * 2;\n      height = 24 * 70;\n      break;\n    case 'route-bus-arrival-time-chart':\n      width = windowWidth - 45 - 15 - 20;\n      height = 75;\n      break;\n    case 'location-bus-arrival-time-chart':\n      width = windowWidth - 30 - 20;\n      height = 75;\n      break;\n    default:\n      width = 0;\n      height = 0;\n      break;\n  }\n  return {\n    width,\n    height\n  };\n}\n\nexport function scrollDocumentToTop(): void {\n  window.scrollTo({\n    top: 0,\n    behavior: 'instant'\n  });\n}\n","import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../data/apis/loader';\nimport { isFolderContentSaved } from '../../data/folder/index';\nimport { IntegratedLocation, IntegratedLocationItem, integrateLocation, LocationGroupProperty } from '../../data/location/index';\nimport { stopHasNotifcationSchedules } from '../../data/notification/index';\nimport { logRecentView } from '../../data/recent-views/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { getTextWidth } from '../../tools/graphic';\nimport { booleanToString, compareThings, generateIdentifier } from '../../tools/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll, getElementsBelow } from '../../tools/query-selector';\nimport { indexToDay, timeObjectToString } from '../../tools/time';\nimport { getIconHTML } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, GroupStyles, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\nimport { openSaveToFolder } from '../save-to-folder/index';\nimport { openScheduleNotification } from '../schedule-notification/index';\nimport { openLocationDetails } from './details/index';\n\nconst LocationField = documentQuerySelector('.css_location_field');\nconst LocationHeadElement = elementQuerySelector(LocationField, '.css_location_head');\nconst LocationNameElement = elementQuerySelector(LocationHeadElement, '.css_location_name');\nconst LocationButtonRightElement = elementQuerySelector(LocationHeadElement, '.css_location_button_right');\nconst LocationGroupsElement = elementQuerySelector(LocationField, '.css_location_groups');\nconst LocationGroupTabsElement = elementQuerySelector(LocationHeadElement, '.css_location_group_tabs');\nconst LocationGroupTabsTrayElement = elementQuerySelector(LocationGroupTabsElement, '.css_location_group_tabs_tray');\nconst LocationGroupTabLineTrackElement = elementQuerySelector(LocationHeadElement, '.css_location_group_tab_line_track');\nconst LocationGroupTabLineElement = elementQuerySelector(LocationGroupTabLineTrackElement, '.css_location_group_tab_line');\nconst LocationUpdateTimerElement = elementQuerySelector(LocationHeadElement, '.css_location_update_timer_box .css_location_update_timer');\n\nlet previousIntegration = {} as IntegratedLocation;\nlet previousAnimation: boolean = true;\nlet previousSkeletonScreen: boolean = false;\n\nlet locationSliding_initialIndex: number = 0;\nlet locationSliding_targetIndex: number = 0;\nlet locationSliding_groupQuantity: number = 0;\nlet locationSliding_groupStyles: GroupStyles = {};\nlet locationSliding_fieldWidth: number = 0;\nlet locationSliding_fieldHeight: number = 0;\nlet locationSliding_sliding: boolean = false;\n\nlet locationRefreshTimer_retryInterval: number = 10 * 1000;\nlet locationRefreshTimer_baseInterval: number = 15 * 1000;\nlet locationRefreshTimer_minInterval: number = 5 * 1000;\nlet locationRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet locationRefreshTimer_dynamic: boolean = true;\nlet locationRefreshTimer_lastUpdate: number = 0;\nlet locationRefreshTimer_nextUpdate: number = 0;\nlet locationRefreshTimer_currentRequestID: string = '';\nlet locationRefreshTimer_refreshing: boolean = false;\nlet locationRefreshTimer_streaming: boolean = false;\nlet locationRefreshTimer_streamStarted: boolean = false;\n\nvar currentHashSet_hash: string = '';\n\nvar tabPadding: number = 20;\n\nexport function initializeLocationSliding(): void {\n  LocationGroupsElement.addEventListener(\n    'touchstart',\n    function () {\n      locationSliding_initialIndex = Math.round(LocationGroupsElement.scrollLeft / locationSliding_fieldWidth);\n    },\n    { passive: true }\n  );\n\n  LocationGroupsElement.addEventListener(\n    'scroll',\n    function (event: Event) {\n      locationSliding_sliding = true;\n      const target = event.target as HTMLElement;\n      const currentIndex = target.scrollLeft / locationSliding_fieldWidth;\n      if (currentIndex > locationSliding_initialIndex) {\n        locationSliding_targetIndex = locationSliding_initialIndex + 1;\n      } else {\n        locationSliding_targetIndex = locationSliding_initialIndex - 1;\n      }\n      const initialSize = locationSliding_groupStyles[`g_${locationSliding_initialIndex}`] || { width: 0, offset: 0 };\n      const targetSize = locationSliding_groupStyles[`g_${locationSliding_targetIndex}`] || { width: 0, offset: 0 };\n      const tabWidth = initialSize.width + (targetSize.width - initialSize.width) * Math.abs(currentIndex - locationSliding_initialIndex);\n      const offset = (initialSize.offset + (targetSize.offset - initialSize.offset) * Math.abs(currentIndex - locationSliding_initialIndex)) * -1 + locationSliding_fieldWidth * 0.5 - tabWidth * 0.5;\n      updateLocationCSS(locationSliding_groupQuantity, offset, tabWidth - tabPadding, currentIndex);\n      if (currentIndex === locationSliding_targetIndex) {\n        locationSliding_initialIndex = Math.round(LocationGroupsElement.scrollLeft / locationSliding_fieldWidth);\n        locationSliding_sliding = false;\n      }\n    },\n    { passive: true }\n  );\n}\n\nexport function updateLocationCSS(groupQuantity: number, offset: number, tabLineWidth: number, percentage: number): void {\n  LocationGroupsElement.style.setProperty('--b-cssvar-location-group-quantity', groupQuantity.toString());\n  LocationGroupTabLineElement.style.setProperty('--b-cssvar-location-tab-line-width-scale', tabLineWidth.toString());\n  LocationGroupTabsTrayElement.style.setProperty('--b-cssvar-location-tabs-tray-offset', `${offset.toFixed(5)}px`);\n  LocationGroupTabsTrayElement.style.setProperty('--b-cssvar-location-percentage', percentage.toFixed(5));\n}\n\nfunction animateUpdateTimer(): void {\n  LocationUpdateTimerElement.style.setProperty('--b-cssvar-location-update-timer-interval', `${locationRefreshTimer_dynamicInterval}ms`);\n  LocationUpdateTimerElement.classList.add('css_location_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (locationRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    LocationUpdateTimerElement.style.setProperty('--b-cssvar-location-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfItem(): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_location_group_item');\n  itemElement.id = identifier;\n  itemElement.setAttribute('stretched', 'false');\n  itemElement.setAttribute('stretching', 'false');\n  itemElement.setAttribute('push-direction', '0');\n  itemElement.setAttribute('push-state', '0');\n\n  // Head\n  const headElement = document.createElement('div');\n  headElement.classList.add('css_location_group_item_head');\n\n  // Rank\n  const rankElement = document.createElement('div');\n  rankElement.classList.add('css_location_group_item_rank');\n  const rankNextSlideElement = document.createElement('div');\n  rankNextSlideElement.classList.add('css_location_group_item_rank_next_slide');\n  rankNextSlideElement.setAttribute('code', '-1');\n  rankNextSlideElement.setAttribute('displayed', 'false');\n  const rankCurrentSlideElement = document.createElement('div');\n  rankCurrentSlideElement.classList.add('css_location_group_item_rank_current_slide');\n  rankCurrentSlideElement.setAttribute('code', '-1');\n  rankCurrentSlideElement.setAttribute('displayed', 'true');\n  rankElement.appendChild(rankNextSlideElement);\n  rankElement.appendChild(rankCurrentSlideElement);\n\n  // Route direction\n  const routeDirectionElement = document.createElement('div');\n  routeDirectionElement.classList.add('css_location_group_item_route_direction');\n\n  // Route name\n  const routeNameElement = document.createElement('div');\n  routeNameElement.classList.add('css_location_group_item_route_name');\n\n  // Capsule\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_location_group_item_capsule');\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_location_group_item_status');\n  const nextSlideElement = document.createElement('div');\n  nextSlideElement.classList.add('css_next_slide');\n  nextSlideElement.setAttribute('code', '0');\n  nextSlideElement.setAttribute('displayed', 'false');\n  const currentSlideElement = document.createElement('div');\n  currentSlideElement.classList.add('css_current_slide');\n  currentSlideElement.setAttribute('code', '0');\n  currentSlideElement.setAttribute('displayed', 'true');\n  statusElement.appendChild(nextSlideElement);\n  statusElement.appendChild(currentSlideElement);\n\n  // Stretch button\n  const stretchElement = document.createElement('div');\n  stretchElement.classList.add('css_location_group_item_stretch');\n  stretchElement.innerHTML = getIconHTML('keyboard_arrow_down');\n  stretchElement.onclick = () => {\n    stretchLocationItem(identifier);\n  };\n\n  // Capsule separator\n  const capsuleSeparatorElement = document.createElement('div');\n  capsuleSeparatorElement.classList.add('css_location_group_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(statusElement);\n  capsuleElement.appendChild(stretchElement);\n  capsuleElement.appendChild(capsuleSeparatorElement);\n\n  // Assemble head\n  headElement.appendChild(rankElement);\n  headElement.appendChild(routeDirectionElement);\n  headElement.appendChild(routeNameElement);\n  headElement.appendChild(capsuleElement);\n\n  // Body\n  const bodyElement = document.createElement('div');\n  bodyElement.classList.add('css_location_group_item_body');\n  bodyElement.setAttribute('displayed', 'false');\n\n  // Buttons\n  const buttonsElement = document.createElement('div');\n  buttonsElement.classList.add('css_location_group_item_buttons');\n\n  // Tab: 公車\n  const busTabButtonElement = document.createElement('div');\n  busTabButtonElement.classList.add('css_location_group_item_button');\n  busTabButtonElement.setAttribute('highlighted', 'true');\n  busTabButtonElement.setAttribute('type', 'tab');\n  busTabButtonElement.setAttribute('code', '0');\n  const busTabIconElement = document.createElement('div');\n  busTabIconElement.classList.add('css_location_group_item_button_icon');\n  busTabIconElement.innerHTML = getIconHTML('directions_bus');\n  busTabButtonElement.appendChild(busTabIconElement);\n  busTabButtonElement.appendChild(document.createTextNode('公車'));\n  busTabButtonElement.onclick = () => {\n    switchLocationBodyTab(identifier, 0);\n  };\n\n  // Tab: 抵達時間\n  const arrivalTabButtonElement = document.createElement('div');\n  arrivalTabButtonElement.classList.add('css_location_group_item_button');\n  arrivalTabButtonElement.setAttribute('highlighted', 'false');\n  arrivalTabButtonElement.setAttribute('type', 'tab');\n  arrivalTabButtonElement.setAttribute('code', '1');\n  const arrivalTabIconElement = document.createElement('div');\n  arrivalTabIconElement.classList.add('css_location_group_item_button_icon');\n  arrivalTabIconElement.innerHTML = getIconHTML('departure_board');\n  arrivalTabButtonElement.appendChild(arrivalTabIconElement);\n  arrivalTabButtonElement.appendChild(document.createTextNode('抵達時間'));\n  arrivalTabButtonElement.onclick = () => {\n    switchLocationBodyTab(identifier, 1);\n  };\n\n  // Button: 儲存\n  const saveButtonElement = document.createElement('div');\n  saveButtonElement.classList.add('css_location_group_item_button');\n  saveButtonElement.setAttribute('highlighted', 'false');\n  saveButtonElement.setAttribute('type', 'save-to-folder');\n  const saveButtonIconElement = document.createElement('div');\n  saveButtonIconElement.classList.add('css_location_group_item_button_icon');\n  saveButtonIconElement.innerHTML = getIconHTML('folder');\n  saveButtonElement.appendChild(saveButtonIconElement);\n  saveButtonElement.appendChild(document.createTextNode('儲存'));\n  saveButtonElement.onclick = () => {\n    openSaveToFolder('stop-on-location', [identifier, null, null]);\n  };\n\n  // Button: 到站通知\n  const notifyButtonElement = document.createElement('div');\n  notifyButtonElement.classList.add('css_location_group_item_button');\n  notifyButtonElement.setAttribute('highlighted', 'false');\n  notifyButtonElement.setAttribute('type', 'schedule-notification');\n  notifyButtonElement.setAttribute('enabled', 'true');\n  const notifyButtonIconElement = document.createElement('div');\n  notifyButtonIconElement.classList.add('css_location_group_item_button_icon');\n  notifyButtonIconElement.innerHTML = getIconHTML('notifications');\n  notifyButtonElement.appendChild(notifyButtonIconElement);\n  notifyButtonElement.appendChild(document.createTextNode('到站通知'));\n  notifyButtonElement.onclick = () => {\n    openScheduleNotification('stop-on-location', [identifier, null, null, null]);\n  };\n\n  // Assemble buttons\n  buttonsElement.appendChild(busTabButtonElement);\n  buttonsElement.appendChild(arrivalTabButtonElement);\n  buttonsElement.appendChild(saveButtonElement);\n  buttonsElement.appendChild(notifyButtonElement);\n\n  // Buses\n  const busesElement = document.createElement('div');\n  busesElement.classList.add('css_location_group_item_buses');\n  busesElement.setAttribute('displayed', 'true');\n\n  // Bus arrival times\n  const busArrivalTimesElement = document.createElement('div');\n  busArrivalTimesElement.classList.add('css_location_group_item_bus_arrival_times');\n  busArrivalTimesElement.setAttribute('displayed', 'false');\n\n  // Assemble body\n  bodyElement.appendChild(buttonsElement);\n  bodyElement.appendChild(busesElement);\n  bodyElement.appendChild(busArrivalTimesElement);\n\n  // Assemble item\n  itemElement.appendChild(headElement);\n  itemElement.appendChild(bodyElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction generateElementOfGroup(): GeneratedElement {\n  // Main container\n  const groupElement = document.createElement('div');\n  groupElement.classList.add('css_location_group');\n\n  // Details\n  const detailsElement = document.createElement('div');\n  detailsElement.classList.add('css_location_group_details');\n\n  // Details body\n  const detailsBodyElement = document.createElement('div');\n  detailsBodyElement.classList.add('css_location_group_details_body');\n  detailsElement.appendChild(detailsBodyElement);\n\n  // Items\n  const itemsElement = document.createElement('div');\n  itemsElement.classList.add('css_location_group_items');\n\n  // Assemble group\n  groupElement.appendChild(detailsElement);\n  groupElement.appendChild(itemsElement);\n\n  return {\n    element: groupElement,\n    id: ''\n  };\n}\n\nfunction generateElementOfTab(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_location_group_tab');\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction generateElementOfGroupDetailsProperty(): GeneratedElement {\n  // Main container\n  const propertyElement = document.createElement('div');\n  propertyElement.classList.add('css_location_group_details_property');\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_location_details_property_icon');\n\n  // Value\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_location_details_property_value');\n\n  // Assemble\n  propertyElement.appendChild(iconElement);\n  propertyElement.appendChild(valueElement);\n\n  return {\n    element: propertyElement,\n    id: ''\n  };\n}\n\nfunction setUpLocationFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: IntegratedLocation['itemQuantity'] = { g_0: Math.floor(FieldHeight / 50) + 5, g_1: Math.floor(FieldHeight / 50) + 5 };\n  const defaultGroupQuantity = 2;\n  let groupedItems: IntegratedLocation['groupedItems'] = {};\n  for (let i = 0; i < defaultGroupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    groupedItems[groupKey] = [];\n    for (let j = 0; j < defaultItemQuantity[groupKey]; j++) {\n      groupedItems[groupKey].push({\n        route_name: '',\n        route_direction: '',\n        routeId: 0,\n        stopId: 0,\n        status: {\n          code: 8,\n          text: '',\n          time: -6\n        },\n        ranking: {\n          number: 0,\n          text: '--',\n          code: -1\n        },\n        buses: [],\n        busArrivalTimes: []\n      });\n    }\n  }\n  updateLocationField(\n    {\n      groupedItems: groupedItems,\n      groupQuantity: defaultGroupQuantity,\n      groups: {\n        g_0: {\n          name: '載入中',\n          properties: [\n            {\n              key: '0',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '1',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '2',\n              icon: '',\n              value: ''\n            }\n          ]\n        },\n        g_1: {\n          name: '載入中',\n          properties: [\n            {\n              key: '0',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '1',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '2',\n              icon: '',\n              value: ''\n            }\n          ]\n        }\n      },\n      itemQuantity: defaultItemQuantity,\n      LocationName: '載入中',\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateLocationField(integration: IntegratedLocation, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedLocationItem, previousItem: IntegratedLocationItem | null): void {\n    function updateStatus(thisElement: HTMLElement, thisItem: IntegratedLocationItem, animation: boolean): void {\n      const thisElementRect = thisElement.getBoundingClientRect();\n      const top = thisElementRect.top;\n      const left = thisElementRect.left;\n      const bottom = thisElementRect.bottom;\n      const right = thisElementRect.right;\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n\n      const thisItemStatusElement = elementQuerySelector(thisElement, '.css_location_group_item_status');\n      const nextSlideElement = elementQuerySelector(thisItemStatusElement, '.css_next_slide');\n      const currentSlideElement = elementQuerySelector(thisItemStatusElement, '.css_current_slide');\n\n      nextSlideElement.setAttribute('code', thisItem.status.code.toString());\n      nextSlideElement.innerText = thisItem.status.text;\n\n      if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n        currentSlideElement.addEventListener(\n          'animationend',\n          function () {\n            currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n            currentSlideElement.innerText = thisItem.status.text;\n            currentSlideElement.classList.remove('css_slide_fade_out');\n            nextSlideElement.setAttribute('displayed', 'false');\n          },\n          { once: true }\n        );\n        nextSlideElement.setAttribute('displayed', 'true');\n        currentSlideElement.classList.add('css_slide_fade_out');\n      } else {\n        currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n        currentSlideElement.innerText = thisItem.status.text;\n      }\n    }\n\n    function updateRank(thisElement: HTMLElement, thisItem: IntegratedLocationItem, animation: boolean): void {\n      const thisElementRect = thisElement.getBoundingClientRect();\n      const top = thisElementRect.top;\n      const left = thisElementRect.left;\n      const bottom = thisElementRect.bottom;\n      const right = thisElementRect.right;\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n\n      const thisRankElement = elementQuerySelector(thisElement, '.css_location_group_item_rank');\n      const nextSlideElement = elementQuerySelector(thisRankElement, '.css_location_group_item_rank_next_slide');\n      const currentSlideElement = elementQuerySelector(thisRankElement, '.css_location_group_item_rank_current_slide');\n\n      nextSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n      nextSlideElement.innerText = thisItem.ranking.text;\n\n      if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n        currentSlideElement.addEventListener(\n          'animationend',\n          function () {\n            currentSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n            currentSlideElement.innerText = thisItem.ranking.text;\n            currentSlideElement.classList.remove('css_location_group_item_rank_current_slide_fade_out');\n            nextSlideElement.setAttribute('displayed', 'false');\n          },\n          { once: true }\n        );\n        nextSlideElement.setAttribute('displayed', 'true');\n        currentSlideElement.classList.add('css_location_group_item_rank_current_slide_fade_out');\n      } else {\n        currentSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n        currentSlideElement.innerText = thisItem.ranking.text;\n      }\n    }\n\n    function updateRouteDirection(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisRouteDirectionElement = elementQuerySelector(thisElement, '.css_location_group_item_route_direction');\n      thisRouteDirectionElement.innerText = thisItem.route_direction;\n    }\n\n    function updateRouteName(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisRouteNameElement = elementQuerySelector(thisElement, '.css_location_group_item_route_name');\n      thisRouteNameElement.innerText = thisItem.route_name;\n      // TODO: selector\n    }\n\n    function updateBuses(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisBusesElement = elementQuerySelector(thisElement, '.css_location_group_item_buses');\n      thisBusesElement.innerHTML = thisItem.buses.length === 0 ? '<div class=\"css_location_group_item_buses_message\">目前沒有公車可顯示</div>' : thisItem.buses.map((bus) => `<div class=\"css_location_group_item_bus\" on-this-route=\"${bus.onThisRoute}\"><div class=\"css_location_group_item_bus_title\"><div class=\"css_location_group_item_bus_icon\">${getIconHTML('directions_bus')}</div><div class=\"css_location_group_item_bus_car_number\">${bus.carNumber}</div></div><div class=\"css_location_group_item_bus_attributes\"><div class=\"css_location_group_item_bus_route\">路線：${bus.RouteName}</div><div class=\"css_location_group_item_bus_car_status\">狀態：${bus.status.text}</div><div class=\"css_location_group_item_bus_car_type\">類型：${bus.type}</div></div></div>`).join('');\n    }\n\n    function updateBusArrivalTimes(thisItemElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisBusArrivalTimesElement = elementQuerySelector(thisItemElement, '.css_location_group_item_bus_arrival_times');\n      thisBusArrivalTimesElement.innerHTML = thisItem.busArrivalTimes.length === 0 ? '<div class=\"css_location_group_item_bus_arrival_message\">目前沒有抵達時間可顯示</div>' : thisItem.busArrivalTimes.map((busArrivalTime) => `<div class=\"css_location_group_item_bus_arrival_time\"><div class=\"css_location_group_item_bus_arrival_time_title\"><div class=\"css_location_group_item_bus_arrival_time_icon\">${getIconHTML('calendar_view_day')}</div><div class=\"css_location_group_item_bus_arrival_time_personal_schedule_name\">${busArrivalTime.personalSchedule.name}</div><div class=\"css_location_group_item_bus_arrival_time_personal_schedule_time\">週${indexToDay(busArrivalTime.day).name} ${timeObjectToString(busArrivalTime.personalSchedule.period.start)} - ${timeObjectToString(busArrivalTime.personalSchedule.period.end)}</div></div><div class=\"css_location_group_item_bus_arrival_time_chart\">${busArrivalTime.chart}</div></div>`).join('');\n    }\n\n    function updateStretch(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      if (skeletonScreen) {\n        thisElement.setAttribute('stretched', 'false');\n      }\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    function updateSaveToFolderButton(thisItemElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisItemElement, '.css_location_group_item_body');\n      const thisItemButtonsElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buttons');\n      const saveToFolderButtonElement = elementQuerySelector(thisItemButtonsElement, '.css_location_group_item_button[type=\"save-to-folder\"]');\n      saveToFolderButtonElement.onclick = function () {\n        openSaveToFolder('stop-on-location', [thisItemElement.id, thisItem.stopId, thisItem.routeId]);\n      };\n      isFolderContentSaved('stop', thisItem.stopId).then((e) => {\n        saveToFolderButtonElement.setAttribute('highlighted', booleanToString(e));\n      });\n    }\n\n    function updateScheduleNotificationButton(thisItemElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisItemElement, '.css_location_group_item_body');\n      const thisItemButtonsElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buttons');\n      const scheduleNotificationButtonElement = elementQuerySelector(thisItemButtonsElement, '.css_location_group_item_button[type=\"schedule-notification\"]');\n      scheduleNotificationButtonElement.onclick = function () {\n        openScheduleNotification('stop-on-location', [thisItemElement.id, thisItem.stopId, thisItem.routeId, thisItem.status.time]);\n      };\n      const havingNotifcationSchedules = stopHasNotifcationSchedules(thisItem.stopId);\n      scheduleNotificationButtonElement.setAttribute('highlighted', booleanToString(havingNotifcationSchedules));\n    }\n\n    if (previousItem === null) {\n      updateStatus(thisElement, thisItem, animation);\n      updateRank(thisElement, thisItem, animation);\n      updateRouteDirection(thisElement, thisItem);\n      updateRouteName(thisElement, thisItem);\n      updateBuses(thisElement, thisItem);\n      updateBusArrivalTimes(thisElement, thisItem);\n      updateStretch(thisElement, skeletonScreen);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n      updateSaveToFolderButton(thisElement, thisItem);\n      updateScheduleNotificationButton(thisElement, thisItem);\n    } else {\n      if (thisItem.status.time !== previousItem.status.time) {\n        updateStatus(thisElement, thisItem, animation);\n        updateScheduleNotificationButton(thisElement, thisItem);\n      }\n      if (previousItem.ranking.number !== thisItem.ranking.number || previousItem.ranking.code !== thisItem.ranking.code) {\n        updateRank(thisElement, thisItem, animation);\n      }\n      if (previousItem.stopId !== thisItem.stopId) {\n        updateRouteDirection(thisElement, thisItem);\n        updateRouteName(thisElement, thisItem);\n        updateSaveToFolderButton(thisElement, thisItem);\n      }\n      if (!compareThings(previousItem.buses, thisItem.buses)) {\n        updateBuses(thisElement, thisItem);\n      }\n      if (!compareThings(previousItem.busArrivalTimes, thisItem.busArrivalTimes)) {\n        updateBusArrivalTimes(thisElement, thisItem);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateStretch(thisElement, skeletonScreen);\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  function updateProperty(thisElement: HTMLElement, thisProperty: LocationGroupProperty, previousProperty: LocationGroupProperty | null): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: LocationGroupProperty): void {\n      elementQuerySelector(thisElement, '.css_location_details_property_icon').innerHTML = getIconHTML(thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: LocationGroupProperty): void {\n      elementQuerySelector(thisElement, '.css_location_details_property_value').innerHTML = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousProperty === null) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (!compareThings(previousProperty.icon, thisProperty.icon)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty.value, thisProperty.value)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n\n  const groupQuantity = integration.groupQuantity;\n  const itemQuantity = integration.itemQuantity;\n  const groupedItems = integration.groupedItems;\n  const groups = integration.groups;\n\n  locationSliding_groupQuantity = groupQuantity;\n  locationSliding_fieldWidth = FieldWidth;\n  locationSliding_fieldHeight = FieldHeight;\n\n  let cumulativeOffset = 0;\n  for (let i = 0; i < groupQuantity; i++) {\n    const width = getTextWidth(groups[`g_${i}`].name, 500, '17px', `\"Noto Sans TC\", sans-serif`) + tabPadding;\n    locationSliding_groupStyles[`g_${i}`] = {\n      width: width,\n      offset: cumulativeOffset\n    };\n    cumulativeOffset += width;\n  }\n  var offset = locationSliding_groupStyles[`g_${locationSliding_initialIndex}`].offset * -1 + locationSliding_fieldWidth * 0.5 - locationSliding_groupStyles[`g_${locationSliding_initialIndex}`].width * 0.5;\n  if (!locationSliding_sliding) {\n    updateLocationCSS(locationSliding_groupQuantity, offset, locationSliding_groupStyles[`g_${locationSliding_initialIndex}`].width - tabPadding, locationSliding_initialIndex);\n  }\n\n  LocationNameElement.innerHTML = /*html*/ `<span>${integration.LocationName}</span>`;\n  LocationNameElement.setAttribute('animation', booleanToString(animation));\n  LocationNameElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  LocationButtonRightElement.onclick = function () {\n    openLocationDetails(integration.hash);\n  };\n  LocationGroupTabsElement.setAttribute('animation', booleanToString(animation));\n  LocationGroupTabsElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  LocationGroupTabLineTrackElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  // TODO: updateTab\n\n  const currentGroupSeatQuantity = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group').length;\n  if (groupQuantity !== currentGroupSeatQuantity) {\n    const capacity = currentGroupSeatQuantity - groupQuantity;\n    if (capacity < 0) {\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const newGroupElement = generateElementOfGroup();\n        LocationGroupsElement.appendChild(newGroupElement.element);\n        const newTabElement = generateElementOfTab();\n        LocationGroupTabsTrayElement.appendChild(newTabElement.element);\n      }\n    } else {\n      const LocationGroupElements = elementQuerySelectorAll(LocationGroupsElement, `.css_location_group`);\n      const LocationGroupTabElements = elementQuerySelectorAll(LocationGroupTabsTrayElement, '.css_location_group_tab');\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const groupIndex = currentGroupSeatQuantity - 1 - o;\n        LocationGroupElements[groupIndex].remove();\n        LocationGroupTabElements[groupIndex].remove();\n      }\n    }\n  }\n\n  const LocationGroupElements = elementQuerySelectorAll(LocationGroupsElement, `.css_location_group`);\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const thisLocationGroupElement = LocationGroupElements[i];\n    const currentItemSeatQuantity = elementQuerySelectorAll(thisLocationGroupElement, `.css_location_group_items .css_location_group_item`).length;\n    if (itemQuantity[groupKey] !== currentItemSeatQuantity) {\n      const capacity = currentItemSeatQuantity - itemQuantity[groupKey];\n      if (capacity < 0) {\n        const LocationGroupItemsElement = elementQuerySelector(thisLocationGroupElement, `.css_location_group_items`);\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          const newItemElement = generateElementOfItem();\n          LocationGroupItemsElement.appendChild(newItemElement.element);\n        }\n      } else {\n        const LocationGroupItemElements = elementQuerySelectorAll(thisLocationGroupElement, `.css_location_group_items .css_location_group_item`);\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          const itemIndex = currentItemSeatQuantity - 1 - o;\n          LocationGroupItemElements[itemIndex].remove();\n        }\n      }\n    }\n\n    const currentGroupPropertySeatQuantity = elementQuerySelectorAll(elementQuerySelectorAll(LocationGroupsElement, '.css_location_group')[i], `.css_location_group_details .css_location_group_details_body .css_location_group_details_property`).length;\n    const groupPropertyQuantity = groups[groupKey].properties.length;\n    if (groupPropertyQuantity !== currentGroupPropertySeatQuantity) {\n      const capacity = currentGroupPropertySeatQuantity - groupPropertyQuantity;\n      if (capacity < 0) {\n        const thisLocationGroupDetailsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_details');\n        const thisLocationGroupDetailsBodyElement = elementQuerySelector(thisLocationGroupDetailsElement, '.css_location_group_details_body');\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          // var propertyIndex = currentGroupPropertySeatQuantity + o;\n          const newPropertyElement = generateElementOfGroupDetailsProperty();\n          thisLocationGroupDetailsBodyElement.appendChild(newPropertyElement.element);\n        }\n      } else {\n        const thisLocationGroupDetailsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_details');\n        const thisLocationGroupDetailsBodyElement = elementQuerySelector(thisLocationGroupDetailsElement, '.css_location_group_details_body');\n        const propertyElements = elementQuerySelectorAll(thisLocationGroupDetailsBodyElement, '.css_location_group_details_property');\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          const propertyIndex = currentGroupPropertySeatQuantity - 1 - o;\n          propertyElements[propertyIndex].remove();\n        }\n      }\n    }\n  }\n\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const thisTabElement = elementQuerySelectorAll(LocationGroupTabsTrayElement, '.css_location_group_tab')[i];\n    thisTabElement.innerHTML = /*html*/ `<span>${groups[groupKey].name}</span>`;\n    thisTabElement.style.setProperty('--b-cssvar-location-tab-width', `${locationSliding_groupStyles[groupKey].width}px`);\n    thisTabElement.style.setProperty('--b-cssvar-location-tab-index', i.toString());\n    const thisGroupElement = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group')[i];\n    const groupPropertyQuantity = groups[groupKey].properties.length;\n\n    for (let k = 0; k < groupPropertyQuantity; k++) {\n      const thisProperty = groups[groupKey].properties[k];\n      const thisElement = elementQuerySelectorAll(thisGroupElement, `.css_location_group_details .css_location_group_details_body .css_location_group_details_property`)[k];\n      if (previousIntegration.hasOwnProperty('groups')) {\n        if (previousIntegration.groups.hasOwnProperty(groupKey)) {\n          if (previousIntegration.groups[groupKey].properties[k]) {\n            const previousProperty = previousIntegration.groups[groupKey].properties[k];\n            updateProperty(thisElement, thisProperty, previousProperty);\n          } else {\n            updateProperty(thisElement, thisProperty, null);\n          }\n        } else {\n          updateProperty(thisElement, thisProperty, null);\n        }\n      } else {\n        updateProperty(thisElement, thisProperty, null);\n      }\n    }\n\n    for (let j = 0; j < itemQuantity[groupKey]; j++) {\n      const thisElement = elementQuerySelectorAll(thisGroupElement, `.css_location_group_items .css_location_group_item`)[j];\n      const thisItem = groupedItems[groupKey][j];\n      if (previousIntegration.hasOwnProperty('groupedItems')) {\n        if (previousIntegration.groupedItems.hasOwnProperty(groupKey)) {\n          if (previousIntegration.groupedItems[groupKey][j]) {\n            const previousItem = previousIntegration.groupedItems[groupKey][j];\n            updateItem(thisElement, thisItem, previousItem);\n          } else {\n            updateItem(thisElement, thisItem, null);\n          }\n        } else {\n          updateItem(thisElement, thisItem, null);\n        }\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nasync function refreshLocation() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  const busArrivalTimeChartSize = querySize('location-bus-arrival-time-chart');\n  locationRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  locationRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  locationRefreshTimer_refreshing = true;\n  locationRefreshTimer_currentRequestID = generateIdentifier();\n  LocationUpdateTimerElement.setAttribute('refreshing', 'true');\n  LocationUpdateTimerElement.classList.remove('css_location_update_timer_slide_rtl');\n  document.addEventListener(locationRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateLocation(currentHashSet_hash, busArrivalTimeChartSize.width, busArrivalTimeChartSize.height, locationRefreshTimer_currentRequestID);\n  updateLocationField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (locationRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  locationRefreshTimer_lastUpdate = new Date().getTime();\n  if (locationRefreshTimer_dynamic) {\n    locationRefreshTimer_nextUpdate = Math.max(locationRefreshTimer_lastUpdate + locationRefreshTimer_minInterval, integration.dataUpdateTime + locationRefreshTimer_baseInterval / updateRate);\n  } else {\n    locationRefreshTimer_nextUpdate = locationRefreshTimer_lastUpdate + locationRefreshTimer_baseInterval;\n  }\n  locationRefreshTimer_dynamicInterval = Math.max(locationRefreshTimer_minInterval, locationRefreshTimer_nextUpdate - locationRefreshTimer_lastUpdate);\n  locationRefreshTimer_refreshing = false;\n  LocationUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nexport function streamLocation(): void {\n  refreshLocation()\n    .then(function () {\n      if (locationRefreshTimer_streaming) {\n        setTimeout(function () {\n          streamLocation();\n        }, Math.max(locationRefreshTimer_minInterval, locationRefreshTimer_nextUpdate - new Date().getTime()));\n      } else {\n        locationRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (locationRefreshTimer_streaming) {\n        promptMessage(`地點網路連線中斷，將在${locationRefreshTimer_retryInterval / 1000}秒後重試。`, 'error');\n        setTimeout(function () {\n          streamLocation();\n        }, locationRefreshTimer_retryInterval);\n      } else {\n        locationRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openLocation(hash: string): void {\n  pushPageHistory('Location');\n  logRecentView('location', hash);\n  currentHashSet_hash = hash;\n  locationSliding_initialIndex = 0;\n  LocationField.setAttribute('displayed', 'true');\n  LocationGroupsElement.scrollLeft = 0;\n  setUpLocationFieldSkeletonScreen();\n  if (!locationRefreshTimer_streaming) {\n    locationRefreshTimer_streaming = true;\n    if (!locationRefreshTimer_streamStarted) {\n      locationRefreshTimer_streamStarted = true;\n      streamLocation();\n    } else {\n      refreshLocation();\n    }\n  }\n  closePreviousPage();\n}\n\nexport function closeLocation(): void {\n  // revokePageHistory('Location');\n  LocationField.setAttribute('displayed', 'false');\n  locationRefreshTimer_streaming = false;\n  openPreviousPage();\n}\n\nexport function stretchLocationItem(itemElementID: string): void {\n  const itemElement = elementQuerySelector(LocationGroupsElement, `.css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const itemBodyElement = elementQuerySelector(itemElement, '.css_location_group_item_body');\n\n  const itemsElement = itemElement.parentElement as HTMLElement;\n\n  const elementsBelowItemElement = getElementsBelow(itemElement, 'css_location_group_item');\n  const elementsBelowLength = elementsBelowItemElement.length;\n\n  const itemsElementRect = itemsElement.getBoundingClientRect();\n  const itemElementRect = itemElement.getBoundingClientRect();\n\n  // const itemElementX = itemElementRect.left - itemsElementRect.left;\n  const itemElementY = itemElementRect.top - itemsElementRect.top;\n\n  const stretched = itemElement.getAttribute('stretched') === 'true' ? true : false;\n  const animation = itemElement.getAttribute('animation') === 'true' ? true : false;\n\n  if (animation) {\n    const pushDirection = stretched ? '2' : '1';\n\n    // Separate the elements from the document flow while keeping its position\n    itemElement.setAttribute('stretching', 'true');\n    // itemElement.style.setProperty('--b-cssvar-css-location-group-item-x', `${itemElementX}px`);\n    itemElement.style.setProperty('--b-cssvar-css-location-group-item-y', `${itemElementY}px`);\n\n    // Set push direction and push state\n    for (let i = 0; i < elementsBelowLength; i++) {\n      const thisItemElement = elementsBelowItemElement[i];\n      thisItemElement.setAttribute('push-direction', pushDirection);\n      thisItemElement.setAttribute('push-state', '1');\n    }\n\n    itemElement.addEventListener(\n      'transitionend',\n      function () {\n        // Reset the push direction and push state\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          thisItemElement.setAttribute('push-direction', '0');\n          thisItemElement.setAttribute('push-state', '0');\n        }\n        // Deposit the element\n        itemElement.setAttribute('stretching', 'false');\n      },\n      { once: true }\n    );\n\n    itemElement.addEventListener(\n      'transitionstart',\n      function () {\n        // Transition the elements below\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          thisItemElement.setAttribute('push-state', '2');\n        }\n      },\n      { once: true }\n    );\n  }\n\n  if (stretched) {\n    if (animation) {\n      itemBodyElement.addEventListener(\n        'transitionend',\n        function () {\n          itemBodyElement.setAttribute('displayed', 'false');\n        },\n        { once: true }\n      );\n    } else {\n      itemBodyElement.setAttribute('displayed', 'false');\n    }\n    itemElement.setAttribute('stretched', 'false');\n  } else {\n    itemBodyElement.setAttribute('displayed', 'true');\n    itemElement.setAttribute('stretched', 'true');\n  }\n}\n\nexport function switchLocationBodyTab(itemID: string, tabCode: number): void {\n  const itemElement = elementQuerySelector(LocationGroupsElement, `.css_location_group .css_location_group_items .css_location_group_item#${itemID}`);\n  const itemBodyElement = elementQuerySelector(itemElement, '.css_location_group_item_body');\n  const buttonsElement = elementQuerySelector(itemBodyElement, '.css_location_group_item_buttons');\n  const buttonElements = elementQuerySelectorAll(buttonsElement, '.css_location_group_item_button[highlighted=\"true\"][type=\"tab\"]');\n  for (const t of buttonElements) {\n    t.setAttribute('highlighted', 'false');\n  }\n  elementQuerySelector(buttonsElement, `.css_location_group_item_button[code=\"${tabCode}\"]`).setAttribute('highlighted', 'true');\n  switch (tabCode) {\n    case 0:\n      elementQuerySelector(itemElement, '.css_location_group_item_buses').setAttribute('displayed', 'true');\n      elementQuerySelector(itemElement, '.css_location_group_item_bus_arrival_times').setAttribute('displayed', 'false');\n      break;\n    case 1:\n      elementQuerySelector(itemElement, '.css_location_group_item_buses').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_location_group_item_bus_arrival_times').setAttribute('displayed', 'true');\n      break;\n    default:\n      break;\n  }\n}\n","import { createFolder } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst FolderCreatorBodyElement = elementQuerySelector(FolderCreatorField, '.css_folder_creator_body');\nconst FolderCreatorGroupsElement = elementQuerySelector(FolderCreatorBodyElement, '.css_folder_creator_groups');\nconst NameInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-name\"] .css_folder_creator_group_body input');\nconst IconInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\n\nexport function createFormulatedFolder(): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  createFolder(name, icon).then((e) => {\n    if (e) {\n      closeFolderCreator();\n      promptMessage('已建立資料夾', 'folder');\n    } else {\n      promptMessage('無法建立資料夾', 'error');\n    }\n  });\n}\n\nexport function openFolderCreator(): void {\n  pushPageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'true');\n  closePreviousPage();\n}\n\nexport function closeFolderCreator(): void {\n  // revokePageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n","import { getMaterialSymbols } from '../../data/apis/getMaterialSymbols/index';\nimport { deleteDataReceivingProgress } from '../../data/apis/loader';\nimport { prepareForMaterialSymbolsSearch, searchForMaterialSymbols } from '../../data/search/searchMaterialSymbols';\nimport { generateIdentifier } from '../../tools/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getIconHTML } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype Target = 'editor' | 'creator' | '';\n\nlet currentTarget: Target = '';\n\nconst folderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst folderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst folderIconSelectorField = documentQuerySelector('.css_folder_icon_selector_field');\n\nfunction generateElementOfSymbol(symbol: string): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_folder_icon_selector_symbol');\n  element.onclick = function () {\n    selectFolderIcon(symbol, currentTarget);\n  };\n  element.innerHTML = getIconHTML(symbol);\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nasync function initializeFolderIconSelectorField() {\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  materialSymbolsElement.innerHTML = '';\n  const requestID = generateIdentifier();\n  const materialSymbols = await getMaterialSymbols(requestID);\n  deleteDataReceivingProgress(requestID);\n  const fragment = new DocumentFragment();\n  for (const symbol of materialSymbols) {\n    const symbolElement = generateElementOfSymbol(symbol, currentTarget);\n    fragment.appendChild(symbolElement.element);\n  }\n  materialSymbolsElement.append(fragment);\n}\n\nexport function updateMaterialSymbolsSearchResult(query: string): void {\n  const materialSymbolsSearchResultsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols_search_results');\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  if (!containPhoneticSymbols(query)) {\n    const searchResults = searchForMaterialSymbols(query, 100);\n    const fragment = new DocumentFragment();\n    for (const result of searchResults) {\n      const symbolElement = generateElementOfSymbol(result.item, currentTarget);\n      fragment.appendChild(symbolElement.element);\n    }\n    materialSymbolsSearchResultsElement.innerHTML = '';\n    materialSymbolsSearchResultsElement.append(fragment);\n    materialSymbolsSearchResultsElement.setAttribute('displayed', searchResults.length > 0 ? 'true' : 'false');\n    materialSymbolsElement.setAttribute('displayed', searchResults.length > 0 ? 'false' : 'true');\n  }\n}\n\nexport function selectFolderIcon(symbol: string): void {\n  let iconInputElement;\n  switch (currentTarget) {\n    case 'editor':\n      iconInputElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input');\n      break;\n    case 'creator':\n      iconInputElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\n      break;\n    default:\n      break;\n  }\n  iconInputElement.value = symbol;\n  closeFolderIconSelector();\n}\n\nexport function openFolderIconSelector(target: Target): void {\n  pushPageHistory('FolderIconSelector');\n  var openFolderIconSelectorElement;\n  switch (target) {\n    case 'editor':\n      currentTarget = 'editor';\n      openFolderIconSelectorElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\n      break;\n    case 'creator':\n      currentTarget = 'creator';\n      openFolderIconSelectorElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input .css_folder_creator_open_folder_icon_selector');\n      break;\n    default:\n      break;\n  }\n  if (openFolderIconSelectorElement.getAttribute('disabled') === 'false') {\n    if (dataDownloadCompleted) {\n      folderIconSelectorField.setAttribute('displayed', 'true');\n      initializeFolderIconSelectorField(currentTarget);\n      prepareForMaterialSymbolsSearch();\n    } else {\n      promptMessage('資料還在下載中', 'download_for_offline');\n    }\n  }\n}\n\nexport function closeFolderIconSelector(): void {\n  revokePageHistory('FolderIconSelector');\n  folderIconSelectorField.setAttribute('displayed', 'false');\n}\n","import { FolderWithContent, listFoldersWithContent } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { openFolderEditor } from '../folder-editor/index';\nimport { getIconHTML } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\n\nconst FolderManagerField = documentQuerySelector('.css_folder_manager_field');\nconst FolderManagerBodyElement = elementQuerySelector(FolderManagerField, '.css_folder_manager_body');\nconst FolderManagerFolderListElement = elementQuerySelector(FolderManagerBodyElement, '.css_folder_manager_folder_list');\n\nfunction generateElementOfItem(item: FolderWithContent): GeneratedElement {\n  // Main container\n  const folderItemElement = document.createElement('div');\n  folderItemElement.classList.add('css_folder_manager_folder_item');\n  folderItemElement.onclick = () => {\n    openFolderEditor(item.id);\n  };\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_manager_folder_item_icon');\n  iconElement.innerHTML = getIconHTML(item.icon);\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_folder_manager_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_folder_manager_folder_item_status');\n  statusElement.appendChild(document.createTextNode(String(item.contentLength)));\n\n  // Arrow\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_folder_manager_folder_item_arrow');\n  arrowElement.innerHTML = getIconHTML('arrow_forward_ios');\n\n  // Assemble\n  folderItemElement.appendChild(iconElement);\n  folderItemElement.appendChild(nameElement);\n  folderItemElement.appendChild(statusElement);\n  folderItemElement.appendChild(arrowElement);\n\n  return {\n    element: folderItemElement,\n    id: ''\n  };\n}\n\nasync function initializeFolderManagerField() {\n  const foldersWithContent = await listFoldersWithContent();\n  FolderManagerFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item);\n    fragment.appendChild(newItemElement.element);\n  }\n  FolderManagerFolderListElement.append(fragment);\n}\n\nexport function openFolderManager(): void {\n  pushPageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'true');\n  initializeFolderManagerField();\n  // closePreviousPage();\n}\n\nexport function closeFolderManager(): void {\n  revokePageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { Folder, FolderContent, getFolder, listFolderContent, removeFromFolder, updateFolder, updateFolderContentIndex } from '../../data/folder/index';\nimport { generateIdentifier } from '../../tools/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { openFolderIconSelector } from '../folder-icon-selector/index';\nimport { getIconHTML } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst FolderEditorHeadElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_head');\nconst LeftButtonElement = elementQuerySelector(FolderEditorHeadElement, '.css_folder_editor_button_left');\nconst FolderEditorBodyElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_body');\nconst FolderEditorGroupsElement = elementQuerySelector(FolderEditorBodyElement, '.css_folder_editor_groups');\nconst NameInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-name\"] .css_folder_editor_group_body input') as HTMLInputElement;\nconst IconInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input') as HTMLInputElement;\nconst OpenFolderIconSelectorElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\nconst FolderContentElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body');\n\nOpenFolderIconSelectorElement.onclick = function () {\n  openFolderIconSelector('editor');\n};\n\nfunction generateElementOfItem(folder: Folder, item: FolderContent): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.id = identifier;\n  itemElement.classList.add('css_folder_editor_folder_item');\n  itemElement.setAttribute('type', item.type);\n\n  // Icon, context, main text\n  let context = '';\n  let main = '';\n  let icon: MaterialSymbols = '';\n  switch (item.type) {\n    case 'stop':\n      icon = 'location_on';\n      context = `${item.route ? item.route.name : ''} - 往${item.route ? [item.route.endPoints.destination, item.route.endPoints.departure, ''][item.direction ? item.direction : 0] : ''}`;\n      main = item.name;\n      break;\n    case 'route':\n      icon = 'route';\n      context = `${item.endPoints.departure} \\u2194 ${item.endPoints.destination}`;\n      main = item.name;\n      break;\n    case 'location':\n      icon = 'location_on';\n      context = '地點';\n      main = item.name;\n      break;\n    case 'bus':\n      context = '';\n      main = item.name;\n      break;\n    case 'empty':\n      icon = 'lightbulb';\n      context = '提示';\n      main = '沒有內容';\n      break;\n    default:\n      icon = '';\n      context = 'null';\n      main = 'null';\n      break;\n  }\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_editor_folder_item_icon');\n  iconElement.innerHTML = getIconHTML(icon);\n\n  // Context element\n  const contextElement = document.createElement('div');\n  contextElement.classList.add('css_folder_editor_folder_item_context');\n  contextElement.appendChild(document.createTextNode(context));\n\n  // Main element\n  const mainElement = document.createElement('div');\n  mainElement.classList.add('css_folder_editor_folder_item_main');\n  mainElement.appendChild(document.createTextNode(main));\n\n  // Capsule element\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_folder_editor_folder_item_capsule');\n\n  // Sort up control\n  const sortUpElement = document.createElement('div');\n  sortUpElement.classList.add('css_folder_editor_folder_item_sort_control_up');\n  sortUpElement.innerHTML = getIconHTML('keyboard_arrow_down');\n  sortUpElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'up');\n  };\n\n  // Sort down control\n  const sortDownElement = document.createElement('div');\n  sortDownElement.classList.add('css_folder_editor_folder_item_sort_control_down');\n  sortDownElement.innerHTML = getIconHTML('keyboard_arrow_down');\n  sortDownElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'down');\n  };\n\n  // Delete control\n  const deleteElement = document.createElement('div');\n  deleteElement.classList.add('css_folder_editor_folder_item_delete');\n  deleteElement.innerHTML = getIconHTML('delete');\n  deleteElement.onclick = () => {\n    removeItemOnFolderEditor(identifier, folder.id, item.type, item.id);\n  };\n\n  // Capsule separators\n  const separator1Element = document.createElement('div');\n  separator1Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n  const separator2Element = document.createElement('div');\n  separator2Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(sortUpElement);\n  capsuleElement.appendChild(sortDownElement);\n  capsuleElement.appendChild(deleteElement);\n  capsuleElement.appendChild(separator1Element);\n  capsuleElement.appendChild(separator2Element);\n\n  // Assemble main item\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(contextElement);\n  itemElement.appendChild(mainElement);\n  itemElement.appendChild(capsuleElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction updateFolderEditorField(folder: Folder, content: Array<FolderContent>): void {\n  NameInputElement.value = folder.name;\n  IconInputElement.value = folder.icon;\n\n  LeftButtonElement.onclick = function () {\n    saveEditedFolder(folder.id);\n  };\n\n  FolderContentElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of content) {\n    const thisItemElement = generateElementOfItem(folder, item);\n    fragment.appendChild(thisItemElement.element);\n  }\n  FolderContentElement.append(fragment);\n}\n\nasync function initializeFolderEditorField(folderID: string) {\n  // TODO: add skeleton screen\n  const folder = await getFolder(folderID);\n  const content = await listFolderContent(folderID);\n  updateFolderEditorField(folder, content);\n}\n\nexport function openFolderEditor(folderID: string): void {\n  pushPageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'true');\n  initializeFolderEditorField(folderID);\n  closePreviousPage();\n}\n\nexport function closeFolderEditor(): void {\n  // revokePageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function removeItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: number): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  removeFromFolder(folderID, type, id).then((e) => {\n    if (e) {\n      itemElement.remove();\n      switch (type) {\n        case 'stop':\n          promptMessage('已移除站牌', 'delete');\n          break;\n        case 'route':\n          promptMessage('已移除路線', 'delete');\n          break;\n        case 'location':\n          promptMessage('已移除地點', 'delete');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('無法移除', 'error');\n    }\n  });\n}\n\nexport function moveItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: FolderContent['id'], direction: 'up' | 'down'): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  updateFolderContentIndex(folderID, type, id, direction).then((e) => {\n    if (e) {\n      switch (direction) {\n        case 'up':\n          const previousSibling = itemElement.previousElementSibling;\n          if (previousSibling) {\n            itemElement.parentNode.insertBefore(itemElement, previousSibling);\n          }\n          promptMessage('已往上移', 'arrow_circle_up');\n          break;\n        case 'down':\n          const nextSibling = itemElement.nextElementSibling;\n          if (nextSibling) {\n            itemElement.parentNode.insertBefore(nextSibling, itemElement);\n          }\n          promptMessage('已往下移', 'arrow_circle_down');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('無法移動', 'error');\n    }\n  });\n}\n\nexport function saveEditedFolder(folderID: string): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  updateFolder(folderID, name, icon);\n  closeFolderEditor();\n}\n","import { getLocation, MergedLocation, MergedLocationItem } from '../../../data/apis/getLocation/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../../../data/apis/loader';\nimport { generateIdentifier } from '../../../tools/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nexport async function shareLocationPermalink(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    const thisLocation = Location[thisLocationKey] as MergedLocationItem;\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisLocation.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('已分享地點連結', 'link');\n        })\n        .catch((e) => {\n          promptMessage('已取消分享連結', 'cancel');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showLocationPermalinkQRCode(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    openQRCode(link);\n  }\n}\n","import { isFolderContentSaved } from '../../../data/folder/index';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { booleanToString } from '../../../tools/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../../tools/query-selector';\nimport { pushPageHistory, revokePageHistory } from '../../index';\nimport { openSaveToFolder } from '../../save-to-folder/index';\nimport { shareLocationPermalink, showLocationPermalinkQRCode } from './actions';\n\nexport const LocationDetailsField = documentQuerySelector('.css_location_details_field');\nexport const LocationDetailsBodyElement = elementQuerySelector(LocationDetailsField, '.css_location_details_body');\nexport const LocationDetailsGroupsElement = elementQuerySelector(LocationDetailsBodyElement, '.css_location_details_groups');\n\nexport const LocationActionsGroupElement = elementQuerySelector(LocationDetailsField, '.css_location_details_body .css_location_details_groups .css_location_details_group[group=\"actions\"]');\nexport const LocationSaveToFolderActionButton = elementQuerySelector(LocationActionsGroupElement, '.css_location_details_group_body .css_location_details_action_button[action=\"save-to-folder\"]');\nexport const LocationGetPermalinkActionButton = elementQuerySelector(LocationActionsGroupElement, '.css_location_details_group_body .css_location_details_action_button[action=\"get-permalink\"]');\nexport const LocationShowPermalinkQRCodeActionButton = elementQuerySelector(LocationActionsGroupElement, '.css_location_details_group_body .css_location_details_action_button[action=\"show-permalink-qrcode\"]');\n\n// export const PropertiesGroupElement = elementQuerySelector(LocationDetailsField, '.css_location_details_body .css_location_details_groups .css_location_details_group[group=\"properties\"]');\n\nasync function initializeLocationDetailsField(hash: string) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const existence = await isFolderContentSaved('location', hash);\n  LocationSaveToFolderActionButton.setAttribute('animation', booleanToString(playing_animation));\n  LocationSaveToFolderActionButton.setAttribute('highlighted', booleanToString(existence));\n  LocationSaveToFolderActionButton.onclick = function () {\n    openSaveToFolder('location', [hash]);\n  };\n  LocationGetPermalinkActionButton.setAttribute('animation', booleanToString(playing_animation));\n  LocationGetPermalinkActionButton.onclick = function () {\n    shareLocationPermalink(hash);\n  };\n  LocationShowPermalinkQRCodeActionButton.setAttribute('animation', booleanToString(playing_animation));\n  LocationShowPermalinkQRCodeActionButton.onclick = function () {\n    showLocationPermalinkQRCode(hash);\n  };\n}\n\nexport function openLocationDetails(hash: string): void {\n  pushPageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'true');\n  initializeLocationDetailsField(hash);\n}\n\nexport function closeLocationDetails(): void {\n  revokePageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'false');\n}\n"],"names":["SplashScreenElement","documentQuerySelector","ErrorMessageElement","splashScreenTimer_minimalTimeOut","splashScreenTimer_openTime","Date","getTime","pageHistory","pushPageHistory","page","pageHistoryLength","length","push","revokePageHistory","indexOf","pop","closePreviousPage","closeFolderCreator","closeFolderEditor","closeFolderManager","closeSearch","closeSettings","closePersonalScheduleManager","closePersonalScheduleEditor","closeBus","closeRegisterNotification","openPreviousPage","previousPage","openFolderCreator","openFolderEditor","openFolderManager","openSearch","openSettings","openPersonalScheduleManager","openPersonalScheduleEditor","openBus","openRegisterNotification","setSplashScreenIconOffsetY","offset","isRunningStandalone","window","outerHeight","innerHeight","style","setProperty","fadeOutSplashScreen","callback","fadeOut","classList","add","addEventListener","setAttribute","remove","once","cureentTime","setTimeout","Math","max","showErrorMessage","querySize","type","width","height","windowWidth","innerWidth","windowHeight","scrollDocumentToTop","scrollTo","top","behavior","LocationField","LocationHeadElement","elementQuerySelector","LocationNameElement","LocationButtonRightElement","LocationGroupsElement","LocationGroupTabsElement","LocationGroupTabsTrayElement","LocationGroupTabLineTrackElement","LocationGroupTabLineElement","LocationUpdateTimerElement","previousIntegration","previousAnimation","previousSkeletonScreen","locationSliding_initialIndex","locationSliding_targetIndex","locationSliding_groupQuantity","locationSliding_groupStyles","locationSliding_fieldWidth","locationSliding_sliding","locationRefreshTimer_retryInterval","locationRefreshTimer_baseInterval","locationRefreshTimer_minInterval","locationRefreshTimer_dynamicInterval","locationRefreshTimer_dynamic","locationRefreshTimer_lastUpdate","locationRefreshTimer_nextUpdate","locationRefreshTimer_currentRequestID","locationRefreshTimer_refreshing","locationRefreshTimer_streaming","locationRefreshTimer_streamStarted","currentHashSet_hash","tabPadding","initializeLocationSliding","round","scrollLeft","passive","event","currentIndex","target","initialSize","targetSize","tabWidth","abs","updateLocationCSS","groupQuantity","tabLineWidth","percentage","toString","toFixed","handleDataReceivingProgressUpdates","CustomEvent","offsetRatio","detail","progress","stage","document","removeEventListener","generateElementOfItem","identifier","generateIdentifier","itemElement","createElement","id","headElement","rankElement","rankNextSlideElement","rankCurrentSlideElement","appendChild","routeDirectionElement","routeNameElement","capsuleElement","statusElement","nextSlideElement","currentSlideElement","stretchElement","innerHTML","getIconHTML","onclick","itemElementID","itemBodyElement","itemsElement","parentElement","elementsBelowItemElement","getElementsBelow","elementsBelowLength","itemsElementRect","getBoundingClientRect","itemElementRect","itemElementY","stretched","getAttribute","animation","pushDirection","i","thisItemElement","stretchLocationItem","capsuleSeparatorElement","bodyElement","buttonsElement","busTabButtonElement","busTabIconElement","createTextNode","switchLocationBodyTab","arrivalTabButtonElement","arrivalTabIconElement","saveButtonElement","saveButtonIconElement","openSaveToFolder","notifyButtonElement","notifyButtonIconElement","openScheduleNotification","busesElement","busArrivalTimesElement","element","generateElementOfGroup","groupElement","detailsElement","detailsBodyElement","generateElementOfGroupDetailsProperty","propertyElement","iconElement","valueElement","updateLocationField","integration","skeletonScreen","updateItem","thisElement","thisItem","previousItem","updateStatus","thisElementRect","left","bottom","right","thisItemStatusElement","status","code","innerText","text","updateRank","thisRankElement","ranking","updateRouteDirection","route_direction","updateRouteName","route_name","updateBuses","buses","map","bus","onThisRoute","carNumber","RouteName","join","updateBusArrivalTimes","busArrivalTimes","busArrivalTime","personalSchedule","name","indexToDay","day","timeObjectToString","period","start","end","chart","updateStretch","updateAnimation","booleanToString","updateSkeletonScreen","updateSaveToFolderButton","thisItemBodyElement","thisItemButtonsElement","saveToFolderButtonElement","stopId","routeId","isFolderContentSaved","then","e","updateScheduleNotificationButton","scheduleNotificationButtonElement","time","havingNotifcationSchedules","stopHasNotifcationSchedules","number","compareThings","updateProperty","thisProperty","previousProperty","updateIcon","icon","updateValue","value","WindowSize","FieldWidth","FieldHeight","itemQuantity","groupedItems","groups","cumulativeOffset","getTextWidth","LocationName","openLocationDetails","hash","currentGroupSeatQuantity","elementQuerySelectorAll","capacity","o","newGroupElement","newTabElement","LocationGroupElements","LocationGroupTabElements","groupIndex","groupKey","thisLocationGroupElement","currentItemSeatQuantity","LocationGroupItemsElement","newItemElement","LocationGroupItemElements","currentGroupPropertySeatQuantity","groupPropertyQuantity","properties","thisLocationGroupDetailsElement","thisLocationGroupDetailsBodyElement","newPropertyElement","propertyElements","thisTabElement","thisGroupElement","k","hasOwnProperty","j","refreshLocation","_refreshLocation","apply","arguments","playing_animation","getSettingOptionValue","refresh_interval_setting","busArrivalTimeChartSize","dynamic","baseInterval","integrateLocation","updateRate","getUpdateRate","dataUpdateTime","streamLocation","err","promptMessage","openLocation","logRecentView","defaultItemQuantity","g_0","floor","g_1","key","setUpLocationFieldSkeletonScreen","closeLocation","itemID","tabCode","_step","_iterator","_createForOfIteratorHelper","s","n","done","f","FolderCreatorField","FolderCreatorBodyElement","FolderCreatorGroupsElement","NameInputElement","IconInputElement","createFormulatedFolder","createFolder","currentTarget","folderEditorField","folderCreatorField","folderIconSelectorField","generateElementOfSymbol","symbol","iconInputElement","closeFolderIconSelector","selectFolderIcon","_initializeFolderIconSelectorField","materialSymbolsElement","requestID","materialSymbols","getMaterialSymbols","deleteDataReceivingProgress","_step2","fragment","DocumentFragment","_iterator2","symbolElement","append","updateMaterialSymbolsSearchResult","query","materialSymbolsSearchResultsElement","containPhoneticSymbols","searchResults","searchForMaterialSymbols","item","openFolderIconSelector","openFolderIconSelectorElement","dataDownloadCompleted","initializeFolderIconSelectorField","prepareForMaterialSymbolsSearch","FolderManagerField","FolderManagerBodyElement","FolderManagerFolderListElement","folderItemElement","nameElement","String","contentLength","arrowElement","_initializeFolderManagerField","foldersWithContent","listFoldersWithContent","initializeFolderManagerField","FolderEditorField","FolderEditorHeadElement","LeftButtonElement","FolderEditorBodyElement","FolderEditorGroupsElement","OpenFolderIconSelectorElement","FolderContentElement","folder","context","main","route","endPoints","destination","departure","direction","contextElement","mainElement","sortUpElement","moveItemOnFolderEditor","sortDownElement","deleteElement","folderID","removeFromFolder","removeItemOnFolderEditor","separator1Element","separator2Element","_initializeFolderEditorField","content","saveEditedFolder","updateFolderEditorField","getFolder","listFolderContent","_x","initializeFolderEditorField","updateFolderContentIndex","previousSibling","previousElementSibling","parentNode","insertBefore","nextSibling","nextElementSibling","updateFolder","_shareLocationPermalink","_asyncToGenerator","Location","getLocation","deleteDataUpdateTime","thisLocationKey","thisLocation","link","getPermalink","navigator","share","title","url","_showLocationPermalinkQRCode","openQRCode","LocationDetailsField","LocationDetailsBodyElement","LocationActionsGroupElement","LocationSaveToFolderActionButton","LocationGetPermalinkActionButton","LocationShowPermalinkQRCodeActionButton","_initializeLocationDetailsField","existence","shareLocationPermalink","_x2","showLocationPermalinkQRCode","initializeLocationDetailsField","closeLocationDetails"],"sourceRoot":""}