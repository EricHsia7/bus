"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[799],{752(e,t,a){a.d(t,{a:()=>p,b:()=>h,c:()=>v,d:()=>f});var n=a(3422),i=a(8179),r=a(4537),o=a(904),c=a(9119),d=(0,i.c)(".tg"),s=(0,i.e)(d,".ug"),l=(0,i.e)(s,".vg");function u(e,t,a,o,d){var s=(0,i.a)();s.classList.add("wg");var l=(0,i.a)();l.classList.add("xg");var u=document.createElement("span");u.appendChild((0,r.b)(e.icon)),l.appendChild(u);var f=(0,i.a)();f.classList.add("yg"),f.innerText=e.name;var h=e.index;return s.onclick=function(){!function(e,t,a,i,r){(0,c.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),p(),(0,n.m)(t,a,i,r).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,a,o,d,h)},s.appendChild(l),s.appendChild(f),s}function f(e){var t=e?"mc":"nc";d.addEventListener("animationend",function(){d.classList.remove(t)},{once:!0}),d.classList.add(t),d.setAttribute("displayed","true")}function h(e){var t="ltr"===e?"oc":"pc";d.addEventListener("animationend",function(){d.setAttribute("displayed","false"),d.classList.remove(t)},{once:!0}),d.classList.add(t)}function v(e,t,a,i){(0,o.c)("ScheduleNotification"),f("rtl"),function(e,t,a,i){l.innerHTML="";var r=new DocumentFragment;for(var o of n.n){var c=u(o,e,t,a,i);r.appendChild(c)}l.append(r)}(e,t,a,i),(0,o.b)()}function p(){h("ltr"),(0,o.i)(),(0,o.e)("ScheduleNotification")}},1102(){},1306(){},1308(){},1603(){},1743(){},2421(){},2696(){},3041(e,t,a){a.d(t,{a:()=>w,b:()=>L,c:()=>A,d:()=>y});var n=a(9566),i=a(8179),r=a(8024),o=a(6052),c=a(4537),d=a(904),s=a(9119),l=(0,i.c)(".zg"),u=(0,i.e)(l,"._g"),f=(0,i.e)(u,".ah"),h=(0,i.e)(l,".bh"),v=(0,i.e)(h,".ch"),p="已儲存至資料夾",m="無法儲存";function g(e,t,a,o){var d=(0,i.a)();d.classList.add("dh");var l=(0,i.a)();l.classList.add("eh");var u=document.createElement("span");u.appendChild((0,c.b)(e.icon)),l.appendChild(u);var f=(0,i.a)();switch(f.classList.add("fh"),f.innerText=e.name,d.appendChild(l),d.appendChild(f),t){case"stop":d.onclick=function(){(0,n.n)(e.id,a[0],a[1]).then(function(e){e?(0,n.e)("stop",a[0]).then(function(e){e&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(e)),(0,s.a)("folder",p),w())}):(0,s.a)("warning",m)})};break;case"route":d.onclick=function(){(0,n.m)(e.id,a[0]).then(function(e){e?(0,n.e)("route",a[0]).then(function(e){e&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(e)),(0,s.a)("folder",p),w())}):(0,s.a)("warning",m)})};break;case"location":d.onclick=function(){(0,n.l)(e.id,a[0]).then(function(e){e?(0,n.e)("location",a[0]).then(function(e){e&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(e)),(0,s.a)("folder",p),w())}):(0,s.a)("warning",m)})}}return d}function b(e,t,a){v.onclick=function(){(0,o.c)(function(){b(e,t,a)})};var i=(0,n.j)();f.innerHTML="";var r=new DocumentFragment;for(var c of i){var d=g(c,e,t,a);r.appendChild(d)}f.append(r)}function y(e){var t=e?"mc":"nc";l.addEventListener("animationend",function(){l.classList.remove(t)},{once:!0}),l.classList.add(t),l.setAttribute("displayed","true")}function L(e){var t="ltr"===e?"oc":"pc";l.addEventListener("animationend",function(){l.setAttribute("displayed","false"),l.classList.remove(t)},{once:!0}),l.classList.add(t)}function A(e,t,a){(0,d.c)("SaveToFolder"),y("rtl"),b(e,t,a),(0,d.b)()}function w(){L("ltr"),(0,d.i)(),(0,d.e)("SaveToFolder")}},3058(){},3127(){},3534(){},3749(){},3777(){},5286(e,t,a){a.d(t,{a:()=>N,b:()=>P,c:()=>O,d:()=>K,e:()=>Z,f:()=>W,g:()=>X,h:()=>V});var n=a(467),i=a(9566),r=a(8621),o=a(3459),c=a(8179),d=a(8024),s=a(904),l=a(3041),u=a(8134),f=a(9469),h=a(251),v=a(8279);function p(){return(p=(0,n.a)(function*(e){var t=yield(0,u.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,h.b)(t.n,a)}})).apply(this,arguments)}function m(){return(m=(0,n.a)(function*(e){var t=yield(0,u.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,v.c)(a)}})).apply(this,arguments)}var g=a(7968),b=a(6141),y='"Noto Sans TC", sans-serif',L=(0,s.d)("route-details-canvas"),A=L.width,w=L.height,k=Math.min(window.devicePixelRatio,1.875)||1,x={};function C(){var e=(0,c.a)();return e.classList.add("gh"),e}function D(){var e=(0,c.a)();e.classList.add("hh");var t=document.createElement("canvas");return t.classList.add("ih"),e.appendChild(t),e}function _(e,t,a,n,i,r){e.innerText=t.name,e.setAttribute("day",r.toString()),e.onclick=function(){!function(e){for(var t=(0,o.b)("playing_animation"),a=(0,c.d)(N,".gh"),n=(0,c.d)(P,".hh"),i=0;i<7;i++){var r,d,s=a[i],l=n[i],u=`d_${i}`,f=null===(r=x)||void 0===r?void 0:r.calendarEventGroups[u],h=null===(d=x)||void 0===d?void 0:d.calendarDays[u];if(f&&h){var v=(0,b.a)("--c"),p=(0,b.a)("--d"),m=(0,b.a)("--e"),g=(0,b.a)("--xe"),y=(0,b.a)("--b"),L=(0,b.a)("--ea");_(s,h,e,!1,t,i),T(l,f,e,y,v,p,m,g,L,i)}}}(r)},e.setAttribute("highlighted",a===r?"true":"false"),e.setAttribute("animation",(0,d.a)(i)),e.setAttribute("skeleton-screen",(0,d.a)(n))}function T(e,t,a,n,i,r,o,l,u,f){function h(e,t,a){var n=70*t;e.fillStyle=a,e.fillRect(45,n+5,A-45,1.2),e.font=`400 12px ${y}`,e.textBaseline="top";var i=`${String(t).padStart(2,"0")}:00`,r=e.measureText(i),o=r.width,c=r.actualBoundingBoxDescent;e.fillText(i,(45-o)/2,n+(10-c)/2,o)}function v(e,t,a,n,i,r,o){var c=new Date;c.setDate(1),c.setMonth(0),c.setFullYear(t.date.getFullYear()),c.setMonth(t.date.getMonth()),c.setDate(t.date.getDate()),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var d=(t.date.getTime()-c.getTime())/864e5*24*70,s=A-45,l=60*t.duration*1e3/864e5*24*70;(0,g.a)(e,45,d,s,l,3,`rgba(${n}, ${i}, ${r}, ${o})`),(0,g.a)(e,45,d,3,l,{tl:3,tr:0,bl:3,br:0},a),e.font=`400 14px ${y}`,e.textBaseline="top",e.fillStyle=a;var u=t.dateString,f=e.measureText(u),h=f.width,v=f.actualBoundingBoxDescent;e.fillText(u,53,d+(l-v)/2,h)}var p=(0,c.e)(e,".ih"),m=p.getContext("2d");if(function(e,t,a){var n=t===a;e.setAttribute("displayed",(0,d.a)(n))}(e,a,f),function(e){L=(0,s.d)("route-details-canvas"),A=L.width,w=L.height,k=Math.min(window.devicePixelRatio,1.875)||1,e.width=A*k,e.height=w*k;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(k,k)}(p),a===f){m.clearRect(0,0,A,w);for(var b=0;b<24;b++)h(m,b,u);for(var x of t)v(m,x,n,i,r,o,l)}else m.clearRect(0,0,A,w)}function E(e,t,a){var n=(new Date).getDay(),i=(0,b.a)("--c"),r=(0,b.a)("--d"),o=(0,b.a)("--e"),d=(0,b.a)("--xe"),s=(0,b.a)("--b"),l=(0,b.a)("--ea"),u=e.calendarDays,f=e.calendarDayQuantity,h=e.calendarEventGroups,v=(e.calendarEventQuantity,Array.from((0,c.d)(P,".hh"))),p=Array.from((0,c.d)(N,".gh")),m=v.length;if(f!==m){var g=m-f;if(g<0){for(var y=new DocumentFragment,L=new DocumentFragment,A=0;A>g;A--){var w=C();y.appendChild(w),p.push(w);var k=D();L.appendChild(k),v.push(k)}N.append(y),P.append(L)}else if(g>0)for(var E=m-1,S=m-g-1;E>S;E--)p[E].remove(),p.splice(E,1),v[E].remove(),v.splice(E,1)}for(var M=0;M<f;M++){var $=`d_${M}`,F=u[$],R=h[$],q=p[M],B=v[M];_(q,F,n,t,a,M),T(B,R,n,s,i,r,o,d,l,M)}x=e}var S=a(4537),M=[],$=!1,F=!1;function R(){var e=(0,c.a)();e.classList.add("jh");var t=(0,c.a)();t.classList.add("kh"),t.appendChild((0,S.a)()),e.appendChild(t);var a=(0,c.a)();return a.classList.add("lh"),e.appendChild(a),e}function q(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.e)(e,".kh");(0,S.c)(a,t.icon)}function o(e,t){(0,c.e)(e,".lh").innerText=t.value}function s(e,t){e.setAttribute("animation",(0,d.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}null==i?(r(e,n),o(e,n),s(e,a),l(e,t)):((0,d.b)(i,n)||r(e,n),(0,d.b)(i,n)||o(e,n),$!==a&&s(e,a),F!==t&&l(e,t))}var i=e.length;t!==F&&K.setAttribute("skeleton-screen",(0,d.a)(t));var r=Array.from((0,c.d)(O,".jh")),o=r.length;if(i!==o){var s=o-i;if(s<0){for(var l=new DocumentFragment,u=0;u>s;u--){var f=R();l.appendChild(f),r.push(f)}O.append(l)}else if(s>0)for(var h=o-1,v=o-s-1;h>v;h--)r[h].remove(),r.splice(h,1)}for(var p=0;p<i;p++){var m=r[p],g=e[p];0===M.length?n(m,g,null):n(m,g,M[p])}M=e,$=a,F=t}var B=(0,c.c)(".mh"),H=(0,c.e)(B,".nh"),Q=(0,c.e)(H,".oh"),j=(0,c.e)(Q,'.ph[group="calendar"]'),G=(0,c.e)(j,".qh"),N=(0,c.e)(G,".rh"),P=(0,c.e)(G,".sh"),Y=(0,c.e)(B,'.nh .oh .ph[group="actions"]'),z=(0,c.e)(Y,'.qh .th[action="save-to-folder"]'),I=(0,c.e)(Y,'.qh .th[action="get-permalink"]'),J=(0,c.e)(Y,'.qh .th[action="show-permalink-qrcode"]'),K=(0,c.e)(Q,'.ph[group="properties"]'),O=(0,c.e)(K,".qh");function U(){return U=(0,n.a)(function*(e,t){var a=(0,o.b)("playing_animation"),n=yield(0,i.e)("route",e);z.setAttribute("animation",(0,d.a)(a)),z.setAttribute("highlighted",(0,d.a)(n)),z.onclick=function(){(0,l.c)("route",[e],z)},I.setAttribute("animation",(0,d.a)(a)),I.onclick=function(){!function(e){p.apply(this,arguments)}(e)},J.setAttribute("animation",(0,d.a)(a)),J.onclick=function(){!function(e){m.apply(this,arguments)}(e)},function(){for(var e=(0,o.b)("playing_animation"),t=[],a=0;a<5;a++)t.push({key:a,icon:"none",value:""});q(t,!0,e)}(),function(){for(var e=(0,o.b)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},a={},n={},i=0;i<7;i++){var r=`d_${i}`;a[r]=[],n[r]={day:i,code:"d_{i}",name:""};for(var c=0;c<t[r];c++){var d=new Date;d.setHours(0),d.setMinutes(30*c),d.setSeconds(0),d.setMilliseconds(0),a[r].push({date:d,dateString:"",duration:15})}}E({calendarEventGroups:a,calendarDays:n,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var c=(0,d.c)(),s=yield(0,r.a)(e,t,c);q(s.properties,!1,a),E(s.calendar,!1,a)}),U.apply(this,arguments)}function V(e){var t=e?"mc":"nc";B.addEventListener("animationend",function(){B.classList.remove(t)},{once:!0}),B.classList.add(t),B.setAttribute("displayed","true")}function W(e){var t="ltr"===e?"oc":"pc";B.addEventListener("animationend",function(){B.setAttribute("displayed","false"),B.classList.remove(t)},{once:!0}),B.classList.add(t)}function X(e,t){(0,s.c)("RouteDetails"),V("rtl"),function(e,t){U.apply(this,arguments)}(e,t),(0,s.b)()}function Z(){W("ltr"),(0,s.i)(),(0,s.e)("RouteDetails");var e=(0,c.d)(P,".hh");for(var t of e)t.remove();var a=(0,c.d)(N,".gh");for(var n of a)n.remove()}},5392(){},5461(){},6018(){},6388(){},6597(){},7217(){},7225(){},7287(){},7723(){},7868(){},9991(){}}]);
//# sourceMappingURL=d917fd124d8c5a349584.js.map