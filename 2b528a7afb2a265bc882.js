"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{313:(t,e,n)=>{n.d(e,{s:()=>y});var r=n(4311),i=n(3153),o=n(6788);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)})}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return p=l(function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l(function*(){var e,n=[],r=a([[0,9],[1,9]].map(function(t){return{url:(0,i.y)(t[0],t[1]),e:t}}));try{for(r.s();!(e=r.n()).done;){var u=e.value,f=yield(0,o.Fd)(u.url,t,`getProvider_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){r.e(t)}finally{r.f()}return n}),n.apply(this,arguments)}var u="bus_provider_cache",f=yield(0,r.Ct)(0,`${u}_timestamp`);if(null===f){var y=yield e();return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(y)),s||(s=!0,c=y),y}if((new Date).getTime()-parseInt(f)>5184e6){var p=yield e();return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(p)),p}if(!s){var d=yield(0,r.Ct)(0,u);s=!0,c=JSON.parse(d)}return(0,o.Mf)(t,"getProvider_0",0,!0),(0,o.Mf)(t,"getProvider_1",0,!0),(0,o.ZL)(t,-1),c}),p.apply(this,arguments)}},424:(t,e,n)=>{n.d(e,{T:()=>d});var r=n(4311),i=n(3153),o=n(6788);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)})}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return(p=l(function*(t){var e=new Worker(new URL(n.p+n.u(132),n.b));return yield new Promise(function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return m=l(function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l(function*(){var e,n=[],r=a([[0,11],[1,11]].map(function(t){return{url:(0,i.y)(t[0],t[1]),e:t}}));try{for(r.s();!(e=r.n()).done;){var u=e.value,f=yield(0,o.Fd)(u.url,t,`getStop_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){r.e(t)}finally{r.f()}return n}),n.apply(this,arguments)}var u="bus_stop_cache",f=yield(0,r.Ct)(0,`${u}_timestamp`);if(null===f){var p=yield e(),d=yield y(p);return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(d)),s||(s=!0,c=d),d}if((new Date).getTime()-parseInt(f)>3888e6){var m=yield e(),v=yield y(m);return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(v)),v}if(!s){var h=yield(0,r.Ct)(0,u);s=!0,c=JSON.parse(h)}return(0,o.Mf)(t,"getStop_0",0,!0),(0,o.Mf)(t,"getStop_1",0,!0),(0,o.ZL)(t,-1),c}),m.apply(this,arguments)}},1932:(t,e,n)=>{n.d(e,{L:()=>v});var r=n(4311),i=n(3153),o=n(6788);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)})}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return(p=l(function*(t){var e=new Worker(new URL(n.p+n.u(332),n.b));return yield new Promise(function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return(m=l(function*(t){var e=new Worker(new URL(n.p+n.u(892),n.b));return yield new Promise(function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function v(t){return h.apply(this,arguments)}function h(){return h=l(function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l(function*(){var e,n="",r=a([[0,15],[1,15]].map(function(t){return{url:(0,i.y)(t[0],t[1]),e:t}}));try{for(r.s();!(e=r.n()).done;){var u=e.value;n+=(yield(0,o.Fd)(u.url,t,`getSegmentBuffers_${u.e[0]}`,"xml")),(0,o.ZL)(t,-1)}}catch(t){r.e(t)}finally{r.f()}return n}),n.apply(this,arguments)}var u="bus_segment_buffers_cache",f=yield(0,r.Ct)(0,`${u}_timestamp`);if(null===f){var p=yield e(),m=yield y(p),v=yield d(m);return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(v)),s||(s=!0,c=v),v}if((new Date).getTime()-parseInt(f)>2592e6){var h=yield e(),g=yield y(h),b=yield d(g);return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(b)),b}if(!s){var w=yield(0,r.Ct)(0,u);s=!0,c=JSON.parse(w)}return(0,o.Mf)(t,"getSegmentBuffers_0",0,!0),(0,o.Mf)(t,"getSegmentBuffers_1",0,!0),(0,o.ZL)(t,-1),c}),h.apply(this,arguments)}},2303:(t,e,n)=>{n.d(e,{$Q:()=>a,AS:()=>l,Ov:()=>s,aU:()=>u,eu:()=>y,s$:()=>p,w_:()=>f,zi:()=>c});var r=n(5579);function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){f=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(f)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if("string"==typeof t){var n=parseInt(t);if(-3===n)return{code:6,text:"末班駛離",time:n};if(-4===n)return{code:5,text:"今日停駛",time:n};if(-2===n)return{code:4,text:"交通管制",time:n};if(-1===n)return{code:3,text:"未發車",time:n};if(0<=n&&n<=10)return{code:2,text:"進站中",time:n};if(10<n&&n<=180)return{code:1,text:(0,r.fU)(n,e),time:n};if(180<n&&n<=250)return{code:.5,text:(0,r.fU)(n,e),time:n};if(250<n)return{code:0,text:(0,r.fU)(n,e),time:n}}return{code:7,text:"發生錯誤",time:-5}}function u(t,e){var n=t.length;if(0===e){var r=0,i=0;return 4===n&&(r=parseInt(t.substring(0,2)),i=parseInt(t.substring(2,4))),2===n&&(i=parseInt(t)),{type:"moment",hours:r,minutes:i}}if(1===e){var o=0,a=0;if(4===n){var u=parseInt(t.substring(0,2)),f=parseInt(t.substring(2,4));o=Math.min(u,f),a=Math.max(u,f)}if(2===n){var l=parseInt(t);o=l,a=l}return{type:"range",min:o,max:a}}}function f(t,e,n,r,o){var a,u={},f={},l=i(e);try{for(l.s();!(a=l.n()).done;){var s=a.value;f[s.BusID]=s}}catch(t){l.e(t)}finally{l.f()}var c,y=i(t);try{for(y.s();!(c=y.n()).done;){var p=c.value,d={};d.CarType=p.CarType,d.BusStatus=p.BusStatus,d.BusID=p.BusID,d.CarOnStop=p.CarOnStop;var m=parseInt(p.RouteID),v=String(p.BusID),h=!1,g=0;m===r||o.indexOf(m)>-1||m===10*r?(h=!0,g=v.charCodeAt(0)*Math.pow(10,-5)):(h=!1,g=v.charCodeAt(0)),d.onThisRoute=h,d.index=g;var b={};if(f.hasOwnProperty(v)){b=f[v],d.position={latitude:parseFloat(b.Latitude),longitude:parseFloat(b.Longitude)};var w={},S=!1;for(var I in n){var T=n[I];if(T.pid.indexOf(m)>-1){w=T,S=!0;break}}d.RouteName=S?w.n:"未知路線",d.RouteID=S?w.id:null;var _=`s_${p.StopID}`;u.hasOwnProperty(_)||(u[_]=[]),u[_].push(d)}}}catch(t){y.e(t)}finally{y.f()}return u}function l(t,e,n,r){var o,a={},u={},f=i(e);try{for(f.s();!(o=f.n()).done;){var l=o.value;u[l.BusID]=l}}catch(t){f.e(t)}finally{f.f()}var s,c=i(t);try{for(c.s();!(s=c.n()).done;){var y=s.value,p={},d=parseInt(y.StopID),m=parseInt(y.RouteID),v=String(y.BusID);if(!(r.indexOf(d)<0)){p.index=v.charCodeAt(0),p.onThisRoute=!0,p.CarType=y.CarType,p.BusStatus=y.BusStatus,p.BusID=y.BusID,p.CarOnStop=y.CarOnStop;var h={};if(u.hasOwnProperty(v)){h=u[v],p.position={latitude:parseFloat(h.Latitude),longitude:parseFloat(h.Longitude)};var g={},b=!1;for(var w in n){var S=n[w];if(S.pid.indexOf(m)>-1){g=S,b=!0;break}}p.RouteName=b?g.n:"未知路線",p.RouteID=b?g.id:null;var I=`s_${d}`;a.hasOwnProperty(I)||(a[I]=[]),a[I].push(p)}}}}catch(t){c.e(t)}finally{c.f()}return a}function s(t){var e="";switch(t){case"0":e="一般";break;case"1":e="低底盤";break;case"2":e="大復康巴士";break;case"3":e="狗狗友善專車";break;default:e="未知類型"}return e}function c(t){var e="";switch(t){case"0":e="離站";break;case"1":e="進站";break;default:e="未知狀態"}return e}function y(t){var e="";switch(t){case"0":e="正常";break;case"1":e="車禍";break;case"2":e="故障";break;case"3":e="塞車";break;case"4":e="緊急求援";break;case"5":e="加油";break;case"99":e="非營運狀態";break;default:e="未知狀態"}return e}function p(t){var e={},n=s(t.CarType);e.type=n;var r=c(t.CarOnStop),i=y(t.BusStatus);return e.carNumber=t.BusID,e.status={onStop:r,situation:i,text:`${r} | ${i}`},e.RouteName=t.RouteName,e.onThisRoute=t.onThisRoute,e.index=t.index,e.position=t.position,e}},4293:(t,e,n)=>{n.d(e,{a:()=>d});var r=n(4311),i=n(3153),o=n(6788);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)})}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return(p=l(function*(t){var e=new Worker(new URL(n.p+n.u(148),n.b));return yield new Promise(function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return m=l(function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l(function*(){var e,n=[],r=a([[0,10],[1,10]].map(function(t){return{url:(0,i.y)(t[0],t[1]),e:t}}));try{for(r.s();!(e=r.n()).done;){var u=e.value,f=yield(0,o.Fd)(u.url,t,`getRoute_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){r.e(t)}finally{r.f()}return n}),n.apply(this,arguments)}if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return yield e();var u="bus_route_cache",f=yield(0,r.Ct)(0,`${u}_timestamp`);if(null===f){var p=yield e(),d=yield y(p);return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(d)),s||(s=!0,c=d),d}if((new Date).getTime()-parseInt(f)>864e5){var m=yield e(),v=yield y(m);return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(v)),s||(s=!0,c=v),v}if(!s){var h=yield(0,r.Ct)(0,u);s=!0,c=JSON.parse(h)}return(0,o.Mf)(t,"getRoute_0",0,!0),(0,o.Mf)(t,"getRoute_1",0,!0),(0,o.ZL)(t,-1),c}),m.apply(this,arguments)}},6788:(t,e,n)=>{n.d(e,{Fd:()=>l,LQ:()=>d,Mf:()=>y,ZL:()=>h,Zt:()=>g,_M:()=>p,gC:()=>b});var r=n(4750),i=n(5579),o=n(8925);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,f,"next",t)}function f(t){u(o,r,i,a,f,"throw",t)}a(void 0)})}}function l(t,e,n,r){return s.apply(this,arguments)}function s(){return s=f(function*(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:15e3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:6e4,s=new Promise(function(t,e){return setTimeout(function(){return e(new Error("Connection timed out"))},a)}),c=yield Promise.race([fetch(t),s]).catch(function(t){throw y(e,n,0,!0),t});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);for(var p=parseInt(String(c.headers.get("content-length"))),d=0,m=c.body.getReader(),v=[],h=function(){return new Promise(function(){var t=f(function*(t,e){var n=setTimeout(function(){e(new Error("Loading timed out"))},u),r=yield m.read(),i=r.done,o=r.value;clearTimeout(n),t(i?{done:i}:{done:i,value:o})});return function(e,n){return t.apply(this,arguments)}}())};;){var g=yield h().catch(function(t){throw y(e,n,d/p,!0),t}),b=g.done,w=g.value;if(b)break;v.push(w),d+=w.length,y(e,n,d/p,!1)}for(var S=new Uint8Array(d),I=0,T=0,_=v;T<_.length;T++){var L=_[T];S.set(L,I),I+=L.length}var A=new Date;yield(0,o.N$)(p,A);var O=new Blob([S],{type:"application/gzip"}),x=yield O.arrayBuffer(),$=yield(0,r.h)(x);switch(i){case"json":return/^<!doctype html>/.test($)?yield l(t.replace("https://tcgbusfs.blob.core.windows.net/","https://erichsia7.github.io/bus-alternative-static-apis/"),e,n,i,a,u):JSON.parse($);case"xml":return $}}),s.apply(this,arguments)}var c={};function y(t,e,n,r){c.hasOwnProperty(t)||(c[t]={});var i=`t_${e}`;c[t].hasOwnProperty(i)?(r?c[t][i].expel=!0:(c[t][i].expel=!1,c[t][i].progress=n),m(t,"run")):(c[t][i]={expel:!1,progress:n,total:1},m(t,"start"))}function p(t){if(c.hasOwnProperty(t)&&"object"===a(c[t])){var e=0,n=0;for(var r in c[t])c[t][r].expel||(e+=c[t][r].total,n+=c[t][r].progress);var i=Math.min(Math.max(n/e,0),1);return i===1/0||isNaN(i)?1:i}return 1}function d(t){c.hasOwnProperty(t)&&(delete c[t],m(t,"end"))}function m(t,e){var n={target:t,stage:e,progress:p(t)},r=new CustomEvent(t,{detail:n});document.dispatchEvent(r)}var v={};function h(t,e){v.hasOwnProperty(t)||(v[t]=0);var n=0;"string"==typeof e&&(n=(0,i.Zn)(e)),n>v[t]&&(v[t]=n)}function g(t){return v.hasOwnProperty(t)?1*v[t]:0}function b(t){v.hasOwnProperty(t)&&delete v[t]}},8201:(t,e,n)=>{n.d(e,{Y:()=>y});var r=n(4311),i=n(3153),o=n(6788);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)})}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return p=l(function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l(function*(){var e,n=[],r=a([[0,12],[1,12]].map(function(t){return{url:(0,i.y)(t[0],t[1]),e:t}}));try{for(r.s();!(e=r.n()).done;){var u=e.value,f=yield(0,o.Fd)(u.url,t,`getSemiTimeTable_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){r.e(t)}finally{r.f()}return n}),n.apply(this,arguments)}var u="bus_semi_timetable_cache",f=yield(0,r.Ct)(0,`${u}_timestamp`);if(null===f){var y=yield e();return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(y)),s||(s=!0,c=y),y}if((new Date).getTime()-parseInt(f)>12096e5){var p=yield e();return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(p)),p}if(!s){var d=yield(0,r.Ct)(0,u);s=!0,c=JSON.parse(d)}return(0,o.Mf)(t,"getSemiTimeTable_0",0,!0),(0,o.Mf)(t,"getSemiTimeTable_1",0,!0),(0,o.ZL)(t,-1),c}),p.apply(this,arguments)}},8671:(t,e,n)=>{n.d(e,{s:()=>y});var r=n(4311),i=n(3153),o=n(6788);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)})}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return p=l(function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l(function*(){var e,n=[],r=a([[0,14],[1,14]].map(function(t){return{url:(0,i.y)(t[0],t[1]),e:t}}));try{for(r.s();!(e=r.n()).done;){var u=e.value,f=yield(0,o.Fd)(u.url,t,`getTimeTable_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){r.e(t)}finally{r.f()}return n}),n.apply(this,arguments)}var u="bus_timetable_cache",f=yield(0,r.Ct)(0,`${u}_timestamp`);if(null===f){var y=yield e();return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(y)),s||(s=!0,c=y),y}if((new Date).getTime()-parseInt(f)>12096e5){var p=yield e();return yield(0,r.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,r.mL)(0,u,JSON.stringify(p)),p}if(!s){var d=yield(0,r.Ct)(0,u);s=!0,c=JSON.parse(d)}return(0,o.Mf)(t,"getTimeTable_0",0,!0),(0,o.Mf)(t,"getTimeTable_1",0,!0),(0,o.ZL)(t,-1),c}),p.apply(this,arguments)}}}]);
//# sourceMappingURL=2b528a7afb2a265bc882.js.map