"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[605],{49(){},752(e,t,a){a.d(t,{a:()=>h,b:()=>p,c:()=>v,d:()=>f});var n=a(3422),i=a(8179),r=a(4537),c=a(904),d=a(9119),o=(0,i.c)(".gc"),u=(0,i.e)(o,".hc"),l=(0,i.e)(u,".ic");function s(e,t,a,c,o){var u=(0,i.a)();u.classList.add("jc");var l=(0,i.a)();l.classList.add("kc");var s=document.createElement("span");s.appendChild((0,r.b)(e.icon)),l.appendChild(s);var f=(0,i.a)();f.classList.add("lc"),f.innerText=e.name;var p=e.index;return u.onclick=function(){!function(e,t,a,i,r){(0,d.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),h(),(0,n.m)(t,a,i,r).then(function(t){switch(t){case 0:(0,d.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,d.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,d.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,a,c,o,p)},u.appendChild(l),u.appendChild(f),u}function f(){o.setAttribute("displayed","true")}function p(){o.setAttribute("displayed","false")}function v(e,t,a,i){(0,c.c)("ScheduleNotification"),f(),function(e,t,a,i){l.innerHTML="";var r=new DocumentFragment;for(var c of n.n){var d=s(c,e,t,a,i);r.appendChild(d)}l.append(r)}(e,t,a,i),(0,c.b)()}function h(){p(),(0,c.i)(),(0,c.e)("ScheduleNotification")}},870(){},1010(){},1269(){},1275(){},1512(){},1802(){},1806(){},2024(){},2935(){},3041(e,t,a){a.d(t,{a:()=>w,b:()=>A,c:()=>k,d:()=>y});var n=a(9566),i=a(8179),r=a(8024),c=a(6052),d=a(4537),o=a(904),u=a(9119),l=(0,i.c)(".mc"),s=(0,i.e)(l,".nc"),f=(0,i.e)(s,".oc"),p=(0,i.e)(l,".pc"),v=(0,i.e)(p,".qc"),h="已儲存至資料夾",b="無法儲存";function g(e,t,a,c){var o=(0,i.a)();o.classList.add("rc");var l=(0,i.a)();l.classList.add("sc");var s=document.createElement("span");s.appendChild((0,d.b)(e.icon)),l.appendChild(s);var f=(0,i.a)();switch(f.classList.add("tc"),f.innerText=e.name,o.appendChild(l),o.appendChild(f),t){case"stop":o.onclick=function(){(0,n.n)(e.id,a[0],a[1]).then(function(e){e?(0,n.e)("stop",a[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,u.a)("folder",h),w())}):(0,u.a)("warning",b)})};break;case"route":o.onclick=function(){(0,n.m)(e.id,a[0]).then(function(e){e?(0,n.e)("route",a[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,u.a)("folder",h),w())}):(0,u.a)("warning",b)})};break;case"location":o.onclick=function(){(0,n.l)(e.id,a[0]).then(function(e){e?(0,n.e)("location",a[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,u.a)("folder",h),w())}):(0,u.a)("warning",b)})}}return o}function m(e,t,a){v.onclick=function(){(0,c.c)(function(){m(e,t,a)})};var i=(0,n.j)();f.innerHTML="";var r=new DocumentFragment;for(var d of i){var o=g(d,e,t,a);r.appendChild(o)}f.append(r)}function y(){l.setAttribute("displayed","true")}function A(){l.setAttribute("displayed","false")}function k(e,t,a){(0,o.c)("SaveToFolder"),y(),m(e,t,a),(0,o.b)()}function w(){A(),(0,o.i)(),(0,o.e)("SaveToFolder")}},3273(){},3876(){},5142(){},5275(){},5286(e,t,a){a.d(t,{a:()=>q,b:()=>z,c:()=>O,d:()=>K,e:()=>Z,f:()=>W,g:()=>X,h:()=>V});var n=a(467),i=a(9566),r=a(8621),c=a(3459),d=a(8179),o=a(8024),u=a(904),l=a(3041),s=a(8134),f=a(9469),p=a(251),v=a(8279);function h(){return(h=(0,n.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,p.b)(t.n,a)}})).apply(this,arguments)}function b(){return(b=(0,n.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,v.c)(a)}})).apply(this,arguments)}var g=a(7968),m=a(6141),y='"Noto Sans TC", sans-serif',A=(0,u.d)("route-details-canvas"),k=A.width,w=A.height,C=Math.min(window.devicePixelRatio,1.875)||1,x={};function D(){var e=(0,d.a)();return e.classList.add("uc"),e}function _(){var e=(0,d.a)();e.classList.add("vc");var t=document.createElement("canvas");return t.classList.add("wc"),e.appendChild(t),e}function T(e,t,a,n,i,r){e.innerText=t.name,e.setAttribute("day",r.toString()),e.onclick=function(){!function(e){for(var t=(0,c.b)("playing_animation"),a=(0,d.d)(q,".uc"),n=(0,d.d)(z,".vc"),i=0;i<7;i++){var r,o,u=a[i],l=n[i],s=`d_${i}`,f=null===(r=x)||void 0===r?void 0:r.calendarEventGroups[s],p=null===(o=x)||void 0===o?void 0:o.calendarDays[s];if(f&&p){var v=(0,m.a)("--c"),h=(0,m.a)("--d"),b=(0,m.a)("--e"),g=(0,m.a)("--xc"),y=(0,m.a)("--b"),A=(0,m.a)("--ea");T(u,p,e,!1,t,i),L(l,f,e,y,v,h,b,g,A,i)}}}(r)},e.setAttribute("highlighted",a===r?"true":"false"),e.setAttribute("animation",(0,o.a)(i)),e.setAttribute("skeleton-screen",(0,o.a)(n))}function L(e,t,a,n,i,r,c,l,s,f){function p(e,t,a){var n=70*t;e.fillStyle=a,e.fillRect(45,n+5,k-45,1.2),e.font=`400 12px ${y}`,e.textBaseline="top";var i=`${String(t).padStart(2,"0")}:00`,r=e.measureText(i),c=r.width,d=r.actualBoundingBoxDescent;e.fillText(i,(45-c)/2,n+(10-d)/2,c)}function v(e,t,a,n,i,r,c){var d=new Date;d.setDate(1),d.setMonth(0),d.setFullYear(t.date.getFullYear()),d.setMonth(t.date.getMonth()),d.setDate(t.date.getDate()),d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);var o=(t.date.getTime()-d.getTime())/864e5*24*70,u=k-45,l=60*t.duration*1e3/864e5*24*70;(0,g.a)(e,45,o,u,l,3,`rgba(${n}, ${i}, ${r}, ${c})`),(0,g.a)(e,45,o,3,l,{tl:3,tr:0,bl:3,br:0},a),e.font=`400 14px ${y}`,e.textBaseline="top",e.fillStyle=a;var s=t.dateString,f=e.measureText(s),p=f.width,v=f.actualBoundingBoxDescent;e.fillText(s,53,o+(l-v)/2,p)}var h=(0,d.e)(e,".wc"),b=h.getContext("2d");if(function(e,t,a){var n=t===a;e.setAttribute("displayed",(0,o.a)(n))}(e,a,f),function(e){A=(0,u.d)("route-details-canvas"),k=A.width,w=A.height,C=Math.min(window.devicePixelRatio,1.875)||1,e.width=k*C,e.height=w*C;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(C,C)}(h),a===f){b.clearRect(0,0,k,w);for(var m=0;m<24;m++)p(b,m,s);for(var x of t)v(b,x,n,i,r,c,l)}else b.clearRect(0,0,k,w)}function S(e,t,a){var n=(new Date).getDay(),i=(0,m.a)("--c"),r=(0,m.a)("--d"),c=(0,m.a)("--e"),o=(0,m.a)("--xc"),u=(0,m.a)("--b"),l=(0,m.a)("--ea"),s=e.calendarDays,f=e.calendarDayQuantity,p=e.calendarEventGroups,v=(e.calendarEventQuantity,Array.from((0,d.d)(z,".vc"))),h=Array.from((0,d.d)(q,".uc")),b=v.length;if(f!==b){var g=b-f;if(g<0){for(var y=new DocumentFragment,A=new DocumentFragment,k=0;k>g;k--){var w=D();y.appendChild(w),h.push(w);var C=_();A.appendChild(C),v.push(C)}q.append(y),z.append(A)}else if(g>0)for(var S=b-1,M=b-g-1;S>M;S--)h[S].remove(),h.splice(S,1),v[S].remove(),v.splice(S,1)}for(var $=0;$<f;$++){var F=`d_${$}`,R=s[F],E=p[F],B=h[$],N=v[$];T(B,R,n,t,a,$),L(N,E,n,u,i,r,c,o,l,$)}x=e}var M=a(4537),$=[],F=!1,R=!1;function E(){var e=(0,d.a)();e.classList.add("yc");var t=(0,d.a)();t.classList.add("zc"),t.appendChild((0,M.a)()),e.appendChild(t);var a=(0,d.a)();return a.classList.add("_c"),e.appendChild(a),e}function B(e,t,a){function n(e,n,i){function r(e,t){var a=(0,d.e)(e,".zc");(0,M.c)(a,t.icon)}function c(e,t){(0,d.e)(e,"._c").innerText=t.value}function u(e,t){e.setAttribute("animation",(0,o.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==i?(r(e,n),c(e,n),u(e,a),l(e,t)):((0,o.b)(i,n)||r(e,n),(0,o.b)(i,n)||c(e,n),F!==a&&u(e,a),R!==t&&l(e,t))}var i=e.length;t!==R&&K.setAttribute("skeleton-screen",(0,o.a)(t));var r=Array.from((0,d.d)(O,".yc")),c=r.length;if(i!==c){var u=c-i;if(u<0){for(var l=new DocumentFragment,s=0;s>u;s--){var f=E();l.appendChild(f),r.push(f)}O.append(l)}else if(u>0)for(var p=c-1,v=c-u-1;p>v;p--)r[p].remove(),r.splice(p,1)}for(var h=0;h<i;h++){var b=r[h],g=e[h];0===$.length?n(b,g,null):n(b,g,$[h])}$=e,F=a,R=t}var N=(0,d.c)(".ad"),H=(0,d.e)(N,".bd"),Q=(0,d.e)(H,".cd"),j=(0,d.e)(Q,'.dd[group="calendar"]'),G=(0,d.e)(j,".ed"),q=(0,d.e)(G,".fd"),z=(0,d.e)(G,".gd"),P=(0,d.e)(N,'.bd .cd .dd[group="actions"]'),Y=(0,d.e)(P,'.ed .hd[action="save-to-folder"]'),I=(0,d.e)(P,'.ed .hd[action="get-permalink"]'),J=(0,d.e)(P,'.ed .hd[action="show-permalink-qrcode"]'),K=(0,d.e)(Q,'.dd[group="properties"]'),O=(0,d.e)(K,".ed");function U(){return U=(0,n.a)(function*(e,t){var a=(0,c.b)("playing_animation"),n=yield(0,i.e)("route",e);Y.setAttribute("animation",(0,o.a)(a)),Y.setAttribute("highlighted",(0,o.a)(n)),Y.onclick=function(){(0,l.c)("route",[e],Y)},I.setAttribute("animation",(0,o.a)(a)),I.onclick=function(){!function(e){h.apply(this,arguments)}(e)},J.setAttribute("animation",(0,o.a)(a)),J.onclick=function(){!function(e){b.apply(this,arguments)}(e)},function(){for(var e=(0,c.b)("playing_animation"),t=[],a=0;a<5;a++)t.push({key:a,icon:"none",value:""});B(t,!0,e)}(),function(){for(var e=(0,c.b)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},a={},n={},i=0;i<7;i++){var r=`d_${i}`;a[r]=[],n[r]={day:i,code:"d_{i}",name:""};for(var d=0;d<t[r];d++){var o=new Date;o.setHours(0),o.setMinutes(30*d),o.setSeconds(0),o.setMilliseconds(0),a[r].push({date:o,dateString:"",duration:15})}}S({calendarEventGroups:a,calendarDays:n,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var d=(0,o.c)(),u=yield(0,r.a)(e,t,d);B(u.properties,!1,a),S(u.calendar,!1,a)}),U.apply(this,arguments)}function V(){N.setAttribute("displayed","true")}function W(){N.setAttribute("displayed","false")}function X(e,t){(0,u.c)("RouteDetails"),V(),function(e,t){U.apply(this,arguments)}(e,t),(0,u.b)()}function Z(){W(),(0,u.i)(),(0,u.e)("RouteDetails");var e=(0,d.d)(z,".vc");for(var t of e)t.remove();var a=(0,d.d)(q,".uc");for(var n of a)n.remove()}},5493(){},5612(){},6444(){},6547(){},6852(){},6878(){},7025(){},7748(){},7768(){},7823(){},7908(e,t,a){a.d(t,{a:()=>D,b:()=>_,c:()=>x});var n=a(467),i=a(3937),r=a(3422),c=a(8179),d=a(8024),o=a(904),u=a(9119),l=a(6104),s=(0,c.c)(".id"),f=(0,c.e)(s,".jd"),p=(0,c.e)(f,".kd"),v=(0,c.e)(p,'.ld[group="provider"]'),h=(0,c.e)(v,".md"),b=(0,c.e)(h,"input"),g=(0,c.e)(p,'.ld[group="registration-key"]'),m=(0,c.e)(g,".md"),y=(0,c.e)(m,"input"),A=(0,c.e)(s,".nd"),k=(0,c.e)(A,".od"),w=(0,c.e)(A,".pd");function C(){k.onclick=function(){D(),(0,o.i)(),(0,o.e)("RegisterNotification"),(0,l.d)()},w.onclick=function(){!function(){T.apply(this,arguments)}()},b.value=(0,r.f)(),y.value=""}function x(){s.setAttribute("displayed","true")}function D(){s.setAttribute("displayed","false")}function _(){(0,o.c)("RegisterNotification"),x(),C(),(0,o.b)()}function T(){return(T=(0,n.a)(function*(){(0,u.a)("manufacturing","處理中");var e=b.value,t=y.value;if((0,d.h)(e))return(0,r.p)(e),(yield(0,i.a)(t))?void(0,u.a)("check_circle","註冊成功"):void(0,u.a)("error","註冊失敗");(0,u.a)("error","無效的提供者")})).apply(this,arguments)}},8001(){},8361(){},9128(){},9418(){},9607(){}}]);
//# sourceMappingURL=d37959b94fea39226b22.js.map