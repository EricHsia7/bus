"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[246],{4294(e,t,n){n.d(t,{a:()=>M,b:()=>T,c:()=>A});var a,i=n(467),r=n(9218),s=n(6788),c=n(972),o=n(3459),u=n(8179),d=n(8024),l=n(4781),f=n(4537),p=n(904),m=(0,u.c)(".nr"),v=(0,u.e)(m,".or"),h=(0,u.e)(v,"#search_material_symbols_input"),b=(0,u.e)(m,".rr"),y=(0,u.e)(b,".sr"),g=[],k=[],L=!1,w=!1;function _(){var e=(0,u.a)();return e.classList.add("tr"),e.appendChild((0,f.a)()),e}function C(e,t,n,i){function r(e,r,s){function c(e,t){(0,f.c)(e,t)}function o(e,t,n){e.onclick=function(){!function(e,t){t.value=e,M()}(t,n)}}function u(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}function l(e,t){e.setAttribute("animation",(0,d.a)(t))}null==s?(c(e,r),o(e,r,t),u(e,n),l(e,i)):(s!==r?(c(e,r),o(e,r,t)):a!==t&&o(e,r,t),w!==n&&u(e,n),L!==i&&l(e,i))}var s=e.length,c=Array.from((0,u.d)(y,".tr")),o=c.length;if(s!==o){var l=o-s;if(l<0){for(var p=new DocumentFragment,m=0;m>l;m--){var v=_();p.appendChild(v),c.push(v)}y.append(p)}else if(l>0)for(var h=o-1,b=o-l-1;h>b;h--)c[h].remove(),c.splice(h,1)}for(var g=0;g<s;g++){var C=k[g],x=e[g],T=c[g];r(T,x,C||null)}k=e.slice(),a=t,w=n,L=i}function x(){return(x=(0,i.a)(function*(e){!function(e){for(var t=(0,o.b)("playing_animation"),n=(0,p.e)("window"),a=Math.floor(n.width/50)*(Math.floor(n.height/50)+3),i=[],r=0;r<a;r++)i.push("");C(i,e,!0,t)}(e);var t=(0,o.b)("playing_animation"),n=(0,d.c)(),a=yield(0,r.a)(n);for(var i in g=[],a.symbols)g.push(i);C(g,e,!1,t),(0,c.a)(a),(0,s.a)(n)})).apply(this,arguments)}function T(){h.addEventListener("paste",function(){E()}),h.addEventListener("cut",function(){E()}),h.addEventListener("selectionchange",function(){E()}),document.addEventListener("selectionchange",function(){E()}),h.addEventListener("keyup",function(){E()})}function E(){var e=h.value;if(!(0,l.a)(e)){for(var t=(0,c.b)(e),n=t.length-1;n>=0;n--){var i=t[n].item,r=g.indexOf(i);if(g[n]&&!(r<0)){var s=[g[r],g[n]];g[n]=s[0],g[r]=s[1]}}C(g,a,!1,L)}}function A(e){(0,p.d)("IconSelector"),m.setAttribute("displayed","true"),h.value="",function(e){x.apply(this,arguments)}(e)}function M(){(0,p.f)("IconSelector"),m.setAttribute("displayed","false")}},4537(e,t,n){n.d(t,{a:()=>r,b:()=>i,c:()=>s});var a=n(8179);function i(e){var t=document.createElement("span");return t.classList.add("ab"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("ab"),e}function s(e,t){(0,a.e)(e,"span.ab").innerText=t}},4953(){},5297(){},6082(e,t,n){n.d(t,{a:()=>l,b:()=>b});var a=n(467),i=n(9734),r=n(8011),s=n(9218),c=n(4293),o=n(6788),u=n(8179),d="downloadData",l=!1,f=(0,u.c)(".qd"),p=(0,u.e)(f,".rd"),m=(0,u.e)(p,".yr"),v=(0,u.e)(m,'svg#download-svg path[progress="progress"]');function h(e){var t=e,n=189*(1-(0,o.d)(d));v.style.setProperty("--zr",`${n}px`),"end"===t.detail.stage&&(document.removeEventListener(t.detail.target,h),v.addEventListener("transitionend",function(){m.setAttribute("complete","true")},{once:!0}),v.style.setProperty("--zr","0px"),l=!0)}function b(){return y.apply(this,arguments)}function y(){return(y=(0,a.a)(function*(){(0,o.f)(d,"getLocation_0",0,!1),(0,o.f)(d,"getLocation_1",0,!1),(0,o.f)(d,"getCarInfo_0",0,!1),(0,o.f)(d,"getCarInfo_1",0,!1),(0,o.f)(d,"getMaterialSymbolsSearchIndex",0,!1),document.addEventListener(d,h),yield(0,c.a)(d,!0),yield(0,r.a)(d,1),yield(0,i.a)(d,!0),yield(0,s.a)(d),(0,o.a)(d),(0,o.b)(d)})).apply(this,arguments)}},6091(e,t,n){n.d(t,{a:()=>P,b:()=>D});var a=n(467),i=n(5767),r=n(5314),s=n(3459),c=n(8179),o=n(8024),u=n(4884),d=n(4537),l=n(904),f=n(3030),p=n(4690),m=(0,c.c)(".qd"),v=(0,c.e)(m,".sd"),h=(0,c.e)(v,"._r"),b=(0,c.e)(h,".as"),y={},g=!1,k=!1,L=15e3,w=5e3,_=!0,C=!1,x=0,T=0,E="",A=!1;function M(){var e=(0,c.a)();e.classList.add("bs");var t=(0,c.a)();t.classList.add("cs");var n=(0,c.a)();n.classList.add("ds"),n.appendChild((0,d.a)());var a=(0,c.a)();a.classList.add("es");var i=(0,c.a)();i.classList.add("fs"),t.appendChild(n),t.appendChild(a),t.appendChild(i);var r=(0,c.a)();return r.classList.add("gs"),e.appendChild(t),e.appendChild(r),e}function I(e,t,n){function a(e,a,i){function r(e,t){var n=(0,c.e)(e,".cs"),a=(0,c.e)(n,".ds"),i="";switch(t.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,d.c)(a,i)}function s(e,t){var n=(0,c.e)(e,".cs"),a=(0,c.e)(n,".es"),i="";switch(t.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}a.innerText=i}function l(e,t){var n=(0,c.e)(e,".cs");(0,c.e)(n,".fs").innerText=t.time.relative}function m(e,t){(0,c.e)(e,".gs").innerText=t.name}function v(e,t){switch(t.type){case"route":e.onclick=function(){(0,p.c)(t.id,t.pid)};break;case"location":e.onclick=function(){(0,f.c)(t.hash)};break;case"bus":e.onclick=function(){(0,u.c)(t.id)};break;case"empty":e.onclick=null}}function h(e,t){e.setAttribute("animation",(0,o.a)(t))}function b(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}if(null==i)r(e,a),s(e,a),l(e,a),m(e,a),v(e,a),h(e,n),b(e,t);else if(a.type!==i.type)r(e,a),s(e,a),l(e,a),m(e,a),v(e,a),h(e,n),b(e,t);else{switch(a.type){case"location":(0,o.b)(i.name,a.name)||m(e,a),i.time!==a.time&&l(e,a),(0,o.b)(i.hash,a.hash)||v(e,a);break;case"route":i.name!==a.name&&m(e,a),i.time!==a.time&&l(e,a),i.id===a.id&&(0,o.b)(i.pid,a.pid)||v(e,a);break;case"bus":i.name!==a.name&&m(e,a),i.time!==a.time&&l(e,a),i.id!==a.id&&v(e,a);break;case"empty":i.time!==a.time&&l(e,a)}g!==n&&h(e,n),k!==t&&b(e,t)}}var i=e.itemQuantity,r=Array.from((0,c.d)(b,".bs")),s=r.length;if(i!==s){var l=s-i;if(l<0){for(var m=new DocumentFragment,v=0;v>l;v--){var h=M();m.appendChild(h),r.push(h)}b.append(m)}else if(l>0)for(var L=s-1,w=s-l-1;L>w;L--)r[L].remove(),r.splice(L,1)}for(var _=0;_<i;_++){var C=r[_],x=e.items[_];if((0,o.e)(y,"items"))if(y.items[_])a(C,x,y.items[_]);else a(C,x,null);else a(C,x,null)}y=e,g=n,k=t}function D(){for(var e=(0,s.b)("playing_animation"),t=(0,l.e)("window"),n=Math.floor(t.height/70/3)+2,a=[],i=0;i<n;i++)a.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});I({items:a,itemQuantity:a.length,dataUpdateTime:0},!0,e)}function S(){return q.apply(this,arguments)}function q(){return(q=(0,a.a)(function*(){var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval");_=t.dynamic,L=t.baseInterval,E=(0,o.c)();var n=yield(0,r.c)(E);I(n,!1,e);var a=0;_&&(a=yield(0,i.c)()),x=(new Date).getTime(),T=_?Math.max(x+w,n.dataUpdateTime+L/a):x+L,Math.max(w,T-x)})).apply(this,arguments)}function z(){return F.apply(this,arguments)}function F(){return(F=(0,a.a)(function*(){S().then(function(){C?setTimeout(function(){z()},Math.max(w,T-(new Date).getTime())):A=!1}).catch(function(e){C?setTimeout(function(){z()},1e4):A=!1})})).apply(this,arguments)}function P(){D(),C||(C=!0,A?S():(A=!0,z()))}},7114(){},7499(){},9657(){}}]);
//# sourceMappingURL=0a522fb2a1049e875da6.js.map