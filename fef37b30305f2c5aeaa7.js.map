{"version":3,"file":"fef37b30305f2c5aeaa7.js","mappings":"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","sources":["webpack://bus/./src/interface/index.ts","webpack://bus/./src/interface/location/details/index.ts","webpack://bus/./src/interface/location/index.ts"],"sourcesContent":["import { isRunningStandalone } from '../tools/index';\nimport { documentQuerySelector } from '../tools/elements';\nimport { closeBus, openBus } from './bus/index';\nimport { closeFolderCreator, openFolderCreator } from './folder-creator/index';\nimport { closeFolderEditor, openFolderEditor } from './folder-editor/index';\nimport { closeFolderManager, openFolderManager } from './folder-manager/index';\nimport { closePersonalScheduleEditor, openPersonalScheduleEditor } from './personal-schedule-editor/index';\nimport { closePersonalScheduleManager, openPersonalScheduleManager } from './personal-schedule-manager/index';\nimport { closeRegisterNotification, openRegisterNotification } from './register-notification/index';\nimport { closeSearch, openSearch } from './search/index';\nimport { closeSettings, openSettings } from './settings/index';\n\nconst SplashScreenElement = documentQuerySelector('.css_splash_screen');\nconst ErrorMessageElement = documentQuerySelector('.css_error_message');\n\nconst splashScreenTimer_minimalTimeOut = 100;\nconst splashScreenTimer_openTime = new Date().getTime();\n\ntype Page = 'Home' | 'FolderCreator' | 'FolderEditor' | 'FolderIconSelector' | 'FolderManager' | 'LocationDetails' | 'Location' | 'RouteDetails' | 'Route' | 'SaveToFolder' | 'Search' | 'Settings' | 'SettingsOptions' | 'DataUsage' | 'PersonalScheduleManager' | 'PersonalScheduleCreator' | 'PersonalScheduleEditor' | 'Bus' | 'RegisterNotification' | 'ScheduleNotification' | 'NotificationScheduleManager' | 'QRCode';\n\nlet pageHistory: Array<Page> = ['Home'];\n\nexport function pushPageHistory(page: Page): void {\n  const pageHistoryLength = pageHistory.length;\n  const lastPage = pageHistory[pageHistoryLength - 1];\n  if (lastPage !== page) {\n    pageHistory.push(page);\n  }\n}\n\nexport function revokePageHistory(page: Page): void {\n  if (pageHistory.indexOf(page) > -1) {\n    const pageHistoryLength = pageHistory.length;\n    if (pageHistory[pageHistoryLength - 1] === page) {\n      pageHistory.pop();\n    }\n  }\n}\n\nexport function closePreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        closeFolderCreator();\n        break;\n      case 'FolderEditor':\n        closeFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        closeFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        closeSearch();\n        break;\n      case 'Settings':\n        closeSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        closePersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        closePersonalScheduleEditor();\n        break;\n      case 'Bus':\n        closeBus();\n        break;\n      case 'RegisterNotification':\n        closeRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function openPreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    pageHistory.pop();\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        openFolderCreator();\n        break;\n      case 'FolderEditor':\n        openFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        openFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        openSearch();\n        break;\n      case 'Settings':\n        openSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        openPersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        openPersonalScheduleEditor();\n        break;\n      case 'Bus':\n        openBus();\n        break;\n      case 'RegisterNotification':\n        openRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function setSplashScreenIconOffsetY(): void {\n  let offset = 0;\n  if (isRunningStandalone()) {\n    offset = (-1 * (window.outerHeight - window.innerHeight)) / 2;\n  }\n  documentQuerySelector('.css_splash_screen svg.css_splash_screen_icon').style.setProperty('--b-cssvar-splash-screen-icon-offset-y', `${offset}px`);\n}\n\nexport function fadeOutSplashScreen(callback: Function): void {\n  function fadeOut() {\n    SplashScreenElement.classList.add('css_splash_screen_fade_out');\n    SplashScreenElement.addEventListener(\n      'animationend',\n      function () {\n        SplashScreenElement.setAttribute('displayed', 'false');\n        SplashScreenElement.classList.remove('css_splash_screen_fade_out');\n        if (typeof callback === 'function') {\n          callback();\n        }\n      },\n      { once: true }\n    );\n  }\n  const cureentTime = new Date().getTime();\n  if (cureentTime - splashScreenTimer_openTime < splashScreenTimer_minimalTimeOut) {\n    setTimeout(fadeOut, Math.max(1, cureentTime - splashScreenTimer_openTime));\n  } else {\n    fadeOut();\n  }\n}\n\nexport function showErrorMessage(): void {\n  ErrorMessageElement.setAttribute('displayed', 'true');\n}\n\nexport interface GeneratedElement {\n  element: HTMLElement;\n  id: string;\n}\n\nexport type GroupStyles = {\n  [key: string]: {\n    width: number;\n    offset: number;\n  };\n};\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\ntype SizeType = 'window' | 'head' | 'head-one-button' | 'head-two-button' | 'route-details-canvas' | 'route-bus-arrival-time-chart' | 'location-bus-arrival-time-chart';\n\nexport function querySize(type: SizeType): Size {\n  let width: number = 0;\n  let height: number = 0;\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n  switch (type) {\n    case 'window':\n      width = windowWidth;\n      height = windowHeight;\n      break;\n    case 'head':\n      width = windowWidth;\n      height = 55;\n      break;\n    case 'head-one-button':\n      width = windowWidth - 55;\n      height = 55;\n      break;\n    case 'head-two-button':\n      width = windowWidth - 55 * 2;\n      height = 55;\n      break;\n    case 'route-details-canvas':\n      width = windowWidth - 10 * 2 - 10 * 2;\n      height = 24 * 70;\n      break;\n    case 'route-bus-arrival-time-chart':\n      width = windowWidth - 45 - 15 - 20;\n      height = 75;\n      break;\n    case 'location-bus-arrival-time-chart':\n      width = windowWidth - 30 - 20;\n      height = 75;\n      break;\n    default:\n      width = 0;\n      height = 0;\n      break;\n  }\n  return {\n    width,\n    height\n  };\n}\n\nexport function scrollDocumentToTop(): void {\n  window.scrollTo({\n    top: 0,\n    behavior: 'instant'\n  });\n}\n","import { getLocation, MergedLocation, MergedLocationItem } from '../../../data/apis/getLocation/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../../../data/apis/loader';\nimport { IntegratedLocationDetails, IntegratedLocationDetailsAction, integrateLocationDetails } from '../../../data/location/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll, removeFirstChild } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../../tools/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { getIconElement } from '../../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../../index';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nlet previousIntegration = {} as IntegratedLocationDetails;\nlet previousAnimation: boolean = true;\nlet previousSkeletonScreen: boolean = false;\n\nconst LocationDetailsField = documentQuerySelector('.css_location_details_field');\nconst LocationDetailsBodyElement = elementQuerySelector(LocationDetailsField, '.css_location_details_body');\nconst LocationDetailsActionsElement = elementQuerySelector(LocationDetailsBodyElement, '.css_location_details_actions');\n\nfunction generateElementOfItem(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_location_details_action');\n\n  // Icon\n  const icon = document.createElement('div');\n  icon.classList.add('css_location_details_action_icon');\n  element.appendChild(icon);\n\n  // Name\n  const name = document.createElement('div');\n  name.classList.add('css_location_details_action_name');\n  element.appendChild(name);\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction updateLocationDetailsField(integration: IntegratedLocationDetails, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction, previousItem: IntegratedLocationDetailsAction | null): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_location_details_action_icon');\n      removeFirstChild(thisIconElement);\n      thisIconElement.appendChild(getIconElement(thisItem.icon));\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const nameElement = elementQuerySelector(thisElement, '.css_location_details_action_name');\n      nameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      thisElement.onclick = thisItem.action;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null) {\n      updateIcon(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (previousItem.key !== thisItem.key) {\n        updateIcon(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n      }\n\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const actions = integration.actions;\n  const actionsQuantity = integration.actionsQuantity;\n\n  const currentActionsSeatQuantity = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action').length;\n  if (actionsQuantity !== currentActionsSeatQuantity) {\n    const capacity = currentActionsSeatQuantity - actionsQuantity;\n    if (capacity < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement.element);\n      }\n      LocationDetailsActionsElement.append(fragment);\n    } else {\n      const LocationActionElements = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action');\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const itemIndex = currentActionsSeatQuantity - 1 - o;\n        LocationActionElements[itemIndex].remove();\n      }\n    }\n  }\n\n  const LocationActionElements = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action');\n\n  for (let i = 0; i < actionsQuantity; i++) {\n    const thisElement = LocationActionElements[i];\n    const thisItem = actions[i];\n    if (previousIntegration.hasOwnProperty('actions')) {\n      if (previousIntegration.actions[i]) {\n        const previousItem = previousIntegration.actions[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpLocationDetailsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const actions: IntegratedLocationDetailsAction[] = [];\n  /*\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  */\n  const defaultActionsQuantity = 3;\n  for (let i = 0; i < defaultActionsQuantity; i++) {\n    actions.push({\n      name: '',\n      icon: '',\n      key: `action-${i}`,\n      action: function () {}\n    });\n  }\n\n  updateLocationDetailsField(\n    {\n      actions: actions,\n      actionsQuantity: defaultActionsQuantity,\n      hash: ''\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function initializeLocationDetailsField(hash: string) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  const integration = await integrateLocationDetails(hash, requestID);\n  updateLocationDetailsField(integration, false, playing_animation);\n}\n\nexport function openLocationDetails(hash: string): void {\n  pushPageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'true');\n  setUpLocationDetailsFieldSkeletonScreen();\n  initializeLocationDetailsField(hash);\n}\n\nexport function closeLocationDetails(): void {\n  revokePageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'false');\n}\n\nexport async function shareLocationPermalink(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    const thisLocation = Location[thisLocationKey] as MergedLocationItem;\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisLocation.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('已分享地點', 'check_circle');\n        })\n        .catch((e) => {\n          promptMessage('已取消分享', 'cancel');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showLocationPermalinkQRCode(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    openQRCode(link);\n  }\n}\n","import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../data/apis/loader';\nimport { isFolderContentSaved } from '../../data/folder/index';\nimport { IntegratedLocation, IntegratedLocationItem, integrateLocation, LocationGroupProperty } from '../../data/location/index';\nimport { stopHasNotifcationSchedules } from '../../data/notification/index';\nimport { logRecentView } from '../../data/recent-views/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll, getElementsBelow, removeFirstChild } from '../../tools/elements';\nimport { getTextWidth } from '../../tools/graphic';\nimport { booleanToString, compareThings, generateIdentifier } from '../../tools/index';\nimport { indexToDay, timeObjectToString } from '../../tools/time';\nimport { getIconElement, getIconHTML } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, GroupStyles, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\nimport { openSaveToFolder } from '../save-to-folder/index';\nimport { openScheduleNotification } from '../schedule-notification/index';\nimport { openLocationDetails } from './details/index';\n\nconst LocationField = documentQuerySelector('.css_location_field');\nconst LocationHeadElement = elementQuerySelector(LocationField, '.css_location_head');\nconst LocationNameElement = elementQuerySelector(LocationHeadElement, '.css_location_name');\nconst LocationNameSpanElement = elementQuerySelector(LocationNameElement, 'span');\nconst LocationButtonRightElement = elementQuerySelector(LocationHeadElement, '.css_location_button_right');\nconst LocationGroupsElement = elementQuerySelector(LocationField, '.css_location_groups');\nconst LocationGroupTabsElement = elementQuerySelector(LocationHeadElement, '.css_location_group_tabs');\nconst LocationGroupTabsTrayElement = elementQuerySelector(LocationGroupTabsElement, '.css_location_group_tabs_tray');\nconst LocationGroupTabLineTrackElement = elementQuerySelector(LocationHeadElement, '.css_location_group_tab_line_track');\nconst LocationGroupTabLineElement = elementQuerySelector(LocationGroupTabLineTrackElement, '.css_location_group_tab_line');\nconst LocationUpdateTimerElement = elementQuerySelector(LocationHeadElement, '.css_location_update_timer_box .css_location_update_timer');\n\nlet previousIntegration = {} as IntegratedLocation;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet locationSliding_initialIndex: number = 0;\nlet locationSliding_targetIndex: number = 0;\nlet locationSliding_groupQuantity: number = 0;\nlet locationSliding_groupStyles: GroupStyles = {};\nlet locationSliding_fieldWidth: number = 0;\nlet locationSliding_fieldHeight: number = 0;\nlet locationSliding_sliding: boolean = false;\n\nlet locationRefreshTimer_retryInterval: number = 10 * 1000;\nlet locationRefreshTimer_baseInterval: number = 15 * 1000;\nlet locationRefreshTimer_minInterval: number = 5 * 1000;\nlet locationRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet locationRefreshTimer_dynamic: boolean = true;\nlet locationRefreshTimer_lastUpdate: number = 0;\nlet locationRefreshTimer_nextUpdate: number = 0;\nlet locationRefreshTimer_currentRequestID: string = '';\nlet locationRefreshTimer_refreshing: boolean = false;\nlet locationRefreshTimer_streaming: boolean = false;\nlet locationRefreshTimer_streamStarted: boolean = false;\n\nlet currentHashSet_hash: string = '';\n\nlet tabPadding: number = 20;\n\nexport function initializeLocationSliding(): void {\n  LocationGroupsElement.addEventListener(\n    'touchstart',\n    function () {\n      locationSliding_initialIndex = Math.round(LocationGroupsElement.scrollLeft / locationSliding_fieldWidth);\n    },\n    { passive: true }\n  );\n\n  LocationGroupsElement.addEventListener(\n    'scroll',\n    function (event: Event) {\n      locationSliding_sliding = true;\n      const target = event.target as HTMLElement;\n      const currentIndex = target.scrollLeft / locationSliding_fieldWidth;\n      if (currentIndex > locationSliding_initialIndex) {\n        locationSliding_targetIndex = locationSliding_initialIndex + 1;\n      } else {\n        locationSliding_targetIndex = locationSliding_initialIndex - 1;\n      }\n      const initialSize = locationSliding_groupStyles[`g_${locationSliding_initialIndex}`] || { width: 0, offset: 0 };\n      const targetSize = locationSliding_groupStyles[`g_${locationSliding_targetIndex}`] || { width: 0, offset: 0 };\n      const tabWidth = initialSize.width + (targetSize.width - initialSize.width) * Math.abs(currentIndex - locationSliding_initialIndex);\n      const offset = (initialSize.offset + (targetSize.offset - initialSize.offset) * Math.abs(currentIndex - locationSliding_initialIndex)) * -1 + locationSliding_fieldWidth * 0.5 - tabWidth * 0.5;\n      updateLocationCSS(locationSliding_groupQuantity, offset, tabWidth - tabPadding, currentIndex);\n      if (currentIndex === locationSliding_targetIndex) {\n        locationSliding_initialIndex = Math.round(LocationGroupsElement.scrollLeft / locationSliding_fieldWidth);\n        locationSliding_sliding = false;\n      }\n    },\n    { passive: true }\n  );\n}\n\nexport function updateLocationCSS(groupQuantity: number, offset: number, tabLineWidth: number, percentage: number): void {\n  LocationGroupsElement.style.setProperty('--b-cssvar-location-group-quantity', groupQuantity.toString());\n  LocationGroupTabLineElement.style.setProperty('--b-cssvar-location-tab-line-width-scale', tabLineWidth.toString());\n  LocationGroupTabsTrayElement.style.setProperty('--b-cssvar-location-tabs-tray-offset', `${offset.toFixed(5)}px`);\n  LocationGroupTabsTrayElement.style.setProperty('--b-cssvar-location-percentage', percentage.toFixed(5));\n}\n\nfunction animateUpdateTimer(): void {\n  LocationUpdateTimerElement.style.setProperty('--b-cssvar-location-update-timer-interval', `${locationRefreshTimer_dynamicInterval}ms`);\n  LocationUpdateTimerElement.classList.add('css_location_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (locationRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    LocationUpdateTimerElement.style.setProperty('--b-cssvar-location-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfItem(): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_location_group_item');\n  itemElement.id = identifier;\n  itemElement.setAttribute('stretched', 'false');\n  itemElement.setAttribute('stretching', 'false');\n  itemElement.setAttribute('push-direction', '0');\n  itemElement.setAttribute('push-state', '0');\n\n  // Head\n  const headElement = document.createElement('div');\n  headElement.classList.add('css_location_group_item_head');\n\n  // Rank\n  const rankElement = document.createElement('div');\n  rankElement.classList.add('css_location_group_item_rank');\n  const rankNextSlideElement = document.createElement('div');\n  rankNextSlideElement.classList.add('css_location_group_item_rank_next_slide');\n  rankNextSlideElement.setAttribute('code', '-1');\n  rankNextSlideElement.setAttribute('displayed', 'false');\n  const rankCurrentSlideElement = document.createElement('div');\n  rankCurrentSlideElement.classList.add('css_location_group_item_rank_current_slide');\n  rankCurrentSlideElement.setAttribute('code', '-1');\n  rankCurrentSlideElement.setAttribute('displayed', 'true');\n  rankElement.appendChild(rankNextSlideElement);\n  rankElement.appendChild(rankCurrentSlideElement);\n\n  // Route direction\n  const routeDirectionElement = document.createElement('div');\n  routeDirectionElement.classList.add('css_location_group_item_route_direction');\n\n  // Route name\n  const routeNameElement = document.createElement('div');\n  routeNameElement.classList.add('css_location_group_item_route_name');\n\n  // Capsule\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_location_group_item_capsule');\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_location_group_item_status');\n  const nextSlideElement = document.createElement('div');\n  nextSlideElement.classList.add('css_next_slide');\n  nextSlideElement.setAttribute('code', '0');\n  nextSlideElement.setAttribute('displayed', 'false');\n  const currentSlideElement = document.createElement('div');\n  currentSlideElement.classList.add('css_current_slide');\n  currentSlideElement.setAttribute('code', '0');\n  currentSlideElement.setAttribute('displayed', 'true');\n  statusElement.appendChild(nextSlideElement);\n  statusElement.appendChild(currentSlideElement);\n\n  // Stretch button\n  const stretchElement = document.createElement('div');\n  stretchElement.classList.add('css_location_group_item_stretch');\n  stretchElement.appendChild(getIconElement('keyboard_arrow_down'));\n  stretchElement.onclick = () => {\n    stretchLocationItem(identifier);\n  };\n\n  // Capsule separator\n  const capsuleSeparatorElement = document.createElement('div');\n  capsuleSeparatorElement.classList.add('css_location_group_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(statusElement);\n  capsuleElement.appendChild(stretchElement);\n  capsuleElement.appendChild(capsuleSeparatorElement);\n\n  // Assemble head\n  headElement.appendChild(rankElement);\n  headElement.appendChild(routeDirectionElement);\n  headElement.appendChild(routeNameElement);\n  headElement.appendChild(capsuleElement);\n\n  // Body\n  const bodyElement = document.createElement('div');\n  bodyElement.classList.add('css_location_group_item_body');\n  bodyElement.setAttribute('displayed', 'false');\n\n  // Buttons\n  const buttonsElement = document.createElement('div');\n  buttonsElement.classList.add('css_location_group_item_buttons');\n\n  // Tab: 公車\n  const busTabButtonElement = document.createElement('div');\n  busTabButtonElement.classList.add('css_location_group_item_button');\n  busTabButtonElement.setAttribute('highlighted', 'true');\n  busTabButtonElement.setAttribute('type', 'tab');\n  busTabButtonElement.setAttribute('code', '0');\n  const busTabIconElement = document.createElement('div');\n  busTabIconElement.classList.add('css_location_group_item_button_icon');\n  busTabIconElement.appendChild(getIconElement('directions_bus'));\n  busTabButtonElement.appendChild(busTabIconElement);\n  busTabButtonElement.appendChild(document.createTextNode('公車'));\n  busTabButtonElement.onclick = () => {\n    switchLocationBodyTab(identifier, 0);\n  };\n\n  // Tab: 抵達時間\n  const arrivalTabButtonElement = document.createElement('div');\n  arrivalTabButtonElement.classList.add('css_location_group_item_button');\n  arrivalTabButtonElement.setAttribute('highlighted', 'false');\n  arrivalTabButtonElement.setAttribute('type', 'tab');\n  arrivalTabButtonElement.setAttribute('code', '1');\n  const arrivalTabIconElement = document.createElement('div');\n  arrivalTabIconElement.classList.add('css_location_group_item_button_icon');\n  arrivalTabIconElement.appendChild(getIconElement('departure_board'));\n  arrivalTabButtonElement.appendChild(arrivalTabIconElement);\n  arrivalTabButtonElement.appendChild(document.createTextNode('抵達時間'));\n  arrivalTabButtonElement.onclick = () => {\n    switchLocationBodyTab(identifier, 1);\n  };\n\n  // Button: 儲存\n  const saveButtonElement = document.createElement('div');\n  saveButtonElement.classList.add('css_location_group_item_button');\n  saveButtonElement.setAttribute('highlighted', 'false');\n  saveButtonElement.setAttribute('type', 'save-to-folder');\n  const saveButtonIconElement = document.createElement('div');\n  saveButtonIconElement.classList.add('css_location_group_item_button_icon');\n  saveButtonIconElement.appendChild(getIconElement('folder'));\n  saveButtonElement.appendChild(saveButtonIconElement);\n  saveButtonElement.appendChild(document.createTextNode('儲存'));\n  /*\n  saveButtonElement.onclick = () => {\n    openSaveToFolder('stop-on-location', [identifier, null, null]);\n  };\n  */\n\n  // Button: 到站通知\n  const notifyButtonElement = document.createElement('div');\n  notifyButtonElement.classList.add('css_location_group_item_button');\n  notifyButtonElement.setAttribute('highlighted', 'false');\n  notifyButtonElement.setAttribute('type', 'schedule-notification');\n  notifyButtonElement.setAttribute('enabled', 'true');\n  const notifyButtonIconElement = document.createElement('div');\n  notifyButtonIconElement.classList.add('css_location_group_item_button_icon');\n  notifyButtonIconElement.appendChild(getIconElement('notifications'));\n  notifyButtonElement.appendChild(notifyButtonIconElement);\n  notifyButtonElement.appendChild(document.createTextNode('到站通知'));\n  /*\n  notifyButtonElement.onclick = () => {\n    openScheduleNotification('stop-on-location', [identifier, null, null, null]);\n  };\n  */\n\n  // Assemble buttons\n  buttonsElement.appendChild(busTabButtonElement);\n  buttonsElement.appendChild(arrivalTabButtonElement);\n  buttonsElement.appendChild(saveButtonElement);\n  buttonsElement.appendChild(notifyButtonElement);\n\n  // Buses\n  const busesElement = document.createElement('div');\n  busesElement.classList.add('css_location_group_item_buses');\n  busesElement.setAttribute('displayed', 'true');\n\n  // Bus arrival times\n  const busArrivalTimesElement = document.createElement('div');\n  busArrivalTimesElement.classList.add('css_location_group_item_bus_arrival_times');\n  busArrivalTimesElement.setAttribute('displayed', 'false');\n\n  // Assemble body\n  bodyElement.appendChild(buttonsElement);\n  bodyElement.appendChild(busesElement);\n  bodyElement.appendChild(busArrivalTimesElement);\n\n  // Assemble item\n  itemElement.appendChild(headElement);\n  itemElement.appendChild(bodyElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction generateElementOfGroup(): GeneratedElement {\n  // Main container\n  const groupElement = document.createElement('div');\n  groupElement.classList.add('css_location_group');\n\n  // Details\n  const detailsElement = document.createElement('div');\n  detailsElement.classList.add('css_location_group_details');\n\n  // Details body\n  const detailsBodyElement = document.createElement('div');\n  detailsBodyElement.classList.add('css_location_group_details_body');\n  detailsElement.appendChild(detailsBodyElement);\n\n  // Items\n  const itemsElement = document.createElement('div');\n  itemsElement.classList.add('css_location_group_items');\n\n  // Assemble group\n  groupElement.appendChild(detailsElement);\n  groupElement.appendChild(itemsElement);\n\n  return {\n    element: groupElement,\n    id: ''\n  };\n}\n\nfunction generateElementOfTab(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_location_group_tab');\n\n  const span = document.createElement('span');\n  element.appendChild(span);\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction generateElementOfGroupDetailsProperty(): GeneratedElement {\n  // Main container\n  const propertyElement = document.createElement('div');\n  propertyElement.classList.add('css_location_group_details_property');\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_location_details_property_icon');\n\n  // Value\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_location_details_property_value');\n\n  // Assemble\n  propertyElement.appendChild(iconElement);\n  propertyElement.appendChild(valueElement);\n\n  return {\n    element: propertyElement,\n    id: ''\n  };\n}\n\nfunction setUpLocationFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: IntegratedLocation['itemQuantity'] = { g_0: Math.floor(FieldHeight / 50) + 5, g_1: Math.floor(FieldHeight / 50) + 5 };\n  const defaultGroupQuantity = 2;\n  let groupedItems: IntegratedLocation['groupedItems'] = {};\n  for (let i = 0; i < defaultGroupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    groupedItems[groupKey] = [];\n    for (let j = 0; j < defaultItemQuantity[groupKey]; j++) {\n      groupedItems[groupKey].push({\n        route_name: '',\n        route_direction: '',\n        routeId: 0,\n        stopId: 0,\n        status: {\n          code: 8,\n          text: '',\n          time: -6\n        },\n        ranking: {\n          number: 0,\n          text: '--',\n          code: -1\n        },\n        buses: [],\n        busArrivalTimes: []\n      });\n    }\n  }\n  updateLocationField(\n    {\n      groupedItems: groupedItems,\n      groupQuantity: defaultGroupQuantity,\n      groups: {\n        g_0: {\n          name: '載入中',\n          properties: [\n            {\n              key: '0',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '1',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '2',\n              icon: '',\n              value: ''\n            }\n          ]\n        },\n        g_1: {\n          name: '載入中',\n          properties: [\n            {\n              key: '0',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '1',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '2',\n              icon: '',\n              value: ''\n            }\n          ]\n        }\n      },\n      itemQuantity: defaultItemQuantity,\n      LocationName: '載入中',\n      hash: 'loading',\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateLocationField(integration: IntegratedLocation, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedLocationItem, previousItem: IntegratedLocationItem | null): void {\n    function updateStatus(thisElement: HTMLElement, thisItem: IntegratedLocationItem, animation: boolean): void {\n      const thisElementRect = thisElement.getBoundingClientRect();\n      const top = thisElementRect.top;\n      const left = thisElementRect.left;\n      const bottom = thisElementRect.bottom;\n      const right = thisElementRect.right;\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisItemStatusElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_status');\n      const nextSlideElement = elementQuerySelector(thisItemStatusElement, '.css_next_slide');\n      const currentSlideElement = elementQuerySelector(thisItemStatusElement, '.css_current_slide');\n\n      nextSlideElement.setAttribute('code', thisItem.status.code.toString());\n      nextSlideElement.innerText = thisItem.status.text;\n\n      if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n        currentSlideElement.addEventListener(\n          'animationend',\n          function () {\n            currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n            currentSlideElement.innerText = thisItem.status.text;\n            currentSlideElement.classList.remove('css_slide_fade_out');\n            nextSlideElement.setAttribute('displayed', 'false');\n          },\n          { once: true }\n        );\n        nextSlideElement.setAttribute('displayed', 'true');\n        currentSlideElement.classList.add('css_slide_fade_out');\n      } else {\n        currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n        currentSlideElement.innerText = thisItem.status.text;\n      }\n    }\n\n    function updateRank(thisElement: HTMLElement, thisItem: IntegratedLocationItem, animation: boolean): void {\n      const thisElementRect = thisElement.getBoundingClientRect();\n      const top = thisElementRect.top;\n      const left = thisElementRect.left;\n      const bottom = thisElementRect.bottom;\n      const right = thisElementRect.right;\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisRankElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_rank');\n      const nextSlideElement = elementQuerySelector(thisRankElement, '.css_location_group_item_rank_next_slide');\n      const currentSlideElement = elementQuerySelector(thisRankElement, '.css_location_group_item_rank_current_slide');\n\n      nextSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n      nextSlideElement.innerText = thisItem.ranking.text;\n\n      if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n        currentSlideElement.addEventListener(\n          'animationend',\n          function () {\n            currentSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n            currentSlideElement.innerText = thisItem.ranking.text;\n            currentSlideElement.classList.remove('css_location_group_item_rank_current_slide_fade_out');\n            nextSlideElement.setAttribute('displayed', 'false');\n          },\n          { once: true }\n        );\n        nextSlideElement.setAttribute('displayed', 'true');\n        currentSlideElement.classList.add('css_location_group_item_rank_current_slide_fade_out');\n      } else {\n        currentSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n        currentSlideElement.innerText = thisItem.ranking.text;\n      }\n    }\n\n    function updateRouteDirection(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisRouteDirectionElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_route_direction');\n      thisRouteDirectionElement.innerText = thisItem.route_direction;\n    }\n\n    function updateRouteName(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisRouteNameElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_route_name');\n      thisRouteNameElement.innerText = thisItem.route_name;\n    }\n\n    function updateBuses(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisElement, '.css_location_group_item_body');\n      const thisBusesElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buses');\n      thisBusesElement.innerHTML = thisItem.buses.length === 0 ? '<div class=\"css_location_group_item_buses_message\">目前沒有公車可顯示</div>' : thisItem.buses.map((bus) => `<div class=\"css_location_group_item_bus\" on-this-route=\"${bus.onThisRoute}\"><div class=\"css_location_group_item_bus_title\"><div class=\"css_location_group_item_bus_icon\">${getIconHTML('directions_bus')}</div><div class=\"css_location_group_item_bus_car_number\">${bus.carNumber}</div></div><div class=\"css_location_group_item_bus_attributes\"><div class=\"css_location_group_item_bus_route\">路線：${bus.RouteName}</div><div class=\"css_location_group_item_bus_car_status\">狀態：${bus.status.text}</div><div class=\"css_location_group_item_bus_car_type\">類型：${bus.type}</div></div></div>`).join('');\n    }\n\n    function updateBusArrivalTimes(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisElement, '.css_location_group_item_body');\n      const thisBusArrivalTimesElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_bus_arrival_times');\n      thisBusArrivalTimesElement.innerHTML = thisItem.busArrivalTimes.length === 0 ? '<div class=\"css_location_group_item_bus_arrival_message\">目前沒有抵達時間可顯示</div>' : thisItem.busArrivalTimes.map((busArrivalTime) => `<div class=\"css_location_group_item_bus_arrival_time\"><div class=\"css_location_group_item_bus_arrival_time_title\"><div class=\"css_location_group_item_bus_arrival_time_icon\">${getIconHTML('calendar_view_day')}</div><div class=\"css_location_group_item_bus_arrival_time_personal_schedule_name\">${busArrivalTime.personalSchedule.name}</div><div class=\"css_location_group_item_bus_arrival_time_personal_schedule_time\">週${indexToDay(busArrivalTime.day).name} ${timeObjectToString(busArrivalTime.personalSchedule.period.start)} - ${timeObjectToString(busArrivalTime.personalSchedule.period.end)}</div></div><div class=\"css_location_group_item_bus_arrival_time_chart\">${busArrivalTime.chart}</div></div>`).join('');\n    }\n\n    function updateStretch(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      if (skeletonScreen) {\n        thisElement.setAttribute('stretched', 'false');\n      }\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    function updateSaveToFolderButton(thisItemElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisItemElement, '.css_location_group_item_body');\n      const thisItemButtonsElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buttons');\n      const saveToFolderButtonElement = elementQuerySelector(thisItemButtonsElement, '.css_location_group_item_button[type=\"save-to-folder\"]');\n      saveToFolderButtonElement.onclick = function () {\n        openSaveToFolder('stop-on-location', [thisItemElement.id, thisItem.stopId, thisItem.routeId]);\n      };\n      isFolderContentSaved('stop', thisItem.stopId).then((e) => {\n        saveToFolderButtonElement.setAttribute('highlighted', booleanToString(e));\n      });\n    }\n\n    function updateScheduleNotificationButton(thisItemElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisItemElement, '.css_location_group_item_body');\n      const thisItemButtonsElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buttons');\n      const scheduleNotificationButtonElement = elementQuerySelector(thisItemButtonsElement, '.css_location_group_item_button[type=\"schedule-notification\"]');\n      scheduleNotificationButtonElement.onclick = function () {\n        openScheduleNotification('stop-on-location', [thisItemElement.id, thisItem.stopId, thisItem.routeId, thisItem.status.time]);\n      };\n      const havingNotifcationSchedules = stopHasNotifcationSchedules(thisItem.stopId);\n      scheduleNotificationButtonElement.setAttribute('highlighted', booleanToString(havingNotifcationSchedules));\n    }\n\n    if (previousItem === null) {\n      updateStatus(thisElement, thisItem, animation);\n      updateRank(thisElement, thisItem, animation);\n      updateRouteDirection(thisElement, thisItem);\n      updateRouteName(thisElement, thisItem);\n      updateBuses(thisElement, thisItem);\n      updateBusArrivalTimes(thisElement, thisItem);\n      updateStretch(thisElement, skeletonScreen);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n      updateSaveToFolderButton(thisElement, thisItem);\n      updateScheduleNotificationButton(thisElement, thisItem);\n    } else {\n      if (thisItem.status.time !== previousItem.status.time) {\n        updateStatus(thisElement, thisItem, animation);\n        updateScheduleNotificationButton(thisElement, thisItem);\n      }\n      if (previousItem.ranking.number !== thisItem.ranking.number || previousItem.ranking.code !== thisItem.ranking.code) {\n        updateRank(thisElement, thisItem, animation);\n      }\n      if (previousItem.stopId !== thisItem.stopId) {\n        updateRouteDirection(thisElement, thisItem);\n        updateRouteName(thisElement, thisItem);\n        updateSaveToFolderButton(thisElement, thisItem);\n      }\n      if (!compareThings(previousItem.buses, thisItem.buses)) {\n        updateBuses(thisElement, thisItem);\n      }\n      if (!compareThings(previousItem.busArrivalTimes, thisItem.busArrivalTimes)) {\n        updateBusArrivalTimes(thisElement, thisItem);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateStretch(thisElement, skeletonScreen);\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  function updateProperty(thisElement: HTMLElement, thisProperty: LocationGroupProperty, previousProperty: LocationGroupProperty | null): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: LocationGroupProperty): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_location_details_property_icon');\n      removeFirstChild(thisIconElement);\n      thisIconElement.appendChild(getIconElement(thisProperty.icon));\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: LocationGroupProperty): void {\n      elementQuerySelector(thisElement, '.css_location_details_property_value').innerHTML = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousProperty === null) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (!compareThings(previousProperty.icon, thisProperty.icon)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty.value, thisProperty.value)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n\n  const groupQuantity = integration.groupQuantity;\n  const itemQuantity = integration.itemQuantity;\n  const groupedItems = integration.groupedItems;\n  const groups = integration.groups;\n\n  locationSliding_groupQuantity = groupQuantity;\n  locationSliding_fieldWidth = FieldWidth;\n  locationSliding_fieldHeight = FieldHeight;\n\n  let cumulativeOffset = 0;\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const width = getTextWidth(groups[groupKey].name, 500, '17px', `\"Noto Sans TC\", sans-serif`) + tabPadding;\n    locationSliding_groupStyles[groupKey] = {\n      width: width,\n      offset: cumulativeOffset\n    };\n    cumulativeOffset += width;\n  }\n\n  if (!locationSliding_sliding) {\n    const initialGroupKey = `g_${locationSliding_initialIndex}`;\n    const initialGroupStyle = locationSliding_groupStyles[initialGroupKey];\n    const offset = initialGroupStyle.offset * -1 + locationSliding_fieldWidth * 0.5 - initialGroupStyle.width * 0.5;\n    const tabLineWidth = initialGroupStyle.width - tabPadding;\n    updateLocationCSS(locationSliding_groupQuantity, offset, tabLineWidth, locationSliding_initialIndex);\n  }\n\n  if (previousIntegration?.hash !== integration.hash) {\n    LocationNameSpanElement.innerText = integration.LocationName;\n    LocationButtonRightElement.onclick = function () {\n      openLocationDetails(integration.hash);\n    };\n  }\n\n  if (previousAnimation !== animation) {\n    LocationNameElement.setAttribute('animation', booleanToString(animation));\n    LocationGroupTabsElement.setAttribute('animation', booleanToString(animation));\n  }\n\n  if (previousSkeletonScreen !== skeletonScreen) {\n    LocationNameElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    LocationGroupTabsElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    LocationGroupTabLineTrackElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  }\n\n  // TODO: updateTab\n  const currentGroupSeatQuantity = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group').length;\n  if (groupQuantity !== currentGroupSeatQuantity) {\n    const capacity = currentGroupSeatQuantity - groupQuantity;\n    if (capacity < 0) {\n      const groupsFragment = new DocumentFragment();\n      const tabsFragment = new DocumentFragment();\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const newGroupElement = generateElementOfGroup();\n        groupsFragment.appendChild(newGroupElement.element);\n        const newTabElement = generateElementOfTab();\n        tabsFragment.appendChild(newTabElement.element);\n      }\n      LocationGroupsElement.append(groupsFragment);\n      LocationGroupTabsTrayElement.append(tabsFragment);\n    } else {\n      const LocationGroupElements = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group');\n      const LocationGroupTabElements = elementQuerySelectorAll(LocationGroupTabsTrayElement, '.css_location_group_tab');\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const groupIndex = currentGroupSeatQuantity - 1 - o;\n        LocationGroupElements[groupIndex].remove();\n        LocationGroupTabElements[groupIndex].remove();\n      }\n    }\n  }\n\n  const LocationGroupElements = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group');\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const thisLocationGroupElement = LocationGroupElements[i];\n    const currentItemSeatQuantity = elementQuerySelectorAll(thisLocationGroupElement, '.css_location_group_items .css_location_group_item').length;\n    if (itemQuantity[groupKey] !== currentItemSeatQuantity) {\n      const capacity = currentItemSeatQuantity - itemQuantity[groupKey];\n      if (capacity < 0) {\n        const LocationGroupItemsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_items');\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          const newItemElement = generateElementOfItem();\n          LocationGroupItemsElement.appendChild(newItemElement.element);\n        }\n      } else {\n        const LocationGroupItemElements = elementQuerySelectorAll(thisLocationGroupElement, '.css_location_group_items .css_location_group_item');\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          const itemIndex = currentItemSeatQuantity - 1 - o;\n          LocationGroupItemElements[itemIndex].remove();\n        }\n      }\n    }\n\n    const currentGroupPropertySeatQuantity = elementQuerySelectorAll(elementQuerySelectorAll(LocationGroupsElement, '.css_location_group')[i], '.css_location_group_details .css_location_group_details_body .css_location_group_details_property').length;\n    const groupPropertyQuantity = groups[groupKey].properties.length;\n    if (groupPropertyQuantity !== currentGroupPropertySeatQuantity) {\n      const capacity = currentGroupPropertySeatQuantity - groupPropertyQuantity;\n      if (capacity < 0) {\n        const thisLocationGroupDetailsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_details');\n        const thisLocationGroupDetailsBodyElement = elementQuerySelector(thisLocationGroupDetailsElement, '.css_location_group_details_body');\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          // var propertyIndex = currentGroupPropertySeatQuantity + o;\n          const newPropertyElement = generateElementOfGroupDetailsProperty();\n          thisLocationGroupDetailsBodyElement.appendChild(newPropertyElement.element);\n        }\n      } else {\n        const thisLocationGroupDetailsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_details');\n        const thisLocationGroupDetailsBodyElement = elementQuerySelector(thisLocationGroupDetailsElement, '.css_location_group_details_body');\n        const propertyElements = elementQuerySelectorAll(thisLocationGroupDetailsBodyElement, '.css_location_group_details_property');\n        for (let o = 0; o < Math.abs(capacity); o++) {\n          const propertyIndex = currentGroupPropertySeatQuantity - 1 - o;\n          propertyElements[propertyIndex].remove();\n        }\n      }\n    }\n  }\n\n  const tabElements = elementQuerySelectorAll(LocationGroupTabsTrayElement, '.css_location_group_tab');\n  const groupElements = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group');\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const thisTabElement = tabElements[i];\n    const thisTabSpanElement = elementQuerySelector(thisTabElement, 'span');\n    thisTabSpanElement.innerText = groups[groupKey].name;\n    thisTabElement.style.setProperty('--b-cssvar-location-tab-width', `${locationSliding_groupStyles[groupKey].width}px`);\n    thisTabElement.style.setProperty('--b-cssvar-location-tab-index', i.toString());\n    const thisGroupElement = groupElements[i];\n    const propertyElements = elementQuerySelectorAll(thisGroupElement, `.css_location_group_details .css_location_group_details_body .css_location_group_details_property`);\n    const itemElements = elementQuerySelectorAll(thisGroupElement, `.css_location_group_items .css_location_group_item`);\n\n    const groupPropertyQuantity = groups[groupKey].properties.length; // TODO: propertyQuantity\n    for (let k = 0; k < groupPropertyQuantity; k++) {\n      const thisProperty = groups[groupKey].properties[k];\n      const thisElement = propertyElements[k];\n      if (previousIntegration.hasOwnProperty('groups')) {\n        if (previousIntegration.groups.hasOwnProperty(groupKey)) {\n          if (previousIntegration.groups[groupKey].properties[k]) {\n            const previousProperty = previousIntegration.groups[groupKey].properties[k];\n            updateProperty(thisElement, thisProperty, previousProperty);\n          } else {\n            updateProperty(thisElement, thisProperty, null);\n          }\n        } else {\n          updateProperty(thisElement, thisProperty, null);\n        }\n      } else {\n        updateProperty(thisElement, thisProperty, null);\n      }\n    }\n\n    for (let j = 0; j < itemQuantity[groupKey]; j++) {\n      const thisElement = itemElements[j];\n      const thisItem = groupedItems[groupKey][j];\n      if (previousIntegration.hasOwnProperty('groupedItems')) {\n        if (previousIntegration.groupedItems.hasOwnProperty(groupKey)) {\n          if (previousIntegration.groupedItems[groupKey][j]) {\n            const previousItem = previousIntegration.groupedItems[groupKey][j];\n            updateItem(thisElement, thisItem, previousItem);\n          } else {\n            updateItem(thisElement, thisItem, null);\n          }\n        } else {\n          updateItem(thisElement, thisItem, null);\n        }\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nasync function refreshLocation() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  const busArrivalTimeChartSize = querySize('location-bus-arrival-time-chart');\n  locationRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  locationRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  locationRefreshTimer_refreshing = true;\n  locationRefreshTimer_currentRequestID = generateIdentifier();\n  LocationUpdateTimerElement.setAttribute('refreshing', 'true');\n  LocationUpdateTimerElement.classList.remove('css_location_update_timer_slide_rtl');\n  document.addEventListener(locationRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateLocation(currentHashSet_hash, busArrivalTimeChartSize.width, busArrivalTimeChartSize.height, locationRefreshTimer_currentRequestID);\n  updateLocationField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (locationRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  locationRefreshTimer_lastUpdate = new Date().getTime();\n  if (locationRefreshTimer_dynamic) {\n    locationRefreshTimer_nextUpdate = Math.max(locationRefreshTimer_lastUpdate + locationRefreshTimer_minInterval, integration.dataUpdateTime + locationRefreshTimer_baseInterval / updateRate);\n  } else {\n    locationRefreshTimer_nextUpdate = locationRefreshTimer_lastUpdate + locationRefreshTimer_baseInterval;\n  }\n  locationRefreshTimer_dynamicInterval = Math.max(locationRefreshTimer_minInterval, locationRefreshTimer_nextUpdate - locationRefreshTimer_lastUpdate);\n  locationRefreshTimer_refreshing = false;\n  LocationUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nexport function streamLocation(): void {\n  refreshLocation()\n    .then(function () {\n      if (locationRefreshTimer_streaming) {\n        setTimeout(\n          function () {\n            streamLocation();\n          },\n          Math.max(locationRefreshTimer_minInterval, locationRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        locationRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (locationRefreshTimer_streaming) {\n        promptMessage(`地點網路連線中斷，將在${locationRefreshTimer_retryInterval / 1000}秒後重試。`, 'error');\n        setTimeout(function () {\n          streamLocation();\n        }, locationRefreshTimer_retryInterval);\n      } else {\n        locationRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openLocation(hash: string): void {\n  pushPageHistory('Location');\n  logRecentView('location', hash);\n  currentHashSet_hash = hash;\n  locationSliding_initialIndex = 0;\n  LocationField.setAttribute('displayed', 'true');\n  LocationGroupsElement.scrollLeft = 0;\n  LocationGroupsElement.focus();\n  setUpLocationFieldSkeletonScreen();\n  if (!locationRefreshTimer_streaming) {\n    locationRefreshTimer_streaming = true;\n    if (!locationRefreshTimer_streamStarted) {\n      locationRefreshTimer_streamStarted = true;\n      streamLocation();\n    } else {\n      refreshLocation();\n    }\n  }\n  closePreviousPage();\n}\n\nexport function closeLocation(): void {\n  // revokePageHistory('Location');\n  LocationField.setAttribute('displayed', 'false');\n  locationRefreshTimer_streaming = false;\n  openPreviousPage();\n}\n\nexport function stretchLocationItem(itemElementID: string): void {\n  const itemElement = elementQuerySelector(LocationGroupsElement, `.css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const itemBodyElement = elementQuerySelector(itemElement, '.css_location_group_item_body');\n\n  const itemsElement = itemElement.parentElement as HTMLElement;\n\n  const elementsBelowItemElement = getElementsBelow(itemElement, 'css_location_group_item');\n  const elementsBelowLength = elementsBelowItemElement.length;\n\n  const itemsElementRect = itemsElement.getBoundingClientRect();\n  const itemElementRect = itemElement.getBoundingClientRect();\n\n  // const itemElementX = itemElementRect.left - itemsElementRect.left;\n  const itemElementY = itemElementRect.top - itemsElementRect.top;\n\n  const stretched = itemElement.getAttribute('stretched') === 'true' ? true : false;\n  const animation = itemElement.getAttribute('animation') === 'true' ? true : false;\n\n  if (animation) {\n    const pushDirection = stretched ? '2' : '1';\n\n    // Separate the elements from the document flow while keeping its position\n    itemElement.setAttribute('stretching', 'true');\n    // itemElement.style.setProperty('--b-cssvar-css-location-group-item-x', `${itemElementX}px`);\n    itemElement.style.setProperty('--b-cssvar-css-location-group-item-y', `${itemElementY}px`);\n\n    // Set push direction and push state\n    for (let i = 0; i < elementsBelowLength; i++) {\n      const thisItemElement = elementsBelowItemElement[i];\n      thisItemElement.setAttribute('push-direction', pushDirection);\n      thisItemElement.setAttribute('push-state', '1');\n    }\n\n    itemElement.addEventListener(\n      'transitionend',\n      function () {\n        // Reset the push direction and push state\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          thisItemElement.setAttribute('push-direction', '0');\n          thisItemElement.setAttribute('push-state', '0');\n        }\n        // Deposit the element\n        itemElement.setAttribute('stretching', 'false');\n      },\n      { once: true }\n    );\n\n    itemElement.addEventListener(\n      'transitionstart',\n      function () {\n        // Transition the elements below\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          thisItemElement.setAttribute('push-state', '2');\n        }\n      },\n      { once: true }\n    );\n  }\n\n  if (stretched) {\n    if (animation) {\n      itemBodyElement.addEventListener(\n        'transitionend',\n        function () {\n          itemBodyElement.setAttribute('displayed', 'false');\n        },\n        { once: true }\n      );\n    } else {\n      itemBodyElement.setAttribute('displayed', 'false');\n    }\n    itemElement.setAttribute('stretched', 'false');\n  } else {\n    itemBodyElement.setAttribute('displayed', 'true');\n    itemElement.setAttribute('stretched', 'true');\n  }\n}\n\nexport function switchLocationBodyTab(itemID: string, tabCode: number): void {\n  const itemElement = elementQuerySelector(LocationGroupsElement, `.css_location_group .css_location_group_items .css_location_group_item#${itemID}`);\n  const itemBodyElement = elementQuerySelector(itemElement, '.css_location_group_item_body');\n  const buttonsElement = elementQuerySelector(itemBodyElement, '.css_location_group_item_buttons');\n  const buttonElements = elementQuerySelectorAll(buttonsElement, '.css_location_group_item_button[highlighted=\"true\"][type=\"tab\"]');\n  for (const t of buttonElements) {\n    t.setAttribute('highlighted', 'false');\n  }\n  elementQuerySelector(buttonsElement, `.css_location_group_item_button[code=\"${tabCode}\"]`).setAttribute('highlighted', 'true');\n  switch (tabCode) {\n    case 0:\n      elementQuerySelector(itemElement, '.css_location_group_item_buses').setAttribute('displayed', 'true');\n      elementQuerySelector(itemElement, '.css_location_group_item_bus_arrival_times').setAttribute('displayed', 'false');\n      break;\n    case 1:\n      elementQuerySelector(itemElement, '.css_location_group_item_buses').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_location_group_item_bus_arrival_times').setAttribute('displayed', 'true');\n      break;\n    default:\n      break;\n  }\n}\n"],"names":["SplashScreenElement","documentQuerySelector","ErrorMessageElement","splashScreenTimer_openTime","Date","getTime","pageHistory","pushPageHistory","page","pageHistoryLength","length","push","revokePageHistory","indexOf","pop","closePreviousPage","closeFolderCreator","closeFolderEditor","closeFolderManager","closeSearch","closeSettings","closePersonalScheduleManager","closePersonalScheduleEditor","closeBus","closeRegisterNotification","openPreviousPage","previousPage","openFolderCreator","openFolderEditor","openFolderManager","openSearch","openSettings","openPersonalScheduleManager","openPersonalScheduleEditor","openBus","openRegisterNotification","setSplashScreenIconOffsetY","offset","isRunningStandalone","window","outerHeight","innerHeight","style","setProperty","fadeOutSplashScreen","callback","fadeOut","classList","add","addEventListener","setAttribute","remove","once","cureentTime","setTimeout","Math","max","showErrorMessage","querySize","type","width","height","windowWidth","innerWidth","windowHeight","scrollDocumentToTop","scrollTo","top","behavior","previousIntegration","previousAnimation","previousSkeletonScreen","LocationDetailsField","LocationDetailsBodyElement","elementQuerySelector","LocationDetailsActionsElement","generateElementOfItem","element","document","createElement","icon","appendChild","name","id","updateLocationDetailsField","integration","skeletonScreen","animation","updateItem","thisElement","thisItem","previousItem","updateIcon","thisIconElement","removeFirstChild","getIconElement","updateName","innerText","updateOnclick","onclick","action","updateAnimation","booleanToString","updateSkeletonScreen","key","actions","actionsQuantity","currentActionsSeatQuantity","elementQuerySelectorAll","capacity","fragment","DocumentFragment","o","abs","newItemElement","append","LocationActionElements","i","hasOwnProperty","_initializeLocationDetailsField","_asyncToGenerator","hash","playing_animation","getSettingOptionValue","requestID","generateIdentifier","integrateLocationDetails","apply","arguments","openLocationDetails","setUpLocationDetailsFieldSkeletonScreen","_x","initializeLocationDetailsField","closeLocationDetails","shareLocationPermalink","_x2","_shareLocationPermalink","Location","getLocation","deleteDataReceivingProgress","deleteDataUpdateTime","thisLocationKey","thisLocation","link","getPermalink","navigator","share","title","n","url","then","promptMessage","e","showLocationPermalinkQRCode","_x3","_showLocationPermalinkQRCode","openQRCode","LocationField","LocationHeadElement","LocationNameElement","LocationNameSpanElement","LocationButtonRightElement","LocationGroupsElement","LocationGroupTabsElement","LocationGroupTabsTrayElement","LocationGroupTabLineTrackElement","LocationGroupTabLineElement","LocationUpdateTimerElement","locationSliding_initialIndex","locationSliding_targetIndex","locationSliding_groupQuantity","locationSliding_groupStyles","locationSliding_fieldWidth","locationSliding_sliding","locationRefreshTimer_baseInterval","locationRefreshTimer_minInterval","locationRefreshTimer_dynamicInterval","locationRefreshTimer_dynamic","locationRefreshTimer_lastUpdate","locationRefreshTimer_nextUpdate","locationRefreshTimer_currentRequestID","locationRefreshTimer_refreshing","locationRefreshTimer_streaming","locationRefreshTimer_streamStarted","currentHashSet_hash","initializeLocationSliding","round","scrollLeft","passive","event","currentIndex","target","initialSize","targetSize","tabWidth","updateLocationCSS","groupQuantity","tabLineWidth","percentage","toString","toFixed","handleDataReceivingProgressUpdates","CustomEvent","offsetRatio","detail","progress","stage","removeEventListener","identifier","itemElement","headElement","rankElement","rankNextSlideElement","rankCurrentSlideElement","routeDirectionElement","routeNameElement","capsuleElement","statusElement","nextSlideElement","currentSlideElement","stretchElement","itemElementID","itemBodyElement","itemsElement","parentElement","elementsBelowItemElement","getElementsBelow","elementsBelowLength","itemsElementRect","getBoundingClientRect","itemElementRect","itemElementY","stretched","getAttribute","pushDirection","thisItemElement","stretchLocationItem","capsuleSeparatorElement","bodyElement","buttonsElement","busTabButtonElement","busTabIconElement","createTextNode","switchLocationBodyTab","arrivalTabButtonElement","arrivalTabIconElement","saveButtonElement","saveButtonIconElement","notifyButtonElement","notifyButtonIconElement","busesElement","busArrivalTimesElement","generateElementOfGroup","groupElement","detailsElement","detailsBodyElement","generateElementOfTab","span","generateElementOfGroupDetailsProperty","propertyElement","iconElement","valueElement","updateLocationField","_previousIntegration","updateStatus","thisElementRect","left","bottom","right","thisHeadElement","thisItemStatusElement","status","code","text","updateRank","thisRankElement","ranking","updateRouteDirection","route_direction","updateRouteName","route_name","updateBuses","thisItemBodyElement","innerHTML","buses","map","bus","onThisRoute","getIconHTML","carNumber","RouteName","join","updateBusArrivalTimes","busArrivalTimes","busArrivalTime","personalSchedule","indexToDay","day","timeObjectToString","period","start","end","chart","updateStretch","updateSaveToFolderButton","thisItemButtonsElement","saveToFolderButtonElement","openSaveToFolder","stopId","routeId","isFolderContentSaved","updateScheduleNotificationButton","scheduleNotificationButtonElement","openScheduleNotification","time","havingNotifcationSchedules","stopHasNotifcationSchedules","number","compareThings","updateProperty","thisProperty","previousProperty","updateValue","value","WindowSize","FieldWidth","FieldHeight","itemQuantity","groupedItems","groups","cumulativeOffset","groupKey","getTextWidth","initialGroupStyle","LocationName","currentGroupSeatQuantity","groupsFragment","tabsFragment","newGroupElement","newTabElement","LocationGroupElements","LocationGroupTabElements","groupIndex","thisLocationGroupElement","currentItemSeatQuantity","LocationGroupItemsElement","LocationGroupItemElements","currentGroupPropertySeatQuantity","groupPropertyQuantity","properties","thisLocationGroupDetailsElement","thisLocationGroupDetailsBodyElement","newPropertyElement","propertyElements","tabElements","groupElements","thisTabElement","thisGroupElement","itemElements","k","j","refreshLocation","_refreshLocation","refresh_interval_setting","busArrivalTimeChartSize","dynamic","baseInterval","integrateLocation","updateRate","getUpdateRate","dataUpdateTime","streamLocation","err","openLocation","logRecentView","focus","defaultItemQuantity","g_0","floor","g_1","setUpLocationFieldSkeletonScreen","closeLocation","itemID","tabCode","_step","_iterator","_createForOfIteratorHelper","s","done","f"],"ignoreList":[],"sourceRoot":""}