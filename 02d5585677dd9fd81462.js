!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():t.bus=r()}(self,()=>(()=>{"use strict";var t,r,e={3525(t,r,e){function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,s=[],f=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=a.call(e)).done)&&(s.push(n.value),s.length!==r);f=!0);}catch(t){l=!0,o=t}finally{try{if(!f&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("E0")}()}var a=e(2284);e(3503),e(4462).sha512;function i(t,r){return null!=t&&"object"===(0,a.a)(t)&&!Array.isArray(t)&&Object.prototype.hasOwnProperty.call(t,r)}var s=[],f=!1;if("onconnect"in self)self.onconnect=function(t){var r=t.ports[0];r.onmessage=function(t){var e=o(t.data,5),n=e[0],a=e[1],i=e[2],f=e[3],l=e[4];s.push({personalSchedules:n,busArrivalTimeDataGroups:a,chartWidth:i,chartHeight:f,taskID:l,port:r}),d()}};else{var l=self;self.onmessage=function(t){var r=o(t.data,5),e=r[0],n=r[1],a=r[2],i=r[3],f=r[4];s.push({personalSchedules:e,busArrivalTimeDataGroups:n,chartWidth:a,chartHeight:i,taskID:f,port:l}),d()}}var u,c,p="'Noto Sans TC', sans-serif",h=!1;function d(){if(!f&&0!==s.length){f=!0;var t=s.shift(),r=t.personalSchedules,e=t.busArrivalTimeDataGroups,n=t.chartWidth,o=t.chartHeight,a=t.taskID,l=t.port,u={};for(var v of r){var y=60*v.period.start.hours+v.period.start.minutes,$=60*v.period.end.hours+v.period.end.minutes,b=n/($-y);for(var g of e)if(!(v.days.indexOf(g.day)<0)){var m=g.max,x=g.stats.slice(y,$),w=x.length,O="",j="",S=0;S=w/30<=3?10:30;for(var k=Math.floor(w/S),A=n/k,T=k-1;T>=0;T--){var C=.175+T*A;j+=` M${C} 0`,j+=` L${C} ${o}`;var D=y+T*S,M=D%60,L=`${((D-M)/60).toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`,B=30,I=12;if(h){var P=c.measureText(L);B=P.width,I=P.actualBoundingBoxDescent}var G=(o-I)/2;O+=`<text x="${C+3}" y="${G}" transform="rotate(-90 ${(C+3+C+3+B)/2} ${(G+G+I)/2})" font-weight="400" font-size="10" font-family="${p}" component="label">${L}</text>`}var H=`<path d="${j}" fill="none" stroke-width="0.35" component="vertical-gridline"/>`,W=`<path d="${`M0 ${o-.175} L${n} ${o-.175}`}" fill="none" stroke-width="0.35" component="bottom-line"/>`,E="";if(E+=`M${n} ${o}`,0!==m)for(var z=w-1;z>=0;z--){var F=(z+1)/w*n,N=(1-x[z]/m)*o;E+=` L${F} ${N}`,E+=` L${F-b} ${N}`,E+=` L${F-b} ${o}`}var U=`<svg width="${n}" height="${o}" viewBox="0 0 ${n} ${o}" xmlns="http://www.w3.org/2000/svg">${H}${O}${W}${`<path d="${E+=" Z"}" stroke="none" stroke-width="0" component="bars"/>`}</svg>`,Z=`s_${g.id}`;i(u,Z)||(u[Z]=[]),u[Z].push({personalSchedule:v,chart:U,day:g.day})}}l.postMessage([u,a]),f=!1,d()}}"undefined"!=typeof OffscreenCanvas&&(u=new OffscreenCanvas(64,64),(c=u.getContext("2d")).font=`400 10px ${p}`,c.textBaseline="top",h=!0)}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.m=e,o.x=()=>{var t=o.O(void 0,[35],()=>o(3525));return t=o.O(t)},o.amdO={},t=[],o.O=(r,e,n,a)=>{if(!e){var i=1/0;for(u=0;u<t.length;u++){for(var[e,n,a]=t[u],s=!0,f=0;f<e.length;f++)(!1&a||i>=a)&&Object.keys(o.O).every(t=>o.O[t](e[f]))?e.splice(f--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var l=n();void 0!==l&&(r=l)}}return r}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[e,n,a]},o.d=(t,r)=>{for(var e in r)o.o(r,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((r,e)=>(o.f[e](t,r),r),[])),o.u=t=>"a6b82cb50ce1f17099de.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),o.p="./",(()=>{var t={525:1};o.f.i=(r,e)=>{t[r]||importScripts(o.p+o.u(r))};var r=self.webpackChunkbus=self.webpackChunkbus||[],e=r.push.bind(r);r.push=r=>{var[n,a,i]=r;for(var s in a)o.o(a,s)&&(o.m[s]=a[s]);for(i&&i(o);n.length;)t[n.pop()]=1;e(r)}})(),r=o.x,o.x=()=>o.e(35).then(r);var a=o.x();return a=a.default})());
//# sourceMappingURL=02d5585677dd9fd81462.js.map