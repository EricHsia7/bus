{"version":3,"file":"861.17f92bfa076dd41fb18d.js","mappings":"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","sources":["webpack://bus/./node_modules/qrcode/lib/core/qrcode.js","webpack://bus/./node_modules/qrcode/lib/core/mode.js","webpack://bus/./node_modules/qrcode/lib/core/mask-pattern.js","webpack://bus/./node_modules/qrcode/lib/core/version.js","webpack://bus/./node_modules/qrcode/lib/core/alphanumeric-data.js","webpack://bus/./node_modules/qrcode/lib/core/version-check.js","webpack://bus/./node_modules/charenc/charenc.js","webpack://bus/./node_modules/qrcode/lib/core/galois-field.js","webpack://bus/./node_modules/md5/md5.js","webpack://bus/./node_modules/crypt/crypt.js","webpack://bus/./node_modules/qrcode/lib/core/numeric-data.js","webpack://bus/./node_modules/js-sha512/src/sha512.js","webpack://bus/./node_modules/qrcode/lib/core/format-info.js","webpack://bus/./node_modules/js-levenshtein/index.js","webpack://bus/./node_modules/qrcode/lib/core/polynomial.js","webpack://bus/./node_modules/qrcode/lib/core/reed-solomon-encoder.js","webpack://bus/./node_modules/qrcode/lib/core/kanji-data.js","webpack://bus/./node_modules/qrcode/lib/core/byte-data.js","webpack://bus/./node_modules/dijkstrajs/dijkstra.js","webpack://bus/./node_modules/qrcode/lib/core/alignment-pattern.js","webpack://bus/./src/tools/array.ts","webpack://bus/./src/tools/convert.ts","webpack://bus/./src/tools/labels.ts","webpack://bus/./src/tools/address.ts","webpack://bus/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://bus/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://bus/./src/tools/time.ts","webpack://bus/./src/data/storage/index.ts","webpack://bus/./src/data/analytics/data-usage/index.ts","webpack://bus/./src/tools/elements.ts","webpack://bus/./src/data/apis/getAPIURL/index.ts","webpack://bus/./src/tools/pako-inflate/index.ts","webpack://bus/./src/data/apis/loader.ts","webpack://bus/./src/data/apis/getBusData/index.ts","webpack://bus/./src/data/apis/getBusEvent/index.ts","webpack://bus/./src/data/apis/getCarInfo/index.ts","webpack://bus/./src/data/apis/getLocation/index.ts","webpack://bus/./src/data/apis/getStop/index.ts","webpack://bus/./src/data/apis/index.ts","webpack://bus/./src/tools/text.ts","webpack://bus/./src/data/apis/getRoute/index.ts","webpack://bus/./src/data/search/index.ts","webpack://bus/./src/data/bus/index.ts","webpack://bus/./src/data/recent-views/index.ts","webpack://bus/./src/interface/icons/index.ts","webpack://bus/./src/interface/bus/properties.ts","webpack://bus/./src/interface/bus/index.ts","webpack://bus/./src/data/personal-schedule/index.ts","webpack://bus/./src/data/analytics/bus-arrival-time/index.ts","webpack://bus/./src/data/analytics/update-rate/index.ts","webpack://bus/./src/data/apis/getEstimateTime/index.ts","webpack://bus/./src/data/apis/getMaterialSymbolsSearchIndex/index.ts","webpack://bus/./src/data/folder/index.ts","webpack://bus/./src/tools/levenshtein.ts","webpack://bus/./src/data/search/searchMaterialSymbols.ts","webpack://bus/./src/interface/home/index.ts","webpack://bus/./src/interface/folder-icon-selector/index.ts","webpack://bus/./src/interface/folder-creator/index.ts","webpack://bus/./src/interface/folder-editor/index.ts","webpack://bus/./src/interface/folder-manager/index.ts","webpack://bus/./src/interface/personal-schedule-editor/index.ts","webpack://bus/./src/interface/personal-schedule-manager/index.ts","webpack://bus/./src/data/notification/apis/getNotificationAPIURL/index.ts","webpack://bus/./src/data/notification/apis/getNotificationToken/index.ts","webpack://bus/./src/data/notification/apis/getNotificationRequestBody/index.ts","webpack://bus/./src/data/notification/apis/loader.ts","webpack://bus/./src/data/notification/apis/rotateNotificationSecret/index.ts","webpack://bus/./src/data/notification/index.ts","webpack://bus/./src/data/notification/apis/scheduleNotification/index.ts","webpack://bus/./src/interface/register-notification/index.ts","webpack://bus/./src/tools/graphic.ts","webpack://bus/./src/tools/style.ts","webpack://bus/./src/tools/math.ts","webpack://bus/./src/tools/cardinal-direction.ts","webpack://bus/./src/data/user-orientation/index.ts","webpack://bus/./src/data/location/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/schedule-notification/index.ts","webpack://bus/./src/data/location/details.ts","webpack://bus/./src/interface/location/details/index.ts","webpack://bus/./src/data/apis/getSegmentBuffers/index.ts","webpack://bus/./src/data/user-position/index.ts","webpack://bus/./src/data/route/index.ts","webpack://bus/./src/data/apis/getProvider/index.ts","webpack://bus/./src/data/apis/getSemiTimeTable/index.ts","webpack://bus/./src/data/apis/getTimeTable/index.ts","webpack://bus/./src/data/route/details.ts","webpack://bus/./src/tools/qrcode.ts","webpack://bus/./src/interface/qrcode/index.ts","webpack://bus/./src/interface/route/details/actions.ts","webpack://bus/./src/interface/route/details/calendar.ts","webpack://bus/./src/interface/route/details/properties.ts","webpack://bus/./src/interface/route/details/index.ts","webpack://bus/./src/interface/route/index.ts","webpack://bus/./src/tools/permalink.ts","webpack://bus/./src/interface/location/index.ts","webpack://bus/./src/interface/search/index.ts","webpack://bus/./src/data/export/index.ts","webpack://bus/./src/data/settings/index.ts","webpack://bus/./src/data/import/index.ts","webpack://bus/./src/data/settings/version.ts","webpack://bus/./src/interface/settings/index.ts","webpack://bus/./src/tools/index.ts","webpack://bus/./src/interface/index.ts","webpack://bus/./src/interface/data-usage/index.ts","webpack://bus/./src/data/notification/apis/cancelNotification/index.ts","webpack://bus/./src/interface/notification-schedule-manager/index.ts","webpack://bus/./src/interface/settings/options.ts","webpack://bus/./src/data/analytics/storage-size.ts","webpack://bus/./src/interface/storage/index.ts","webpack://bus/./src/interface/prompt/index.ts","webpack://bus/./src/data/apis/getLocation/mergeLocationByName-worker.ts","webpack://bus/./node_modules/qrcode/lib/core/utils.js","webpack://bus/./node_modules/qrcode/lib/core/regex.js","webpack://bus/./node_modules/is-buffer/index.js","webpack://bus/./node_modules/qrcode/lib/core/error-correction-code.js","webpack://bus/./node_modules/qrcode/lib/core/finder-pattern.js","webpack://bus/./node_modules/qrcode/lib/core/bit-matrix.js","webpack://bus/./node_modules/qrcode/lib/core/segments.js","webpack://bus/./node_modules/qrcode/lib/core/bit-buffer.js","webpack://bus/./node_modules/qrcode/lib/core/error-correction-level.js"],"sourcesContent":["const Utils = require('./utils')\nconst ECLevel = require('./error-correction-level')\nconst BitBuffer = require('./bit-buffer')\nconst BitMatrix = require('./bit-matrix')\nconst AlignmentPattern = require('./alignment-pattern')\nconst FinderPattern = require('./finder-pattern')\nconst MaskPattern = require('./mask-pattern')\nconst ECCode = require('./error-correction-code')\nconst ReedSolomonEncoder = require('./reed-solomon-encoder')\nconst Version = require('./version')\nconst FormatInfo = require('./format-info')\nconst Mode = require('./mode')\nconst Segments = require('./segments')\n\n/**\n * QRCode for JavaScript\n *\n * modified by Ryan Day for nodejs support\n * Copyright (c) 2011 Ryan Day\n *\n * Licensed under the MIT license:\n *   http://www.opensource.org/licenses/mit-license.php\n *\n//---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of\n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n*/\n\n/**\n * Add finder patterns bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupFinderPattern (matrix, version) {\n  const size = matrix.size\n  const pos = FinderPattern.getPositions(version)\n\n  for (let i = 0; i < pos.length; i++) {\n    const row = pos[i][0]\n    const col = pos[i][1]\n\n    for (let r = -1; r <= 7; r++) {\n      if (row + r <= -1 || size <= row + r) continue\n\n      for (let c = -1; c <= 7; c++) {\n        if (col + c <= -1 || size <= col + c) continue\n\n        if ((r >= 0 && r <= 6 && (c === 0 || c === 6)) ||\n          (c >= 0 && c <= 6 && (r === 0 || r === 6)) ||\n          (r >= 2 && r <= 4 && c >= 2 && c <= 4)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add timing pattern bits to matrix\n *\n * Note: this function must be called before {@link setupAlignmentPattern}\n *\n * @param  {BitMatrix} matrix Modules matrix\n */\nfunction setupTimingPattern (matrix) {\n  const size = matrix.size\n\n  for (let r = 8; r < size - 8; r++) {\n    const value = r % 2 === 0\n    matrix.set(r, 6, value, true)\n    matrix.set(6, r, value, true)\n  }\n}\n\n/**\n * Add alignment patterns bits to matrix\n *\n * Note: this function must be called after {@link setupTimingPattern}\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupAlignmentPattern (matrix, version) {\n  const pos = AlignmentPattern.getPositions(version)\n\n  for (let i = 0; i < pos.length; i++) {\n    const row = pos[i][0]\n    const col = pos[i][1]\n\n    for (let r = -2; r <= 2; r++) {\n      for (let c = -2; c <= 2; c++) {\n        if (r === -2 || r === 2 || c === -2 || c === 2 ||\n          (r === 0 && c === 0)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add version info bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupVersionInfo (matrix, version) {\n  const size = matrix.size\n  const bits = Version.getEncodedBits(version)\n  let row, col, mod\n\n  for (let i = 0; i < 18; i++) {\n    row = Math.floor(i / 3)\n    col = i % 3 + size - 8 - 3\n    mod = ((bits >> i) & 1) === 1\n\n    matrix.set(row, col, mod, true)\n    matrix.set(col, row, mod, true)\n  }\n}\n\n/**\n * Add format info bits to matrix\n *\n * @param  {BitMatrix} matrix               Modules matrix\n * @param  {ErrorCorrectionLevel}    errorCorrectionLevel Error correction level\n * @param  {Number}    maskPattern          Mask pattern reference value\n */\nfunction setupFormatInfo (matrix, errorCorrectionLevel, maskPattern) {\n  const size = matrix.size\n  const bits = FormatInfo.getEncodedBits(errorCorrectionLevel, maskPattern)\n  let i, mod\n\n  for (i = 0; i < 15; i++) {\n    mod = ((bits >> i) & 1) === 1\n\n    // vertical\n    if (i < 6) {\n      matrix.set(i, 8, mod, true)\n    } else if (i < 8) {\n      matrix.set(i + 1, 8, mod, true)\n    } else {\n      matrix.set(size - 15 + i, 8, mod, true)\n    }\n\n    // horizontal\n    if (i < 8) {\n      matrix.set(8, size - i - 1, mod, true)\n    } else if (i < 9) {\n      matrix.set(8, 15 - i - 1 + 1, mod, true)\n    } else {\n      matrix.set(8, 15 - i - 1, mod, true)\n    }\n  }\n\n  // fixed module\n  matrix.set(size - 8, 8, 1, true)\n}\n\n/**\n * Add encoded data bits to matrix\n *\n * @param  {BitMatrix}  matrix Modules matrix\n * @param  {Uint8Array} data   Data codewords\n */\nfunction setupData (matrix, data) {\n  const size = matrix.size\n  let inc = -1\n  let row = size - 1\n  let bitIndex = 7\n  let byteIndex = 0\n\n  for (let col = size - 1; col > 0; col -= 2) {\n    if (col === 6) col--\n\n    while (true) {\n      for (let c = 0; c < 2; c++) {\n        if (!matrix.isReserved(row, col - c)) {\n          let dark = false\n\n          if (byteIndex < data.length) {\n            dark = (((data[byteIndex] >>> bitIndex) & 1) === 1)\n          }\n\n          matrix.set(row, col - c, dark)\n          bitIndex--\n\n          if (bitIndex === -1) {\n            byteIndex++\n            bitIndex = 7\n          }\n        }\n      }\n\n      row += inc\n\n      if (row < 0 || size <= row) {\n        row -= inc\n        inc = -inc\n        break\n      }\n    }\n  }\n}\n\n/**\n * Create encoded codewords from data input\n *\n * @param  {Number}   version              QR Code version\n * @param  {ErrorCorrectionLevel}   errorCorrectionLevel Error correction level\n * @param  {ByteData} data                 Data input\n * @return {Uint8Array}                    Buffer containing encoded codewords\n */\nfunction createData (version, errorCorrectionLevel, segments) {\n  // Prepare data buffer\n  const buffer = new BitBuffer()\n\n  segments.forEach(function (data) {\n    // prefix data with mode indicator (4 bits)\n    buffer.put(data.mode.bit, 4)\n\n    // Prefix data with character count indicator.\n    // The character count indicator is a string of bits that represents the\n    // number of characters that are being encoded.\n    // The character count indicator must be placed after the mode indicator\n    // and must be a certain number of bits long, depending on the QR version\n    // and data mode\n    // @see {@link Mode.getCharCountIndicator}.\n    buffer.put(data.getLength(), Mode.getCharCountIndicator(data.mode, version))\n\n    // add binary data sequence to buffer\n    data.write(buffer)\n  })\n\n  // Calculate required number of bits\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n  const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  // Add a terminator.\n  // If the bit string is shorter than the total number of required bits,\n  // a terminator of up to four 0s must be added to the right side of the string.\n  // If the bit string is more than four bits shorter than the required number of bits,\n  // add four 0s to the end.\n  if (buffer.getLengthInBits() + 4 <= dataTotalCodewordsBits) {\n    buffer.put(0, 4)\n  }\n\n  // If the bit string is fewer than four bits shorter, add only the number of 0s that\n  // are needed to reach the required number of bits.\n\n  // After adding the terminator, if the number of bits in the string is not a multiple of 8,\n  // pad the string on the right with 0s to make the string's length a multiple of 8.\n  while (buffer.getLengthInBits() % 8 !== 0) {\n    buffer.putBit(0)\n  }\n\n  // Add pad bytes if the string is still shorter than the total number of required bits.\n  // Extend the buffer to fill the data capacity of the symbol corresponding to\n  // the Version and Error Correction Level by adding the Pad Codewords 11101100 (0xEC)\n  // and 00010001 (0x11) alternately.\n  const remainingByte = (dataTotalCodewordsBits - buffer.getLengthInBits()) / 8\n  for (let i = 0; i < remainingByte; i++) {\n    buffer.put(i % 2 ? 0x11 : 0xEC, 8)\n  }\n\n  return createCodewords(buffer, version, errorCorrectionLevel)\n}\n\n/**\n * Encode input data with Reed-Solomon and return codewords with\n * relative error correction bits\n *\n * @param  {BitBuffer} bitBuffer            Data to encode\n * @param  {Number}    version              QR Code version\n * @param  {ErrorCorrectionLevel} errorCorrectionLevel Error correction level\n * @return {Uint8Array}                     Buffer containing encoded codewords\n */\nfunction createCodewords (bitBuffer, version, errorCorrectionLevel) {\n  // Total codewords for this QR code version (Data + Error correction)\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  const dataTotalCodewords = totalCodewords - ecTotalCodewords\n\n  // Total number of blocks\n  const ecTotalBlocks = ECCode.getBlocksCount(version, errorCorrectionLevel)\n\n  // Calculate how many blocks each group should contain\n  const blocksInGroup2 = totalCodewords % ecTotalBlocks\n  const blocksInGroup1 = ecTotalBlocks - blocksInGroup2\n\n  const totalCodewordsInGroup1 = Math.floor(totalCodewords / ecTotalBlocks)\n\n  const dataCodewordsInGroup1 = Math.floor(dataTotalCodewords / ecTotalBlocks)\n  const dataCodewordsInGroup2 = dataCodewordsInGroup1 + 1\n\n  // Number of EC codewords is the same for both groups\n  const ecCount = totalCodewordsInGroup1 - dataCodewordsInGroup1\n\n  // Initialize a Reed-Solomon encoder with a generator polynomial of degree ecCount\n  const rs = new ReedSolomonEncoder(ecCount)\n\n  let offset = 0\n  const dcData = new Array(ecTotalBlocks)\n  const ecData = new Array(ecTotalBlocks)\n  let maxDataSize = 0\n  const buffer = new Uint8Array(bitBuffer.buffer)\n\n  // Divide the buffer into the required number of blocks\n  for (let b = 0; b < ecTotalBlocks; b++) {\n    const dataSize = b < blocksInGroup1 ? dataCodewordsInGroup1 : dataCodewordsInGroup2\n\n    // extract a block of data from buffer\n    dcData[b] = buffer.slice(offset, offset + dataSize)\n\n    // Calculate EC codewords for this data block\n    ecData[b] = rs.encode(dcData[b])\n\n    offset += dataSize\n    maxDataSize = Math.max(maxDataSize, dataSize)\n  }\n\n  // Create final data\n  // Interleave the data and error correction codewords from each block\n  const data = new Uint8Array(totalCodewords)\n  let index = 0\n  let i, r\n\n  // Add data codewords\n  for (i = 0; i < maxDataSize; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      if (i < dcData[r].length) {\n        data[index++] = dcData[r][i]\n      }\n    }\n  }\n\n  // Apped EC codewords\n  for (i = 0; i < ecCount; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      data[index++] = ecData[r][i]\n    }\n  }\n\n  return data\n}\n\n/**\n * Build QR Code symbol\n *\n * @param  {String} data                 Input string\n * @param  {Number} version              QR Code version\n * @param  {ErrorCorretionLevel} errorCorrectionLevel Error level\n * @param  {MaskPattern} maskPattern     Mask pattern\n * @return {Object}                      Object containing symbol data\n */\nfunction createSymbol (data, version, errorCorrectionLevel, maskPattern) {\n  let segments\n\n  if (Array.isArray(data)) {\n    segments = Segments.fromArray(data)\n  } else if (typeof data === 'string') {\n    let estimatedVersion = version\n\n    if (!estimatedVersion) {\n      const rawSegments = Segments.rawSplit(data)\n\n      // Estimate best version that can contain raw splitted segments\n      estimatedVersion = Version.getBestVersionForData(rawSegments, errorCorrectionLevel)\n    }\n\n    // Build optimized segments\n    // If estimated version is undefined, try with the highest version\n    segments = Segments.fromString(data, estimatedVersion || 40)\n  } else {\n    throw new Error('Invalid data')\n  }\n\n  // Get the min version that can contain data\n  const bestVersion = Version.getBestVersionForData(segments, errorCorrectionLevel)\n\n  // If no version is found, data cannot be stored\n  if (!bestVersion) {\n    throw new Error('The amount of data is too big to be stored in a QR Code')\n  }\n\n  // If not specified, use min version as default\n  if (!version) {\n    version = bestVersion\n\n  // Check if the specified version can contain the data\n  } else if (version < bestVersion) {\n    throw new Error('\\n' +\n      'The chosen QR Code version cannot contain this amount of data.\\n' +\n      'Minimum version required to store current data is: ' + bestVersion + '.\\n'\n    )\n  }\n\n  const dataBits = createData(version, errorCorrectionLevel, segments)\n\n  // Allocate matrix buffer\n  const moduleCount = Utils.getSymbolSize(version)\n  const modules = new BitMatrix(moduleCount)\n\n  // Add function modules\n  setupFinderPattern(modules, version)\n  setupTimingPattern(modules)\n  setupAlignmentPattern(modules, version)\n\n  // Add temporary dummy bits for format info just to set them as reserved.\n  // This is needed to prevent these bits from being masked by {@link MaskPattern.applyMask}\n  // since the masking operation must be performed only on the encoding region.\n  // These blocks will be replaced with correct values later in code.\n  setupFormatInfo(modules, errorCorrectionLevel, 0)\n\n  if (version >= 7) {\n    setupVersionInfo(modules, version)\n  }\n\n  // Add data codewords\n  setupData(modules, dataBits)\n\n  if (isNaN(maskPattern)) {\n    // Find best mask pattern\n    maskPattern = MaskPattern.getBestMask(modules,\n      setupFormatInfo.bind(null, modules, errorCorrectionLevel))\n  }\n\n  // Apply mask pattern\n  MaskPattern.applyMask(maskPattern, modules)\n\n  // Replace format info bits with correct values\n  setupFormatInfo(modules, errorCorrectionLevel, maskPattern)\n\n  return {\n    modules: modules,\n    version: version,\n    errorCorrectionLevel: errorCorrectionLevel,\n    maskPattern: maskPattern,\n    segments: segments\n  }\n}\n\n/**\n * QR Code\n *\n * @param {String | Array} data                 Input data\n * @param {Object} options                      Optional configurations\n * @param {Number} options.version              QR Code version\n * @param {String} options.errorCorrectionLevel Error correction level\n * @param {Function} options.toSJISFunc         Helper func to convert utf8 to sjis\n */\nexports.create = function create (data, options) {\n  if (typeof data === 'undefined' || data === '') {\n    throw new Error('No input text')\n  }\n\n  let errorCorrectionLevel = ECLevel.M\n  let version\n  let mask\n\n  if (typeof options !== 'undefined') {\n    // Use higher error correction level as default\n    errorCorrectionLevel = ECLevel.from(options.errorCorrectionLevel, ECLevel.M)\n    version = Version.from(options.version)\n    mask = MaskPattern.from(options.maskPattern)\n\n    if (options.toSJISFunc) {\n      Utils.setToSJISFunction(options.toSJISFunc)\n    }\n  }\n\n  return createSymbol(data, version, errorCorrectionLevel, mask)\n}\n","const VersionCheck = require('./version-check')\nconst Regex = require('./regex')\n\n/**\n * Numeric mode encodes data from the decimal digit set (0 - 9)\n * (byte values 30HEX to 39HEX).\n * Normally, 3 data characters are represented by 10 bits.\n *\n * @type {Object}\n */\nexports.NUMERIC = {\n  id: 'Numeric',\n  bit: 1 << 0,\n  ccBits: [10, 12, 14]\n}\n\n/**\n * Alphanumeric mode encodes data from a set of 45 characters,\n * i.e. 10 numeric digits (0 - 9),\n *      26 alphabetic characters (A - Z),\n *   and 9 symbols (SP, $, %, *, +, -, ., /, :).\n * Normally, two input characters are represented by 11 bits.\n *\n * @type {Object}\n */\nexports.ALPHANUMERIC = {\n  id: 'Alphanumeric',\n  bit: 1 << 1,\n  ccBits: [9, 11, 13]\n}\n\n/**\n * In byte mode, data is encoded at 8 bits per character.\n *\n * @type {Object}\n */\nexports.BYTE = {\n  id: 'Byte',\n  bit: 1 << 2,\n  ccBits: [8, 16, 16]\n}\n\n/**\n * The Kanji mode efficiently encodes Kanji characters in accordance with\n * the Shift JIS system based on JIS X 0208.\n * The Shift JIS values are shifted from the JIS X 0208 values.\n * JIS X 0208 gives details of the shift coded representation.\n * Each two-byte character value is compacted to a 13-bit binary codeword.\n *\n * @type {Object}\n */\nexports.KANJI = {\n  id: 'Kanji',\n  bit: 1 << 3,\n  ccBits: [8, 10, 12]\n}\n\n/**\n * Mixed mode will contain a sequences of data in a combination of any of\n * the modes described above\n *\n * @type {Object}\n */\nexports.MIXED = {\n  bit: -1\n}\n\n/**\n * Returns the number of bits needed to store the data length\n * according to QR Code specifications.\n *\n * @param  {Mode}   mode    Data mode\n * @param  {Number} version QR Code version\n * @return {Number}         Number of bits\n */\nexports.getCharCountIndicator = function getCharCountIndicator (mode, version) {\n  if (!mode.ccBits) throw new Error('Invalid mode: ' + mode)\n\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid version: ' + version)\n  }\n\n  if (version >= 1 && version < 10) return mode.ccBits[0]\n  else if (version < 27) return mode.ccBits[1]\n  return mode.ccBits[2]\n}\n\n/**\n * Returns the most efficient mode to store the specified data\n *\n * @param  {String} dataStr Input data string\n * @return {Mode}           Best mode\n */\nexports.getBestModeForData = function getBestModeForData (dataStr) {\n  if (Regex.testNumeric(dataStr)) return exports.NUMERIC\n  else if (Regex.testAlphanumeric(dataStr)) return exports.ALPHANUMERIC\n  else if (Regex.testKanji(dataStr)) return exports.KANJI\n  else return exports.BYTE\n}\n\n/**\n * Return mode name as string\n *\n * @param {Mode} mode Mode object\n * @returns {String}  Mode name\n */\nexports.toString = function toString (mode) {\n  if (mode && mode.id) return mode.id\n  throw new Error('Invalid mode')\n}\n\n/**\n * Check if input param is a valid mode object\n *\n * @param   {Mode}    mode Mode object\n * @returns {Boolean} True if valid mode, false otherwise\n */\nexports.isValid = function isValid (mode) {\n  return mode && mode.bit && mode.ccBits\n}\n\n/**\n * Get mode object from its name\n *\n * @param   {String} string Mode name\n * @returns {Mode}          Mode object\n */\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  const lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'numeric':\n      return exports.NUMERIC\n    case 'alphanumeric':\n      return exports.ALPHANUMERIC\n    case 'kanji':\n      return exports.KANJI\n    case 'byte':\n      return exports.BYTE\n    default:\n      throw new Error('Unknown mode: ' + string)\n  }\n}\n\n/**\n * Returns mode from a value.\n * If value is not a valid mode, returns defaultValue\n *\n * @param  {Mode|String} value        Encoding mode\n * @param  {Mode}        defaultValue Fallback value\n * @return {Mode}                     Encoding mode\n */\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n","/**\n * Data mask pattern reference\n * @type {Object}\n */\nexports.Patterns = {\n  PATTERN000: 0,\n  PATTERN001: 1,\n  PATTERN010: 2,\n  PATTERN011: 3,\n  PATTERN100: 4,\n  PATTERN101: 5,\n  PATTERN110: 6,\n  PATTERN111: 7\n}\n\n/**\n * Weighted penalty scores for the undesirable features\n * @type {Object}\n */\nconst PenaltyScores = {\n  N1: 3,\n  N2: 3,\n  N3: 40,\n  N4: 10\n}\n\n/**\n * Check if mask pattern value is valid\n *\n * @param  {Number}  mask    Mask pattern\n * @return {Boolean}         true if valid, false otherwise\n */\nexports.isValid = function isValid (mask) {\n  return mask != null && mask !== '' && !isNaN(mask) && mask >= 0 && mask <= 7\n}\n\n/**\n * Returns mask pattern from a value.\n * If value is not valid, returns undefined\n *\n * @param  {Number|String} value        Mask pattern value\n * @return {Number}                     Valid mask pattern or undefined\n */\nexports.from = function from (value) {\n  return exports.isValid(value) ? parseInt(value, 10) : undefined\n}\n\n/**\n* Find adjacent modules in row/column with the same color\n* and assign a penalty value.\n*\n* Points: N1 + i\n* i is the amount by which the number of adjacent modules of the same color exceeds 5\n*/\nexports.getPenaltyN1 = function getPenaltyN1 (data) {\n  const size = data.size\n  let points = 0\n  let sameCountCol = 0\n  let sameCountRow = 0\n  let lastCol = null\n  let lastRow = null\n\n  for (let row = 0; row < size; row++) {\n    sameCountCol = sameCountRow = 0\n    lastCol = lastRow = null\n\n    for (let col = 0; col < size; col++) {\n      let module = data.get(row, col)\n      if (module === lastCol) {\n        sameCountCol++\n      } else {\n        if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n        lastCol = module\n        sameCountCol = 1\n      }\n\n      module = data.get(col, row)\n      if (module === lastRow) {\n        sameCountRow++\n      } else {\n        if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n        lastRow = module\n        sameCountRow = 1\n      }\n    }\n\n    if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n    if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n  }\n\n  return points\n}\n\n/**\n * Find 2x2 blocks with the same color and assign a penalty value\n *\n * Points: N2 * (m - 1) * (n - 1)\n */\nexports.getPenaltyN2 = function getPenaltyN2 (data) {\n  const size = data.size\n  let points = 0\n\n  for (let row = 0; row < size - 1; row++) {\n    for (let col = 0; col < size - 1; col++) {\n      const last = data.get(row, col) +\n        data.get(row, col + 1) +\n        data.get(row + 1, col) +\n        data.get(row + 1, col + 1)\n\n      if (last === 4 || last === 0) points++\n    }\n  }\n\n  return points * PenaltyScores.N2\n}\n\n/**\n * Find 1:1:3:1:1 ratio (dark:light:dark:light:dark) pattern in row/column,\n * preceded or followed by light area 4 modules wide\n *\n * Points: N3 * number of pattern found\n */\nexports.getPenaltyN3 = function getPenaltyN3 (data) {\n  const size = data.size\n  let points = 0\n  let bitsCol = 0\n  let bitsRow = 0\n\n  for (let row = 0; row < size; row++) {\n    bitsCol = bitsRow = 0\n    for (let col = 0; col < size; col++) {\n      bitsCol = ((bitsCol << 1) & 0x7FF) | data.get(row, col)\n      if (col >= 10 && (bitsCol === 0x5D0 || bitsCol === 0x05D)) points++\n\n      bitsRow = ((bitsRow << 1) & 0x7FF) | data.get(col, row)\n      if (col >= 10 && (bitsRow === 0x5D0 || bitsRow === 0x05D)) points++\n    }\n  }\n\n  return points * PenaltyScores.N3\n}\n\n/**\n * Calculate proportion of dark modules in entire symbol\n *\n * Points: N4 * k\n *\n * k is the rating of the deviation of the proportion of dark modules\n * in the symbol from 50% in steps of 5%\n */\nexports.getPenaltyN4 = function getPenaltyN4 (data) {\n  let darkCount = 0\n  const modulesCount = data.data.length\n\n  for (let i = 0; i < modulesCount; i++) darkCount += data.data[i]\n\n  const k = Math.abs(Math.ceil((darkCount * 100 / modulesCount) / 5) - 10)\n\n  return k * PenaltyScores.N4\n}\n\n/**\n * Return mask value at given position\n *\n * @param  {Number} maskPattern Pattern reference value\n * @param  {Number} i           Row\n * @param  {Number} j           Column\n * @return {Boolean}            Mask value\n */\nfunction getMaskAt (maskPattern, i, j) {\n  switch (maskPattern) {\n    case exports.Patterns.PATTERN000: return (i + j) % 2 === 0\n    case exports.Patterns.PATTERN001: return i % 2 === 0\n    case exports.Patterns.PATTERN010: return j % 3 === 0\n    case exports.Patterns.PATTERN011: return (i + j) % 3 === 0\n    case exports.Patterns.PATTERN100: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 === 0\n    case exports.Patterns.PATTERN101: return (i * j) % 2 + (i * j) % 3 === 0\n    case exports.Patterns.PATTERN110: return ((i * j) % 2 + (i * j) % 3) % 2 === 0\n    case exports.Patterns.PATTERN111: return ((i * j) % 3 + (i + j) % 2) % 2 === 0\n\n    default: throw new Error('bad maskPattern:' + maskPattern)\n  }\n}\n\n/**\n * Apply a mask pattern to a BitMatrix\n *\n * @param  {Number}    pattern Pattern reference number\n * @param  {BitMatrix} data    BitMatrix data\n */\nexports.applyMask = function applyMask (pattern, data) {\n  const size = data.size\n\n  for (let col = 0; col < size; col++) {\n    for (let row = 0; row < size; row++) {\n      if (data.isReserved(row, col)) continue\n      data.xor(row, col, getMaskAt(pattern, row, col))\n    }\n  }\n}\n\n/**\n * Returns the best mask pattern for data\n *\n * @param  {BitMatrix} data\n * @return {Number} Mask pattern reference number\n */\nexports.getBestMask = function getBestMask (data, setupFormatFunc) {\n  const numPatterns = Object.keys(exports.Patterns).length\n  let bestPattern = 0\n  let lowerPenalty = Infinity\n\n  for (let p = 0; p < numPatterns; p++) {\n    setupFormatFunc(p)\n    exports.applyMask(p, data)\n\n    // Calculate penalty\n    const penalty =\n      exports.getPenaltyN1(data) +\n      exports.getPenaltyN2(data) +\n      exports.getPenaltyN3(data) +\n      exports.getPenaltyN4(data)\n\n    // Undo previously applied mask\n    exports.applyMask(p, data)\n\n    if (penalty < lowerPenalty) {\n      lowerPenalty = penalty\n      bestPattern = p\n    }\n  }\n\n  return bestPattern\n}\n","const Utils = require('./utils')\nconst ECCode = require('./error-correction-code')\nconst ECLevel = require('./error-correction-level')\nconst Mode = require('./mode')\nconst VersionCheck = require('./version-check')\n\n// Generator polynomial used to encode version information\nconst G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0)\nconst G18_BCH = Utils.getBCHDigit(G18)\n\nfunction getBestVersionForDataLength (mode, length, errorCorrectionLevel) {\n  for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, mode)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\nfunction getReservedBitsCount (mode, version) {\n  // Character count indicator + mode indicator bits\n  return Mode.getCharCountIndicator(mode, version) + 4\n}\n\nfunction getTotalBitsFromDataArray (segments, version) {\n  let totalBits = 0\n\n  segments.forEach(function (data) {\n    const reservedBits = getReservedBitsCount(data.mode, version)\n    totalBits += reservedBits + data.getBitsLength()\n  })\n\n  return totalBits\n}\n\nfunction getBestVersionForMixedData (segments, errorCorrectionLevel) {\n  for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    const length = getTotalBitsFromDataArray(segments, currentVersion)\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, Mode.MIXED)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\n/**\n * Returns version number from a value.\n * If value is not a valid version, returns defaultValue\n *\n * @param  {Number|String} value        QR Code version\n * @param  {Number}        defaultValue Fallback value\n * @return {Number}                     QR Code version number\n */\nexports.from = function from (value, defaultValue) {\n  if (VersionCheck.isValid(value)) {\n    return parseInt(value, 10)\n  }\n\n  return defaultValue\n}\n\n/**\n * Returns how much data can be stored with the specified QR code version\n * and error correction level\n *\n * @param  {Number} version              QR Code version (1-40)\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Mode}   mode                 Data mode\n * @return {Number}                      Quantity of storable data\n */\nexports.getCapacity = function getCapacity (version, errorCorrectionLevel, mode) {\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  // Use Byte mode as default\n  if (typeof mode === 'undefined') mode = Mode.BYTE\n\n  // Total codewords for this QR code version (Data + Error correction)\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  if (mode === Mode.MIXED) return dataTotalCodewordsBits\n\n  const usableBits = dataTotalCodewordsBits - getReservedBitsCount(mode, version)\n\n  // Return max number of storable codewords\n  switch (mode) {\n    case Mode.NUMERIC:\n      return Math.floor((usableBits / 10) * 3)\n\n    case Mode.ALPHANUMERIC:\n      return Math.floor((usableBits / 11) * 2)\n\n    case Mode.KANJI:\n      return Math.floor(usableBits / 13)\n\n    case Mode.BYTE:\n    default:\n      return Math.floor(usableBits / 8)\n  }\n}\n\n/**\n * Returns the minimum version needed to contain the amount of data\n *\n * @param  {Segment} data                    Segment of data\n * @param  {Number} [errorCorrectionLevel=H] Error correction level\n * @param  {Mode} mode                       Data mode\n * @return {Number}                          QR Code version\n */\nexports.getBestVersionForData = function getBestVersionForData (data, errorCorrectionLevel) {\n  let seg\n\n  const ecl = ECLevel.from(errorCorrectionLevel, ECLevel.M)\n\n  if (Array.isArray(data)) {\n    if (data.length > 1) {\n      return getBestVersionForMixedData(data, ecl)\n    }\n\n    if (data.length === 0) {\n      return 1\n    }\n\n    seg = data[0]\n  } else {\n    seg = data\n  }\n\n  return getBestVersionForDataLength(seg.mode, seg.getLength(), ecl)\n}\n\n/**\n * Returns version information with relative error correction bits\n *\n * The version information is included in QR Code symbols of version 7 or larger.\n * It consists of an 18-bit sequence containing 6 data bits,\n * with 12 error correction bits calculated using the (18, 6) Golay code.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Encoded version info bits\n */\nexports.getEncodedBits = function getEncodedBits (version) {\n  if (!VersionCheck.isValid(version) || version < 7) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  let d = version << 12\n\n  while (Utils.getBCHDigit(d) - G18_BCH >= 0) {\n    d ^= (G18 << (Utils.getBCHDigit(d) - G18_BCH))\n  }\n\n  return (version << 12) | d\n}\n","const Mode = require('./mode')\n\n/**\n * Array of characters available in alphanumeric mode\n *\n * As per QR Code specification, to each character\n * is assigned a value from 0 to 44 which in this case coincides\n * with the array index\n *\n * @type {Array}\n */\nconst ALPHA_NUM_CHARS = [\n  '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n  'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n  'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n  ' ', '$', '%', '*', '+', '-', '.', '/', ':'\n]\n\nfunction AlphanumericData (data) {\n  this.mode = Mode.ALPHANUMERIC\n  this.data = data\n}\n\nAlphanumericData.getBitsLength = function getBitsLength (length) {\n  return 11 * Math.floor(length / 2) + 6 * (length % 2)\n}\n\nAlphanumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nAlphanumericData.prototype.getBitsLength = function getBitsLength () {\n  return AlphanumericData.getBitsLength(this.data.length)\n}\n\nAlphanumericData.prototype.write = function write (bitBuffer) {\n  let i\n\n  // Input data characters are divided into groups of two characters\n  // and encoded as 11-bit binary codes.\n  for (i = 0; i + 2 <= this.data.length; i += 2) {\n    // The character value of the first character is multiplied by 45\n    let value = ALPHA_NUM_CHARS.indexOf(this.data[i]) * 45\n\n    // The character value of the second digit is added to the product\n    value += ALPHA_NUM_CHARS.indexOf(this.data[i + 1])\n\n    // The sum is then stored as 11-bit binary number\n    bitBuffer.put(value, 11)\n  }\n\n  // If the number of input data characters is not a multiple of two,\n  // the character value of the final character is encoded as a 6-bit binary number.\n  if (this.data.length % 2) {\n    bitBuffer.put(ALPHA_NUM_CHARS.indexOf(this.data[i]), 6)\n  }\n}\n\nmodule.exports = AlphanumericData\n","/**\n * Check if QR Code version is valid\n *\n * @param  {Number}  version QR Code version\n * @return {Boolean}         true if valid version, false otherwise\n */\nexports.isValid = function isValid (version) {\n  return !isNaN(version) && version >= 1 && version <= 40\n}\n","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","const EXP_TABLE = new Uint8Array(512)\nconst LOG_TABLE = new Uint8Array(256)\n/**\n * Precompute the log and anti-log tables for faster computation later\n *\n * For each possible value in the galois field 2^8, we will pre-compute\n * the logarithm and anti-logarithm (exponential) of this value\n *\n * ref {@link https://en.wikiversity.org/wiki/Reed%E2%80%93Solomon_codes_for_coders#Introduction_to_mathematical_fields}\n */\n;(function initTables () {\n  let x = 1\n  for (let i = 0; i < 255; i++) {\n    EXP_TABLE[i] = x\n    LOG_TABLE[x] = i\n\n    x <<= 1 // multiply by 2\n\n    // The QR code specification says to use byte-wise modulo 100011101 arithmetic.\n    // This means that when a number is 256 or larger, it should be XORed with 0x11D.\n    if (x & 0x100) { // similar to x >= 256, but a lot faster (because 0x100 == 256)\n      x ^= 0x11D\n    }\n  }\n\n  // Optimization: double the size of the anti-log table so that we don't need to mod 255 to\n  // stay inside the bounds (because we will mainly use this table for the multiplication of\n  // two GF numbers, no more).\n  // @see {@link mul}\n  for (let i = 255; i < 512; i++) {\n    EXP_TABLE[i] = EXP_TABLE[i - 255]\n  }\n}())\n\n/**\n * Returns log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.log = function log (n) {\n  if (n < 1) throw new Error('log(' + n + ')')\n  return LOG_TABLE[n]\n}\n\n/**\n * Returns anti-log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.exp = function exp (n) {\n  return EXP_TABLE[n]\n}\n\n/**\n * Multiplies two number inside Galois Field\n *\n * @param  {Number} x\n * @param  {Number} y\n * @return {Number}\n */\nexports.mul = function mul (x, y) {\n  if (x === 0 || y === 0) return 0\n\n  // should be EXP_TABLE[(LOG_TABLE[x] + LOG_TABLE[y]) % 255] if EXP_TABLE wasn't oversized\n  // @see {@link initTables}\n  return EXP_TABLE[LOG_TABLE[x] + LOG_TABLE[y]]\n}\n","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message) && message.constructor !== Uint8Array)\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","const Mode = require('./mode')\n\nfunction NumericData (data) {\n  this.mode = Mode.NUMERIC\n  this.data = data.toString()\n}\n\nNumericData.getBitsLength = function getBitsLength (length) {\n  return 10 * Math.floor(length / 3) + ((length % 3) ? ((length % 3) * 3 + 1) : 0)\n}\n\nNumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nNumericData.prototype.getBitsLength = function getBitsLength () {\n  return NumericData.getBitsLength(this.data.length)\n}\n\nNumericData.prototype.write = function write (bitBuffer) {\n  let i, group, value\n\n  // The input data string is divided into groups of three digits,\n  // and each group is converted to its 10-bit binary equivalent.\n  for (i = 0; i + 3 <= this.data.length; i += 3) {\n    group = this.data.substr(i, 3)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, 10)\n  }\n\n  // If the number of input digits is not an exact multiple of three,\n  // the final one or two digits are converted to 4 or 7 bits respectively.\n  const remainingNum = this.data.length - i\n  if (remainingNum > 0) {\n    group = this.data.substr(i)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, remainingNum * 3 + 1)\n  }\n}\n\nmodule.exports = NumericData\n","/*\n * [js-sha512]{@link https://github.com/emn178/js-sha512}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2024\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var INPUT_ERROR = 'input is invalid type';\n  var FINALIZE_ERROR = 'finalize already called';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA512_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA512_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA512_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA512_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428A2F98, 0xD728AE22, 0x71374491, 0x23EF65CD,\n    0xB5C0FBCF, 0xEC4D3B2F, 0xE9B5DBA5, 0x8189DBBC,\n    0x3956C25B, 0xF348B538, 0x59F111F1, 0xB605D019,\n    0x923F82A4, 0xAF194F9B, 0xAB1C5ED5, 0xDA6D8118,\n    0xD807AA98, 0xA3030242, 0x12835B01, 0x45706FBE,\n    0x243185BE, 0x4EE4B28C, 0x550C7DC3, 0xD5FFB4E2,\n    0x72BE5D74, 0xF27B896F, 0x80DEB1FE, 0x3B1696B1,\n    0x9BDC06A7, 0x25C71235, 0xC19BF174, 0xCF692694,\n    0xE49B69C1, 0x9EF14AD2, 0xEFBE4786, 0x384F25E3,\n    0x0FC19DC6, 0x8B8CD5B5, 0x240CA1CC, 0x77AC9C65,\n    0x2DE92C6F, 0x592B0275, 0x4A7484AA, 0x6EA6E483,\n    0x5CB0A9DC, 0xBD41FBD4, 0x76F988DA, 0x831153B5,\n    0x983E5152, 0xEE66DFAB, 0xA831C66D, 0x2DB43210,\n    0xB00327C8, 0x98FB213F, 0xBF597FC7, 0xBEEF0EE4,\n    0xC6E00BF3, 0x3DA88FC2, 0xD5A79147, 0x930AA725,\n    0x06CA6351, 0xE003826F, 0x14292967, 0x0A0E6E70,\n    0x27B70A85, 0x46D22FFC, 0x2E1B2138, 0x5C26C926,\n    0x4D2C6DFC, 0x5AC42AED, 0x53380D13, 0x9D95B3DF,\n    0x650A7354, 0x8BAF63DE, 0x766A0ABB, 0x3C77B2A8,\n    0x81C2C92E, 0x47EDAEE6, 0x92722C85, 0x1482353B,\n    0xA2BFE8A1, 0x4CF10364, 0xA81A664B, 0xBC423001,\n    0xC24B8B70, 0xD0F89791, 0xC76C51A3, 0x0654BE30,\n    0xD192E819, 0xD6EF5218, 0xD6990624, 0x5565A910,\n    0xF40E3585, 0x5771202A, 0x106AA070, 0x32BBD1B8,\n    0x19A4C116, 0xB8D2D0C8, 0x1E376C08, 0x5141AB53,\n    0x2748774C, 0xDF8EEB99, 0x34B0BCB5, 0xE19B48A8,\n    0x391C0CB3, 0xC5C95A63, 0x4ED8AA4A, 0xE3418ACB,\n    0x5B9CCA4F, 0x7763E373, 0x682E6FF3, 0xD6B2B8A3,\n    0x748F82EE, 0x5DEFB2FC, 0x78A5636F, 0x43172F60,\n    0x84C87814, 0xA1F0AB72, 0x8CC70208, 0x1A6439EC,\n    0x90BEFFFA, 0x23631E28, 0xA4506CEB, 0xDE82BDE9,\n    0xBEF9A3F7, 0xB2C67915, 0xC67178F2, 0xE372532B,\n    0xCA273ECE, 0xEA26619C, 0xD186B8C7, 0x21C0C207,\n    0xEADA7DD6, 0xCDE0EB1E, 0xF57D4F7F, 0xEE6ED178,\n    0x06F067AA, 0x72176FBA, 0x0A637DC5, 0xA2C898A6,\n    0x113F9804, 0xBEF90DAE, 0x1B710B35, 0x131C471B,\n    0x28DB77F5, 0x23047D84, 0x32CAAB7B, 0x40C72493,\n    0x3C9EBE0A, 0x15C9BEBC, 0x431D67C4, 0x9C100D4C,\n    0x4CC5D4BE, 0xCB3E42B6, 0x597F299C, 0xFC657E2A,\n    0x5FCB6FAB, 0x3AD6FAEC, 0x6C44198C, 0x4A475817\n  ];\n\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  var isArray = Array.isArray;\n  if (root.JS_SHA512_NO_NODE_JS || !isArray) {\n    isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  var isView = ArrayBuffer.isView;\n  if (ARRAY_BUFFER && (root.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW || !isView)) {\n    isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  // [message: string, isString: bool]\n  var formatMessage = function (message) {\n    var type = typeof message;\n    if (type === 'string') {\n      return [message, true];\n    }\n    if (type !== 'object' || message === null) {\n      throw new Error(INPUT_ERROR);\n    }\n    if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n      return [new Uint8Array(message), false];\n    }\n    if (!isArray(message) && !isView(message)) {\n      throw new Error(INPUT_ERROR);\n    }\n    return [message, false];\n  }\n\n  var createOutputMethod = function (outputType, bits) {\n    return function (message) {\n      return new Sha512(bits, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (bits) {\n    var method = createOutputMethod('hex', bits);\n    method.create = function () {\n      return new Sha512(bits);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, bits);\n    }\n    return method;\n  };\n\n  var createHmacOutputMethod = function (outputType, bits) {\n    return function (key, message) {\n      return new HmacSha512(key, bits, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (bits) {\n    var method = createHmacOutputMethod('hex', bits);\n    method.create = function (key) {\n      return new HmacSha512(key, bits);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, bits);\n    }\n    return method;\n  };\n\n  function Sha512(bits, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[1] = blocks[2] = blocks[3] = blocks[4] =\n      blocks[5] = blocks[6] = blocks[7] = blocks[8] =\n      blocks[9] = blocks[10] = blocks[11] = blocks[12] =\n      blocks[13] = blocks[14] = blocks[15] = blocks[16] =\n      blocks[17] = blocks[18] = blocks[19] = blocks[20] =\n      blocks[21] = blocks[22] = blocks[23] = blocks[24] =\n      blocks[25] = blocks[26] = blocks[27] = blocks[28] =\n      blocks[29] = blocks[30] = blocks[31] = blocks[32] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (bits == 384) {\n      this.h0h = 0xCBBB9D5D;\n      this.h0l = 0xC1059ED8;\n      this.h1h = 0x629A292A;\n      this.h1l = 0x367CD507;\n      this.h2h = 0x9159015A;\n      this.h2l = 0x3070DD17;\n      this.h3h = 0x152FECD8;\n      this.h3l = 0xF70E5939;\n      this.h4h = 0x67332667;\n      this.h4l = 0xFFC00B31;\n      this.h5h = 0x8EB44A87;\n      this.h5l = 0x68581511;\n      this.h6h = 0xDB0C2E0D;\n      this.h6l = 0x64F98FA7;\n      this.h7h = 0x47B5481D;\n      this.h7l = 0xBEFA4FA4;\n    } else if (bits == 256) {\n      this.h0h = 0x22312194;\n      this.h0l = 0xFC2BF72C;\n      this.h1h = 0x9F555FA3;\n      this.h1l = 0xC84C64C2;\n      this.h2h = 0x2393B86B;\n      this.h2l = 0x6F53B151;\n      this.h3h = 0x96387719;\n      this.h3l = 0x5940EABD;\n      this.h4h = 0x96283EE2;\n      this.h4l = 0xA88EFFE3;\n      this.h5h = 0xBE5E1E25;\n      this.h5l = 0x53863992;\n      this.h6h = 0x2B0199FC;\n      this.h6l = 0x2C85B8AA;\n      this.h7h = 0x0EB72DDC;\n      this.h7l = 0x81C52CA2;\n    } else if (bits == 224) {\n      this.h0h = 0x8C3D37C8;\n      this.h0l = 0x19544DA2;\n      this.h1h = 0x73E19966;\n      this.h1l = 0x89DCD4D6;\n      this.h2h = 0x1DFAB7AE;\n      this.h2l = 0x32FF9C82;\n      this.h3h = 0x679DD514;\n      this.h3l = 0x582F9FCF;\n      this.h4h = 0x0F6D2B69;\n      this.h4l = 0x7BD44DA8;\n      this.h5h = 0x77E36F73;\n      this.h5l = 0x04C48942;\n      this.h6h = 0x3F9D85A8;\n      this.h6l = 0x6A1D36C8;\n      this.h7h = 0x1112E6AD;\n      this.h7l = 0x91D692A1;\n    } else { // 512\n      this.h0h = 0x6A09E667;\n      this.h0l = 0xF3BCC908;\n      this.h1h = 0xBB67AE85;\n      this.h1l = 0x84CAA73B;\n      this.h2h = 0x3C6EF372;\n      this.h2l = 0xFE94F82B;\n      this.h3h = 0xA54FF53A;\n      this.h3l = 0x5F1D36F1;\n      this.h4h = 0x510E527F;\n      this.h4l = 0xADE682D1;\n      this.h5h = 0x9B05688C;\n      this.h5l = 0x2B3E6C1F;\n      this.h6h = 0x1F83D9AB;\n      this.h6l = 0xFB41BD6B;\n      this.h7h = 0x5BE0CD19;\n      this.h7l = 0x137E2179;\n    }\n    this.bits = bits;\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n  }\n\n  Sha512.prototype.update = function (message) {\n    if (this.finalized) {\n      throw new Error(FINALIZE_ERROR);\n    }\n    var result = formatMessage(message);\n    message = result[0];\n    var isString = result[1];\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        this.block = blocks[1] = blocks[2] = blocks[3] = blocks[4] =\n        blocks[5] = blocks[6] = blocks[7] = blocks[8] =\n        blocks[9] = blocks[10] = blocks[11] = blocks[12] =\n        blocks[13] = blocks[14] = blocks[15] = blocks[16] =\n        blocks[17] = blocks[18] = blocks[19] = blocks[20] =\n        blocks[21] = blocks[22] = blocks[23] = blocks[24] =\n        blocks[25] = blocks[26] = blocks[27] = blocks[28] =\n        blocks[29] = blocks[30] = blocks[31] = blocks[32] = 0;\n      }\n\n      if(isString) {\n        for (i = this.start; index < length && i < 128; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >>> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >>> 2] |= (0xc0 | (code >>> 6)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >>> 2] |= (0xe0 | (code >>> 12)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >>> 2] |= (0xf0 | (code >>> 18)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      } else {\n        for (i = this.start; index < length && i < 128; ++index) {\n          blocks[i >>> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 128) {\n        this.block = blocks[32];\n        this.start = i - 128;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha512.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[32] = this.block;\n    blocks[i >>> 2] |= EXTRA[i & 3];\n    this.block = blocks[32];\n    if (i >= 112) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[1] = blocks[2] = blocks[3] = blocks[4] =\n      blocks[5] = blocks[6] = blocks[7] = blocks[8] =\n      blocks[9] = blocks[10] = blocks[11] = blocks[12] =\n      blocks[13] = blocks[14] = blocks[15] = blocks[16] =\n      blocks[17] = blocks[18] = blocks[19] = blocks[20] =\n      blocks[21] = blocks[22] = blocks[23] = blocks[24] =\n      blocks[25] = blocks[26] = blocks[27] = blocks[28] =\n      blocks[29] = blocks[30] = blocks[31] = blocks[32] = 0;\n    }\n    blocks[30] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[31] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha512.prototype.hash = function () {\n    var h0h = this.h0h, h0l = this.h0l, h1h = this.h1h, h1l = this.h1l,\n      h2h = this.h2h, h2l = this.h2l, h3h = this.h3h, h3l = this.h3l,\n      h4h = this.h4h, h4l = this.h4l, h5h = this.h5h, h5l = this.h5l,\n      h6h = this.h6h, h6l = this.h6l, h7h = this.h7h, h7l = this.h7l,\n      blocks = this.blocks, j, s0h, s0l, s1h, s1l, c1, c2, c3, c4,\n      abh, abl, dah, dal, cdh, cdl, bch, bcl,\n      majh, majl, t1h, t1l, t2h, t2l, chh, chl;\n\n    for (j = 32; j < 160; j += 2) {\n      t1h = blocks[j - 30];\n      t1l = blocks[j - 29];\n      s0h = ((t1h >>> 1) | (t1l << 31)) ^ ((t1h >>> 8) | (t1l << 24)) ^ (t1h >>> 7);\n      s0l = ((t1l >>> 1) | (t1h << 31)) ^ ((t1l >>> 8) | (t1h << 24)) ^ ((t1l >>> 7) | t1h << 25);\n\n      t1h = blocks[j - 4];\n      t1l = blocks[j - 3];\n      s1h = ((t1h >>> 19) | (t1l << 13)) ^ ((t1l >>> 29) | (t1h << 3)) ^ (t1h >>> 6);\n      s1l = ((t1l >>> 19) | (t1h << 13)) ^ ((t1h >>> 29) | (t1l << 3)) ^ ((t1l >>> 6) | t1h << 26);\n\n      t1h = blocks[j - 32];\n      t1l = blocks[j - 31];\n      t2h = blocks[j - 14];\n      t2l = blocks[j - 13];\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF) + (s0l & 0xFFFF) + (s1l & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (s0l >>> 16) + (s1l >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (s0h & 0xFFFF) + (s1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (s0h >>> 16) + (s1h >>> 16) + (c3 >>> 16);\n\n      blocks[j] = (c4 << 16) | (c3 & 0xFFFF);\n      blocks[j + 1] = (c2 << 16) | (c1 & 0xFFFF);\n    }\n\n    var ah = h0h, al = h0l, bh = h1h, bl = h1l, ch = h2h, cl = h2l, dh = h3h, dl = h3l, eh = h4h, el = h4l, fh = h5h, fl = h5l, gh = h6h, gl = h6l, hh = h7h, hl = h7l;\n    bch = bh & ch;\n    bcl = bl & cl;\n    for (j = 0; j < 160; j += 8) {\n      s0h = ((ah >>> 28) | (al << 4)) ^ ((al >>> 2) | (ah << 30)) ^ ((al >>> 7) | (ah << 25));\n      s0l = ((al >>> 28) | (ah << 4)) ^ ((ah >>> 2) | (al << 30)) ^ ((ah >>> 7) | (al << 25));\n\n      s1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((el >>> 9) | (eh << 23));\n      s1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((eh >>> 9) | (el << 23));\n\n      abh = ah & bh;\n      abl = al & bl;\n      majh = abh ^ (ah & ch) ^ bch;\n      majl = abl ^ (al & cl) ^ bcl;\n\n      chh = (eh & fh) ^ (~eh & gh);\n      chl = (el & fl) ^ (~el & gl);\n\n      t1h = blocks[j];\n      t1l = blocks[j + 1];\n      t2h = K[j];\n      t2l = K[j + 1];\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF) + (chl & 0xFFFF) + (s1l & 0xFFFF) + (hl & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (chl >>> 16) + (s1l >>> 16) + (hl >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (chh & 0xFFFF) + (s1h & 0xFFFF) + (hh & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (chh >>> 16) + (s1h >>> 16) + (hh >>> 16) + (c3 >>> 16);\n\n      t1h = (c4 << 16) | (c3 & 0xFFFF);\n      t1l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (majl & 0xFFFF) + (s0l & 0xFFFF);\n      c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n      c3 = (majh & 0xFFFF) + (s0h & 0xFFFF) + (c2 >>> 16);\n      c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n\n      t2h = (c4 << 16) | (c3 & 0xFFFF);\n      t2l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (dl & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (dl >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (dh & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (dh >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      hh = (c4 << 16) | (c3 & 0xFFFF);\n      hl = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      dh = (c4 << 16) | (c3 & 0xFFFF);\n      dl = (c2 << 16) | (c1 & 0xFFFF);\n\n      s0h = ((dh >>> 28) | (dl << 4)) ^ ((dl >>> 2) | (dh << 30)) ^ ((dl >>> 7) | (dh << 25));\n      s0l = ((dl >>> 28) | (dh << 4)) ^ ((dh >>> 2) | (dl << 30)) ^ ((dh >>> 7) | (dl << 25));\n\n      s1h = ((hh >>> 14) | (hl << 18)) ^ ((hh >>> 18) | (hl << 14)) ^ ((hl >>> 9) | (hh << 23));\n      s1l = ((hl >>> 14) | (hh << 18)) ^ ((hl >>> 18) | (hh << 14)) ^ ((hh >>> 9) | (hl << 23));\n\n      dah = dh & ah;\n      dal = dl & al;\n      majh = dah ^ (dh & bh) ^ abh;\n      majl = dal ^ (dl & bl) ^ abl;\n\n      chh = (hh & eh) ^ (~hh & fh);\n      chl = (hl & el) ^ (~hl & fl);\n\n      t1h = blocks[j + 2];\n      t1l = blocks[j + 3];\n      t2h = K[j + 2];\n      t2l = K[j + 3];\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF) + (chl & 0xFFFF) + (s1l & 0xFFFF) + (gl & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (chl >>> 16) + (s1l >>> 16) + (gl >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (chh & 0xFFFF) + (s1h & 0xFFFF) + (gh & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (chh >>> 16) + (s1h >>> 16) + (gh >>> 16) + (c3 >>> 16);\n\n      t1h = (c4 << 16) | (c3 & 0xFFFF);\n      t1l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (majl & 0xFFFF) + (s0l & 0xFFFF);\n      c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n      c3 = (majh & 0xFFFF) + (s0h & 0xFFFF) + (c2 >>> 16);\n      c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n\n      t2h = (c4 << 16) | (c3 & 0xFFFF);\n      t2l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (cl & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (cl >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (ch & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (ch >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      gh = (c4 << 16) | (c3 & 0xFFFF);\n      gl = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      ch = (c4 << 16) | (c3 & 0xFFFF);\n      cl = (c2 << 16) | (c1 & 0xFFFF);\n\n      s0h = ((ch >>> 28) | (cl << 4)) ^ ((cl >>> 2) | (ch << 30)) ^ ((cl >>> 7) | (ch << 25));\n      s0l = ((cl >>> 28) | (ch << 4)) ^ ((ch >>> 2) | (cl << 30)) ^ ((ch >>> 7) | (cl << 25));\n\n      s1h = ((gh >>> 14) | (gl << 18)) ^ ((gh >>> 18) | (gl << 14)) ^ ((gl >>> 9) | (gh << 23));\n      s1l = ((gl >>> 14) | (gh << 18)) ^ ((gl >>> 18) | (gh << 14)) ^ ((gh >>> 9) | (gl << 23));\n\n      cdh = ch & dh;\n      cdl = cl & dl;\n      majh = cdh ^ (ch & ah) ^ dah;\n      majl = cdl ^ (cl & al) ^ dal;\n\n      chh = (gh & hh) ^ (~gh & eh);\n      chl = (gl & hl) ^ (~gl & el);\n\n      t1h = blocks[j + 4];\n      t1l = blocks[j + 5];\n      t2h = K[j + 4];\n      t2l = K[j + 5];\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF) + (chl & 0xFFFF) + (s1l & 0xFFFF) + (fl & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (chl >>> 16) + (s1l >>> 16) + (fl >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (chh & 0xFFFF) + (s1h & 0xFFFF) + (fh & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (chh >>> 16) + (s1h >>> 16) + (fh >>> 16) + (c3 >>> 16);\n\n      t1h = (c4 << 16) | (c3 & 0xFFFF);\n      t1l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (majl & 0xFFFF) + (s0l & 0xFFFF);\n      c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n      c3 = (majh & 0xFFFF) + (s0h & 0xFFFF) + (c2 >>> 16);\n      c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n\n      t2h = (c4 << 16) | (c3 & 0xFFFF);\n      t2l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (bl & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (bl >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (bh & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (bh >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      fh = (c4 << 16) | (c3 & 0xFFFF);\n      fl = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      bh = (c4 << 16) | (c3 & 0xFFFF);\n      bl = (c2 << 16) | (c1 & 0xFFFF);\n\n      s0h = ((bh >>> 28) | (bl << 4)) ^ ((bl >>> 2) | (bh << 30)) ^ ((bl >>> 7) | (bh << 25));\n      s0l = ((bl >>> 28) | (bh << 4)) ^ ((bh >>> 2) | (bl << 30)) ^ ((bh >>> 7) | (bl << 25));\n\n      s1h = ((fh >>> 14) | (fl << 18)) ^ ((fh >>> 18) | (fl << 14)) ^ ((fl >>> 9) | (fh << 23));\n      s1l = ((fl >>> 14) | (fh << 18)) ^ ((fl >>> 18) | (fh << 14)) ^ ((fh >>> 9) | (fl << 23));\n\n      bch = bh & ch;\n      bcl = bl & cl;\n      majh = bch ^ (bh & dh) ^ cdh;\n      majl = bcl ^ (bl & dl) ^ cdl;\n\n      chh = (fh & gh) ^ (~fh & hh);\n      chl = (fl & gl) ^ (~fl & hl);\n\n      t1h = blocks[j + 6];\n      t1l = blocks[j + 7];\n      t2h = K[j + 6];\n      t2l = K[j + 7];\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF) + (chl & 0xFFFF) + (s1l & 0xFFFF) + (el & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (chl >>> 16) + (s1l >>> 16) + (el >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (chh & 0xFFFF) + (s1h & 0xFFFF) + (eh & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (chh >>> 16) + (s1h >>> 16) + (eh >>> 16) + (c3 >>> 16);\n\n      t1h = (c4 << 16) | (c3 & 0xFFFF);\n      t1l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (majl & 0xFFFF) + (s0l & 0xFFFF);\n      c2 = (majl >>> 16) + (s0l >>> 16) + (c1 >>> 16);\n      c3 = (majh & 0xFFFF) + (s0h & 0xFFFF) + (c2 >>> 16);\n      c4 = (majh >>> 16) + (s0h >>> 16) + (c3 >>> 16);\n\n      t2h = (c4 << 16) | (c3 & 0xFFFF);\n      t2l = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (al & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (al >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (ah & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (ah >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      eh = (c4 << 16) | (c3 & 0xFFFF);\n      el = (c2 << 16) | (c1 & 0xFFFF);\n\n      c1 = (t2l & 0xFFFF) + (t1l & 0xFFFF);\n      c2 = (t2l >>> 16) + (t1l >>> 16) + (c1 >>> 16);\n      c3 = (t2h & 0xFFFF) + (t1h & 0xFFFF) + (c2 >>> 16);\n      c4 = (t2h >>> 16) + (t1h >>> 16) + (c3 >>> 16);\n\n      ah = (c4 << 16) | (c3 & 0xFFFF);\n      al = (c2 << 16) | (c1 & 0xFFFF);\n    }\n\n    c1 = (h0l & 0xFFFF) + (al & 0xFFFF);\n    c2 = (h0l >>> 16) + (al >>> 16) + (c1 >>> 16);\n    c3 = (h0h & 0xFFFF) + (ah & 0xFFFF) + (c2 >>> 16);\n    c4 = (h0h >>> 16) + (ah >>> 16) + (c3 >>> 16);\n\n    this.h0h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h0l = (c2 << 16) | (c1 & 0xFFFF);\n\n    c1 = (h1l & 0xFFFF) + (bl & 0xFFFF);\n    c2 = (h1l >>> 16) + (bl >>> 16) + (c1 >>> 16);\n    c3 = (h1h & 0xFFFF) + (bh & 0xFFFF) + (c2 >>> 16);\n    c4 = (h1h >>> 16) + (bh >>> 16) + (c3 >>> 16);\n\n    this.h1h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h1l = (c2 << 16) | (c1 & 0xFFFF);\n\n    c1 = (h2l & 0xFFFF) + (cl & 0xFFFF);\n    c2 = (h2l >>> 16) + (cl >>> 16) + (c1 >>> 16);\n    c3 = (h2h & 0xFFFF) + (ch & 0xFFFF) + (c2 >>> 16);\n    c4 = (h2h >>> 16) + (ch >>> 16) + (c3 >>> 16);\n\n    this.h2h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h2l = (c2 << 16) | (c1 & 0xFFFF);\n\n    c1 = (h3l & 0xFFFF) + (dl & 0xFFFF);\n    c2 = (h3l >>> 16) + (dl >>> 16) + (c1 >>> 16);\n    c3 = (h3h & 0xFFFF) + (dh & 0xFFFF) + (c2 >>> 16);\n    c4 = (h3h >>> 16) + (dh >>> 16) + (c3 >>> 16);\n\n    this.h3h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h3l = (c2 << 16) | (c1 & 0xFFFF);\n\n    c1 = (h4l & 0xFFFF) + (el & 0xFFFF);\n    c2 = (h4l >>> 16) + (el >>> 16) + (c1 >>> 16);\n    c3 = (h4h & 0xFFFF) + (eh & 0xFFFF) + (c2 >>> 16);\n    c4 = (h4h >>> 16) + (eh >>> 16) + (c3 >>> 16);\n\n    this.h4h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h4l = (c2 << 16) | (c1 & 0xFFFF);\n\n    c1 = (h5l & 0xFFFF) + (fl & 0xFFFF);\n    c2 = (h5l >>> 16) + (fl >>> 16) + (c1 >>> 16);\n    c3 = (h5h & 0xFFFF) + (fh & 0xFFFF) + (c2 >>> 16);\n    c4 = (h5h >>> 16) + (fh >>> 16) + (c3 >>> 16);\n\n    this.h5h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h5l = (c2 << 16) | (c1 & 0xFFFF);\n\n    c1 = (h6l & 0xFFFF) + (gl & 0xFFFF);\n    c2 = (h6l >>> 16) + (gl >>> 16) + (c1 >>> 16);\n    c3 = (h6h & 0xFFFF) + (gh & 0xFFFF) + (c2 >>> 16);\n    c4 = (h6h >>> 16) + (gh >>> 16) + (c3 >>> 16);\n\n    this.h6h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h6l = (c2 << 16) | (c1 & 0xFFFF);\n\n    c1 = (h7l & 0xFFFF) + (hl & 0xFFFF);\n    c2 = (h7l >>> 16) + (hl >>> 16) + (c1 >>> 16);\n    c3 = (h7h & 0xFFFF) + (hh & 0xFFFF) + (c2 >>> 16);\n    c4 = (h7h >>> 16) + (hh >>> 16) + (c3 >>> 16);\n\n    this.h7h = (c4 << 16) | (c3 & 0xFFFF);\n    this.h7l = (c2 << 16) | (c1 & 0xFFFF);\n  };\n\n  Sha512.prototype.hex = function () {\n    this.finalize();\n\n    var h0h = this.h0h, h0l = this.h0l, h1h = this.h1h, h1l = this.h1l,\n      h2h = this.h2h, h2l = this.h2l, h3h = this.h3h, h3l = this.h3l,\n      h4h = this.h4h, h4l = this.h4l, h5h = this.h5h, h5l = this.h5l,\n      h6h = this.h6h, h6l = this.h6l, h7h = this.h7h, h7l = this.h7l,\n      bits = this.bits;\n\n    var hex = HEX_CHARS[(h0h >>> 28) & 0x0F] + HEX_CHARS[(h0h >>> 24) & 0x0F] +\n      HEX_CHARS[(h0h >>> 20) & 0x0F] + HEX_CHARS[(h0h >>> 16) & 0x0F] +\n      HEX_CHARS[(h0h >>> 12) & 0x0F] + HEX_CHARS[(h0h >>> 8) & 0x0F] +\n      HEX_CHARS[(h0h >>> 4) & 0x0F] + HEX_CHARS[h0h & 0x0F] +\n      HEX_CHARS[(h0l >>> 28) & 0x0F] + HEX_CHARS[(h0l >>> 24) & 0x0F] +\n      HEX_CHARS[(h0l >>> 20) & 0x0F] + HEX_CHARS[(h0l >>> 16) & 0x0F] +\n      HEX_CHARS[(h0l >>> 12) & 0x0F] + HEX_CHARS[(h0l >>> 8) & 0x0F] +\n      HEX_CHARS[(h0l >>> 4) & 0x0F] + HEX_CHARS[h0l & 0x0F] +\n      HEX_CHARS[(h1h >>> 28) & 0x0F] + HEX_CHARS[(h1h >>> 24) & 0x0F] +\n      HEX_CHARS[(h1h >>> 20) & 0x0F] + HEX_CHARS[(h1h >>> 16) & 0x0F] +\n      HEX_CHARS[(h1h >>> 12) & 0x0F] + HEX_CHARS[(h1h >>> 8) & 0x0F] +\n      HEX_CHARS[(h1h >>> 4) & 0x0F] + HEX_CHARS[h1h & 0x0F] +\n      HEX_CHARS[(h1l >>> 28) & 0x0F] + HEX_CHARS[(h1l >>> 24) & 0x0F] +\n      HEX_CHARS[(h1l >>> 20) & 0x0F] + HEX_CHARS[(h1l >>> 16) & 0x0F] +\n      HEX_CHARS[(h1l >>> 12) & 0x0F] + HEX_CHARS[(h1l >>> 8) & 0x0F] +\n      HEX_CHARS[(h1l >>> 4) & 0x0F] + HEX_CHARS[h1l & 0x0F] +\n      HEX_CHARS[(h2h >>> 28) & 0x0F] + HEX_CHARS[(h2h >>> 24) & 0x0F] +\n      HEX_CHARS[(h2h >>> 20) & 0x0F] + HEX_CHARS[(h2h >>> 16) & 0x0F] +\n      HEX_CHARS[(h2h >>> 12) & 0x0F] + HEX_CHARS[(h2h >>> 8) & 0x0F] +\n      HEX_CHARS[(h2h >>> 4) & 0x0F] + HEX_CHARS[h2h & 0x0F] +\n      HEX_CHARS[(h2l >>> 28) & 0x0F] + HEX_CHARS[(h2l >>> 24) & 0x0F] +\n      HEX_CHARS[(h2l >>> 20) & 0x0F] + HEX_CHARS[(h2l >>> 16) & 0x0F] +\n      HEX_CHARS[(h2l >>> 12) & 0x0F] + HEX_CHARS[(h2l >>> 8) & 0x0F] +\n      HEX_CHARS[(h2l >>> 4) & 0x0F] + HEX_CHARS[h2l & 0x0F] +\n      HEX_CHARS[(h3h >>> 28) & 0x0F] + HEX_CHARS[(h3h >>> 24) & 0x0F] +\n      HEX_CHARS[(h3h >>> 20) & 0x0F] + HEX_CHARS[(h3h >>> 16) & 0x0F] +\n      HEX_CHARS[(h3h >>> 12) & 0x0F] + HEX_CHARS[(h3h >>> 8) & 0x0F] +\n      HEX_CHARS[(h3h >>> 4) & 0x0F] + HEX_CHARS[h3h & 0x0F];\n    if (bits >= 256) {\n      hex += HEX_CHARS[(h3l >>> 28) & 0x0F] + HEX_CHARS[(h3l >>> 24) & 0x0F] +\n        HEX_CHARS[(h3l >>> 20) & 0x0F] + HEX_CHARS[(h3l >>> 16) & 0x0F] +\n        HEX_CHARS[(h3l >>> 12) & 0x0F] + HEX_CHARS[(h3l >>> 8) & 0x0F] +\n        HEX_CHARS[(h3l >>> 4) & 0x0F] + HEX_CHARS[h3l & 0x0F];\n    }\n    if (bits >= 384) {\n      hex += HEX_CHARS[(h4h >>> 28) & 0x0F] + HEX_CHARS[(h4h >>> 24) & 0x0F] +\n        HEX_CHARS[(h4h >>> 20) & 0x0F] + HEX_CHARS[(h4h >>> 16) & 0x0F] +\n        HEX_CHARS[(h4h >>> 12) & 0x0F] + HEX_CHARS[(h4h >>> 8) & 0x0F] +\n        HEX_CHARS[(h4h >>> 4) & 0x0F] + HEX_CHARS[h4h & 0x0F] +\n        HEX_CHARS[(h4l >>> 28) & 0x0F] + HEX_CHARS[(h4l >>> 24) & 0x0F] +\n        HEX_CHARS[(h4l >>> 20) & 0x0F] + HEX_CHARS[(h4l >>> 16) & 0x0F] +\n        HEX_CHARS[(h4l >>> 12) & 0x0F] + HEX_CHARS[(h4l >>> 8) & 0x0F] +\n        HEX_CHARS[(h4l >>> 4) & 0x0F] + HEX_CHARS[h4l & 0x0F] +\n        HEX_CHARS[(h5h >>> 28) & 0x0F] + HEX_CHARS[(h5h >>> 24) & 0x0F] +\n        HEX_CHARS[(h5h >>> 20) & 0x0F] + HEX_CHARS[(h5h >>> 16) & 0x0F] +\n        HEX_CHARS[(h5h >>> 12) & 0x0F] + HEX_CHARS[(h5h >>> 8) & 0x0F] +\n        HEX_CHARS[(h5h >>> 4) & 0x0F] + HEX_CHARS[h5h & 0x0F] +\n        HEX_CHARS[(h5l >>> 28) & 0x0F] + HEX_CHARS[(h5l >>> 24) & 0x0F] +\n        HEX_CHARS[(h5l >>> 20) & 0x0F] + HEX_CHARS[(h5l >>> 16) & 0x0F] +\n        HEX_CHARS[(h5l >>> 12) & 0x0F] + HEX_CHARS[(h5l >>> 8) & 0x0F] +\n        HEX_CHARS[(h5l >>> 4) & 0x0F] + HEX_CHARS[h5l & 0x0F];\n    }\n    if (bits == 512) {\n      hex += HEX_CHARS[(h6h >>> 28) & 0x0F] + HEX_CHARS[(h6h >>> 24) & 0x0F] +\n        HEX_CHARS[(h6h >>> 20) & 0x0F] + HEX_CHARS[(h6h >>> 16) & 0x0F] +\n        HEX_CHARS[(h6h >>> 12) & 0x0F] + HEX_CHARS[(h6h >>> 8) & 0x0F] +\n        HEX_CHARS[(h6h >>> 4) & 0x0F] + HEX_CHARS[h6h & 0x0F] +\n        HEX_CHARS[(h6l >>> 28) & 0x0F] + HEX_CHARS[(h6l >>> 24) & 0x0F] +\n        HEX_CHARS[(h6l >>> 20) & 0x0F] + HEX_CHARS[(h6l >>> 16) & 0x0F] +\n        HEX_CHARS[(h6l >>> 12) & 0x0F] + HEX_CHARS[(h6l >>> 8) & 0x0F] +\n        HEX_CHARS[(h6l >>> 4) & 0x0F] + HEX_CHARS[h6l & 0x0F] +\n        HEX_CHARS[(h7h >>> 28) & 0x0F] + HEX_CHARS[(h7h >>> 24) & 0x0F] +\n        HEX_CHARS[(h7h >>> 20) & 0x0F] + HEX_CHARS[(h7h >>> 16) & 0x0F] +\n        HEX_CHARS[(h7h >>> 12) & 0x0F] + HEX_CHARS[(h7h >>> 8) & 0x0F] +\n        HEX_CHARS[(h7h >>> 4) & 0x0F] + HEX_CHARS[h7h & 0x0F] +\n        HEX_CHARS[(h7l >>> 28) & 0x0F] + HEX_CHARS[(h7l >>> 24) & 0x0F] +\n        HEX_CHARS[(h7l >>> 20) & 0x0F] + HEX_CHARS[(h7l >>> 16) & 0x0F] +\n        HEX_CHARS[(h7l >>> 12) & 0x0F] + HEX_CHARS[(h7l >>> 8) & 0x0F] +\n        HEX_CHARS[(h7l >>> 4) & 0x0F] + HEX_CHARS[h7l & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha512.prototype.toString = Sha512.prototype.hex;\n\n  Sha512.prototype.digest = function () {\n    this.finalize();\n\n    var h0h = this.h0h, h0l = this.h0l, h1h = this.h1h, h1l = this.h1l,\n      h2h = this.h2h, h2l = this.h2l, h3h = this.h3h, h3l = this.h3l,\n      h4h = this.h4h, h4l = this.h4l, h5h = this.h5h, h5l = this.h5l,\n      h6h = this.h6h, h6l = this.h6l, h7h = this.h7h, h7l = this.h7l,\n      bits = this.bits;\n\n    var arr = [\n      (h0h >>> 24) & 0xFF, (h0h >>> 16) & 0xFF, (h0h >>> 8) & 0xFF, h0h & 0xFF,\n      (h0l >>> 24) & 0xFF, (h0l >>> 16) & 0xFF, (h0l >>> 8) & 0xFF, h0l & 0xFF,\n      (h1h >>> 24) & 0xFF, (h1h >>> 16) & 0xFF, (h1h >>> 8) & 0xFF, h1h & 0xFF,\n      (h1l >>> 24) & 0xFF, (h1l >>> 16) & 0xFF, (h1l >>> 8) & 0xFF, h1l & 0xFF,\n      (h2h >>> 24) & 0xFF, (h2h >>> 16) & 0xFF, (h2h >>> 8) & 0xFF, h2h & 0xFF,\n      (h2l >>> 24) & 0xFF, (h2l >>> 16) & 0xFF, (h2l >>> 8) & 0xFF, h2l & 0xFF,\n      (h3h >>> 24) & 0xFF, (h3h >>> 16) & 0xFF, (h3h >>> 8) & 0xFF, h3h & 0xFF\n    ];\n\n    if (bits >= 256) {\n      arr.push((h3l >>> 24) & 0xFF, (h3l >>> 16) & 0xFF, (h3l >>> 8) & 0xFF, h3l & 0xFF);\n    }\n    if (bits >= 384) {\n      arr.push(\n        (h4h >>> 24) & 0xFF, (h4h >>> 16) & 0xFF, (h4h >>> 8) & 0xFF, h4h & 0xFF,\n        (h4l >>> 24) & 0xFF, (h4l >>> 16) & 0xFF, (h4l >>> 8) & 0xFF, h4l & 0xFF,\n        (h5h >>> 24) & 0xFF, (h5h >>> 16) & 0xFF, (h5h >>> 8) & 0xFF, h5h & 0xFF,\n        (h5l >>> 24) & 0xFF, (h5l >>> 16) & 0xFF, (h5l >>> 8) & 0xFF, h5l & 0xFF\n      );\n    }\n    if (bits == 512) {\n      arr.push(\n        (h6h >>> 24) & 0xFF, (h6h >>> 16) & 0xFF, (h6h >>> 8) & 0xFF, h6h & 0xFF,\n        (h6l >>> 24) & 0xFF, (h6l >>> 16) & 0xFF, (h6l >>> 8) & 0xFF, h6l & 0xFF,\n        (h7h >>> 24) & 0xFF, (h7h >>> 16) & 0xFF, (h7h >>> 8) & 0xFF, h7h & 0xFF,\n        (h7l >>> 24) & 0xFF, (h7l >>> 16) & 0xFF, (h7l >>> 8) & 0xFF, h7l & 0xFF\n      );\n    }\n    return arr;\n  };\n\n  Sha512.prototype.array = Sha512.prototype.digest;\n\n  Sha512.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var bits = this.bits;\n    var buffer = new ArrayBuffer(bits / 8);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0h);\n    dataView.setUint32(4, this.h0l);\n    dataView.setUint32(8, this.h1h);\n    dataView.setUint32(12, this.h1l);\n    dataView.setUint32(16, this.h2h);\n    dataView.setUint32(20, this.h2l);\n    dataView.setUint32(24, this.h3h);\n\n    if (bits >= 256) {\n      dataView.setUint32(28, this.h3l);\n    }\n    if (bits >= 384) {\n      dataView.setUint32(32, this.h4h);\n      dataView.setUint32(36, this.h4l);\n      dataView.setUint32(40, this.h5h);\n      dataView.setUint32(44, this.h5l);\n    }\n    if (bits == 512) {\n      dataView.setUint32(48, this.h6h);\n      dataView.setUint32(52, this.h6l);\n      dataView.setUint32(56, this.h7h);\n      dataView.setUint32(60, this.h7l);\n    }\n    return buffer;\n  };\n\n  Sha512.prototype.clone = function () {\n    var hash = new Sha512(this.bits, false);\n    this.copyTo(hash);\n    return hash;\n  };\n\n  Sha512.prototype.copyTo = function (hash) {\n    var i = 0, attrs = [\n      'h0h', 'h0l', 'h1h', 'h1l', 'h2h', 'h2l', 'h3h', 'h3l', 'h4h', 'h4l', 'h5h', 'h5l', 'h6h', 'h6l', 'h7h', 'h7l',\n      'start', 'bytes', 'hBytes', 'finalized', 'hashed', 'lastByteIndex'\n    ];\n    for (i = 0; i < attrs.length; ++i) {\n      hash[attrs[i]] = this[attrs[i]];\n    }\n    for (i = 0; i < this.blocks.length; ++i) {\n      hash.blocks[i] = this.blocks[i];\n    }\n  };\n\n  function HmacSha512(key, bits, sharedMemory) {\n    var i, result = formatMessage(key);\n    key = result[0];\n    if (result[1]) {\n      var bytes = [], length = key.length, index = 0, code;\n      for (var i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >>> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >>> 12));\n          bytes[index++] = (0x80 | ((code >>> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >>> 18));\n          bytes[index++] = (0x80 | ((code >>> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >>> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    }\n\n    if (key.length > 128) {\n      key = (new Sha512(bits, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (var i = 0; i < 128; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha512.call(this, bits, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha512.prototype = new Sha512();\n\n  HmacSha512.prototype.finalize = function () {\n    Sha512.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha512.call(this, this.bits, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha512.prototype.finalize.call(this);\n    }\n  };\n\n  HmacSha512.prototype.clone = function () {\n    var hash = new HmacSha512([], this.bits, false);\n    this.copyTo(hash);\n    hash.inner = this.inner;\n    for (var i = 0; i < this.oKeyPad.length; ++i) {\n      hash.oKeyPad[i] = this.oKeyPad[i];\n    }\n    return hash;\n  };\n\n  var exports = createMethod(512);\n  exports.sha512 = exports;\n  exports.sha384 = createMethod(384);\n  exports.sha512_256 = createMethod(256);\n  exports.sha512_224 = createMethod(224);\n  exports.sha512.hmac = createHmacMethod(512);\n  exports.sha384.hmac = createHmacMethod(384);\n  exports.sha512_256.hmac = createHmacMethod(256);\n  exports.sha512_224.hmac = createHmacMethod(224);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha512 = exports.sha512;\n    root.sha384 = exports.sha384;\n    root.sha512_256 = exports.sha512_256;\n    root.sha512_224 = exports.sha512_224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","const Utils = require('./utils')\n\nconst G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0)\nconst G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1)\nconst G15_BCH = Utils.getBCHDigit(G15)\n\n/**\n * Returns format information with relative error correction bits\n *\n * The format information is a 15-bit sequence containing 5 data bits,\n * with 10 error correction bits calculated using the (15, 5) BCH code.\n *\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Number} mask                 Mask pattern\n * @return {Number}                      Encoded format information bits\n */\nexports.getEncodedBits = function getEncodedBits (errorCorrectionLevel, mask) {\n  const data = ((errorCorrectionLevel.bit << 3) | mask)\n  let d = data << 10\n\n  while (Utils.getBCHDigit(d) - G15_BCH >= 0) {\n    d ^= (G15 << (Utils.getBCHDigit(d) - G15_BCH))\n  }\n\n  // xor final data with mask pattern in order to ensure that\n  // no combination of Error Correction Level and data mask pattern\n  // will result in an all-zero data string\n  return ((data << 10) | d) ^ G15_MASK\n}\n","'use strict';\nmodule.exports = (function()\n{\n  function _min(d0, d1, d2, bx, ay)\n  {\n    return d0 < d1 || d2 < d1\n        ? d0 > d2\n            ? d2 + 1\n            : d0 + 1\n        : bx === ay\n            ? d1\n            : d1 + 1;\n  }\n\n  return function(a, b)\n  {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = (x += 4);\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n})();\n\n","const GF = require('./galois-field')\n\n/**\n * Multiplies two polynomials inside Galois Field\n *\n * @param  {Uint8Array} p1 Polynomial\n * @param  {Uint8Array} p2 Polynomial\n * @return {Uint8Array}    Product of p1 and p2\n */\nexports.mul = function mul (p1, p2) {\n  const coeff = new Uint8Array(p1.length + p2.length - 1)\n\n  for (let i = 0; i < p1.length; i++) {\n    for (let j = 0; j < p2.length; j++) {\n      coeff[i + j] ^= GF.mul(p1[i], p2[j])\n    }\n  }\n\n  return coeff\n}\n\n/**\n * Calculate the remainder of polynomials division\n *\n * @param  {Uint8Array} divident Polynomial\n * @param  {Uint8Array} divisor  Polynomial\n * @return {Uint8Array}          Remainder\n */\nexports.mod = function mod (divident, divisor) {\n  let result = new Uint8Array(divident)\n\n  while ((result.length - divisor.length) >= 0) {\n    const coeff = result[0]\n\n    for (let i = 0; i < divisor.length; i++) {\n      result[i] ^= GF.mul(divisor[i], coeff)\n    }\n\n    // remove all zeros from buffer head\n    let offset = 0\n    while (offset < result.length && result[offset] === 0) offset++\n    result = result.slice(offset)\n  }\n\n  return result\n}\n\n/**\n * Generate an irreducible generator polynomial of specified degree\n * (used by Reed-Solomon encoder)\n *\n * @param  {Number} degree Degree of the generator polynomial\n * @return {Uint8Array}    Buffer containing polynomial coefficients\n */\nexports.generateECPolynomial = function generateECPolynomial (degree) {\n  let poly = new Uint8Array([1])\n  for (let i = 0; i < degree; i++) {\n    poly = exports.mul(poly, new Uint8Array([1, GF.exp(i)]))\n  }\n\n  return poly\n}\n","const Polynomial = require('./polynomial')\n\nfunction ReedSolomonEncoder (degree) {\n  this.genPoly = undefined\n  this.degree = degree\n\n  if (this.degree) this.initialize(this.degree)\n}\n\n/**\n * Initialize the encoder.\n * The input param should correspond to the number of error correction codewords.\n *\n * @param  {Number} degree\n */\nReedSolomonEncoder.prototype.initialize = function initialize (degree) {\n  // create an irreducible generator polynomial\n  this.degree = degree\n  this.genPoly = Polynomial.generateECPolynomial(this.degree)\n}\n\n/**\n * Encodes a chunk of data\n *\n * @param  {Uint8Array} data Buffer containing input data\n * @return {Uint8Array}      Buffer containing encoded data\n */\nReedSolomonEncoder.prototype.encode = function encode (data) {\n  if (!this.genPoly) {\n    throw new Error('Encoder not initialized')\n  }\n\n  // Calculate EC for this data block\n  // extends data size to data+genPoly size\n  const paddedData = new Uint8Array(data.length + this.degree)\n  paddedData.set(data)\n\n  // The error correction codewords are the remainder after dividing the data codewords\n  // by a generator polynomial\n  const remainder = Polynomial.mod(paddedData, this.genPoly)\n\n  // return EC data blocks (last n byte, where n is the degree of genPoly)\n  // If coefficients number in remainder are less than genPoly degree,\n  // pad with 0s to the left to reach the needed number of coefficients\n  const start = this.degree - remainder.length\n  if (start > 0) {\n    const buff = new Uint8Array(this.degree)\n    buff.set(remainder, start)\n\n    return buff\n  }\n\n  return remainder\n}\n\nmodule.exports = ReedSolomonEncoder\n","const Mode = require('./mode')\nconst Utils = require('./utils')\n\nfunction KanjiData (data) {\n  this.mode = Mode.KANJI\n  this.data = data\n}\n\nKanjiData.getBitsLength = function getBitsLength (length) {\n  return length * 13\n}\n\nKanjiData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nKanjiData.prototype.getBitsLength = function getBitsLength () {\n  return KanjiData.getBitsLength(this.data.length)\n}\n\nKanjiData.prototype.write = function (bitBuffer) {\n  let i\n\n  // In the Shift JIS system, Kanji characters are represented by a two byte combination.\n  // These byte values are shifted from the JIS X 0208 values.\n  // JIS X 0208 gives details of the shift coded representation.\n  for (i = 0; i < this.data.length; i++) {\n    let value = Utils.toSJIS(this.data[i])\n\n    // For characters with Shift JIS values from 0x8140 to 0x9FFC:\n    if (value >= 0x8140 && value <= 0x9FFC) {\n      // Subtract 0x8140 from Shift JIS value\n      value -= 0x8140\n\n    // For characters with Shift JIS values from 0xE040 to 0xEBBF\n    } else if (value >= 0xE040 && value <= 0xEBBF) {\n      // Subtract 0xC140 from Shift JIS value\n      value -= 0xC140\n    } else {\n      throw new Error(\n        'Invalid SJIS character: ' + this.data[i] + '\\n' +\n        'Make sure your charset is UTF-8')\n    }\n\n    // Multiply most significant byte of result by 0xC0\n    // and add least significant byte to product\n    value = (((value >>> 8) & 0xff) * 0xC0) + (value & 0xff)\n\n    // Convert result to a 13-bit binary string\n    bitBuffer.put(value, 13)\n  }\n}\n\nmodule.exports = KanjiData\n","const Mode = require('./mode')\n\nfunction ByteData (data) {\n  this.mode = Mode.BYTE\n  if (typeof (data) === 'string') {\n    this.data = new TextEncoder().encode(data)\n  } else {\n    this.data = new Uint8Array(data)\n  }\n}\n\nByteData.getBitsLength = function getBitsLength (length) {\n  return length * 8\n}\n\nByteData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nByteData.prototype.getBitsLength = function getBitsLength () {\n  return ByteData.getBitsLength(this.data.length)\n}\n\nByteData.prototype.write = function (bitBuffer) {\n  for (let i = 0, l = this.data.length; i < l; i++) {\n    bitBuffer.put(this.data[i], 8)\n  }\n}\n\nmodule.exports = ByteData\n","'use strict';\n\n/******************************************************************************\n * Created 2008-08-19.\n *\n * Dijkstra path-finding functions. Adapted from the Dijkstar Python project.\n *\n * Copyright (C) 2008\n *   Wyatt Baldwin <self@wyattbaldwin.com>\n *   All rights reserved\n *\n * Licensed under the MIT license.\n *\n *   http://www.opensource.org/licenses/mit-license.php\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *****************************************************************************/\nvar dijkstra = {\n  single_source_shortest_paths: function(graph, s, d) {\n    // Predecessor map for each node that has been encountered.\n    // node ID => predecessor node ID\n    var predecessors = {};\n\n    // Costs of shortest paths from s to all nodes encountered.\n    // node ID => cost\n    var costs = {};\n    costs[s] = 0;\n\n    // Costs of shortest paths from s to all nodes encountered; differs from\n    // `costs` in that it provides easy access to the node that currently has\n    // the known shortest path from s.\n    // XXX: Do we actually need both `costs` and `open`?\n    var open = dijkstra.PriorityQueue.make();\n    open.push(s, 0);\n\n    var closest,\n        u, v,\n        cost_of_s_to_u,\n        adjacent_nodes,\n        cost_of_e,\n        cost_of_s_to_u_plus_cost_of_e,\n        cost_of_s_to_v,\n        first_visit;\n    while (!open.empty()) {\n      // In the nodes remaining in graph that have a known cost from s,\n      // find the node, u, that currently has the shortest path from s.\n      closest = open.pop();\n      u = closest.value;\n      cost_of_s_to_u = closest.cost;\n\n      // Get nodes adjacent to u...\n      adjacent_nodes = graph[u] || {};\n\n      // ...and explore the edges that connect u to those nodes, updating\n      // the cost of the shortest paths to any or all of those nodes as\n      // necessary. v is the node across the current edge from u.\n      for (v in adjacent_nodes) {\n        if (adjacent_nodes.hasOwnProperty(v)) {\n          // Get the cost of the edge running from u to v.\n          cost_of_e = adjacent_nodes[v];\n\n          // Cost of s to u plus the cost of u to v across e--this is *a*\n          // cost from s to v that may or may not be less than the current\n          // known cost to v.\n          cost_of_s_to_u_plus_cost_of_e = cost_of_s_to_u + cost_of_e;\n\n          // If we haven't visited v yet OR if the current known cost from s to\n          // v is greater than the new cost we just found (cost of s to u plus\n          // cost of u to v across e), update v's cost in the cost list and\n          // update v's predecessor in the predecessor list (it's now u).\n          cost_of_s_to_v = costs[v];\n          first_visit = (typeof costs[v] === 'undefined');\n          if (first_visit || cost_of_s_to_v > cost_of_s_to_u_plus_cost_of_e) {\n            costs[v] = cost_of_s_to_u_plus_cost_of_e;\n            open.push(v, cost_of_s_to_u_plus_cost_of_e);\n            predecessors[v] = u;\n          }\n        }\n      }\n    }\n\n    if (typeof d !== 'undefined' && typeof costs[d] === 'undefined') {\n      var msg = ['Could not find a path from ', s, ' to ', d, '.'].join('');\n      throw new Error(msg);\n    }\n\n    return predecessors;\n  },\n\n  extract_shortest_path_from_predecessor_list: function(predecessors, d) {\n    var nodes = [];\n    var u = d;\n    var predecessor;\n    while (u) {\n      nodes.push(u);\n      predecessor = predecessors[u];\n      u = predecessors[u];\n    }\n    nodes.reverse();\n    return nodes;\n  },\n\n  find_path: function(graph, s, d) {\n    var predecessors = dijkstra.single_source_shortest_paths(graph, s, d);\n    return dijkstra.extract_shortest_path_from_predecessor_list(\n      predecessors, d);\n  },\n\n  /**\n   * A very naive priority queue implementation.\n   */\n  PriorityQueue: {\n    make: function (opts) {\n      var T = dijkstra.PriorityQueue,\n          t = {},\n          key;\n      opts = opts || {};\n      for (key in T) {\n        if (T.hasOwnProperty(key)) {\n          t[key] = T[key];\n        }\n      }\n      t.queue = [];\n      t.sorter = opts.sorter || T.default_sorter;\n      return t;\n    },\n\n    default_sorter: function (a, b) {\n      return a.cost - b.cost;\n    },\n\n    /**\n     * Add a new item to the queue and ensure the highest priority element\n     * is at the front of the queue.\n     */\n    push: function (value, cost) {\n      var item = {value: value, cost: cost};\n      this.queue.push(item);\n      this.queue.sort(this.sorter);\n    },\n\n    /**\n     * Return the highest priority element in the queue.\n     */\n    pop: function () {\n      return this.queue.shift();\n    },\n\n    empty: function () {\n      return this.queue.length === 0;\n    }\n  }\n};\n\n\n// node.js module exports\nif (typeof module !== 'undefined') {\n  module.exports = dijkstra;\n}\n","/**\n * Alignment pattern are fixed reference pattern in defined positions\n * in a matrix symbology, which enables the decode software to re-synchronise\n * the coordinate mapping of the image modules in the event of moderate amounts\n * of distortion of the image.\n *\n * Alignment patterns are present only in QR Code symbols of version 2 or larger\n * and their number depends on the symbol version.\n */\n\nconst getSymbolSize = require('./utils').getSymbolSize\n\n/**\n * Calculate the row/column coordinates of the center module of each alignment pattern\n * for the specified QR Code version.\n *\n * The alignment patterns are positioned symmetrically on either side of the diagonal\n * running from the top left corner of the symbol to the bottom right corner.\n *\n * Since positions are simmetrical only half of the coordinates are returned.\n * Each item of the array will represent in turn the x and y coordinate.\n * @see {@link getPositions}\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinate\n */\nexports.getRowColCoords = function getRowColCoords (version) {\n  if (version === 1) return []\n\n  const posCount = Math.floor(version / 7) + 2\n  const size = getSymbolSize(version)\n  const intervals = size === 145 ? 26 : Math.ceil((size - 13) / (2 * posCount - 2)) * 2\n  const positions = [size - 7] // Last coord is always (size - 7)\n\n  for (let i = 1; i < posCount - 1; i++) {\n    positions[i] = positions[i - 1] - intervals\n  }\n\n  positions.push(6) // First coord is always 6\n\n  return positions.reverse()\n}\n\n/**\n * Returns an array containing the positions of each alignment pattern.\n * Each array's element represent the center point of the pattern as (x, y) coordinates\n *\n * Coordinates are calculated expanding the row/column coordinates returned by {@link getRowColCoords}\n * and filtering out the items that overlaps with finder pattern\n *\n * @example\n * For a Version 7 symbol {@link getRowColCoords} returns values 6, 22 and 38.\n * The alignment patterns, therefore, are to be centered on (row, column)\n * positions (6,22), (22,6), (22,22), (22,38), (38,22), (38,38).\n * Note that the coordinates (6,6), (6,38), (38,6) are occupied by finder patterns\n * and are not therefore used for alignment patterns.\n *\n * let pos = getPositions(7)\n * // [[6,22], [22,6], [22,22], [22,38], [38,22], [38,38]]\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  const coords = []\n  const pos = exports.getRowColCoords(version)\n  const posLength = pos.length\n\n  for (let i = 0; i < posLength; i++) {\n    for (let j = 0; j < posLength; j++) {\n      // Skip if position is occupied by finder patterns\n      if ((i === 0 && j === 0) || // top-left\n          (i === 0 && j === posLength - 1) || // bottom-left\n          (i === posLength - 1 && j === 0)) { // top-right\n        continue\n      }\n\n      coords.push([pos[i], pos[j]])\n    }\n  }\n\n  return coords\n}\n","// Function to split data based on delta\n\n/**\n * Splits data into groups based on delta between consecutive elements.\n *\n * @param {Array<[number, number]>} data - Array of tuples where each tuple contains two numbers.\n * @returns {Array<Array<[number, number]>>} - Array of groups, each containing arrays of tuples.\n */\n\nexport function splitDataByDelta(data: Array<[number, number]>): Array<Array<[number, number]>> {\n  const result: Array<Array<[number, number]>> = [];\n  let currentGroup: Array<[number, number]> = [];\n\n  for (let i = 0; i < data.length; i++) {\n    if (i === 0 || data[i][0] - data[i - 1][0] > 0) {\n      if (currentGroup.length > 0) {\n        result.push(currentGroup);\n      }\n      currentGroup = [data[i]];\n    } else {\n      currentGroup.push(data[i]);\n    }\n  }\n\n  if (currentGroup.length > 0) {\n    result.push(currentGroup);\n  }\n\n  return result;\n}\n\nexport function areItemsDifferent(arr: Array): boolean {\n  for (let i = 0; i < arr.length; i++) {\n    for (let j = i + 1; j < arr.length; j++) {\n      if (arr[i] === arr[j]) {\n        return false; // Found a duplicate\n      }\n    }\n  }\n  return true; // No duplicates found\n}\n\n/**\n * Get common items from the two arrays\n * @param arrayA - The first array\n * @param arrayB - The second array\n * @returns An array of the common items\n */\n\nexport function getIntersection(arrayA: Array, arrayB: Array): Array {\n  let result = [];\n  if (arrayA.length <= arrayB.length) {\n    for (const item of arrayA) {\n      if (arrayB.indexOf(item) > -1) {\n        result.push(item);\n      }\n    }\n  } else {\n    for (const item of arrayB) {\n      if (arrayA.indexOf(item) > -1) {\n        result.push(item);\n      }\n    }\n  }\n  return result;\n}\n","export function convertPositionsToDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {\n  const R = 6378.137;\n  const dLat = (lat2 * Math.PI) / 180 - (lat1 * Math.PI) / 180;\n  const dLon = (lon2 * Math.PI) / 180 - (lon1 * Math.PI) / 180;\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos((lat1 * Math.PI) / 180) * Math.cos((lat2 * Math.PI) / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const d = R * c;\n  return d * 1000; // measured in meters\n}\n\nexport function convertBytes(contentLength: number): string {\n  const units = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  let i = 0;\n\n  while (contentLength >= 1000 && i < units.length - 1) {\n    contentLength /= 1000;\n    i++;\n  }\n\n  return `${Math.floor(contentLength * 100) / 100} ${units[i]}`;\n}\n\nexport function convertNumberToLetters(number: number): string {\n  let result = '';\n  while (number > 0) {\n    let remainder = (number - 1) % 26; // Adjust for 1-based indexing\n    let letter = String.fromCharCode(remainder + 65); // A=65 in ASCII\n    result = letter + result;\n    number = Math.floor((number - 1) / 26); // Update number for next iteration\n  }\n  return result;\n}\n","import { CardinalDirection } from './cardinal-direction';\nimport { convertNumberToLetters } from './convert';\n\nexport function generateLetterLabels(quantity: number): Array<string> {\n  let result: Array<string> = [];\n  for (let i = 0; i < quantity; i++) {\n    result.push(`${convertNumberToLetters(i + 1)}`);\n  }\n  return result;\n}\n\nexport function generateDirectionLabels(cardinalDirections: Array<CardinalDirection>): Array<string> {\n  const result: Array<string> = [];\n  for (const cardinalDirection of cardinalDirections) {\n    result.push(`${cardinalDirection.name}${cardinalDirection.symbol}`);\n  }\n  return result;\n}\n","import { areItemsDifferent } from './array';\nimport { generateLetterLabels } from './labels';\n\ninterface AddressPart {\n  suffixes?: string;\n  key: keyof ParsedAddress;\n  process: (e: Array<string> | null) => Array<string> | Array<number> | null;\n  type: number;\n}\n\nexport interface ParsedAddress {\n  city: Array<string>;\n  district: Array<string>;\n  area: Array<string>;\n  road: Array<string>;\n  road_section: Array<number>;\n  alley: Array<number>;\n  alley_branch: Array<number>;\n  doorplate: Array<number>;\n  floornumber: Array<string>;\n  exit: Array<string>;\n  direction: Array<string>;\n  [key: string]: Array<string> | Array<number> | null;\n}\n\ninterface FeatureCounts {\n  [key: string]: { count: number; chars: string; index: number };\n}\n\nexport function mergeAddressesIntoOne(addresses: Array<string>): ParsedAddress | string {\n  const parts: Array<AddressPart> = [\n    {\n      suffixes: '',\n      key: 'city',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return t.trim();\n          });\n        }\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'district',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return t.trim();\n          });\n        }\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'area',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return t.trim();\n          });\n        }\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'road',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return t.replaceAll(/[\\(\\)\\\\]/gim, '').trim();\n          });\n        }\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'road_section',\n      process: function (e) {\n        var toNumber = function (char) {\n          switch (char) {\n            case '':\n              return 1;\n              break;\n            case '':\n              return 2;\n              break;\n            case '':\n              return 3;\n              break;\n            case '':\n              return 4;\n              break;\n            case '':\n              return 5;\n              break;\n            case '':\n              return 6;\n              break;\n            case '':\n              return 7;\n              break;\n            case '':\n              return 8;\n              break;\n            case '':\n              return 9;\n              break;\n            case '':\n              return 10;\n              break;\n          }\n          if (!isNaN(parseInt(char))) {\n            return parseInt(char);\n          }\n          return 0;\n        };\n        var len = String(e).length;\n        var numbers = [];\n        for (let i = 0; i < len; i++) {\n          var p = toNumber(String(e).charAt(i));\n          if (p === 10) {\n            if (numbers.length > 0) {\n              numbers = [numbers.reduce((a, b) => a + b, 0) * 10];\n            }\n          } else {\n            numbers = [numbers.reduce((a, b) => a + b, 0) + p];\n          }\n        }\n        return numbers;\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'alley',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return parseInt(t.trim().replaceAll(/[]/gim));\n          });\n        }\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'alley_branch',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return parseInt(t.trim().replaceAll(/[]/gim));\n          });\n        }\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'doorplate',\n      process: function (e) {\n        var numbers = String(e).match(/[0-9]+/gim);\n        numbers =\n          numbers?.map((n) => {\n            if (n === null) {\n              return null;\n            } else {\n              return parseInt(n);\n            }\n          }) || null;\n        return numbers;\n      },\n      type: 0\n    },\n    {\n      suffixes: '',\n      key: 'floornumber',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return t.trim();\n          });\n        }\n      },\n      type: 0\n    },\n    {\n      key: 'exit',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return t.trim();\n          });\n        }\n      },\n      type: 2\n    },\n    {\n      key: 'direction',\n      process: function (e) {\n        if (e === null) {\n          return null;\n        } else {\n          return e.map((t) => {\n            return t.trim().replace(/[]/gim, '');\n          });\n        }\n      },\n      type: 1\n    }\n  ];\n\n  function parseAddress(address: string): object {\n    function regex(suffixes, type) {\n      if (type === 0) {\n        return new RegExp(`([^]+[${suffixes}])`, 'gmi');\n      }\n      if (type === 1) {\n        return new RegExp(`([]+[])`, 'gmi');\n      }\n      if (type === 2) {\n        return new RegExp(`([0-9]+[])`, 'gmi');\n      }\n    }\n    var result = {};\n    for (var part of parts) {\n      var r = regex(part?.suffixes, part.type);\n      result[part.key] = part.process(String(address).match(r));\n    }\n    return result;\n  }\n\n  function mergeAddresses(addresses: Array<string>): object {\n    var result = {};\n    for (var address of addresses) {\n      var parsedAddress = parseAddress(address);\n      for (var part of parts) {\n        if (!result.hasOwnProperty(part.key)) {\n          result[part.key] = [];\n        }\n        result[part.key] = result[part.key].concat(parsedAddress[part.key]);\n      }\n    }\n    for (var key in result) {\n      result[key] = Array.from(new Set(result[key]))\n        .filter((e) => (e ? true : false))\n        .sort(function (a, b) {\n          if (typeof a === 'number' && typeof b === 'number') {\n            return a - b;\n          } else {\n            return String(a).charCodeAt(0) - String(b).charCodeAt(0);\n          }\n        });\n    }\n    return result;\n  }\n  return mergeAddresses(addresses);\n}\n\nexport function addressToString(address: ParsedAddress): string {\n  return `${address.city.join('')}${address.district.join('')}${address.road.join('')}${\n    address.road_section.sort(function (a, b) {\n      return a - b;\n    }).length > 0\n      ? address.road_section.join('') + ''\n      : ''\n  }${\n    address.alley.length > 0\n      ? address.alley\n          .sort(function (a, b) {\n            return a - b;\n          })\n          .join('') + ''\n      : ''\n  }${\n    address.alley_branch.length > 0\n      ? address.alley_branch\n          .sort(function (a, b) {\n            return a - b;\n          })\n          .join('') + ''\n      : ''\n  }${\n    address.doorplate.length > 0\n      ? address.doorplate\n          .sort(function (a, b) {\n            return a - b;\n          })\n          .join('') + ''\n      : ''\n  }${address.floornumber.length > 0 ? address.floornumber.join('') + '' : ''}${address.direction.length > 0 ? '' + address.direction.join('') + '' : ''}`;\n}\n\nexport function extractCommonFeaturesFromAddresses(addresses: Array<string>): string {\n  // Create an object to store feature occurrences\n  const featureCounts: { [key: string]: { count: number; chars: string; index: number } } = {};\n\n  // Create a set to store unique simplified addresses\n  const simplifiedSet = new Set<string>();\n\n  // Iterate through each address\n  for (const address of addresses) {\n    // Extract common features by splitting the address\n    const features = String(address)\n      .split('')\n      .filter((feature) => feature.trim() !== '');\n\n    // Join the extracted features to create a simplified address\n    const simplifiedAddress = features.join('');\n\n    // Add the simplified address to the set\n    simplifiedSet.add(simplifiedAddress);\n\n    // Count occurrences of each feature\n    let index = 0;\n    for (const feature of features) {\n      // Check if the feature is a digit\n      if (!isNaN(parseInt(feature))) {\n        // Create a key for the digit feature\n        const digitKey = `digit_${index}_${feature.charCodeAt(0)}`;\n        featureCounts[digitKey] = {\n          count: (featureCounts[digitKey]?.count || 0) + 1,\n          chars: feature,\n          index: index\n        };\n      } else {\n        // Create a key for non-digit features\n        const featureKey = `chars_${index}_${feature.charCodeAt(0)}`;\n        featureCounts[featureKey] = {\n          count: (featureCounts[featureKey]?.count || 0) + 1,\n          chars: feature,\n          index: index\n        };\n      }\n      index += 1;\n    }\n  }\n\n  // Set threshold and limit for filtering features\n  const threshold = addresses.length * 0.6;\n  const limit = addresses.length * 1;\n\n  // Convert the feature counts object to an array of [feature, count] pairs\n  const sortedFeatures = Object.entries(featureCounts)\n    .filter((pair) => threshold <= pair[1].count && pair[1].count <= limit)\n    .sort((a, b) => a[1].index - b[1].index);\n\n  // Extract the features from the sorted array\n  const commonFeatures = sortedFeatures.map((pair) => pair[1].chars);\n\n  return commonFeatures.join('');\n}\n\nexport function generateLabelFromAddresses(addresses: Array<ParsedAddress>): Array<string> {\n  const result = [];\n  const filledProperties = {};\n  for (const address of addresses) {\n    for (const key in address) {\n      if (!filledProperties.hasOwnProperty(key)) {\n        filledProperties[key] = 0;\n      }\n      if (address[key].length > 0) {\n        filledProperties[key] = filledProperties[key] + 1;\n      }\n    }\n  }\n  let commonProperties = Object.entries(filledProperties)\n    .map((property) => {\n      return { key: property[0], value: property[1] };\n    })\n    .filter((e) => {\n      return e.value === addresses.length ? true : false;\n    })\n    .sort(function (a, b) {\n      return a.value - b.value;\n    });\n  if (commonProperties.length > 0) {\n    for (const commonProperty of commonProperties) {\n      let components = [];\n      let len = -Infinity;\n      for (const address of addresses) {\n        const component = address[commonProperty.key].join('');\n        components.push(component);\n        const componentLen = component.length;\n        if (componentLen > len) {\n          len = componentLen;\n        }\n      }\n      if (areItemsDifferent(components)) {\n        result.push({ components: components, len: len });\n      }\n    }\n  }\n\n  if (result.length > 0) {\n    result.sort(function (a, b) {\n      return a.len - b.len;\n    });\n    return result[0].components;\n  } else {\n    const addressesLength = addresses.length;\n    return generateLetterLabels(addressesLength);\n  }\n}\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","export function getThisWeekOrigin(): Date {\n  const today: Date = new Date();\n  const dayOfToday: number = today.getDay();\n  const originDate: number = today.getDate() - dayOfToday;\n  const origin: Date = new Date();\n  origin.setDate(originDate);\n  origin.setHours(0);\n  origin.setMinutes(0);\n  origin.setSeconds(0);\n  origin.setMilliseconds(0);\n  return origin;\n}\n\nexport function offsetDate(origin: Date, date: number, hours: number, minutes: number): Date {\n  const duplicatedOrigin = new Date();\n  duplicatedOrigin.setDate(1);\n  duplicatedOrigin.setMonth(0);\n  duplicatedOrigin.setHours(hours);\n  duplicatedOrigin.setMinutes(minutes);\n  duplicatedOrigin.setSeconds(0);\n  duplicatedOrigin.setMilliseconds(0);\n  duplicatedOrigin.setFullYear(origin.getFullYear());\n  duplicatedOrigin.setMonth(origin.getMonth());\n  duplicatedOrigin.setDate(origin.getDate());\n  duplicatedOrigin.setDate(duplicatedOrigin.getDate() + date);\n  return duplicatedOrigin;\n}\n\nexport function timeStampToNumber(string: string): number {\n  const regex = /[0-9\\.]*/gm;\n  const match = string.match(regex);\n  if (match) {\n    const year = parseInt(match[0]);\n    const month = parseInt(match[2]);\n    const date = parseInt(match[4]);\n    const hours = parseInt(match[6]);\n    const minutes = parseInt(match[8]);\n    const seconds = parseInt(match[10]);\n    const date_object = new Date();\n    date_object.setDate(1);\n    date_object.setMonth(0);\n    date_object.setFullYear(year);\n    date_object.setMonth(month - 1);\n    date_object.setDate(date);\n    date_object.setHours(hours);\n    date_object.setMinutes(minutes);\n    date_object.setSeconds(seconds);\n    return date_object.getTime();\n  }\n  return 0;\n}\n\nexport function dateToString(date: Date, template: string = 'YYYY-MM-DD hh:mm:ss'): string {\n  const result = template\n    .replaceAll(/Y{4,4}/g, date.getFullYear())\n    .replaceAll(/M{2,2}/g, String(date.getMonth() + 1).padStart(2, '0'))\n    .replaceAll(/D{2,2}/g, String(date.getDate()).padStart(2, '0'))\n    .replaceAll(/h{2,2}/g, String(date.getHours()).padStart(2, '0'))\n    .replaceAll(/m{2,2}/g, String(date.getMinutes()).padStart(2, '0'))\n    .replaceAll(/s{2,2}/g, String(date.getSeconds()).padStart(2, '0'));\n  return result;\n}\n\nexport function dateToRelativeTime(date: Date): string {\n  const time = date.getTime();\n  const seconds = Math.floor((new Date().getTime() - time) / 1000);\n  let interval = Math.floor(seconds / 31536000); // seconds in a year\n  if (interval >= 1) {\n    return `${interval}`;\n  }\n  interval = Math.floor(seconds / 2592000); // seconds in a month\n  if (interval >= 1) {\n    return `${interval}`;\n  }\n  interval = Math.floor(seconds / 86400); // seconds in a day\n  if (interval >= 1) {\n    return `${interval}`;\n  }\n  interval = Math.floor(seconds / 3600); // seconds in an hour\n  if (interval >= 1) {\n    return `${interval}`;\n  }\n  interval = Math.floor(seconds / 60); // seconds in a minute\n  if (interval >= 1) {\n    return `${interval}`;\n  }\n  if (seconds > 0) {\n    return `${seconds}`;\n  }\n  return '';\n}\n\nexport function formatTime(time: number, mode: number): string {\n  const roundedTime = time | 0;\n  switch (mode) {\n    case 0: {\n      return `${roundedTime}`;\n      break;\n    }\n    case 1: {\n      const minutes = String((roundedTime - (roundedTime % 60)) / 60);\n      const seconds = String(roundedTime % 60);\n      return [minutes, seconds].map((u) => u.padStart(2, '0')).join(':');\n      break;\n    }\n    case 2: {\n      const minutes = (roundedTime / 60) | 0;\n      return `${minutes}`;\n      break;\n    }\n    case 3: {\n      if (roundedTime >= 60 * 60) {\n        const hours = parseFloat((roundedTime / (60 * 60)).toFixed(1));\n        return `${hours}`;\n      }\n      if (60 <= roundedTime && roundedTime < 60 * 60) {\n        const minutes = (roundedTime / 60) | 0;\n        return `${minutes}`;\n      }\n      if (roundedTime < 60) {\n        return `${roundedTime}`;\n      }\n      break;\n    }\n    default: {\n      return '--';\n      break;\n    }\n  }\n}\n\nexport type WeekDayIndex = 0 | 1 | 2 | 3 | 4 | 5 | 6;\n// 0: Sunday, 1: Monday, 2: Tuesday, 3: Wednesday, 4: Thursday, 5: Friday, 6: Saturday\n\nexport type WeekDayIndexArray = Array<WeekDayIndex>;\n\nexport type WeekDayName = '' | '' | '' | '' | '' | '' | '';\n\nexport interface WeekDay {\n  name: WeekDayName;\n  day: WeekDayIndex;\n  code: string;\n}\n\nexport function indexToDay(index: WeekDayIndex): WeekDay {\n  const days = [\n    {\n      name: '',\n      day: 0,\n      code: 'd_0'\n    },\n    {\n      name: '',\n      day: 1,\n      code: 'd_1'\n    },\n    {\n      name: '',\n      day: 2,\n      code: 'd_2'\n    },\n    {\n      name: '',\n      day: 3,\n      code: 'd_3'\n    },\n    {\n      name: '',\n      day: 4,\n      code: 'd_4'\n    },\n    {\n      name: '',\n      day: 5,\n      code: 'd_5'\n    },\n    {\n      name: '',\n      day: 6,\n      code: 'd_6'\n    }\n  ];\n  return days[index];\n}\n\nexport function dateValueToDayOfWeek(dateValue: string): WeekDay {\n  const int = parseInt(dateValue);\n  const index = int - 1;\n  return indexToDay(index);\n}\n\nexport interface TimeObject {\n  hours: number;\n  minutes: number;\n}\n\nexport interface TimePeriod {\n  start: TimeObject;\n  end: TimeObject;\n}\n\nexport interface TimeStampPeriod {\n  start: Date;\n  end: Date;\n}\n\nexport function timeObjectToString(timeObject: TimeObject): string {\n  return `${String(timeObject.hours).padStart(2, '0')}:${String(timeObject.minutes).padStart(2, '0')}`;\n}\n\nexport function createDateObjectFromDate(year: number, month: number, date: number): Date {\n  const dateObject = new Date();\n  dateObject.setDate(1); // Set to the first day of the month to prevent date from being clamped\n  dateObject.setMonth(0);\n  dateObject.setFullYear(year);\n  dateObject.setMonth(month - 1);\n  dateObject.setDate(date);\n  dateObject.setHours(0);\n  dateObject.setMinutes(0);\n  dateObject.setSeconds(0);\n  dateObject.setMilliseconds(0);\n  return dateObject;\n}\n\nexport function maxConcurrency(periods: Array<TimePeriod>): number {\n  let events: Array<[number, 1 | -1]> = [];\n\n  // Convert periods into events\n  for (let { start, end } of periods) {\n    events.push([start.hours * 60 + start.minutes, 1]); // Start of a period\n    events.push([end.hours * 60 + end.minutes, -1]); // End of a period\n  }\n\n  // Sort events: Primary by time, secondary by type (-1 before +1)\n  events.sort((a, b) => (a[0] === b[0] ? a[1] - b[1] : a[0] - b[0]));\n\n  let maxCount = 0;\n  let currentCount = 0;\n\n  // Sweep through the events\n  for (let [, type] of events) {\n    currentCount += type;\n    maxCount = Math.max(maxCount, currentCount);\n  }\n\n  return maxCount;\n}\n\nexport function assignTracks(periods: Array<TimePeriod>): Array<Array<TimePeriod>> {\n  if (periods.length === 0) return [];\n\n  // Convert periods into events\n  let events: Array<[number, number, number]> = [];\n  let index = 0;\n  for (let { start, end } of periods) {\n    events.push([start.hours * 60 + start.minutes, end.hours * 60 + end.minutes, index]);\n    index += 1;\n  }\n\n  // Sort intervals by start time\n  events.sort((a, b) => a[0] - b[0]);\n\n  let tracks = [];\n  for (let [start, end, index] of events) {\n    let assigned = false;\n    for (let i = 0; i < tracks.length; i++) {\n      if (tracks[i][tracks[i].length - 1][1] <= start) {\n        tracks[i].push([start, end, index]);\n        assigned = true;\n        break;\n      }\n    }\n    if (!assigned) {\n      tracks.push([[start, end, index]]);\n    }\n  }\n\n  let i = 0;\n  for (const track of tracks) {\n    let j = 0;\n    for (const event of track) {\n      tracks[i][j] = periods[event[2]];\n      j += 1;\n    }\n    i += 1;\n  }\n\n  return tracks;\n}\n","const localforage = require('localforage');\n\nlet storage = {\n  cacheStore: false, // 0\n  settingsStore: false, // 1\n  dataUsageStatsStore: false, // 2\n  updateRateDataStore: false, // 3\n  updateRateDataWriteAheadLogStore: false, // 4\n  busArrivalTimeDataWriteAheadLogStore: false, // 5\n  busArrivalTimeDataStore: false, // 6\n  personalScheduleStore: false, // 7\n  recentViewsStore: false, // 8\n  notificationStore: false, // 9\n  notificationScheduleStore: false, // 10\n  folderListStore: false, // 11\n  folderContentIndexStore: false, // 12\n  folderContentStore: false // 13\n};\n\nconst stores = ['cacheStore', 'settingsStore', 'dataUsageStatsStore', 'updateRateDataStore', 'updateRateDataWriteAheadLogStore', 'busArrivalTimeDataWriteAheadLogStore', 'busArrivalTimeDataStore', 'personalScheduleStore', 'recentViewsStore', 'notificationStore', 'notificationScheduleStore', 'folderListStore', 'folderContentIndexStore', 'folderContentStore'];\n\nasync function dropInstance(store: number): Promise<any> {\n  const storeKey = stores[store];\n  if (storage[storeKey] === false) {\n    storage[storeKey] = await localforage.createInstance({\n      name: storeKey\n    });\n  }\n  const operation = await storage[storeKey].dropInstance();\n  return operation;\n}\n\nexport async function lfSetItem(store: number, key: string, value: any): Promise<any> {\n  try {\n    const storeKey = stores[store];\n    if (storage[storeKey] === false) {\n      storage[storeKey] = await localforage.createInstance({\n        name: storeKey\n      });\n    }\n    const operation = await storage[storeKey].setItem(key, value);\n    return operation;\n  } catch (err) {\n    console.error(err);\n    // await dropInstance(store);\n    return null;\n  }\n}\n\nexport async function lfGetItem(store: number, key: string): Promise<any> {\n  try {\n    const storeKey = stores[store];\n    if (storage[storeKey] === false) {\n      storage[storeKey] = await localforage.createInstance({\n        name: storeKey\n      });\n    }\n    const operation = await storage[storeKey].getItem(key);\n    return operation;\n  } catch (err) {\n    console.error(err);\n    // await dropInstance(store);\n    return null;\n  }\n}\n\nexport async function lfRemoveItem(store: number, key: string): Promise<any> {\n  try {\n    const storeKey = stores[store];\n    if (storage[storeKey] === false) {\n      storage[storeKey] = await localforage.createInstance({\n        name: storeKey\n      });\n    }\n    const operation = await storage[storeKey].removeItem(key);\n    return operation;\n  } catch (err) {\n    console.error(err);\n    // await dropInstance(store);\n    return null;\n  }\n}\n\nexport async function lfListItemKeys(store: number): Promise<Array<string>> {\n  try {\n    const storeKey = stores[store];\n    if (storage[storeKey] === false) {\n      storage[storeKey] = await localforage.createInstance({\n        name: storeKey\n      });\n    }\n    const keys = await storage[storeKey].keys();\n    return keys;\n  } catch (err) {\n    console.error(err);\n    return [];\n  }\n}\n\nexport function getStoreKey(store: number): string {\n  return stores[store];\n}\n\nexport function getStoresLength(): number {\n  return stores.length;\n}\n\n/*\nexport async function registerStore(id: string): Promise<number> {\n  const storeKey = `F${id}Store`;\n  if (!storage.hasOwnProperty(storeKey) && stores.indexOf(storeKey) < 0) {\n    storage[storeKey] = await localforage.createInstance({\n      name: storeKey\n    });\n    stores.push(storeKey);\n    return stores.length - 1;\n  } else {\n    return stores.indexOf(storeKey);\n  }\n}\n*/\n\nexport async function isStoragePersistent(): Promise<boolean> {\n  // Check if site's storage has been marked as persistent\n  if (navigator.storage) {\n    if (navigator.storage.persist) {\n      const isPersisted = await navigator.storage.persisted();\n      return isPersisted;\n    }\n  }\n  return false;\n}\n\nexport async function askForPersistentStorage(): Promise<'granted' | 'denied' | 'unsupported'> {\n  // Request persistent storage for site\n  if (navigator.storage) {\n    if (navigator.storage.persist) {\n      const isPersisted = await navigator.storage.persist();\n      return isPersisted ? 'granted' : 'denied';\n    }\n  }\n  return 'unsupported';\n}\n","import { createDateObjectFromDate, dateToString, offsetDate, TimeStampPeriod } from '../../../tools/time';\nimport { lfGetItem, lfListItemKeys, lfRemoveItem, lfSetItem } from '../../storage/index';\n\nexport interface DataUsageStatsChunk {\n  date: [year: number, month: number, day: number];\n  data: Array<number>;\n  stats: {\n    sum: number;\n    max: number;\n    min: number;\n  };\n}\n\nexport type DataUsageStatsChunkArray = Array<DataUsageStatsChunk>;\n\nexport interface DataUsageStats {\n  stats: {\n    sum: number;\n    max: number;\n    min: number;\n  };\n  period: TimeStampPeriod;\n  chart: string;\n}\n\nexport const DataUsagePeriod = 7; // days\n\nexport async function recordDataUsage(contentLength: number, date: Date) {\n  const key = `d_${dateToString(date, 'YYYY_MM_DD')}`;\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n  const index = hours * 60 + minutes;\n  const existingDataUsageStatsChunkJSON = await lfGetItem(2, key);\n  if (existingDataUsageStatsChunkJSON) {\n    const existingDataUsageStatsChunkObject = JSON.parse(existingDataUsageStatsChunkJSON) as DataUsageStatsChunk;\n    existingDataUsageStatsChunkObject.stats.sum += contentLength;\n    existingDataUsageStatsChunkObject.data[index] += contentLength;\n    const changedData = existingDataUsageStatsChunkObject.data[index];\n    if (changedData > existingDataUsageStatsChunkObject.stats.max) {\n      existingDataUsageStatsChunkObject.stats.max = changedData;\n    }\n    if (changedData < existingDataUsageStatsChunkObject.stats.min) {\n      existingDataUsageStatsChunkObject.stats.min = changedData;\n    }\n    await lfSetItem(2, key, JSON.stringify(existingDataUsageStatsChunkObject));\n  } else {\n    const newDataUsageStatsChunk = {} as DataUsageStatsChunk;\n    const data = new Uint32Array(60 * 24);\n    data[index] += contentLength;\n    newDataUsageStatsChunk.data = Array.from(data);\n    newDataUsageStatsChunk.stats = {\n      sum: contentLength,\n      max: contentLength,\n      min: 0\n    };\n    newDataUsageStatsChunk.date = [date.getFullYear(), date.getMonth() + 1, date.getDate()];\n    await lfSetItem(2, key, JSON.stringify(newDataUsageStatsChunk));\n  }\n}\n\nexport async function listDataUsageStatsChunks(): Promise<DataUsageStatsChunkArray> {\n  const endDate = new Date();\n  endDate.setHours(0);\n  endDate.setMinutes(0);\n  endDate.setSeconds(0);\n  endDate.setMilliseconds(0);\n  const startDate = offsetDate(endDate, -1 * DataUsagePeriod, 0, 0);\n  const result: DataUsageStatsChunkArray = [];\n  for (let i = 1; i <= DataUsagePeriod; i++) {\n    const date = offsetDate(startDate, i, 0, 0);\n    const key = `d_${dateToString(date, 'YYYY_MM_DD')}`;\n    const existingDataUsageStatsChunkJSON = await lfGetItem(2, key);\n    if (existingDataUsageStatsChunkJSON) {\n      const existingDataUsageStatsChunkObject = JSON.parse(existingDataUsageStatsChunkJSON) as DataUsageStatsChunk;\n      result.push(existingDataUsageStatsChunkObject);\n    } else {\n      const blankDataUsageStatsChunk = {} as DataUsageStatsChunk;\n      const data = new Uint32Array(60 * 24);\n      blankDataUsageStatsChunk.data = Array.from(data);\n      blankDataUsageStatsChunk.stats = {\n        sum: 0,\n        max: 0,\n        min: 0\n      };\n      blankDataUsageStatsChunk.date = [date.getFullYear(), date.getMonth() + 1, date.getDate()];\n      result.push(blankDataUsageStatsChunk);\n    }\n  }\n  return result;\n}\n\nexport async function discardExpiredDataUsageStats() {\n  const millisecondsPerDay = 60 * 60 * 24 * 1000;\n  const expirationPeriod = millisecondsPerDay * DataUsagePeriod;\n  const now = new Date().getTime();\n  const keys = await lfListItemKeys(2);\n  for (const key of keys) {\n    const json = await lfGetItem(2, key);\n    const object = JSON.parse(json) as DataUsageStatsChunk;\n    const date = createDateObjectFromDate(object.date[0], object.date[1], object.date[2]);\n    if (now - date.getTime() > expirationPeriod) {\n      await lfRemoveItem(2, key);\n    }\n  }\n}\n\nexport async function getDataUsageStats(width: number, height: number, padding: number): Promise<DataUsageStats> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"getDataUsageStats-worker\" */ './getDataUsageStats-worker.ts', import.meta.url));\n  const dataUsageStatsChunks = await listDataUsageStatsChunks();\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n    worker.postMessage([dataUsageStatsChunks, width, height, padding]); // Send data to the worker\n  });\n  return result;\n}\n","export function documentQuerySelector(selectorExpression: string): HTMLElement {\n  return document.querySelector(selectorExpression);\n}\n\nexport function documentQuerySelectorAll(selectorExpression: string): NodeListOf<HTMLElement> {\n  return document.querySelectorAll(selectorExpression);\n}\n\nexport function elementQuerySelector(element: HTMLElement, selectorExpression: string): HTMLElement {\n  return element.querySelector(selectorExpression);\n}\n\nexport function elementQuerySelectorAll(element: HTMLElement, selectorExpression: string): NodeListOf<HTMLElement> {\n  return element.querySelectorAll(selectorExpression);\n}\n\nexport function getElementsBelow(referenceElement: HTMLElement, className: string): Array<HTMLElement> {\n  const elements = [];\n  let sibling = referenceElement.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.classList.contains(className)) {\n      elements.push(sibling);\n    }\n    sibling = sibling.nextElementSibling;\n  }\n\n  return elements;\n}\n\nexport function removeFirstChild(element: HTMLElement): void {\n  const firstChild = element.firstChild;\n  if (firstChild !== null) {\n    element.removeChild(firstChild);\n  }\n}\n","import { getNoCacheParameter } from '../../../tools/index';\nimport { getSettingOptionValue } from '../../settings/index';\n\n/**\n * Get API URL with no cache parameter (query string).\n * @param city - 0: blobbus -> Taipei City, 2: ntpcbus -> New Taipei City\n * @param api - 0: BusData, 1: BusEvent, 2: CarInfo, 3: CarUnusual, 4: EstimateTime, 5: IStop, 6: IStopPath, 7: OrgPathAttribute, 8: PathDetail, 9: Provider, 10: Route, 11: Stop, 12: SemiTimeTable, 13: StopLocation, 14: TimeTable, 15: BusRouteFareList\n * @param alternative - Whether to use alternative resources\n * @param interval - The interval for no cache parameter\n * @returns The direct link to a gzip file.\n */\n\nexport function getAPIURL(city: number, api: number, alternative: boolean = false, interval: number = 10000): string {\n  const cities = ['blobbus', 'ntpcbus'];\n  // blobbus  Taipei City\n  // ntpcbus  New Taipei City\n  const buckets = ['BusData', 'BusEvent', 'CarInfo', 'CarUnusual', 'EstimateTime', 'IStop', 'IStopPath', 'OrgPathAttribute', 'PathDetail', 'Provider', 'Route', 'Stop', 'SemiTimeTable', 'StopLocation', 'TimeTable', 'BusRouteFareList'];\n  const proxy = getSettingOptionValue('proxy');\n  if (alternative) {\n    return `http://erichsia7.github.io/bus-alternative-static-apis/${cities[city]}/Get${buckets[api]}.gz?_=${getNoCacheParameter(interval)}`;\n  } else {\n    if (proxy) {\n      return `https://bus-proxy.erichsia7.workers.dev?url=https://tcgbusfs.blob.core.windows.net/${cities[city]}/Get${buckets[api]}.gz&_=${getNoCacheParameter(interval)}`;\n    } else {\n      return `https://tcgbusfs.blob.core.windows.net/${cities[city]}/Get${buckets[api]}.gz?_=${getNoCacheParameter(interval)}`;\n    }\n  }\n}\n\nexport function getMaterialSymbolsAPIURL(interval: number = 10000): string {\n  return `https://erichsia7.github.io/material-symbols-list/search-index.gz?_=${getNoCacheParameter(interval)}`;\n}\n","import { generateIdentifier } from '../index';\n\nlet pakoInflateWorkerResponses = {};\nvar port;\n\n// Check if SharedWorker is supported, and fall back to Worker if not\nif (typeof SharedWorker !== 'undefined') {\n  const pakoInflateSharedWorker = new SharedWorker(new URL(/* webpackChunkName: \"pakoInflate-worker\" */ './worker.ts', import.meta.url)); // Reusable shared worker\n  port = pakoInflateSharedWorker.port; // Access the port for communication\n  port.start(); // Start the port (required by some browsers)\n} else {\n  const pakoInflateWorker = new Worker(new URL(/* webpackChunkName: \"pakoInflate-worker\" */ './worker.ts', import.meta.url)); // Fallback to standard worker\n  port = pakoInflateWorker; // Use Worker directly for communication\n}\n\n// Handle messages from the worker\nport.onmessage = function (e) {\n  const [result, taskID] = e.data;\n  if (pakoInflateWorkerResponses[taskID]) {\n    pakoInflateWorkerResponses[taskID](result); // Resolve the correct promise\n    delete pakoInflateWorkerResponses[taskID]; // Clean up the response handler\n  }\n};\n\n// Handle errors\nport.onerror = function (e) {\n  console.error(e.message);\n};\n\nexport async function pakoInflate(buffer: ArrayBuffer): Promise<string> {\n  const taskID = generateIdentifier();\n\n  const result = await new Promise((resolve, reject) => {\n    pakoInflateWorkerResponses[taskID] = resolve; // Store the resolve function for this taskID\n\n    port.onerror = function (e) {\n      reject(e.message);\n    };\n\n    port.postMessage([buffer, taskID]); // Send the task to the worker\n  });\n\n  return result;\n}\n","import { pakoInflate } from '../../tools/pako-inflate/index';\nimport { timeStampToNumber } from '../../tools/time';\nimport { recordDataUsage } from '../analytics/data-usage/index';\n\ntype FetchTaskRequest = [resolve: Function, reject: Function, requestID: string, tag: string];\n\ninterface FetchTask {\n  processing: boolean;\n  requests: Array<FetchTaskRequest>;\n  failed: boolean;\n  timestamp: number;\n  result: any;\n}\n\ntype FetchTasks = { [url: string]: FetchTask };\n\nconst tasks: FetchTasks = {};\n\nconst TTL = 30000;\nconst FetchError = new Error('FetchError');\n\nexport async function fetchData(url: string, requestID: string, tag: string, fileType: 'json' | 'xml'): Promise<object> {\n  // Check concurrency\n  if (tasks.hasOwnProperty(url)) {\n    if (tasks[url].processing) {\n      return await new Promise((resolve, reject) => {\n        tasks[url].requests.push([resolve, reject, requestID, tag]);\n      });\n    } else if (tasks[url].result !== null && new Date().getTime() <= tasks[url].timestamp) {\n      setDataReceivingProgress(requestID, tag, 0, true);\n      return tasks[url].result;\n    }\n  } else {\n    tasks[url] = {\n      processing: true,\n      requests: [],\n      failed: false,\n      timestamp: -1,\n      result: null\n    };\n  }\n\n  // Fetch data\n  const response = await fetch(url);\n  if (!response.ok) {\n    setDataReceivingProgress(requestID, tag, 0, true);\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  // Read chunks\n  const contentLength = parseInt(String(response.headers.get('content-length')));\n  const reader = response.body.getReader();\n  const chunks = [];\n  let receivedLength = 0;\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) {\n      break;\n    }\n    chunks.push(value);\n    receivedLength += value.length;\n    const progress = receivedLength / contentLength;\n    setDataReceivingProgress(requestID, tag, progress, false);\n    if (tasks.hasOwnProperty(url)) {\n      for (const request of tasks[url].requests) {\n        setDataReceivingProgress(request[2], request[3], progress, false);\n      }\n    }\n  }\n\n  // Concatenate all the chunks into a single Uint8Array\n  const uint8Array = new Uint8Array(receivedLength);\n  let position = 0;\n  for (const chunk of chunks) {\n    uint8Array.set(chunk, position);\n    position += chunk.length;\n  }\n\n  // Create a blob from the concatenated Uint8Array\n  const blob = new Blob([uint8Array], { type: 'application/gzip' });\n  const arrayBuffer = await blob.arrayBuffer();\n  const inflatedData = await pakoInflate(arrayBuffer);\n\n  let result;\n  switch (fileType) {\n    case 'json':\n      if (/^<!doctype html>/.test(inflatedData)) {\n        result = await fetchData(url.replace('https://tcgbusfs.blob.core.windows.net/', 'https://erichsia7.github.io/bus-alternative-static-apis/'), requestID, tag, fileType);\n      } else {\n        result = JSON.parse(inflatedData);\n      }\n      break;\n    case 'xml':\n      result = inflatedData;\n      break;\n    default:\n      break;\n  }\n\n  // Record data usage\n  const now = new Date();\n  await recordDataUsage(contentLength, now);\n\n  if (result) {\n    // Resolve promises\n    if (tasks.hasOwnProperty(url)) {\n      const progress = receivedLength / contentLength;\n      let request = tasks[url].requests.shift();\n      while (request) {\n        request[0](result);\n        setDataReceivingProgress(request[2], request[3], progress, false);\n        request = tasks[url].requests.shift();\n      }\n      tasks[url].result = result;\n      tasks[url].timestamp = now.getTime() + TTL;\n      tasks[url].processing = false;\n    }\n    discardExpiredFetchTasks();\n    return result;\n  } else {\n    // Reject promises\n    if (tasks.hasOwnProperty(url)) {\n      let request = tasks[url].requests.shift();\n      while (request) {\n        request[1](FetchError);\n        setDataReceivingProgress(request[2], request[3], 0, true);\n        request = tasks[url].requests.shift();\n      }\n      tasks[url].failed = true;\n    }\n    discardExpiredFetchTasks();\n    throw FetchError;\n  }\n}\n\nfunction discardExpiredFetchTasks(): void {\n  const now = new Date().getTime();\n  for (const url in tasks) {\n    if (tasks.hasOwnProperty(url)) {\n      if (!tasks[url].processing) {\n        if (now > tasks[url].timestamp) {\n          delete tasks[url];\n          continue;\n        }\n      }\n      if (tasks[url].failed) {\n        delete tasks[url];\n        continue;\n      }\n    }\n  }\n}\n\nexport type DataReceivingProgress = {\n  [requestID: string]: {\n    [tag: string]: {\n      expel: boolean;\n      progress: number;\n      total: number;\n    };\n  };\n};\n\nconst dataReceivingProgress: DataReceivingProgress = {};\n\nexport function setDataReceivingProgress(requestID: string, tag: string, progress: number, expel: boolean): void {\n  if (!dataReceivingProgress.hasOwnProperty(requestID)) {\n    dataReceivingProgress[requestID] = {};\n  }\n  if (dataReceivingProgress[requestID].hasOwnProperty(tag)) {\n    if (expel) {\n      dataReceivingProgress[requestID][tag].expel = true;\n    } else {\n      dataReceivingProgress[requestID][tag].expel = false;\n      dataReceivingProgress[requestID][tag].progress = progress;\n    }\n    broadcastDataReceivingProgress(requestID, 'run');\n  } else {\n    dataReceivingProgress[requestID][tag] = { expel: false, progress: progress, total: 1 };\n    broadcastDataReceivingProgress(requestID, 'start');\n  }\n}\n\nexport function getDataReceivingProgress(requestID: string): number {\n  if (dataReceivingProgress.hasOwnProperty(requestID)) {\n    if (typeof dataReceivingProgress[requestID] === 'object') {\n      let total: number = 0;\n      let received: number = 0;\n      for (const key in dataReceivingProgress[requestID]) {\n        if (!dataReceivingProgress[requestID][key].expel) {\n          total += dataReceivingProgress[requestID][key].total;\n          received += dataReceivingProgress[requestID][key].progress;\n        }\n      }\n      const progress = Math.min(Math.max(received / total, 0), 1);\n      return progress === Infinity || isNaN(progress) ? 1 : progress;\n    }\n  }\n  return 1;\n}\n\nexport function deleteDataReceivingProgress(requestID: string): void {\n  if (dataReceivingProgress.hasOwnProperty(requestID)) {\n    delete dataReceivingProgress[requestID];\n    broadcastDataReceivingProgress(requestID, 'end');\n  }\n}\n\nexport interface DataReceivingProgressEventDict {\n  target: string;\n  stage: 'start' | 'run' | 'end';\n  progress: number;\n}\n\nexport type DataReceivingProgressEvent = CustomEvent<DataReceivingProgressEventDict>;\n\nexport function broadcastDataReceivingProgress(requestID: string, stage: DataReceivingProgressEventDict['stage']): void {\n  const eventDict: DataReceivingProgressEventDict = {\n    target: requestID,\n    stage: stage,\n    progress: getDataReceivingProgress(requestID)\n  };\n  const event = new CustomEvent(requestID, { detail: eventDict });\n  document.dispatchEvent(event);\n}\n\nexport type DataUpdateTime = { [key: string]: number };\n\nexport const dataUpdateTime: DataUpdateTime = {};\n\nexport function setDataUpdateTime(requestID: string, timestamp: string | number): void {\n  if (!dataUpdateTime.hasOwnProperty(requestID)) {\n    dataUpdateTime[requestID] = 0;\n  }\n  let timeNumber = 0;\n  if (typeof timestamp === 'string') {\n    timeNumber = timeStampToNumber(timestamp);\n  }\n  if (timeNumber > dataUpdateTime[requestID]) {\n    dataUpdateTime[requestID] = timeNumber;\n  }\n}\n\nexport function getDataUpdateTime(requestID: string): number {\n  if (dataUpdateTime.hasOwnProperty(requestID)) {\n    return dataUpdateTime[requestID] * 1;\n  } else {\n    return 0;\n  }\n}\n\nexport function deleteDataUpdateTime(requestID: string): void {\n  if (dataUpdateTime.hasOwnProperty(requestID)) {\n    delete dataUpdateTime[requestID];\n  }\n}\n","import { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataUpdateTime } from '../loader';\n\nexport interface BusDataItem {\n  ProviderID: number;\n  StationID: number;\n  BusID: string; // vehicle registration number\n  CarType: '0' | '1' | '2' | '3'; // 0: normal bus (), 1: low-floor bus (), 2: disability-friendly bus (), 3: dog-friendly bus ()\n  CarID: number;\n  DutyStatus: '0' | '1' | '2'; // 0: normal, 1: start, 2: end\n  BusStatus: '0' | '1' | '2' | '3' | '4' | '5' | '99'; // 0: , 1: , 2: , 3: , 4: , 5: , 99: \n  RouteID: string; // number in string\n  GoBack: '0' | '1' | '2'; // 0: go, 1: back, 2: unknown\n  Longitude: string; // number in string\n  Latitude: string; // number in string\n  Speed: string; // number in string\n  Azimuth: string; // number in string\n  DataTime: string; // timestamp\n}\n\nexport type BusData = Array<BusDataItem>;\n\nexport async function getBusData(requestID: string): Promise<BusData> {\n  const apis = [\n    [0, 0],\n    [1, 0]\n  ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n  let result = [];\n  for (const api of apis) {\n    const data = await fetchData(api.url, requestID, `getBusData_${api.e[0]}`, 'json');\n    result = result.concat(data.BusInfo);\n    setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n  }\n  return result;\n}\n","import { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataUpdateTime } from '../loader';\n\nexport interface BusEventItem {\n  StationID: number;\n  CarType: '0' | '1' | '2' | '3'; // 0: normal bus (), 1: low-floor bus (), 2: disability-friendly bus (), 3: dog-friendly bus ()\n  BusID: string; // vehicle registration number\n  ProviderID: number;\n  CarID: number;\n  DutyStatus: '0' | '1' | '2'; // 0: normal, 1: start, 2: end\n  BusStatus: '0' | '1' | '2' | '3' | '4' | '5' | '99'; // 0: , 1: , 2: , 3: , 4: , 5: , 99: \n  RouteID: string; // PathAttributeId (number in string)\n  GoBack: '0' | '1' | '2'; // 0: go, 1: back, 2: unknown\n  StopID: string; // number in string\n  CarOnStop: '0' | '1'; // 0: leaving/left, 1: coming/came\n  DataTime: string; // timestamp\n}\n\nexport type BusEvent = Array<BusEventItem>;\n\nexport async function getBusEvent(requestID: string): Promise<BusEvent> {\n  const apis = [\n    [0, 1],\n    [1, 1]\n  ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n  let result = [];\n  for (const api of apis) {\n    const data = await fetchData(api.url, requestID, `getBusEvent_${api.e[0]}`, 'json');\n    result = result.concat(data.BusInfo);\n    setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n  }\n  return result;\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface CarInfoItem {\n  BusId: number; // BusId  BusID\n  BusNId: string;\n  CarNum: string; // CarNumber = BusID = vehicle registration number\n  CarType: '0' | '1' | '2' | '3'; // 0: normal bus (), 1: low-floor bus (), 2: disability-friendly bus (), 3: dog-friendly bus ()\n  IboxId: number;\n  StationId: number;\n  PathAttributeId: number;\n  BuildPeriod: string;\n  Ctime: string;\n}\n\nexport type CarInfo = Array<CarInfoItem>;\n\nexport interface SimplifiedCarInfoItem {\n  BusId: CarInfoItem['BusId'];\n  CarNum: CarInfoItem['CarNum'];\n  CarType: CarInfoItem['CarType'];\n  PathAttributeId: CarInfoItem['PathAttributeId'];\n}\n\nexport type SimplifiedCarInfo = { [key: string]: SimplifiedCarInfoItem };\n\nconst CarInfoAPIVariableCache = {\n  raw: {\n    data: [],\n    available: false\n  },\n  simplified: {\n    data: {},\n    available: false\n  }\n};\n\nasync function simplifyCarInfo(CarInfo: CarInfo): Promise<SimplifiedCarInfo> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"simplifyCarInfo-worker\" */ './simplifyCarInfo-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(CarInfo); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getCarInfo(requestID: string, simplified: boolean = false): Promise<CarInfo | SimplifiedCarInfo> {\n  async function getData() {\n    const apis = [\n      [0, 2],\n      [1, 2]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = [];\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getCarInfo_${api.e[0]}`, 'json');\n      result = result.concat(data.BusInfo);\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n    }\n    return result;\n  }\n\n  const cacheType = simplified ? 'simplified' : 'raw';\n  const cacheKey = `bus_${cacheType}_car_info_cache`;\n  const cacheTimeToLive = 60 * 60 * 24 * 30 * 1000;\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    let finalResult;\n    if (simplified) {\n      finalResult = await simplifyCarInfo(result);\n    } else {\n      finalResult = result;\n    }\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n    if (!CarInfoAPIVariableCache[cacheType].available) {\n      CarInfoAPIVariableCache[cacheType].available = true;\n      CarInfoAPIVariableCache[cacheType].data = finalResult;\n    }\n    return finalResult;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      let finalResult;\n      if (simplified) {\n        finalResult = await simplifyCarInfo(result);\n      } else {\n        finalResult = result;\n      }\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n      return finalResult;\n    } else {\n      if (!CarInfoAPIVariableCache[cacheType].available) {\n        const cache = await lfGetItem(0, cacheKey);\n        CarInfoAPIVariableCache[cacheType].available = true;\n        CarInfoAPIVariableCache[cacheType].data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getCarInfo_0', 0, true);\n      setDataReceivingProgress(requestID, 'getCarInfo_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return CarInfoAPIVariableCache[cacheType].data;\n    }\n  }\n}\n","import { ParsedAddress } from '../../../tools/address';\nimport { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface LocationItem {\n  Id: number; // StopID\n  routeId: number; // RouteID\n  nameZh: string; // name in Chinese\n  nameEn: string; // name in English\n  seqNo: number; // sequence on the route\n  pgp: string; // pgp (-1: get off, 0: get on and off, 1: get on)\n  goBack: '0' | '1' | '2'; // GoBack (0: go, 1: back, 2: unknown)\n  longitude: string; // number in string\n  latitude: string; // number in string\n  address: string;\n  stopLocationId: number; // LocationID\n  showLon: string; // number in string\n  showLat: string; // number in string\n  vector: string;\n}\n\nexport type Location = Array<LocationItem>;\n\nexport interface SimplifiedLocationItem {\n  n: string; // name\n  lo: number; // longitude\n  la: number; // latitude\n  g: string; // geohash\n  r: Array<number>; // RouteIDs\n  s: Array<number>; // StopIDs\n  v: Array<[number, number]>; // a set of vectors\n  a: Array<string>; // addresses\n  id: number; // stopLocationId\n}\n\nexport type SimplifiedLocation = { [l_id: string]: SimplifiedLocationItem };\n\nexport interface MergedLocationItem {\n  n: string; // name\n  lo: Array<number>; // longitude\n  la: Array<number>; // latitude\n  g: Array<string>; // geohash\n  r: Array<Array<number>>; // RouteIDs\n  s: Array<Array<number>>; // StopIDs\n  v: Array<Array<[number, number]>>; // sets of vectors\n  a: Array<ParsedAddress>; // addresses\n  id: Array<number>; // stopLocationIds\n  hash: string;\n}\n\nexport type MergedLocation = { [ml_hash: string]: MergedLocationItem };\n\nexport interface IndexedLocationItem {\n  lo: number; // longitude\n  la: number; // latitude\n  hash: string;\n}\n\nexport type IndexedLocation = { [geohash: string]: Array<IndexedLocationItem> };\n\nconst LocationAPIVariableCache = {\n  simplified: {\n    available: false,\n    data: {}\n  },\n  merged: {\n    available: false,\n    data: {}\n  },\n  indexed: {\n    available: false,\n    data: {}\n  }\n};\n\nasync function simplifyLocation(Location: Location): Promise<SimplifiedLocation> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"simplifyLocation-worker\" */ './simplifyLocation-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(Location); // Send data to the worker\n  });\n\n  return result;\n}\n\nasync function mergeLocationByName(object: SimplifiedLocation): Promise<MergedLocation> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"mergeLocationByName-worker\" */ './mergeLocationByName-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(object); // Send data to the worker\n  });\n\n  return result;\n}\n\nasync function indexLocationByGeohash(object: MergedLocation): Promise<IndexedLocation> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"indexLocationByGeohash-worker\" */ './indexLocationByGeohash-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(object); // Send data to the worker\n  });\n\n  return result;\n}\n\n/**\n * getLocation\n * @param requestID\n * @param type 0: simplified, 1: merged, 2: indexed\n * @returns SimplifiedLocation, MergedLocation, or IndexedLocation\n */\n\nexport async function getLocation(requestID: string, type: 0 | 1 | 2): Promise<SimplifiedLocation | MergedLocation | IndexedLocation> {\n  async function getData() {\n    const apis = [\n      [0, 11],\n      [1, 11]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = [];\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getLocation_${api.e[0]}`, 'json');\n      result = result.concat(data.BusInfo);\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 30 * 1000;\n  const cacheType = ['simplified', 'merged', 'indexed'][type];\n  const cacheKey = `bus_${cacheType}_location_cache`;\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    let finalResult;\n    switch (type) {\n      case 0: {\n        const result = await getData();\n        const simplified_result = await simplifyLocation(result);\n        finalResult = simplified_result;\n        break;\n      }\n      case 1: {\n        const simplified_result = await getLocation(requestID, 0);\n        const merged_result = await mergeLocationByName(simplified_result);\n        finalResult = merged_result;\n        break;\n      }\n      case 2: {\n        const merged_result = await getLocation(requestID, 1);\n        const indexed_result = await indexLocationByGeohash(merged_result);\n        finalResult = indexed_result;\n        break;\n      }\n      default:\n        break;\n    }\n\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n    if (!LocationAPIVariableCache[cacheType].available) {\n      LocationAPIVariableCache[cacheType].available = true;\n      LocationAPIVariableCache[cacheType].data = finalResult;\n    }\n    return finalResult;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      let finalResult;\n      switch (type) {\n        case 0: {\n          const result = await getData();\n          const simplified_result = await simplifyLocation(result);\n          finalResult = simplified_result;\n          break;\n        }\n        case 1: {\n          const simplified_result = await getLocation(requestID, 0);\n          const merged_result = await mergeLocationByName(simplified_result);\n          finalResult = merged_result;\n          break;\n        }\n        case 2: {\n          const merged_result = await getLocation(requestID, 1);\n          const indexed_result = await indexLocationByGeohash(merged_result);\n          finalResult = indexed_result;\n          break;\n        }\n        default:\n          break;\n      }\n\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n      if (!LocationAPIVariableCache[cacheType].available) {\n        LocationAPIVariableCache[cacheType].available = true;\n        LocationAPIVariableCache[cacheType].data = finalResult;\n      }\n      return finalResult;\n    } else {\n      if (!LocationAPIVariableCache[cacheType].available) {\n        const cache = await lfGetItem(0, cacheKey);\n        LocationAPIVariableCache[cacheType].available = true;\n        LocationAPIVariableCache[cacheType].data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getLocation_0', 0, true);\n      setDataReceivingProgress(requestID, 'getLocation_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return LocationAPIVariableCache[cacheType].data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface StopItem {\n  Id: number; // StopID\n  routeId: number; // RouteID\n  nameZh: string; // name in Chinese\n  nameEn: string; // name in English\n  seqNo: number; // sequence on the route\n  pgp: string; // pgp (-1: get off, 0: get on and off, 1: get on)\n  goBack: '0' | '1' | '2'; // GoBack (0: go, 1: back, 2: unknown)\n  longitude: string; // number in string\n  latitude: string; // number in string\n  address: string;\n  stopLocationId: number; // LocationID\n  showLon: string; // number in string\n  showLat: string; // number in string\n  vector: string;\n}\n\nexport type Stop = Array<StopItem>;\n\nexport interface SimplifiedStopItem {\n  seqNo: number;\n  goBack: '0' | '1' | '2'; // GoBack (0: go, 1: back, 2: unknown)\n  stopLocationId: number;\n}\n\nexport type SimplifiedStop = { [key: string]: SimplifiedStopItem };\n\nlet StopAPIVariableCache_available: boolean = false;\nlet StopAPIVariableCache_data: SimplifiedStop = {};\n\nasync function simplifyStop(array: Stop): Promise<SimplifiedStop> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"simplifyStop-worker\" */ './simplifyStop-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(array); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getStop(requestID: string): Promise<SimplifiedStop> {\n  async function getData() {\n    const apis = [\n      [0, 11],\n      [1, 11]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = [];\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getStop_${api.e[0]}`, 'json');\n      result = result.concat(data.BusInfo);\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 45 * 1000;\n  const cacheKey = 'bus_stop_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    const simplified_result = await simplifyStop(result);\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n    if (!StopAPIVariableCache_available) {\n      StopAPIVariableCache_available = true;\n      StopAPIVariableCache_data = simplified_result;\n    }\n    return simplified_result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      const simplified_result = await simplifyStop(result);\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n      return simplified_result;\n    } else {\n      if (!StopAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        StopAPIVariableCache_available = true;\n        StopAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getStop_0', 0, true);\n      setDataReceivingProgress(requestID, 'getStop_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return StopAPIVariableCache_data;\n    }\n  }\n}\n","import { formatTime } from '../../tools/time';\nimport { BusData, BusDataItem } from './getBusData/index';\nimport { BusEvent, BusEventItem } from './getBusEvent/index';\nimport { SimplifiedRoute } from './getRoute/index';\n\nexport interface EstimateTimeStatus {\n  code: 0 | 0.5 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8; // 8: loading\n  text: string;\n  time: number;\n}\n\nexport function parseEstimateTime(EstimateTime: string, mode: number): EstimateTimeStatus {\n  if (typeof EstimateTime === 'string') {\n    const time = parseInt(EstimateTime);\n    if (time === -3) {\n      return { code: 6, text: '', time };\n    }\n    if (time === -4) {\n      return { code: 5, text: '', time };\n    }\n    if (time === -2) {\n      return { code: 4, text: '', time };\n    }\n    if (time === -1) {\n      return { code: 3, text: '', time };\n    }\n    if (0 <= time && time <= 10) {\n      return { code: 2, text: '', time };\n    }\n    if (10 < time && time <= 180) {\n      return { code: 1, text: formatTime(time, mode), time };\n    }\n    if (180 < time && time <= 250) {\n      return { code: 0.5, text: formatTime(time, mode), time };\n    }\n    if (250 < time) {\n      return { code: 0, text: formatTime(time, mode), time };\n    }\n  }\n  return { code: 7, text: '', time: -5 };\n}\n\nexport interface TimeMoment {\n  type: 'moment';\n  hours: number;\n  minutes: number;\n}\n\nexport interface TimeRange {\n  type: 'range';\n  min: number;\n  max: number;\n}\n\n/**\n * parseTimeCode\n * @param code 0: hhmm/mm, 1: mmMM/mm\n * @param mode 0: moment, 1: range\n * @returns 0: TimeMoment, 1: TimeRange\n */\n\nexport function parseTimeCode(code: string, mode: 0 | 1): TimeMoment | TimeRange {\n  const codeLength = code.length;\n  if (mode === 0) {\n    let hours = 0;\n    let minutes = 0;\n    if (codeLength === 4) {\n      hours = parseInt(code.substring(0, 2));\n      minutes = parseInt(code.substring(2, 4));\n    }\n    if (codeLength === 2) {\n      minutes = parseInt(code);\n    }\n    return {\n      type: 'moment',\n      hours: hours,\n      minutes: minutes\n    };\n  }\n  if (mode === 1) {\n    let min = 0;\n    let max = 0;\n    if (codeLength === 4) {\n      const number1 = parseInt(code.substring(0, 2));\n      const number2 = parseInt(code.substring(2, 4));\n      min = Math.min(number1, number2);\n      max = Math.max(number1, number2);\n    }\n    if (codeLength === 2) {\n      const number = parseInt(code);\n      min = number;\n      max = number;\n    }\n    return {\n      type: 'range',\n      min: min,\n      max: max\n    };\n  }\n}\n\nexport interface BatchFoundBusPosition {\n  longitude: number;\n  latitude: number;\n}\n\nexport interface BatchFoundBus {\n  CarType: BusEventItem['CarType'];\n  BusStatus: BusEventItem['BusStatus'];\n  BusID: string;\n  CarOnStop: BusEventItem['CarOnStop'];\n  onThisRoute: boolean;\n  position: BatchFoundBusPosition;\n  RouteName: string;\n  RouteID: number;\n  index: number;\n}\n\nexport type BatchFoundBuses = { [key: string]: Array<BatchFoundBus> };\n\nexport function batchFindBusesForRoute(BusEvent: BusEvent, BusData: BusData, Route: SimplifiedRoute, RouteID: number, PathAttributeId: Array<number>): BatchFoundBuses {\n  const result = {} as BatchFoundBuses;\n  const BusDataObj: {\n    [key: string]: BusDataItem;\n  } = {};\n  for (const BusDataItem of BusData) {\n    const thisBusID = BusDataItem.BusID;\n    BusDataObj[thisBusID] = BusDataItem;\n  }\n\n  for (const BusEventItem of BusEvent) {\n    const processedItem = {} as BatchFoundBus;\n\n    // collect data from 'BusEvent'\n    processedItem.CarType = BusEventItem.CarType;\n    processedItem.BusStatus = BusEventItem.BusStatus;\n    processedItem.BusID = BusEventItem.BusID;\n    processedItem.CarOnStop = BusEventItem.CarOnStop;\n\n    // check whether this bus is on the route\n    const thisRouteID = parseInt(BusEventItem.RouteID);\n    const thisBusID = String(BusEventItem.BusID);\n    let isOnThisRoute: boolean = false;\n    let index: number = 0;\n    if (thisRouteID === RouteID || PathAttributeId.indexOf(thisRouteID) > -1 || thisRouteID === RouteID * 10) {\n      isOnThisRoute = true;\n      index = thisBusID.charCodeAt(0) * Math.pow(10, -5);\n    } else {\n      isOnThisRoute = false;\n      index = thisBusID.charCodeAt(0);\n    }\n    processedItem.onThisRoute = isOnThisRoute;\n    processedItem.index = index;\n\n    // collect data from 'BusData'\n    let thisBusData = {} as BusDataItem;\n    if (BusDataObj.hasOwnProperty(thisBusID)) {\n      thisBusData = BusDataObj[thisBusID];\n    } else {\n      continue;\n    }\n    processedItem.position = {\n      latitude: parseFloat(thisBusData.Latitude),\n      longitude: parseFloat(thisBusData.Longitude)\n    };\n\n    // search data from 'Route'\n    let searchedRoute = {};\n    let isRouteSearched = false;\n    for (const key in Route) {\n      const thisRouteItem = Route[key];\n      const pid = thisRouteItem.pid;\n      if (pid.indexOf(thisRouteID) > -1) {\n        searchedRoute = thisRouteItem;\n        isRouteSearched = true;\n        break;\n      }\n    }\n    processedItem.RouteName = isRouteSearched ? searchedRoute.n : '';\n    processedItem.RouteID = isRouteSearched ? searchedRoute.id : null;\n\n    const StopKey = `s_${BusEventItem.StopID}`;\n    if (!result.hasOwnProperty(StopKey)) {\n      result[StopKey] = [];\n    }\n    result[StopKey].push(processedItem);\n    // Handle multiple buses (of the same route) on a stop\n  }\n  return result;\n}\n\nexport function batchFindBusesForLocation(BusEvent: BusEvent, BusData: BusData, Route: SimplifiedRoute, StopIDList: Array<number>): BatchFoundBuses {\n  const result = {} as BatchFoundBuses;\n  const BusDataObj: {\n    [BusID: string]: BusDataItem;\n  } = {};\n  for (const BusDataItem of BusData) {\n    const thisBusID = BusDataItem.BusID;\n    BusDataObj[thisBusID] = BusDataItem;\n  }\n\n  for (const BusEventItem of BusEvent) {\n    const processedItem = {} as BatchFoundBus;\n\n    const thisStopID = parseInt(BusEventItem.StopID);\n    const thisRouteID = parseInt(BusEventItem.RouteID);\n    const thisBusID = String(BusEventItem.BusID);\n\n    // Check whether this bus is on one of the specified stops\n    if (StopIDList.indexOf(thisStopID) < 0) {\n      continue;\n    }\n\n    processedItem.index = thisBusID.charCodeAt(0);\n    processedItem.onThisRoute = true; // Every entry in Location is stop-route pair\n\n    // Collect data from 'BusEvent'\n    processedItem.CarType = BusEventItem.CarType;\n    processedItem.BusStatus = BusEventItem.BusStatus;\n    processedItem.BusID = BusEventItem.BusID;\n    processedItem.CarOnStop = BusEventItem.CarOnStop;\n\n    // Collect data from 'BusData'\n    let thisBusData = {} as BusDataItem;\n    if (BusDataObj.hasOwnProperty(thisBusID)) {\n      thisBusData = BusDataObj[thisBusID];\n    } else {\n      continue;\n    }\n    processedItem.position = {\n      latitude: parseFloat(thisBusData.Latitude),\n      longitude: parseFloat(thisBusData.Longitude)\n    };\n\n    // Search data from 'Route'\n    let searchedRoute = {};\n    let isRouteSearched = false;\n    for (const key in Route) {\n      const thisRouteItem = Route[key];\n      const pid = thisRouteItem.pid;\n      if (pid.indexOf(thisRouteID) > -1) {\n        searchedRoute = thisRouteItem;\n        isRouteSearched = true;\n        break;\n      }\n    }\n    processedItem.RouteName = isRouteSearched ? searchedRoute.n : '';\n    processedItem.RouteID = isRouteSearched ? searchedRoute.id : null;\n\n    const StopKey = `s_${thisStopID}`;\n    if (!result.hasOwnProperty(StopKey)) {\n      result[StopKey] = [];\n    }\n    result[StopKey].push(processedItem);\n  }\n  return result;\n}\n\ninterface FormattedBusStatus {\n  onStop: boolean;\n  situation: string;\n  text: string;\n}\n\ninterface FormattedBusPosition {\n  longitude: number;\n  latitude: number;\n}\n\nexport function parseCarType(CarType: '0' | '1' | '2' | '3'): '' | '' | '' | '' | '' {\n  let type = '';\n  switch (CarType) {\n    case '0':\n      type = '';\n      break;\n    case '1':\n      type = '';\n      break;\n    case '2':\n      type = '';\n      break;\n    case '3':\n      type = '';\n      break;\n    default:\n      type = '';\n  }\n  return type;\n}\n\nexport function parseCarOnStop(CarOnStop: '0' | '1'): string {\n  let onStop = '';\n  switch (CarOnStop) {\n    case '0':\n      onStop = '';\n      break;\n    case '1':\n      onStop = '';\n      break;\n    default:\n      onStop = ''; // Handle unexpected values if necessary\n  }\n  return onStop;\n}\n\nexport function parseBusStatus(BusStatus: '0' | '1' | '2' | '3' | '4' | '5' | '99'): string {\n  let situation = '';\n  switch (BusStatus) {\n    case '0':\n      situation = '';\n      break;\n    case '1':\n      situation = '';\n      break;\n    case '2':\n      situation = '';\n      break;\n    case '3':\n      situation = '';\n      break;\n    case '4':\n      situation = '';\n      break;\n    case '5':\n      situation = '';\n      break;\n    case '99':\n      situation = '';\n      break;\n    default:\n      situation = ''; // Handle unexpected values if necessary\n  }\n  return situation;\n}\n\nexport interface FormattedBus {\n  type: '' | '' | '' | '' | '';\n  carNumber: string;\n  status: FormattedBusStatus;\n  RouteName: string;\n  onThisRoute: boolean;\n  index: number;\n  position: FormattedBusPosition;\n}\n\nexport function formatBus(batchFoundBus: BatchFoundBus): FormattedBus {\n  const result = {} as FormattedBus;\n\n  const CarType = batchFoundBus.CarType;\n  const type = parseCarType(CarType);\n  result.type = type;\n\n  const CarOnStop = batchFoundBus.CarOnStop;\n  const onStop = parseCarOnStop(CarOnStop);\n\n  const BusStatus = batchFoundBus.BusStatus;\n  const situation = parseBusStatus(BusStatus);\n\n  result.carNumber = batchFoundBus.BusID;\n  result.status = {\n    onStop: onStop,\n    situation: situation,\n    text: `${onStop} | ${situation}`\n  };\n  result.RouteName = batchFoundBus.RouteName;\n  result.onThisRoute = batchFoundBus.onThisRoute;\n  result.index = batchFoundBus.index;\n  result.position = batchFoundBus.position;\n  return result;\n}\n","import { getTextWidth } from './graphic';\n\nexport function getUnicodes(string: string, unique: boolean = true): Array<number> {\n  let result = [];\n  if (typeof string === 'string') {\n    const stringLength = string.length;\n    for (let i = 0; i < stringLength; i++) {\n      const unicode = string.charCodeAt(i);\n      if (result.indexOf(unicode) < 0 || !unique) {\n        result.push(unicode);\n      }\n    }\n  }\n  return result;\n}\n\nexport function containPhoneticSymbols(string: string): boolean {\n  const regex = /[\\u3100-\\u312F\\\\\\\\]/gm;\n  if (regex.test(string)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function truncateText(text: string, weight: number, size: string, fontFamily: string, maxWidth: number): string {\n  const ellipsis = '...';\n  const ellipsisWidth = getTextWidth(ellipsis, weight, size, fontFamily);\n  const fullTextWidth = getTextWidth(text, weight, size, fontFamily);\n  const fullTextLength = text.length;\n  if (fullTextLength === 0) {\n    return text;\n  }\n  if (fullTextWidth <= maxWidth) {\n    return text;\n  } else {\n    const averageCharacterWidth = fullTextWidth / fullTextLength;\n    const truncatedLength = Math.floor(maxWidth / averageCharacterWidth) - 2;\n    let lengthAdjustment = 0;\n    let lastLength = 0;\n    for (let i = 0; i < 5; i++) {\n      const adjustedText = text.substring(0, truncatedLength + lengthAdjustment);\n      const adjustedTextWidth = getTextWidth(adjustedText, weight, size, fontFamily) + ellipsisWidth;\n      if (adjustedTextWidth <= maxWidth) {\n        lastLength = truncatedLength + lengthAdjustment;\n        lengthAdjustment += 1;\n      } else {\n        break;\n      }\n    }\n    return `${text.substring(0, lastLength)}${ellipsis}`;\n  }\n}\n\nexport function formatNumberWithSuffix(num: number, maxLength: number = 4): string {\n  const suffixes = ['', 'K', 'M', 'B', 'T', 'Q'];\n  let magnitude = 0;\n\n  while (Math.abs(num) >= 1000 && magnitude < suffixes.length - 1) {\n    num /= 1000;\n    magnitude++;\n  }\n\n  let numStr = num.toFixed(1).replace(/\\.0$/, '');\n\n  while (numStr.length + suffixes[magnitude].length > maxLength && numStr.includes('.')) {\n    numStr = numStr.slice(0, -1);\n  }\n\n  return numStr + suffixes[magnitude];\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface RouteItem {\n  providerId: number;\n  providerName: string;\n  nameZh: string; // name in Chinese\n  nameEn: string; // name in English\n  aliasName: string; // another name in Chinese\n  pathAttributeId: number;\n  pathAttributeNId: string;\n  pathAttributeName: string; // another name in Chinese\n  pathAttributeEname: string; // another name in English\n  buildPeriod: '1' | '2' | '3' | '9' | '10';\n  departureZh: string; // departure stop name in Chinese\n  destinationZh: string; // destination stop name in Chinese\n  departureEn: string; // departure stop name in English\n  destinationEn: string; // destination stop name in English\n  goFirstBusTime: string; // time code (hhmm)\n  goLastBusTime: string;\n  backFirstBusTime: string;\n  backLastBusTime: string;\n  offPeakHeadway: string; // time code (hhmm or mm)\n  busTimeDesc: string;\n  roadMapUrl: string;\n  headwayDesc: string;\n  holidayGoFirstBusTime: string;\n  holidayBackFirstBusTime: string;\n  holidayBackLastBusTime: string;\n  holidayGoLastBusTime: string;\n  holidayBusTimeDesc: string;\n  realSequence: string; // number in string\n  holidayHeadwayDesc: string;\n  holidayOffPeakHeadway: string;\n  holidayPeakHeadway: string;\n  segmentBufferEn: string;\n  ticketPriceDescriptionZh: string;\n  ticketPriceDescriptionEn: string;\n  peakHeadway: string;\n  ttiaPathId: string;\n  segmentBufferZh: string;\n  distance: string;\n  NId: string;\n  Id: number; // RouteID\n  routeType: string;\n}\n\nexport type Route = Array<RouteItem>;\n\nexport interface SimplifiedRouteItem {\n  pd: number;\n  n: string;\n  pid: Array<number>;\n  dep: string;\n  des: string;\n  id: number;\n}\n\nexport type SimplifiedRoute = { [key: string]: SimplifiedRouteItem };\n\nlet RouteAPIVariableCache_available: boolean = false;\nlet RouteAPIVariableCache_data: object = {};\n\nasync function simplifyRoute(Route: Route): Promise<SimplifiedRoute> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"simplifyRoute-worker\" */ './simplifyRoute-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(Route); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getRoute(requestID: string, simplify: boolean = true): Promise<SimplifiedRoute | Route> {\n  async function getData() {\n    const apis = [\n      [0, 10],\n      [1, 10]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = [];\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getRoute_${api.e[0]}`, 'json');\n      result = result.concat(data.BusInfo);\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n    }\n    return result;\n  }\n  if (simplify === false) {\n    return await getData();\n  }\n  const cacheTimeToLive = 60 * 60 * 24 * 1 * 1000;\n  const cacheKey = 'bus_route_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    const simplified_result = await simplifyRoute(result);\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n    if (!RouteAPIVariableCache_available) {\n      RouteAPIVariableCache_available = true;\n      RouteAPIVariableCache_data = simplified_result;\n    }\n    return simplified_result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      const simplified_result = await simplifyRoute(result);\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n      if (!RouteAPIVariableCache_available) {\n        RouteAPIVariableCache_available = true;\n        RouteAPIVariableCache_data = simplified_result;\n      }\n      return simplified_result;\n    } else {\n      if (!RouteAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        RouteAPIVariableCache_available = true;\n        RouteAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getRoute_0', 0, true);\n      setDataReceivingProgress(requestID, 'getRoute_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return RouteAPIVariableCache_data;\n    }\n  }\n}\n","import { getIntersection } from '../../tools/array';\nimport { generateIdentifier } from '../../tools/index';\nimport { getUnicodes } from '../../tools/text';\nimport { getCarInfo, SimplifiedCarInfo } from '../apis/getCarInfo/index';\nimport { getLocation, MergedLocation } from '../apis/getLocation/index';\nimport { getRoute, SimplifiedRoute, SimplifiedRouteItem } from '../apis/getRoute/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../apis/loader';\n\nexport async function searchRouteByName(query: string): Promise<Array<SimplifiedRouteItem>> {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  let result: Array<SimplifiedRouteItem> = [];\n  for (const key in Route) {\n    const thisRoute = Route[key];\n    if (String(thisRoute.n).indexOf(query) > -1) {\n      result.push(thisRoute);\n    }\n  }\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  return result;\n}\n\nexport async function searchRouteByRouteID(RouteID: number): Promise<SimplifiedRouteItem | false> {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  let result = {} as SimplifiedRouteItem;\n  const routeKey = `r_${RouteID}`;\n  if (!Route.hasOwnProperty(routeKey)) {\n    return false;\n  }\n  result = Route[routeKey];\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  return result;\n}\n\nexport async function searchRouteByPathAttributeId(PathAttributeId: number): Promise<Array<SimplifiedRouteItem>> {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  let result: Array<SimplifiedRouteItem> = [];\n  for (const key in Route) {\n    const thisRoute = Route[key];\n    if (String(thisRoute.pid).indexOf(PathAttributeId) > -1) {\n      result.push(thisRoute);\n    }\n  }\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  return result;\n}\n\nexport interface SearchItem {\n  id: string | number | Array<number>;\n  pid: Array<number>;\n  dep: string;\n  des: string;\n  n: string;\n  hash: string;\n  lo: Array<number>;\n  la: Array<number>;\n  r: Array<Array<number>>;\n  s: Array<Array<number>>;\n  type: 0 | 1 | 2; // 0: route, 1: location, 2: car info\n}\n\nexport interface SearchResult {\n  item: SearchItem;\n  score: number;\n}\n\nexport type SearchIndex = { [unicodeKey: string]: Array<number> };\n\nlet searchIndex: SearchIndex = {};\nlet searchList: Array<SearchItem> = [];\nlet readyToSearch: boolean = false;\n\nexport async function prepareForSearch() {\n  if (readyToSearch) {\n    return;\n  }\n\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  const mergedLocation = (await getLocation(requestID, 1)) as MergedLocation;\n  const CarInfo = (await getCarInfo(requestID, true)) as SimplifiedCarInfo;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n\n  let index: SearchIndex = {};\n  let list: Array<SearchItem> = [];\n  let i: number = 0;\n  for (const key in Route) {\n    const thisRoute = Route[key];\n    const thisItem = {\n      id: thisRoute.id,\n      pid: thisRoute.pid,\n      dep: thisRoute.dep,\n      des: thisRoute.des,\n      n: thisRoute.n,\n      hash: '',\n      lo: '',\n      la: '',\n      r: '',\n      s: '',\n      type: 0\n    };\n    list.push(thisItem);\n    const unicodes = getUnicodes(`${thisItem.n.toLowerCase()}${thisItem.dep.toLowerCase()}${thisItem.des.toLowerCase()}`, true);\n    for (const unicode of unicodes) {\n      const key = `u_${unicode}`;\n      if (!index.hasOwnProperty(key)) {\n        index[key] = [];\n      }\n      index[key].push(i);\n    }\n    i += 1;\n  }\n  for (const key in mergedLocation) {\n    const thisLocation = mergedLocation[key];\n    const thisItem = {\n      id: thisLocation.id,\n      n: thisLocation.n,\n      lo: thisLocation.lo,\n      la: thisLocation.la,\n      r: thisLocation.r,\n      s: thisLocation.s,\n      hash: thisLocation.hash,\n      dep: '',\n      des: '',\n      pid: [],\n      type: 1\n    };\n    list.push(thisItem);\n    const unicodes = getUnicodes(thisItem.n.toLowerCase(), true);\n    for (const unicode of unicodes) {\n      const key = `u_${unicode}`;\n      if (!index.hasOwnProperty(key)) {\n        index[key] = [];\n      }\n      index[key].push(i);\n    }\n    i += 1;\n  }\n  for (const key in CarInfo) {\n    const thisCarInfo = CarInfo[key];\n    const thisItem = {\n      id: thisCarInfo.BusId,\n      pid: [],\n      dep: '',\n      des: '',\n      n: thisCarInfo.CarNum,\n      hash: '',\n      lo: '',\n      la: '',\n      r: '',\n      s: '',\n      type: 2\n    };\n    list.push(thisItem);\n    const unicodes = getUnicodes(thisItem.n.toLowerCase(), true);\n    for (const unicode of unicodes) {\n      const key = `u_${unicode}`;\n      if (!index.hasOwnProperty(key)) {\n        index[key] = [];\n      }\n      index[key].push(i);\n    }\n    i += 1;\n  }\n  searchIndex = index;\n  searchList = list;\n  readyToSearch = true;\n}\n\nfunction calculateSearchResultScore(queryUnicodes: Array<number>, resultUnicodes: Array<number>): number {\n  // 1. Index data by characters for entries well-differentiated in characters\n  // 2. The results are ranked by positional difference for relevance\n  // 3. Some entries are prioritized for exact matches\n  let score = 0;\n  let i = 0;\n  for (const unicode of resultUnicodes) {\n    const indexOfUnicode = queryUnicodes.indexOf(unicode, i);\n    score += indexOfUnicode - i;\n    i += 1;\n  }\n  if (queryUnicodes === resultUnicodes) {\n    score = Math.abs(score) * 10;\n  }\n  return score;\n}\n\nexport function searchFor(query: string, type: SearchItem['type'] | -1, limit: number): Array<SearchResult> {\n  if (!readyToSearch) {\n    return [];\n  }\n\n  const lowerCaseQuery = query.toLowerCase();\n  const queryUnicodes = getUnicodes(lowerCaseQuery, true);\n  const asIsQueryUnicodes = getUnicodes(lowerCaseQuery, false);\n  let unicodeGroups = [];\n\n  for (const unicode of queryUnicodes) {\n    const key = `u_${unicode}`;\n    if (searchIndex.hasOwnProperty(key)) {\n      unicodeGroups.push(searchIndex[key]);\n    }\n  }\n\n  unicodeGroups.sort(function (a, b) {\n    return a.length - b.length;\n  });\n\n  const unicodeGroupsLength1 = unicodeGroups.length - 1;\n  let intersection = [];\n\n  if (unicodeGroupsLength1 === 0) {\n    intersection = unicodeGroups[0];\n  }\n\n  if (unicodeGroupsLength1 > 0) {\n    for (let i = 0; i < unicodeGroupsLength1; i++) {\n      const currentGroup = unicodeGroups[i];\n      const nextGroup = unicodeGroups[i + 1];\n      if (i === 0) {\n        intersection = getIntersection(currentGroup, nextGroup);\n      } else {\n        intersection = getIntersection(intersection, nextGroup);\n      }\n    }\n  }\n\n  let result: Array<SearchResult> = [];\n  let quantity: number = 0;\n\n  const exactMatchIds = new Set(); // Track exact matches to avoid duplicates\n  if (type === -1 || type === 2) {\n    // Prioritize exact matches for buses\n    const exactMatches = searchList.filter((item) => item.n === lowerCaseQuery && item.type === 2);\n    for (const item of exactMatches) {\n      result.push({\n        item: item,\n        score: Infinity // Highest possible score for exact matches\n      });\n      exactMatchIds.add(item.id);\n      quantity += 1;\n      if (quantity >= limit) {\n        break;\n      }\n    }\n  }\n\n  if (quantity < limit) {\n    for (const j of intersection) {\n      let thisItem = searchList[j];\n\n      // Check if the item is of the type\n      if (type !== -1 && type !== thisItem.type) {\n        continue;\n      }\n\n      // Check if the item is not already an exact match\n      if (exactMatchIds.has(thisItem.id)) {\n        continue;\n      }\n\n      const score = calculateSearchResultScore(asIsQueryUnicodes, getUnicodes(thisItem.n, false));\n      if (quantity < limit) {\n        result.push({\n          item: thisItem,\n          score: score\n        });\n      } else {\n        break;\n      }\n      quantity += 1;\n    }\n  }\n\n  result.sort(function (a, b) {\n    return b.score - a.score;\n  });\n\n  return result;\n}\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { getBusData } from '../apis/getBusData/index';\nimport { getBusEvent } from '../apis/getBusEvent/index';\nimport { CarInfoItem, getCarInfo } from '../apis/getCarInfo/index';\nimport { getLocation, SimplifiedLocation } from '../apis/getLocation/index';\nimport { getStop } from '../apis/getStop/index';\nimport { parseBusStatus, parseCarOnStop, parseCarType } from '../apis/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../apis/loader';\nimport { searchRouteByPathAttributeId } from '../search/index';\n\nexport interface integratedBus {\n  properties: Array<{\n    key: string;\n    icon: MaterialSymbols;\n    value: string;\n  }>;\n  RouteID: number;\n  FullPathAttributeId: Array<number>;\n}\n\nexport async function integrateBus(id: CarInfoItem['BusId'], requestID: string): Promise<integratedBus> {\n  const carKey = `c_${id}`;\n  const CarInfo = await getCarInfo(requestID, true);\n  const BusData = await getBusData(requestID);\n  const BusEvent = await getBusEvent(requestID);\n  const Stop = await getStop(requestID);\n  const Location = (await getLocation(requestID, 0)) as SimplifiedLocation;\n\n  let result: integratedBus = {\n    properties: [],\n    LocationName: ''\n  };\n\n  // Collect data from CarInfo\n  let thisCar = {};\n  if (CarInfo.hasOwnProperty(carKey)) {\n    thisCar = CarInfo[carKey];\n  } else {\n    return result;\n  }\n\n  const thisCarNumber = thisCar.CarNum;\n  result.properties.push({\n    key: 'car_number',\n    icon: 'tag',\n    value: thisCarNumber\n  });\n\n  const thisCarType = thisCar.CarType;\n  const type = parseCarType(thisCarType);\n  result.properties.push({\n    key: 'car_type',\n    icon: 'directions_bus',\n    value: type\n  });\n\n  // Collect data from BusData\n  let thisBusDataItem = {};\n  for (const BusDataItem of BusData) {\n    const thisBusDataItemBusID = BusDataItem.BusID;\n    if (thisBusDataItemBusID === thisCarNumber) {\n      thisBusDataItem = BusDataItem;\n      break;\n    }\n  }\n  const thisBusDataItemPathAttributeId = parseInt(thisBusDataItem.RouteID);\n  // result.PathAttributeId = thisBusDataItemPathAttributeId;\n  const thisBusDataItemBusStatus = thisBusDataItem.BusStatus;\n  const situation = parseBusStatus(thisBusDataItemBusStatus);\n  const thisBusDataItemGoBack = parseInt(thisBusDataItem.GoBack);\n\n  // Collect data from BusEvent\n  let thisBusEventItem = {};\n  for (const BusEventItem of BusEvent) {\n    const thisBusEventItemBusID = BusEventItem.BusID;\n    if (thisBusEventItemBusID === thisCarNumber) {\n      thisBusEventItem = BusEventItem;\n      break;\n    }\n  }\n\n  const thisBusEventItemCarOnStop = thisBusEventItem.CarOnStop;\n  const onStop = parseCarOnStop(thisBusEventItemCarOnStop);\n  result.properties.push({\n    key: 'status',\n    icon: 'vital_signs',\n    value: `${onStop} | ${situation}`\n  });\n  const thisBusEventItemStopID = thisBusEventItem.StopID;\n\n  // Search routes\n  const searchedRoutes = await searchRouteByPathAttributeId(thisBusDataItemPathAttributeId);\n  let searchedRoute = {};\n  if (searchedRoutes.length > 0) {\n    searchedRoute = searchedRoutes[0];\n  } else {\n    return result;\n  }\n  const thisRouteID = searchedRoute.id;\n  const thisRouteFullPathAttributeId = searchedRoute.pid;\n  const thisRouteName = searchedRoute.n;\n  const thisRouteDeparture = searchedRoute.dep;\n  const thisRouteDestination = searchedRoute.des;\n  const thisRouteDirection = [thisRouteDestination, thisRouteDeparture, ''][thisBusDataItemGoBack ? thisBusDataItemGoBack : 0];\n  result.properties.push({\n    key: 'route',\n    icon: 'route',\n    value: `${thisRouteName} - ${thisRouteDirection}`\n  });\n\n  result.RouteID = thisRouteID;\n  result.FullPathAttributeId = thisRouteFullPathAttributeId;\n\n  // Collect data from Stop\n  const StopKey = `s_${thisBusEventItemStopID}`;\n  let thisStopItem = {};\n  if (Stop.hasOwnProperty(StopKey)) {\n    thisStopItem = Stop[StopKey];\n  } else {\n    return result;\n  }\n  const thisStopItemStopLocationId = thisStopItem.stopLocationId;\n\n  // Collect data drom Location\n  const LocationKey = `l_${thisStopItemStopLocationId}`;\n  const thisLocationItem = Location[LocationKey];\n  const thisLocationItemName = thisLocationItem.n;\n  result.properties.push({\n    key: 'location_name',\n    icon: 'location_on',\n    value: thisLocationItemName\n  });\n\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  return result;\n}\n","import { generateIdentifier } from '../../tools/index';\nimport { dateToRelativeTime } from '../../tools/time';\nimport { getCarInfo } from '../apis/getCarInfo/index';\nimport { getLocation, MergedLocation } from '../apis/getLocation/index';\nimport { getRoute } from '../apis/getRoute/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../apis/loader';\nimport { lfGetItem, lfListItemKeys, lfRemoveItem, lfSetItem } from '../storage/index';\n\ninterface RecentViewRoute {\n  type: 'route';\n  time: string;\n  name: string;\n  id: number;\n}\n\ninterface RecentViewLocation {\n  type: 'location';\n  time: string;\n  name: string;\n  hash: string;\n}\n\ninterface RecentViewBus {\n  type: 'bus';\n  time: string;\n  name: string;\n  id: number;\n}\n\ninterface RecentViewEmpty {\n  type: 'empty';\n  time: string;\n  name: string;\n  id: number;\n}\n\nexport type RecentView = RecentViewRoute | RecentViewLocation | RecentViewBus | RecentViewEmpty;\n\nexport type RecentViewArray = Array<RecentView>;\n\nexport async function listRecentViews(): Promise<RecentViewArray> {\n  const result = [];\n  const now = new Date().getTime();\n  const keys = await lfListItemKeys(8);\n  for (const key of keys) {\n    const item = await lfGetItem(8, key);\n    const itemObject = JSON.parse(item) as RecentView;\n    const itemObjectTime = new Date(itemObject.time).getTime();\n    if (now - itemObjectTime <= 24 * 60 * 60 * 14 * 1000) {\n      result.push(itemObject);\n    }\n  }\n  if (result.length === 0) {\n    result.push({\n      type: 'empty',\n      time: new Date().toISOString(),\n      name: '',\n      id: 0\n    });\n  }\n  return result;\n}\n\nexport async function discardExpiredRecentViews() {\n  const now = new Date().getTime();\n  const keys = await lfListItemKeys(8);\n  for (const key of keys) {\n    const item = await lfGetItem(8, key);\n    const itemObject = JSON.parse(item) as RecentView;\n    const itemObjectTime = new Date(itemObject.time).getTime();\n    if (now - itemObjectTime > 24 * 60 * 60 * 14 * 1000) {\n      await lfRemoveItem(8, key);\n    }\n  }\n}\n\nexport async function logRecentView(type: RecentView['type'], param: RecentViewRoute['id'] | RecentViewLocation['hash'] | RecentViewBus['id']) {\n  const requestID = generateIdentifier();\n  const key = `${type}_${param}`;\n  const time = new Date().toISOString();\n  const existingJSON = await lfGetItem(8, key);\n  if (existingJSON) {\n    const existingRecentViewObject = JSON.parse(existingJSON) as RecentView;\n    existingRecentViewObject.time = time;\n    await lfSetItem(8, key, JSON.stringify(existingRecentViewObject));\n  } else {\n    switch (type) {\n      case 'route': {\n        const Route = await getRoute(requestID, true);\n        const routeKey = `r_${param}`;\n        if (Route.hasOwnProperty(routeKey)) {\n          const thisRoute = Route[routeKey];\n          const name = thisRoute.n;\n          const recentViewRouteObject: RecentViewRoute = {\n            type: 'route',\n            time: time,\n            name: name,\n            id: param\n          };\n          await lfSetItem(8, key, JSON.stringify(recentViewRouteObject));\n        }\n        break;\n      }\n      case 'location': {\n        const Location = (await getLocation(requestID, 1)) as MergedLocation;\n        const LocationKey = `ml_${param}`;\n        if (Location.hasOwnProperty(LocationKey)) {\n          const thisLocation = Location[LocationKey];\n          const name = thisLocation.n;\n          const recentViewLocationObject: RecentViewLocation = {\n            type: 'location',\n            time: time,\n            name: name,\n            hash: param\n          };\n          await lfSetItem(8, key, JSON.stringify(recentViewLocationObject));\n        }\n        break;\n      }\n      case 'bus': {\n        const CarInfo = await getCarInfo(requestID, true);\n        const CarKey = `c_${param}`;\n        if (CarInfo.hasOwnProperty(CarKey)) {\n          const thisCar = CarInfo[CarKey];\n          const name = thisCar.CarNum;\n          const recentViewBusObject: RecentViewBus = {\n            type: 'bus',\n            time: time,\n            name: name,\n            id: param\n          };\n          await lfSetItem(8, key, JSON.stringify(recentViewBusObject));\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  }\n}\n\nexport async function getRecentView(type: RecentView['type'], param: RecentViewRoute['id'] | RecentViewLocation['hash'] | RecentViewBus['id']): Promise<RecentView | boolean> {\n  const key = `${type}_${param}`;\n  const existingRecentViewRoute = await lfGetItem(8, key);\n  if (existingRecentViewRoute) {\n    return JSON.parse(existingRecentViewRoute);\n  } else {\n    return false;\n  }\n}\n\ninterface integratedRecentViewTime {\n  absolute: string;\n  relative: string;\n}\n\nexport interface integratedRecentViewRoute {\n  type: 'route';\n  time: integratedRecentViewTime;\n  name: string;\n  id: number;\n  pid: Array<number>;\n}\n\nexport interface integratedRecentViewLocation {\n  type: 'location';\n  time: integratedRecentViewTime;\n  name: string;\n  hash: string;\n}\n\nexport interface integratedRecentViewBus {\n  type: 'bus';\n  time: integratedRecentViewTime;\n  name: string;\n  id: number;\n}\n\nexport interface integratedRecentViewEmpty {\n  type: 'empty';\n  time: integratedRecentViewTime;\n  name: string;\n  id: number;\n}\n\nexport type integratedRecentView = integratedRecentViewRoute | integratedRecentViewLocation | integratedRecentViewBus | integratedRecentViewEmpty;\n\nexport interface integratedRecentViews {\n  items: Array<integratedRecentView>;\n  itemQuantity: number;\n  dataUpdateTime: number;\n}\n\nexport async function integrateRecentViews(requestID: string): Promise<integratedRecentViews> {\n  const recentViewList = await listRecentViews();\n  const Route = await getRoute(requestID, true);\n  let items: Array<integratedRecentView> = [];\n  let itemQuantity: number = 0;\n  for (const recentView of recentViewList) {\n    const recentViewType = recentView.type;\n    const recentViewTime = new Date(recentView.time);\n    switch (recentViewType) {\n      case 'route': {\n        let integratedRecentViewRoute: integratedRecentViewRoute = {};\n        integratedRecentViewRoute.type = 'route';\n        const thisRouteName = recentView.name;\n        integratedRecentViewRoute.name = thisRouteName;\n        const thisRouteID = recentView.id;\n        integratedRecentViewRoute.id = thisRouteID;\n        const thisRouteKey = `r_${thisRouteID}`;\n        const thisRoute = Route[thisRouteKey];\n        const thisRoutePathAttributeId = thisRoute.pid;\n        integratedRecentViewRoute.pid = thisRoutePathAttributeId;\n        integratedRecentViewRoute.time = {\n          absolute: recentViewTime.getTime(),\n          relative: dateToRelativeTime(recentViewTime)\n        };\n        items.push(integratedRecentViewRoute);\n        itemQuantity += 1;\n        break;\n      }\n      case 'location': {\n        let integratedRecentViewLocation: integratedRecentViewLocation = {};\n        integratedRecentViewLocation.type = 'location';\n        const thisLocationHash = recentView.hash;\n        integratedRecentViewLocation.hash = thisLocationHash;\n        const thisLocationName = recentView.name;\n        integratedRecentViewLocation.name = thisLocationName;\n        integratedRecentViewLocation.time = {\n          absolute: recentViewTime.getTime(),\n          relative: dateToRelativeTime(recentViewTime)\n        };\n        items.push(integratedRecentViewLocation);\n        itemQuantity += 1;\n        break;\n      }\n      case 'bus': {\n        let integratedRecentViewBus: integratedRecentViewBus = {};\n        integratedRecentViewBus.type = 'bus';\n        const thisBusID = recentView.id;\n        integratedRecentViewBus.id = thisBusID;\n        const thisBusName = recentView.name;\n        integratedRecentViewBus.name = thisBusName;\n        integratedRecentViewBus.time = {\n          absolute: recentViewTime.getTime(),\n          relative: dateToRelativeTime(recentViewTime)\n        };\n        items.push(integratedRecentViewBus);\n        itemQuantity += 1;\n        break;\n      }\n      case 'empty': {\n        let integratedRecentViewEmpty: integratedRecentViewEmpty = {};\n        integratedRecentViewEmpty.type = 'empty';\n        const thisEmptyID = recentView.id;\n        integratedRecentViewEmpty.id = thisEmptyID;\n        const thisEmptyName = recentView.name;\n        integratedRecentViewEmpty.name = thisEmptyName;\n        integratedRecentViewEmpty.time = {\n          absolute: recentViewTime.getTime(),\n          relative: dateToRelativeTime(recentViewTime)\n        };\n        items.push(integratedRecentViewEmpty);\n        itemQuantity = 1;\n        break;\n      }\n      default:\n        break;\n    }\n  }\n  items.sort(function (a, b) {\n    return b.time.absolute - a.time.absolute;\n  });\n\n  const result: integratedRecentViews = {\n    items: items,\n    itemQuantity: itemQuantity,\n    dataUpdateTime: new Date().getTime()\n  };\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  return result;\n}\n","import { elementQuerySelector } from '../../tools/elements';\nimport { MaterialSymbols } from './material-symbols-type';\n\nexport function getIconHTML(identifier: MaterialSymbols): string {\n  return /*html*/ `<span class=\"css_material_symbols_rounded\">${identifier}</span>`;\n}\n\nexport function getIconElement(identifier: MaterialSymbols): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  iconElement.innerText = identifier;\n  return iconElement;\n}\n\nexport function getBlankIconElement(): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  return iconElement;\n}\n\nexport function setIcon(parentElement: HTMLElement, identifier: MaterialSymbols): void {\n  const thisSpanElement = elementQuerySelector(parentElement, 'span.css_material_symbols_rounded');\n  thisSpanElement.innerText = identifier;\n}\n","import { integratedBus } from '../../data/bus/index';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { compareThings } from '../../tools/index';\nimport { getBlankIconElement, setIcon } from '../icons/index';\nimport { GeneratedElement } from '../index';\nimport { BusPropertiesGroupBodyElement } from './index';\n\nlet previousProperties = [];\nlet previousSkeletonScreen: boolean = false;\nlet previousAnimation: boolean = false;\n\nfunction generateElementOfBusProperty(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_bus_property');\n\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_bus_property_icon');\n  iconElement.appendChild(getBlankIconElement());\n\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_bus_property_value');\n\n  element.appendChild(iconElement);\n  element.appendChild(valueElement);\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nexport function setUpBusPropertiesFieldSkeletonScreen() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultPropertyQuantity = 5;\n  let properties = [];\n  for (let i = 0; i < defaultPropertyQuantity; i++) {\n    properties.push({\n      key: i,\n      icon: '',\n      value: ''\n    });\n  }\n  updateBusPropertiesField(properties, true, playing_animation);\n}\n\nexport function updateBusPropertiesField(properties: integratedBus['properties'], skeletonScreen: boolean, animation: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisProperty: object, previousProperty: object): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: object): void {\n      const thisPropertyIconElement = elementQuerySelector(thisElement, '.css_bus_property_icon');\n      setIcon(thisPropertyIconElement, thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: object): void {\n      elementQuerySelector(thisElement, '.css_bus_property_value').innerText = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', animation);\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', skeletonScreen);\n    }\n\n    if (previousProperty === null || previousProperty === undefined) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n      updateAnimation(thisElement, animation);\n    } else {\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n    }\n  }\n\n  const propertyQuantity = properties.length;\n\n  // BusGroupPropertiesElement.setAttribute('skeleton-screen', skeletonScreen);\n\n  const currentPropertyCapacity = elementQuerySelectorAll(BusPropertiesGroupBodyElement, '.css_bus_property').length;\n  if (propertyQuantity !== currentPropertyCapacity) {\n    const difference = currentPropertyCapacity - propertyQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        // const propertyIndex = currentPropertyCapacity + o;\n        const newPropertyElement = generateElementOfBusProperty(skeletonScreen);\n        fragment.appendChild(newPropertyElement.element);\n      }\n      BusPropertiesGroupBodyElement.append(fragment);\n    } else {\n      const propertyElements = elementQuerySelectorAll(BusPropertiesGroupBodyElement, '.css_bus_property');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const propertyIndex = currentPropertyCapacity - 1 - o;\n        propertyElements[propertyIndex].remove();\n      }\n    }\n  }\n\n  const propertyElements = elementQuerySelectorAll(BusPropertiesGroupBodyElement, '.css_bus_property');\n  for (let i = 0; i < propertyQuantity; i++) {\n    const thisPropertyElement = propertyElements[i];\n    const thisProperty = properties[i];\n    if (previousProperties.length === 0) {\n      updateProperty(thisPropertyElement, thisProperty, null);\n    } else {\n      updateProperty(thisPropertyElement, thisProperty, previousProperties[i]);\n    }\n  }\n\n  previousProperties = properties;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n","import { integrateBus } from '../../data/bus/index';\nimport { logRecentView } from '../../data/recent-views/index';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { setUpBusPropertiesFieldSkeletonScreen, updateBusPropertiesField } from './properties';\n\nexport const BusField = documentQuerySelector('.css_bus_field');\nexport const BusHeadElement = elementQuerySelector(BusField, '.css_bus_head');\nexport const BusBodyElement = elementQuerySelector(BusField, '.css_bus_body');\nexport const BusGroupsElement = elementQuerySelector(BusBodyElement, '.css_bus_groups');\nexport const BusPropertiesGroupElement = elementQuerySelector(BusGroupsElement, '.css_bus_group[group=\"properties\"]');\nexport const BusPropertiesGroupBodyElement = elementQuerySelector(BusPropertiesGroupElement, '.css_bus_group_body');\nexport const BusLocationGroupElement = elementQuerySelector(BusGroupsElement, '.css_bus_group[group=\"location\"]');\n\nexport function openBus(id: number): void {\n  pushPageHistory('Bus');\n  logRecentView('bus', id);\n  BusField.setAttribute('displayed', 'true');\n  initializeBusPage(id);\n  closePreviousPage();\n}\n\nexport function closeBus(): void {\n  // revokePageHistory('Bus');\n  BusField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nasync function initializeBusPage(id: number) {\n  setUpBusPropertiesFieldSkeletonScreen();\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  const integration = await integrateBus(id, requestID);\n  updateBusPropertiesField(integration.properties, false, playing_animation);\n}\n\nfunction updateBusField(integration: object, skeletonScreen: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisItem: object): void {}\n  function updateLocation(thisElement: HTMLElement, thisItem: object): void {}\n}\n","import { generateIdentifier } from '../../tools/index';\nimport { TimePeriod, WeekDayIndexArray } from '../../tools/time';\nimport { lfGetItem, lfListItemKeys, lfSetItem } from '../storage/index';\n\nexport interface PersonalSchedule {\n  name: string;\n  period: TimePeriod;\n  days: WeekDayIndexArray;\n  id: string;\n}\n\nexport type PersonalScheduleArray = Array<PersonalSchedule>;\n\nexport type MergedPersonalScheduleTimeline = { [key: string]: Array<TimePeriod> };\n\nexport async function createPersonalSchedule(name: string, startHours: number, startMinutes: number, endHours: number, endMinutes: number, days: Array<number>): Promise<boolean> {\n  const identifier = generateIdentifier();\n  if (startHours < 0 || startHours > 23 || startMinutes < 0 || startMinutes > 59 || endHours < 0 || endHours > 23 || endMinutes < 0 || endMinutes > 59) {\n    return false;\n  }\n  if (!Number.isInteger(startHours) || !Number.isInteger(startMinutes) || !Number.isInteger(endHours) || !Number.isInteger(endMinutes)) {\n    return false;\n  }\n  if (days.length > 7) {\n    return false;\n  }\n  for (const day of days) {\n    if (typeof day === 'number') {\n      if (day < 0 || day > 6 || !Number.isInteger(day)) {\n        return false;\n      }\n    }\n  }\n\n  const object: PersonalSchedule = {\n    name: name,\n    period: {\n      start: {\n        hours: startHours,\n        minutes: startMinutes\n      },\n      end: {\n        hours: endHours,\n        minutes: endMinutes\n      }\n    },\n    days: days,\n    id: identifier\n  };\n  await lfSetItem(7, identifier, JSON.stringify(object));\n  return true;\n}\n\nexport async function getPersonalSchedule(personalScheduleID: string): Promise<PersonalSchedule> {\n  const existingPersonalSchedule = await lfGetItem(7, personalScheduleID);\n  if (existingPersonalSchedule) {\n    const object = JSON.parse(existingPersonalSchedule);\n    return object;\n  }\n}\n\nexport async function updatePersonalSchedule(personalSchedule: PersonalSchedule): Promise<boolean> {\n  const thisPersonalSchedule = await getPersonalSchedule(personalSchedule.id);\n  if (thisPersonalSchedule) {\n    await lfSetItem(7, personalSchedule.id, JSON.stringify(personalSchedule));\n  }\n}\n\nexport async function listPersonalSchedules(): Promise<PersonalScheduleArray> {\n  const result: PersonalScheduleArray = [];\n  const keys = await lfListItemKeys(7);\n  for (const key of keys) {\n    const existingPersonalSchedule = await lfGetItem(7, key);\n    if (existingPersonalSchedule) {\n      const existingPersonalScheduleObject = JSON.parse(existingPersonalSchedule);\n      result.push(existingPersonalScheduleObject);\n    }\n  }\n\n  result.sort(function (a, b) {\n    return a.period.end.hours * 60 + a.period.end.minutes - (b.period.end.hours * 60 + b.period.end.minutes);\n  });\n\n  result.sort(function (a, b) {\n    return a.period.start.hours * 60 + a.period.start.minutes - (b.period.start.hours * 60 + b.period.start.minutes);\n  });\n\n  return result;\n}\n\nexport async function getMergedPersonalScheduleTimeline(): Promise<MergedPersonalScheduleTimeline> {\n  const personalSchedules = await listPersonalSchedules();\n\n  const result: MergedPersonalScheduleTimeline = {};\n\n  for (const personalSchedule of personalSchedules) {\n    for (const day of personalSchedule.days) {\n      const dayKey = `d_${day}`;\n      if (!result.hasOwnProperty(dayKey)) {\n        result[dayKey] = [];\n      }\n      const object = {\n        start: personalSchedule.period.start,\n        end: personalSchedule.period.end\n      };\n      result[dayKey].push(object);\n    }\n  }\n\n  for (const dayKey in result) {\n    const personalSchedulesOfThisDay = result[dayKey];\n    const personalSchedulesOfThisDayLength = personalSchedulesOfThisDay.length;\n    const mergedPersonalSchedulesOfThisDay = [];\n    for (let i = 0; i < personalSchedulesOfThisDayLength; i++) {\n      const previousPersonalScheduleOfThisDay = personalSchedulesOfThisDay[i - 1] || personalSchedulesOfThisDay[i];\n      const currentPersonalScheduleOfThisDay = personalSchedulesOfThisDay[i];\n      if (mergedPersonalSchedulesOfThisDay.length === 0) {\n        mergedPersonalSchedulesOfThisDay.push(currentPersonalScheduleOfThisDay);\n      } else {\n        // Check whether the current is after the previous and  the current is before the previous's end\n        if (currentPersonalScheduleOfThisDay.start.hours * 60 + currentPersonalScheduleOfThisDay.start.minutes >= previousPersonalScheduleOfThisDay.start.hours * 60 + previousPersonalScheduleOfThisDay.start.minutes && currentPersonalScheduleOfThisDay.start.hours * 60 + currentPersonalScheduleOfThisDay.start.minutes <= previousPersonalScheduleOfThisDay.end.hours * 60 + previousPersonalScheduleOfThisDay.end.minutes) {\n          mergedPersonalSchedulesOfThisDay[mergedPersonalSchedulesOfThisDay.length - 1].end.hours = currentPersonalScheduleOfThisDay.end.hours;\n          mergedPersonalSchedulesOfThisDay[mergedPersonalSchedulesOfThisDay.length - 1].end.minutes = currentPersonalScheduleOfThisDay.end.minutes;\n        } else {\n          mergedPersonalSchedulesOfThisDay.push(currentPersonalScheduleOfThisDay);\n        }\n      }\n    }\n    result[dayKey] = mergedPersonalSchedulesOfThisDay;\n  }\n\n  return result;\n}\n\nexport async function isInPersonalSchedule(date: Date): boolean {\n  const timeline = await getMergedPersonalScheduleTimeline();\n  const day = date.getDay();\n  const dayKey = `d_${day}`;\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n\n  if (timeline.hasOwnProperty(dayKey)) {\n    const personalSchedulesOfTheDay = timeline[dayKey];\n    for (const personalScheduleOfTheDay of personalSchedulesOfTheDay) {\n      if (hours * 60 + minutes >= personalScheduleOfTheDay.start.hours * 60 + personalScheduleOfTheDay.start.minutes && hours * 60 + minutes <= personalScheduleOfTheDay.end.hours * 60 + personalScheduleOfTheDay.end.minutes) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n","import { generateIdentifier } from '../../../tools/index';\nimport { findGlobalExtrema } from '../../../tools/math';\nimport { WeekDayIndex } from '../../../tools/time';\nimport { EstimateTime } from '../../apis/getEstimateTime/index';\nimport { listAllFolderContent } from '../../folder/index';\nimport { isInPersonalSchedule, listPersonalSchedules, PersonalSchedule } from '../../personal-schedule/index';\nimport { lfGetItem, lfListItemKeys, lfRemoveItem, lfSetItem } from '../../storage/index';\n\nconst busArrivalTimeData_writeAheadLog_maxDataLength: number = 32;\nlet busArrivalTimeData_writeAheadLog_id: string = '';\nlet busArrivalTimeData_writeAheadLog_tracking: boolean = false;\nlet busArrivalTimeData_trackedStops: Array<number> = [];\nlet busArrivalTimeData_writeAheadLog_group: BusArrivalTimeDataWriteAheadLog = {\n  data: {},\n  timestamp: 0,\n  id: ''\n};\nlet busArrivalTimeData_writeAheadLog_currentDataLength: number = 0;\n\nexport type BusArrivalTimeData = [estimateTime: number, timestamp: number]; // EstimateTime (seconds), timestamp (milliseconds)\n\nexport type BusArrivalTimeDataGroupStats = Array<number>;\n\nexport interface BusArrivalTimeDataGroup {\n  stats: BusArrivalTimeDataGroupStats;\n  day: WeekDayIndex;\n  max: number;\n  min: number;\n  timestamp: number;\n  id: number; // stop id\n}\n\nexport type BusArrivalTimeDataGroupArray = Array<BusArrivalTimeDataGroup>;\n\nexport interface BusArrivalTimeDataWriteAheadLog {\n  data: {\n    [key: string]: Array<BusArrivalTimeData>;\n  };\n  timestamp: number;\n  id: string;\n}\n\nexport interface BusArrivalTime {\n  personalSchedule: PersonalSchedule;\n  chart: string; // svg\n  day: WeekDayIndex;\n}\n\nexport interface BusArrivalTimes {\n  [stopKey: string]: Array<BusArrivalTime>;\n}\n\nconst getBusArrivalTimeDataStatsWorkerTasks = {};\nlet getBusArrivalTimeDataStatsPort;\n\n// Check if SharedWorker is supported, and fall back to Worker if not\nif (typeof SharedWorker !== 'undefined') {\n  const getBusArrivalTimeDataStatsWorker = new SharedWorker(new URL(/* webpackChunkName: \"getBusArrivalTimeDataStats-worker\" */ './getBusArrivalTimeDataStats-worker.ts', import.meta.url)); // Reusable shared worker\n  getBusArrivalTimeDataStatsPort = getBusArrivalTimeDataStatsWorker.port; // Access the port for communication\n  getBusArrivalTimeDataStatsPort.start(); // Start the port (required by some browsers)\n} else {\n  const getBusArrivalTimeDataStatsWorker = new Worker(new URL(/* webpackChunkName: \"getBusArrivalTimeDataStats-worker\" */ './getBusArrivalTimeDataStats-worker.ts', import.meta.url)); // Fallback to standard worker\n  getBusArrivalTimeDataStatsPort = getBusArrivalTimeDataStatsWorker; // Use Worker directly for communication\n}\n\n// Handle messages from the worker\ngetBusArrivalTimeDataStatsPort.onmessage = function (e) {\n  const [result, taskID] = e.data;\n  if (getBusArrivalTimeDataStatsWorkerTasks[taskID]) {\n    getBusArrivalTimeDataStatsWorkerTasks[taskID](result); // resolve\n    delete getBusArrivalTimeDataStatsWorkerTasks[taskID];\n  }\n};\n\n// Handle errors\ngetBusArrivalTimeDataStatsPort.onerror = function (e) {\n  console.error(e.message);\n};\n\nasync function getBusArrivalTimeDataStats(data: Array<BusArrivalTimeData>): Promise<BusArrivalTimeDataGroupStats> {\n  const taskID = generateIdentifier();\n\n  const result = await new Promise((resolve, reject) => {\n    getBusArrivalTimeDataStatsWorkerTasks[taskID] = resolve; // Store the resolve function for this taskID\n    getBusArrivalTimeDataStatsPort.onerror = function (e) {\n      reject(e.message);\n    };\n    getBusArrivalTimeDataStatsPort.postMessage([data, taskID]); // Send the task to the worker\n  });\n  return result;\n}\n\nfunction mergeBusArrivalTimeDataStats(targetStats: BusArrivalTimeDataGroupStats, sourceStats: BusArrivalTimeDataGroupStats): BusArrivalTimeDataGroupStats {\n  const mergedArray = new Uint32Array(60 * 24);\n  for (let i = 60 * 24 - 1; i >= 0; i--) {\n    mergedArray[i] = targetStats[i] + sourceStats[i];\n  }\n  return Array.from(mergedArray);\n}\n\nexport async function collectBusArrivalTimeData(EstimateTime: EstimateTime) {\n  const now = new Date();\n  const currentTimestamp: number = now.getTime();\n  const currentDay = now.getDay();\n  let needToReset = false;\n  // Initialize\n  if (!busArrivalTimeData_writeAheadLog_tracking) {\n    busArrivalTimeData_writeAheadLog_tracking = true;\n    busArrivalTimeData_writeAheadLog_id = generateIdentifier();\n    busArrivalTimeData_writeAheadLog_group = {\n      id: busArrivalTimeData_writeAheadLog_id,\n      timestamp: currentTimestamp,\n      data: {}\n    };\n    busArrivalTimeData_writeAheadLog_currentDataLength = 0;\n    const allFolderContent = await listAllFolderContent(['stop']);\n    busArrivalTimeData_trackedStops = allFolderContent.map((e) => e.id);\n  }\n\n  // Record EstimateTime\n  if (isInPersonalSchedule(now)) {\n    for (const item of EstimateTime) {\n      const stopID = item.StopID;\n      const stopKey = `s_${stopID}_${currentDay}`;\n      if (busArrivalTimeData_trackedStops.indexOf(stopID) > -1) {\n        if (!busArrivalTimeData_writeAheadLog_group.data.hasOwnProperty(stopKey)) {\n          busArrivalTimeData_writeAheadLog_group.data[stopKey] = [];\n        }\n        busArrivalTimeData_writeAheadLog_group.data[stopKey].push([parseInt(item.EstimateTime), currentTimestamp]);\n      }\n    }\n\n    busArrivalTimeData_writeAheadLog_currentDataLength += 1;\n    if (busArrivalTimeData_writeAheadLog_currentDataLength > busArrivalTimeData_writeAheadLog_maxDataLength) {\n      needToReset = true;\n    }\n\n    if (needToReset || busArrivalTimeData_writeAheadLog_currentDataLength % 8 === 0) {\n      await lfSetItem(5, busArrivalTimeData_writeAheadLog_id, JSON.stringify(busArrivalTimeData_writeAheadLog_group));\n    }\n\n    if (needToReset) {\n      for (const stopID of busArrivalTimeData_trackedStops) {\n        const stopKey = `s_${stopID}_${currentDay}`;\n        const data = busArrivalTimeData_writeAheadLog_group.data[stopKey];\n        const dataGroup = {} as BusArrivalTimeDataGroup;\n        const existingData = await lfGetItem(6, stopKey);\n        if (existingData) {\n          const existingDataObject = JSON.parse(existingData) as BusArrivalTimeDataGroup;\n          const newStats = getBusArrivalTimeDataStats(data);\n          const mergedStats = mergeBusArrivalTimeDataStats(existingDataObject.stats, newStats);\n          dataGroup.stats = mergedStats;\n          const mergedExtrema = findGlobalExtrema(mergedStats);\n          dataGroup.min = mergedExtrema[0];\n          dataGroup.max = mergedExtrema[1];\n          dataGroup.day = currentDay;\n          dataGroup.timestamp = existingDataObject.timestamp;\n          dataGroup.id = stopID;\n        } else {\n          const newStats = getBusArrivalTimeDataStats(data);\n          dataGroup.stats = newStats;\n          const newExtrema = findGlobalExtrema(newStats);\n          dataGroup.min = newExtrema[0];\n          dataGroup.max = newExtrema[1];\n          dataGroup.day = currentDay;\n          dataGroup.timestamp = currentTimestamp;\n          dataGroup.id = stopID;\n        }\n        await lfSetItem(6, stopKey, JSON.stringify(dataGroup));\n        await lfRemoveItem(5, busArrivalTimeData_writeAheadLog_id);\n      }\n      busArrivalTimeData_writeAheadLog_tracking = false;\n    }\n  }\n}\n\nexport async function recoverBusArrivalTimeDataFromWriteAheadLog() {\n  const now = new Date();\n  const currentTimestamp = now.getTime();\n  const currentDay = now.getDay();\n  const keys = await lfListItemKeys(5);\n  for (const key of keys) {\n    const json = await lfGetItem(5, key);\n    const object = JSON.parse(json) as BusArrivalTimeDataWriteAheadLog;\n    const thisID = object.id;\n    for (const stopKey in object.data) {\n      const thisStopData = object.data[stopKey];\n      const dataGroup = {} as BusArrivalTimeDataGroup;\n      const existingData = await lfGetItem(6, stopKey);\n      const stopID = parseInt(stopKey.split('_')[1]);\n      if (existingData) {\n        const existingDataObject = JSON.parse(existingData) as BusArrivalTimeDataGroup;\n        const newStats = getBusArrivalTimeDataStats(thisStopData);\n        const mergedStats = mergeBusArrivalTimeDataStats(existingDataObject.stats, newStats);\n        dataGroup.stats = mergedStats;\n        const newExtremum = findGlobalExtrema(mergedStats);\n        dataGroup.min = newExtremum[0];\n        dataGroup.max = newExtremum[1];\n        dataGroup.day = existingDataObject.day;\n        dataGroup.timestamp = existingDataObject.timestamp;\n        dataGroup.id = stopID;\n      } else {\n        const newStats = getBusArrivalTimeDataStats(thisStopData);\n        dataGroup.stats = newStats;\n        const newExtremum = findGlobalExtrema(newStats);\n        dataGroup.min = newExtremum[0];\n        dataGroup.max = newExtremum[1];\n        dataGroup.day = currentDay;\n        dataGroup.timestamp = currentTimestamp;\n        dataGroup.id = stopID;\n      }\n      await lfSetItem(6, stopKey, JSON.stringify(dataGroup));\n    }\n    await lfRemoveItem(5, thisID);\n  }\n}\n\nexport async function listBusArrivalTimeDataGroups(): Promise<BusArrivalTimeDataGroupArray> {\n  const keys = await lfListItemKeys(6);\n  const result: BusArrivalTimeDataGroupArray = [];\n  for (const key of keys) {\n    const json = await lfGetItem(6, key);\n    if (json) {\n      const object = JSON.parse(json) as BusArrivalTimeDataGroup;\n      result.push(object);\n    }\n  }\n  return result;\n}\n\nconst getBusArrivalTimesWorkerResponses = {};\nlet getBusArrivalTimesPort;\n\n// Check if SharedWorker is supported, and fall back to Worker if not\nif (typeof SharedWorker !== 'undefined') {\n  const getUpdateRateSharedWorker = new SharedWorker(new URL('./getBusArrivalTimes-worker.ts', import.meta.url)); // Reusable shared worker\n  getBusArrivalTimesPort = getUpdateRateSharedWorker.port; // Access the port for communication\n  getBusArrivalTimesPort.start(); // Start the port (required by some browsers)\n} else {\n  const getUpdateRateWorker = new Worker(new URL('./getBusArrivalTimes-worker.ts', import.meta.url)); // Fallback to standard worker\n  getBusArrivalTimesPort = getUpdateRateWorker; // Use Worker directly for communication\n}\n\n// Handle messages from the worker\ngetBusArrivalTimesPort.onmessage = function (e) {\n  const [result, taskID] = e.data;\n  if (getBusArrivalTimesWorkerResponses[taskID]) {\n    getBusArrivalTimesWorkerResponses[taskID](result); // Resolve the correct promise\n    delete getBusArrivalTimesWorkerResponses[taskID]; // Clean up the response handler\n  }\n};\n\n// Handle errors\ngetBusArrivalTimesPort.onerror = function (e) {\n  console.error(e.message);\n};\n\nexport async function getBusArrivalTimes(chartWidth: number, chartHeight: number): Promise<BusArrivalTimes> {\n  const taskID = generateIdentifier();\n\n  const personalSchedules = await listPersonalSchedules();\n  const busArrivalTimeDataGroups = await listBusArrivalTimeDataGroups();\n\n  const result = await new Promise((resolve, reject) => {\n    getBusArrivalTimesWorkerResponses[taskID] = resolve; // Store the resolve function for this taskID\n    getBusArrivalTimesPort.onerror = function (e) {\n      reject(e.message);\n    };\n    getBusArrivalTimesPort.postMessage([personalSchedules, busArrivalTimeDataGroups, chartWidth, chartHeight, taskID]); // Send the task to the worker\n  });\n  return result;\n}\n","import { generateIdentifier } from '../../../tools/index';\nimport { mergePearsonCorrelation, mergeStandardDeviation } from '../../../tools/math';\nimport { EstimateTime } from '../../apis/getEstimateTime/index';\nimport { lfGetItem, lfListItemKeys, lfRemoveItem, lfSetItem } from '../../storage/index';\n\nexport type UpdateRateData = [estimateTime: number, timestamp: number]; // EstimateTime (seconds), timestamp (seconds)\n\nexport interface UpdateRateDataGroupStats {\n  estimate_time: {\n    average: number;\n    stdev: number;\n  };\n  timestamp: {\n    average: number;\n    stdev: number;\n  };\n  correlation: number;\n  length: number;\n}\n\nexport interface UpdateRateDataGroup {\n  stats: UpdateRateDataGroupStats;\n  timestamp: number;\n  id: number; // stop id\n}\n\nexport type UpdateRateDataGroupArray = Array<UpdateRateDataGroup>;\n\nexport interface UpdateRateDataWriteAheadLogGroup {\n  data: Array<UpdateRateData>;\n  timestamp: number;\n  id: string;\n}\n\nconst updateRateData_sampleQuantity: number = 32;\nlet updateRateData_trackedStops: Array<number> = [];\nlet updateRateData_writeAheadLog_id: string = '';\nlet updateRateData_writeAheadLog_tracking: boolean = false;\nlet updateRateData_writeAheadLog_currentDataLength: number = 0;\nconst updateRateData_writeAheadLog_maxDataLength: number = 45;\nlet updateRateData_writeAheadLog_group: UpdateRateDataWriteAheadLogGroup = {\n  data: {},\n  timestamp: 0,\n  id: ''\n};\nconst updateRateData_groups: Array<UpdateRateDataGroup> = [];\nconst updateRateData_groupsIndex: { [key: string]: number } = {};\n\nfunction getUpdateRateDataStats(data: Array<UpdateRateData>): UpdateRateDataGroupStats {\n  let sumEstimateTime = 0;\n  let sumEstimateTimeSquared = 0;\n  let sumTimestamp = 0;\n  let sumTimestampSquared = 0;\n  let dataLength = 0;\n  for (const item of data) {\n    const estimateTime = item[0];\n    const timestamp = item[1];\n    dataLength += 1;\n    sumEstimateTime += estimateTime;\n    sumTimestamp += timestamp;\n    sumEstimateTimeSquared += Math.pow(estimateTime, 2);\n    sumTimestampSquared += Math.pow(timestamp, 2);\n  }\n\n  const averageEstimateTime = sumEstimateTime / dataLength;\n  const averageTimestamp = sumTimestamp / dataLength;\n\n  const estimateTimeVariance = sumEstimateTimeSquared / dataLength - Math.pow(averageEstimateTime, 2);\n  const timestampVariance = sumTimestampSquared / dataLength - Math.pow(averageTimestamp, 2);\n\n  const estimateTimeSTDEV = Math.sqrt(estimateTimeVariance);\n  const timestampSTDEV = Math.sqrt(timestampVariance);\n\n  let covariance = 0;\n  for (const item2 of data) {\n    const estimateTime = item2[0];\n    const timestamp = item2[1];\n    covariance += (estimateTime - averageEstimateTime) * (timestamp - averageTimestamp);\n  }\n  covariance /= dataLength;\n\n  const correlation = covariance / (estimateTimeSTDEV * timestampSTDEV);\n\n  const result: UpdateRateDataGroupStats = {\n    estimate_time: {\n      average: averageEstimateTime,\n      stdev: estimateTimeSTDEV\n    },\n    timestamp: {\n      average: averageTimestamp,\n      stdev: timestampSTDEV\n    },\n    length: dataLength,\n    correlation: correlation\n  };\n  return result;\n}\n\nfunction mergeUpdateRateDataStats(targetStats: UpdateRateDataGroupStats, sourceStats: UpdateRateDataGroupStats): UpdateRateDataGroupStats {\n  const mergedDataLength = targetStats.length + sourceStats.length;\n\n  const mergedAverageEstimateTime = (targetStats.estimate_time.average * targetStats.length + sourceStats.estimate_time.average * sourceStats.length) / mergedDataLength;\n  const mergedAverageTimestamp = (targetStats.timestamp.average * targetStats.length + sourceStats.timestamp.average * sourceStats.length) / mergedDataLength;\n\n  const mergedEstimateTimeSTDEV = mergeStandardDeviation(targetStats.estimate_time.average, targetStats.estimate_time.stdev, targetStats.length, sourceStats.estimate_time.average, sourceStats.estimate_time.stdev, sourceStats.length);\n  const mergedTimestampSTDEV = mergeStandardDeviation(targetStats.timestamp.average, targetStats.timestamp.stdev, targetStats.length, sourceStats.timestamp.average, sourceStats.timestamp.stdev, sourceStats.length);\n\n  const mergedCorrelation = mergePearsonCorrelation(targetStats.estimate_time.average, targetStats.timestamp.average, targetStats.estimate_time.stdev, targetStats.timestamp.stdev, targetStats.length, targetStats.correlation, sourceStats.estimate_time.average, sourceStats.timestamp.average, sourceStats.estimate_time.stdev, sourceStats.timestamp.stdev, sourceStats.length, sourceStats.correlation);\n\n  const result: UpdateRateDataGroupStats = {\n    estimate_time: {\n      average: mergedAverageEstimateTime,\n      stdev: mergedEstimateTimeSTDEV\n    },\n    timestamp: {\n      average: mergedAverageTimestamp,\n      stdev: mergedTimestampSTDEV\n    },\n    length: mergedDataLength,\n    correlation: mergedCorrelation\n  };\n  return result;\n}\n\nexport async function collectUpdateRateData(EstimateTime: EstimateTime) {\n  const now = new Date();\n  const currentTimestamp: number = now.getTime();\n  let needToReset = false;\n  // Initialize\n  if (!updateRateData_writeAheadLog_tracking) {\n    updateRateData_writeAheadLog_tracking = true;\n    updateRateData_trackedStops = [];\n    updateRateData_writeAheadLog_id = generateIdentifier();\n    updateRateData_writeAheadLog_group = {\n      data: {},\n      timestamp: currentTimestamp,\n      id: updateRateData_writeAheadLog_id\n    };\n    updateRateData_writeAheadLog_currentDataLength = 0;\n    const EstimateTimeLength1: number = EstimateTime.length - 1;\n    for (let i = 0; i < updateRateData_sampleQuantity; i++) {\n      const randomIndex: number = Math.floor(Math.random() * EstimateTimeLength1);\n      const randomItem = EstimateTime[randomIndex];\n      updateRateData_trackedStops.push(randomItem.StopID);\n    }\n  }\n\n  // Record EstimateTime\n  for (const item of EstimateTime) {\n    const stopID = item.StopID;\n    const stopKey = `s_${stopID}`;\n    if (updateRateData_trackedStops.indexOf(stopID) > -1) {\n      if (!updateRateData_writeAheadLog_group.data.hasOwnProperty(stopKey)) {\n        updateRateData_writeAheadLog_group.data[stopKey] = [];\n      }\n      updateRateData_writeAheadLog_group.data[stopKey].push([parseInt(item.EstimateTime), Math.floor((currentTimestamp - updateRateData_writeAheadLog_group.timestamp) / 1000)]);\n    }\n  }\n\n  updateRateData_writeAheadLog_currentDataLength += 1;\n  if (updateRateData_writeAheadLog_currentDataLength > updateRateData_writeAheadLog_maxDataLength) {\n    needToReset = true;\n  }\n\n  if (updateRateData_writeAheadLog_currentDataLength % 5 === 0) {\n    await lfSetItem(4, updateRateData_writeAheadLog_id, JSON.stringify(updateRateData_writeAheadLog_group));\n  }\n\n  if (needToReset) {\n    for (const stopID of updateRateData_trackedStops) {\n      const stopKey = `s_${stopID}`;\n      const data = updateRateData_writeAheadLog_group.data[stopKey];\n      const dataGroup = {} as UpdateRateDataGroup;\n      const existingData = await lfGetItem(3, stopKey);\n      if (existingData) {\n        const existingDataObject = JSON.parse(existingData) as UpdateRateDataGroup;\n        dataGroup.stats = mergeUpdateRateDataStats(existingDataObject.stats, getUpdateRateDataStats(data));\n        dataGroup.timestamp = existingDataObject.timestamp;\n        dataGroup.id = stopID;\n      } else {\n        dataGroup.stats = getUpdateRateDataStats(data);\n        dataGroup.timestamp = currentTimestamp;\n        dataGroup.id = stopID;\n      }\n      await lfSetItem(3, stopKey, JSON.stringify(dataGroup));\n      if (updateRateData_groupsIndex.hasOwnProperty(stopKey)) {\n        const existingIndex = updateRateData_groupsIndex[stopKey];\n        updateRateData_groups.splice(existingIndex, 1, dataGroup);\n      } else {\n        updateRateData_groups[stopKey] = updateRateData_groups.length;\n        updateRateData_groups.push(dataGroup);\n      }\n      await lfRemoveItem(4, updateRateData_writeAheadLog_id);\n    }\n\n    updateRateData_writeAheadLog_tracking = false;\n  }\n}\n\nexport async function recoverUpdateRateDataFromWriteAheadLog() {\n  const now = new Date().getTime();\n  const oneWeekAgo = now - 60 * 60 * 7 * 1000;\n  const keys = await lfListItemKeys(4);\n  for (const key of keys) {\n    const json = await lfGetItem(4, key);\n    if (json) {\n      const object = JSON.parse(json) as UpdateRateDataWriteAheadLogGroup;\n      const thisTimestamp = object.timestamp;\n      const thisID = object.id;\n      if (thisTimestamp > oneWeekAgo) {\n        for (const stopKey in object.data) {\n          const thisStopData = object.data[stopKey];\n          const dataGroup = {} as UpdateRateDataGroup;\n          const existingData = await lfGetItem(3, stopKey);\n          if (existingData) {\n            const existingDataObject = JSON.parse(existingData) as UpdateRateDataGroup;\n            dataGroup.stats = mergeUpdateRateDataStats(existingDataObject.stats, getUpdateRateDataStats(thisStopData));\n            dataGroup.timestamp = existingDataObject.timestamp;\n            dataGroup.id = existingDataObject.id;\n          } else {\n            dataGroup.stats = getUpdateRateDataStats(thisStopData);\n            dataGroup.timestamp = thisTimestamp;\n            dataGroup.id = parseInt(stopKey.split('_')[1]);\n          }\n          await lfSetItem(3, stopKey, JSON.stringify(dataGroup));\n          if (updateRateData_groupsIndex.hasOwnProperty(stopKey)) {\n            const existingIndex = updateRateData_groupsIndex[stopKey];\n            updateRateData_groups.splice(existingIndex, 1, dataGroup);\n          } else {\n            updateRateData_groups[stopKey] = updateRateData_groups.length;\n            updateRateData_groups.push(dataGroup);\n          }\n        }\n      }\n      await lfRemoveItem(4, thisID);\n    }\n  }\n}\n\nexport async function initializeUpdateRateDataGroups() {\n  const now = new Date().getTime();\n  const oneWeekAgo = now - 60 * 60 * 7 * 1000;\n  const keys = await lfListItemKeys(3);\n  let index: number = 0;\n  for (const key of keys) {\n    const json = await lfGetItem(3, key);\n    if (json) {\n      const object = JSON.parse(json) as UpdateRateDataGroup;\n      const thisTimestamp = object.timestamp;\n      if (thisTimestamp > oneWeekAgo) {\n        updateRateData_groups.push(object);\n        updateRateData_groupsIndex[key] = index;\n        index += 1;\n      }\n    }\n  }\n}\n\nexport function listUpdateRateDataGroups(): Array<UpdateRateDataGroup> {\n  const now = new Date().getTime();\n  const oneWeekAgo = now - 60 * 60 * 7 * 1000;\n  return updateRateData_groups.filter((item) => item.timestamp > oneWeekAgo);\n}\n\nexport async function discardExpiredUpdateRateDataGroups() {\n  const now = new Date().getTime();\n  const oneWeekAgo = now - 60 * 60 * 7 * 1000;\n  const keys = await lfListItemKeys(3);\n  for (const key of keys) {\n    const json = await lfGetItem(3, key);\n    const object = JSON.parse(json) as UpdateRateDataGroup;\n    const thisTimestamp = object.timestamp;\n    if (thisTimestamp <= oneWeekAgo) {\n      await lfRemoveItem(3, key);\n    }\n  }\n}\n\nconst getUpdateRateWorkerResponses = {};\nlet port;\n\n// Check if SharedWorker is supported, and fall back to Worker if not\nif (typeof SharedWorker !== 'undefined') {\n  const getUpdateRateSharedWorker = new SharedWorker(new URL(/* webpackChunkName: \"getUpdateRate-worker\" */ './getUpdateRate-worker.ts', import.meta.url)); // Reusable shared worker\n  port = getUpdateRateSharedWorker.port; // Access the port for communication\n  port.start(); // Start the port (required by some browsers)\n} else {\n  const getUpdateRateWorker = new Worker(new URL(/* webpackChunkName: \"getUpdateRate-worker\" */ './getUpdateRate-worker.ts', import.meta.url)); // Fallback to standard worker\n  port = getUpdateRateWorker; // Use Worker directly for communication\n}\n\n// Handle messages from the worker\nport.onmessage = function (e) {\n  const [result, taskID] = e.data;\n  if (getUpdateRateWorkerResponses[taskID]) {\n    getUpdateRateWorkerResponses[taskID](result); // Resolve the correct promise\n    delete getUpdateRateWorkerResponses[taskID]; // Clean up the response handler\n  }\n};\n\n// Handle errors\nport.onerror = function (e) {\n  console.error(e.message);\n};\n\nexport async function getUpdateRate(): Promise<number> {\n  const dataGroups = await listUpdateRateDataGroups();\n  const taskID = generateIdentifier();\n\n  const result = await new Promise((resolve, reject) => {\n    getUpdateRateWorkerResponses[taskID] = resolve; // Store the resolve function for this taskID\n\n    port.onerror = function (e) {\n      reject(e.message);\n    };\n\n    port.postMessage([dataGroups, taskID]); // Send the task to the worker\n  });\n\n  return result;\n}\n","import { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataUpdateTime } from '../loader';\n\nexport interface EstimateTimeItem {\n  RouteID: number;\n  StopID: number;\n  EstimateTime: string | '-1' | '-2' | '-3' | '-4'; // x (>=0): remaining time to wait measured in seconds, -1: no departed bus, -2: skip stopping (due to traffic moderation), -3: the next bus will not come until tomorrow, -4: not in operation\n  GoBack: '0' | '1' | '2'; // 0: go, 1: back, 2: unknown\n}\n\nexport type EstimateTime = Array<EstimateTimeItem>;\n\nexport async function getEstimateTime(requestID: string): Promise<EstimateTime> {\n  const apis = [\n    [0, 4],\n    [1, 4]\n  ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n  let result = [];\n  for (const api of apis) {\n    const data = await fetchData(api.url, requestID, `getEstimateTime_${api.e[0]}`, 'json');\n    result = result.concat(data.BusInfo);\n    setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n  }\n  return result;\n}\n","import { MaterialSymbols } from '../../../interface/icons/material-symbols-type';\nimport { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getMaterialSymbolsAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress } from '../loader';\n\nlet MaterialSymbolsAPIVariableCache_available: boolean = false;\nlet MaterialSymbolsAPIVariableCache_data: Array<string> = [];\n\nexport interface MaterialSymbolsSearchIndex {\n  dictionary: string;\n  symbols: { [symbol: MaterialSymbols]: Array<number> };\n}\n\nexport async function getMaterialSymbolsSearchIndex(requestID: string): Promise<MaterialSymbolsSearchIndex> {\n  async function getData() {\n    const apiurl = getMaterialSymbolsAPIURL();\n    const data = await fetchData(apiurl, requestID, 'getMaterialSymbolsSearchIndex', 'json');\n    return data;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 7 * 1000;\n  const cacheKey = 'bus_material_symbols_search_index_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(result));\n    if (!MaterialSymbolsAPIVariableCache_available) {\n      MaterialSymbolsAPIVariableCache_available = true;\n      MaterialSymbolsAPIVariableCache_data = result;\n    }\n    return result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(result));\n      if (!MaterialSymbolsAPIVariableCache_available) {\n        MaterialSymbolsAPIVariableCache_available = true;\n        MaterialSymbolsAPIVariableCache_data = result;\n      }\n      return result;\n    } else {\n      if (!MaterialSymbolsAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        MaterialSymbolsAPIVariableCache_available = true;\n        MaterialSymbolsAPIVariableCache_data = JSON.parse(cache)\n      }\n      setDataReceivingProgress(requestID, 'getMaterialSymbolsSearchIndex', 0, true);\n      return MaterialSymbolsAPIVariableCache_data;\n    }\n  }\n}\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { generateLabelFromAddresses } from '../../tools/address';\nimport { CardinalDirection, getCardinalDirectionFromVector } from '../../tools/cardinal-direction';\nimport { generateIdentifier } from '../../tools/index';\nimport { generateDirectionLabels, generateLetterLabels } from '../../tools/labels';\nimport { normalizeVector } from '../../tools/math';\nimport { collectBusArrivalTimeData } from '../analytics/bus-arrival-time/index';\nimport { collectUpdateRateData } from '../analytics/update-rate/index';\nimport { EstimateTimeItem, getEstimateTime } from '../apis/getEstimateTime/index';\nimport { getLocation, MergedLocation, MergedLocationItem, SimplifiedLocation } from '../apis/getLocation/index';\nimport { getMaterialSymbolsSearchIndex } from '../apis/getMaterialSymbolsSearchIndex/index';\nimport { getRoute, SimplifiedRoute, SimplifiedRouteItem } from '../apis/getRoute/index';\nimport { getStop, SimplifiedStop } from '../apis/getStop/index';\nimport { EstimateTimeStatus, parseEstimateTime } from '../apis/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime, getDataUpdateTime, setDataReceivingProgress } from '../apis/loader';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../settings/index';\nimport { lfGetItem, lfListItemKeys, lfRemoveItem, lfSetItem } from '../storage/index';\n\ninterface FolderContentRouteEndPoints {\n  departure: string;\n  destination: string;\n}\n\nexport interface FolderContentStopRoute {\n  name: string;\n  endPoints: FolderContentRouteEndPoints;\n  id: number;\n}\n\nexport interface FolderContentStop {\n  type: 'stop';\n  id: number;\n  timestamp: number;\n  name: string;\n  direction: number;\n  route: FolderContentStopRoute;\n}\n\nexport interface FolderContentRoute {\n  type: 'route';\n  id: number;\n  timestamp: number;\n  name: string;\n  endPoints: FolderContentRouteEndPoints;\n}\n\nexport interface FolderContentLocation {\n  type: 'location';\n  id: string; // hash\n  timestamp: number;\n  name: string;\n}\n\nexport interface FolderContentBus {\n  type: 'bus';\n  id: number; // CarID\n  timestamp: number;\n  busID: string; // BusID\n}\n\nexport interface FolderContentEmpty {\n  type: 'empty';\n  id: number;\n}\n\nexport type FolderContent = FolderContentStop | FolderContentRoute | FolderContentLocation | FolderContentBus | FolderContentEmpty;\n\nexport interface Folder {\n  name: string;\n  icon: MaterialSymbols;\n  id: string;\n  timestamp: number;\n}\n\nexport type FolderArray = Array<Folder>;\n\nexport interface FolderWithContent extends Folder {\n  content: Array<FolderContent>;\n  contentLength: number;\n}\n\nexport type FolderWithContentArray = Array<FolderWithContent>;\n\nconst FolderList: { [key: string]: Folder } = {};\n\nexport async function initializeFolderList() {\n  const folderKeys = await lfListItemKeys(11);\n  for (const folderKey of folderKeys) {\n    const thisFolderJSON = await lfGetItem(11, folderKey);\n    if (thisFolderJSON) {\n      const thisFolderObject = JSON.parse(thisFolderJSON) as Folder;\n      if (!FolderList.hasOwnProperty(folderKey)) {\n        FolderList[folderKey] = thisFolderObject;\n      }\n    }\n  }\n}\n\nexport async function createFolder(name: Folder['name'], icon: Folder['icon']): Promise<Folder['id'] | false> {\n  // Validate icon\n  const requestID = generateIdentifier();\n  const materialSymbolsSearchIndex = await getMaterialSymbolsSearchIndex(requestID);\n  deleteDataReceivingProgress(requestID);\n  if (!materialSymbolsSearchIndex.symbols.hasOwnProperty(icon)) return false;\n\n  // Check existence\n  const folderID = generateIdentifier();\n  const folderKey = `f_${folderID}`;\n  if (FolderList.hasOwnProperty(folderKey)) {\n    return false;\n  }\n  const existingFolder = await lfGetItem(11, folderKey);\n  if (existingFolder) {\n    return false;\n  }\n\n  // Generate folder\n  const nowTime = new Date().getTime();\n  let newFolder: Folder = {\n    name: name,\n    icon: icon,\n    id: folderID,\n    timestamp: nowTime\n  };\n\n  // Save folder\n  FolderList[folderKey] = newFolder;\n  await lfSetItem(11, folderKey, JSON.stringify(newFolder));\n  await lfSetItem(12, folderKey, JSON.stringify([]));\n  return folderID;\n}\n\nexport async function updateFolder(folderID: Folder['id'], name: Folder['name'], icon: Folder['icon']): Promise<boolean> {\n  const folderKey: string = `f_${folderID}`;\n\n  // Check existence\n  const existingFolderJSON = await lfGetItem(11, folderKey);\n  if (!existingFolderJSON) {\n    return false;\n  }\n  const existingFolderObject = JSON.parse(existingFolderJSON) as Folder;\n\n  // Validate icon\n  const requestID = generateIdentifier();\n  const materialSymbolsSearchIndex = await getMaterialSymbolsSearchIndex(requestID);\n  deleteDataReceivingProgress(requestID);\n  if (!materialSymbolsSearchIndex.symbols.hasOwnProperty(icon)) return false;\n\n  // Generate folder\n  const modifiedFolder: Folder = {\n    name: name,\n    icon: icon,\n    id: folderID,\n    timestamp: existingFolderObject.timestamp\n  };\n\n  // Save folder\n  FolderList[folderKey] = modifiedFolder;\n  await lfSetItem(11, folderKey, JSON.stringify(modifiedFolder));\n  return true;\n}\n\nexport function getFolder(folderID: Folder['id']): Folder | false {\n  const folderKey: string = `f_${folderID}`;\n  if (!FolderList.hasOwnProperty(folderKey)) {\n    return false;\n  }\n  const folderObject: Folder = {\n    name: FolderList[folderKey].name,\n    icon: FolderList[folderKey].icon,\n    id: FolderList[folderKey].id,\n    timestamp: FolderList[folderKey].timestamp\n  };\n  return folderObject;\n  // return cloneDeep(Folders[folderKey]);\n}\n\nexport function listFolders(): FolderArray {\n  const result = [];\n  for (const folderKey in FolderList) {\n    const folderObject: Folder = {\n      name: FolderList[folderKey].name,\n      icon: FolderList[folderKey].icon,\n      id: FolderList[folderKey].id,\n      timestamp: FolderList[folderKey].timestamp\n    };\n    result.push(folderObject);\n  }\n  result.sort(function (a, b) {\n    return a.timestamp - b.timestamp;\n  });\n  return result;\n}\n\nexport async function listFolderContent(folderID: Folder['id']): Promise<Array<FolderContent>> {\n  const result: Array<FolderContent> = [];\n\n  const folderKey: string = `f_${folderID}`;\n  const thisFolder = getFolder(folderID);\n  if (typeof thisFolder === 'boolean' && thisFolder === false) {\n    return result;\n  }\n\n  const thisFolderContentIndexJSON = await lfGetItem(12, folderKey);\n  if (!thisFolderContentIndexJSON) {\n    return result;\n  }\n  const thisFolderContentIndexArray = JSON.parse(thisFolderContentIndexJSON) as Array<string>;\n  if (thisFolderContentIndexArray.length === 0) {\n    const emptyItem: FolderContentEmpty = {\n      type: 'empty',\n      id: 0,\n      index: 0\n    };\n    result.push(emptyItem);\n    return result;\n  }\n\n  for (const thisFolderContentKey of thisFolderContentIndexArray) {\n    const thisContentJSON = await lfGetItem(13, thisFolderContentKey);\n    if (thisContentJSON) {\n      const thisContentObject = JSON.parse(thisContentJSON) as FolderContent;\n      result.push(thisContentObject);\n    }\n  }\n  return result;\n}\n\nasync function getFolderContentLength(folderID: Folder['id']): Promise<number> {\n  const folderKey: string = `f_${folderID}`;\n  const thisFolderContentIndexJSON = await lfGetItem(12, folderKey);\n  if (!thisFolderContentIndexJSON) {\n    return 0;\n  }\n  const thisFolderContentIndexArray = JSON.parse(thisFolderContentIndexJSON) as Array<string>;\n  return thisFolderContentIndexArray.length;\n}\n\nexport async function listFoldersWithContent(): Promise<FolderWithContentArray> {\n  const folders = await listFolders();\n  const result: FolderWithContentArray = [];\n  for (const folder of folders) {\n    const folderContent = await listFolderContent(folder.id);\n    const folderContentLength = await getFolderContentLength(folder.id);\n    result.push({\n      name: folder.name,\n      icon: folder.icon,\n      id: folder.id,\n      timestamp: folder.timestamp,\n      content: folderContent,\n      contentLength: folderContentLength\n    });\n  }\n  return result;\n}\n\nexport async function listAllFolderContent(types: Array<FolderContent['type']>): Promise<Array<FolderContent>> {\n  let useFilter: boolean = true;\n  if (typeof types !== 'object' || !Array.isArray(types)) {\n    useFilter = false;\n  }\n  let result: Array<FolderContent> = [];\n  const keys = await lfListItemKeys(13);\n  for (const key of keys) {\n    const json = await lfGetItem(13, key);\n    if (json) {\n      const object = JSON.parse(json) as FolderContent;\n      if (useFilter) {\n        if (types.indexOf(object.type) > -1) {\n          result.push(object);\n        }\n      } else {\n        result.push(object);\n      }\n    }\n  }\n  return result;\n}\n\nexport interface integratedFolderContentStopRoute extends FolderContentStopRoute {\n  pathAttributeId: Array<number>;\n}\n\nexport interface integratedFolderContentStop extends FolderContentStop {\n  status: EstimateTimeStatus;\n  route: integratedFolderContentStopRoute;\n}\n\nexport interface integratedFolderContentRoute extends FolderContentRoute {\n  pathAttributeId: Array<number>;\n}\n\nexport interface integratedFolderContentLocation extends FolderContentLocation {\n  // labels: string;\n}\n\nexport interface integratedFolderContentBus extends FolderContentBus {}\n\nexport interface integratedFolderContentEmpty extends FolderContentEmpty {}\n\nexport type integratedFolderContent = integratedFolderContentStop | integratedFolderContentRoute | integratedFolderContentLocation | integratedFolderContentBus | integratedFolderContentEmpty;\n\nexport interface integratedFolder extends Folder {\n  content: Array<integratedFolderContent>;\n  contentLength: number;\n}\n\nexport interface integratedFolders {\n  folders: Array<integratedFolder>;\n  dataUpdateTime: number;\n}\n\nexport async function integrateFolders(requestID: string): Promise<integratedFolders> {\n  setDataReceivingProgress(requestID, 'getEstimateTime_0', 0, false);\n  setDataReceivingProgress(requestID, 'getEstimateTime_1', 0, false);\n  setDataReceivingProgress(requestID, 'getRoute_0', 0, false);\n  setDataReceivingProgress(requestID, 'getRoute_1', 0, false);\n\n  const EstimateTime = await getEstimateTime(requestID);\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  // const Location = (await getLocation(requestID, 1)) as MergedLocation;\n\n  const foldersWithContent = await listFoldersWithContent();\n\n  const time_formatting_mode = getSettingOptionValue('time_formatting_mode') as number;\n  // const location_labels = getSettingOptionValue('location_labels');\n  const power_saving = getSettingOptionValue('power_saving') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n\n  let StopIDs = [] as Array<number>;\n  for (const folderWithContent1 of foldersWithContent) {\n    StopIDs = StopIDs.concat(\n      folderWithContent1.content\n        .filter((m) => {\n          return m.type === 'stop' ? true : false;\n        })\n        .map((e) => e.id)\n    );\n  }\n\n  let batchFoundEstimateTime: { [key: string]: EstimateTimeItem } = {};\n  for (const EstimateTimeItem of EstimateTime) {\n    if (StopIDs.indexOf(EstimateTimeItem.StopID) > -1) {\n      const thisStopKey: string = `s_${EstimateTimeItem.StopID}`;\n      batchFoundEstimateTime[thisStopKey] = EstimateTimeItem;\n    }\n  }\n\n  let folders: integratedFolders['folders'] = [];\n\n  for (const folderWithContent2 of foldersWithContent) {\n    // Initialize integratedFolder\n    const integratedFolder: integratedFolder = {\n      name: folderWithContent2.name,\n      icon: folderWithContent2.icon,\n      id: folderWithContent2.id,\n      timestamp: folderWithContent2.timestamp,\n      content: [],\n      contentLength: folderWithContent2.contentLength\n    };\n\n    for (let item of folderWithContent2.content) {\n      let integratedItem = item as integratedFolderContent;\n      switch (integratedItem.type) {\n        case 'stop': {\n          const thisStopKey = `s_${integratedItem.id}`;\n          let thisEstimateTime = {} as EstimateTimeItem;\n          if (batchFoundEstimateTime.hasOwnProperty(thisStopKey)) {\n            thisEstimateTime = batchFoundEstimateTime[thisStopKey];\n          } else {\n            break;\n          }\n          integratedItem.status = parseEstimateTime(thisEstimateTime.EstimateTime, time_formatting_mode);\n          const thisRouteKey = `r_${integratedItem.route.id}`;\n          const thisRoute = Route[thisRouteKey] as SimplifiedRouteItem;\n          integratedItem.route.pathAttributeId = thisRoute.pid;\n          break;\n        }\n        case 'route': {\n          const thisRouteKey = `r_${integratedItem.id}`;\n          const thisRoute = Route[thisRouteKey] as SimplifiedRouteItem;\n          integratedItem.pathAttributeId = thisRoute.pid;\n          break;\n        }\n        case 'location': {\n          /*\n          const thisLocationKey = `ml_${integratedItem.id}`;\n          const thisLocation = Location[thisLocationKey] as MergedLocationItem;\n          let labels: Array<string> = [];\n          switch (location_labels) {\n            case 'address':\n              labels = generateLabelFromAddresses(thisLocation.a);\n              break;\n            case 'letters':\n              const stopLocationIds = thisLocation.id;\n              const stopLocationQuantity = stopLocationIds.length;\n              labels = generateLetterLabels(stopLocationQuantity);\n              break;\n            case 'directions':\n              const setsOfVectors = thisLocation.v;\n              const cardinalDirections: Array<CardinalDirection> = [];\n              for (const vectorSet of setsOfVectors) {\n                let x: number = 0;\n                let y: number = 0;\n                for (const vector of vectorSet) {\n                  x += vector[0];\n                  y += vector[1];\n                }\n                const meanVector = normalizeVector([x, y]) as [number, number];\n                const cardinalDirection = getCardinalDirectionFromVector(meanVector);\n                cardinalDirections.push(cardinalDirection);\n              }\n\n              labels = generateDirectionLabels(cardinalDirections);\n              break;\n            default:\n              break;\n          }\n          integratedItem.labels = labels.join(' - ');\n          */\n          break;\n        }\n        case 'bus':\n          break;\n        case 'empty':\n          break;\n        default:\n          break;\n      }\n      integratedFolder.content.push(integratedItem);\n    }\n    folders.push(integratedFolder);\n  }\n\n  const result: integratedFolders = {\n    folders: folders,\n    dataUpdateTime: getDataUpdateTime(requestID)\n  };\n\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n\n  if (!power_saving) {\n    if (refresh_interval_setting.dynamic) {\n      await collectUpdateRateData(EstimateTime);\n    }\n    await collectBusArrivalTimeData(EstimateTime);\n  }\n\n  return result;\n}\n\nexport async function saveToFolder(folderID: Folder['id'], content: FolderContent): Promise<boolean> {\n  const folderKey = `f_${folderID}`;\n  const contentKey = `${content.type}_${content.id}`;\n  const thisFolder = getFolder(folderID);\n\n  if (typeof thisFolder === 'boolean' && thisFolder === false) {\n    return false;\n  }\n\n  const thisFolderContentIndexJSON = (await lfGetItem(12, folderKey)) as string;\n  if (!thisFolderContentIndexJSON) {\n    return false;\n  }\n\n  const thisFolderContentIndexArray = JSON.parse(thisFolderContentIndexJSON) as Array<string>;\n  if (thisFolderContentIndexArray.length === 0 || thisFolderContentIndexArray.indexOf(contentKey) < 0) {\n    await lfSetItem(12, folderKey, JSON.stringify(thisFolderContentIndexArray.concat(contentKey)));\n    await lfSetItem(13, contentKey, JSON.stringify(content));\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport async function isFolderContentSaved(type: FolderContent['type'], id: FolderContent['id']): Promise<boolean> {\n  const folderContentKeyToCheck = `${type}_${id}`;\n\n  const keys = await lfListItemKeys(12);\n  for (const key of keys) {\n    const thisFolderContentIndexJSON = (await lfGetItem(12, key)) as string;\n    if (!thisFolderContentIndexJSON) {\n      continue;\n    }\n    const thisFolderContentIndexArray = JSON.parse(thisFolderContentIndexJSON) as Array<string>;\n    if (thisFolderContentIndexArray.indexOf(folderContentKeyToCheck) > -1) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport async function removeFromFolder(folderID: Folder['id'], type: FolderContent['type'], id: FolderContent['id']): Promise<boolean> {\n  const folderKey = `f_${folderID}`;\n  const thisFolderContentKey = `${type}_${id}`;\n\n  // Check existence\n  const thisFolder = getFolder(folderID);\n  if (typeof thisFolder === 'boolean' && thisFolder === false) {\n    return false;\n  }\n\n  // Remove reference from folder content index\n  const thisFolderContentIndexJSON = (await lfGetItem(12, folderKey)) as string;\n  if (!thisFolderContentIndexJSON) {\n    return false;\n  }\n  const thisFolderContentIndexArray = JSON.parse(thisFolderContentIndexJSON) as Array<string>;\n  const index = thisFolderContentIndexArray.indexOf(thisFolderContentKey);\n  if (index > -1 && thisFolderContentIndexArray.length > 0) {\n    thisFolderContentIndexArray.splice(index, 1);\n    await lfSetItem(12, folderKey, JSON.stringify(thisFolderContentIndexArray));\n  }\n\n  // Remove content if there are no other references\n  const isSaved = await isFolderContentSaved(type, id);\n  if (isSaved === false) {\n    await lfRemoveItem(13, thisFolderContentKey);\n  }\n  return true;\n}\n\nexport async function saveStop(folderID: Folder['id'], StopID: number, RouteID: number): Promise<boolean> {\n  const requestID = generateIdentifier();\n  const Stop = (await getStop(requestID)) as SimplifiedStop;\n  const Location = (await getLocation(requestID, 0)) as SimplifiedLocation;\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n\n  const thisStop = Stop[`s_${StopID}`];\n  const thisStopDirection: number = parseInt(thisStop.goBack);\n  const thisLocation = Location[`l_${thisStop.stopLocationId}`];\n  const thisStopName: string = thisLocation.n;\n\n  const thisRoute = Route[`r_${RouteID}`];\n  const thisRouteName: string = thisRoute.n;\n  const thisRouteDeparture: string = thisRoute.dep;\n  const thisRouteDestination: string = thisRoute.des;\n\n  const newContent: FolderContentStop = {\n    type: 'stop',\n    id: StopID,\n    timestamp: new Date().getTime(),\n    name: thisStopName,\n    direction: thisStopDirection,\n    route: {\n      name: thisRouteName,\n      endPoints: {\n        departure: thisRouteDeparture,\n        destination: thisRouteDestination\n      },\n      id: RouteID\n    }\n  };\n  const save = await saveToFolder(folderID, newContent);\n  return save;\n}\n\nexport async function saveRoute(folderID: Folder['id'], RouteID: number): Promise<boolean> {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisRouteKey = `r_${RouteID}`;\n  let thisRoute = {} as SimplifiedRouteItem;\n  if (Route.hasOwnProperty(thisRouteKey)) {\n    thisRoute = Route[thisRouteKey];\n  } else {\n    return false;\n  }\n\n  const newContent: FolderContentRoute = {\n    type: 'route',\n    id: RouteID,\n    timestamp: new Date().getTime(),\n    name: thisRoute.n,\n    endPoints: {\n      departure: thisRoute.dep,\n      destination: thisRoute.des\n    }\n  };\n  const save = await saveToFolder(folderID, newContent);\n  return save;\n}\n\nexport async function saveLocation(folderID: Folder['id'], hash: string): Promise<boolean> {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  let thisLocation = {} as MergedLocationItem;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    thisLocation = Location[thisLocationKey];\n  } else {\n    return false;\n  }\n\n  const newContent: FolderContentLocation = {\n    type: 'location',\n    id: hash,\n    timestamp: new Date().getTime(),\n    name: thisLocation.n\n  };\n  const save = await saveToFolder(folderID, newContent);\n  return save;\n}\n\n// TODO: Save Bus\n\nexport async function updateFolderContentIndex(folderID: Folder['id'], type: FolderContent['type'], id: FolderContent['id'], direction: 'up' | 'down'): Promise<boolean> {\n  const folderKey = `f_${folderID}`;\n  const thisFolderContentKey = `${type}_${id}`;\n  const thisFolder = getFolder(folderID);\n  if (typeof thisFolder === 'boolean' && thisFolder === false) {\n    return false;\n  }\n\n  const thisFolderContentIndexJSON = (await lfGetItem(12, folderKey)) as string;\n  if (!thisFolderContentIndexJSON) {\n    return false;\n  }\n  const thisFolderContentIndexArray = JSON.parse(thisFolderContentIndexJSON) as Array<string>;\n\n  const index = thisFolderContentIndexArray.indexOf(thisFolderContentKey);\n  if (index > -1 && thisFolderContentIndexArray.length > 1) {\n    let offset: number = 0;\n    switch (direction) {\n      case 'up':\n        offset = -1;\n        break;\n      case 'down':\n        offset = 1;\n        break;\n      default:\n        offset = 0;\n        break;\n    }\n    thisFolderContentIndexArray.splice(index, 1);\n    thisFolderContentIndexArray.splice(index + offset, 0, thisFolderContentKey);\n    await lfSetItem(12, folderKey, JSON.stringify(thisFolderContentIndexArray));\n    return true;\n  } else {\n    return false;\n  }\n}\n","export const levenshtein = require('js-levenshtein');\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { getIntersection } from '../../tools/array';\nimport { generateIdentifier } from '../../tools/index';\nimport { levenshtein } from '../../tools/levenshtein';\nimport { getMaterialSymbolsSearchIndex } from '../apis/getMaterialSymbolsSearchIndex/index';\nimport { deleteDataReceivingProgress } from '../apis/loader';\n\nlet searchStructure = {};\nlet readyToSearch = false;\n\nexport async function prepareForMaterialSymbolsSearch() {\n  if (readyToSearch) return;\n\n  const requestID = generateIdentifier();\n  const materialSymbolsSearchIndex = await getMaterialSymbolsSearchIndex(requestID);\n  deleteDataReceivingProgress(requestID);\n\n  const dictionary = materialSymbolsSearchIndex.dictionary.split(',');\n  const symbols = materialSymbolsSearchIndex.symbols;\n  const names = [];\n  const wordToSymbols: { [wordIndexKey: string]: Array<number> } = {};\n\n  let nameIndex = 0;\n  for (const symbol in symbols) {\n    // Create list of symbol names\n    names.push(symbol);\n    // Build wordIndex  nameIndex mapping\n    for (const wordIndex of symbols[symbol]) {\n      const wordIndexKey = `w${wordIndex}`;\n      if (!wordToSymbols.hasOwnProperty(wordIndexKey)) {\n        wordToSymbols[wordIndexKey] = [];\n      }\n      wordToSymbols[wordIndexKey].push(nameIndex);\n    }\n    nameIndex++;\n  }\n\n  searchStructure = { dictionary, names, wordToSymbols };\n  readyToSearch = true;\n}\n\nexport function searchForMaterialSymbols(query: string, searchFrom: number = 0, skipBroadTerms: boolean = true, broadThreshold: number = 0.3): Array<{ item: MaterialSymbols; score: number }> {\n  if (!readyToSearch) return [];\n\n  const { dictionary, names, wordToSymbols } = searchStructure;\n  const broadLength = Math.round(names.length * broadThreshold);\n\n  // Split query\n  const queryWords = Array.from(\n    new Set(\n      query\n        .trim()\n        .toLowerCase()\n        .split(/[\\s_-]+/)\n    )\n  );\n  const queryWordsLength = queryWords.length;\n\n  // Fuzzy match words to dictionary indices\n  const minDistances = new Uint8Array(queryWordsLength);\n  const matchedWordIndexes = new Int16Array(queryWordsLength).fill(-1);\n\n  for (let j = searchFrom; j < queryWordsLength; j++) {\n    minDistances[j] = queryWords[j].length;\n    for (let i = 0, l = dictionary.length; i < l; i++) {\n      const distance = levenshtein(queryWords[j], dictionary[i]);\n      if (distance <= minDistances[j]) {\n        minDistances[j] = distance;\n        matchedWordIndexes[j] = i;\n      }\n    }\n  }\n\n  // Pair words with symbols\n  let indexArrays = [];\n  for (let i = queryWordsLength - 1; i >= 0; i--) {\n    if (matchedWordIndexes[i] < 0) continue;\n    const arr = wordToSymbols[`w${matchedWordIndexes[i]}`] || [];\n    if (skipBroadTerms && arr.length > broadLength) continue;\n    indexArrays.push(arr);\n  }\n\n  const indexArraysLength = indexArrays.length;\n\n  if (indexArraysLength === 0) return [];\n\n  // Sort by length (shortest  longest)\n  indexArrays.sort((a, b) => a.length - b.length);\n\n  // Intersect\n  let candidates = indexArrays[0];\n  for (let i = 1; i < indexArraysLength; i++) {\n    candidates = getIntersection(candidates, indexArrays[i]);\n  }\n\n  // Rank candidates\n  const scored = [];\n  for (let i = 0, l = candidates.length; i < l; i++) {\n    let score = 0;\n    for (let j = queryWordsLength - 1; j >= 0; j--) {\n      if (matchedWordIndexes[j] < 0) continue;\n      const symbolWordIndexes = wordToSymbols[`w${matchedWordIndexes[j]}`] || [];\n      if (symbolWordIndexes.indexOf(candidates[i]) > -1) {\n        score -= j; // earlier query words = higher weight\n      }\n    }\n    scored.push({\n      item: names[candidates[i]],\n      score: score\n    });\n  }\n\n  scored.sort((a, b) => b.score - a.score);\n  return scored;\n}\n","import { getCarInfo } from '../../data/apis/getCarInfo/index';\nimport { getLocation } from '../../data/apis/getLocation/index';\nimport { getMaterialSymbolsSearchIndex } from '../../data/apis/getMaterialSymbolsSearchIndex/index';\nimport { getRoute } from '../../data/apis/getRoute/index';\nimport { DataReceivingProgressEvent, deleteDataReceivingProgress, deleteDataUpdateTime, getDataReceivingProgress, setDataReceivingProgress } from '../../data/apis/loader';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\n\nconst dataDownloadRequestID = 'downloadData';\nexport let dataDownloadCompleted = false;\n\nconst HomeField = documentQuerySelector('.css_home_field');\nconst HomeHeadElement = elementQuerySelector(HomeField, '.css_home_head');\nconst homeButtonRightElement = elementQuerySelector(HomeHeadElement, '.css_home_button_right');\nconst progressElement = elementQuerySelector(homeButtonRightElement, 'svg#download-svg path[progress=\"progress\"]');\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  const pixels = (1 - getDataReceivingProgress(dataDownloadRequestID)) * 189;\n  progressElement.style.setProperty('--b-cssvar-stroke-dashoffset', `${pixels}px`);\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n    progressElement.addEventListener(\n      'transitionend',\n      function () {\n        homeButtonRightElement.setAttribute('complete', 'true');\n      },\n      { once: true }\n    );\n    progressElement.style.setProperty('--b-cssvar-stroke-dashoffset', `${0}px`);\n    dataDownloadCompleted = true;\n  }\n}\n\nexport async function downloadData() {\n  /*\n  setDataReceivingProgress(dataDownloadRequestID, 'getRoute_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getRoute_1', 0, false);\n  */\n  // eliminate duplicate downloads in integrateFolders\n  setDataReceivingProgress(dataDownloadRequestID, 'getLocation_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getLocation_1', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getCarInfo_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getCarInfo_1', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getMaterialSymbolsSearchIndex', 0, false);\n  document.addEventListener(dataDownloadRequestID, handleDataReceivingProgressUpdates);\n  await getRoute(dataDownloadRequestID, true);\n  await getLocation(dataDownloadRequestID, 1);\n  await getCarInfo(dataDownloadRequestID, true);\n  await getMaterialSymbolsSearchIndex(dataDownloadRequestID);\n  deleteDataReceivingProgress(dataDownloadRequestID);\n  deleteDataUpdateTime(dataDownloadRequestID);\n}\n","import { getMaterialSymbolsSearchIndex } from '../../data/apis/getMaterialSymbolsSearchIndex/index';\nimport { deleteDataReceivingProgress } from '../../data/apis/loader';\nimport { prepareForMaterialSymbolsSearch, searchForMaterialSymbols } from '../../data/search/searchMaterialSymbols';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype Target = 'editor' | 'creator' | '';\n\nlet currentTarget: Target = '';\n\nconst folderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst folderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst folderIconSelectorField = documentQuerySelector('.css_folder_icon_selector_field');\n\nfunction generateElementOfSymbol(symbol: string): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_folder_icon_selector_symbol');\n  element.onclick = function () {\n    selectFolderIcon(symbol, currentTarget);\n  };\n  element.appendChild(getIconElement(symbol));\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nasync function initializeFolderIconSelectorField() {\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  materialSymbolsElement.innerHTML = '';\n  const requestID = generateIdentifier();\n  const materialSymbols = await getMaterialSymbolsSearchIndex(requestID);\n  deleteDataReceivingProgress(requestID);\n  const fragment = new DocumentFragment();\n  for (const symbol in materialSymbols.symbols) {\n    const symbolElement = generateElementOfSymbol(symbol, currentTarget);\n    fragment.appendChild(symbolElement.element);\n  }\n  materialSymbolsElement.append(fragment);\n}\n\nexport function updateMaterialSymbolsSearchResult(query: string): void {\n  const materialSymbolsSearchResultsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols_search_results');\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  if (!containPhoneticSymbols(query)) {\n    const searchResults = searchForMaterialSymbols(query);\n    const fragment = new DocumentFragment();\n    for (const result of searchResults) {\n      const symbolElement = generateElementOfSymbol(result.item, currentTarget);\n      fragment.appendChild(symbolElement.element);\n    }\n    materialSymbolsSearchResultsElement.innerHTML = '';\n    materialSymbolsSearchResultsElement.append(fragment);\n    materialSymbolsSearchResultsElement.setAttribute('displayed', searchResults.length > 0 ? 'true' : 'false');\n    materialSymbolsElement.setAttribute('displayed', searchResults.length > 0 ? 'false' : 'true');\n  }\n}\n\nexport function selectFolderIcon(symbol: string): void {\n  let iconInputElement;\n  switch (currentTarget) {\n    case 'editor':\n      iconInputElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input');\n      break;\n    case 'creator':\n      iconInputElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\n      break;\n    default:\n      break;\n  }\n  iconInputElement.value = symbol;\n  closeFolderIconSelector();\n}\n\nexport function openFolderIconSelector(target: Target): void {\n  pushPageHistory('FolderIconSelector');\n  var openFolderIconSelectorElement;\n  switch (target) {\n    case 'editor':\n      currentTarget = 'editor';\n      openFolderIconSelectorElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\n      break;\n    case 'creator':\n      currentTarget = 'creator';\n      openFolderIconSelectorElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input .css_folder_creator_open_folder_icon_selector');\n      break;\n    default:\n      break;\n  }\n  if (dataDownloadCompleted) {\n    folderIconSelectorField.setAttribute('displayed', 'true');\n    initializeFolderIconSelectorField(currentTarget);\n    prepareForMaterialSymbolsSearch();\n  } else {\n    promptMessage('download_for_offline', '');\n  }\n}\n\nexport function closeFolderIconSelector(): void {\n  revokePageHistory('FolderIconSelector');\n  folderIconSelectorField.setAttribute('displayed', 'false');\n}\n","import { createFolder } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { openFolderIconSelector } from '../folder-icon-selector/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst FolderCreatorBodyElement = elementQuerySelector(FolderCreatorField, '.css_folder_creator_body');\nconst FolderCreatorGroupsElement = elementQuerySelector(FolderCreatorBodyElement, '.css_folder_creator_groups');\nconst NameInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-name\"] .css_folder_creator_group_body input');\nconst IconInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\nconst OpenFolderIconSelectorElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_field .css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input .css_folder_creator_open_folder_icon_selector');\n\nOpenFolderIconSelectorElement.onclick = function () {\n  openFolderIconSelector('creator');\n};\n\nexport function createFormulatedFolder(): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  createFolder(name, icon).then((e) => {\n    if (e) {\n      closeFolderCreator();\n      promptMessage('folder', '');\n    } else {\n      promptMessage('error', '');\n    }\n  });\n}\n\nexport function openFolderCreator(): void {\n  pushPageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'true');\n  closePreviousPage();\n}\n\nexport function closeFolderCreator(): void {\n  // revokePageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n","import { Folder, FolderContent, getFolder, listFolderContent, removeFromFolder, updateFolder, updateFolderContentIndex } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { openFolderIconSelector } from '../folder-icon-selector/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst FolderEditorHeadElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_head');\nconst LeftButtonElement = elementQuerySelector(FolderEditorHeadElement, '.css_folder_editor_button_left');\nconst FolderEditorBodyElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_body');\nconst FolderEditorGroupsElement = elementQuerySelector(FolderEditorBodyElement, '.css_folder_editor_groups');\nconst NameInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-name\"] .css_folder_editor_group_body input') as HTMLInputElement;\nconst IconInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input') as HTMLInputElement;\nconst OpenFolderIconSelectorElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\nconst FolderContentElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body');\n\nOpenFolderIconSelectorElement.onclick = function () {\n  openFolderIconSelector('editor');\n};\n\nfunction generateElementOfItem(folder: Folder, item: FolderContent): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.id = identifier;\n  itemElement.classList.add('css_folder_editor_folder_item');\n  itemElement.setAttribute('type', item.type);\n\n  // Icon, context, main text\n  let context = '';\n  let main = '';\n  let icon: MaterialSymbols = '';\n  switch (item.type) {\n    case 'stop':\n      icon = 'location_on';\n      context = `${item.route ? item.route.name : ''} - ${item.route ? [item.route.endPoints.destination, item.route.endPoints.departure, ''][item.direction ? item.direction : 0] : ''}`;\n      main = item.name;\n      break;\n    case 'route':\n      icon = 'route';\n      context = `${item.endPoints.departure} \\u2194 ${item.endPoints.destination}`;\n      main = item.name;\n      break;\n    case 'location':\n      icon = 'location_on';\n      context = '';\n      main = item.name;\n      break;\n    case 'bus':\n      context = '';\n      main = item.name;\n      break;\n    case 'empty':\n      icon = 'lightbulb';\n      context = '';\n      main = '';\n      break;\n    default:\n      icon = '';\n      context = 'null';\n      main = 'null';\n      break;\n  }\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_editor_folder_item_icon');\n  iconElement.appendChild(getIconElement(icon));\n\n  // Context element\n  const contextElement = document.createElement('div');\n  contextElement.classList.add('css_folder_editor_folder_item_context');\n  contextElement.appendChild(document.createTextNode(context));\n\n  // Main element\n  const mainElement = document.createElement('div');\n  mainElement.classList.add('css_folder_editor_folder_item_main');\n  mainElement.appendChild(document.createTextNode(main));\n\n  // Capsule element\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_folder_editor_folder_item_capsule');\n\n  // Sort up control\n  const sortUpElement = document.createElement('div');\n  sortUpElement.classList.add('css_folder_editor_folder_item_sort_control_up');\n  sortUpElement.appendChild(getIconElement('keyboard_arrow_down'));\n  sortUpElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'up');\n  };\n\n  // Sort down control\n  const sortDownElement = document.createElement('div');\n  sortDownElement.classList.add('css_folder_editor_folder_item_sort_control_down');\n  sortDownElement.appendChild(getIconElement('keyboard_arrow_down'));\n  sortDownElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'down');\n  };\n\n  // Delete control\n  const deleteElement = document.createElement('div');\n  deleteElement.classList.add('css_folder_editor_folder_item_delete');\n  deleteElement.appendChild(getIconElement('delete'));\n  deleteElement.onclick = () => {\n    removeItemOnFolderEditor(identifier, folder.id, item.type, item.id);\n  };\n\n  // Capsule separators\n  const separator1Element = document.createElement('div');\n  separator1Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n  const separator2Element = document.createElement('div');\n  separator2Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(sortUpElement);\n  capsuleElement.appendChild(sortDownElement);\n  capsuleElement.appendChild(deleteElement);\n  capsuleElement.appendChild(separator1Element);\n  capsuleElement.appendChild(separator2Element);\n\n  // Assemble main item\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(contextElement);\n  itemElement.appendChild(mainElement);\n  itemElement.appendChild(capsuleElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction updateFolderEditorField(folder: Folder, content: Array<FolderContent>): void {\n  NameInputElement.value = folder.name;\n  IconInputElement.value = folder.icon;\n\n  LeftButtonElement.onclick = function () {\n    saveEditedFolder(folder.id);\n  };\n\n  FolderContentElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of content) {\n    const thisItemElement = generateElementOfItem(folder, item);\n    fragment.appendChild(thisItemElement.element);\n  }\n  FolderContentElement.append(fragment);\n}\n\nasync function initializeFolderEditorField(folderID: string) {\n  // TODO: add skeleton screen\n  const folder = getFolder(folderID);\n  const content = await listFolderContent(folderID);\n  updateFolderEditorField(folder, content);\n}\n\nexport function openFolderEditor(folderID: string): void {\n  pushPageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'true');\n  initializeFolderEditorField(folderID);\n  closePreviousPage();\n}\n\nexport function closeFolderEditor(): void {\n  // revokePageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function removeItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: number): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  removeFromFolder(folderID, type, id).then((e) => {\n    if (e) {\n      itemElement.remove();\n      switch (type) {\n        case 'stop':\n          promptMessage('delete', '');\n          break;\n        case 'route':\n          promptMessage('delete', '');\n          break;\n        case 'location':\n          promptMessage('delete', '');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('error', '');\n    }\n  });\n}\n\nexport function moveItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: FolderContent['id'], direction: 'up' | 'down'): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  updateFolderContentIndex(folderID, type, id, direction).then((e) => {\n    if (e) {\n      switch (direction) {\n        case 'up':\n          const previousSibling = itemElement.previousElementSibling;\n          if (previousSibling) {\n            itemElement.parentNode.insertBefore(itemElement, previousSibling);\n          }\n          promptMessage('arrow_circle_up', '');\n          break;\n        case 'down':\n          const nextSibling = itemElement.nextElementSibling;\n          if (nextSibling) {\n            itemElement.parentNode.insertBefore(nextSibling, itemElement);\n          }\n          promptMessage('arrow_circle_down', '');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('error', '');\n    }\n  });\n}\n\nexport function saveEditedFolder(folderID: string): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  updateFolder(folderID, name, icon).then(function (e) {\n    if (e) {\n      closeFolderEditor();\n      promptMessage('check_circle', '');\n    } else {\n      promptMessage('error', '');\n    }\n  });\n}\n","import { FolderWithContent, listFoldersWithContent } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { openFolderEditor } from '../folder-editor/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\n\nconst FolderManagerField = documentQuerySelector('.css_folder_manager_field');\nconst FolderManagerBodyElement = elementQuerySelector(FolderManagerField, '.css_folder_manager_body');\nconst FolderManagerFolderListElement = elementQuerySelector(FolderManagerBodyElement, '.css_folder_manager_folder_list');\n\nfunction generateElementOfItem(item: FolderWithContent): GeneratedElement {\n  // Main container\n  const folderItemElement = document.createElement('div');\n  folderItemElement.classList.add('css_folder_manager_folder_item');\n  folderItemElement.onclick = () => {\n    openFolderEditor(item.id);\n  };\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_manager_folder_item_icon');\n  iconElement.appendChild(getIconElement(item.icon));\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_folder_manager_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_folder_manager_folder_item_status');\n  statusElement.appendChild(document.createTextNode(String(item.contentLength)));\n\n  // Arrow\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_folder_manager_folder_item_arrow');\n  arrowElement.appendChild(getIconElement('arrow_forward_ios'));\n\n  // Assemble\n  folderItemElement.appendChild(iconElement);\n  folderItemElement.appendChild(nameElement);\n  folderItemElement.appendChild(statusElement);\n  folderItemElement.appendChild(arrowElement);\n\n  return {\n    element: folderItemElement,\n    id: ''\n  };\n}\n\nasync function initializeFolderManagerField() {\n  const foldersWithContent = await listFoldersWithContent();\n  FolderManagerFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item);\n    fragment.appendChild(newItemElement.element);\n  }\n  FolderManagerFolderListElement.append(fragment);\n}\n\nexport function openFolderManager(): void {\n  pushPageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'true');\n  initializeFolderManagerField();\n  // closePreviousPage();\n}\n\nexport function closeFolderManager(): void {\n  revokePageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { getPersonalSchedule, updatePersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { timeObjectToString, WeekDayIndex } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\n\nconst PersonalScheduleEditorField = documentQuerySelector('.css_personal_schedule_editor_field');\nconst PersonalScheduleEditorBodyElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_body');\nconst PersonalScheduleEditorHeadElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_head');\nconst leftButtonElement = elementQuerySelector(PersonalScheduleEditorHeadElement, '.css_personal_schedule_editor_button_left');\nconst PersonalScheduleEditorGroups = elementQuerySelector(PersonalScheduleEditorBodyElement, '.css_personal_schedule_editor_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-name\"] .css_personal_schedule_editor_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-start-time\"] .css_personal_schedule_editor_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-end-time\"] .css_personal_schedule_editor_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-days\"] .css_personal_schedule_editor_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_editor_day');\n\nexport async function saveEditedPersonalSchedule(personalScheduleID: string) {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  let personalSchedule = await getPersonalSchedule(personalScheduleID);\n  personalSchedule.name = name;\n  personalSchedule.days = days;\n  personalSchedule.period.start.hours = startHours;\n  personalSchedule.period.start.minutes = startMinutes;\n  personalSchedule.period.end.hours = endHours;\n  personalSchedule.period.end.minutes = endMinutes;\n\n  await updatePersonalSchedule(personalSchedule);\n  closePersonalScheduleEditor();\n}\n\nasync function initializePersonalScheduleEditorField(personalScheduleID: string) {\n  const personalSchedule = await getPersonalSchedule(personalScheduleID);\n  nameInputElement.value = personalSchedule.name;\n  startTimeInputElement.value = timeObjectToString(personalSchedule.period.start);\n  endTimeInputElement.value = timeObjectToString(personalSchedule.period.end);\n\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    if (personalSchedule.days.indexOf(i) > -1) {\n      thisDayElement.setAttribute('highlighted', 'true');\n    } else {\n      thisDayElement.setAttribute('highlighted', 'false');\n    }\n  }\n  leftButtonElement.onclick = function () {\n    saveEditedPersonalSchedule(personalScheduleID);\n  };\n}\n\nexport function openPersonalScheduleEditor(personalScheduleID: string): void {\n  pushPageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'true');\n  initializePersonalScheduleEditorField(personalScheduleID);\n  closePreviousPage();\n}\n\nexport function closePersonalScheduleEditor(): void {\n  // revokePageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function switchPersonalScheduleEditorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_editor_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { listPersonalSchedules, PersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { openPersonalScheduleEditor } from '../personal-schedule-editor/index';\n\nconst PersonalScheduleManagerField = documentQuerySelector('.css_personal_schedule_manager_field');\nconst PersonalScheduleManagerBodyElement = elementQuerySelector(PersonalScheduleManagerField, '.css_personal_schedule_manager_body');\nconst ListElement = elementQuerySelector(PersonalScheduleManagerBodyElement, '.css_personal_schedule_manager_list');\n\nfunction generateElementOfItem(item: PersonalSchedule): GeneratedElement {\n  // const identifier = generateIdentifier();\n\n  // Main item element\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_personal_schedule_manager_item');\n  // itemElement.id = identifier;\n  itemElement.onclick = function () {\n    openPersonalScheduleEditor(item.id);\n  };\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_personal_schedule_manager_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n  itemElement.appendChild(nameElement);\n\n  // Arrow element\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_personal_schedule_manager_item_arrow');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(iconElement);\n  itemElement.appendChild(arrowElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\nasync function initializePersonalScheduleManagerField() {\n  ListElement.innerHTML = '';\n  const personalSchedules = await listPersonalSchedules();\n  const fragment = new DocumentFragment();\n  for (const item of personalSchedules) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement.element);\n  }\n  ListElement.append(fragment);\n}\n\nexport function openPersonalScheduleManager(): void {\n  pushPageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'true');\n  initializePersonalScheduleManagerField();\n}\n\nexport function closePersonalScheduleManager(): void {\n  revokePageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'false');\n}\n","import { NotificationProvider, NotificationResponse } from '../../index';\n\nexport function getNotificationAPIURL(method: NotificationResponse['method']): string | false {\n  if (NotificationProvider === '') {\n    return false;\n  }\n  const url = new URL(NotificationProvider);\n  if (['cancel', 'register', 'schedule', 'rotate', 'reschedule'].indexOf(method) > -1) {\n    url.searchParams.set('method', method);\n    return url.toString();\n  } else {\n    return false;\n  }\n}\n","import { sha512 } from '../../../../tools/index';\nimport { NotificationClient } from '../../index';\n\nexport function getNotificationToken(client_id: NotificationClient['client_id'], secret: NotificationClient['secret'], payload: object): string {\n  const now = new Date().getTime();\n  const window = 5 * 1000;\n  const i = (now - (now % window)) / window;\n  const result = sha512(sha512(`${client_id}\\n${secret}\\n${i}\\n${sha512(`${client_id}\\n${secret}\\n${sha512(JSON.stringify(payload))}`)}`));\n  return result;\n}\n","import { sha512 } from '../../../../tools/index';\nimport { NotificationClientID, NotificationResponse, NotificationSecret } from '../../index';\nimport { getNotificationToken } from '../getNotificationToken/index';\n\nexport function getNotificationRequestBody(method: NotificationResponse['method'], parameters: Array<any>): object | false {\n  switch (method) {\n    case 'cancel':\n      if (NotificationClientID === '' || NotificationSecret === '' || parameters.length !== 1) {\n        return false;\n      } else {\n        return {\n          client_id: NotificationClientID,\n          token: getNotificationToken(NotificationClientID, NotificationSecret, { schedule_id: parameters[0] }),\n          schedule_id: parameters[0]\n        };\n      }\n      break;\n    case 'register':\n      if (parameters.length !== 1) {\n        return false;\n      } else {\n        const currentDate = new Date();\n        currentDate.setMilliseconds(0);\n        currentDate.setSeconds(0);\n        return {\n          hash: sha512(`${sha512(parameters[0])}${currentDate.getTime()}`)\n        };\n      }\n      break;\n    case 'schedule':\n      if (NotificationClientID === '' || NotificationSecret === '' || parameters.length !== 9) {\n        return false;\n      } else {\n        return {\n          client_id: NotificationClientID,\n          token: getNotificationToken(NotificationClientID, NotificationSecret, { stop_id: parameters[0], location_name: parameters[1], route_id: parameters[2], route_name: parameters[3], direction: parameters[4], estimate_time: parameters[5], time_formatting_mode: parameters[6], time_offset: parameters[7], scheduled_time: parameters[8] }),\n          stop_id: parameters[0],\n          location_name: parameters[1],\n          route_id: parameters[2],\n          route_name: parameters[3],\n          direction: parameters[4],\n          estimate_time: parameters[5],\n          time_formatting_mode: parameters[6],\n          time_offset: parameters[7],\n          scheduled_time: parameters[8]\n        };\n      }\n      break;\n    case 'rotate':\n      if (NotificationClientID === '' || NotificationSecret === '' || parameters.length !== 0) {\n        return false;\n      } else {\n        return {\n          client_id: NotificationClientID,\n          token: getNotificationToken(NotificationClientID, NotificationSecret, {})\n        };\n      }\n      break;\n    case 'reschedule':\n      if (NotificationClientID === '' || NotificationSecret === '' || parameters.length !== 3) {\n        return false;\n      } else {\n        return {\n          client_id: NotificationClientID,\n          token: getNotificationToken(NotificationClientID, NotificationSecret, { schedule_id: parameters[0], estimate_time: parameters[1], scheduled_time: parameters[2] }),\n          schedule_id: parameters[0],\n          estimate_time: parameters[1],\n          scheduled_time: parameters[2]\n        };\n      }\n      break;\n    default:\n      return false;\n      break;\n  }\n}\n","type NotificationResponseCode = 200 | 400 | 401 | 404 | 500;\n\ninterface NotificationResponseCancel {\n  result: string;\n  code: NotificationResponseCode;\n  method: 'cancel';\n}\n\ninterface NotificationResponseRegister {\n  result: string;\n  code: NotificationResponseCode;\n  method: 'register';\n  client_id: string | 'null';\n  secret: string | 'null';\n}\n\ninterface NotificationResponseSchedule {\n  result: string;\n  code: NotificationResponseCode;\n  method: 'schedule';\n  schedule_id: string | 'null';\n}\n\ninterface NotificationResponseRotate {\n  result: string;\n  code: NotificationResponseCode;\n  method: 'rotate';\n  secret: string | 'null';\n}\n\ninterface NotificationResponseReschedule {\n  result: string;\n  code: NotificationResponseCode;\n  method: 'reschedule';\n}\n\nexport type NotificationResponse = NotificationResponseCancel | NotificationResponseRegister | NotificationResponseSchedule | NotificationResponseRotate | NotificationResponseReschedule;\n\nexport async function makeNotificationRequest(method: NotificationResponse['method'], url: string | false, body: object | false): Promise<NotificationResponse | false> {\n  try {\n    if (url === false || body === false) {\n      return false;\n    }\n\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body),\n      credentials: 'omit'\n    };\n\n    // Send the request\n    const response = await fetch(url, requestOptions);\n\n    if (!response.ok) {\n      // Log additional details for debugging\n      const errorText = await response.text();\n      console.error('API request failed', {\n        status: response.status,\n        statusText: response.statusText,\n        body: errorText\n      });\n      return false;\n    }\n\n    // Attempt to parse the JSON response\n    try {\n      const text = await response.text();\n      const json = JSON.parse(text);\n      switch (method) {\n        case 'cancel':\n          return json as NotificationResponseCancel;\n          break;\n        case 'register':\n          return json as NotificationResponseRegister;\n          break;\n        case 'schedule':\n          return json as NotificationResponseSchedule;\n          break;\n        case 'rotate':\n          return json as NotificationResponseRotate;\n          break;\n        case 'reschedule':\n          return json as NotificationResponseReschedule;\n          break;\n        default:\n          return false;\n          break;\n      }\n    } catch (jsonError) {\n      console.error('Failed to parse JSON response', jsonError);\n      throw new Error('Invalid JSON response from server');\n    }\n  } catch (error) {\n    // Catch and log errors\n    console.error('Error making request:', error);\n    return false;\n  }\n}\n","import { NotificationClientID, NotificationSecret, saveNotificationClient, setNotificationSecret } from '../../index';\nimport { getNotificationAPIURL } from '../getNotificationAPIURL/index';\nimport { getNotificationRequestBody } from '../getNotificationRequestBody/index';\nimport { makeNotificationRequest } from '../loader';\n\nexport async function rotateNotificationSecret(): Promise<boolean> {\n  if (NotificationClientID === '' || NotificationSecret === '') {\n    return false;\n  }\n  const url = getNotificationAPIURL('rotate');\n  const requestBody = getNotificationRequestBody('rotate', []);\n  const response = await makeNotificationRequest('rotate', url, requestBody);\n  if (response === false) {\n    return false;\n  } else {\n    if (response.code === 200 && response.method === 'rotate') {\n      setNotificationSecret(response.secret);\n      await saveNotificationClient();\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { generateIdentifier, isValidURL } from '../../tools/index';\nimport { getLocation, SimplifiedLocation, SimplifiedLocationItem } from '../apis/getLocation/index';\nimport { getRoute, SimplifiedRoute, SimplifiedRouteItem } from '../apis/getRoute/index';\nimport { getStop, SimplifiedStop, SimplifiedStopItem } from '../apis/getStop/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime, getDataUpdateTime } from '../apis/loader';\nimport { getSettingOptionValue } from '../settings/index';\nimport { lfGetItem, lfListItemKeys, lfRemoveItem, lfSetItem } from '../storage/index';\nimport { scheduleNotification } from './apis/scheduleNotification/index';\n\nexport interface NotificationClient {\n  provider: string;\n  client_id: string;\n  secret: string;\n}\n\nexport interface NotificationSchedule {\n  schedule_id: string;\n  stop_id: number;\n  location_name: string;\n  route_id: number;\n  route_name: string;\n  direction: string;\n  estimate_time: number;\n  time_formatting_mode: number;\n  time_offset: number;\n  scheduled_time: number;\n}\n\nexport let NotificationProvider: NotificationClient['provider'] = ''; // base url\nexport let NotificationClientID: NotificationClient['client_id'] = '';\nexport let NotificationSecret: NotificationClient['secret'] = '';\n\nconst NotifcationSchedules: Array<NotificationSchedule> = [];\nconst NotifcationSchedulesIndex: {\n  [schedule_id: NotificationSchedule['schedule_id']]: number;\n} = {};\nconst NotifcationSchedulesStopIDIndex: {\n  [stop_key: string]: Array<number>;\n} = {};\n\nexport async function saveNotificationClient() {\n  const currentClient: NotificationClient = {\n    provider: NotificationProvider,\n    client_id: NotificationClientID,\n    secret: NotificationSecret\n  };\n  await lfSetItem(9, 'n_client', JSON.stringify(currentClient));\n}\n\nexport async function loadNotificationClient() {\n  const existingClient = await lfGetItem(9, 'n_client');\n  if (existingClient) {\n    const existingClientObject = JSON.parse(existingClient) as NotificationClient;\n    NotificationProvider = existingClientObject.provider;\n    NotificationClientID = existingClientObject.client_id;\n    NotificationSecret = existingClientObject.secret;\n  }\n}\n\nexport function getNotificationClientStatus(): boolean {\n  if (NotificationClientID === '' || NotificationSecret === '') {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport function setNotificationProvider(provider: NotificationClient['provider']): void {\n  if (isValidURL(provider)) {\n    const url = new URL(provider);\n    NotificationProvider = `${url.protocol}//${url.hostname}`;\n  } else {\n    throw new Error('The provider is not valid.');\n  }\n}\n\nexport function getNotificationProvider(): NotificationClient['provider'] {\n  return String(NotificationProvider);\n}\n\nexport function setNotificationClientID(client_id: NotificationClient['client_id']): void {\n  if (client_id !== undefined) {\n    NotificationClientID = String(client_id);\n  }\n}\n\nexport function setNotificationSecret(secret: NotificationClient['secret']): void {\n  if (secret !== undefined) {\n    NotificationSecret = String(secret);\n  }\n}\n\nexport async function initializeNotificationSchedules() {\n  const now = new Date().getTime();\n  const keys = await lfListItemKeys(10);\n  let index: number = 0;\n  for (const key of keys) {\n    const thisScheduleJSON = await lfGetItem(10, key);\n    const thisSchedule = JSON.parse(thisScheduleJSON) as NotificationSchedule;\n    // const thisScheduledTime = thisSchedule.scheduled_time;\n    // if (thisScheduledTime > now) {\n    const thisScheduleID = thisSchedule.schedule_id;\n    const thisScheduleStopID = thisSchedule.stop_id;\n    const thisScheduleStopKey = `s_${thisScheduleStopID}`;\n    NotifcationSchedules.push(thisSchedule);\n    NotifcationSchedulesIndex[thisScheduleID] = index;\n    if (!NotifcationSchedulesStopIDIndex.hasOwnProperty(thisScheduleStopKey)) {\n      NotifcationSchedulesStopIDIndex[thisScheduleStopKey] = [];\n    }\n    NotifcationSchedulesStopIDIndex[thisScheduleStopKey].push(index);\n    index += 1;\n    // }\n  }\n}\n\nexport async function saveNotificationSchedule(schedule_id: NotificationSchedule['schedule_id'], stop_id: NotificationSchedule['stop_id'], location_name: NotificationSchedule['location_name'], route_id: NotificationSchedule['route_id'], route_name: NotificationSchedule['route_name'], direction: NotificationSchedule['direction'], estimate_time: NotificationSchedule['estimate_time'], time_formatting_mode: NotificationSchedule['time_formatting_mode'], time_offset: NotificationSchedule['time_offset'], scheduled_time: NotificationSchedule['scheduled_time']) {\n  const thisNotificationSchedule: NotificationSchedule = {\n    schedule_id: schedule_id,\n    stop_id: stop_id,\n    location_name: location_name,\n    route_id: route_id,\n    route_name: route_name,\n    direction: direction,\n    estimate_time: estimate_time,\n    time_formatting_mode: time_formatting_mode,\n    time_offset: time_offset,\n    scheduled_time: scheduled_time\n  };\n  const thisNotificationScheduleStopKey = `s_${stop_id}`;\n  const thisNotificationScheduleIndex = NotifcationSchedules.length; // length - 1 + 1\n  NotifcationSchedules.push(thisNotificationSchedule);\n  NotifcationSchedulesIndex[schedule_id] = thisNotificationScheduleIndex;\n  if (!NotifcationSchedulesStopIDIndex.hasOwnProperty(thisNotificationScheduleStopKey)) {\n    NotifcationSchedulesStopIDIndex[thisNotificationScheduleStopKey] = [];\n  }\n  NotifcationSchedulesStopIDIndex[thisNotificationScheduleStopKey].push(thisNotificationScheduleIndex);\n  await lfSetItem(10, schedule_id, JSON.stringify(thisNotificationSchedule));\n}\n\nexport function getNotificationSchedule(schedule_id: NotificationSchedule['schedule_id']): NotificationSchedule | false {\n  if (NotifcationSchedulesIndex.hasOwnProperty(schedule_id)) {\n    const thisScheduleIndex = NotifcationSchedulesIndex[schedule_id];\n    const thisSchedule = NotifcationSchedules[thisScheduleIndex];\n    const thisScheduledTime = thisSchedule.scheduled_time;\n    const now = new Date().getTime();\n    if (thisScheduledTime > now) {\n      return thisSchedule;\n    } else {\n      return false;\n    }\n  } else {\n    return false;\n  }\n}\n\nexport async function updateNotificationSchedule(schedule_id: NotificationSchedule['schedule_id'], estimate_time: NotificationSchedule['estimate_time'], scheduled_time: NotificationSchedule['scheduled_time']) {\n  if (NotifcationSchedulesIndex.hasOwnProperty(schedule_id)) {\n    const existingScheduleIndex = NotifcationSchedulesIndex[schedule_id];\n    const existingSchedule = NotifcationSchedules[existingScheduleIndex];\n    const updatedSchedule: NotificationSchedule = Object.assign(existingSchedule, {\n      estimate_time: estimate_time,\n      scheduled_time: scheduled_time\n    });\n    NotifcationSchedules.splice(existingScheduleIndex, 1, updatedSchedule);\n    await lfSetItem(10, schedule_id, JSON.stringify(updatedSchedule));\n  }\n}\n\nexport async function removeNotificationSchedule(schedule_id: NotificationSchedule['schedule_id']) {\n  if (NotifcationSchedulesIndex.hasOwnProperty(schedule_id)) {\n    const existingScheduleIndex = NotifcationSchedulesIndex[schedule_id];\n    const existingSchedule = NotifcationSchedules[existingScheduleIndex];\n    const thisScheduleStopID = existingSchedule.stop_id;\n    const thisScheduleStopKey = `s_${thisScheduleStopID}`;\n    NotifcationSchedules.splice(existingScheduleIndex, 1, null);\n    NotifcationSchedulesStopIDIndex[thisScheduleStopKey].splice(NotifcationSchedulesStopIDIndex[thisScheduleStopKey].indexOf(existingScheduleIndex), 1);\n    delete NotifcationSchedulesIndex[schedule_id];\n    await lfRemoveItem(10, schedule_id);\n  }\n}\n\nexport function listNotifcationSchedules(): Array<NotificationSchedule> {\n  const now = new Date().getTime();\n  const result: Array<NotificationSchedule> = [];\n  for (const thisSchedule of NotifcationSchedules) {\n    if (thisSchedule !== null) {\n      const thisScheduledTime = thisSchedule.scheduled_time;\n      if (thisScheduledTime > now) {\n        result.push(thisSchedule);\n      }\n    }\n  }\n  return result;\n}\n\nexport function listNotifcationSchedulesOfStop(StopID: NotificationSchedule['stop_id']): Array<NotificationSchedule> {\n  const result: Array<NotificationSchedule> = [];\n  const now = new Date().getTime();\n  const thisStopKey = `s_${StopID}`;\n  if (NotifcationSchedulesStopIDIndex.hasOwnProperty(thisStopKey)) {\n    const indexes = NotifcationSchedulesStopIDIndex[thisStopKey];\n    for (const index of indexes) {\n      const thisSchedule = NotifcationSchedules[index];\n      if (thisSchedule !== null) {\n        const thisScheduledTime = thisSchedule.scheduled_time;\n        if (thisScheduledTime > now) {\n          result.push(thisSchedule);\n        }\n      }\n    }\n  }\n  return result;\n}\n\nexport function stopHasNotifcationSchedules(StopID: NotificationSchedule['stop_id']): boolean {\n  const now = new Date().getTime();\n  const thisStopKey = `s_${StopID}`;\n  if (NotifcationSchedulesStopIDIndex.hasOwnProperty(thisStopKey)) {\n    const indexes = NotifcationSchedulesStopIDIndex[thisStopKey];\n    for (const index of indexes) {\n      const thisSchedule = NotifcationSchedules[index];\n      if (thisSchedule !== null) {\n        const thisScheduledTime = thisSchedule.scheduled_time;\n        if (thisScheduledTime > now) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\n\nexport async function discardExpiredNotificationSchedules() {\n  const now = new Date().getTime();\n  for (const schedule_id in NotifcationSchedulesIndex) {\n    const existingScheduleIndex = NotifcationSchedulesIndex[schedule_id];\n    const existingSchedule = NotifcationSchedules[existingScheduleIndex];\n    const thisScheduledTime = existingSchedule.scheduled_time;\n    if (thisScheduledTime <= now) {\n      const thisScheduleStopID = existingSchedule.stop_id;\n      const thisScheduleStopKey = `s_${thisScheduleStopID}`;\n      NotifcationSchedules.splice(existingScheduleIndex, 1, null);\n      NotifcationSchedulesStopIDIndex[thisScheduleStopKey].splice(NotifcationSchedulesStopIDIndex[thisScheduleStopKey].indexOf(existingScheduleIndex), 1);\n      delete NotifcationSchedulesIndex[schedule_id];\n      await lfRemoveItem(10, schedule_id);\n    }\n  }\n}\n\nexport interface IntegratedNotificationScheduleItem {\n  name: NotificationSchedule['location_name'];\n  stop_id: NotificationSchedule['stop_id'];\n  estimate_time: NotificationSchedule['estimate_time'];\n  schedule_id: NotificationSchedule['schedule_id'];\n  scheduled_time: NotificationSchedule['scheduled_time'];\n  route: {\n    name: NotificationSchedule['route_name'];\n    direction: NotificationSchedule['direction'];\n    id: NotificationSchedule['route_id'];\n    pathAttributeId: SimplifiedRouteItem['pid'];\n  };\n  is_first: boolean;\n  date: string;\n  hours: string;\n  minutes: string;\n}\n\nexport interface IntegratedNotificationSchedules {\n  items: Array<IntegratedNotificationScheduleItem>;\n  itemQuantity: number;\n  dataUpdateTime: number;\n}\n\nexport async function integrateNotifcationSchedules(requestID: string): Promise<IntegratedNotificationSchedules> {\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  const notificationSchedules = listNotifcationSchedules();\n  const now = new Date().getTime();\n\n  const items: Array<IntegratedNotificationScheduleItem> = [];\n\n  for (const item of notificationSchedules) {\n    const integratedItem = {} as IntegratedNotificationScheduleItem;\n    const thisItemName = item.location_name;\n    integratedItem.name = thisItemName;\n\n    const thisItemStopID = item.stop_id;\n    integratedItem.stop_id = thisItemStopID;\n\n    const thisItemEstimateTime = item.estimate_time;\n    integratedItem.estimate_time = thisItemEstimateTime;\n\n    const thisItemScheduleID = item.schedule_id;\n    integratedItem.schedule_id = thisItemScheduleID;\n\n    const thisItemScheduledTime = item.scheduled_time;\n    integratedItem.scheduled_time = thisItemScheduledTime;\n\n    const thisItemScheduledTimeDateInstance = new Date(thisItemScheduledTime);\n    const thisItemDate = thisItemScheduledTimeDateInstance.getDate();\n    const thisItemHours = thisItemScheduledTimeDateInstance.getHours();\n    const thisItemMinutes = thisItemScheduledTimeDateInstance.getMinutes();\n    integratedItem.date = String(thisItemDate).padStart(2, '0');\n    integratedItem.hours = String(thisItemHours).padStart(2, '0');\n    integratedItem.minutes = String(thisItemMinutes).padStart(2, '0');\n\n    integratedItem.route = {};\n    const thisRouteName = item.route_name;\n    integratedItem.route.name = thisRouteName;\n\n    const thisRouteID = item.route_id;\n    integratedItem.route.id = thisRouteID;\n\n    const thisRouteDirection = item.direction;\n    integratedItem.route.direction = thisRouteDirection;\n\n    // Collect data from Route\n    const thisNotificationScheduleRouteID = item.route_id;\n    const thisNotificationScheduleRouteKey = `r_${thisNotificationScheduleRouteID}`;\n    let thisNotificationScheduleRoute = {} as SimplifiedRouteItem;\n    if (Route.hasOwnProperty(thisNotificationScheduleRouteKey)) {\n      thisNotificationScheduleRoute = Route[thisNotificationScheduleRouteKey];\n    } else {\n      continue;\n    }\n    const thisNotificationScheduleRoutePathAttributeId = thisNotificationScheduleRoute.pid;\n    integratedItem.route.pathAttributeId = thisNotificationScheduleRoutePathAttributeId;\n\n    items.push(integratedItem);\n  }\n\n  items.sort(function (a, b) {\n    return a.scheduled_time - b.scheduled_time;\n  });\n\n  const items2: Array<IntegratedNotificationScheduleItem> = [];\n  let itemQuantity: IntegratedNotificationSchedules['itemQuantity'] = 0;\n  const groups: { [key: string]: true } = {};\n  for (const item of items) {\n    const groupKey = `g_${item.date}_${item.hours}`;\n    if (!groups.hasOwnProperty(groupKey)) {\n      groups[groupKey] = true;\n      item.is_first = true;\n    } else {\n      item.is_first = false;\n    }\n    items2.push(item);\n    itemQuantity += 1;\n  }\n\n  const result: IntegratedNotificationSchedules = {\n    items: items2,\n    itemQuantity: itemQuantity,\n    dataUpdateTime: Math.max(getDataUpdateTime(requestID), now)\n  };\n  deleteDataUpdateTime(requestID);\n  deleteDataReceivingProgress(requestID);\n  return result;\n}\n\nexport interface ScheduleNotificationOption {\n  name: string;\n  time_offset: number;\n  icon: MaterialSymbols;\n  index: number;\n}\n\nexport type ScheduleNotificationOptions = Array<ScheduleNotificationOption>;\n\nexport const scheduleNotificationOptions: ScheduleNotificationOptions = [\n  {\n    name: '5',\n    time_offset: -5,\n    icon: 'clock_loader_10',\n    index: 0\n  },\n  {\n    name: '10',\n    time_offset: -10,\n    icon: 'clock_loader_20',\n    index: 1\n  },\n  {\n    name: '15',\n    time_offset: -15,\n    icon: 'clock_loader_40',\n    index: 2\n  },\n  {\n    name: '20',\n    time_offset: -20,\n    icon: 'clock_loader_60',\n    index: 3\n  },\n  {\n    name: '25',\n    time_offset: -25,\n    icon: 'clock_loader_80',\n    index: 4\n  },\n  {\n    name: '30',\n    time_offset: -30,\n    icon: 'clock_loader_90',\n    index: 5\n  }\n];\n\nexport async function scheduleNotificationForStop(StopID: number, RouteID: number, EstimateTime: number, index: number): Promise<0 | 1 | 2> {\n  if (getNotificationClientStatus()) {\n    const time_formatting_mode = getSettingOptionValue('time_formatting_mode') as number;\n    const requestID = generateIdentifier();\n    const Stop = (await getStop(requestID)) as SimplifiedStop;\n    const Location = (await getLocation(requestID, 0)) as SimplifiedLocation;\n    const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n\n    deleteDataReceivingProgress(requestID);\n    deleteDataUpdateTime(requestID);\n\n    // Collect data from Stop\n    const StopKey = `s_${StopID}`;\n    let thisStop = {} as SimplifiedStopItem;\n    if (Stop.hasOwnProperty(StopKey)) {\n      thisStop = Stop[StopKey];\n    } else {\n      return 0;\n    }\n    const thisStopLocationId = thisStop.stopLocationId;\n    const thisStopGoBack = thisStop.goBack;\n\n    // Collect data from Location\n    const thisLocationKey = `l_${thisStopLocationId}`;\n    let thisLocation = {} as SimplifiedLocationItem;\n    if (Location.hasOwnProperty(thisLocationKey)) {\n      thisLocation = Location[thisLocationKey];\n    } else {\n      return 0;\n    }\n    const thisLocationName = thisLocation.n;\n\n    // Collect data from Route\n    const RouteKey = `r_${RouteID}`;\n    let thisRoute = {} as SimplifiedRouteItem;\n    if (Route.hasOwnProperty(RouteKey)) {\n      thisRoute = Route[RouteKey];\n    } else {\n      return 0;\n    }\n\n    const thisRouteName = thisRoute.n;\n    const thisRouteDeparture = thisRoute.dep;\n    const thisRouteDestination = thisRoute.des;\n    const thisRouteDirection = [thisRouteDestination, thisRouteDeparture, ''][thisStopGoBack ? parseInt(thisStopGoBack) : 0];\n\n    // Collect data from scheduleNotificationOptions\n    const thisOption = scheduleNotificationOptions[index];\n    const timeOffset = thisOption.time_offset;\n\n    const now = new Date().getTime();\n    const scheduled_time = now + EstimateTime * 1000 + timeOffset * 60 * 1000;\n\n    const scheduling = await scheduleNotification(StopID, thisLocationName, RouteID, thisRouteName, thisRouteDirection, EstimateTime, time_formatting_mode, timeOffset, scheduled_time);\n    if (scheduling === false) {\n      return 0; // error\n    } else {\n      return 1; // successful\n    }\n  } else {\n    return 2; // no registration\n  }\n}\n","import { NotificationClientID, NotificationSchedule, NotificationSecret, saveNotificationSchedule } from '../../index';\nimport { getNotificationAPIURL } from '../getNotificationAPIURL/index';\nimport { getNotificationRequestBody } from '../getNotificationRequestBody/index';\nimport { makeNotificationRequest } from '../loader';\nimport { rotateNotificationSecret } from '../rotateNotificationSecret/index';\n\nexport async function scheduleNotification(stop_id: NotificationSchedule['stop_id'], location_name: NotificationSchedule['location_name'], route_id: NotificationSchedule['route_id'], route_name: NotificationSchedule['route_name'], direction: NotificationSchedule['direction'], estimate_time: NotificationSchedule['estimate_time'], time_formatting_mode: NotificationSchedule['time_formatting_mode'], time_offset: NotificationSchedule['time_offset'], scheduled_time: string | number | Date): Promise<string | false> {\n  if (NotificationClientID === '' || NotificationSecret === '' || stop_id === undefined || location_name === undefined || route_id === undefined || route_name === undefined || direction === undefined || estimate_time === undefined || typeof time_formatting_mode !== 'number' || scheduled_time === undefined) {\n    return false;\n  }\n  let processed_schedule_time = new Date();\n  switch (typeof scheduled_time) {\n    case 'string':\n      processed_schedule_time = new Date(scheduled_time);\n      break;\n    case 'number':\n      processed_schedule_time = new Date(scheduled_time);\n      break;\n    default:\n      if (scheduled_time instanceof Date) {\n        processed_schedule_time = scheduled_time;\n      } else {\n        return false;\n      }\n      break;\n  }\n  const url = getNotificationAPIURL('schedule');\n  const requestBody = getNotificationRequestBody('schedule', [stop_id, location_name, route_id, route_name, direction, estimate_time, time_formatting_mode, time_offset, processed_schedule_time.toISOString()]);\n  const response = await makeNotificationRequest('schedule', url, requestBody);\n  if (response === false) {\n    return false;\n  } else {\n    if (response.code === 200 && response.method === 'schedule') {\n      if (Math.random() > 0.8) {\n        await rotateNotificationSecret();\n      }\n      await saveNotificationSchedule(response.schedule_id, stop_id, location_name, route_id, route_name, direction, estimate_time, time_formatting_mode, time_offset, processed_schedule_time.getTime());\n      return response.schedule_id;\n    } else {\n      return false;\n    }\n  }\n}\n","import { registerNotificationClient } from '../../data/notification/apis/registerNotificationClient/index';\nimport { getNotificationProvider, setNotificationProvider } from '../../data/notification/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { isValidURL } from '../../tools/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst RegisterNotificationField = documentQuerySelector('.css_register_notification_field');\nconst RegisterNotificationBodyElement = elementQuerySelector(RegisterNotificationField, '.css_register_notification_body');\nconst RegisterNotificationGroupsElement = elementQuerySelector(RegisterNotificationBodyElement, '.css_register_notification_groups');\n\nconst ProviderInputElement = elementQuerySelector(RegisterNotificationGroupsElement, '.css_register_notification_group[group=\"provider\"] .css_register_notification_group_body input');\nconst RgistrationKeyInputElement = elementQuerySelector(RegisterNotificationGroupsElement, '.css_register_notification_group[group=\"registration-key\"] .css_register_notification_group_body input');\n\nfunction initializeRegisterNotificationField() {\n  ProviderInputElement.value = getNotificationProvider();\n  RgistrationKeyInputElement.value = '';\n}\n\nexport function openRegisterNotification(): void {\n  pushPageHistory('RegisterNotification');\n  RegisterNotificationField.setAttribute('displayed', 'true');\n  initializeRegisterNotificationField();\n  closePreviousPage();\n}\n\nexport function closeRegisterNotification(): void {\n  // revokePageHistory('RegisterNotification');\n  RegisterNotificationField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport async function saveFormulatedRegisterNotification() {\n  promptMessage('manufacturing', '');\n  const provider = ProviderInputElement.value;\n  const registrationKey = RgistrationKeyInputElement.value;\n  if (!isValidURL(provider)) {\n    promptMessage('error', '');\n    return;\n  }\n  // register\n  setNotificationProvider(provider);\n  const registering = await registerNotificationClient(registrationKey);\n  if (registering) {\n    promptMessage('check_circle', '');\n    return;\n  } else {\n    promptMessage('error', '');\n    return;\n  }\n}\n","export function getTextWidth(text: string, weight: number, size: string, fontFamily: string): number {\n  const canvas: HTMLCanvasElement = getTextWidth.canvas || (getTextWidth.canvas = document.createElement('canvas'));\n  const context = canvas.getContext('2d');\n  const font: string = `${weight} ${size} ${fontFamily}`;\n  context.font = font;\n  return context.measureText(text).width;\n}\n\nexport function getTextHeight(text: string, weight: number, size: string, fontFamily: string): number {\n  const canvas: HTMLCanvasElement = getTextHeight.canvas || (getTextHeight.canvas = document.createElement('canvas'));\n  const context = canvas.getContext('2d');\n  const font: string = `${weight} ${size} ${fontFamily}`;\n  context.font = font;\n  context.textBaseline = 'top';\n  return context.measureText(text).actualBoundingBoxDescent;\n}\n\ninterface CornerRadius {\n  tl: number;\n  tr: number;\n  br: number;\n  bl: number;\n}\n\nexport function drawRoundedRect(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number | CornerRadius, fill: string): void {\n  // If radius is a single value, treat it as the same for all corners\n  if (typeof radius === 'number') {\n    radius = { tl: radius, tr: radius, br: radius, bl: radius };\n  } else {\n    // Set defaults if individual radii are not provided\n    radius = {\n      tl: radius.tl || 0,\n      tr: radius.tr || 0,\n      br: radius.br || 0,\n      bl: radius.bl || 0\n    };\n  }\n\n  // Start path\n  ctx.beginPath();\n  // Move to the top-left corner, accounting for the top-left radius\n  ctx.moveTo(x + radius.tl, y);\n  // Draw the top line, rounding the top-right corner\n  ctx.lineTo(x + width - radius.tr, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);\n  // Draw the right side, rounding the bottom-right corner\n  ctx.lineTo(x + width, y + height - radius.br);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);\n  // Draw the bottom side, rounding the bottom-left corner\n  ctx.lineTo(x + radius.bl, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);\n  // Draw the left side, rounding the top-left corner\n  ctx.lineTo(x, y + radius.tl);\n  ctx.quadraticCurveTo(x, y, x + radius.tl, y);\n  // Complete the path\n  ctx.closePath();\n\n  ctx.fillStyle = fill;\n  ctx.fill(); // To fill the shape\n}\n\nexport function generateRoundedRectPath(x: number, y: number, width: number, height: number, radius: number | CornerRadius, inverted: boolean): Array<string> {\n  // Normalize the radius object\n  if (typeof radius === 'number') {\n    radius = { tl: radius, tr: radius, br: radius, bl: radius };\n  } else {\n    radius = {\n      tl: radius.tl || 0,\n      tr: radius.tr || 0,\n      br: radius.br || 0,\n      bl: radius.bl || 0\n    };\n  }\n  const { tl, tr, br, bl } = radius;\n  const command = [];\n  if (inverted) {\n    if (tl !== 0) {\n      command.push(`M${x} ${y + tl}`, `Q${x} ${y} ${x + tl} ${y}`, `H${x}`, `V${y + tl}`);\n    }\n    if (tr !== 0) {\n      command.push(`M${x + width - tr} ${y}`, `Q${x + width} ${y} ${x + width} ${y + tr}`, `V${y}`, `H${x + width - tr}`);\n    }\n    if (br !== 0) {\n      command.push(`M${x + width} ${y + height - br}`, `Q${x + width} ${y + height} ${x + width - br} ${y + height}`, `H${x + width}`, `V${y + height - br}`);\n    }\n    if (bl !== 0) {\n      command.push(`M${x + bl} ${y + height}`, `Q${x} ${y + height} ${x} ${y + height - bl}`, `V${y + height}`, `H${x + bl}`);\n    }\n  } else {\n    command.push(`M${x + tl} ${y}`, `H${x + width - tr}`, `Q${x + width} ${y} ${x + width} ${y + tr}`, `V${y + height - br}`, `Q${x + width} ${y + height} ${x + width - br} ${y + height}`, `H${x + bl}`, `Q${x} ${y + height} ${x} ${y + height - bl}`, `V${y + tl}`, `Q${x} ${y} ${x + tl} ${y}`);\n  }\n  return command;\n}\n","export type ColorScheme = 'light' | 'dark';\n\nexport function getColorScheme(): ColorScheme {\n  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n  if (mediaQuery.matches) {\n    return 'dark';\n  } else {\n    return 'light';\n  }\n}\n\nconst CssVariableValueCache = {\n  light: {},\n  dark: {}\n};\n\nexport function getCSSVariableValue(property: string): string {\n  const CurrentColorScheme = getColorScheme();\n  if (CssVariableValueCache[CurrentColorScheme].hasOwnProperty(property)) {\n    return CssVariableValueCache[CurrentColorScheme][property];\n  }\n  const value = getComputedStyle(document.documentElement).getPropertyValue(property);\n  CssVariableValueCache[CurrentColorScheme][property] = value;\n  return value;\n}\n","export function calculateStandardDeviation(arr: Array<number>): number {\n  // Step 1: Calculate the mean\n  const mean = arr.reduce((acc, val) => acc + val, 0) / arr.length;\n  // Step 2: Calculate the squared difference between each element and the mean\n  const squaredDifferences = arr.map((val) => Math.pow(val - mean, 2));\n  // Step 3: Find the mean of those squared differences\n  const meanOfSquaredDifferences = squaredDifferences.reduce((acc, val) => acc + val, 0) / arr.length;\n  // Step 4: Take the square root of that mean\n  const standardDeviation = Math.sqrt(meanOfSquaredDifferences);\n  return standardDeviation;\n}\n\nexport function standardizeArray(array: Array<number>): Array<number> {\n  // Calculate the mean of the array\n  const mean = array.reduce((acc, val) => acc + val, 0) / array.length;\n\n  // Calculate the standard deviation\n  const stdDev = calculateStandardDeviation(array);\n\n  // Standardize the array\n  return array.map((val) => (val - mean) / stdDev);\n}\n\n// Function to calculate Pearson correlation coefficient\nexport function pearsonCorrelation(x: Array<number>, y: Array<number>): number {\n  const n = x.length;\n  if (n !== y.length) {\n    throw new Error('Arrays must have the same length');\n  }\n\n  let sumX = 0,\n    sumY = 0,\n    sumXY = 0,\n    sumXSquared = 0,\n    sumYSquared = 0;\n\n  for (let i = 0; i < n; i++) {\n    sumX += x[i];\n    sumY += y[i];\n    sumXY += x[i] * y[i];\n    sumXSquared += x[i] ** 2;\n    sumYSquared += y[i] ** 2;\n  }\n\n  const numerator = n * sumXY - sumX * sumY;\n  const denominator = Math.sqrt((n * sumXSquared - sumX ** 2) * (n * sumYSquared - sumY ** 2));\n\n  if (denominator === 0) {\n    return 0; // Correlation is undefined in this case\n  }\n\n  return numerator / denominator;\n}\n\nexport function mergeStandardDeviation(targetAverage: number, targetSTDEV: number, targetDataLength: number, sourceAverage: number, sourceSTDEV: number, sourceDataLength: number): number {\n  const mergedDataLength = targetDataLength + sourceDataLength;\n\n  const mergedAverage = (targetDataLength * targetAverage + sourceDataLength * sourceAverage) / mergedDataLength;\n\n  const mergedVariance = (targetDataLength * (Math.pow(targetSTDEV, 2) + Math.pow(targetAverage, 2)) + sourceDataLength * (Math.pow(sourceSTDEV, 2) + Math.pow(sourceAverage, 2))) / mergedDataLength - Math.pow(mergedAverage, 2);\n\n  const mergedSTDEV = Math.sqrt(mergedVariance);\n  return mergedSTDEV;\n}\n\nexport function mergePearsonCorrelation(targetXAverage: number, targetYAverage: number, targetXSTDEV: number, targetYSTDEV: number, targetDataLength: number, targetCorrelation: number, sourceXAverage: number, sourceYAverage: number, sourceXSTDEV: number, sourceYSTDEV: number, sourceDataLength: number, sourceCorrelation: number): number {\n  const mergedDataLength = targetDataLength + sourceDataLength;\n\n  const mergedXAverage = (targetDataLength * targetXAverage + sourceDataLength * sourceXAverage) / mergedDataLength;\n  const mergedYAverage = (targetDataLength * targetYAverage + sourceDataLength * sourceYAverage) / mergedDataLength;\n\n  const mergedXSTDEV = mergeStandardDeviation(targetXAverage, targetXSTDEV, targetDataLength, sourceXAverage, sourceXSTDEV, sourceDataLength);\n  const mergedYSTDEV = mergeStandardDeviation(targetYAverage, targetYSTDEV, targetDataLength, sourceYAverage, sourceYSTDEV, sourceDataLength);\n\n  const mergedCorrelation = (targetDataLength * (targetXSTDEV * targetYSTDEV * targetCorrelation + targetXAverage * targetYAverage) + sourceDataLength * (sourceXSTDEV * sourceYSTDEV * sourceCorrelation + sourceXAverage * sourceYAverage) - mergedDataLength * mergedXAverage * mergedYAverage) / (mergedDataLength * mergedXSTDEV * mergedYSTDEV);\n  return mergedCorrelation;\n}\n\n/**\n * get the unit vecotr towards the same direction\n * @param vector [a1, a2, a3, ...]\n * @returns [b1, b2, b3, ...]\n */\n\nexport function normalizeVector(vector: Array<number>): Array<number> {\n  const length = Math.hypot(vector);\n  const componentQuantity = vector.length;\n  const newVector = new Float32Array(componentQuantity);\n  if (length > 0) {\n    const scale = 1 / length;\n    for (let i = componentQuantity; i > 0; i--) {\n      newVector[i] = vector[i] * scale;\n    }\n    return Array.from(newVector);\n  } else {\n    return vector;\n  }\n}\n\nexport function smoothArray(array: Array<number>): Array<number> {\n  const arrayLength = array.length;\n  const result = [];\n  for (let i = 1; i < arrayLength; i += 3) {\n    const currentItem = array[i];\n    const previousItem = array[i - 1] || currentItem;\n    const nextItem = array[i + 1] || currentItem;\n    result.push((previousItem + currentItem + nextItem) / 3);\n  }\n  return result;\n}\n\nexport function softmaxArray(array: Array<number>): Array<number> {\n  const arrayLength = array.length;\n\n  // Return an empty array if the input is empty\n  if (arrayLength === 0) {\n    return [];\n  }\n\n  // Find the global maximum\n  let max = -Infinity;\n  for (let i = arrayLength - 1; i >= 0; i--) {\n    const item = array[i];\n    if (item > max) {\n      max = item;\n    }\n  }\n\n  // Exponentiate each element (for numerical stability, subtract the max value)\n  // Sum all the exponentiated values\n  const expArray = new Float32Array(arrayLength);\n  let sumExp = 0;\n  for (let j = arrayLength - 1; j >= 0; j--) {\n    const exp = Math.exp(array[j] - max);\n    expArray[j] = exp;\n    sumExp += exp;\n  }\n\n  // Normalize each value\n  const normalizedArray = new Float32Array(arrayLength);\n  for (let k = arrayLength - 1; k >= 0; k--) {\n    const normalizedValue = expArray[k] / sumExp;\n    normalizedArray[k] = normalizedValue;\n  }\n  return Array.from(normalizedArray);\n}\n\nexport function sigmoidArray(array: Array<number>): Array<number> {\n  const arrayLength = array.length;\n  const normalizedArray = new Float32Array(arrayLength);\n  for (let i = arrayLength - 1; i >= 0; i--) {\n    normalizedArray[i] = 1 / (1 + Math.exp(-1 * array[i]));\n  }\n  return Array.from(normalizedArray);\n}\n\nexport function calculateAverage(array: Array<number>): number {\n  if (array.length === 0) {\n    return 0;\n  } else {\n    const sum = array.reduce((acc, curr) => acc + curr, 0);\n    return sum / array.length;\n  }\n}\n\nexport function findGlobalExtrema(array: Array<number>): [minimum: number, maximum: number] {\n  const arrayLength = array.length;\n  if (arrayLength === 0) {\n    return [0, 0];\n  }\n\n  let min = Infinity;\n  let max = -Infinity;\n\n  for (let i = arrayLength - 1; i >= 0; i--) {\n    const item = array[i];\n    if (item > max) {\n      max = item;\n    }\n    if (item < min) {\n      min = item;\n    }\n  }\n  return [min, max];\n}\n","import { MaterialSymbols } from '../interface/icons/material-symbols-type';\nimport { normalizeVector } from './math';\n\nexport type CardinalDirectionVector = [number, number];\n\nexport interface CardinalDirection {\n  vector: CardinalDirectionVector;\n  id: number;\n  name: string;\n  symbol: string;\n  icon: MaterialSymbols;\n}\n\nexport const UnknownCardinalDirection: CardinalDirection = {\n  vector: [0, 0],\n  id: -1,\n  name: '',\n  symbol: '?',\n  icon: 'explore'\n};\n\n// cardinal directions\nexport const NorthCardinalDirection: CardinalDirection = {\n  vector: [0, 1], // 90 degress\n  id: 0,\n  name: '',\n  symbol: '',\n  icon: 'north'\n};\n\nexport const WestCardinalDirection: CardinalDirection = {\n  vector: [1, 0], // 0 degres\n  id: 1,\n  name: '',\n  symbol: '',\n  icon: 'east'\n};\n\nexport const SouthCardinalDirection: CardinalDirection = {\n  vector: [0, -1], // 270 degress\n  id: 2,\n  name: '',\n  symbol: '',\n  icon: 'south'\n};\n\nexport const EastCardinalDirection: CardinalDirection = {\n  vector: [-1, 0], // 180 degress\n  id: 3,\n  name: '',\n  symbol: '',\n  icon: 'west'\n};\n\n// intercardinal directions\nconst NorthEastCardinalDirection: CardinalDirection = {\n  vector: [Math.SQRT1_2, Math.SQRT1_2], // 45 degrees\n  id: 4,\n  name: '',\n  symbol: '',\n  icon: 'north_east'\n};\n\nconst SouthEastCardinalDirection: CardinalDirection = {\n  vector: [Math.SQRT1_2, -Math.SQRT1_2], // 135 degrees\n  id: 5,\n  name: '',\n  symbol: '',\n  icon: 'south_east'\n};\n\nexport const SouthWestCardinalDirection: CardinalDirection = {\n  vector: [-Math.SQRT1_2, -Math.SQRT1_2], // 225 degrees\n  id: 6,\n  name: '',\n  symbol: '',\n  icon: 'south_west'\n};\n\nexport const NorthWestCardinalDirection: CardinalDirection = {\n  vector: [-Math.SQRT1_2, Math.SQRT1_2], // 315 degrees\n  id: 7,\n  name: '',\n  symbol: '',\n  icon: 'north_west'\n};\n\nexport function getCardinalDirectionFromVector(vector: [number, number]): CardinalDirection {\n  const directions: Array<CardinalDirection> = [UnknownCardinalDirection, NorthCardinalDirection, EastCardinalDirection, SouthCardinalDirection, WestCardinalDirection, NorthEastCardinalDirection, SouthEastCardinalDirection, SouthWestCardinalDirection, NorthWestCardinalDirection];\n  const unitVector = normalizeVector(vector);\n  let maxDotProduct = -Infinity;\n  let bestMatch: CardinalDirection = directions[0];\n  for (const direction of directions) {\n    const dotProduct = direction.vector[0] * unitVector[0] + direction.vector[1] * unitVector[1];\n    if (dotProduct > maxDotProduct) {\n      maxDotProduct = dotProduct;\n      bestMatch = direction;\n    }\n  }\n  return bestMatch;\n}\n","import { CardinalDirection, getCardinalDirectionFromVector, UnknownCardinalDirection } from '../../tools/cardinal-direction';\nimport { getSettingOptionValue } from '../settings/index';\n\ninterface Orientation {\n  degree: number;\n  cardinalDirection: CardinalDirection;\n}\n\nconst userOrientation = {\n  current: -1,\n  permission: {\n    gained: false,\n    asked: false\n  },\n  id: 0\n};\n\nexport function askForCalibratingPermission(): void {\n  if (userOrientation.permission.asked === false && getSettingOptionValue('display_user_orientation') === true) {\n    userOrientation.permission.asked = true;\n    if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {\n      DeviceOrientationEvent.requestPermission()\n        .then((permissionState) => {\n          if (permissionState === 'granted') {\n            // Permission granted, start listening to the event\n            window.addEventListener(\n              'deviceorientation',\n              function (event: DeviceOrientationEvent) {\n                if (event.absolute) {\n                  userOrientation.current = event?.alpha || -1;\n                } else {\n                  if (event.webkitCompassHeading) {\n                    userOrientation.current = event.webkitCompassHeading || -1;\n                  } else {\n                    userOrientation.current = event?.alpha || -1;\n                  }\n                }\n              },\n              true\n            );\n          } else {\n            console.error('Permission not granted for DeviceOrientation');\n          }\n        })\n        .catch((err) => {\n          console.error('Error requesting DeviceOrientation permission:', err);\n        });\n    } else {\n      console.log(`DeviceOrientation isn't supported.`);\n    }\n  }\n}\n\nexport function getUserOrientation(): Orientation {\n  const alpha = userOrientation.current;\n  if (alpha === -1) {\n    return {\n      degree: -1,\n      cardinalDirection: UnknownCardinalDirection\n    };\n  } else {\n    let angle: number = alpha + 90;\n    if (angle > 360) {\n      angle -= 360;\n    }\n    angle *= Math.PI / 180;\n    const vector = [Math.cos(angle), Math.sin(angle)];\n    const cardinalDirection = getCardinalDirectionFromVector(vector);\n    return {\n      degree: alpha,\n      cardinalDirection: cardinalDirection\n    };\n  }\n}\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { addressToString, generateLabelFromAddresses } from '../../tools/address';\nimport { CardinalDirection, getCardinalDirectionFromVector } from '../../tools/cardinal-direction';\nimport { generateDirectionLabels, generateLetterLabels } from '../../tools/labels';\nimport { normalizeVector } from '../../tools/math';\nimport { BusArrivalTime, getBusArrivalTimes } from '../analytics/bus-arrival-time/index';\nimport { getBusData } from '../apis/getBusData/index';\nimport { getBusEvent } from '../apis/getBusEvent/index';\nimport { EstimateTime, EstimateTimeItem, getEstimateTime } from '../apis/getEstimateTime/index';\nimport { getLocation, MergedLocation } from '../apis/getLocation/index';\nimport { getRoute, SimplifiedRoute } from '../apis/getRoute/index';\nimport { getStop } from '../apis/getStop/index';\nimport { batchFindBusesForLocation, EstimateTimeStatus, formatBus, FormattedBus, parseEstimateTime } from '../apis/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime, getDataUpdateTime, setDataReceivingProgress } from '../apis/loader';\nimport { getSettingOptionValue } from '../settings/index';\nimport { getUserOrientation } from '../user-orientation/index';\n\ninterface BatchFoundEstimateTimeItem extends EstimateTimeItem {}\n\ntype BatchFoundEstimateTime = {\n  [key: string]: BatchFoundEstimateTimeItem;\n};\n\nfunction batchFindEstimateTime(EstimateTime: EstimateTime, StopIDList: Array<number>): BatchFoundEstimateTime {\n  const result = {};\n  for (const item of EstimateTime) {\n    if (StopIDList.indexOf(item.StopID) > -1) {\n      const thisStopKey: string = `s_${item.StopID}`;\n      result[thisStopKey] = item;\n    }\n  }\n  return result;\n}\n\ntype BatchFoundEstimateTimeRanking = {\n  [key: string]: IntegratedLocationItemRanking;\n};\n\nfunction rankBatchFoundEstimateTime(batchFoundEstimateTime: BatchFoundEstimateTime, StopIDList: Array<number>): BatchFoundEstimateTimeRanking {\n  // StopIDList act as a secondary filter\n  const result: BatchFoundEstimateTimeRanking = {};\n  const rankingArray: Array<[number, number]> = []; // StopID, EstimateTime\n  for (const thisStopKey in batchFoundEstimateTime) {\n    const thisBatchFoundEstimateTimeItem = batchFoundEstimateTime[thisStopKey];\n    const thisStopID = thisBatchFoundEstimateTimeItem.StopID;\n    const thisEstimateTime = parseInt(thisBatchFoundEstimateTimeItem.EstimateTime);\n    if (thisEstimateTime >= 0 && StopIDList.indexOf(thisStopID) > -1) {\n      rankingArray.push([thisStopID, thisEstimateTime]);\n    }\n  }\n  const rankingArrayLength = rankingArray.length;\n  rankingArray.sort(function (a, b) {\n    return a[1] - b[1];\n  });\n  let index = 1;\n  for (const rankingItem of rankingArray) {\n    // Classify into 4 groups and give a code\n    const rankingRatio = index / rankingArrayLength;\n    const rankingCode = (rankingRatio - (rankingRatio % 0.25)) / 0.25;\n    const thisStopID = rankingItem[0];\n    const thisStopKey = `s_${thisStopID}`;\n    result[thisStopKey] = {\n      number: index,\n      text: index.toString(),\n      code: rankingCode\n    };\n    index += 1;\n  }\n  return result;\n}\n\nexport interface LocationGroupProperty {\n  key: string;\n  icon: MaterialSymbols;\n  value: string;\n}\n\nexport interface LocationGroup {\n  name: string;\n  properties: Array<LocationGroupProperty>;\n}\n\nexport interface IntegratedLocationItemRanking {\n  number: number;\n  text: '--' | string;\n  code: -1 | 0 | 1 | 2 | 3 | 4; // -1: not applicable, 0: 0-25%, 1: 25-50%, 2: 50-75%, 3: 75-100%, 4: 100%\n}\n\nexport interface IntegratedLocationItem {\n  route_name: string;\n  route_direction: string;\n  routeId: number;\n  stopId: number;\n  status: EstimateTimeStatus;\n  ranking: IntegratedLocationItemRanking;\n  buses: Array<FormattedBus>;\n  busArrivalTimes: Array<BusArrivalTime>;\n}\n\nexport interface IntegratedLocation {\n  groupedItems: {\n    [g_index: string]: Array<IntegratedLocationItem>;\n  };\n  groups: {\n    [g_index: string]: LocationGroup;\n  };\n  groupQuantity: number;\n  itemQuantity: {\n    [g_index: string]: number;\n  };\n  LocationName: string;\n  dataUpdateTime: number;\n  hash: string;\n}\n\nexport async function integrateLocation(hash: string, chartWidth: number, chartHeight: number, requestID: string): Promise<IntegratedLocation> {\n  setDataReceivingProgress(requestID, 'getLocation_0', 0, false);\n  setDataReceivingProgress(requestID, 'getLocation_1', 0, false);\n  setDataReceivingProgress(requestID, 'getRoute_0', 0, false);\n  setDataReceivingProgress(requestID, 'getRoute_1', 0, false);\n  setDataReceivingProgress(requestID, 'getStop_0', 0, false);\n  setDataReceivingProgress(requestID, 'getStop_1', 0, false);\n  setDataReceivingProgress(requestID, 'getEstimateTime_0', 0, false);\n  setDataReceivingProgress(requestID, 'getEstimateTime_1', 0, false);\n  setDataReceivingProgress(requestID, 'getBusEvent_0', 0, false);\n  setDataReceivingProgress(requestID, 'getBusEvent_1', 0, false);\n  const EstimateTime = await getEstimateTime(requestID);\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  const Stop = await getStop(requestID);\n  const BusEvent = await getBusEvent(requestID);\n  const BusData = await getBusData(requestID);\n  const BusArrivalTimes = await getBusArrivalTimes(chartWidth, chartHeight);\n\n  const time_formatting_mode = getSettingOptionValue('time_formatting_mode');\n  const location_labels = getSettingOptionValue('location_labels');\n  const display_user_orientation = getSettingOptionValue('display_user_orientation');\n\n  const groupedItems = {} as IntegratedLocation['groupedItems'];\n  const itemQuantity = {} as IntegratedLocation['itemQuantity'];\n  const groups = {} as IntegratedLocation['groups'];\n\n  const userOrientation = getUserOrientation();\n\n  const thisLocationKey = `ml_${hash}`;\n  const thisLocation = Location[thisLocationKey];\n  const thisLocationName = thisLocation.n;\n  const stopLocationIds = thisLocation.id;\n  const setsOfVectors = thisLocation.v;\n\n  let StopIDs = [];\n  let RouteIDs = [];\n  const stopLocationQuantity = stopLocationIds.length;\n\n  for (let i = 0; i < stopLocationQuantity; i++) {\n    StopIDs = StopIDs.concat(thisLocation.s[i]);\n    RouteIDs = RouteIDs.concat(thisLocation.r[i]);\n  }\n\n  const batchFoundEstimateTime = batchFindEstimateTime(EstimateTime, StopIDs);\n  const batchFoundBuses = batchFindBusesForLocation(BusEvent, BusData, Route, StopIDs);\n\n  const cardinalDirections: Array<CardinalDirection> = [];\n  for (const vectorSet of setsOfVectors) {\n    let x: number = 0;\n    let y: number = 0;\n    for (const vector of vectorSet) {\n      x += vector[0];\n      y += vector[1];\n    }\n    const meanVector = normalizeVector([x, y]);\n    const cardinalDirection = getCardinalDirectionFromVector(meanVector);\n    cardinalDirections.push(cardinalDirection);\n  }\n\n  let labels: Array<string> = [];\n  switch (location_labels) {\n    case 'address':\n      labels = generateLabelFromAddresses(thisLocation.a);\n      break;\n    case 'letters':\n      labels = generateLetterLabels(stopLocationQuantity);\n      break;\n    case 'directions':\n      labels = generateDirectionLabels(cardinalDirections);\n      break;\n    default:\n      break;\n  }\n\n  for (let i = 0; i < stopLocationQuantity; i++) {\n    const groupKey = `g_${i}`;\n    groupedItems[groupKey] = [];\n    itemQuantity[groupKey] = 0;\n    groups[groupKey] = {\n      name: labels[i],\n      properties: [\n        {\n          key: 'address',\n          icon: 'personal_places',\n          value: addressToString(thisLocation.a[i])\n        },\n        {\n          key: 'exact_position',\n          icon: 'location_on',\n          value: `${thisLocation.la[i].toFixed(5)}, ${thisLocation.lo[i].toFixed(5)}`\n        },\n        {\n          key: 'cardinal_direction',\n          icon: cardinalDirections[i].icon,\n          value: `${cardinalDirections[i].name}${display_user_orientation && userOrientation.cardinalDirection.id !== -1 && userOrientation.cardinalDirection.id === cardinalDirections[i].id ? '' : ''}`\n        }\n      ]\n    };\n\n    const thisGroupStops = thisLocation.s[i];\n    const stopQuantity = thisGroupStops.length;\n    const thisGroupRanking = rankBatchFoundEstimateTime(batchFoundEstimateTime, thisGroupStops);\n\n    for (let o = 0; o < stopQuantity; o++) {\n      const integratedItem = {} as IntegratedLocationItem;\n      // Collect data from 'Stop'\n      const thisStopID = thisLocation.s[i][o];\n      const thisStopKey = `s_${thisStopID}`;\n      let thisStop: SimplifiedStopItem = {};\n      if (Stop.hasOwnProperty(thisStopKey)) {\n        thisStop = Stop[thisStopKey];\n      } else {\n        continue;\n      }\n      integratedItem.stopId = thisStopID;\n\n      // Collect data from 'thisGroupRanking'\n      let thisItemRanking = { number: 0, text: '--', code: -1 } as IntegratedLocationItemRanking;\n      if (thisGroupRanking.hasOwnProperty(thisStopKey)) {\n        thisItemRanking = thisGroupRanking[thisStopKey];\n      }\n      integratedItem.ranking = thisItemRanking;\n\n      // Collect data from 'Route'\n      const thisRouteID: number = thisLocation.r[i][o];\n      const thisRouteKey = `r_${thisRouteID}`;\n      let thisRoute: SimplifiedRouteItem = {};\n      if (Route.hasOwnProperty(thisRouteKey)) {\n        thisRoute = Route[thisRouteKey];\n      } else {\n        continue;\n      }\n      integratedItem.route_name = thisRoute.n;\n      integratedItem.route_direction = `${[thisRoute.des, thisRoute.dep, ''][parseInt(thisStop.goBack)]}`;\n      integratedItem.routeId = thisRouteID;\n\n      // Collect data from 'batchFoundEstimateTime'\n      let thisEstimateTime = {} as EstimateTimeItem;\n      if (batchFoundEstimateTime.hasOwnProperty(thisStopKey)) {\n        thisEstimateTime = batchFoundEstimateTime[thisStopKey];\n      } else {\n        continue;\n      }\n      const parsedEstimateTime = parseEstimateTime(thisEstimateTime.EstimateTime, time_formatting_mode);\n      integratedItem.status = parsedEstimateTime;\n\n      // Collect data from 'batchFoundBuses'\n      let buses = [];\n      if (batchFoundBuses.hasOwnProperty(thisStopKey)) {\n        buses = batchFoundBuses[thisStopKey].map((e) => formatBus(e));\n      }\n      integratedItem.buses = buses;\n\n      // Collect data from 'BusArrivalTimes'\n      let thisBusArrivalTimes = [];\n      if (BusArrivalTimes.hasOwnProperty(thisStopKey)) {\n        thisBusArrivalTimes = BusArrivalTimes[thisStopKey];\n      }\n      integratedItem.busArrivalTimes = thisBusArrivalTimes;\n\n      groupedItems[groupKey].push(integratedItem);\n      itemQuantity[groupKey] += 1;\n    }\n  }\n\n  for (const key in groupedItems) {\n    groupedItems[key].sort(function (a, b) {\n      return a.routeId - b.routeId;\n    });\n    /*\n      .map((item: IntegratedLocationItem) => {\n        // accessing ranking[key] inside map callback will cause constant violations any way\n        return {\n          route_name: item.route_name,\n          route_direction: item.route_direction,\n          routeId: item.routeId,\n          stopId: item.stopId,\n          status: item.status,\n          rank: {\n            number: thisRankingIndex + 1,\n            code: 0\n          },\n          buses: item.buses,\n          busArrivalTimes: item.busArrivalTimes\n        };\n      })*/\n  }\n  const result: IntegratedLocation = {\n    groupedItems: groupedItems,\n    groups: groups,\n    groupQuantity: stopLocationQuantity,\n    itemQuantity: itemQuantity,\n    LocationName: thisLocationName,\n    hash: hash,\n    dataUpdateTime: getDataUpdateTime(requestID)\n  };\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  //await recordEstimateTimeForUpdateRate(EstimateTime);\n  return result;\n}\n","import { FolderWithContent, isFolderContentSaved, listFoldersWithContent, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype SaveToFolderType = 'stop-on-route' | 'stop-on-location' | 'route' | 'route-on-route' | 'bus' | 'location' | 'location-on-route';\n\nconst SaveToFolderField = documentQuerySelector('.css_save_to_folder_field');\nconst SaveToFolderBodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst SaveToFolderListElement = elementQuerySelector(SaveToFolderBodyElement, '.css_save_to_folder_list');\n\nconst successfulSaveMessage = '';\nconst failedSaveMessage = '';\n\nfunction generateElementOfItem(item: FolderWithContent, type: SaveToFolderType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        saveStopItemOnRoute(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        saveStopItemOnLocation(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'route':\n      itemElement.onclick = function () {\n        saveRouteOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'route-on-route':\n      itemElement.onclick = function () {\n        saveRouteOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'location':\n      itemElement.onclick = function () {\n        saveLocationOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'location-on-route':\n      itemElement.onclick = function () {\n        saveLocationOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'bus':\n      // No action\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nasync function initializeSaveToFolderField(type: SaveToFolderType, parameters: Array<any>) {\n  const foldersWithContent = await listFoldersWithContent();\n  SaveToFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newItemElement.element);\n  }\n  SaveToFolderListElement.append(fragment);\n}\n\nexport function openSaveToFolder(type: SaveToFolderType, parameters: Array<any>): void {\n  pushPageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'true');\n  initializeSaveToFolderField(type, parameters);\n}\n\nexport function closeSaveToFolder(): void {\n  revokePageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nfunction saveStopItemOnRoute(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveStopItemOnLocation(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnDetailsPage(folderID: string, RouteID: number): void {\n  const actionButtonElement = documentQuerySelector('.css_route_details_field .css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"] .css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          actionButtonElement.setAttribute('highlighted', 'true');\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnRoute(folderID: string, RouteID: number): void {\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnDetailsPage(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnRoute(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n","import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = documentQuerySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\ntype ScheduleNotificationType = 'stop-on-route' | 'stop-on-location';\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, type: ScheduleNotificationType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnRoute(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnLocation(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nfunction initializeScheduleNotificationField(type: ScheduleNotificationType, parameters: Array<any>): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newElement.element);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function openScheduleNotification(type: ScheduleNotificationType, parameters: Array<any>): void {\n  pushPageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n  initializeScheduleNotificationField(type, parameters);\n}\n\nexport function closeScheduleNotification(): void {\n  revokePageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function scheduleNotificationForStopItemOnRoute(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nexport function scheduleNotificationForStopItemOnLocation(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { shareLocationPermalink, showLocationPermalinkQRCode } from '../../interface/location/details/index';\nimport { openSaveToFolder } from '../../interface/save-to-folder/index';\nimport { getLocation, MergedLocation, MergedLocationItem } from '../apis/getLocation/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../apis/loader';\n\nexport interface IntegratedLocationDetailsAction {\n  icon: MaterialSymbols;\n  action: Function;\n  key: string,\n  name: string;\n}\n\nexport type IntegratedLocationDetailsActionArray = Array<IntegratedLocationDetailsAction>;\n\nexport interface IntegratedLocationDetails {\n  actions: IntegratedLocationDetailsActionArray;\n  actionsQuantity: number\n  hash: string;\n}\n\nexport async function integrateLocationDetails(hash: string, requestID: string): Promise<IntegratedLocationDetails> {\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  let thisLocation = {} as MergedLocationItem;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    thisLocation = Location[thisLocationKey];\n  } else {\n    return {\n      actions: [],\n      actionsQuantity: 0,\n      hash: hash\n    };\n  }\n  const actions: IntegratedLocationDetailsActionArray = [\n    {\n      icon: 'folder',\n      name: '',\n      key: 'save-to-folder',\n      action: function () {\n        openSaveToFolder('location', [hash]);\n      }\n    },\n    {\n      icon: 'ios_share',\n      name: '',\n      key: 'permalink',\n      action: function () {\n        shareLocationPermalink(hash);\n      }\n    },\n    {\n      icon: 'qr_code_2',\n      name: '',\n      key: 'permalink-qr-code',\n      action: function () {\n        showLocationPermalinkQRCode(hash);\n      }\n    }\n  ];\n  const result: IntegratedLocationDetails = {\n    actions: actions,\n    actionsQuantity: actions.length,\n    hash: hash\n  };\n  return result;\n}\n","import { getLocation, MergedLocation, MergedLocationItem } from '../../../data/apis/getLocation/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../../../data/apis/loader';\nimport { IntegratedLocationDetails, IntegratedLocationDetailsAction, integrateLocationDetails } from '../../../data/location/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../../tools/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../../index';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nlet previousIntegration = {} as IntegratedLocationDetails;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst LocationDetailsField = documentQuerySelector('.css_location_details_field');\nconst LocationDetailsBodyElement = elementQuerySelector(LocationDetailsField, '.css_location_details_body');\nconst LocationDetailsActionsElement = elementQuerySelector(LocationDetailsBodyElement, '.css_location_details_actions');\n\nfunction generateElementOfItem(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_location_details_action');\n\n  // Icon\n  const icon = document.createElement('div');\n  icon.classList.add('css_location_details_action_icon');\n  icon.appendChild(getBlankIconElement());\n  element.appendChild(icon);\n\n  // Name\n  const name = document.createElement('div');\n  name.classList.add('css_location_details_action_name');\n  element.appendChild(name);\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction updateLocationDetailsField(integration: IntegratedLocationDetails, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction, previousItem: IntegratedLocationDetailsAction | null): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_location_details_action_icon');\n      setIcon(thisIconElement, thisItem.icon);\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const nameElement = elementQuerySelector(thisElement, '.css_location_details_action_name');\n      nameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      thisElement.onclick = thisItem.action;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateIcon(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (previousItem.key !== thisItem.key) {\n        updateIcon(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n      }\n\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const actions = integration.actions;\n  const actionsQuantity = integration.actionsQuantity;\n\n  const currentActionsCapacity = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action').length;\n  if (actionsQuantity !== currentActionsCapacity) {\n    const difference = currentActionsCapacity - actionsQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement.element);\n      }\n      LocationDetailsActionsElement.append(fragment);\n    } else {\n      const LocationActionElements = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const itemIndex = currentActionsCapacity - 1 - o;\n        LocationActionElements[itemIndex].remove();\n      }\n    }\n  }\n\n  const LocationActionElements = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action');\n\n  for (let i = 0; i < actionsQuantity; i++) {\n    const thisElement = LocationActionElements[i];\n    const thisItem = actions[i];\n    if (previousIntegration.hasOwnProperty('actions')) {\n      if (previousIntegration.actions[i]) {\n        const previousItem = previousIntegration.actions[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpLocationDetailsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const actions: IntegratedLocationDetailsAction[] = [];\n  /*\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  */\n  const defaultActionsQuantity = 3;\n  for (let i = 0; i < defaultActionsQuantity; i++) {\n    actions.push({\n      name: '',\n      icon: '',\n      key: `action-${i}`,\n      action: function () {}\n    });\n  }\n\n  updateLocationDetailsField(\n    {\n      actions: actions,\n      actionsQuantity: defaultActionsQuantity,\n      hash: ''\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function initializeLocationDetailsField(hash: string) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  const integration = await integrateLocationDetails(hash, requestID);\n  updateLocationDetailsField(integration, false, playing_animation);\n}\n\nexport function openLocationDetails(hash: string): void {\n  pushPageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'true');\n  setUpLocationDetailsFieldSkeletonScreen();\n  initializeLocationDetailsField(hash);\n}\n\nexport function closeLocationDetails(): void {\n  revokePageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'false');\n}\n\nexport async function shareLocationPermalink(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    const thisLocation = Location[thisLocationKey] as MergedLocationItem;\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisLocation.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('check_circle', '');\n        })\n        .catch((e) => {\n          promptMessage('cancel', '');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showLocationPermalinkQRCode(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (Location.hasOwnProperty(thisLocationKey)) {\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    openQRCode(link);\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface BufferZoneItem {\n  Direction: 0 | 1 | 2; // (goBack/GoBack)\n  OriginStopID: number;\n  DestinationStopID: number;\n}\n\nexport type BufferZones = Array<BufferZoneItem>;\n\nexport interface SegmentBufferItem {\n  RouteID: number;\n  BufferZones: BufferZones;\n}\n\nexport type SegmentBuffers = Array<SegmentBufferItem>;\n\nexport type SimplifiedSegmentBufferItem = { [key: string]: Array<BufferZoneItem> };\n\nexport type SimplifiedSegmentBuffer = { [key: string]: SimplifiedSegmentBufferItem };\n\nlet SegmentBuffersAPIVariableCache_available: boolean = false;\nlet SegmentBuffersAPIVariableCache_data: object = {};\n\nasync function extractSegmentBuffers(xml: string): Promise<SegmentBuffers> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"extractSegmentBuffers-worker\" */ './extractSegmentBuffers-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(xml); // Send data to the worker\n  });\n\n  return result;\n}\n\nasync function simplifySegmentBuffers(array: SegmentBuffers): Promise<SimplifiedSegmentBuffer> {\n  const worker = new Worker(new URL(/* webpackChunkName: \"simplifySegmentBuffers-worker\" */ './simplifySegmentBuffers-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(array); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getSegmentBuffers(requestID: string): Promise<SimplifiedSegmentBuffer> {\n  async function getData() {\n    const apis = [\n      [0, 15],\n      [1, 15]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = '';\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getSegmentBuffers_${api.e[0]}`, 'xml');\n      result += data;\n      setDataUpdateTime(requestID, -1);\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 30 * 1000;\n  const cacheKey = 'bus_segment_buffers_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    const extractedResult = await extractSegmentBuffers(result);\n    const simplifiedResult = await simplifySegmentBuffers(extractedResult);\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(simplifiedResult));\n    if (!SegmentBuffersAPIVariableCache_available) {\n      SegmentBuffersAPIVariableCache_available = true;\n      SegmentBuffersAPIVariableCache_data = simplifiedResult;\n    }\n    return simplifiedResult;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      const extractedResult = await extractSegmentBuffers(result);\n      const simplifiedResult = await simplifySegmentBuffers(extractedResult);\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(simplifiedResult));\n      return simplifiedResult;\n    } else {\n      if (!SegmentBuffersAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        SegmentBuffersAPIVariableCache_available = true;\n        SegmentBuffersAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getSegmentBuffers_0', 0, true);\n      setDataReceivingProgress(requestID, 'getSegmentBuffers_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return SegmentBuffersAPIVariableCache_data;\n    }\n  }\n}\n","import { convertPositionsToDistance } from '../../tools/convert';\nimport { getSettingOptionValue } from '../settings/index';\n\ninterface position {\n  latitude: number;\n  longitude: number;\n}\n\nconst userPosition = {\n  current: {\n    latitude: 0,\n    longitude: 0\n  },\n  permission: {\n    gained: false,\n    asked: false\n  },\n  id: 0\n};\n\nexport function askForPositioningPermission(): void {\n  function successHandler(position: any): void {\n    userPosition.permission.gained = true;\n    userPosition.current.latitude = position.coords.latitude;\n    userPosition.current.longitude = position.coords.longitude;\n  }\n  function errorHandler(error: any): void {\n    /*\n    let message = '';\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        message = 'This website does not have permission to use the Geolocation API';\n        break;\n      case error.POSITION_UNAVAILABLE:\n        message = 'The current position could not be determined.';\n        break;\n      case error.PERMISSION_DENIED_TIMEOUT:\n        message = 'The current position could not be determined ' + 'within the specified timeout period.';\n        break;\n    }\n    if (message == '') {\n      const strErrorCode = error.code.toString();\n      message = 'The position could not be determined due to ' + 'an unknown error (Code: ' + strErrorCode + ').';\n    }\n    console.log(message);\n    */\n  }\n  if (userPosition.permission.asked === false && getSettingOptionValue('display_user_location')) {\n    userPosition.permission.asked = true;\n    userPosition.id = navigator.geolocation.watchPosition(successHandler, errorHandler, {\n      enableHighAccuracy: true,\n      timeout: 30000,\n      maximumAge: 0\n    });\n  }\n}\n\nexport function getUserPosition(): position {\n  if (userPosition.permission.asked && userPosition.permission.gained) {\n    return userPosition.current;\n  }\n  if (!userPosition.permission.asked && !userPosition.permission.gained) {\n    askForPositioningPermission();\n    return userPosition.current;\n  }\n  if (userPosition.permission.asked && !userPosition.permission.gained) {\n    return userPosition.current;\n  }\n}\n\nexport function isNearUserPosition(latitude: number, longitude: number, radius: number = 450): boolean {\n  const currentUserPosition = getUserPosition();\n  const distance = convertPositionsToDistance(latitude, longitude, currentUserPosition.latitude, currentUserPosition.longitude);\n  if (distance <= radius) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function getNearestPosition(positions: Array<position>, radius: number = 450): position | null {\n  const currentUserPosition = getUserPosition();\n  let shortestDistance = Infinity;\n  let nearestIndex = -1;\n  for (let i = positions.length - 1; i > 0; i--) {\n    const position = positions[i];\n    const distance = convertPositionsToDistance(currentUserPosition.latitude, currentUserPosition.longitude, position.latitude, position.longitude);\n    if (distance <= radius) {\n      if (distance < shortestDistance) {\n        nearestIndex = i;\n        shortestDistance = distance;\n      }\n    }\n  }\n\n  if (nearestIndex > 0) {\n    return positions[nearestIndex];\n  } else {\n    return null;\n  }\n}\n","import { convertPositionsToDistance } from '../../tools/convert';\nimport { BusArrivalTime, getBusArrivalTimes } from '../analytics/bus-arrival-time/index';\nimport { getBusData } from '../apis/getBusData/index';\nimport { getBusEvent } from '../apis/getBusEvent/index';\nimport { getEstimateTime } from '../apis/getEstimateTime/index';\nimport { getLocation, IndexedLocation, IndexedLocationItem, MergedLocation, SimplifiedLocation, SimplifiedLocationItem } from '../apis/getLocation/index';\nimport { getRoute, SimplifiedRoute, SimplifiedRouteItem } from '../apis/getRoute/index';\nimport { getSegmentBuffers, SimplifiedSegmentBufferItem } from '../apis/getSegmentBuffers/index';\nimport { getStop, SimplifiedStopItem } from '../apis/getStop/index';\nimport { batchFindBusesForRoute, EstimateTimeStatus, formatBus, FormattedBus, parseEstimateTime } from '../apis/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime, getDataUpdateTime, setDataReceivingProgress } from '../apis/loader';\nimport { getSettingOptionValue } from '../settings/index';\nimport { getNearestPosition } from '../user-position/index';\n\ninterface formattedOverlappingRoute {\n  name: string;\n  RouteEndPoints: {\n    RouteDeparture: string;\n    RouteDestination: string;\n    text: string;\n    html: string;\n  };\n  RouteID: number;\n  PathAttributeId: Array<number>;\n}\n\nexport interface integratedStopItemPosition {\n  longitude: number;\n  latitude: number;\n}\n\nexport interface integratedStopItemSegmentBuffer {\n  isSegmentBuffer: boolean;\n  isStartingPoint: boolean;\n  isEndingPoint: boolean;\n}\n\nexport interface integratedStopItemNearbyLocationItem {\n  name: string;\n  distance: number;\n  hash: string;\n}\n\nexport interface integratedStopItem {\n  name: string;\n  goBack: '0' | '1' | '2';\n  status: EstimateTimeStatus;\n  buses: Array<FormattedBus>;\n  overlappingRoutes: Array<formattedOverlappingRoute>;\n  busArrivalTimes: Array<BusArrivalTime>;\n  nearbyLocations: Array<integratedStopItemNearbyLocationItem>;\n  sequence: number;\n  position: integratedStopItemPosition;\n  nearest: boolean;\n  segmentBuffer: integratedStopItemSegmentBuffer;\n  progress: number;\n  id: number;\n}\n\nexport interface IntegratedRoute {\n  groupedItems: { [key: string]: Array<integratedStopItem> };\n  groupQuantity: number;\n  itemQuantity: { [key: string]: number };\n  RouteName: string;\n  RouteEndPoints: {\n    RouteDeparture: string;\n    RouteDestination: string;\n  };\n  dataUpdateTime: number;\n  RouteID: number;\n  PathAttributeId: Array<number>;\n}\n\nexport async function integrateRoute(RouteID: number, PathAttributeId: Array<number>, chartWidth: number, chartHeight: number, requestID: string): Promise<IntegratedRoute> {\n  setDataReceivingProgress(requestID, 'getRoute_0', 0, false);\n  setDataReceivingProgress(requestID, 'getRoute_1', 0, false);\n  setDataReceivingProgress(requestID, 'getStop_0', 0, false);\n  setDataReceivingProgress(requestID, 'getStop_1', 0, false);\n  setDataReceivingProgress(requestID, 'getLocation_0', 0, false);\n  setDataReceivingProgress(requestID, 'getLocation_1', 0, false);\n  setDataReceivingProgress(requestID, 'getSegmentBuffers_0', 0, false);\n  setDataReceivingProgress(requestID, 'getSegmentBuffers_1', 0, false);\n  setDataReceivingProgress(requestID, 'getEstimateTime_0', 0, false);\n  setDataReceivingProgress(requestID, 'getEstimateTime_1', 0, false);\n  setDataReceivingProgress(requestID, 'getBusEvent_0', 0, false);\n  setDataReceivingProgress(requestID, 'getBusEvent_1', 0, false);\n  setDataReceivingProgress(requestID, 'getBusData_0', 0, false);\n  setDataReceivingProgress(requestID, 'getBusData_1', 0, false);\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  const Stop = await getStop(requestID);\n  const SimplifiedLocation = (await getLocation(requestID, 0)) as SimplifiedLocation;\n  const MergedLocation = (await getLocation(requestID, 1)) as MergedLocation;\n  const IndexedLocation = (await getLocation(requestID, 2)) as IndexedLocation;\n  const SegmentBuffers = await getSegmentBuffers(requestID);\n  const EstimateTime = await getEstimateTime(requestID);\n  const BusEvent = await getBusEvent(requestID);\n  const BusData = await getBusData(requestID);\n  const BusArrivalTimes = await getBusArrivalTimes(chartWidth, chartHeight);\n\n  const batchFoundBuses = batchFindBusesForRoute(BusEvent, BusData, Route, RouteID, PathAttributeId);\n\n  let hasSegmentBuffers: boolean = false;\n  let thisSegmentBuffers: SimplifiedSegmentBufferItem = {};\n  if (SegmentBuffers.hasOwnProperty(`r_${RouteID}`)) {\n    hasSegmentBuffers = true;\n    thisSegmentBuffers = SegmentBuffers[`r_${RouteID}`];\n  }\n\n  const time_formatting_mode = getSettingOptionValue('time_formatting_mode') as number;\n\n  let result = [];\n  let positions = [];\n\n  for (const item of EstimateTime) {\n    let integratedStopItem = {} as integratedStopItem;\n\n    const thisRouteID = item.RouteID;\n\n    // Check whether this stop is on this route or not\n    if ([RouteID, RouteID * 10].includes(thisRouteID) || PathAttributeId.includes(thisRouteID)) {\n      // Parse estimate time\n      integratedStopItem.status = parseEstimateTime(item?.EstimateTime, time_formatting_mode);\n\n      // Collect data from 'Stop'\n      const thisStopKey = `s_${item.StopID}`;\n      let thisStop = {} as SimplifiedStopItem;\n      if (Stop.hasOwnProperty(thisStopKey)) {\n        thisStop = Stop[thisStopKey];\n      } else {\n        continue;\n      }\n      integratedStopItem.id = item.StopID;\n      integratedStopItem.sequence = thisStop.seqNo;\n      integratedStopItem.goBack = thisStop.goBack;\n\n      // Collect data from 'SimplifiedLocation'\n      const thisLocationKey = `l_${thisStop.stopLocationId}`;\n      let thisSimplifiedLocation = {} as SimplifiedLocationItem;\n      if (SimplifiedLocation.hasOwnProperty(thisLocationKey)) {\n        thisSimplifiedLocation = SimplifiedLocation[thisLocationKey];\n      } else {\n        continue;\n      }\n      integratedStopItem.name = thisSimplifiedLocation.n;\n      integratedStopItem.overlappingRoutes = thisSimplifiedLocation.r\n        .filter((id: number) => id !== RouteID)\n        .map((id: number) => {\n          const overlappingRouteKey = `r_${id}`;\n          if (Route.hasOwnProperty(overlappingRouteKey)) {\n            const overlappingRoute = Route[overlappingRouteKey] as SimplifiedRouteItem;\n            const formattedOverlappingRoute = {\n              name: overlappingRoute.n,\n              RouteEndPoints: {\n                RouteDeparture: overlappingRoute.dep,\n                RouteDestination: overlappingRoute.des,\n                text: `${overlappingRoute.dep} \\u2194 ${overlappingRoute.des}`, // u2194 -> ''\n                html: `<span>${overlappingRoute.dep}</span><span>\\u2194</span><span>${overlappingRoute.des}</span>`\n              },\n              RouteID: overlappingRoute.id,\n              PathAttributeId: overlappingRoute.pid\n            };\n            return formattedOverlappingRoute;\n          } else {\n            return null;\n          }\n        })\n        .filter((e) => {\n          return e !== null;\n        });\n      integratedStopItem.position = {\n        longitude: thisSimplifiedLocation.lo,\n        latitude: thisSimplifiedLocation.la\n      };\n      positions.push({\n        latitude: thisSimplifiedLocation.la,\n        longitude: thisSimplifiedLocation.lo,\n        id: item.StopID\n      });\n\n      // Collect data from 'IndexedLocation' and 'MergedLocation'\n      const thisSimplifiedLocationGeohash = thisSimplifiedLocation.g;\n      let thisIndexedLocationItem: Array<IndexedLocationItem> = [];\n      if (IndexedLocation.hasOwnProperty(thisSimplifiedLocationGeohash)) {\n        thisIndexedLocationItem = IndexedLocation[thisSimplifiedLocationGeohash];\n      }\n      let nearbyLocations: Array<integratedStopItemNearbyLocationItem> = [];\n      for (const item of thisIndexedLocationItem) {\n        const mergedLocationKey = `ml_${item.hash}`;\n        if (MergedLocation.hasOwnProperty(mergedLocationKey)) {\n          const thisMergedLocation = MergedLocation[mergedLocationKey];\n          const nearbyLocationItem: integratedStopItemNearbyLocationItem = {\n            name: thisMergedLocation.n,\n            distance: convertPositionsToDistance(thisMergedLocation.la[0], thisMergedLocation.lo[0], thisSimplifiedLocation.la, thisSimplifiedLocation.lo) | 0,\n            hash: thisMergedLocation.hash\n          };\n          nearbyLocations.push(nearbyLocationItem);\n        }\n      }\n      nearbyLocations.sort(function (a, b) {\n        return a.distance - b.distance;\n      });\n      integratedStopItem.nearbyLocations = nearbyLocations;\n\n      // Collect data from 'batchFoundBuses'\n      let buses = []; // as Array<FormattedBus>\n      for (const overlappingStopID of thisSimplifiedLocation.s) {\n        const overlappingStopKey = `s_${overlappingStopID}`;\n        if (batchFoundBuses.hasOwnProperty(overlappingStopKey)) {\n          buses.push(batchFoundBuses[overlappingStopKey].map((e) => formatBus(e)));\n        }\n      }\n      integratedStopItem.buses = buses.flat().sort(function (a, b) {\n        return a.index - b.index;\n      });\n\n      // Collect data from 'BusArrivalTimes'\n      let thisBusArrivalTimes = [];\n      if (BusArrivalTimes.hasOwnProperty(thisStopKey)) {\n        thisBusArrivalTimes = BusArrivalTimes[thisStopKey];\n      }\n      integratedStopItem.busArrivalTimes = thisBusArrivalTimes;\n\n      // Check whether this stop is segment buffer\n      let isSegmentBuffer: boolean = false;\n      let isStartingPoint: boolean = false;\n      let isEndingPoint: boolean = false;\n      let useReversed: boolean = false;\n      if (hasSegmentBuffers) {\n        const groupKey = `g_${integratedStopItem.goBack}`;\n        let segmentBufferGroup = [];\n\n        if (thisSegmentBuffers.hasOwnProperty(groupKey)) {\n          segmentBufferGroup = thisSegmentBuffers[groupKey];\n        } else {\n          if (integratedStopItem.goBack === '1') {\n            useReversed = true;\n            segmentBufferGroup = thisSegmentBuffers['g_0'];\n          }\n        }\n\n        for (const thisBufferZone of segmentBufferGroup) {\n          if (thisBufferZone.OriginStopID === item.StopID || thisBufferZone.DestinationStopID === item.StopID) {\n            isSegmentBuffer = true;\n          }\n          if (useReversed) {\n            if (thisBufferZone.OriginStopID === item.StopID) {\n              isEndingPoint = true;\n            }\n            if (thisBufferZone.DestinationStopID === item.StopID) {\n              isStartingPoint = true;\n            }\n          } else {\n            if (thisBufferZone.OriginStopID === item.StopID) {\n              isStartingPoint = true;\n            }\n            if (thisBufferZone.DestinationStopID === item.StopID) {\n              isEndingPoint = true;\n            }\n          }\n        }\n      }\n      integratedStopItem.segmentBuffer = {\n        isSegmentBuffer,\n        isStartingPoint,\n        isEndingPoint\n      };\n\n      result.push(integratedStopItem);\n    }\n  }\n\n  result.sort(function (a, b) {\n    return a.sequence - b.sequence;\n  });\n\n  const nearestPosition = getNearestPosition(positions, 450);\n\n  let isBufferZoneOpened: boolean = false;\n  let isBufferZoneClosed: boolean = false;\n\n  let groupedItems: { [key: string]: Array<integratedStopItem> } = {};\n  let groupQuantity: number = 0;\n  let itemQuantity: { [key: string]: number } = {};\n\n  const resultLength = result.length;\n\n  for (let index = 0; index < resultLength; index++) {\n    let item = result[index];\n    const nextItem = result[index + 1] || item;\n    let progress = 0;\n\n    if (item.buses.length > 0) {\n      if (item.buses[0].onThisRoute) {\n        const [x, y] = [item.buses[0].position.longitude, item.buses[0].position.latitude];\n        const [x1, y1] = [item.position.longitude, item.position.latitude];\n        const [x2, y2] = [nextItem.position.longitude, nextItem.position.latitude];\n        const dotProduct = (x - x1) * (x2 - x) + (y - y1) * (y2 - y);\n        if (dotProduct >= 0) {\n          // ensure that (x, y) is between (x1, y1) and (x2, y2)\n          const distance1 = Math.hypot(x - x1, y - y1);\n          const distance2 = Math.hypot(x - x2, y - y2);\n          progress = Math.max(0, Math.min(distance1 / (distance1 + distance2), 1));\n        }\n      }\n    }\n    item.progress = progress;\n\n    if (item.segmentBuffer.isStartingPoint) {\n      isBufferZoneOpened = true;\n    }\n\n    if (item.segmentBuffer.isEndingPoint) {\n      if (isBufferZoneOpened) {\n        isBufferZoneClosed = true;\n      }\n    }\n\n    if (isBufferZoneOpened && !isBufferZoneClosed) {\n      item.segmentBuffer.isSegmentBuffer = true;\n    }\n\n    if (isBufferZoneOpened && isBufferZoneClosed) {\n      isBufferZoneOpened = false;\n      isBufferZoneClosed = false;\n    }\n\n    let isNearest = false;\n    if (nearestPosition !== null) {\n      if (nearestPosition.id === item.id) {\n        isNearest = true;\n      }\n    }\n    item.nearest = isNearest;\n\n    const groupKey = `g_${item.goBack}` || 'g_0';\n\n    if (!groupedItems.hasOwnProperty(groupKey)) {\n      groupedItems[groupKey] = [];\n      itemQuantity[groupKey] = 0;\n      groupQuantity += 1;\n    }\n\n    groupedItems[groupKey].push(item);\n    itemQuantity[groupKey] += 1;\n  }\n\n  const thisRoute = Route[`r_${RouteID}`];\n  const thisRouteName = thisRoute.n;\n  const thisRouteDeparture = thisRoute.dep;\n  const thisRouteDestination = thisRoute.des;\n\n  const result2: IntegratedRoute = {\n    groupedItems: groupedItems,\n    groupQuantity: groupQuantity,\n    itemQuantity: itemQuantity,\n    RouteName: thisRouteName,\n    RouteEndPoints: {\n      RouteDeparture: thisRouteDeparture,\n      RouteDestination: thisRouteDestination\n    },\n    dataUpdateTime: getDataUpdateTime(requestID),\n    RouteID,\n    PathAttributeId\n  };\n\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  // await recordEstimateTimeForUpdateRate(EstimateTime);\n  return result2;\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface ProviderItem {\n  id: number;\n  nameZn: string; // name in Chinese (Zhngwn)\n  nameEn: string; // name in English\n  email: string;\n  phoneInfo: string;\n  stationId: string;\n  stationNameZn: string;\n  stationNameEn: string;\n  type: '0' | '1' | '2' | '3' | '4' | '5'; // 0: city bus station, 1: coach bus station, 2: MRT station, 3: train station, 4: airport, 5: port\n}\n\nexport type Provider = Array<ProviderItem>;\n\nlet ProviderAPIVariableCache_available: boolean = false;\nlet ProviderAPIVariableCache_data: object = {};\n\nexport async function getProvider(requestID: string): Promise<Provider> {\n  async function getData() {\n    const apis = [\n      [0, 9],\n      [1, 9]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = [];\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getProvider_${api.e[0]}`, 'json');\n      result = result.concat(data.BusInfo);\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 60 * 1000;\n  const cacheKey = 'bus_provider_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(result));\n    if (!ProviderAPIVariableCache_available) {\n      ProviderAPIVariableCache_available = true;\n      ProviderAPIVariableCache_data = result;\n    }\n    return result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(result));\n      return result;\n    } else {\n      if (!ProviderAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        ProviderAPIVariableCache_available = true;\n        ProviderAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getProvider_0', 0, true);\n      setDataReceivingProgress(requestID, 'getProvider_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return ProviderAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nlet SemiTimetableAPIVariableCache_available: boolean = false;\nlet SemiTimetableAPIVariableCache_data: object = {};\n\nexport async function getSemiTimeTable(requestID: string): Promise<object> {\n  async function getData() {\n    const apis = [\n      [0, 12],\n      [1, 12]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = [];\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getSemiTimeTable_${api.e[0]}`, 'json');\n      result = result.concat(data.BusInfo);\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 14 * 1000;\n  const cacheKey = 'bus_semi_timetable_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(result));\n    if (!SemiTimetableAPIVariableCache_available) {\n      SemiTimetableAPIVariableCache_available = true;\n      SemiTimetableAPIVariableCache_data = result;\n    }\n    return result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(result));\n      return result;\n    } else {\n      if (!SemiTimetableAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        SemiTimetableAPIVariableCache_available = true;\n        SemiTimetableAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getSemiTimeTable_0', 0, true);\n      setDataReceivingProgress(requestID, 'getSemiTimeTable_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return SemiTimetableAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nlet TimetableAPIVariableCache_available: boolean = false;\nlet TimetableAPIVariableCache_data: object = {};\n\nexport async function getTimeTable(requestID: string): Promise<object> {\n  async function getData() {\n    const apis = [\n      [0, 14],\n      [1, 14]\n    ].map((e) => ({ url: getAPIURL(e[0], e[1]), e: e }));\n    let result = [];\n    for (const api of apis) {\n      const data = await fetchData(api.url, requestID, `getTimeTable_${api.e[0]}`, 'json');\n      result = result.concat(data.BusInfo);\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime);\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 14 * 1000;\n  const cacheKey = 'bus_timetable_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(result));\n    if (!TimetableAPIVariableCache_available) {\n      TimetableAPIVariableCache_available = true;\n      TimetableAPIVariableCache_data = result;\n    }\n    return result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(result));\n      return result;\n    } else {\n      if (!TimetableAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        TimetableAPIVariableCache_available = true;\n        TimetableAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getTimeTable_0', 0, true);\n      setDataReceivingProgress(requestID, 'getTimeTable_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return TimetableAPIVariableCache_data;\n    }\n  }\n}\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { dateToString, dateValueToDayOfWeek, getThisWeekOrigin, offsetDate } from '../../tools/time';\nimport { getProvider, Provider, ProviderItem } from '../apis/getProvider/index';\nimport { getRoute, Route, RouteItem } from '../apis/getRoute/index';\nimport { getSemiTimeTable } from '../apis/getSemiTimeTable/index';\nimport { getTimeTable } from '../apis/getTimeTable/index';\nimport { parseTimeCode, TimeMoment, TimeRange } from '../apis/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../apis/loader';\n\nfunction findRoute(Route: Route, RouteID: number): RouteItem {\n  let thisRoute = {} as RouteItem;\n  for (const item of Route) {\n    if (item.Id === RouteID) {\n      thisRoute = item;\n      break;\n    }\n  }\n  return thisRoute;\n}\n\nfunction findProvider(Provider: Provider, providerId: number): ProviderItem {\n  let thisProvider = {} as ProviderItem;\n  for (const item of Provider) {\n    if (item.id === providerId) {\n      thisProvider = item;\n    }\n  }\n  return thisProvider;\n}\n\nexport interface CalendarEvent {\n  date: Date;\n  dateString: string;\n  duration: number;\n  deviation: number;\n}\n\nexport type CalendarEventGroup = Array<CalendarEvent>;\n\nexport interface CalendarDay {\n  name: string;\n  day: number;\n  code: string;\n}\n\nexport interface Calendar {\n  calendarDays: {\n    [key: string]: CalendarDay;\n  };\n  calendarDayQuantity: 7;\n  calendarEventGroups: {\n    [key: string]: CalendarEventGroup;\n  };\n  calendarEventQuantity: {\n    [key: string]: number;\n  };\n}\n\nfunction generateCalendarFromTimeTables(RouteID: number, PathAttributeId: Array<number>, timeTableRules: object, SemiTimeTable: [], TimeTable: []): Calendar {\n  let calendar: Calendar = {\n    calendarDays: {\n      d_0: {\n        name: '',\n        day: 0,\n        code: 'd_0'\n      },\n      d_1: {\n        name: '',\n        day: 1,\n        code: 'd_1'\n      },\n      d_2: {\n        name: '',\n        day: 2,\n        code: 'd_2'\n      },\n      d_3: {\n        name: '',\n        day: 3,\n        code: 'd_3'\n      },\n      d_4: {\n        name: '',\n        day: 4,\n        code: 'd_4'\n      },\n      d_5: {\n        name: '',\n        day: 5,\n        code: 'd_5'\n      },\n      d_6: {\n        name: '',\n        day: 6,\n        code: 'd_6'\n      }\n    },\n    calendarDayQuantity: 7,\n    calendarEventGroups: {\n      d_0: [],\n      d_1: [],\n      d_2: [],\n      d_3: [],\n      d_4: [],\n      d_5: [],\n      d_6: []\n    },\n    calendarEventQuantity: {\n      d_0: 0,\n      d_1: 0,\n      d_2: 0,\n      d_3: 0,\n      d_4: 0,\n      d_5: 0,\n      d_6: 0\n    }\n  };\n  const thisWeekOrigin = getThisWeekOrigin();\n  for (const item of SemiTimeTable) {\n    if (PathAttributeId.indexOf(item.PathAttributeId) > -1) {\n      if (item.DateType === '0') {\n        const dayOfWeek = dateValueToDayOfWeek(item.DateValue);\n        const thisDayOrigin = offsetDate(thisWeekOrigin, dayOfWeek.day, 0, 0);\n        const thisPeriodStartTime = parseTimeCode(item.StartTime, 0);\n        const thisPeriodStartTimeDateObject = offsetDate(thisDayOrigin, 0, thisPeriodStartTime.hours, thisPeriodStartTime.minutes);\n        const thisPeriodEndTime = parseTimeCode(item.EndTime, 0);\n        const thisPeriodEndTimeDateObject = offsetDate(thisDayOrigin, 0, thisPeriodEndTime.hours, thisPeriodEndTime.minutes);\n        const thisPeriodDurationInMinutes = Math.abs(thisPeriodEndTime.hours * 60 + thisPeriodEndTime.minutes - (thisPeriodStartTime.hours * 60 + thisPeriodStartTime.minutes));\n\n        const minWindow = parseInt(item.LongHeadway);\n        const maxWindow = parseInt(item.LowHeadway);\n        const averageWindow = (maxWindow + minWindow) / 2;\n        const headwayQuantity = thisPeriodDurationInMinutes / averageWindow;\n\n        for (let i = 0; i < headwayQuantity; i++) {\n          let violateRules = false;\n          const thisHeadwayDate = offsetDate(thisDayOrigin, 0, thisPeriodStartTime.hours, thisPeriodStartTime.minutes + maxWindow * i);\n          if (thisHeadwayDate.getTime() < thisPeriodStartTimeDateObject.getTime()) {\n            violateRules = true;\n          }\n          if (thisHeadwayDate.getTime() > thisPeriodEndTimeDateObject.getTime()) {\n            violateRules = true;\n          }\n          // TODO: check timeTableRules\n          if (violateRules === false) {\n            calendar.calendarEventGroups[dayOfWeek.code].push({\n              date: thisHeadwayDate,\n              dateString: dateToString(thisHeadwayDate, 'hh:mm'),\n              duration: maxWindow,\n              deviation: Math.abs(averageWindow - maxWindow)\n            });\n            calendar.calendarEventQuantity[dayOfWeek.code] += 1;\n          }\n        }\n      }\n    }\n  }\n  for (const item of TimeTable) {\n    if (PathAttributeId.indexOf(item.PathAttributeId) > -1) {\n      if (item.DateType === '0') {\n        let violateRules = false;\n        const dayOfWeek = dateValueToDayOfWeek(item.DateValue);\n        const thisDayOrigin = offsetDate(thisWeekOrigin, dayOfWeek.day, 0, 0);\n        const thisDepartureTime = parseTimeCode(item.DepartureTime, 0);\n        const thisHeadwayDate = offsetDate(thisDayOrigin, 0, thisDepartureTime.hours, thisDepartureTime.minutes);\n        // TODO: check timeTableRules\n        if (violateRules === false) {\n          calendar.calendarEventGroups[dayOfWeek.code].push({\n            date: thisHeadwayDate,\n            dateString: dateToString(thisHeadwayDate, 'hh:mm'),\n            duration: 15,\n            deviation: 0\n          });\n          calendar.calendarEventQuantity[dayOfWeek.code] += 1;\n        }\n      }\n    }\n  }\n  for (const code in calendar.calendarEventGroups) {\n    calendar.calendarEventGroups[code].sort(function (a, b) {\n      return a.date.getTime() - b.date.getTime();\n    });\n  }\n  return calendar;\n}\n\nexport interface TimeTableRules {\n  go: {\n    weekday: {\n      first: TimeMoment;\n      last: TimeMoment;\n      rushHourWindow: TimeRange;\n      offRushHourWindow: TimeRange;\n    };\n    holiday: {\n      first: TimeMoment;\n      last: TimeMoment;\n      rushHourWindow: TimeRange;\n      offRushHourWindow: TimeRange;\n    };\n  };\n  back: {\n    weekday: {\n      first: TimeMoment;\n      last: TimeMoment;\n      rushHourWindow: TimeRange;\n      offRushHourWindow: TimeRange;\n    };\n    holiday: {\n      first: TimeMoment;\n      last: TimeMoment;\n      rushHourWindow: TimeRange;\n      offRushHourWindow: TimeRange;\n    };\n  };\n  realSequence: any;\n}\n\nfunction getTimeTableRules(thisRoute: RouteItem): TimeTableRules {\n  const thisRouteGoFirstBusTime = parseTimeCode(thisRoute.goFirstBusTime, 0);\n  const thisRouteGoLastBusTime = parseTimeCode(thisRoute.goLastBusTime, 0);\n\n  const thisRouteBackFirstBusTime = parseTimeCode(thisRoute.backFirstBusTime, 0);\n  const thisRouteBackLastBusTime = parseTimeCode(thisRoute.backLastBusTime, 0);\n\n  const thisRouteGoFirstBusTimeOnHoliday = parseTimeCode(thisRoute.holidayGoFirstBusTime, 0);\n  const thisRouteGoLastBusTimeOnHoliday = parseTimeCode(thisRoute.holidayGoLastBusTime, 0);\n\n  const thisRouteBackFirstBusTimeOnHoliday = parseTimeCode(thisRoute.holidayBackFirstBusTime, 0);\n  const thisRouteBackLastBusTimeOnHoliday = parseTimeCode(thisRoute.holidayBackLastBusTime, 0);\n\n  const rushHourWindow = parseTimeCode(thisRoute.peakHeadway, 1);\n  const offRushHourWindow = parseTimeCode(thisRoute.offPeakHeadway, 1);\n\n  const rushHourWindowOnHoliday = parseTimeCode(thisRoute.holidayPeakHeadway, 1);\n  const offRushHourWindowOnHoliday = parseTimeCode(thisRoute.holidayOffPeakHeadway, 1);\n  // window  the interval/gap between arrivals of buses\n\n  const realSequence = thisRoute.realSequence;\n  return {\n    go: {\n      weekday: {\n        first: thisRouteGoFirstBusTime,\n        last: thisRouteGoLastBusTime,\n        rushHourWindow: rushHourWindow,\n        offRushHourWindow: offRushHourWindow\n      },\n      holiday: {\n        first: thisRouteGoFirstBusTimeOnHoliday,\n        last: thisRouteGoLastBusTimeOnHoliday,\n        rushHourWindow: rushHourWindowOnHoliday,\n        offRushHourWindow: offRushHourWindowOnHoliday\n      }\n    },\n    back: {\n      weekday: {\n        first: thisRouteBackFirstBusTime,\n        last: thisRouteBackLastBusTime,\n        rushHourWindow: rushHourWindow,\n        offRushHourWindow: offRushHourWindow\n      },\n      holiday: {\n        first: thisRouteBackFirstBusTimeOnHoliday,\n        last: thisRouteBackLastBusTimeOnHoliday,\n        rushHourWindow: rushHourWindowOnHoliday,\n        offRushHourWindow: offRushHourWindowOnHoliday\n      }\n    },\n    realSequence: realSequence\n  };\n}\n\nexport interface integratedRouteDetailsProperty {\n  key: string;\n  icon: MaterialSymbols;\n  value: string;\n}\n\nexport type integratedRouteDetailsProperties = Array<integratedRouteDetailsProperty>;\n\nexport interface integratedRouteDetails {\n  timeTableRules: TimeTableRules;\n  calendar: Calendar;\n  properties: integratedRouteDetailsProperties;\n}\n\nexport async function integrateRouteDetails(RouteID: number, PathAttributeId: Array<number>, requestID: string): Promise<integratedRouteDetails> {\n  const Route = (await getRoute(requestID, false)) as Route;\n  const thisRoute = findRoute(Route, RouteID);\n\n  const SemiTimeTable = await getSemiTimeTable(requestID);\n  const TimeTable = await getTimeTable(requestID);\n  const Provider = await getProvider(requestID);\n  const timeTableRules = getTimeTableRules(thisRoute);\n  const calendar = generateCalendarFromTimeTables(RouteID, PathAttributeId, timeTableRules, SemiTimeTable, TimeTable);\n  const thisProviderId = thisRoute.providerId;\n  const thisProvider = findProvider(Provider, thisProviderId);\n\n  const result: integratedRouteDetails = {\n    timeTableRules: timeTableRules,\n    calendar: calendar,\n    properties: [\n      {\n        key: 'route_name',\n        icon: 'route',\n        value: thisRoute.nameZh\n      },\n      {\n        key: 'pricing',\n        icon: 'attach_money',\n        value: thisRoute.ticketPriceDescriptionZh\n      },\n      {\n        key: 'provider_name',\n        icon: 'corporate_fare',\n        value: thisProvider.nameZn\n      },\n      {\n        key: 'provider_phone',\n        icon: 'call',\n        value: thisProvider.phoneInfo\n      },\n      {\n        key: 'provider_email',\n        icon: 'alternate_email',\n        value: thisProvider.email\n      }\n    ]\n  };\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  return result;\n}\n","import { generateRoundedRectPath } from './graphic';\n\nconst QRCode = require('qrcode/lib/core/qrcode');\n\nexport type QRCodeErrorCorrectionLevel = 'L' | 'M' | 'Q' | 'H';\n\n/**\n * Generate a QR code matrix (2D Boolean array)\n * @param text The input text to encode\n * @param errorCorrectionLevel L, M, Q, H\n * @returns 2D array (1 = filled, 0 = blank)\n */\n\nexport function generateQRCodeMatrix(text: string, errorCorrectionLevel: QRCodeErrorCorrectionLevel): Array<Array<0 | 1>> {\n  const qrData = QRCode.create(text, {\n    errorCorrectionLevel: errorCorrectionLevel\n  });\n\n  const size = qrData.modules.size;\n  const matrix = [];\n\n  for (let y = 0; y < size; y++) {\n    const row = [];\n    for (let x = 0; x < size; x++) {\n      const bit = qrData.modules.get(x, y);\n      row.push(bit);\n    }\n    matrix.push(row);\n  }\n\n  return matrix;\n}\n\nexport function generateRoundedQRCodeSVG(text: string, errorCorrectionLevel: QRCodeErrorCorrectionLevel = 'L', outerRadius: number = 0.5, innerRadius: number = 0.3, padding: number = 1, fill: string = '#000000', scale: number = 4): string {\n  const filledNeighborhood = [\n    [\n      [-1, 0],\n      [0, -1]\n    ], // top-left\n    [\n      [0, -1],\n      [1, 0]\n    ], // top-right\n    [\n      [1, 0],\n      [0, 1]\n    ], // bottom-right\n    [\n      [0, 1],\n      [-1, 0]\n    ] // bottom-left\n  ];\n\n  const blankNeighborhood = [\n    [\n      [-1, 0],\n      [-1, -1],\n      [0, -1]\n    ],\n    [\n      [0, -1],\n      [1, -1],\n      [1, 0]\n    ],\n    [\n      [1, 0],\n      [1, 1],\n      [0, 1]\n    ],\n    [\n      [0, 1],\n      [-1, 1],\n      [-1, 0]\n    ]\n  ];\n\n  // [x, y]\n\n  const data = generateQRCodeMatrix(text, errorCorrectionLevel);\n  const size = data.length;\n\n  let commands: Array<string> = [];\n\n  for (let y = 0; y < size; y++) {\n    for (let x = 0; x < size; x++) {\n      if (data[y][x] === 1) {\n        // filled\n        const cornerRadius = new Uint8Array(4);\n        for (let k = 0; k < 4; k++) {\n          const neighbors = filledNeighborhood[k];\n          let displayed = 1;\n          for (const neighbor of neighbors) {\n            if (data[y + neighbor[1]]?.[x + neighbor[0]] === 1) {\n              displayed *= 0;\n            }\n          }\n          cornerRadius[k] = displayed;\n        }\n        commands = commands.concat(\n          generateRoundedRectPath(\n            (x + padding) * scale,\n            (y + padding) * scale,\n            1 * scale,\n            1 * scale,\n            {\n              tl: cornerRadius[0] * outerRadius * scale,\n              tr: cornerRadius[1] * outerRadius * scale,\n              br: cornerRadius[2] * outerRadius * scale,\n              bl: cornerRadius[3] * outerRadius * scale\n            },\n            false\n          )\n        );\n      } else {\n        // blank\n        const cornerRadius = new Uint8Array(4);\n        for (let k = 0; k < 4; k++) {\n          const neighbors = blankNeighborhood[k];\n          let displayed = 1;\n          for (const neighbor of neighbors) {\n            if (!data[y + neighbor[1]]?.[x + neighbor[0]]) {\n              displayed *= 0;\n            }\n          }\n          cornerRadius[k] = displayed;\n        }\n        if (cornerRadius.some((r) => r !== 0)) {\n          commands = commands.concat(\n            generateRoundedRectPath(\n              (x + padding) * scale,\n              (y + padding) * scale,\n              1 * scale,\n              1 * scale,\n              {\n                tl: cornerRadius[0] * innerRadius * scale,\n                tr: cornerRadius[1] * innerRadius * scale,\n                br: cornerRadius[2] * innerRadius * scale,\n                bl: cornerRadius[3] * innerRadius * scale\n              },\n              true\n            )\n          );\n        }\n      }\n    }\n  }\n\n  return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 ${(size + padding * 2) * scale} ${(size + padding * 2) * scale}\" shape-rendering=\"geometricPrecision\"><path d=\"${commands.join(' ')}\" fill=\"${fill}\" stroke=\"${fill}\" stroke-width=\"0.1\" stroke-linejoin=\"round\" fill-rule=\"nonzero\" /></svg>`;\n}\n","import { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateRoundedQRCodeSVG } from '../../tools/qrcode';\nimport { pushPageHistory, revokePageHistory } from '../index';\n\nconst QRCodeField = documentQuerySelector('.css_qrcode_field');\nconst QRCodeBodyElement = elementQuerySelector(QRCodeField, '.css_qrcode_body');\n\nexport function initializeQRCodeField(text: string): void {\n  const svg = generateRoundedQRCodeSVG(text, 'M', 0.5, 0.3, 1, 'var(--b-cssvar-333333)', 4);\n  QRCodeBodyElement.innerHTML = svg;\n}\n\nexport function openQRCode(text: string): void {\n  pushPageHistory('QRCode');\n  QRCodeField.setAttribute('displayed', 'true');\n  initializeQRCodeField(text);\n  // closePreviousPage();\n}\n\nexport function closeQRCode(): void {\n  revokePageHistory('QRCode');\n  QRCodeField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { searchRouteByRouteID } from '../../../data/search/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nexport async function shareRoutePermalink(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisRoute.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('check_circle', '');\n        })\n        .catch((e) => {\n          promptMessage('cancel', '');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showRoutePermalinkQRCode(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    openQRCode(link);\n  }\n}\n","import { Calendar, CalendarDay, CalendarEvent, CalendarEventGroup } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { drawRoundedRect } from '../../../tools/graphic';\nimport { booleanToString } from '../../../tools/index';\nimport { getCSSVariableValue } from '../../../tools/style';\nimport { GeneratedElement, querySize } from '../../index';\nimport { CalendarDaysElement, CalendarEventGroupsElement } from './index';\n\nconst calendarRatio = 70;\nconst scaleLimit = 3150 / (calendarRatio * 24);\nconst gridlineBoxHeight = 10;\nconst gridlineWidth = 1.2;\nconst gridlineLabelWidthLimit = 45;\nconst fontFamily: string = '\"Noto Sans TC\", sans-serif';\n\nlet canvasSize = querySize('route-details-canvas');\nlet canvasWidth = canvasSize.width;\nlet canvasHeight = canvasSize.height;\nlet canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\nlet previousCalendar = {} as Calendar;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction resizeRouteDetailsCalendarCanvas(canvas: HTMLCanvasElement): void {\n  canvasSize = querySize('route-details-canvas');\n  canvasWidth = canvasSize.width;\n  canvasHeight = canvasSize.height;\n  canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\n  // Set the new size\n  canvas.width = canvasWidth * canvasScale;\n  canvas.height = canvasHeight * canvasScale;\n\n  // Reset transformations before scaling\n  const context = canvas.getContext('2d');\n  context.setTransform(1, 0, 0, 1, 0, 0);\n  context.scale(canvasScale, canvasScale);\n}\n\nfunction generateElementOfDay(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_route_details_calendar_day');\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction generateElementOfEventGroup(): GeneratedElement {\n  // Main event group element\n  const eventGroupElement = document.createElement('div');\n  eventGroupElement.classList.add('css_route_details_calendar_event_group');\n\n  // Canvas element\n  const canvasElement = document.createElement('canvas');\n  canvasElement.classList.add('css_route_details_calendar_event_group_canvas');\n  eventGroupElement.appendChild(canvasElement);\n\n  return {\n    element: eventGroupElement,\n    id: ''\n  };\n}\n\nexport function setUpCalendarGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultEventQuantity = {\n    d_0: 47,\n    d_1: 47,\n    d_2: 47,\n    d_3: 47,\n    d_4: 47,\n    d_5: 47,\n    d_6: 47\n  };\n  const defaultDayQuantity = 7;\n  let calendarEventGroups = {};\n  let calendarDays = {};\n  for (let i = 0; i < defaultDayQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    calendarEventGroups[eventGroupKey] = [];\n    calendarDays[eventGroupKey] = {\n      day: i,\n      code: `d_{i}`,\n      name: ''\n    };\n    for (let j = 0; j < defaultEventQuantity[eventGroupKey]; j++) {\n      const date = new Date();\n      date.setHours(0);\n      date.setMinutes(j * 30);\n      date.setSeconds(0);\n      date.setMilliseconds(0);\n      calendarEventGroups[eventGroupKey].push({\n        date: date,\n        dateString: '',\n        duration: 15\n      });\n    }\n  }\n  updateCalendarGroup(\n    {\n      calendarEventGroups: calendarEventGroups,\n      calendarDays: calendarDays,\n      calendarDayQuantity: defaultDayQuantity,\n      calendarEventQuantity: defaultEventQuantity\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateDay(thisDayElement: HTMLElement, thisDay: CalendarDay, currentDay: number, skeletonScreen: boolean, animation: boolean, index: number): void {\n  thisDayElement.innerText = thisDay.name;\n  thisDayElement.setAttribute('day', index.toString());\n  thisDayElement.onclick = function () {\n    switchCalendarDay(index);\n  };\n  thisDayElement.setAttribute('highlighted', currentDay === index ? 'true' : 'false');\n  thisDayElement.setAttribute('animation', booleanToString(animation));\n  thisDayElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n}\n\nfunction updateEventGroup(thisCalendarEventGroupElement: HTMLElement, thisCalendarEventGroup: CalendarEventGroup, currentDay: number, mainColor: string, mainColorR: string, mainColorG: string, mainColorB: string, mainColorA: string, gridColor: string, index: number): void {\n  function drawGridline(thisContext: CanvasRenderingContext2D, hours: number, gridColor: string): void {\n    const boxX = 0;\n    const boxY = hours * calendarRatio;\n\n    // Cache the color value once\n    thisContext.fillStyle = gridColor;\n\n    // Draw line\n    thisContext.fillRect(boxX + gridlineLabelWidthLimit, boxY + 5, canvasWidth - gridlineLabelWidthLimit, gridlineWidth);\n\n    // Draw label\n    thisContext.font = `400 ${12}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    const labelText = `${String(hours).padStart(2, '0')}:00`;\n    const labelMeasurement = thisContext.measureText(labelText);\n    const labelWidth = labelMeasurement.width;\n    const labelHeight = labelMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(labelText, (gridlineLabelWidthLimit - labelWidth) / 2, boxY + (gridlineBoxHeight - labelHeight) / 2, labelWidth);\n  }\n\n  function drawEvent(thisContext: CanvasRenderingContext2D, thisCalendarEvent: CalendarEvent, mainColor: string, mainColorR: string, mainColorG: string, mainColorB: string, mainColorA: string): void {\n    // Calculate the start of the day for this event only once.\n    const thisDayStart = new Date();\n    thisDayStart.setDate(1);\n    thisDayStart.setMonth(0);\n    thisDayStart.setFullYear(thisCalendarEvent.date.getFullYear());\n    thisDayStart.setMonth(thisCalendarEvent.date.getMonth());\n    thisDayStart.setDate(thisCalendarEvent.date.getDate());\n    thisDayStart.setHours(0);\n    thisDayStart.setMinutes(0);\n    thisDayStart.setSeconds(0);\n    thisDayStart.setMilliseconds(0);\n\n    const boxX = gridlineLabelWidthLimit;\n    const boxY = ((thisCalendarEvent.date.getTime() - thisDayStart.getTime()) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n    const boxWidth = canvasWidth - gridlineLabelWidthLimit;\n    const boxHeight = ((thisCalendarEvent.duration * 60 * 1000) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n\n    // Draw background with rounded rectangle\n    drawRoundedRect(thisContext, boxX, boxY, boxWidth, boxHeight, 3, `rgba(${mainColorR}, ${mainColorG}, ${mainColorB}, ${mainColorA})`);\n\n    // Draw decoration (a thin rounded rectangle)\n    drawRoundedRect(thisContext, boxX, boxY, 3, boxHeight, { tl: 3, tr: 0, bl: 3, br: 0 }, mainColor);\n\n    // Draw event text\n    thisContext.font = `400 ${14}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    thisContext.fillStyle = mainColor;\n    const text = thisCalendarEvent.dateString;\n    const textMeasurement = thisContext.measureText(text);\n    const textWidth = textMeasurement.width;\n    const textHeight = textMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(text, boxX + 8, boxY + (boxHeight - textHeight) / 2, textWidth);\n  }\n\n  function updateDisplayed(thisCalendarEventGroupElement: HTMLElement, currentDay: number, index: number): void {\n    // Set the displayed attribute based on whether it is the current day.\n    const isDisplayed = currentDay === index;\n    thisCalendarEventGroupElement.setAttribute('displayed', booleanToString(isDisplayed));\n  }\n\n  // Get the canvas and its 2D context.\n  const thisCalendarEventGroupCanvas = elementQuerySelector(thisCalendarEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n  const thisCalendarEventGroupCanvasContext = thisCalendarEventGroupCanvas.getContext('2d');\n\n  // Update the displayed attribute\n  updateDisplayed(thisCalendarEventGroupElement, currentDay, index);\n\n  // Always resize the canvas to ensure proper dimensions.\n  resizeRouteDetailsCalendarCanvas(thisCalendarEventGroupCanvas);\n\n  const isDisplayed = currentDay === index;\n  if (isDisplayed) {\n    // Clear the canvas and redraw the content when displayed.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    // Draw the gridlines.\n    for (let hours = 0; hours < 24; hours++) {\n      drawGridline(thisCalendarEventGroupCanvasContext, hours, gridColor);\n    }\n\n    // Draw all events for this group.\n    for (const thisCalendarEvent of thisCalendarEventGroup) {\n      drawEvent(thisCalendarEventGroupCanvasContext, thisCalendarEvent, mainColor, mainColorR, mainColorG, mainColorB, mainColorA);\n    }\n  } else {\n    // When not displayed, clear the canvas.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n  }\n}\n\nexport function updateCalendarGroup(calendar: Calendar, skeletonScreen: boolean, animation: boolean): void {\n  // The default day to display.\n  const currentDay = new Date().getDay();\n\n  // Retrieve the CSS variable values just once\n  const mainColorR = getCSSVariableValue('--b-cssvar-main-color-r');\n  const mainColorG = getCSSVariableValue('--b-cssvar-main-color-g');\n  const mainColorB = getCSSVariableValue('--b-cssvar-main-color-b');\n  const mainColorA = getCSSVariableValue('--b-cssvar-main-color-opacity-e');\n  const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n  const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n  const eventGroups = calendar.calendarDays;\n  const eventGroupQuantity = calendar.calendarDayQuantity;\n  const calendarEventGroups = calendar.calendarEventGroups;\n  const eventQuantity = calendar.calendarEventQuantity;\n\n  const currentEventGroupCapacity = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group').length;\n  if (eventGroupQuantity !== currentEventGroupCapacity) {\n    const difference = currentEventGroupCapacity - eventGroupQuantity;\n    if (difference < 0) {\n      // Add missing day and event group elements.\n      const calendarDaysFragment = new DocumentFragment();\n      const calendarEventGroupsFragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newDayElement = generateElementOfDay();\n        calendarDaysFragment.appendChild(newDayElement.element);\n        const newEventGroupElement = generateElementOfEventGroup();\n        calendarEventGroupsFragment.appendChild(newEventGroupElement.element);\n      }\n      CalendarDaysElement.append(calendarDaysFragment);\n      CalendarEventGroupsElement.append(calendarEventGroupsFragment);\n    } else {\n      // Remove extra elements.\n      const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n      const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const eventGroupIndex = currentEventGroupCapacity - 1 - o;\n        CalendarDayElements[eventGroupIndex].remove();\n        CalendarEventGroupElements[eventGroupIndex].remove();\n      }\n    }\n  }\n\n  // Update each day and its corresponding event group.\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (let i = 0; i < eventGroupQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    const thisDay = eventGroups[eventGroupKey];\n    const thisEventGroup = calendarEventGroups[eventGroupKey];\n\n    const thisDayElement = CalendarDayElements[i];\n    const thisEventGroupElement = CalendarEventGroupElements[i];\n\n    updateDay(thisDayElement, thisDay, currentDay, skeletonScreen, animation, i);\n    updateEventGroup(thisEventGroupElement, thisEventGroup, currentDay, mainColor, mainColorR, mainColorG, mainColorB, mainColorA, gridColor, i);\n  }\n\n  previousCalendar = calendar;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nexport function switchCalendarDay(day: number): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const calendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (let i = 0; i < 7; i++) {\n    const thisCalendarDayElement = calendarDayElements[i];\n    // const thisCalendarDayElementDay = parseInt(thisCalendarDayElement.getAttribute('day'));\n    const thisEventGroupElement = CalendarEventGroupElements[i];\n    // if (thisCalendarDayElementDay === day) {\n    /*\n      thisCalendarDayElement.setAttribute('highlighted', 'true');\n      thisEventGroupElement.setAttribute('displayed', 'true');\n      */\n    const eventGroupKey = `d_${i}`;\n    const calendarEventGroup = previousCalendar?.calendarEventGroups[eventGroupKey];\n    const calendarDay = previousCalendar?.calendarDays[eventGroupKey];\n    if (calendarEventGroup && calendarDay) {\n      // Retrieve the CSS variable values just once\n      const mainColorR = getCSSVariableValue('--b-cssvar-main-color-r');\n      const mainColorG = getCSSVariableValue('--b-cssvar-main-color-g');\n      const mainColorB = getCSSVariableValue('--b-cssvar-main-color-b');\n      const mainColorA = getCSSVariableValue('--b-cssvar-main-color-opacity-e');\n      const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n      const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n      // Reuse the drawing logic from updateEventGroup and updateDay for the visible event group.\n      updateDay(thisCalendarDayElement, calendarDay, day, false, playing_animation, i);\n      updateEventGroup(thisEventGroupElement, calendarEventGroup, day, mainColor, mainColorR, mainColorG, mainColorB, mainColorA, gridColor, i);\n    }\n    /*} else {\n      thisCalendarDayElement.setAttribute('highlighted', 'false');\n      thisEventGroupElement.setAttribute('displayed', 'false');\n\n      // Clear the canvas for non-displayed elements.\n      const canvas = elementQuerySelector(thisEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    }*/\n  }\n}\n","import { getSettingOptionValue } from '../../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings } from '../../../tools/index';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { GeneratedElement } from '../../index';\nimport { PropertiesGroupBodyElement, PropertiesGroupElement } from './index';\n\nlet previousProperties = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction generateElementOfProperty(): GeneratedElement {\n  const propertyElement = document.createElement('div');\n  propertyElement.classList.add('css_route_details_property');\n\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_route_details_property_icon');\n  iconElement.appendChild(getBlankIconElement());\n  propertyElement.appendChild(iconElement);\n\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_route_details_property_value');\n  propertyElement.appendChild(valueElement);\n\n  return {\n    element: propertyElement,\n    id: ''\n  };\n}\n\nexport function setUppropertiesGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultPropertyQuantity = 5;\n  const properties = [];\n  for (let i = 0; i < defaultPropertyQuantity; i++) {\n    properties.push({\n      key: i,\n      icon: 'none',\n      value: ''\n    });\n  }\n  updatePropertiesField(properties, true, playing_animation);\n}\n\nexport function updatePropertiesField(properties: Array, skeletonScreen: boolean, animation: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisProperty: object, previousProperty: object): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: object): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_route_details_property_icon');\n      setIcon(thisIconElement, thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: object): void {\n      elementQuerySelector(thisElement, '.css_route_details_property_value').innerText = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousProperty === null || previousProperty === undefined) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const propertyQuantity = properties.length;\n\n  if (skeletonScreen !== previousSkeletonScreen) {\n    PropertiesGroupElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  }\n\n  const currentPropertyCapacity = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property').length;\n  if (propertyQuantity !== currentPropertyCapacity) {\n    const difference = currentPropertyCapacity - propertyQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        // const propertyIndex = currentPropertyCapacity + o;\n        const newPropertyElement = generateElementOfProperty();\n        fragment.appendChild(newPropertyElement.element);\n      }\n      PropertiesGroupBodyElement.append(fragment);\n    } else {\n      const propertyElements = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const propertyIndex = currentPropertyCapacity - 1 - o;\n        propertyElements[propertyIndex].remove();\n      }\n    }\n  }\n\n  const propertyElements = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property');\n  for (let i = 0; i < propertyQuantity; i++) {\n    const thisPropertyElement = propertyElements[i];\n    const thisProperty = properties[i];\n    if (previousProperties.length === 0) {\n      updateProperty(thisPropertyElement, thisProperty, null);\n    } else {\n      updateProperty(thisPropertyElement, thisProperty, previousProperties[i]);\n    }\n  }\n\n  previousProperties = properties;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n","import { isFolderContentSaved } from '../../../data/folder/index';\nimport { integrateRouteDetails } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../../tools/index';\nimport { pushPageHistory, revokePageHistory } from '../../index';\nimport { openSaveToFolder } from '../../save-to-folder/index';\nimport { shareRoutePermalink, showRoutePermalinkQRCode } from './actions';\nimport { setUpCalendarGroupSkeletonScreen, updateCalendarGroup } from './calendar';\nimport { setUppropertiesGroupSkeletonScreen, updatePropertiesField } from './properties';\n\nexport const RouteDetailsField = documentQuerySelector('.css_route_details_field');\nexport const RouteDetailsBodyElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body');\nexport const RouteDetailsGroupsElement = elementQuerySelector(RouteDetailsBodyElement, '.css_route_details_groups');\n\nexport const CalendarGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"calendar\"]');\nexport const CalendarGroupBodyElement = elementQuerySelector(CalendarGroupElement, '.css_route_details_group_body');\nexport const CalendarDaysElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_days');\nexport const CalendarEventGroupsElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_event_groups');\n\nexport const ActionsGroupElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"]');\nexport const svaeToFolderActionButtonElement = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\nexport const getPermalinkActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"get-permalink\"]');\nexport const showPermalinkQRCodeActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"show-permalink-qrcode\"]');\n\nexport const PropertiesGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"properties\"]');\nexport const PropertiesGroupBodyElement = elementQuerySelector(PropertiesGroupElement, '.css_route_details_group_body');\n\nasync function initializeRouteDetailsField(RouteID: number, PathAttributeId: Array<number>) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const existence = await isFolderContentSaved('route', RouteID);\n  svaeToFolderActionButtonElement.setAttribute('animation', booleanToString(playing_animation));\n  svaeToFolderActionButtonElement.setAttribute('highlighted', booleanToString(existence));\n  svaeToFolderActionButtonElement.onclick = function () {\n    openSaveToFolder('route', [RouteID]);\n  };\n  getPermalinkActionButton.setAttribute('animation', booleanToString(playing_animation));\n  getPermalinkActionButton.onclick = function () {\n    shareRoutePermalink(RouteID);\n  };\n  showPermalinkQRCodeActionButton.setAttribute('animation', booleanToString(playing_animation));\n  showPermalinkQRCodeActionButton.onclick = function () {\n    showRoutePermalinkQRCode(RouteID);\n  };\n  setUppropertiesGroupSkeletonScreen(PropertiesGroupElement);\n  setUpCalendarGroupSkeletonScreen();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteDetails(RouteID, PathAttributeId, requestID);\n  updatePropertiesField(integration.properties, false, playing_animation);\n  updateCalendarGroup(integration.calendar, false, playing_animation);\n}\n\nexport function openRouteDetails(RouteID: number, PathAttributeId: Array<number>): void {\n  pushPageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'true');\n  initializeRouteDetailsField(RouteID, PathAttributeId);\n}\n\nexport function closeRouteDetails(): void {\n  revokePageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'false');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (const CalendarEventGroupElement of CalendarEventGroupElements) {\n    CalendarEventGroupElement.remove();\n  }\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  for (const CalendarDayElement of CalendarDayElements) {\n    CalendarDayElement.remove();\n  }\n}\n","import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../data/apis/loader';\nimport { isFolderContentSaved } from '../../data/folder/index';\nimport { stopHasNotifcationSchedules } from '../../data/notification/index';\nimport { logRecentView } from '../../data/recent-views/index';\nimport { IntegratedRoute, integratedStopItem, integrateRoute } from '../../data/route/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll, getElementsBelow } from '../../tools/elements';\nimport { getTextWidth } from '../../tools/graphic';\nimport { booleanToString, compareThings, generateIdentifier } from '../../tools/index';\nimport { indexToDay, timeObjectToString } from '../../tools/time';\nimport { getIconElement, getIconHTML } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, GroupStyles, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\nimport { openSaveToFolder } from '../save-to-folder/index';\nimport { openScheduleNotification } from '../schedule-notification/index';\nimport { openRouteDetails } from './details/index';\n\nconst RouteField = documentQuerySelector('.css_route_field');\nconst RouteHeadElement = elementQuerySelector(RouteField, '.css_route_head');\nconst RouteNameElement = elementQuerySelector(RouteHeadElement, '.css_route_name');\nconst RouteNameSpanElement = elementQuerySelector(RouteNameElement, 'span');\nconst RouteButtonRightElement = elementQuerySelector(RouteHeadElement, '.css_route_button_right');\nconst RouteUpdateTimerElement = elementQuerySelector(RouteHeadElement, '.css_route_update_timer_box .css_route_update_timer');\nconst RouteGroupTabsElement = elementQuerySelector(RouteHeadElement, '.css_route_group_tabs');\nconst RouteGroupTabsTrayElement = elementQuerySelector(RouteGroupTabsElement, '.css_route_group_tabs_tray');\nconst RouteGroupTabLineTrackElement = elementQuerySelector(RouteHeadElement, '.css_route_group_tab_line_track');\nconst RouteGroupTabLineElement = elementQuerySelector(RouteGroupTabLineTrackElement, '.css_route_group_tab_line');\nconst RouteGroupsElement = elementQuerySelector(RouteField, '.css_route_groups');\n\nlet previousIntegration = {} as IntegratedRoute;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet routeSliding_initialIndex: number = 0;\nlet routeSliding_targetIndex: number = 0;\nlet routeSliding_groupQuantity: number = 0;\nlet routeSliding_groupStyles: GroupStyles = {};\nlet routeSliding_fieldWidth: number = 0;\nlet routeSliding_fieldHeight: number = 0;\nlet routeSliding_sliding: boolean = false;\n\nlet routeRefreshTimer_retryInterval: number = 10 * 1000;\nlet routeRefreshTimer_baseInterval: number = 15 * 1000;\nlet routeRefreshTimer_minInterval: number = 5 * 1000;\nlet routeRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet routeRefreshTimer_dynamic: boolean = true;\nlet routeRefreshTimer_lastUpdate: number = 0;\nlet routeRefreshTimer_nextUpdate: number = 0;\nlet routeRefreshTimer_currentRequestID: string = '';\nlet routeRefreshTimer_refreshing: boolean = false;\nlet routeRefreshTimer_streaming: boolean = false;\nlet routeRefreshTimer_streamStarted: boolean = false;\n\nlet currentRouteIDSet_RouteID: number = 0;\nlet currentRouteIDSet_PathAttributeId: Array<number> = [];\n\nlet tabPadding: number = 20;\n\nexport function initializeRouteSliding(): void {\n  RouteGroupsElement.addEventListener(\n    'touchstart',\n    function () {\n      routeSliding_initialIndex = Math.round(RouteGroupsElement.scrollLeft / routeSliding_fieldWidth);\n    },\n    { passive: true }\n  );\n\n  RouteGroupsElement.addEventListener(\n    'scroll',\n    function (event: Event) {\n      routeSliding_sliding = true;\n      const target = event.target as HTMLElement;\n      const currentIndex = target.scrollLeft / routeSliding_fieldWidth;\n      if (currentIndex > routeSliding_initialIndex) {\n        routeSliding_targetIndex = routeSliding_initialIndex + 1;\n      } else {\n        routeSliding_targetIndex = routeSliding_initialIndex - 1;\n      }\n      const indexDifference = currentIndex - routeSliding_initialIndex;\n      let delta = Math.abs(indexDifference);\n      if (delta > 1) {\n        if (indexDifference > 0) {\n          routeSliding_initialIndex = Math.floor(currentIndex);\n          routeSliding_targetIndex = routeSliding_initialIndex + 1;\n        } else {\n          routeSliding_initialIndex = Math.ceil(currentIndex);\n          routeSliding_targetIndex = routeSliding_initialIndex - 1;\n        }\n        delta = Math.abs(currentIndex - routeSliding_initialIndex);\n      }\n      const initialSize = routeSliding_groupStyles[`g_${routeSliding_initialIndex}`] || { width: 0, offset: 0 };\n      const targetSize = routeSliding_groupStyles[`g_${routeSliding_targetIndex}`] || { width: 0, offset: 0 };\n      const tabWidth = initialSize.width + (targetSize.width - initialSize.width) * delta;\n      const offset = (initialSize.offset + (targetSize.offset - initialSize.offset) * delta) * -1 + routeSliding_fieldWidth * 0.5 - tabWidth * 0.5;\n      updateRouteCSS(routeSliding_groupQuantity, offset, tabWidth - tabPadding, currentIndex);\n      if (currentIndex === routeSliding_targetIndex) {\n        routeSliding_initialIndex = Math.round(RouteGroupsElement.scrollLeft / routeSliding_fieldWidth);\n        routeSliding_sliding = false;\n      }\n    },\n    { passive: true }\n  );\n}\n\nexport function updateRouteCSS(groupQuantity: number, offset: number, tabLineWidth: number, percentage: number): void {\n  RouteGroupsElement.style.setProperty('--b-cssvar-route-group-quantity', groupQuantity.toString());\n  RouteGroupTabLineElement.style.setProperty('--b-cssvar-route-tab-line-width-scale', tabLineWidth.toString());\n  RouteGroupTabsTrayElement.style.setProperty('--b-cssvar-route-tabs-tray-offset', `${offset.toString()}px`);\n  RouteGroupTabsTrayElement.style.setProperty('--b-cssvar-route-percentage', percentage.toString());\n}\n\nfunction animateUpdateTimer(): void {\n  RouteUpdateTimerElement.style.setProperty('--b-cssvar-route-update-timer-interval', `${routeRefreshTimer_dynamicInterval}ms`);\n  RouteUpdateTimerElement.classList.add('css_route_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (routeRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    RouteUpdateTimerElement.style.setProperty('--b-cssvar-route-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfThreadBox(): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main thread box element\n  const threadBoxElement = document.createElement('div');\n  threadBoxElement.classList.add('css_route_group_thread_box');\n  threadBoxElement.id = identifier;\n  threadBoxElement.setAttribute('stretched', 'false');\n  threadBoxElement.setAttribute('stretching', 'false');\n  threadBoxElement.setAttribute('push-direction', '0'); // 0: normal state, 1: downward, 2: upward\n  threadBoxElement.setAttribute('push-state', '0'); // 0: normal state, 1: compensation , 2: transition\n\n  // Thread container\n  const threadElement = document.createElement('div');\n  threadElement.classList.add('css_route_group_thread');\n\n  // Thread progress\n  const threadProgressElement = document.createElement('div');\n  threadProgressElement.classList.add('css_route_group_thread_progress');\n  threadProgressElement.setAttribute('displayed', 'false');\n  threadElement.appendChild(threadProgressElement);\n\n  // Thread status container\n  const threadStatusElement = document.createElement('div');\n  threadStatusElement.classList.add('css_route_group_thread_status');\n\n  // Next slide\n  const nextSlideElement = document.createElement('div');\n  nextSlideElement.classList.add('css_next_slide');\n  nextSlideElement.setAttribute('code', '0');\n  nextSlideElement.setAttribute('displayed', 'false');\n  threadStatusElement.appendChild(nextSlideElement);\n\n  // Current slide\n  const currentSlideElement = document.createElement('div');\n  currentSlideElement.classList.add('css_current_slide');\n  currentSlideElement.setAttribute('code', '0');\n  currentSlideElement.setAttribute('displayed', 'true');\n  threadStatusElement.appendChild(currentSlideElement);\n\n  // Assemble\n  threadBoxElement.appendChild(threadElement);\n  threadBoxElement.appendChild(threadStatusElement);\n\n  return {\n    element: threadBoxElement,\n    id: identifier\n  };\n}\n\nfunction generateElementOfItem(threadBoxIdentifier: string): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main item element\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_route_group_item');\n  itemElement.id = identifier;\n  itemElement.setAttribute('stretched', 'false');\n  itemElement.setAttribute('stretching', 'false');\n  itemElement.setAttribute('push-direction', '0'); // 0: normal state, 1: downward, 2: upward\n  itemElement.setAttribute('push-state', '0'); // 0: normal state, 1: compensation , 2: transition\n\n  // Head\n  const headElement = document.createElement('div');\n  headElement.classList.add('css_route_group_item_head');\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_route_group_item_name');\n  headElement.appendChild(nameElement);\n\n  // Capsule\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_route_group_item_capsule');\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_route_group_item_status');\n\n  const nextSlideElement = document.createElement('div');\n  nextSlideElement.classList.add('css_next_slide');\n  nextSlideElement.setAttribute('code', '0');\n  nextSlideElement.setAttribute('displayed', 'false');\n  statusElement.appendChild(nextSlideElement);\n\n  const currentSlideElement = document.createElement('div');\n  currentSlideElement.classList.add('css_current_slide');\n  currentSlideElement.setAttribute('code', '0');\n  currentSlideElement.setAttribute('displayed', 'true');\n  statusElement.appendChild(currentSlideElement);\n\n  capsuleElement.appendChild(statusElement);\n\n  // Stretch button\n  const stretchElement = document.createElement('div');\n  stretchElement.classList.add('css_route_group_item_stretch');\n  stretchElement.appendChild(getIconElement('keyboard_arrow_down'));\n  stretchElement.onclick = () => {\n    stretchRouteItem(identifier, threadBoxIdentifier);\n  };\n  capsuleElement.appendChild(stretchElement);\n\n  // Capsule separator\n  const capsuleSeparatorElement = document.createElement('div');\n  capsuleSeparatorElement.classList.add('css_route_group_item_capsule_separator');\n  capsuleElement.appendChild(capsuleSeparatorElement);\n\n  headElement.appendChild(capsuleElement);\n\n  // Body\n  const bodyElement = document.createElement('div');\n  bodyElement.classList.add('css_route_group_item_body');\n  bodyElement.setAttribute('displayed', 'false');\n\n  // Buttons\n  const buttonsElement = document.createElement('div');\n  buttonsElement.classList.add('css_route_group_item_buttons');\n\n  // Tab: \n  const tabBusElement = document.createElement('div');\n  tabBusElement.classList.add('css_route_group_item_button');\n  tabBusElement.setAttribute('highlighted', 'true');\n  tabBusElement.setAttribute('type', 'tab');\n  tabBusElement.setAttribute('code', '0');\n  tabBusElement.onclick = () => {\n    switchRouteBodyTab(identifier, 0);\n  };\n\n  const tabBusIconElement = document.createElement('div');\n  tabBusIconElement.classList.add('css_route_group_item_button_icon');\n  tabBusIconElement.appendChild(getIconElement('directions_bus'));\n  tabBusElement.appendChild(tabBusIconElement);\n  tabBusElement.appendChild(document.createTextNode(''));\n  buttonsElement.appendChild(tabBusElement);\n\n  // Tab: \n  const tabArrivalElement = document.createElement('div');\n  tabArrivalElement.classList.add('css_route_group_item_button');\n  tabArrivalElement.setAttribute('highlighted', 'false');\n  tabArrivalElement.setAttribute('type', 'tab');\n  tabArrivalElement.setAttribute('code', '1');\n  tabArrivalElement.onclick = () => {\n    switchRouteBodyTab(identifier, 1);\n  };\n\n  const tabArrivalIconElement = document.createElement('div');\n  tabArrivalIconElement.classList.add('css_route_group_item_button_icon');\n  tabArrivalIconElement.appendChild(getIconElement('departure_board'));\n  tabArrivalElement.appendChild(tabArrivalIconElement);\n  tabArrivalElement.appendChild(document.createTextNode(''));\n  buttonsElement.appendChild(tabArrivalElement);\n\n  // Tab: \n  const tabRouteElement = document.createElement('div');\n  tabRouteElement.classList.add('css_route_group_item_button');\n  tabRouteElement.setAttribute('highlighted', 'false');\n  tabRouteElement.setAttribute('type', 'tab');\n  tabRouteElement.setAttribute('code', '2');\n  tabRouteElement.onclick = () => {\n    switchRouteBodyTab(identifier, 2);\n  };\n\n  const tabRouteIconElement = document.createElement('div');\n  tabRouteIconElement.classList.add('css_route_group_item_button_icon');\n  tabRouteIconElement.appendChild(getIconElement('route'));\n  tabRouteElement.appendChild(tabRouteIconElement);\n  tabRouteElement.appendChild(document.createTextNode(''));\n  buttonsElement.appendChild(tabRouteElement);\n\n  // Tab: \n  const tabLocationElement = document.createElement('div');\n  tabLocationElement.classList.add('css_route_group_item_button');\n  tabLocationElement.setAttribute('highlighted', 'false');\n  tabLocationElement.setAttribute('type', 'tab');\n  tabLocationElement.setAttribute('code', '3');\n  tabLocationElement.onclick = () => {\n    switchRouteBodyTab(identifier, 3);\n  };\n\n  const tabLocationIconElement = document.createElement('div');\n  tabLocationIconElement.classList.add('css_route_group_item_button_icon');\n  tabLocationIconElement.appendChild(getIconElement('location_on'));\n  tabLocationElement.appendChild(tabLocationIconElement);\n  tabLocationElement.appendChild(document.createTextNode(''));\n  buttonsElement.appendChild(tabLocationElement);\n\n  // Save to folder\n  const saveToFolderElement = document.createElement('div');\n  saveToFolderElement.classList.add('css_route_group_item_button');\n  saveToFolderElement.setAttribute('highlighted', 'false');\n  saveToFolderElement.setAttribute('type', 'save-to-folder');\n  /*\n  saveToFolderElement.onclick = () => {\n    openSaveToFolder('stop-on-route', [identifier, null, null]);\n  };\n  */\n\n  const saveToFolderIconElement = document.createElement('div');\n  saveToFolderIconElement.classList.add('css_route_group_item_button_icon');\n  saveToFolderIconElement.appendChild(getIconElement('folder'));\n  saveToFolderElement.appendChild(saveToFolderIconElement);\n  saveToFolderElement.appendChild(document.createTextNode(''));\n  buttonsElement.appendChild(saveToFolderElement);\n\n  // Schedule notification\n  const scheduleNotificationElement = document.createElement('div');\n  scheduleNotificationElement.classList.add('css_route_group_item_button');\n  scheduleNotificationElement.setAttribute('highlighted', 'false');\n  scheduleNotificationElement.setAttribute('type', 'schedule-notification');\n  scheduleNotificationElement.setAttribute('enabled', 'true');\n\n  const scheduleNotificationIconElement = document.createElement('div');\n  scheduleNotificationIconElement.classList.add('css_route_group_item_button_icon');\n  scheduleNotificationIconElement.appendChild(getIconElement('notifications'));\n  scheduleNotificationElement.appendChild(scheduleNotificationIconElement);\n  scheduleNotificationElement.appendChild(document.createTextNode(''));\n  buttonsElement.appendChild(scheduleNotificationElement);\n\n  bodyElement.appendChild(buttonsElement);\n\n  // Buses\n  const busesElement = document.createElement('div');\n  busesElement.classList.add('css_route_group_item_buses');\n  busesElement.setAttribute('displayed', 'true');\n  bodyElement.appendChild(busesElement);\n\n  // Overlapping routes\n  const overlappingRoutesElement = document.createElement('div');\n  overlappingRoutesElement.classList.add('css_route_group_item_overlapping_routes');\n  overlappingRoutesElement.setAttribute('displayed', 'false');\n  bodyElement.appendChild(overlappingRoutesElement);\n\n  // Bus arrival times\n  const busArrivalTimesElement = document.createElement('div');\n  busArrivalTimesElement.classList.add('css_route_group_item_bus_arrival_times');\n  busArrivalTimesElement.setAttribute('displayed', 'false');\n  bodyElement.appendChild(busArrivalTimesElement);\n\n  // Nearby locations\n  const nearbyLocationsElement = document.createElement('div');\n  nearbyLocationsElement.classList.add('css_route_group_item_nearby_locations');\n  nearbyLocationsElement.setAttribute('displayed', 'false');\n  bodyElement.appendChild(nearbyLocationsElement);\n\n  // Assemble\n  itemElement.appendChild(headElement);\n  itemElement.appendChild(bodyElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction generateElementOfGroup(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_route_group');\n\n  const tracksElement = document.createElement('div');\n  tracksElement.classList.add('css_route_group_tracks');\n\n  const threadTrackElement = document.createElement('div');\n  threadTrackElement.classList.add('css_route_group_threads_track');\n\n  const threadBoxSpace = document.createElement('div');\n  threadBoxSpace.classList.add('css_route_group_thread_box_space_top');\n\n  const itemsTrackElement = document.createElement('div');\n  itemsTrackElement.classList.add('css_route_group_items_track');\n\n  const itemSpaceElement = document.createElement('div');\n  itemSpaceElement.classList.add('css_route_group_item_space_top');\n\n  itemsTrackElement.appendChild(itemSpaceElement);\n  threadTrackElement.appendChild(threadBoxSpace);\n  tracksElement.appendChild(threadTrackElement);\n  tracksElement.appendChild(itemsTrackElement);\n  element.appendChild(tracksElement);\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction generateElementOfTab(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_route_group_tab');\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction setUpRouteFieldSkeletonScreen(RouteID: IntegratedRoute['RouteID'], PathAttributeId: IntegratedRoute['PathAttributeId']): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: number = Math.floor(FieldHeight / 50) + 5;\n  const defaultGroupQuantity = 2;\n  let groupedItems: IntegratedRoute['groupedItems'] = {};\n  for (let i = 0; i < defaultGroupQuantity; i++) {\n    const groupKey: string = `g_${i}`;\n    groupedItems[groupKey] = [];\n    for (let j = 0; j < defaultItemQuantity; j++) {\n      groupedItems[groupKey].push({\n        name: '',\n        goBack: '0',\n        status: { code: 8, text: '', time: -6 },\n        buses: [],\n        overlappingRoutes: [],\n        busArrivalTimes: [],\n        nearbyLocations: [],\n        sequence: j,\n        position: {\n          longitude: 0,\n          latitude: 0\n        },\n        nearest: false,\n        progress: 0,\n        segmentBuffer: {\n          isSegmentBuffer: false,\n          isStartingPoint: false,\n          isEndingPoint: false\n        },\n        id: 0\n      });\n    }\n  }\n  updateRouteField(\n    {\n      groupedItems: groupedItems,\n      groupQuantity: defaultGroupQuantity,\n      itemQuantity: {\n        g_0: defaultItemQuantity,\n        g_1: defaultItemQuantity\n      },\n      RouteName: '',\n      RouteEndPoints: {\n        RouteDeparture: '',\n        RouteDestination: ''\n      },\n      RouteID: RouteID,\n      PathAttributeId: PathAttributeId,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateRouteField(integration: IntegratedRoute, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisItemElement: HTMLElement, thisThreadBoxElement: HTMLElement, thisItem: integratedStopItem, previousItem: integratedStopItem | null, skeletonScreen: boolean, animation: boolean): void {\n    function updateStatus(thisItemElement: HTMLElement, thisThreadBoxElement: HTMLElement, thisItem: integratedStopItem, skeletonScreen: boolean, animation: boolean): void {\n      const thisThreadStatusElement = elementQuerySelector(thisThreadBoxElement, '.css_route_group_thread_status');\n      const currentThreadSlideElement = elementQuerySelector(thisThreadStatusElement, '.css_current_slide');\n      const nextThreadSlideElement = elementQuerySelector(thisThreadStatusElement, '.css_next_slide');\n\n      const thisItemStatusElement = elementQuerySelector(thisItemElement, '.css_route_group_item_status');\n      const currentItemSlideElement = elementQuerySelector(thisItemStatusElement, '.css_current_slide');\n      const nextItemSlideElement = elementQuerySelector(thisItemStatusElement, '.css_next_slide');\n\n      nextThreadSlideElement.setAttribute('code', thisItem.status.code.toString());\n\n      nextItemSlideElement.setAttribute('code', thisItem.status.code.toString());\n      nextItemSlideElement.innerText = thisItem.status.text;\n\n      if (!skeletonScreen) {\n        if (animation) {\n          const thisItemElementRect = thisItemElement.getBoundingClientRect();\n          const top = thisItemElementRect.top;\n          const left = thisItemElementRect.left;\n          const bottom = thisItemElementRect.bottom;\n          const right = thisItemElementRect.right;\n          const windowWidth = window.innerWidth;\n          const windowHeight = window.innerHeight;\n          if (bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n            currentThreadSlideElement.addEventListener(\n              'animationend',\n              function () {\n                currentThreadSlideElement.setAttribute('code', thisItem.status.code.toString());\n                currentThreadSlideElement.classList.remove('css_slide_fade_out');\n                nextThreadSlideElement.setAttribute('displayed', 'false');\n              },\n              { once: true }\n            );\n            currentItemSlideElement.addEventListener(\n              'animationend',\n              function () {\n                currentItemSlideElement.setAttribute('code', thisItem.status.code.toString());\n                currentItemSlideElement.innerText = thisItem.status.text;\n                currentItemSlideElement.classList.remove('css_slide_fade_out');\n                nextItemSlideElement.setAttribute('displayed', 'false');\n              },\n              { once: true }\n            );\n            nextItemSlideElement.setAttribute('displayed', 'true');\n            nextThreadSlideElement.setAttribute('displayed', 'true');\n            currentThreadSlideElement.classList.add('css_slide_fade_out');\n            currentItemSlideElement.classList.add('css_slide_fade_out');\n            return;\n          }\n        }\n      }\n\n      currentThreadSlideElement.setAttribute('code', thisItem.status.code.toString());\n      currentItemSlideElement.setAttribute('code', thisItem.status.code.toString());\n      currentItemSlideElement.innerText = thisItem.status.text;\n    }\n\n    function updateSegmentBuffer(thisItemElement: HTMLElement, thisThreadBoxElement: HTMLElement, thisItem: integratedStopItem): void {\n      thisItemElement.setAttribute('segment-buffer', booleanToString(thisItem.segmentBuffer.isSegmentBuffer));\n      thisThreadBoxElement.setAttribute('segment-buffer', booleanToString(thisItem.segmentBuffer.isSegmentBuffer));\n    }\n\n    function updateName(thisItemElement: HTMLElement, thisItem: integratedStopItem): void {\n      elementQuerySelector(thisItemElement, '.css_route_group_item_name').innerText = thisItem.name;\n    }\n\n    function updateBuses(thisItemElement: HTMLElement, thisItem: integratedStopItem): void {\n      elementQuerySelector(thisItemElement, '.css_route_group_item_buses').innerHTML = thisItem.buses.length === 0 ? '<div class=\"css_route_group_item_buses_message\"></div>' : thisItem.buses.map((bus) => `<div class=\"css_route_group_item_bus\" on-this-route=\"${bus.onThisRoute}\"><div class=\"css_route_group_item_bus_title\"><div class=\"css_route_group_item_bus_icon\">${getIconHTML('directions_bus')}</div><div class=\"css_route_group_item_bus_car_number\">${bus.carNumber}</div></div><div class=\"css_route_group_item_bus_attributes\"><div class=\"css_route_group_item_bus_route\">${bus.RouteName}</div><div class=\"css_route_group_item_bus_car_status\">${bus.status.text}</div><div class=\"css_route_group_item_bus_car_type\">${bus.type}</div></div></div>`).join('');\n    }\n\n    function updateOverlappingRoutes(thisItemElement: HTMLElement, thisItem: integratedStopItem): void {\n      elementQuerySelector(thisItemElement, '.css_route_group_item_overlapping_routes').innerHTML = thisItem.overlappingRoutes.length === 0 ? '<div class=\"css_route_group_item_overlapping_route_message\"></div>' : thisItem.overlappingRoutes.map((route) => `<div class=\"css_route_group_item_overlapping_route\"><div class=\"css_route_group_item_overlapping_route_title\"><div class=\"css_route_group_item_overlapping_route_icon\">${getIconHTML('route')}</div><div class=\"css_route_group_item_overlapping_route_name\">${route.name}</div></div><div class=\"css_route_group_item_overlapping_route_endpoints\">${route.RouteEndPoints.html}</div><div class=\"css_route_group_item_overlapping_route_actions\"><div class=\"css_route_group_item_overlapping_route_action_button\" onclick=\"bus.route.switchRoute(${route.RouteID}, [${route.PathAttributeId.join(',')}])\"></div><div class=\"css_route_group_item_overlapping_route_action_button\" onclick=\"bus.folder.openSaveToFolder('route-on-route', [${route.RouteID}])\"></div></div></div>`).join('');\n    }\n\n    function updateBusArrivalTimes(thisItemElement: HTMLElement, thisItem: integratedStopItem): void {\n      elementQuerySelector(thisItemElement, '.css_route_group_item_bus_arrival_times').innerHTML = thisItem.busArrivalTimes.length === 0 ? '<div class=\"css_route_group_item_bus_arrival_message\"></div>' : thisItem.busArrivalTimes.map((busArrivalTime) => `<div class=\"css_route_group_item_bus_arrival_time\"><div class=\"css_route_group_item_bus_arrival_time_title\"><div class=\"css_route_group_item_bus_arrival_time_icon\">${getIconHTML('calendar_view_day')}</div><div class=\"css_route_group_item_bus_arrival_time_personal_schedule_name\">${busArrivalTime.personalSchedule.name}</div><div class=\"css_route_group_item_bus_arrival_time_personal_schedule_time\">${indexToDay(busArrivalTime.day).name} ${timeObjectToString(busArrivalTime.personalSchedule.period.start)} - ${timeObjectToString(busArrivalTime.personalSchedule.period.end)}</div></div><div class=\"css_route_group_item_bus_arrival_time_chart\">${busArrivalTime.chart}</div></div>`).join('');\n    }\n\n    function updateNearbyLocations(thisItemElement: HTMLElement, thisItem: integratedStopItem): void {\n      elementQuerySelector(thisItemElement, '.css_route_group_item_nearby_locations').innerHTML = thisItem.nearbyLocations.length === 0 ? '<div class=\"css_route_group_item_nearby_locations_message\"></div>' : thisItem.nearbyLocations.map((nearbyLocation) => `<div class=\"css_route_group_item_nearby_location\"><div class=\"css_route_group_item_nearby_location_title\"><div class=\"css_route_group_item_nearby_location_icon\">${getIconHTML('location_on')}</div><div class=\"css_route_group_item_nearby_location_name\">${nearbyLocation.name}</div></div><div class=\"css_route_group_item_nearby_location_distance\">${nearbyLocation.distance}</div><div class=\"css_route_group_item_nearby_location_actions\"><div class=\"css_route_group_item_nearby_location_action_button\" onclick=\"bus.location.openLocation('${nearbyLocation.hash}')\"></div><div class=\"css_route_group_item_nearby_location_action_button\" onclick=\"bus.folder.openSaveToFolder('location-on-route', ['${nearbyLocation.hash}'])\"></div></div></div>`).join('');\n    }\n\n    function updateNearest(thisItemElement: HTMLElement, thisThreadBoxElement: HTMLElement, thisItem: integratedStopItem): void {\n      thisItemElement.setAttribute('nearest', booleanToString(thisItem.nearest));\n      thisThreadBoxElement.setAttribute('nearest', booleanToString(thisItem.nearest));\n    }\n\n    function updateThread(thisThreadBoxElement: HTMLElement, thisItem: integratedStopItem, previousItem: integratedStopItem | null, skeletonScreen: boolean, animation: boolean): void {\n      const previousProgress = previousItem?.progress || 0;\n      const thisProgress = thisItem?.progress || 0;\n      const thisThreadProgressElement = elementQuerySelector(thisThreadBoxElement, '.css_route_group_thread .css_route_group_thread_progress');\n      if (!skeletonScreen) {\n        if (animation) {\n          if (previousProgress !== 0 && thisProgress === 0 && Math.abs(thisProgress - previousProgress) > 0) {\n            thisThreadProgressElement.style.setProperty('--b-cssvar-thread-progress-translate-y', '100%');\n            thisThreadProgressElement.addEventListener(\n              'transitionend',\n              function () {\n                thisThreadProgressElement.setAttribute('displayed', 'false');\n                thisThreadProgressElement.style.setProperty('--b-cssvar-thread-progress-translate-y', '-100%');\n              },\n              { once: true }\n            );\n            return;\n          }\n        }\n      }\n      if (thisProgress > 0) {\n        thisThreadProgressElement.setAttribute('displayed', 'true');\n        thisThreadProgressElement.style.setProperty('--b-cssvar-thread-progress-translate-y', `${(thisProgress - 1) * 100}%`);\n      } else {\n        thisThreadProgressElement.setAttribute('displayed', 'false');\n      }\n    }\n\n    function updateStretch(thisItemElement: HTMLElement, thisThreadBoxElement: HTMLElement, skeletonScreen: boolean): void {\n      if (skeletonScreen) {\n        const thisItemBodyElement = elementQuerySelector(thisItemElement, '.css_route_group_item_body');\n        thisItemBodyElement.setAttribute('displayed', 'false');\n        thisItemElement.setAttribute('stretched', 'false');\n        thisThreadBoxElement.setAttribute('stretched', 'false');\n      }\n    }\n\n    function updateAnimation(thisItemElement: HTMLElement, thisThreadBoxElement: HTMLElement, animation: boolean): void {\n      thisItemElement.setAttribute('animation', booleanToString(animation));\n      thisThreadBoxElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisItemElement: HTMLElement, thisThreadBoxElement: HTMLElement, skeletonScreen: boolean): void {\n      thisItemElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n      thisThreadBoxElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    function updateSaveToFolderButton(thisItemElement: HTMLElement, thisItem: integratedStopItem): void {\n      const saveToFolderButtonElement = elementQuerySelector(thisItemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"save-to-folder\"]');\n      saveToFolderButtonElement.onclick = function () {\n        openSaveToFolder('stop-on-route', [thisItemElement.id, thisItem.id, integration.RouteID]);\n      };\n      isFolderContentSaved('stop', thisItem.id).then((e) => {\n        saveToFolderButtonElement.setAttribute('highlighted', booleanToString(e));\n      });\n    }\n\n    function updateScheduleNotificationButton(thisItemElement: HTMLElement, thisItem: integratedStopItem): void {\n      const scheduleNotificationButtonElement = elementQuerySelector(thisItemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"schedule-notification\"]');\n      scheduleNotificationButtonElement.onclick = function () {\n        openScheduleNotification('stop-on-route', [thisItemElement.id, thisItem.id, integration.RouteID, thisItem.status.time]);\n      };\n      const havingNotifcationSchedules = stopHasNotifcationSchedules(thisItem.id);\n      scheduleNotificationButtonElement.setAttribute('highlighted', booleanToString(havingNotifcationSchedules));\n    }\n\n    if (previousItem === null) {\n      updateStatus(thisItemElement, thisThreadBoxElement, thisItem, skeletonScreen, animation);\n      updateName(thisItemElement, thisItem);\n      updateBuses(thisItemElement, thisItem);\n      updateOverlappingRoutes(thisItemElement, thisItem);\n      updateBusArrivalTimes(thisItemElement, thisItem);\n      updateNearbyLocations(thisItemElement, thisItem);\n      updateSegmentBuffer(thisItemElement, thisThreadBoxElement, thisItem);\n      updateNearest(thisItemElement, thisThreadBoxElement, thisItem);\n      updateThread(thisThreadBoxElement, thisItem, previousItem, skeletonScreen, animation);\n      updateStretch(thisItemElement, thisThreadBoxElement, skeletonScreen);\n      updateAnimation(thisItemElement, thisThreadBoxElement, animation);\n      updateSkeletonScreen(thisItemElement, thisThreadBoxElement, skeletonScreen);\n      updateSaveToFolderButton(thisItemElement, thisItem);\n      updateScheduleNotificationButton(thisItemElement, thisItem);\n    } else {\n      if (thisItem.status.time !== previousItem.status.time) {\n        updateStatus(thisItemElement, thisThreadBoxElement, thisItem, skeletonScreen, animation);\n        updateScheduleNotificationButton(thisItemElement, thisItem);\n      }\n      if (!compareThings(previousItem.buses, thisItem.buses)) {\n        updateBuses(thisItemElement, thisItem);\n      }\n      if (!compareThings(previousItem.busArrivalTimes, thisItem.busArrivalTimes)) {\n        updateBusArrivalTimes(thisItemElement, thisItem);\n      }\n      if (previousItem.nearest !== thisItem.nearest) {\n        updateNearest(thisItemElement, thisThreadBoxElement, thisItem);\n      }\n      if (previousItem.progress !== thisItem.progress) {\n        updateThread(thisThreadBoxElement, thisItem, previousItem, skeletonScreen, animation);\n      }\n      if (previousItem.id !== thisItem.id) {\n        updateName(thisItemElement, thisItem);\n        updateSegmentBuffer(thisItemElement, thisThreadBoxElement, thisItem);\n        updateOverlappingRoutes(thisItemElement, thisItem);\n        updateNearbyLocations(thisItemElement, thisItem);\n        updateSaveToFolderButton(thisItemElement, thisItem);\n        updateScheduleNotificationButton(thisItemElement, thisItem);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisItemElement, thisThreadBoxElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateStretch(thisItemElement, thisThreadBoxElement, skeletonScreen);\n        updateSkeletonScreen(thisItemElement, thisThreadBoxElement, skeletonScreen);\n      }\n    }\n  }\n\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n\n  const groupQuantity = integration.groupQuantity;\n  const itemQuantity = integration.itemQuantity;\n  const groupedItems = integration.groupedItems;\n\n  routeSliding_groupQuantity = groupQuantity;\n  routeSliding_fieldWidth = FieldWidth;\n  routeSliding_fieldHeight = FieldHeight;\n\n  let cumulativeOffset = 0;\n  const groupNames = [integration.RouteEndPoints.RouteDestination, integration.RouteEndPoints.RouteDeparture, ''].map((e) => `${e}`);\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const width = getTextWidth(groupNames[i], 500, '17px', `\"Noto Sans TC\", sans-serif`) + tabPadding;\n    routeSliding_groupStyles[groupKey] = {\n      width: width,\n      offset: cumulativeOffset\n    };\n    cumulativeOffset += width;\n  }\n  routeSliding_groupStyles[`g_${groupQuantity}`] = {\n    width: 0,\n    offset: cumulativeOffset\n  };\n\n  if (!routeSliding_sliding) {\n    const initialGroupKey = `g_${routeSliding_initialIndex}`;\n    const initialGroupStyle = routeSliding_groupStyles[initialGroupKey];\n    const offset = initialGroupStyle.offset * -1 + routeSliding_fieldWidth * 0.5 - initialGroupStyle.width * 0.5;\n    const tabLineWidth = initialGroupStyle.width - tabPadding;\n    updateRouteCSS(routeSliding_groupQuantity, offset, tabLineWidth, routeSliding_initialIndex);\n  }\n\n  if (previousSkeletonScreen !== skeletonScreen) {\n    RouteNameElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    RouteGroupTabsElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    RouteGroupTabLineTrackElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  }\n\n  if (previousAnimation !== animation) {\n    RouteNameElement.setAttribute('animation', booleanToString(animation));\n    RouteGroupTabsElement.setAttribute('animation', booleanToString(animation));\n    RouteGroupTabLineTrackElement.setAttribute('animation', booleanToString(animation));\n  }\n\n  if (previousIntegration?.RouteID !== integration.RouteID) {\n    RouteButtonRightElement.onclick = function () {\n      openRouteDetails(integration.RouteID, integration.PathAttributeId);\n    };\n  }\n\n  if (previousIntegration?.RouteName !== integration.RouteName) {\n    RouteNameSpanElement.innerText = integration.RouteName;\n  }\n\n  const currentGroupCapacity = elementQuerySelectorAll(RouteGroupsElement, '.css_route_group').length;\n  if (groupQuantity !== currentGroupCapacity) {\n    const difference = currentGroupCapacity - groupQuantity;\n    if (difference < 0) {\n      const newGroupsFragment = new DocumentFragment();\n      const newTabsFragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newGroupElement = generateElementOfGroup();\n        newGroupsFragment.appendChild(newGroupElement.element);\n        const newTabElement = generateElementOfTab();\n        newTabsFragment.appendChild(newTabElement.element);\n      }\n      RouteGroupsElement.append(newGroupsFragment);\n      RouteGroupTabsTrayElement.append(newTabsFragment);\n    } else {\n      const GroupElements = elementQuerySelectorAll(RouteGroupsElement, '.css_route_group');\n      const TabElements = elementQuerySelectorAll(RouteGroupTabsTrayElement, '.css_route_group_tab');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const groupIndex = currentGroupCapacity - 1 - o;\n        GroupElements[groupIndex].remove();\n        TabElements[groupIndex].remove();\n      }\n    }\n  }\n\n  const RouteGroupElements = elementQuerySelectorAll(RouteGroupsElement, '.css_route_group');\n\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const thisGroupElement = RouteGroupElements[i];\n    const thisGroupItemsTrackElement = elementQuerySelector(thisGroupElement, '.css_route_group_items_track');\n    const thisGroupThreadsTrackElement = elementQuerySelector(thisGroupElement, '.css_route_group_threads_track');\n    const currentItemCapacity = elementQuerySelectorAll(thisGroupItemsTrackElement, '.css_route_group_item').length;\n    if (itemQuantity[groupKey] !== currentItemCapacity) {\n      const difference = currentItemCapacity - itemQuantity[groupKey];\n      if (difference < 0) {\n        const newItemsFragment = new DocumentFragment();\n        const newThreadsFragment = new DocumentFragment();\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const newThreadBoxElement = generateElementOfThreadBox();\n          const newItemElement = generateElementOfItem(newThreadBoxElement.id);\n          newItemsFragment.appendChild(newItemElement.element);\n          newThreadsFragment.appendChild(newThreadBoxElement.element);\n        }\n        thisGroupItemsTrackElement.append(newItemsFragment);\n        thisGroupThreadsTrackElement.append(newThreadsFragment);\n      } else {\n        const thisGroupItemElements = elementQuerySelectorAll(thisGroupItemsTrackElement, '.css_route_group_item');\n        const thisGroupThreadElements = elementQuerySelectorAll(thisGroupThreadsTrackElement, '.css_route_group_thread_box');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const itemIndex = currentItemCapacity - 1 - o;\n          thisGroupItemElements[itemIndex].remove();\n          thisGroupThreadElements[itemIndex].remove();\n        }\n      }\n    }\n  }\n\n  const TabElements = elementQuerySelectorAll(RouteGroupTabsTrayElement, '.css_route_group_tab');\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n\n    const thisTabElement = TabElements[i];\n    thisTabElement.innerHTML = [integration.RouteEndPoints.RouteDestination, integration.RouteEndPoints.RouteDeparture, ''].map((e) => `<span>${e}</span>`)[i];\n    thisTabElement.style.setProperty('--b-cssvar-route-tab-width', `${routeSliding_groupStyles[groupKey].width}px`);\n    thisTabElement.style.setProperty('--b-cssvar-route-tab-index', i.toString());\n\n    const thisGroupElement = RouteGroupElements[i];\n    if (skeletonScreen) {\n      thisGroupElement.scrollTop = 0;\n    }\n\n    const thisGroupItemsTrackElement = elementQuerySelector(thisGroupElement, '.css_route_group_items_track');\n    const thisGroupThreadsTrackElement = elementQuerySelector(thisGroupElement, '.css_route_group_threads_track');\n    const thisGroupItemElements = elementQuerySelectorAll(thisGroupItemsTrackElement, '.css_route_group_item');\n    const thisGroupThreadElements = elementQuerySelectorAll(thisGroupThreadsTrackElement, '.css_route_group_thread_box');\n    for (let j = 0; j < itemQuantity[groupKey]; j++) {\n      const thisItemElement = thisGroupItemElements[j];\n      const thisThreadBoxElement = thisGroupThreadElements[j];\n      const thisItem = groupedItems[groupKey][j];\n      if (previousIntegration.hasOwnProperty('groupedItems')) {\n        if (previousIntegration.groupedItems.hasOwnProperty(groupKey)) {\n          if (previousIntegration.groupedItems[groupKey][j]) {\n            const previousItem = previousIntegration.groupedItems[groupKey][j];\n            updateItem(thisItemElement, thisThreadBoxElement, thisItem, previousItem, skeletonScreen, animation);\n          } else {\n            updateItem(thisItemElement, thisThreadBoxElement, thisItem, null, skeletonScreen, animation);\n          }\n        } else {\n          updateItem(thisItemElement, thisThreadBoxElement, thisItem, null, skeletonScreen, animation);\n        }\n      } else {\n        updateItem(thisItemElement, thisThreadBoxElement, thisItem, null, skeletonScreen, animation);\n      }\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nasync function refreshRoute() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  const busArrivalTimeChartSize = querySize('route-bus-arrival-time-chart');\n  routeRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  routeRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  routeRefreshTimer_refreshing = true;\n  routeRefreshTimer_currentRequestID = generateIdentifier();\n  RouteUpdateTimerElement.setAttribute('refreshing', 'true');\n  RouteUpdateTimerElement.classList.remove('css_route_update_timer_slide_rtl');\n  document.addEventListener(routeRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateRoute(currentRouteIDSet_RouteID, currentRouteIDSet_PathAttributeId, busArrivalTimeChartSize.width, busArrivalTimeChartSize.height, routeRefreshTimer_currentRequestID);\n  updateRouteField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (routeRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  routeRefreshTimer_lastUpdate = new Date().getTime();\n  if (routeRefreshTimer_dynamic) {\n    routeRefreshTimer_nextUpdate = Math.max(routeRefreshTimer_lastUpdate + routeRefreshTimer_minInterval, integration.dataUpdateTime + routeRefreshTimer_baseInterval / updateRate);\n  } else {\n    routeRefreshTimer_nextUpdate = routeRefreshTimer_lastUpdate + routeRefreshTimer_baseInterval;\n  }\n  routeRefreshTimer_dynamicInterval = Math.max(routeRefreshTimer_minInterval, routeRefreshTimer_nextUpdate - routeRefreshTimer_lastUpdate);\n  routeRefreshTimer_refreshing = false;\n  RouteUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nexport function streamRoute(): void {\n  refreshRoute()\n    .then(function () {\n      if (routeRefreshTimer_streaming) {\n        setTimeout(\n          function () {\n            streamRoute();\n          },\n          Math.max(routeRefreshTimer_minInterval, routeRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        routeRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (routeRefreshTimer_streaming) {\n        promptMessage('error', `${routeRefreshTimer_retryInterval / 1000}`);\n        setTimeout(function () {\n          streamRoute();\n        }, routeRefreshTimer_retryInterval);\n      } else {\n        routeRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openRoute(RouteID: IntegratedRoute['RouteID'], PathAttributeId: IntegratedRoute['PathAttributeId']): void {\n  pushPageHistory('Route');\n  logRecentView('route', RouteID);\n  currentRouteIDSet_RouteID = RouteID;\n  currentRouteIDSet_PathAttributeId = PathAttributeId;\n  routeSliding_initialIndex = 0;\n  routeSliding_groupStyles = {};\n  RouteField.setAttribute('displayed', 'true');\n  RouteGroupsElement.scrollLeft = 0;\n  RouteGroupsElement.focus();\n  setUpRouteFieldSkeletonScreen(RouteID, PathAttributeId);\n  if (!routeRefreshTimer_streaming) {\n    routeRefreshTimer_streaming = true;\n    if (!routeRefreshTimer_streamStarted) {\n      routeRefreshTimer_streamStarted = true;\n      streamRoute();\n    } else {\n      refreshRoute();\n    }\n  }\n  closePreviousPage();\n}\n\nexport function closeRoute(): void {\n  // revokePageHistory('Route');\n  RouteField.setAttribute('displayed', 'false');\n  routeRefreshTimer_streaming = false;\n  openPreviousPage();\n}\n\nexport function switchRoute(RouteID: IntegratedRoute['RouteID'], PathAttributeId: IntegratedRoute['PathAttributeId']): void {\n  routeRefreshTimer_streaming = false;\n  openRoute(RouteID, PathAttributeId);\n}\n\nexport function stretchRouteItem(itemElementID: string, threadBoxElementID: string): void {\n  const itemElement = elementQuerySelector(RouteGroupsElement, `.css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const itemBodyElement = elementQuerySelector(itemElement, '.css_route_group_item_body');\n  const threadBoxElement = elementQuerySelector(RouteGroupsElement, `.css_route_group .css_route_group_tracks .css_route_group_threads_track .css_route_group_thread_box#${threadBoxElementID}`);\n\n  const itemsTrackElement = itemElement.parentElement as HTMLElement;\n  const threadTrackElement = threadBoxElement.parentElement as HTMLElement;\n\n  const elementsBelowThreadBoxElement = getElementsBelow(threadBoxElement, 'css_route_group_thread_box');\n  const elementsBelowItemElement = getElementsBelow(itemElement, 'css_route_group_item');\n\n  const elementsBelowLength = elementsBelowItemElement.length; // = elementsBelowThreadBoxElement.length\n\n  const itemsTrackElementRect = itemsTrackElement.getBoundingClientRect();\n  const itemElementRect = itemElement.getBoundingClientRect();\n  const threadTrackElementRect = threadTrackElement.getBoundingClientRect();\n  const threadBoxElementRect = threadBoxElement.getBoundingClientRect();\n\n  // const threadBoxElementX = threadBoxElementRect.left - threadTrackElementRect.left;\n  const threadBoxElementY = threadBoxElementRect.top - threadTrackElementRect.top;\n\n  // const itemElementX = itemElementRect.left - itemsTrackElementRect.left;\n  const itemElementY = itemElementRect.top - itemsTrackElementRect.top; // itemElementRect.top + scrollTop - (itemsTrackElementRect.top + scrollTop)\n\n  const stretched = itemElement.getAttribute('stretched') === 'true' ? true : false;\n  const animation = itemElement.getAttribute('animation') === 'true' ? true : false;\n\n  if (animation) {\n    const pushDirection = stretched ? '2' : '1';\n\n    // Separate the elements from the document flow while keeping its position\n    threadBoxElement.setAttribute('stretching', 'true');\n    // threadBoxElement.style.setProperty('--b-cssvar-css-route-group-thread-box-x', `${threadBoxElementX}px`);\n    threadBoxElement.style.setProperty('--b-cssvar-css-route-group-thread-box-y', `${threadBoxElementY}px`);\n\n    itemElement.setAttribute('stretching', 'true');\n    // itemElement.style.setProperty('--b-cssvar-css-route-group-item-x', `${itemElementX}px`);\n    itemElement.style.setProperty('--b-cssvar-css-route-group-item-y', `${itemElementY}px`);\n\n    // Set push direction and push state\n    for (let i = 0; i < elementsBelowLength; i++) {\n      const thisItemElement = elementsBelowItemElement[i];\n      const thisThreadBoxElement = elementsBelowThreadBoxElement[i];\n      // thisThreadBoxElement.style.setProperty('--b-cssvar-css-route-group-thread-z-index', (elementsBelowLength - i - 1).toString());\n      thisThreadBoxElement.style.setProperty('--b-cssvar-css-route-group-thread-z-index', (-1 * i - 1).toString());\n      thisThreadBoxElement.setAttribute('push-direction', pushDirection);\n      thisThreadBoxElement.setAttribute('push-state', '1');\n      thisItemElement.setAttribute('push-direction', pushDirection);\n      thisItemElement.setAttribute('push-state', '1');\n    }\n\n    itemElement.addEventListener(\n      'transitionend',\n      function () {\n        // Reset the push direction and push state\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          const thisThreadBoxElement = elementsBelowThreadBoxElement[i];\n          thisThreadBoxElement.setAttribute('push-direction', '0');\n          thisThreadBoxElement.setAttribute('push-state', '0');\n          thisItemElement.setAttribute('push-direction', '0');\n          thisItemElement.setAttribute('push-state', '0');\n        }\n        // Deposit the element\n        threadBoxElement.setAttribute('stretching', 'false');\n        itemElement.setAttribute('stretching', 'false');\n      },\n      { once: true }\n    );\n\n    itemElement.addEventListener(\n      'transitionstart',\n      function () {\n        // Transition the elements below\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          const thisThreadBoxElement = elementsBelowThreadBoxElement[i];\n          thisThreadBoxElement.setAttribute('push-state', '2');\n          thisItemElement.setAttribute('push-state', '2');\n        }\n      },\n      { once: true }\n    );\n  }\n\n  // Switch the state of the stretching element\n  if (stretched) {\n    if (animation) {\n      itemBodyElement.addEventListener(\n        'transitionend',\n        function () {\n          itemBodyElement.setAttribute('displayed', 'false');\n        },\n        { once: true }\n      );\n    } else {\n      itemBodyElement.setAttribute('displayed', 'false');\n    }\n    itemElement.setAttribute('stretched', 'false');\n    threadBoxElement.setAttribute('stretched', 'false');\n  } else {\n    itemBodyElement.setAttribute('displayed', 'true');\n    itemElement.setAttribute('stretched', 'true');\n    threadBoxElement.setAttribute('stretched', 'true');\n  }\n}\n\nexport function switchRouteBodyTab(itemID: string, tabCode: number): void {\n  const itemElement = elementQuerySelector(RouteGroupsElement, `.css_route_group_item#${itemID}`);\n  const buttons = elementQuerySelector(itemElement, '.css_route_group_item_buttons');\n  const button = elementQuerySelectorAll(buttons, '.css_route_group_item_button[highlighted=\"true\"][type=\"tab\"]');\n  for (const t of button) {\n    t.setAttribute('highlighted', 'false');\n  }\n  elementQuerySelector(buttons, `.css_route_group_item_button[code=\"${tabCode}\"]`).setAttribute('highlighted', 'true');\n  switch (tabCode) {\n    case 0:\n      elementQuerySelector(itemElement, '.css_route_group_item_buses').setAttribute('displayed', 'true');\n      elementQuerySelector(itemElement, '.css_route_group_item_bus_arrival_times').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_overlapping_routes').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_nearby_locations').setAttribute('displayed', 'false');\n      break;\n    case 1:\n      elementQuerySelector(itemElement, '.css_route_group_item_buses').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_bus_arrival_times').setAttribute('displayed', 'true');\n      elementQuerySelector(itemElement, '.css_route_group_item_overlapping_routes').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_nearby_locations').setAttribute('displayed', 'false');\n      break;\n    case 2:\n      elementQuerySelector(itemElement, '.css_route_group_item_buses').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_bus_arrival_times').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_overlapping_routes').setAttribute('displayed', 'true');\n      elementQuerySelector(itemElement, '.css_route_group_item_nearby_locations').setAttribute('displayed', 'false');\n      break;\n    case 3:\n      elementQuerySelector(itemElement, '.css_route_group_item_buses').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_bus_arrival_times').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_overlapping_routes').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_route_group_item_nearby_locations').setAttribute('displayed', 'true');\n      break;\n    default:\n      break;\n  }\n}\n","import { searchRouteByName, searchRouteByRouteID } from '../data/search/index';\nimport { openLocation } from '../interface/location/index';\nimport { openRoute } from '../interface/route/index';\n\nexport function openPermalink(): void {\n  const current_url = new URL(location.href);\n  const permalinkValue = current_url.searchParams.get('permalink');\n  if (permalinkValue !== null) {\n    const permalinkString = String(permalinkValue);\n    if (/^[0-1]\\@(.*)(\\~.*){0,1}/.test(permalinkString)) {\n      const values = permalinkString.split(/[\\@\\~]/);\n      const type = parseInt(values[0]);\n      // route\n      switch (type) {\n        case 0:\n          searchRouteByRouteID(parseInt(values[1], 16)).then((result) => {\n            if (result !== false) {\n              openRoute(result.id, result.pid);\n            } else {\n              searchRouteByName(values[2]).then((result2) => {\n                if (result2.length > 0) {\n                  openRoute(result2[0].id, result2[0].pid);\n                }\n              });\n            }\n          });\n          break;\n        case 1:\n          openLocation(values[1]);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n}\n\nexport function getPermalink(type: number, approach: object): string {\n  const link = new URL('https://erichsia7.github.io/bus/');\n  switch (type) {\n    case 0:\n      link.searchParams.set('permalink', `0@${parseInt(approach.id).toString(16)}~${approach.name}`);\n      break;\n    case 1:\n      link.searchParams.set('permalink', `1@${approach.hash}`);\n      break;\n    default:\n      break;\n  }\n  return decodeURIComponent(link.toString());\n}\n","import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../data/apis/loader';\nimport { isFolderContentSaved } from '../../data/folder/index';\nimport { IntegratedLocation, IntegratedLocationItem, integrateLocation, LocationGroupProperty } from '../../data/location/index';\nimport { stopHasNotifcationSchedules } from '../../data/notification/index';\nimport { logRecentView } from '../../data/recent-views/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll, getElementsBelow } from '../../tools/elements';\nimport { getTextWidth } from '../../tools/graphic';\nimport { booleanToString, compareThings, generateIdentifier } from '../../tools/index';\nimport { indexToDay, timeObjectToString } from '../../tools/time';\nimport { getBlankIconElement, getIconElement, getIconHTML, setIcon } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, GroupStyles, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\nimport { openSaveToFolder } from '../save-to-folder/index';\nimport { openScheduleNotification } from '../schedule-notification/index';\nimport { openLocationDetails } from './details/index';\n\nconst LocationField = documentQuerySelector('.css_location_field');\nconst LocationHeadElement = elementQuerySelector(LocationField, '.css_location_head');\nconst LocationNameElement = elementQuerySelector(LocationHeadElement, '.css_location_name');\nconst LocationNameSpanElement = elementQuerySelector(LocationNameElement, 'span');\nconst LocationButtonRightElement = elementQuerySelector(LocationHeadElement, '.css_location_button_right');\nconst LocationGroupsElement = elementQuerySelector(LocationField, '.css_location_groups');\nconst LocationGroupTabsElement = elementQuerySelector(LocationHeadElement, '.css_location_group_tabs');\nconst LocationGroupTabsTrayElement = elementQuerySelector(LocationGroupTabsElement, '.css_location_group_tabs_tray');\nconst LocationGroupTabLineTrackElement = elementQuerySelector(LocationHeadElement, '.css_location_group_tab_line_track');\nconst LocationGroupTabLineElement = elementQuerySelector(LocationGroupTabLineTrackElement, '.css_location_group_tab_line');\nconst LocationUpdateTimerElement = elementQuerySelector(LocationHeadElement, '.css_location_update_timer_box .css_location_update_timer');\n\nlet previousIntegration = {} as IntegratedLocation;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet locationSliding_initialIndex: number = 0;\nlet locationSliding_targetIndex: number = 0;\nlet locationSliding_groupQuantity: number = 0;\nlet locationSliding_groupStyles: GroupStyles = {};\nlet locationSliding_fieldWidth: number = 0;\nlet locationSliding_fieldHeight: number = 0;\nlet locationSliding_sliding: boolean = false;\n\nlet locationRefreshTimer_retryInterval: number = 10 * 1000;\nlet locationRefreshTimer_baseInterval: number = 15 * 1000;\nlet locationRefreshTimer_minInterval: number = 5 * 1000;\nlet locationRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet locationRefreshTimer_dynamic: boolean = true;\nlet locationRefreshTimer_lastUpdate: number = 0;\nlet locationRefreshTimer_nextUpdate: number = 0;\nlet locationRefreshTimer_currentRequestID: string = '';\nlet locationRefreshTimer_refreshing: boolean = false;\nlet locationRefreshTimer_streaming: boolean = false;\nlet locationRefreshTimer_streamStarted: boolean = false;\n\nlet currentHashSet_hash: string = '';\n\nlet tabPadding: number = 20;\n\nexport function initializeLocationSliding(): void {\n  LocationGroupsElement.addEventListener(\n    'touchstart',\n    function () {\n      locationSliding_initialIndex = Math.round(LocationGroupsElement.scrollLeft / locationSliding_fieldWidth);\n    },\n    { passive: true }\n  );\n\n  LocationGroupsElement.addEventListener(\n    'scroll',\n    function (event: Event) {\n      locationSliding_sliding = true;\n      const target = event.target as HTMLElement;\n      const currentIndex = target.scrollLeft / locationSliding_fieldWidth;\n      if (currentIndex > locationSliding_initialIndex) {\n        locationSliding_targetIndex = locationSliding_initialIndex + 1;\n      } else {\n        locationSliding_targetIndex = locationSliding_initialIndex - 1;\n      }\n      const indexDifference = currentIndex - locationSliding_initialIndex;\n      let delta = Math.abs(indexDifference);\n      if (delta > 1) {\n        if (indexDifference > 0) {\n          locationSliding_initialIndex = Math.floor(currentIndex);\n          locationSliding_targetIndex = locationSliding_initialIndex + 1;\n        } else {\n          locationSliding_initialIndex = Math.ceil(currentIndex);\n          locationSliding_targetIndex = locationSliding_initialIndex - 1;\n        }\n        delta = Math.abs(currentIndex - locationSliding_initialIndex);\n      }\n      const initialSize = locationSliding_groupStyles[`g_${locationSliding_initialIndex}`] || { width: 0, offset: 0 };\n      const targetSize = locationSliding_groupStyles[`g_${locationSliding_targetIndex}`] || { width: 0, offset: 0 };\n      const tabWidth = initialSize.width + (targetSize.width - initialSize.width) * delta;\n      const offset = (initialSize.offset + (targetSize.offset - initialSize.offset) * delta) * -1 + locationSliding_fieldWidth * 0.5 - tabWidth * 0.5;\n      updateLocationCSS(locationSliding_groupQuantity, offset, tabWidth - tabPadding, currentIndex);\n      if (currentIndex === locationSliding_targetIndex) {\n        locationSliding_initialIndex = Math.round(LocationGroupsElement.scrollLeft / locationSliding_fieldWidth);\n        locationSliding_sliding = false;\n      }\n    },\n    { passive: true }\n  );\n}\n\nexport function updateLocationCSS(groupQuantity: number, offset: number, tabLineWidth: number, percentage: number): void {\n  LocationGroupsElement.style.setProperty('--b-cssvar-location-group-quantity', groupQuantity.toString());\n  LocationGroupTabLineElement.style.setProperty('--b-cssvar-location-tab-line-width-scale', tabLineWidth.toString());\n  LocationGroupTabsTrayElement.style.setProperty('--b-cssvar-location-tabs-tray-offset', `${offset.toString()}px`);\n  LocationGroupTabsTrayElement.style.setProperty('--b-cssvar-location-percentage', percentage.toString());\n}\n\nfunction animateUpdateTimer(): void {\n  LocationUpdateTimerElement.style.setProperty('--b-cssvar-location-update-timer-interval', `${locationRefreshTimer_dynamicInterval}ms`);\n  LocationUpdateTimerElement.classList.add('css_location_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (locationRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    LocationUpdateTimerElement.style.setProperty('--b-cssvar-location-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfItem(): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_location_group_item');\n  itemElement.id = identifier;\n  itemElement.setAttribute('stretched', 'false');\n  itemElement.setAttribute('stretching', 'false');\n  itemElement.setAttribute('push-direction', '0');\n  itemElement.setAttribute('push-state', '0');\n\n  // Head\n  const headElement = document.createElement('div');\n  headElement.classList.add('css_location_group_item_head');\n\n  // Rank\n  const rankElement = document.createElement('div');\n  rankElement.classList.add('css_location_group_item_rank');\n  const rankNextSlideElement = document.createElement('div');\n  rankNextSlideElement.classList.add('css_location_group_item_rank_next_slide');\n  rankNextSlideElement.setAttribute('code', '-1');\n  rankNextSlideElement.setAttribute('displayed', 'false');\n  const rankCurrentSlideElement = document.createElement('div');\n  rankCurrentSlideElement.classList.add('css_location_group_item_rank_current_slide');\n  rankCurrentSlideElement.setAttribute('code', '-1');\n  rankCurrentSlideElement.setAttribute('displayed', 'true');\n  rankElement.appendChild(rankNextSlideElement);\n  rankElement.appendChild(rankCurrentSlideElement);\n\n  // Route direction\n  const routeDirectionElement = document.createElement('div');\n  routeDirectionElement.classList.add('css_location_group_item_route_direction');\n\n  // Route name\n  const routeNameElement = document.createElement('div');\n  routeNameElement.classList.add('css_location_group_item_route_name');\n\n  // Capsule\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_location_group_item_capsule');\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_location_group_item_status');\n  const nextSlideElement = document.createElement('div');\n  nextSlideElement.classList.add('css_next_slide');\n  nextSlideElement.setAttribute('code', '0');\n  nextSlideElement.setAttribute('displayed', 'false');\n  const currentSlideElement = document.createElement('div');\n  currentSlideElement.classList.add('css_current_slide');\n  currentSlideElement.setAttribute('code', '0');\n  currentSlideElement.setAttribute('displayed', 'true');\n  statusElement.appendChild(nextSlideElement);\n  statusElement.appendChild(currentSlideElement);\n\n  // Stretch button\n  const stretchElement = document.createElement('div');\n  stretchElement.classList.add('css_location_group_item_stretch');\n  stretchElement.appendChild(getIconElement('keyboard_arrow_down'));\n  stretchElement.onclick = () => {\n    stretchLocationItem(identifier);\n  };\n\n  // Capsule separator\n  const capsuleSeparatorElement = document.createElement('div');\n  capsuleSeparatorElement.classList.add('css_location_group_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(statusElement);\n  capsuleElement.appendChild(stretchElement);\n  capsuleElement.appendChild(capsuleSeparatorElement);\n\n  // Assemble head\n  headElement.appendChild(rankElement);\n  headElement.appendChild(routeDirectionElement);\n  headElement.appendChild(routeNameElement);\n  headElement.appendChild(capsuleElement);\n\n  // Body\n  const bodyElement = document.createElement('div');\n  bodyElement.classList.add('css_location_group_item_body');\n  bodyElement.setAttribute('displayed', 'false');\n\n  // Buttons\n  const buttonsElement = document.createElement('div');\n  buttonsElement.classList.add('css_location_group_item_buttons');\n\n  // Tab: \n  const busTabButtonElement = document.createElement('div');\n  busTabButtonElement.classList.add('css_location_group_item_button');\n  busTabButtonElement.setAttribute('highlighted', 'true');\n  busTabButtonElement.setAttribute('type', 'tab');\n  busTabButtonElement.setAttribute('code', '0');\n  const busTabIconElement = document.createElement('div');\n  busTabIconElement.classList.add('css_location_group_item_button_icon');\n  busTabIconElement.appendChild(getIconElement('directions_bus'));\n  busTabButtonElement.appendChild(busTabIconElement);\n  busTabButtonElement.appendChild(document.createTextNode(''));\n  busTabButtonElement.onclick = () => {\n    switchLocationBodyTab(identifier, 0);\n  };\n\n  // Tab: \n  const arrivalTabButtonElement = document.createElement('div');\n  arrivalTabButtonElement.classList.add('css_location_group_item_button');\n  arrivalTabButtonElement.setAttribute('highlighted', 'false');\n  arrivalTabButtonElement.setAttribute('type', 'tab');\n  arrivalTabButtonElement.setAttribute('code', '1');\n  const arrivalTabIconElement = document.createElement('div');\n  arrivalTabIconElement.classList.add('css_location_group_item_button_icon');\n  arrivalTabIconElement.appendChild(getIconElement('departure_board'));\n  arrivalTabButtonElement.appendChild(arrivalTabIconElement);\n  arrivalTabButtonElement.appendChild(document.createTextNode(''));\n  arrivalTabButtonElement.onclick = () => {\n    switchLocationBodyTab(identifier, 1);\n  };\n\n  // Button: \n  const saveButtonElement = document.createElement('div');\n  saveButtonElement.classList.add('css_location_group_item_button');\n  saveButtonElement.setAttribute('highlighted', 'false');\n  saveButtonElement.setAttribute('type', 'save-to-folder');\n  const saveButtonIconElement = document.createElement('div');\n  saveButtonIconElement.classList.add('css_location_group_item_button_icon');\n  saveButtonIconElement.appendChild(getIconElement('folder'));\n  saveButtonElement.appendChild(saveButtonIconElement);\n  saveButtonElement.appendChild(document.createTextNode(''));\n  /*\n  saveButtonElement.onclick = () => {\n    openSaveToFolder('stop-on-location', [identifier, null, null]);\n  };\n  */\n\n  // Button: \n  const notifyButtonElement = document.createElement('div');\n  notifyButtonElement.classList.add('css_location_group_item_button');\n  notifyButtonElement.setAttribute('highlighted', 'false');\n  notifyButtonElement.setAttribute('type', 'schedule-notification');\n  notifyButtonElement.setAttribute('enabled', 'true');\n  const notifyButtonIconElement = document.createElement('div');\n  notifyButtonIconElement.classList.add('css_location_group_item_button_icon');\n  notifyButtonIconElement.appendChild(getIconElement('notifications'));\n  notifyButtonElement.appendChild(notifyButtonIconElement);\n  notifyButtonElement.appendChild(document.createTextNode(''));\n  /*\n  notifyButtonElement.onclick = () => {\n    openScheduleNotification('stop-on-location', [identifier, null, null, null]);\n  };\n  */\n\n  // Assemble buttons\n  buttonsElement.appendChild(busTabButtonElement);\n  buttonsElement.appendChild(arrivalTabButtonElement);\n  buttonsElement.appendChild(saveButtonElement);\n  buttonsElement.appendChild(notifyButtonElement);\n\n  // Buses\n  const busesElement = document.createElement('div');\n  busesElement.classList.add('css_location_group_item_buses');\n  busesElement.setAttribute('displayed', 'true');\n\n  // Bus arrival times\n  const busArrivalTimesElement = document.createElement('div');\n  busArrivalTimesElement.classList.add('css_location_group_item_bus_arrival_times');\n  busArrivalTimesElement.setAttribute('displayed', 'false');\n\n  // Assemble body\n  bodyElement.appendChild(buttonsElement);\n  bodyElement.appendChild(busesElement);\n  bodyElement.appendChild(busArrivalTimesElement);\n\n  // Assemble item\n  itemElement.appendChild(headElement);\n  itemElement.appendChild(bodyElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction generateElementOfGroup(): GeneratedElement {\n  // Main container\n  const groupElement = document.createElement('div');\n  groupElement.classList.add('css_location_group');\n\n  // Details\n  const detailsElement = document.createElement('div');\n  detailsElement.classList.add('css_location_group_details');\n\n  // Details body\n  const detailsBodyElement = document.createElement('div');\n  detailsBodyElement.classList.add('css_location_group_details_body');\n  detailsElement.appendChild(detailsBodyElement);\n\n  // Items\n  const itemsElement = document.createElement('div');\n  itemsElement.classList.add('css_location_group_items');\n\n  // Assemble group\n  groupElement.appendChild(detailsElement);\n  groupElement.appendChild(itemsElement);\n\n  return {\n    element: groupElement,\n    id: ''\n  };\n}\n\nfunction generateElementOfTab(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_location_group_tab');\n\n  const span = document.createElement('span');\n  element.appendChild(span);\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction generateElementOfGroupDetailsProperty(): GeneratedElement {\n  // Main container\n  const propertyElement = document.createElement('div');\n  propertyElement.classList.add('css_location_group_details_property');\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_location_details_property_icon');\n  iconElement.appendChild(getBlankIconElement());\n\n  // Value\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_location_details_property_value');\n\n  // Assemble\n  propertyElement.appendChild(iconElement);\n  propertyElement.appendChild(valueElement);\n\n  return {\n    element: propertyElement,\n    id: ''\n  };\n}\n\nfunction setUpLocationFieldSkeletonScreen(hash: IntegratedLocation['hash']): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: IntegratedLocation['itemQuantity'] = { g_0: Math.floor(FieldHeight / 50) + 5, g_1: Math.floor(FieldHeight / 50) + 5 };\n  const defaultGroupQuantity = 2;\n  let groupedItems: IntegratedLocation['groupedItems'] = {};\n  for (let i = 0; i < defaultGroupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    groupedItems[groupKey] = [];\n    for (let j = 0; j < defaultItemQuantity[groupKey]; j++) {\n      groupedItems[groupKey].push({\n        route_name: '',\n        route_direction: '',\n        routeId: 0,\n        stopId: 0,\n        status: {\n          code: 8,\n          text: '',\n          time: -6\n        },\n        ranking: {\n          number: 0,\n          text: '--',\n          code: -1\n        },\n        buses: [],\n        busArrivalTimes: []\n      });\n    }\n  }\n  updateLocationField(\n    {\n      groupedItems: groupedItems,\n      groupQuantity: defaultGroupQuantity,\n      groups: {\n        g_0: {\n          name: '',\n          properties: [\n            {\n              key: '0',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '1',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '2',\n              icon: '',\n              value: ''\n            }\n          ]\n        },\n        g_1: {\n          name: '',\n          properties: [\n            {\n              key: '0',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '1',\n              icon: '',\n              value: ''\n            },\n            {\n              key: '2',\n              icon: '',\n              value: ''\n            }\n          ]\n        }\n      },\n      itemQuantity: defaultItemQuantity,\n      LocationName: '',\n      hash: hash,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateLocationField(integration: IntegratedLocation, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedLocationItem, previousItem: IntegratedLocationItem | null): void {\n    function updateStatus(thisElement: HTMLElement, thisItem: IntegratedLocationItem, animation: boolean): void {\n      const thisElementRect = thisElement.getBoundingClientRect();\n      const top = thisElementRect.top;\n      const left = thisElementRect.left;\n      const bottom = thisElementRect.bottom;\n      const right = thisElementRect.right;\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisItemStatusElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_status');\n      const nextSlideElement = elementQuerySelector(thisItemStatusElement, '.css_next_slide');\n      const currentSlideElement = elementQuerySelector(thisItemStatusElement, '.css_current_slide');\n\n      nextSlideElement.setAttribute('code', thisItem.status.code.toString());\n      nextSlideElement.innerText = thisItem.status.text;\n\n      if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n        currentSlideElement.addEventListener(\n          'animationend',\n          function () {\n            currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n            currentSlideElement.innerText = thisItem.status.text;\n            currentSlideElement.classList.remove('css_slide_fade_out');\n            nextSlideElement.setAttribute('displayed', 'false');\n          },\n          { once: true }\n        );\n        nextSlideElement.setAttribute('displayed', 'true');\n        currentSlideElement.classList.add('css_slide_fade_out');\n      } else {\n        currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n        currentSlideElement.innerText = thisItem.status.text;\n      }\n    }\n\n    function updateRank(thisElement: HTMLElement, thisItem: IntegratedLocationItem, animation: boolean): void {\n      const thisElementRect = thisElement.getBoundingClientRect();\n      const top = thisElementRect.top;\n      const left = thisElementRect.left;\n      const bottom = thisElementRect.bottom;\n      const right = thisElementRect.right;\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisRankElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_rank');\n      const nextSlideElement = elementQuerySelector(thisRankElement, '.css_location_group_item_rank_next_slide');\n      const currentSlideElement = elementQuerySelector(thisRankElement, '.css_location_group_item_rank_current_slide');\n\n      nextSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n      nextSlideElement.innerText = thisItem.ranking.text;\n\n      if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n        currentSlideElement.addEventListener(\n          'animationend',\n          function () {\n            currentSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n            currentSlideElement.innerText = thisItem.ranking.text;\n            currentSlideElement.classList.remove('css_location_group_item_rank_current_slide_fade_out');\n            nextSlideElement.setAttribute('displayed', 'false');\n          },\n          { once: true }\n        );\n        nextSlideElement.setAttribute('displayed', 'true');\n        currentSlideElement.classList.add('css_location_group_item_rank_current_slide_fade_out');\n      } else {\n        currentSlideElement.setAttribute('code', thisItem.ranking.code.toString());\n        currentSlideElement.innerText = thisItem.ranking.text;\n      }\n    }\n\n    function updateRouteDirection(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisRouteDirectionElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_route_direction');\n      thisRouteDirectionElement.innerText = thisItem.route_direction;\n    }\n\n    function updateRouteName(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_location_group_item_head');\n      const thisRouteNameElement = elementQuerySelector(thisHeadElement, '.css_location_group_item_route_name');\n      thisRouteNameElement.innerText = thisItem.route_name;\n    }\n\n    function updateBuses(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisElement, '.css_location_group_item_body');\n      const thisBusesElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buses');\n      thisBusesElement.innerHTML = thisItem.buses.length === 0 ? '<div class=\"css_location_group_item_buses_message\"></div>' : thisItem.buses.map((bus) => `<div class=\"css_location_group_item_bus\" on-this-route=\"${bus.onThisRoute}\"><div class=\"css_location_group_item_bus_title\"><div class=\"css_location_group_item_bus_icon\">${getIconHTML('directions_bus')}</div><div class=\"css_location_group_item_bus_car_number\">${bus.carNumber}</div></div><div class=\"css_location_group_item_bus_attributes\"><div class=\"css_location_group_item_bus_route\">${bus.RouteName}</div><div class=\"css_location_group_item_bus_car_status\">${bus.status.text}</div><div class=\"css_location_group_item_bus_car_type\">${bus.type}</div></div></div>`).join('');\n    }\n\n    function updateBusArrivalTimes(thisElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisElement, '.css_location_group_item_body');\n      const thisBusArrivalTimesElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_bus_arrival_times');\n      thisBusArrivalTimesElement.innerHTML = thisItem.busArrivalTimes.length === 0 ? '<div class=\"css_location_group_item_bus_arrival_message\"></div>' : thisItem.busArrivalTimes.map((busArrivalTime) => `<div class=\"css_location_group_item_bus_arrival_time\"><div class=\"css_location_group_item_bus_arrival_time_title\"><div class=\"css_location_group_item_bus_arrival_time_icon\">${getIconHTML('calendar_view_day')}</div><div class=\"css_location_group_item_bus_arrival_time_personal_schedule_name\">${busArrivalTime.personalSchedule.name}</div><div class=\"css_location_group_item_bus_arrival_time_personal_schedule_time\">${indexToDay(busArrivalTime.day).name} ${timeObjectToString(busArrivalTime.personalSchedule.period.start)} - ${timeObjectToString(busArrivalTime.personalSchedule.period.end)}</div></div><div class=\"css_location_group_item_bus_arrival_time_chart\">${busArrivalTime.chart}</div></div>`).join('');\n    }\n\n    function updateStretch(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      if (skeletonScreen) {\n        thisElement.setAttribute('stretched', 'false');\n      }\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    function updateSaveToFolderButton(thisItemElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisItemElement, '.css_location_group_item_body');\n      const thisItemButtonsElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buttons');\n      const saveToFolderButtonElement = elementQuerySelector(thisItemButtonsElement, '.css_location_group_item_button[type=\"save-to-folder\"]');\n      saveToFolderButtonElement.onclick = function () {\n        openSaveToFolder('stop-on-location', [thisItemElement.id, thisItem.stopId, thisItem.routeId]);\n      };\n      isFolderContentSaved('stop', thisItem.stopId).then((e) => {\n        saveToFolderButtonElement.setAttribute('highlighted', booleanToString(e));\n      });\n    }\n\n    function updateScheduleNotificationButton(thisItemElement: HTMLElement, thisItem: IntegratedLocationItem): void {\n      const thisItemBodyElement = elementQuerySelector(thisItemElement, '.css_location_group_item_body');\n      const thisItemButtonsElement = elementQuerySelector(thisItemBodyElement, '.css_location_group_item_buttons');\n      const scheduleNotificationButtonElement = elementQuerySelector(thisItemButtonsElement, '.css_location_group_item_button[type=\"schedule-notification\"]');\n      scheduleNotificationButtonElement.onclick = function () {\n        openScheduleNotification('stop-on-location', [thisItemElement.id, thisItem.stopId, thisItem.routeId, thisItem.status.time]);\n      };\n      const havingNotifcationSchedules = stopHasNotifcationSchedules(thisItem.stopId);\n      scheduleNotificationButtonElement.setAttribute('highlighted', booleanToString(havingNotifcationSchedules));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateStatus(thisElement, thisItem, animation);\n      updateRank(thisElement, thisItem, animation);\n      updateRouteDirection(thisElement, thisItem);\n      updateRouteName(thisElement, thisItem);\n      updateBuses(thisElement, thisItem);\n      updateBusArrivalTimes(thisElement, thisItem);\n      updateStretch(thisElement, skeletonScreen);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n      updateSaveToFolderButton(thisElement, thisItem);\n      updateScheduleNotificationButton(thisElement, thisItem);\n    } else {\n      if (thisItem.status.time !== previousItem.status.time) {\n        updateStatus(thisElement, thisItem, animation);\n        updateScheduleNotificationButton(thisElement, thisItem);\n      }\n      if (previousItem.ranking.number !== thisItem.ranking.number || previousItem.ranking.code !== thisItem.ranking.code) {\n        updateRank(thisElement, thisItem, animation);\n      }\n      if (previousItem.stopId !== thisItem.stopId) {\n        updateRouteDirection(thisElement, thisItem);\n        updateRouteName(thisElement, thisItem);\n        updateSaveToFolderButton(thisElement, thisItem);\n      }\n      if (!compareThings(previousItem.buses, thisItem.buses)) {\n        updateBuses(thisElement, thisItem);\n      }\n      if (!compareThings(previousItem.busArrivalTimes, thisItem.busArrivalTimes)) {\n        updateBusArrivalTimes(thisElement, thisItem);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateStretch(thisElement, skeletonScreen);\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  function updateProperty(thisElement: HTMLElement, thisProperty: LocationGroupProperty, previousProperty: LocationGroupProperty | null): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: LocationGroupProperty): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_location_details_property_icon');\n      setIcon(thisIconElement, thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: LocationGroupProperty): void {\n      elementQuerySelector(thisElement, '.css_location_details_property_value').innerHTML = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousProperty === null || previousProperty === undefined) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (!compareThings(previousProperty.icon, thisProperty.icon)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty.value, thisProperty.value)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n\n  const groupQuantity = integration.groupQuantity;\n  const itemQuantity = integration.itemQuantity;\n  const groupedItems = integration.groupedItems;\n  const groups = integration.groups;\n\n  locationSliding_groupQuantity = groupQuantity;\n  locationSliding_fieldWidth = FieldWidth;\n  locationSliding_fieldHeight = FieldHeight;\n\n  let cumulativeOffset = 0;\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const width = getTextWidth(groups[groupKey].name, 500, '17px', `\"Noto Sans TC\", sans-serif`) + tabPadding;\n    locationSliding_groupStyles[groupKey] = {\n      width: width,\n      offset: cumulativeOffset\n    };\n    cumulativeOffset += width;\n  }\n  locationSliding_groupStyles[`g_${groupQuantity}`] = {\n    width: 0,\n    offset: cumulativeOffset\n  };\n\n  if (!locationSliding_sliding) {\n    const initialGroupKey = `g_${locationSliding_initialIndex}`;\n    const initialGroupStyle = locationSliding_groupStyles[initialGroupKey];\n    const offset = initialGroupStyle.offset * -1 + locationSliding_fieldWidth * 0.5 - initialGroupStyle.width * 0.5;\n    const tabLineWidth = initialGroupStyle.width - tabPadding;\n    updateLocationCSS(locationSliding_groupQuantity, offset, tabLineWidth, locationSliding_initialIndex);\n  }\n\n  if (previousIntegration?.hash !== integration.hash) {\n    LocationButtonRightElement.onclick = function () {\n      openLocationDetails(integration.hash);\n    };\n  }\n\n  if (previousIntegration?.LocationName !== integration.LocationName) {\n    LocationNameSpanElement.innerText = integration.LocationName;\n  }\n\n  if (previousAnimation !== animation) {\n    LocationNameElement.setAttribute('animation', booleanToString(animation));\n    LocationGroupTabsElement.setAttribute('animation', booleanToString(animation));\n  }\n\n  if (previousSkeletonScreen !== skeletonScreen) {\n    LocationNameElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    LocationGroupTabsElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    LocationGroupTabLineTrackElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  }\n\n  // TODO: updateTab\n  const currentGroupCapacity = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group').length;\n  if (groupQuantity !== currentGroupCapacity) {\n    const difference = currentGroupCapacity - groupQuantity;\n    if (difference < 0) {\n      const groupsFragment = new DocumentFragment();\n      const tabsFragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newGroupElement = generateElementOfGroup();\n        groupsFragment.appendChild(newGroupElement.element);\n        const newTabElement = generateElementOfTab();\n        tabsFragment.appendChild(newTabElement.element);\n      }\n      LocationGroupsElement.append(groupsFragment);\n      LocationGroupTabsTrayElement.append(tabsFragment);\n    } else {\n      const LocationGroupElements = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group');\n      const LocationGroupTabElements = elementQuerySelectorAll(LocationGroupTabsTrayElement, '.css_location_group_tab');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const groupIndex = currentGroupCapacity - 1 - o;\n        LocationGroupElements[groupIndex].remove();\n        LocationGroupTabElements[groupIndex].remove();\n      }\n    }\n  }\n\n  const LocationGroupElements = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group');\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const thisLocationGroupElement = LocationGroupElements[i];\n    const currentItemCapacity = elementQuerySelectorAll(thisLocationGroupElement, '.css_location_group_items .css_location_group_item').length;\n    if (itemQuantity[groupKey] !== currentItemCapacity) {\n      const difference = currentItemCapacity - itemQuantity[groupKey];\n      if (difference < 0) {\n        const LocationGroupItemsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_items');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const newItemElement = generateElementOfItem();\n          LocationGroupItemsElement.appendChild(newItemElement.element);\n        }\n      } else {\n        const LocationGroupItemElements = elementQuerySelectorAll(thisLocationGroupElement, '.css_location_group_items .css_location_group_item');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const itemIndex = currentItemCapacity - 1 - o;\n          LocationGroupItemElements[itemIndex].remove();\n        }\n      }\n    }\n\n    const currentGroupPropertyCapacity = elementQuerySelectorAll(elementQuerySelectorAll(LocationGroupsElement, '.css_location_group')[i], '.css_location_group_details .css_location_group_details_body .css_location_group_details_property').length;\n    const groupPropertyQuantity = groups[groupKey].properties.length;\n    if (groupPropertyQuantity !== currentGroupPropertyCapacity) {\n      const difference = currentGroupPropertyCapacity - groupPropertyQuantity;\n      if (difference < 0) {\n        const thisLocationGroupDetailsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_details');\n        const thisLocationGroupDetailsBodyElement = elementQuerySelector(thisLocationGroupDetailsElement, '.css_location_group_details_body');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          // var propertyIndex = currentGroupPropertyCapacity + o;\n          const newPropertyElement = generateElementOfGroupDetailsProperty();\n          thisLocationGroupDetailsBodyElement.appendChild(newPropertyElement.element);\n        }\n      } else {\n        const thisLocationGroupDetailsElement = elementQuerySelector(thisLocationGroupElement, '.css_location_group_details');\n        const thisLocationGroupDetailsBodyElement = elementQuerySelector(thisLocationGroupDetailsElement, '.css_location_group_details_body');\n        const propertyElements = elementQuerySelectorAll(thisLocationGroupDetailsBodyElement, '.css_location_group_details_property');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const propertyIndex = currentGroupPropertyCapacity - 1 - o;\n          propertyElements[propertyIndex].remove();\n        }\n      }\n    }\n  }\n\n  const tabElements = elementQuerySelectorAll(LocationGroupTabsTrayElement, '.css_location_group_tab');\n  const groupElements = elementQuerySelectorAll(LocationGroupsElement, '.css_location_group');\n  for (let i = 0; i < groupQuantity; i++) {\n    const groupKey = `g_${i}`;\n    const thisTabElement = tabElements[i];\n    const thisTabSpanElement = elementQuerySelector(thisTabElement, 'span');\n    thisTabSpanElement.innerText = groups[groupKey].name;\n    thisTabElement.style.setProperty('--b-cssvar-location-tab-width', `${locationSliding_groupStyles[groupKey].width}px`);\n    thisTabElement.style.setProperty('--b-cssvar-location-tab-index', i.toString());\n    const thisGroupElement = groupElements[i];\n    const propertyElements = elementQuerySelectorAll(thisGroupElement, `.css_location_group_details .css_location_group_details_body .css_location_group_details_property`);\n    const itemElements = elementQuerySelectorAll(thisGroupElement, `.css_location_group_items .css_location_group_item`);\n\n    const groupPropertyQuantity = groups[groupKey].properties.length; // TODO: propertyQuantity\n    for (let k = 0; k < groupPropertyQuantity; k++) {\n      const thisProperty = groups[groupKey].properties[k];\n      const thisElement = propertyElements[k];\n      if (previousIntegration.hasOwnProperty('groups')) {\n        if (previousIntegration.groups.hasOwnProperty(groupKey)) {\n          if (previousIntegration.groups[groupKey].properties[k]) {\n            const previousProperty = previousIntegration.groups[groupKey].properties[k];\n            updateProperty(thisElement, thisProperty, previousProperty);\n          } else {\n            updateProperty(thisElement, thisProperty, null);\n          }\n        } else {\n          updateProperty(thisElement, thisProperty, null);\n        }\n      } else {\n        updateProperty(thisElement, thisProperty, null);\n      }\n    }\n\n    for (let j = 0; j < itemQuantity[groupKey]; j++) {\n      const thisElement = itemElements[j];\n      const thisItem = groupedItems[groupKey][j];\n      if (previousIntegration.hasOwnProperty('groupedItems')) {\n        if (previousIntegration.groupedItems.hasOwnProperty(groupKey)) {\n          if (previousIntegration.groupedItems[groupKey][j]) {\n            const previousItem = previousIntegration.groupedItems[groupKey][j];\n            updateItem(thisElement, thisItem, previousItem);\n          } else {\n            updateItem(thisElement, thisItem, null);\n          }\n        } else {\n          updateItem(thisElement, thisItem, null);\n        }\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nasync function refreshLocation() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  const busArrivalTimeChartSize = querySize('location-bus-arrival-time-chart');\n  locationRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  locationRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  locationRefreshTimer_refreshing = true;\n  locationRefreshTimer_currentRequestID = generateIdentifier();\n  LocationUpdateTimerElement.setAttribute('refreshing', 'true');\n  LocationUpdateTimerElement.classList.remove('css_location_update_timer_slide_rtl');\n  document.addEventListener(locationRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateLocation(currentHashSet_hash, busArrivalTimeChartSize.width, busArrivalTimeChartSize.height, locationRefreshTimer_currentRequestID);\n  updateLocationField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (locationRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  locationRefreshTimer_lastUpdate = new Date().getTime();\n  if (locationRefreshTimer_dynamic) {\n    locationRefreshTimer_nextUpdate = Math.max(locationRefreshTimer_lastUpdate + locationRefreshTimer_minInterval, integration.dataUpdateTime + locationRefreshTimer_baseInterval / updateRate);\n  } else {\n    locationRefreshTimer_nextUpdate = locationRefreshTimer_lastUpdate + locationRefreshTimer_baseInterval;\n  }\n  locationRefreshTimer_dynamicInterval = Math.max(locationRefreshTimer_minInterval, locationRefreshTimer_nextUpdate - locationRefreshTimer_lastUpdate);\n  locationRefreshTimer_refreshing = false;\n  LocationUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nexport function streamLocation(): void {\n  refreshLocation()\n    .then(function () {\n      if (locationRefreshTimer_streaming) {\n        setTimeout(\n          function () {\n            streamLocation();\n          },\n          Math.max(locationRefreshTimer_minInterval, locationRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        locationRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (locationRefreshTimer_streaming) {\n        promptMessage('error', `${locationRefreshTimer_retryInterval / 1000}`);\n        setTimeout(function () {\n          streamLocation();\n        }, locationRefreshTimer_retryInterval);\n      } else {\n        locationRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openLocation(hash: IntegratedLocation['hash']): void {\n  pushPageHistory('Location');\n  logRecentView('location', hash);\n  currentHashSet_hash = hash;\n  locationSliding_initialIndex = 0;\n  locationSliding_groupStyles = {};\n  LocationField.setAttribute('displayed', 'true');\n  LocationGroupsElement.scrollLeft = 0;\n  LocationGroupsElement.focus();\n  setUpLocationFieldSkeletonScreen(hash);\n  if (!locationRefreshTimer_streaming) {\n    locationRefreshTimer_streaming = true;\n    if (!locationRefreshTimer_streamStarted) {\n      locationRefreshTimer_streamStarted = true;\n      streamLocation();\n    } else {\n      refreshLocation();\n    }\n  }\n  closePreviousPage();\n}\n\nexport function closeLocation(): void {\n  // revokePageHistory('Location');\n  LocationField.setAttribute('displayed', 'false');\n  locationRefreshTimer_streaming = false;\n  openPreviousPage();\n}\n\nexport function stretchLocationItem(itemElementID: string): void {\n  const itemElement = elementQuerySelector(LocationGroupsElement, `.css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const itemBodyElement = elementQuerySelector(itemElement, '.css_location_group_item_body');\n\n  const itemsElement = itemElement.parentElement as HTMLElement;\n\n  const elementsBelowItemElement = getElementsBelow(itemElement, 'css_location_group_item');\n  const elementsBelowLength = elementsBelowItemElement.length;\n\n  const itemsElementRect = itemsElement.getBoundingClientRect();\n  const itemElementRect = itemElement.getBoundingClientRect();\n\n  // const itemElementX = itemElementRect.left - itemsElementRect.left;\n  const itemElementY = itemElementRect.top - itemsElementRect.top;\n\n  const stretched = itemElement.getAttribute('stretched') === 'true' ? true : false;\n  const animation = itemElement.getAttribute('animation') === 'true' ? true : false;\n\n  if (animation) {\n    const pushDirection = stretched ? '2' : '1';\n\n    // Separate the elements from the document flow while keeping its position\n    itemElement.setAttribute('stretching', 'true');\n    // itemElement.style.setProperty('--b-cssvar-css-location-group-item-x', `${itemElementX}px`);\n    itemElement.style.setProperty('--b-cssvar-css-location-group-item-y', `${itemElementY}px`);\n\n    // Set push direction and push state\n    for (let i = 0; i < elementsBelowLength; i++) {\n      const thisItemElement = elementsBelowItemElement[i];\n      thisItemElement.setAttribute('push-direction', pushDirection);\n      thisItemElement.setAttribute('push-state', '1');\n    }\n\n    itemElement.addEventListener(\n      'transitionend',\n      function () {\n        // Reset the push direction and push state\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          thisItemElement.setAttribute('push-direction', '0');\n          thisItemElement.setAttribute('push-state', '0');\n        }\n        // Deposit the element\n        itemElement.setAttribute('stretching', 'false');\n      },\n      { once: true }\n    );\n\n    itemElement.addEventListener(\n      'transitionstart',\n      function () {\n        // Transition the elements below\n        for (let i = 0; i < elementsBelowLength; i++) {\n          const thisItemElement = elementsBelowItemElement[i];\n          thisItemElement.setAttribute('push-state', '2');\n        }\n      },\n      { once: true }\n    );\n  }\n\n  if (stretched) {\n    if (animation) {\n      itemBodyElement.addEventListener(\n        'transitionend',\n        function () {\n          itemBodyElement.setAttribute('displayed', 'false');\n        },\n        { once: true }\n      );\n    } else {\n      itemBodyElement.setAttribute('displayed', 'false');\n    }\n    itemElement.setAttribute('stretched', 'false');\n  } else {\n    itemBodyElement.setAttribute('displayed', 'true');\n    itemElement.setAttribute('stretched', 'true');\n  }\n}\n\nexport function switchLocationBodyTab(itemID: string, tabCode: number): void {\n  const itemElement = elementQuerySelector(LocationGroupsElement, `.css_location_group .css_location_group_items .css_location_group_item#${itemID}`);\n  const itemBodyElement = elementQuerySelector(itemElement, '.css_location_group_item_body');\n  const buttonsElement = elementQuerySelector(itemBodyElement, '.css_location_group_item_buttons');\n  const buttonElements = elementQuerySelectorAll(buttonsElement, '.css_location_group_item_button[highlighted=\"true\"][type=\"tab\"]');\n  for (const t of buttonElements) {\n    t.setAttribute('highlighted', 'false');\n  }\n  elementQuerySelector(buttonsElement, `.css_location_group_item_button[code=\"${tabCode}\"]`).setAttribute('highlighted', 'true');\n  switch (tabCode) {\n    case 0:\n      elementQuerySelector(itemElement, '.css_location_group_item_buses').setAttribute('displayed', 'true');\n      elementQuerySelector(itemElement, '.css_location_group_item_bus_arrival_times').setAttribute('displayed', 'false');\n      break;\n    case 1:\n      elementQuerySelector(itemElement, '.css_location_group_item_buses').setAttribute('displayed', 'false');\n      elementQuerySelector(itemElement, '.css_location_group_item_bus_arrival_times').setAttribute('displayed', 'true');\n      break;\n    default:\n      break;\n  }\n}\n","import { prepareForSearch, searchFor, SearchItem, SearchResult } from '../../data/search/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { drawRoundedRect } from '../../tools/graphic';\nimport { supportTouch } from '../../tools/index';\nimport { getCSSVariableValue } from '../../tools/style';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { openBus } from '../bus/index';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getBlankIconElement, getIconElement, setIcon } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { GeneratedElement, pushPageHistory, querySize, revokePageHistory, scrollDocumentToTop } from '../index';\nimport { openLocation } from '../location/index';\nimport { promptMessage } from '../prompt/index';\nimport { openRoute } from '../route/index';\n\nlet previousSearchResults: Array<SearchResult> = [];\n\nconst searchField = documentQuerySelector('.css_search_field');\nconst searchHeadElement = elementQuerySelector(searchField, '.css_search_head');\nconst searchBodyElement = elementQuerySelector(searchField, '.css_search_body');\nconst searchInputElement = elementQuerySelector(searchHeadElement, '.css_search_search_input #search_input') as HTMLInputElement;\nconst searchInputCanvasElement = elementQuerySelector(searchHeadElement, '.css_search_search_input canvas') as HTMLCanvasElement;\nconst searchTypeFilterButtonElement = elementQuerySelector(searchHeadElement, '.css_search_button_right');\nconst searchResultsElement = elementQuerySelector(searchBodyElement, '.css_search_results');\nconst searchKeyboardElement = elementQuerySelector(searchBodyElement, '.css_search_keyboard');\n\nconst searchInputCanvasContext = searchInputCanvasElement.getContext('2d');\nconst searchInputPlaceholder = '';\nconst searchInputCanvasScale = window.devicePixelRatio;\n\nconst padding: number = 15 * searchInputCanvasScale;\nconst cursorWidth: number = 1.8 * searchInputCanvasScale;\nconst cursorBorderRadius: number = 0.9 * searchInputCanvasScale;\nconst selectionHighlightBorderRadius: number = 4 * searchInputCanvasScale;\nconst lineHeight: number = 25 * searchInputCanvasScale;\nconst fontWeight: string = '400';\nconst fontSize: number = 20 * searchInputCanvasScale;\nconst fontFamily: string = '\"Noto Sans TC\", sans-serif';\n\nconst keyboardRows: Array<[string, string, string, string, string]> = [\n  ['', '', '1', '2', '3'],\n  ['', '', '4', '5', '6'],\n  ['', '', '7', '8', '9'],\n  ['', '', '', '0', '']\n];\n\nlet textColor: string = getCSSVariableValue('--b-cssvar-333333');\nlet placeholderTextColor: string = getCSSVariableValue('--b-cssvar-aeaeb2');\nlet cursorColor: string = getCSSVariableValue('--b-cssvar-main-color');\nlet textWidth: number = 0;\nlet textWidthToCursorStart: number = 0;\nlet selectedTextWidth: number = 0;\nlet selection: boolean = false;\nlet cursorOffset: number = 0;\nlet size = querySize('head-two-button');\nlet width = size.width * searchInputCanvasScale;\nlet height = size.height * searchInputCanvasScale;\nlet playingCursorAnimation: boolean = false;\nlet keyboardInitialized = false;\n\nexport function typeTextIntoInput(value): void {\n  const currentValue = getSearchInputValue();\n  const newValue = `${currentValue}${value}`;\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function deleteCharFromInput(): void {\n  const currentValue = getSearchInputValue();\n  const newValue = currentValue.substring(0, currentValue.length - 1);\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function emptyInput(): void {\n  searchInputElement.value = '';\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function openSystemKeyboard(event: Event): void {\n  event.preventDefault();\n  searchInputElement.focus();\n  scrollDocumentToTop();\n}\n\nfunction initializeKeyboard(): void {\n  if (!keyboardInitialized) {\n    keyboardInitialized = true;\n    const fragment = new DocumentFragment();\n    for (const row of keyboardRows) {\n      for (const item of row) {\n        const newButtonElement = document.createElement('button');\n        newButtonElement.classList.add('css_search_keyboard_key');\n        const eventName = supportTouch() ? 'touchstart' : 'mousedown';\n        switch (item) {\n          case '':\n            newButtonElement.addEventListener(eventName, deleteCharFromInput);\n            newButtonElement.appendChild(getIconElement('backspace'));\n            break;\n          case '':\n            newButtonElement.addEventListener(eventName, emptyInput);\n            newButtonElement.appendChild(document.createTextNode(item));\n            break;\n          case '':\n            newButtonElement.addEventListener(eventName, openSystemKeyboard);\n            newButtonElement.appendChild(getIconElement('keyboard'));\n            break;\n          default:\n            // Use an IIFE (Immediately Invoked Function Expression) to create a new scope for each item value. This ensures that the item variable is captured by value rather than by reference.\n            newButtonElement.addEventListener(\n              eventName,\n              (function (currentItem) {\n                return function () {\n                  typeTextIntoInput(currentItem);\n                };\n              })(item)\n            );\n            newButtonElement.appendChild(document.createTextNode(item));\n            break;\n        }\n\n        fragment.appendChild(newButtonElement);\n      }\n    }\n    searchKeyboardElement.append(fragment);\n  }\n}\n\nexport function openKeyboard(): void {\n  initializeKeyboard();\n  searchKeyboardElement.setAttribute('displayed', 'true');\n  playingCursorAnimation = true;\n  animateCursor();\n  updateSearchInput(-1, -1);\n}\n\nexport function closeKeyboard(): void {\n  searchKeyboardElement.setAttribute('displayed', 'false');\n  playingCursorAnimation = false;\n}\n\nexport function getSearchTypeFilterValue(): SearchItem['type'] | -1 {\n  return parseInt(searchTypeFilterButtonElement.getAttribute('type'));\n}\n\nexport function getSearchInputValue(): string {\n  return String(searchInputElement.value);\n}\n\nexport function updateSearchInput(cursorStart: number, cursorEnd: number): void {\n  let value = getSearchInputValue();\n  let empty = false;\n  if (value.length === 0) {\n    value = searchInputPlaceholder;\n    empty = true;\n    cursorStart = 0;\n    cursorEnd = 0;\n  } else {\n    if (cursorStart === -1 && cursorEnd === -1) {\n      cursorStart = value.length;\n      cursorEnd = cursorStart * 1;\n    }\n  }\n\n  size = querySize('head-two-button');\n  width = size.width * searchInputCanvasScale;\n  height = size.height * searchInputCanvasScale;\n  textColor = getCSSVariableValue('--b-cssvar-333333');\n  placeholderTextColor = getCSSVariableValue('--b-cssvar-aeaeb2');\n  cursorColor = getCSSVariableValue('--b-cssvar-main-color');\n\n  searchInputCanvasContext.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n  searchInputCanvasContext.textAlign = 'center';\n  searchInputCanvasContext.textBaseline = 'middle';\n\n  textWidth = searchInputCanvasContext.measureText(value).width;\n  textWidthToCursorStart = searchInputCanvasContext.measureText(value.substring(0, cursorStart)).width;\n  selectedTextWidth = searchInputCanvasContext.measureText(value.substring(cursorStart, cursorEnd)).width;\n  cursorOffset = empty ? 1 : Math.max(1, textWidthToCursorStart);\n\n  searchInputCanvasContext.clearRect(0, 0, width, height);\n\n  if (cursorStart === cursorEnd) {\n    selection = true;\n    searchInputCanvasContext.globalAlpha = 1;\n    searchInputCanvasContext.fillStyle = empty ? placeholderTextColor : textColor;\n    searchInputCanvasContext.fillText(value, textWidth / 2 + (Math.min(cursorOffset, width - padding) - cursorOffset), height / 2);\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, cursorWidth, lineHeight, cursorBorderRadius, cursorColor);\n  } else {\n    selection = false;\n    searchInputCanvasContext.globalAlpha = 0.27;\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, selectedTextWidth, lineHeight, selectionHighlightBorderRadius, cursorColor);\n    searchInputCanvasContext.globalAlpha = 1;\n    searchInputCanvasContext.fillStyle = empty ? placeholderTextColor : textColor;\n    searchInputCanvasContext.fillText(value, textWidth / 2 + (Math.min(cursorOffset, width - padding) - cursorOffset), height / 2);\n    searchInputCanvasContext.globalAlpha = 0.08;\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, selectedTextWidth, lineHeight, selectionHighlightBorderRadius, cursorColor);\n  }\n}\n\nexport function resizeSearchInputCanvas(): void {\n  size = querySize('head-two-button');\n  width = size.width;\n  height = size.height;\n  searchInputCanvasElement.width = width * searchInputCanvasScale;\n  searchInputCanvasElement.height = height * searchInputCanvasScale;\n  updateSearchInput(-1, -1);\n}\n\nfunction animateCursor(): void {\n  const x = performance.now();\n  const alpha = 1 - Math.pow(Math.sin((Math.PI * x) / 960), 4);\n  if (selection) {\n    searchInputCanvasContext.globalAlpha = alpha;\n    searchInputCanvasContext.clearRect(Math.min(cursorOffset, width - padding) - 1, 0, cursorWidth + 2, height);\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, cursorWidth, lineHeight, cursorBorderRadius, cursorColor);\n  }\n  if (playingCursorAnimation) {\n    window.requestAnimationFrame(animateCursor);\n  }\n}\n\nfunction generateElementOfSearchResultItem(): GeneratedElement {\n  const searchResultItemElement = document.createElement('div');\n  searchResultItemElement.classList.add('css_search_search_result');\n\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_search_search_result_name');\n\n  const typeElement = document.createElement('div');\n  typeElement.classList.add('css_search_search_result_type');\n  typeElement.appendChild(getBlankIconElement());\n\n  searchResultItemElement.appendChild(typeElement);\n  searchResultItemElement.appendChild(nameElement);\n  return {\n    element: searchResultItemElement,\n    id: ''\n  };\n}\n\nexport function updateSearchResult(): void {\n  const typeToIcon: Array<MaterialSymbols> = ['route', 'location_on', 'directions_bus'];\n\n  function updateItem(element: HTMLElement, currentItem: SearchResult, previousItem: SearchResult | null): void {\n    function updateTypeIcon(item: SearchResult, element: HTMLElement): void {\n      const thisSearchResultTypeElement = elementQuerySelector(element, '.css_search_search_result_type');\n      setIcon(thisSearchResultTypeElement, typeToIcon[item.item.type]);\n    }\n\n    function updateName(item: SearchResult, element: HTMLElement): void {\n      const nameElement = elementQuerySelector(element, '.css_search_search_result_name');\n      nameElement.innerText = item.item.n;\n    }\n\n    function updateClickHandler(item: SearchResult, element: HTMLElement): void {\n      switch (item.item.type) {\n        case 0:\n          element.onclick = function () {\n            openRoute(item.item.id as number, item.item.pid);\n          };\n          break;\n        case 1:\n          element.onclick = function () {\n            openLocation(item.item.hash);\n          };\n          break;\n        case 2:\n          element.onclick = function () {\n            openBus(item.item.id as number);\n          };\n          break;\n        default:\n          break;\n      }\n    }\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.item.type !== previousItem.item.type) {\n        updateTypeIcon(currentItem, element);\n      }\n      if (currentItem.item.id !== previousItem.item.id) {\n        updateName(currentItem, element);\n        updateClickHandler(currentItem, element);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateTypeIcon(currentItem, element);\n      updateName(currentItem, element);\n      updateClickHandler(currentItem, element);\n    }\n  }\n\n  const currentType = getSearchTypeFilterValue();\n  const currentValue = getSearchInputValue();\n  if (!containPhoneticSymbols(currentValue)) {\n    const searchResults = searchFor(currentValue, currentType, 30);\n    const searchResultLength = searchResults.length;\n    const currentItemCapacity = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result').length;\n    if (searchResultLength !== currentItemCapacity) {\n      const difference = currentItemCapacity - searchResultLength;\n      if (difference < 0) {\n        const fragment = new DocumentFragment();\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const newElement = generateElementOfSearchResultItem();\n          fragment.appendChild(newElement.element);\n        }\n        searchResultsElement.appendChild(fragment);\n      } else {\n        const searchResultElements2 = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const itemIndex = currentItemCapacity - 1 - o;\n          searchResultElements2[itemIndex].remove();\n        }\n      }\n    }\n\n    const searchResultElements = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result');\n    for (let i = 0; i < searchResultLength; i++) {\n      const previousItem = previousSearchResults[i];\n      const currentItem = searchResults[i];\n      const thisItemElement = searchResultElements[i];\n      if (previousItem) {\n        updateItem(thisItemElement, currentItem, previousItem);\n      } else {\n        updateItem(thisItemElement, currentItem, null);\n      }\n    }\n    previousSearchResults = searchResults;\n  }\n}\n\nexport function switchSearchTypeFilter(): void {\n  const currentType = getSearchTypeFilterValue();\n  let newType: number = -1;\n  if (currentType >= -1 && currentType < 2) {\n    newType = currentType + 1;\n  } else {\n    newType = -1;\n  }\n  const icons: Array<MaterialSymbols> = ['filter_list', 'route', 'location_on', 'directions_bus'];\n  setIcon(searchTypeFilterButtonElement, icons[newType + 1]);\n  searchTypeFilterButtonElement.setAttribute('type', newType.toString());\n  updateSearchResult();\n}\n\nexport function openSearch(): void {\n  if (dataDownloadCompleted) {\n    pushPageHistory('Search');\n    searchField.setAttribute('displayed', 'true');\n    openKeyboard();\n    prepareForSearch();\n  } else {\n    promptMessage('download_for_offline', '');\n  }\n}\n\nexport function closeSearch(): void {\n  revokePageHistory('Search');\n  closeKeyboard();\n  searchField.setAttribute('displayed', 'false');\n}\n","import { FolderWithContentArray, listFoldersWithContent } from '../folder/index';\nimport { listPersonalSchedules, PersonalScheduleArray } from '../personal-schedule/index';\nimport { listRecentViews, RecentViewArray } from '../recent-views/index';\nimport { listSettingsWithOptions, SettingsWithOptionsArray } from '../settings/index';\n\nexport interface ExportedDataVersion1 {\n  time: string;\n  version: 1;\n  folders: FolderWithContentArray;\n}\n\nexport interface ExportedDataVersion2 {\n  time: string;\n  version: 2;\n  folders: FolderWithContentArray;\n  settings: SettingsWithOptionsArray;\n}\n\nexport interface ExportedDataVersion3 {\n  time: string;\n  version: 3;\n  folders: FolderWithContentArray;\n  settings: SettingsWithOptionsArray;\n  personal_schedules: PersonalScheduleArray;\n}\n\nexport interface ExportedDataVersion4 {\n  time: string;\n  version: 4;\n  folders: FolderWithContentArray;\n  settings: SettingsWithOptionsArray;\n  personal_schedules: PersonalScheduleArray;\n  recent_views: RecentViewArray;\n}\n\nexport type ExportedData = ExportedDataVersion1 | ExportedDataVersion2 | ExportedDataVersion3 | ExportedDataVersion4;\n\nexport async function exportData(): Promise<string> {\n  const foldersWithContent = await listFoldersWithContent();\n  const settings = listSettingsWithOptions();\n  const personalSchedules = await listPersonalSchedules();\n  const RecentViews = await listRecentViews();\n  let result: ExportedDataVersion4 = {};\n  result.time = new Date().toISOString();\n  result.version = 4;\n  result.folders = foldersWithContent;\n  result.settings = settings;\n  result.personal_schedules = personalSchedules;\n  result.recent_views = RecentViews;\n  return JSON.stringify(result);\n}\n","import { openDataUsage } from '../../interface/data-usage/index';\nimport { openFolderManager } from '../../interface/folder-manager/index';\nimport { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { openNotificationScheduleManager } from '../../interface/notification-schedule-manager/index';\nimport { openPersonalScheduleManager } from '../../interface/personal-schedule-manager/index';\nimport { downloadExportFile, openFileToImportData, showPromptToAskForPersistentStorage, viewSourceCodeOfCurrentVersion, viewGitHubRepository } from '../../interface/settings/index';\nimport { openSettingsOptions } from '../../interface/settings/options';\nimport { openStorage } from '../../interface/storage/index';\nimport { dateToRelativeTime, formatTime } from '../../tools/time';\nimport { getNotificationClientStatus } from '../notification/index';\nimport { isStoragePersistent, lfGetItem, lfListItemKeys, lfSetItem } from '../storage/index';\nimport { getHTMLVersionBranchName, getHTMLVersionHash, getHTMLVersionTimeStamp } from './version';\n\ntype SettingType = 'select' | 'page' | 'info' | 'action';\n\nexport interface SettingSelectOptionStringValue {\n  type: 0;\n  string: string;\n}\n\nexport interface SettingSelectOptionNumberValue {\n  type: 1;\n  number: number;\n}\n\nexport interface SettingSelectOptionBooleanValue {\n  type: 2;\n  boolean: boolean;\n}\n\nexport interface SettingSelectOptionRefreshIntervalValue {\n  type: 3;\n  baseInterval: number;\n  dynamic: boolean;\n}\n\nexport type SettingSelectOptionValue = SettingSelectOptionStringValue | SettingSelectOptionNumberValue | SettingSelectOptionBooleanValue | SettingSelectOptionRefreshIntervalValue;\n\nexport interface SettingSelectOption {\n  name: string;\n  value: SettingSelectOptionValue;\n  resourceIntensive: boolean;\n  powerSavingAlternative: -1 | number; // index of the option to redirect to when power saving mode is enabled\n}\n\nexport type SettingSelectOptions = Array<SettingSelectOption>;\n\nexport interface SettingSelect {\n  key: string;\n  name: string;\n  icon: MaterialSymbols;\n  status: string;\n  action: Function;\n  type: 'select';\n  default_option: number;\n  option: number;\n  options: SettingSelectOptions;\n  description: string;\n}\n\nexport interface SettingPage {\n  key: string;\n  name: string;\n  icon: MaterialSymbols;\n  status: string;\n  type: 'page';\n  action: Function;\n  description: string;\n}\n\nexport interface SettingInfo {\n  key: string;\n  name: string;\n  icon: MaterialSymbols;\n  status: string;\n  type: 'info';\n  action: Function;\n  description: string;\n}\n\nexport interface SettingAction {\n  key: string;\n  name: string;\n  icon: MaterialSymbols;\n  status: string;\n  type: 'action';\n  action: Function;\n  description: string;\n}\n\nexport type Setting = SettingSelect | SettingPage | SettingInfo | SettingAction;\n\nexport type SettingsObject = { [key: string]: Setting };\n\nexport type SettingsArray = Array<Setting>;\n\nexport interface SettingWithOption {\n  key: string;\n  option: number;\n}\n\nexport type SettingsWithOptionsArray = Array<SettingWithOption>;\n\nconst SettingKeys: Array<string> = ['time_formatting_mode', 'refresh_interval', 'display_user_location', 'display_user_orientation', 'location_labels', 'proxy', 'folder', 'personal_schedule', 'notification', 'playing_animation', 'power_saving', 'data_usage', 'storage', 'persistent_storage', 'export', 'import', 'version', 'branch', 'last_update_date', 'github'];\n\nlet Settings: SettingsObject = {\n  time_formatting_mode: {\n    key: 'time_formatting_mode',\n    name: '',\n    icon: 'glyphs',\n    status: '',\n    action: function () {\n      openSettingsOptions('time_formatting_mode');\n    },\n    type: 'select',\n    default_option: 0,\n    option: 0,\n    options: [\n      {\n        name: `${formatTime(11, 3)}/${formatTime(61, 3)}/${formatTime(60 * 61 + 1, 3)}`,\n        value: {\n          type: 1,\n          number: 3\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      },\n      {\n        name: `${formatTime(11, 2)}/${formatTime(61, 2)}/${formatTime(60 * 61 + 1, 2)}`,\n        value: {\n          type: 1,\n          number: 2\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      },\n      {\n        name: `${formatTime(11, 1)}/${formatTime(61, 1)}/${formatTime(60 * 61 + 1, 1)}`,\n        value: {\n          type: 1,\n          number: 1\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      },\n      {\n        name: `${formatTime(11, 0)}/${formatTime(61, 0)}/${formatTime(60 * 61 + 1, 0)}`,\n        value: {\n          type: 1,\n          number: 0\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      }\n    ],\n    description: ''\n  },\n  refresh_interval: {\n    key: 'refresh_interval',\n    name: '',\n    icon: 'pace',\n    status: '',\n    action: function () {\n      openSettingsOptions('refresh_interval');\n    },\n    type: 'select',\n    default_option: 0,\n    option: 0,\n    options: [\n      {\n        name: '',\n        value: {\n          baseInterval: 15 * 1000,\n          dynamic: true,\n          type: 3\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 2\n      },\n      {\n        name: '10',\n        value: {\n          baseInterval: 10 * 1000,\n          dynamic: false,\n          type: 3\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 2\n      },\n      {\n        name: '20',\n        value: {\n          baseInterval: 20 * 1000,\n          dynamic: false,\n          type: 3\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 3\n      },\n      {\n        name: '30',\n        value: {\n          baseInterval: 30 * 1000,\n          dynamic: false,\n          type: 3\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 4\n      },\n      {\n        name: '40',\n        value: {\n          baseInterval: 40 * 1000,\n          dynamic: false,\n          type: 3\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 5\n      },\n      {\n        name: '50',\n        value: {\n          baseInterval: 50 * 1000,\n          dynamic: false,\n          type: 3\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 6\n      },\n      {\n        name: '60',\n        value: {\n          baseInterval: 60 * 1000,\n          dynamic: false,\n          type: 3\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 6\n      }\n    ],\n    description: ''\n  },\n  display_user_location: {\n    key: 'display_user_location',\n    name: '',\n    icon: 'near_me',\n    status: '',\n    action: function () {\n      openSettingsOptions('display_user_location');\n    },\n    type: 'select',\n    default_option: 1,\n    option: 1,\n    options: [\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: true\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 1\n      },\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: false\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      }\n    ],\n    description: ''\n  },\n  display_user_orientation: {\n    key: 'display_user_orientation',\n    name: '',\n    icon: 'explore',\n    status: '',\n    action: function () {\n      openSettingsOptions('display_user_orientation');\n    },\n    type: 'select',\n    default_option: 1,\n    option: 1,\n    options: [\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: true\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 1\n      },\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: false\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      }\n    ],\n    description: ''\n  },\n  location_labels: {\n    key: 'location_labels',\n    name: '',\n    icon: 'tag',\n    status: '',\n    action: function () {\n      openSettingsOptions('location_labels');\n    },\n    type: 'select',\n    default_option: 0,\n    option: 0,\n    options: [\n      {\n        name: '',\n        value: {\n          type: 0,\n          string: 'directions'\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      },\n      {\n        name: '',\n        value: {\n          type: 0,\n          string: 'address'\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      },\n      {\n        name: '',\n        value: {\n          type: 0,\n          string: 'letters'\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      }\n    ],\n    description: ''\n  },\n  proxy: {\n    key: 'proxy',\n    name: '',\n    icon: 'router',\n    status: '',\n    action: function () {\n      openSettingsOptions('proxy');\n    },\n    type: 'select',\n    default_option: 1,\n    option: 1,\n    options: [\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: true\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      },\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: false\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      }\n    ],\n    description: ''\n  },\n  folder: {\n    key: 'folder',\n    name: '',\n    icon: 'folder',\n    status: '',\n    type: 'page',\n    action: openFolderManager,\n    description: ''\n  },\n  personal_schedule: {\n    key: 'personal_schedule',\n    name: '',\n    icon: 'calendar_view_day',\n    status: '',\n    action: openPersonalScheduleManager,\n    type: 'page',\n    description: ''\n  },\n  notification: {\n    key: 'notification',\n    name: '',\n    icon: 'notifications',\n    status: '',\n    action: openNotificationScheduleManager,\n    type: 'page',\n    description: ''\n  },\n  playing_animation: {\n    key: 'playing_animation',\n    name: '',\n    icon: 'animation',\n    description: '',\n    status: '',\n    type: 'select',\n    action: function () {\n      openSettingsOptions('playing_animation');\n    },\n    default_option: 0,\n    option: 0,\n    options: [\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: true\n        },\n        resourceIntensive: true,\n        powerSavingAlternative: 1\n      },\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: false\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      }\n    ]\n  },\n  power_saving: {\n    key: 'power_saving',\n    name: '',\n    icon: 'battery_low',\n    description: '',\n    status: '',\n    type: 'select',\n    action: function () {\n      openSettingsOptions('power_saving');\n    },\n    default_option: 1,\n    option: 1,\n    options: [\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: true\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      },\n      {\n        name: '',\n        value: {\n          type: 2,\n          boolean: false\n        },\n        resourceIntensive: false,\n        powerSavingAlternative: -1\n      }\n    ]\n  },\n  data_usage: {\n    key: 'data_usage',\n    name: '',\n    icon: 'bigtop_updates',\n    status: '',\n    type: 'page',\n    action: openDataUsage,\n    description: ''\n  },\n  storage: {\n    key: 'storage',\n    name: '',\n    icon: 'database',\n    status: '',\n    type: 'page',\n    action: openStorage,\n    description: ''\n  },\n  persistent_storage: {\n    key: 'persistent_storage',\n    name: '',\n    icon: 'storage',\n    status: '',\n    action: showPromptToAskForPersistentStorage,\n    type: 'action',\n    description: ''\n  },\n  export: {\n    key: 'export',\n    name: '',\n    icon: 'upload',\n    status: '',\n    type: 'action',\n    action: downloadExportFile,\n    description: ''\n  },\n  import: {\n    key: 'import',\n    name: '',\n    icon: 'download',\n    status: '',\n    type: 'action',\n    action: openFileToImportData,\n    description: ''\n  },\n  version: {\n    key: 'version',\n    name: '',\n    icon: 'commit',\n    status: '',\n    type: 'info',\n    action: viewSourceCodeOfCurrentVersion,\n    description: ''\n  },\n  branch: {\n    key: 'branch',\n    name: '',\n    icon: 'rebase',\n    status: '',\n    type: 'info',\n    action: function () {},\n    description: ''\n  },\n  last_update_date: {\n    key: 'last_update_date',\n    name: '',\n    icon: 'update',\n    status: '',\n    type: 'info',\n    action: function () {},\n    description: ''\n  },\n  github: {\n    key: 'github',\n    name: 'GitHub',\n    icon: 'book_2',\n    status: '@EricHsia7/bus',\n    type: 'info',\n    action: viewGitHubRepository,\n    description: ''\n  }\n};\n\nexport async function initializeSettings(): Promise<boolean> {\n  const userSettings = await lfListItemKeys(1);\n  for (const key of userSettings) {\n    if (SettingKeys.indexOf(key) > -1) {\n      const userSetting = await lfGetItem(1, key);\n      if (userSetting !== null) {\n        if (Settings[key].type === 'select') {\n          const userSettingOption = parseInt(userSetting);\n          Settings[key].option = userSettingOption;\n        }\n      } else {\n        if (Settings[key].type === 'select') {\n          Settings[key].option = Settings[key].default_option;\n        }\n      }\n    }\n  }\n  return true;\n}\n\nexport async function listSettings(): Promise<SettingsArray> {\n  const result: SettingsArray = [];\n  for (const key in Settings) {\n    let item = Settings[key];\n    switch (item.type) {\n      case 'select':\n        item.status = item.options[item.option].name;\n        break;\n      case 'page':\n        switch (key) {\n          case 'notification':\n            item.status = getNotificationClientStatus() ? '' : '';\n            break;\n          default:\n            item.status = '';\n            break;\n        }\n        break;\n      case 'action':\n        item.status = '';\n        if (key === 'persistent_storage') {\n          item.status = (await isStoragePersistent()) ? '' : '';\n        }\n        break;\n      case 'info':\n        if (key === 'version') {\n          item.status = getHTMLVersionHash();\n        }\n        if (key === 'branch') {\n          item.status = getHTMLVersionBranchName();\n        }\n        if (key === 'last_update_date') {\n          const date = new Date(getHTMLVersionTimeStamp());\n          item.status = dateToRelativeTime(date);\n        }\n        break;\n      default:\n        break;\n    }\n    result.push(item);\n  }\n  return result;\n}\n\nexport function listSettingsWithOptions(): SettingsWithOptionsArray {\n  let result: SettingsWithOptionsArray = [];\n  for (const key in Settings) {\n    if (SettingKeys.indexOf(key) > -1) {\n      if (Settings.hasOwnProperty(key)) {\n        if (Settings[key].type === 'select') {\n          const item: SettingWithOption = {\n            key: key,\n            option: Settings[key].option\n          };\n          result.push(item);\n        }\n      }\n    }\n  }\n  return result;\n}\n\nexport async function changeSettingOption(key: string, option: number): Promise<boolean> {\n  if (SettingKeys.indexOf(key) > -1) {\n    if (Settings.hasOwnProperty(key)) {\n      if (Settings[key].type === 'select') {\n        if (Settings[key].options[option] !== undefined && Settings[key].options[option] !== null) {\n          await lfSetItem(1, key, option);\n          Settings[key].option = option;\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\n\nexport function getSetting(key: string): Setting | undefined {\n  if (SettingKeys.indexOf(key) > -1) {\n    if (Settings.hasOwnProperty(key)) {\n      return Settings[key];\n    }\n  }\n}\n\nexport function getSettingOptionValue(key: string): SettingSelectOptionStringValue['string'] | SettingSelectOptionNumberValue['number'] | SettingSelectOptionBooleanValue['boolean'] | SettingSelectOptionRefreshIntervalValue {\n  if (SettingKeys.indexOf(key) > -1) {\n    if (Settings.hasOwnProperty(key)) {\n      const powerSavingSetting = Settings['power_saving'] as SettingSelect;\n      const powerSavingSettingValue = powerSavingSetting.options[powerSavingSetting.option].value as SettingSelectOptionBooleanValue;\n      const powerSavingSettingValueBoolean = powerSavingSettingValue.boolean;\n      const thisSetting = Settings[key] as SettingSelect;\n      let thisSettingOption = thisSetting.options[thisSetting.option];\n      if (powerSavingSettingValueBoolean) {\n        if (thisSettingOption.resourceIntensive) {\n          thisSettingOption = thisSetting.options[thisSettingOption.powerSavingAlternative];\n        }\n      }\n      const thisSettingValue = thisSettingOption.value;\n      switch (thisSettingValue.type) {\n        case 0:\n          return thisSettingValue.string as string;\n          break;\n        case 1:\n          return thisSettingValue.number as number;\n          break;\n        case 2:\n          return thisSettingValue.boolean as boolean;\n          break;\n        case 3:\n          return thisSettingValue as SettingSelectOptionRefreshIntervalValue;\n          break;\n        default:\n          return '' as string;\n          break;\n      }\n    }\n  }\n  return '';\n}\n","import { ExportedData } from '../export/index';\nimport { createFolder, FolderWithContentArray, saveToFolder, updateFolder } from '../folder/index';\nimport { createPersonalSchedule, getPersonalSchedule, PersonalScheduleArray, updatePersonalSchedule } from '../personal-schedule/index';\nimport { getRecentView, logRecentView, RecentViewArray } from '../recent-views/index';\nimport { changeSettingOption, getSetting, SettingsWithOptionsArray } from '../settings/index';\nimport { lfGetItem } from '../storage/index';\n\nexport async function importFolders(data: FolderWithContentArray): Promise<boolean> {\n  for (const FolderWithContent of data) {\n    const folder = FolderWithContent;\n    var update = false;\n    var creation = false;\n    const folderKey: string = `f_${folder.id}`;\n    const existingFolder: string = await lfGetItem(11, folderKey);\n    if (existingFolder) {\n      update = await updateFolder(folder.id, folder.name, folder.icon);\n    } else {\n      creation = await createFolder(folder.name, folder.icon);\n    }\n    if (update) {\n      for (const content of FolderWithContent.content) {\n        await saveToFolder(FolderWithContent.id, content);\n      }\n    }\n    if (creation) {\n      for (const content of FolderWithContent.content) {\n        await saveToFolder(creation, content);\n      }\n    }\n  }\n}\n\nexport async function importSettings(data: SettingsWithOptionsArray): Promise<boolean> {\n  for (const SettingWithOption of data) {\n    const existingSetting = getSetting(SettingWithOption.key);\n    if (existingSetting) {\n      if (existingSetting.type === 'select') {\n        await changeSettingOption(SettingWithOption.key, SettingWithOption.option);\n      }\n    }\n  }\n  return true;\n}\n\nexport async function importPersonalSchedules(data: PersonalScheduleArray): Promise<boolean> {\n  for (const PersonalSchedule of data) {\n    const existingPersonalSchedule = await getPersonalSchedule(PersonalSchedule.id);\n    if (existingPersonalSchedule) {\n      await updatePersonalSchedule(PersonalSchedule);\n    } else {\n      await createPersonalSchedule(PersonalSchedule.name, PersonalSchedule.period.start.hours, PersonalSchedule.period.start.minutes, PersonalSchedule.period.end.hours, PersonalSchedule.period.end.minutes, PersonalSchedule.days);\n    }\n  }\n  return true;\n}\n\nexport async function importRecentViews(data: RecentViewArray): Promise<boolean> {\n  for (const RecentView of data) {\n    switch (RecentView.type) {\n      case 'route':\n        const existingRecentViewRoute = await getRecentView('route', RecentView.id);\n        if (!existingRecentViewRoute) {\n          await logRecentView(RecentView.type, RecentView.id);\n        }\n        break;\n      case 'location':\n        const existingRecentViewLocation = await getRecentView('location', RecentView.hash);\n        if (!existingRecentViewLocation) {\n          await logRecentView(RecentView.type, RecentView.hash);\n        }\n        break;\n      case 'bus':\n        const existingRecentViewBus = await getRecentView('bus', RecentView.id);\n        if (!existingRecentViewBus) {\n          await logRecentView(RecentView.type, RecentView.id);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  return true;\n}\n\nexport async function importData(data: string): Promise<boolean> {\n  const parsedData: ExportedData = JSON.parse(data);\n  switch (parsedData.version) {\n    case 1:\n      await importFolders(parsedData.folders);\n      return true;\n      break;\n    case 2:\n      await importFolders(parsedData.folders);\n      await importSettings(parsedData.settings);\n      return true;\n      break;\n    case 3:\n      await importFolders(parsedData.folders);\n      await importSettings(parsedData.settings);\n      await importPersonalSchedules(parsedData.personal_schedules);\n      return true;\n      break;\n    case 4:\n      await importFolders(parsedData.folders);\n      await importSettings(parsedData.settings);\n      await importPersonalSchedules(parsedData.personal_schedules);\n      await importRecentViews(parsedData.recent_views);\n      return true;\n      break;\n    default:\n      return false;\n      break;\n  }\n}\n","import { documentQuerySelector } from '../../tools/elements';\n\nfunction refreshPageWithTimeStamp(id: string, enforce: boolean = false): void {\n  // Get the URLSearchParams object from the current URL\n  const searchParams = new URLSearchParams(window.location.search);\n  // Set the 'timestamp' query parameter to the current timestamp\n  searchParams.set('v', id);\n  // Construct the new URL with updated query parameters\n  const newUrl = window.location.pathname + '?' + searchParams.toString();\n  if (enforce) {\n    // Redirect to the new URL\n    window.location.replace(newUrl);\n  } else {\n    history.replaceState(null, '', newUrl);\n  }\n}\n\ninterface AppVersion {\n  build: number;\n  hash: string;\n  full_hash: string;\n  branch_name: string; // branch name of the code base\n  timestamp: string; // timestamp in ISO fromat\n}\n\nasync function getAppVersion(): Promise<AppVersion | false> {\n  try {\n    const response = await fetch(`./version.json?_=${new Date().getTime()}`, {\n      cache: 'no-store'\n    });\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    return response.json();\n  } catch (error) {\n    console.error('There was a problem with the fetch operation:', error);\n    return false;\n  }\n}\n\nexport function getHTMLVersionHash(): string {\n  return documentQuerySelector('head meta[name=\"version-hash\"]').getAttribute('content');\n}\n\nexport function getHTMLVersionFullHash(): string {\n  return documentQuerySelector('head meta[name=\"version-full-hash\"]').getAttribute('content');\n}\n\nexport function getHTMLVersionBranchName(): string {\n  return documentQuerySelector('head meta[name=\"version-branch-name\"]').getAttribute('content');\n}\n\nexport function getTreeURLOfCurrentVersion(): string {\n  const currentFullHash = getHTMLVersionFullHash();\n  return `https://github.com/EricHsia7/bus/tree/${currentFullHash}`;\n}\n\nexport function getHTMLVersionTimeStamp(): string {\n  return documentQuerySelector('head meta[name=\"version-time-stamp\"]').getAttribute('content');\n}\n\ntype AppVersionStatus = 'fetchError' | 'unknownError' | 'refreshing' | 'ok';\n\nexport async function checkAppVersion(): Promise<AppVersionStatus> {\n  const appVersion = await getAppVersion();\n  if (typeof appVersion === 'boolean') {\n    if (appVersion === false) {\n      return 'fetchError';\n    } else {\n      return 'unknownError';\n    }\n  } else {\n    if (getHTMLVersionHash() !== appVersion.hash) {\n      refreshPageWithTimeStamp(appVersion.hash, true);\n      return 'refreshing';\n    } else {\n      refreshPageWithTimeStamp(appVersion.hash, false);\n      return 'ok';\n    }\n  }\n}\n","import { exportData } from '../../data/export/index';\nimport { importData } from '../../data/import/index';\nimport { listSettings, Setting } from '../../data/settings/index';\nimport { getTreeURLOfCurrentVersion } from '../../data/settings/version';\nimport { askForPersistentStorage } from '../../data/storage/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier, releaseFile } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst SettingsField = documentQuerySelector('.css_settings_field');\nconst SettingsBodyElement = elementQuerySelector(SettingsField, '.css_settings_body');\nconst SettingsElement = elementQuerySelector(SettingsBodyElement, '.css_settings');\n\nfunction generateElementOfItem(item: Setting): GeneratedElement {\n  const settingElement = document.createElement('div');\n  settingElement.classList.add('css_setting');\n  settingElement.setAttribute('type', item.type);\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_setting_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_setting_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_setting_status');\n  statusElement.appendChild(document.createTextNode(item.status));\n\n  // Arrow\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_setting_arrow');\n  const arrowSpanElement = document.createElement('span');\n  arrowSpanElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(arrowSpanElement);\n\n  // Event handler (lambda)\n  if (typeof item.action === 'function') {\n    settingElement.onclick = function () {\n      item.action();\n    };\n  } else if (typeof item.action === 'string') {\n    settingElement.setAttribute('onclick', item.action);\n  }\n\n  // Assemble\n  settingElement.appendChild(iconElement);\n  settingElement.appendChild(nameElement);\n  settingElement.appendChild(statusElement);\n  settingElement.appendChild(arrowElement);\n\n  return {\n    element: settingElement,\n    id: ''\n  };\n}\n\nasync function initializeSettingsField() {\n  const list = await listSettings();\n  SettingsElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of list) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement.element);\n  }\n  SettingsElement.append(fragment);\n}\n\nexport function openSettings(): void {\n  pushPageHistory('Settings');\n  SettingsField.setAttribute('displayed', 'true');\n  initializeSettingsField();\n}\n\nexport function closeSettings(): void {\n  revokePageHistory('Settings');\n  SettingsField.setAttribute('displayed', 'false');\n}\n\nexport async function downloadExportFile() {\n  promptMessage('manufacturing', '');\n  const content = await exportData();\n  releaseFile(content, 'application/json', 'bus-export.json');\n}\n\nexport function openFileToImportData(): void {\n  const identifier = generateIdentifier();\n  const fileInput = document.createElement('input');\n  fileInput.setAttribute('type', 'file');\n  fileInput.setAttribute('accept', 'application/json');\n  fileInput.setAttribute('name', identifier);\n  fileInput.id = identifier;\n  fileInput.classList.add('css_import_file_input');\n  fileInput.addEventListener(\n    'change',\n    function (event) {\n      // Check if a file is selected\n      if (event.target.files.length === 0) {\n        documentQuerySelector(`body #${identifier}`).remove();\n      } else {\n        // Get the first file selected by the user\n        const file = event.target.files[0];\n        const reader = new FileReader();\n\n        // When the file is successfully read\n        reader.onload = function (e) {\n          // Get the file content as text\n          const fileTextContent = e.target.result;\n\n          // Import the data\n          importData(fileTextContent).then((f) => {\n            if (f) {\n              promptMessage('check_circle', '');\n            } else {\n              promptMessage('error', '');\n            }\n            documentQuerySelector(`body #${identifier}`).remove();\n          });\n        };\n\n        // Read the file as text\n        reader.readAsText(file);\n      }\n    },\n    { once: true }\n  );\n  fileInput.addEventListener(\n    'cancel',\n    function () {\n      documentQuerySelector(`body #${identifier}`).remove();\n    },\n    { once: true }\n  );\n\n  document.body.append(fileInput);\n  documentQuerySelector(`body #${identifier}`).click();\n}\n\nexport function viewSourceCodeOfCurrentVersion(): void {\n  const url = getTreeURLOfCurrentVersion();\n  window.open(url);\n}\n\nexport function viewGitHubRepository(): void {\n  const url = 'https://github.com/EricHsia7/bus';\n  window.open(url);\n}\n\nexport function showPromptToAskForPersistentStorage(): void {\n  askForPersistentStorage().then((e) => {\n    switch (e) {\n      case 'granted':\n        promptMessage('check_circle', '');\n        break;\n      case 'denied':\n        promptMessage('cancel', '');\n        break;\n      case 'unsupported':\n        promptMessage('warning', '');\n        break;\n      default:\n        promptMessage('error', '');\n        break;\n    }\n  });\n}\n","import { promptMessage } from '../interface/prompt/index';\n\nexport const md5 = require('md5');\nexport const { sha512 } = require('js-sha512');\n\nexport function compareThings(a: any, b: any): boolean {\n  function anyToString(any: any): string {\n    return JSON.stringify({ e: any });\n  }\n  const ax = anyToString(a);\n  const bx = anyToString(b);\n  const length: number = 32;\n  const axLength: number = ax.length;\n  const bxLength: number = bx.length;\n  if (axLength === bxLength) {\n    if (axLength > length || bxLength > length) {\n      const hash_a: string = md5(ax);\n      const hash_b: string = md5(bx);\n\n      let equal: boolean = true;\n      for (let i = 0; i < 8; i++) {\n        const a_i: string = hash_a.charAt(i);\n        const b_i: string = hash_b.charAt(i);\n        if (a_i === b_i) {\n          continue;\n        } else {\n          equal = false;\n          break;\n        }\n      }\n      return equal;\n    } else {\n      if (ax === bx) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  } else {\n    return false;\n  }\n}\n\nexport function generateIdentifier(): string {\n  const chars = [\n    [48, 10], // 0-9: 48 - 57\n    [97, 26], // a-z: 97 - 122\n    [65, 26] // A-Z: 65 - 90\n  ];\n\n  let randomNumber1 = Math.floor(Math.random() * 0x10000000);\n  let randomNumber2 = Math.floor(Math.random() * 0x10000000);\n\n  const result = new Uint8Array(17);\n  result[0] = 95;\n  for (let i = 16; i > 0; i--) {\n    const n = randomNumber2 % 3;\n    const range = chars[n];\n    const code = range[0] + (randomNumber1 % range[1]);\n    result[i] = code;\n    randomNumber1 >>>= 1;\n    randomNumber2 >>>= 1;\n  }\n\n  return String.fromCharCode.apply(null, result);\n}\n\nexport function getNoCacheParameter(interval: number): string {\n  const time = new Date().getTime();\n  const number = (time / interval) | 0;\n  const string = number.toString(16);\n  return string;\n}\n\nexport function downloadBlobFile(blob: Blob, fileName: string, timeout: number = 32 * 1000): string {\n  const blobURL = URL.createObjectURL(blob);\n  const downloadLink = document.createElement('a');\n  downloadLink.href = blobURL;\n  downloadLink.download = fileName;\n  document.body.appendChild(downloadLink);\n  downloadLink.click();\n  downloadLink.remove();\n  setTimeout(() => {\n    URL.revokeObjectURL(blobURL);\n  }, timeout);\n  return blobURL;\n}\n\nexport function releaseFile(content: string, type: string = 'application/json', fileName: string): void {\n  const blob = new Blob([content], { type: type });\n  const fileObj = new File([blob], fileName, { type: type });\n  if (navigator.canShare && navigator.canShare({ files: [fileObj] })) {\n    navigator\n      .share({\n        files: [fileObj]\n      })\n      .catch((error) => {\n        promptMessage('download', '', {\n          text: '',\n          action: function () {\n            downloadBlobFile(blob, fileName);\n          }\n        });\n      });\n  } else {\n    downloadBlobFile(blob, fileName);\n  }\n}\n\nexport function isRunningStandalone(): boolean {\n  return window.matchMedia('(display-mode: standalone)').matches;\n}\n\nexport function supportTouch(): boolean {\n  if ('ontouchstart' in window || navigator.maxTouchPoints) {\n    // Touch events are supported\n    return true;\n  } else {\n    // Touch events are not supported\n    return false;\n  }\n}\n\nexport function booleanToString(x: boolean): 'true' | 'false' {\n  if (typeof x === 'boolean') {\n    if (x) {\n      return 'true';\n    } else {\n      return 'false';\n    }\n  }\n}\n\nexport function isValidURL(string: string): boolean {\n  try {\n    new URL(string);\n    return true; // If no error is thrown, it's a valid URL\n  } catch (_) {\n    return false; // Invalid URL\n  }\n}\n\nexport function nearestPowerOf2(x: number): number {\n  return 1 << (31 - Math.clz32(x));\n}\n","import { documentQuerySelector } from '../tools/elements';\nimport { isRunningStandalone } from '../tools/index';\nimport { closeBus, openBus } from './bus/index';\nimport { closeFolderCreator, openFolderCreator } from './folder-creator/index';\nimport { closeFolderEditor, openFolderEditor } from './folder-editor/index';\nimport { closeFolderManager, openFolderManager } from './folder-manager/index';\nimport { closePersonalScheduleEditor, openPersonalScheduleEditor } from './personal-schedule-editor/index';\nimport { closePersonalScheduleManager, openPersonalScheduleManager } from './personal-schedule-manager/index';\nimport { closeRegisterNotification, openRegisterNotification } from './register-notification/index';\nimport { closeSearch, openSearch } from './search/index';\nimport { closeSettings, openSettings } from './settings/index';\n\nconst SplashScreenElement = documentQuerySelector('.css_splash_screen');\nconst ErrorMessageElement = documentQuerySelector('.css_error_message');\n\nconst splashScreenTimer_minimalTimeOut = 100;\nconst splashScreenTimer_openTime = new Date().getTime();\n\ntype Page = 'Home' | 'FolderCreator' | 'FolderEditor' | 'FolderIconSelector' | 'FolderManager' | 'LocationDetails' | 'Location' | 'RouteDetails' | 'Route' | 'SaveToFolder' | 'Search' | 'Settings' | 'SettingsOptions' | 'DataUsage' | 'PersonalScheduleManager' | 'PersonalScheduleCreator' | 'PersonalScheduleEditor' | 'Bus' | 'RegisterNotification' | 'ScheduleNotification' | 'NotificationScheduleManager' | 'QRCode';\n\nlet pageHistory: Array<Page> = ['Home'];\n\nexport function pushPageHistory(page: Page): void {\n  const pageHistoryLength = pageHistory.length;\n  const lastPage = pageHistory[pageHistoryLength - 1];\n  if (lastPage !== page) {\n    pageHistory.push(page);\n  }\n}\n\nexport function revokePageHistory(page: Page): void {\n  if (pageHistory.indexOf(page) > -1) {\n    const pageHistoryLength = pageHistory.length;\n    if (pageHistory[pageHistoryLength - 1] === page) {\n      pageHistory.pop();\n    }\n  }\n}\n\nexport function closePreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        closeFolderCreator();\n        break;\n      case 'FolderEditor':\n        closeFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        closeFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        closeSearch();\n        break;\n      case 'Settings':\n        closeSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        closePersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        closePersonalScheduleEditor();\n        break;\n      case 'Bus':\n        closeBus();\n        break;\n      case 'RegisterNotification':\n        closeRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function openPreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    pageHistory.pop();\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        openFolderCreator();\n        break;\n      case 'FolderEditor':\n        openFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        openFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        openSearch();\n        break;\n      case 'Settings':\n        openSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        openPersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        openPersonalScheduleEditor();\n        break;\n      case 'Bus':\n        openBus();\n        break;\n      case 'RegisterNotification':\n        openRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function setSplashScreenIconOffsetY(): void {\n  let offset = 0;\n  if (isRunningStandalone()) {\n    offset = (-1 * (window.outerHeight - window.innerHeight)) / 2;\n  }\n  documentQuerySelector('.css_splash_screen svg.css_splash_screen_icon').style.setProperty('--b-cssvar-splash-screen-icon-offset-y', `${offset}px`);\n}\n\nexport function fadeOutSplashScreen(callback: Function): void {\n  function fadeOut() {\n    SplashScreenElement.classList.add('css_splash_screen_fade_out');\n    SplashScreenElement.addEventListener(\n      'animationend',\n      function () {\n        SplashScreenElement.setAttribute('displayed', 'false');\n        SplashScreenElement.classList.remove('css_splash_screen_fade_out');\n        if (typeof callback === 'function') {\n          callback();\n        }\n      },\n      { once: true }\n    );\n  }\n  const cureentTime = new Date().getTime();\n  if (cureentTime - splashScreenTimer_openTime < splashScreenTimer_minimalTimeOut) {\n    setTimeout(fadeOut, Math.max(1, cureentTime - splashScreenTimer_openTime));\n  } else {\n    fadeOut();\n  }\n}\n\nexport function showErrorMessage(): void {\n  ErrorMessageElement.setAttribute('displayed', 'true');\n}\n\nexport interface GeneratedElement {\n  element: HTMLElement;\n  id: string;\n}\n\nexport type GroupStyles = {\n  [key: string]: {\n    width: number;\n    offset: number;\n  };\n};\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\ntype SizeType = 'window' | 'head' | 'head-one-button' | 'head-two-button' | 'route-details-canvas' | 'route-bus-arrival-time-chart' | 'location-bus-arrival-time-chart';\n\nexport function querySize(type: SizeType): Size {\n  let width: number = 0;\n  let height: number = 0;\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n  switch (type) {\n    case 'window':\n      width = windowWidth;\n      height = windowHeight;\n      break;\n    case 'head':\n      width = windowWidth;\n      height = 55;\n      break;\n    case 'head-one-button':\n      width = windowWidth - 55;\n      height = 55;\n      break;\n    case 'head-two-button':\n      width = windowWidth - 55 * 2;\n      height = 55;\n      break;\n    case 'route-details-canvas':\n      width = windowWidth - 10 * 2 - 10 * 2;\n      height = 24 * 70;\n      break;\n    case 'route-bus-arrival-time-chart':\n      width = windowWidth - 45 - 15 - 20;\n      height = 75;\n      break;\n    case 'location-bus-arrival-time-chart':\n      width = windowWidth - 30 - 20;\n      height = 75;\n      break;\n    default:\n      width = 0;\n      height = 0;\n      break;\n  }\n  return {\n    width,\n    height\n  };\n}\n\nexport function scrollDocumentToTop(): void {\n  window.scrollTo({\n    top: 0,\n    behavior: 'instant'\n  });\n}\n","import { getDataUsageStats } from '../../data/analytics/data-usage/index';\nimport { convertBytes } from '../../tools/convert';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { dateToString } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory, querySize } from '../index';\n\nconst dataUsageField = documentQuerySelector('.css_data_usage_field');\nconst dataUsageBodyElement = elementQuerySelector(dataUsageField, '.css_data_usage_body');\nconst chartElement = elementQuerySelector(dataUsageBodyElement, '.css_data_usage_chart');\nconst statisticsElement = elementQuerySelector(dataUsageBodyElement, '.css_data_usage_statistics');\nconst totalDataUsageElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"total-data-usage\"] .css_data_usage_statistics_item_value');\nconst maxDataUsagePerMinuteElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"max-data-usage-per-minute\"] .css_data_usage_statistics_item_value');\nconst minDataUsagePerMinuteElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"min-data-usage-per-minute\"] .css_data_usage_statistics_item_value');\nconst startTimeElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"start-time\"] .css_data_usage_statistics_item_value');\nconst endTimeElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"end-time\"] .css_data_usage_statistics_item_value');\n\nasync function initializeDataUsage() {\n  const WindowSize = querySize('window');\n  const graphWidth = WindowSize.width;\n  const graphHeight = Math.min((5 / 18) * graphWidth, WindowSize.height * 0.33);\n  const stats = await getDataUsageStats(graphWidth, graphHeight, 20);\n  totalDataUsageElement.innerText = convertBytes(stats.stats.sum);\n  maxDataUsagePerMinuteElement.innerText = convertBytes(stats.stats.max);\n  minDataUsagePerMinuteElement.innerText = convertBytes(stats.stats.min);\n  startTimeElement.innerText = dateToString(stats.period.start, 'YYYY-MM-DD');\n  endTimeElement.innerText = dateToString(stats.period.end, 'YYYY-MM-DD');\n  chartElement.innerHTML = stats.chart;\n}\n\nexport function openDataUsage(): void {\n  pushPageHistory('DataUsage');\n  dataUsageField.setAttribute('displayed', 'true');\n  initializeDataUsage();\n  closePreviousPage();\n}\n\nexport function closeDataUsage(): void {\n  // revokePageHistory('DataUsage');\n  dataUsageField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n","import { NotificationClientID, NotificationSchedule, NotificationSecret, removeNotificationSchedule } from '../../index';\nimport { getNotificationAPIURL } from '../getNotificationAPIURL/index';\nimport { getNotificationRequestBody } from '../getNotificationRequestBody/index';\nimport { makeNotificationRequest } from '../loader';\n\nexport async function cancelNotification(schedule_id: NotificationSchedule['schedule_id']): Promise<boolean> {\n  if (NotificationClientID === '' || NotificationSecret === '' || schedule_id === undefined) {\n    return false;\n  }\n  const url = getNotificationAPIURL('cancel', [schedule_id]);\n  const requestBody = getNotificationRequestBody('cancel', [schedule_id]);\n  const response = await makeNotificationRequest('cancel', url, requestBody);\n  if (response === false) {\n    return false;\n  } else {\n    if (response.code === 200 && response.method === 'cancel') {\n      await removeNotificationSchedule(schedule_id);\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n","import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../data/apis/loader';\nimport { cancelNotification } from '../../data/notification/apis/cancelNotification/index';\nimport { IntegratedNotificationScheduleItem, IntegratedNotificationSchedules, integrateNotifcationSchedules, NotificationSchedule } from '../../data/notification/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString, compareThings, generateIdentifier } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst NotificationScheduleManagerField = documentQuerySelector('.css_notification_schedule_manager_field');\nconst NotificationScheduleManagerHeadElement = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_head');\nconst NotificationScheduleManagerUpdateTimerBoxElement = elementQuerySelector(NotificationScheduleManagerHeadElement, '.css_notification_schedule_manager_update_timer_box');\nconst NotificationScheduleManagerUpdateTimerElement = elementQuerySelector(NotificationScheduleManagerUpdateTimerBoxElement, '.css_notification_schedule_manager_update_timer');\nconst NotificationScheduleManagerBody = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_body');\nconst NotificationScheduleList = elementQuerySelector(NotificationScheduleManagerBody, '.css_notification_schedule_manager_notification_schedule_list');\n\nlet previousIntegration = {} as IntegratedNotificationSchedules;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet notifcationScheduleManagerRefreshTimer_retryInterval: number = 10 * 1000;\nlet notifcationScheduleManagerRefreshTimer_baseInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_minInterval: number = 5 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamic: boolean = true;\nlet notifcationScheduleManagerRefreshTimer_lastUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_nextUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_currentRequestID: string = '';\nlet notifcationScheduleManagerRefreshTimer_refreshing: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_streaming: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_streamStarted: boolean = false;\n\nfunction animateUpdateTimer(): void {\n  NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-notification-schedule-manager-update-timer-interval', `${notifcationScheduleManagerRefreshTimer_dynamicInterval}ms`);\n  NotificationScheduleManagerUpdateTimerElement.classList.add('css_notification_schedule_manager_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (notifcationScheduleManagerRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-notification-schedule-manager-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfItem(): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main item element\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_notification_schedule_manager_item');\n  itemElement.id = identifier;\n\n  // Hours element\n  const hoursElement = document.createElement('div');\n  hoursElement.classList.add('css_notification_schedule_manager_item_hours');\n  itemElement.appendChild(hoursElement);\n\n  // Notification schedule container\n  const notificationScheduleElement = document.createElement('div');\n  notificationScheduleElement.classList.add('css_notification_schedule_manager_item_notification_schedule');\n\n  // Minutes element\n  const minutesElement = document.createElement('div');\n  minutesElement.classList.add('css_notification_schedule_manager_item_notification_schedule_minutes');\n  notificationScheduleElement.appendChild(minutesElement);\n\n  // Context element\n  const contextElement = document.createElement('div');\n  contextElement.classList.add('css_notification_schedule_manager_item_notification_schedule_context');\n  notificationScheduleElement.appendChild(contextElement);\n\n  // Main element\n  const mainElement = document.createElement('div');\n  mainElement.classList.add('css_notification_schedule_manager_item_notification_schedule_main');\n  notificationScheduleElement.appendChild(mainElement);\n\n  // Cancel button element\n  const cancelElement = document.createElement('div');\n  cancelElement.classList.add('css_notification_schedule_manager_item_notification_schedule_cancel');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('close'));\n  cancelElement.appendChild(iconElement);\n\n  notificationScheduleElement.appendChild(cancelElement);\n\n  // Assemble\n  itemElement.appendChild(notificationScheduleElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction updateNotificationScheduleManagerField(integration: IntegratedNotificationSchedules, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem, previousItem: IntegratedNotificationScheduleItem | null): void {\n    function updateHours(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemHoursElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_hours');\n      thisItemHoursElement.innerText = thisItem.hours;\n    }\n\n    function updateMinutes(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMinutesElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_minutes');\n      thisItemMinutesElement.innerText = thisItem.minutes;\n    }\n\n    function updateMain(thisItemElement: HTMLElementm, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMainElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_main');\n      thisItemMainElement.innerText = thisItem.name;\n    }\n\n    function updateContext(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemContextElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_context');\n      thisItemContextElement.innerText = `${thisItem.route.name} - ${thisItem.route.direction}`;\n    }\n\n    function updateCancel(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemCancelElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_cancel');\n      thisItemCancelElement.onclick = function () {\n        cancelNotificationOnNotificationScheduleManager(thisItemElement.id, thisItem.schedule_id);\n      };\n    }\n\n    function updateFirst(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      thisItemElement.setAttribute('first', booleanToString(thisItem.is_first));\n    }\n\n    function updateAnimation(thisItemElement: HTMLElement, animation: boolean): void {\n      thisItemElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisItemElement: HTMLElement, skeletonScreen: boolean): void {\n      thisItemElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateHours(thisItemElement, thisItem);\n      updateMinutes(thisItemElement, thisItem);\n      updateMain(thisItemElement, thisItem);\n      updateContext(thisItemElement, thisItem);\n      updateCancel(thisItemElement, thisItem);\n      updateFirst(thisItemElement, thisItem);\n      updateAnimation(thisItemElement, animation);\n      updateSkeletonScreen(thisItemElement, skeletonScreen);\n    } else {\n      if (thisItem.hours !== previousItem.hours) {\n        updateHours(thisItemElement, thisItem);\n      }\n      if (thisItem.minutes !== previousItem.minutes) {\n        updateMinutes(thisItemElement, thisItem);\n      }\n      if (!compareThings(previousItem.schedule_id, thisItem.schedule_id)) {\n        updateMain(thisItemElement, thisItem);\n        updateContext(thisItemElement, thisItem);\n        updateCancel(thisItemElement, thisItem);\n      }\n      if (previousItem.is_first !== thisItem.is_first) {\n        updateFirst(thisItemElement, thisItem);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisItemElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisItemElement, skeletonScreen);\n      }\n    }\n  }\n\n  const itemQuantity = integration.itemQuantity;\n  const items = integration.items;\n\n  const currentItemCapacity = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item').length;\n  if (itemQuantity !== currentItemCapacity) {\n    const difference = currentItemCapacity - itemQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement.element);\n      }\n      NotificationScheduleList.append(fragment);\n    } else {\n      const NotificationScheduleItemElements = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const itemIndex = currentItemCapacity - 1 - o;\n        NotificationScheduleItemElements[itemIndex].remove();\n      }\n    }\n  }\n\n  const NotificationScheduleItemElements = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item');\n  for (let j = 0; j < itemQuantity; j++) {\n    const thisItemElement = NotificationScheduleItemElements[j];\n    const thisItem = items[j];\n    if (previousIntegration.hasOwnProperty('items')) {\n      if (previousIntegration.items[j]) {\n        const previousItem = previousIntegration.items[j];\n        updateItem(thisItemElement, thisItem, previousItem);\n      } else {\n        updateItem(thisItemElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisItemElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpNotificationScheduleManagerFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: IntegratedNotificationSchedules['itemQuantity'] = Math.floor(FieldHeight / 50) + 5;\n  let items: IntegratedNotificationSchedules['items'] = [];\n  for (let i = 0; i < defaultItemQuantity; i++) {\n    items.push({\n      name: '',\n      stop_id: 0,\n      estimate_time: 0,\n      schedule_id: 'null',\n      scheduled_time: 0,\n      route: {\n        name: '',\n        direction: '',\n        id: 0,\n        pathAttributeId: []\n      },\n      is_first: true,\n      date: '',\n      hours: '',\n      minutes: ''\n    });\n  }\n  updateNotificationScheduleManagerField(\n    {\n      items: items,\n      itemQuantity: defaultItemQuantity,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function refreshNotificationScheduleManager() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  notifcationScheduleManagerRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  notifcationScheduleManagerRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  notifcationScheduleManagerRefreshTimer_refreshing = true;\n  notifcationScheduleManagerRefreshTimer_currentRequestID = generateIdentifier();\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'true');\n  NotificationScheduleManagerUpdateTimerElement.classList.remove('css_notification_schedule_manager_update_timer_slide_rtl');\n  document.addEventListener(notifcationScheduleManagerRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n  updateNotificationScheduleManagerField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  notifcationScheduleManagerRefreshTimer_lastUpdate = new Date().getTime();\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = Math.max(notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_minInterval, integration.dataUpdateTime + notifcationScheduleManagerRefreshTimer_baseInterval / updateRate);\n  } else {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_baseInterval;\n  }\n  notifcationScheduleManagerRefreshTimer_dynamicInterval = Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - notifcationScheduleManagerRefreshTimer_lastUpdate);\n  notifcationScheduleManagerRefreshTimer_refreshing = false;\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nasync function streamNotificationScheduleManager() {\n  refreshNotificationScheduleManager()\n    .then(function () {\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        setTimeout(\n          function () {\n            streamNotificationScheduleManager();\n          },\n          Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        setTimeout(function () {\n          streamNotificationScheduleManager();\n        }, notifcationScheduleManagerRefreshTimer_retryInterval);\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openNotificationScheduleManager(): void {\n  pushPageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'true');\n  setUpNotificationScheduleManagerFieldSkeletonScreen();\n  if (!notifcationScheduleManagerRefreshTimer_streaming) {\n    notifcationScheduleManagerRefreshTimer_streaming = true;\n    if (!notifcationScheduleManagerRefreshTimer_streamStarted) {\n      notifcationScheduleManagerRefreshTimer_streamStarted = true;\n      streamNotificationScheduleManager();\n    } else {\n      refreshNotificationScheduleManager();\n    }\n  }\n  closePreviousPage();\n}\n\nexport function closeNotificationScheduleManager(): void {\n  // revokePageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'false');\n  notifcationScheduleManagerRefreshTimer_streaming = false;\n  openPreviousPage();\n}\n\nexport async function cancelNotificationOnNotificationScheduleManager(identifier: string, schedule_id: NotificationSchedule['schedule_id']) {\n  promptMessage('manufacturing', '');\n  const cancellation = await cancelNotification(schedule_id);\n  if (cancellation) {\n    const itemElement = elementQuerySelector(NotificationScheduleList, `.css_notification_schedule_manager_item#${identifier}`);\n    itemElement.remove();\n    promptMessage('check_circle', '');\n    if (!notifcationScheduleManagerRefreshTimer_refreshing) {\n      const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n      const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n      updateNotificationScheduleManagerField(integration, false, playing_animation);\n    }\n  } else {\n    promptMessage('error', '');\n  }\n}\n","import { changeSettingOption, getSetting, SettingSelect, SettingSelectOption } from '../../data/settings/index';\nimport { documentQuerySelector, documentQuerySelectorAll, elementQuerySelector } from '../../tools/elements';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory } from '../index';\n\nconst SettingsOptionsField = documentQuerySelector('.css_settings_options_field');\nconst SettingsOptionsBodyElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_body');\nconst SettingsOptionsOptionsElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_settings_options');\nconst SettingsOptionsDescriptionElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_options_description');\nconst SettingsOptionsHeadElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_head');\nconst SettingsOptionsTitleElement = elementQuerySelector(SettingsOptionsHeadElement, '.css_settings_options_title');\n\nfunction generateElementOfItem(setting: SettingSelect, item: SettingSelectOption, index: number): GeneratedElement {\n  const optionElement = document.createElement('div');\n  optionElement.classList.add('css_option');\n\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_option_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  const checkboxContainerElement = document.createElement('div');\n  checkboxContainerElement.classList.add('css_option_checkbox');\n\n  const checkboxElement = document.createElement('input');\n  checkboxElement.type = 'checkbox';\n  checkboxElement.checked = setting.option === index;\n  checkboxElement.onclick = (event) => {\n    settingsOptionsHandler(event, setting.key, index);\n  };\n\n  checkboxContainerElement.appendChild(checkboxElement);\n  optionElement.appendChild(nameElement);\n  optionElement.appendChild(checkboxContainerElement);\n\n  return {\n    element: optionElement,\n    id: ''\n  };\n}\n\nfunction initializeSettingsOptionsField(settingKey: string): void {\n  const setting = getSetting(settingKey) as SettingSelect;\n  SettingsOptionsTitleElement.innerText = setting.name;\n  SettingsOptionsDescriptionElement.innerText = setting.description;\n  SettingsOptionsOptionsElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  let index: number = 0;\n  for (const item of setting.options) {\n    const thisElement = generateElementOfItem(setting, item, index);\n    fragment.appendChild(thisElement.element);\n    index += 1;\n  }\n  SettingsOptionsOptionsElement.append(fragment);\n}\n\nexport function openSettingsOptions(settingKey: string): void {\n  pushPageHistory('SettingsOptions');\n  SettingsOptionsField.setAttribute('displayed', 'true');\n  initializeSettingsOptionsField(settingKey);\n  closePreviousPage();\n}\n\nexport function closeSettingsOptions(): void {\n  // revokePageHistory('SettingsOptions');\n  SettingsOptionsField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function settingsOptionsHandler(event: Event, settingKey: string, index: number): void {\n  const checkboxes = documentQuerySelectorAll('.css_settings_options_field .css_settings_options_body .css_settings_options .css_option .css_option_checkbox input[type=\"checkbox\"]') as NodeListOf<HTMLInputElement>;\n  for (const checkbox of checkboxes) {\n    checkbox.checked = false;\n  }\n  const target = event.target as HTMLInputElement;\n  target.checked = true;\n  changeSettingOption(settingKey, index);\n}\n","import { convertBytes } from '../../tools/convert';\nimport { getStoresLength, lfGetItem, lfListItemKeys } from '../storage/index';\n\ninterface StoreCategory {\n  name: string;\n  key: string;\n}\n\ninterface StoreSizeInBytes {\n  category: StoreCategory;\n  size: number;\n}\n\ntype CategorizedSizesInBytes = { [key: string]: StoreSizeInBytes };\n\nexport interface StoreSize {\n  category: StoreCategory;\n  size: string;\n}\n\nexport type CategorizedSizes = { [key: string]: StoreSize };\n\nexport interface StoreSizeStatistics {\n  categorizedSizes: CategorizedSizes;\n  totalSize: number;\n}\n\nfunction storeIndexToCategory(store: number): StoreCategory {\n  const [name, key] = [\n    ['', 'cache'],\n    ['', 'settings'],\n    ['', 'analytics'],\n    ['', 'analytics'],\n    ['', 'analytics'],\n    ['', 'analytics'],\n    ['', 'analytics'],\n    ['', 'personalSchedule'],\n    ['', 'recentViews'],\n    ['', 'notification'],\n    ['', 'notification'],\n    ['', 'folders'],\n    ['', 'folders'],\n    ['', 'folders']\n  ][store] || ['', 'others'];\n  const result = {\n    name,\n    key\n  };\n  return result;\n}\n\nexport async function getStoresSizeStatistics(): Promise<StoreSizeStatistics> {\n  let totalSizeInBytes: number = 0;\n  const categorizedSizesInBytes: CategorizedSizesInBytes = {};\n  const storesLength = getStoresLength();\n\n  for (let i = 0; i < storesLength; i++) {\n    const keysInStore = await lfListItemKeys(i);\n    let thisStoreSizeInBytes: number = 0;\n    for (const itemKey of keysInStore) {\n      const item = await lfGetItem(i, itemKey);\n      const itemInString = String(item);\n      const itemLength = itemInString.length + itemKey.length;\n      totalSizeInBytes += itemLength;\n      thisStoreSizeInBytes += itemLength;\n    }\n    const thisCategory = storeIndexToCategory(i);\n    const thisCategoryKey = thisCategory.key;\n    if (!categorizedSizesInBytes.hasOwnProperty(thisCategoryKey)) {\n      categorizedSizesInBytes[thisCategoryKey] = {\n        category: thisCategory,\n        size: 0\n      };\n    }\n    categorizedSizesInBytes[thisCategory.key].size += thisStoreSizeInBytes;\n  }\n\n  const totalSize = convertBytes(totalSizeInBytes);\n\n  const categorizedSizes: CategorizedSizes = {};\n  for (const key in categorizedSizesInBytes) {\n    const thisCategory = categorizedSizesInBytes[key].category;\n    const thisCategorySize = categorizedSizesInBytes[key].size;\n    categorizedSizes[key] = {\n      category: thisCategory,\n      size: convertBytes(thisCategorySize)\n    };\n  }\n\n  const result: StoreSizeStatistics = {\n    totalSize,\n    categorizedSizes\n  };\n\n  return result;\n}\n","import { getStoresSizeStatistics, StoreSize, StoreSizeStatistics } from '../../data/analytics/storage-size';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { GeneratedElement, querySize } from '../index';\n\nlet previousCategories: Array<StoreSize> = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst StorageField = documentQuerySelector('.css_storage_field');\nconst StorageBodyElement = elementQuerySelector(StorageField, '.css_storage_body');\nconst StatisticsElement = elementQuerySelector(StorageBodyElement, '.css_storage_statistics');\n\nfunction generateElementOfItem(): GeneratedElement {\n  // Create root element\n  const statisticsItemElement = document.createElement('div');\n  statisticsItemElement.classList.add('css_storage_statistics_item');\n\n  // Create name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_storage_statistics_item_name');\n\n  // Create value element\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_storage_statistics_item_value');\n\n  // Append children\n  statisticsItemElement.appendChild(nameElement);\n  statisticsItemElement.appendChild(valueElement);\n\n  return {\n    element: statisticsItemElement,\n    id: ''\n  };\n}\n\nfunction updateStorageField(statistics: StoreSizeStatistics, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(element: HTMLElement, currentItem: StoreSize, previousItem: StoreSize | null): void {\n    function updateValue(element: HTMLElement, item: StoreSize): void {\n      const typeElement = elementQuerySelector(element, '.css_storage_statistics_item_value');\n      typeElement.innerText = item.size;\n    }\n\n    function updateName(element: HTMLElement, item: StoreSize): void {\n      const nameElement = elementQuerySelector(element, '.css_storage_statistics_item_name');\n      nameElement.innerText = item.category.name;\n    }\n\n    function updateAnimation(element: HTMLElement, animation: boolean): void {\n      element.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(element: HTMLElement, skeletonScreen: boolean): void {\n      element.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.category.key !== previousItem.category.key) {\n        updateName(element, currentItem);\n        updateValue(element, currentItem);\n      }\n\n      if (currentItem.size !== previousItem.size) {\n        updateValue(element, currentItem);\n      }\n\n      if (previousAnimation !== animation) {\n        updateAnimation(element, animation);\n      }\n\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(element, skeletonScreen);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateValue(element, currentItem);\n      updateName(element, currentItem);\n      updateAnimation(element, animation);\n      updateSkeletonScreen(element, skeletonScreen);\n    }\n  }\n\n  const categories = [];\n  for (const key in statistics.categorizedSizes) {\n    const item = statistics.categorizedSizes[key];\n    categories.push(item);\n  }\n\n  const categoriesQuantity = categories.length;\n  const currentItemCapacity = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item').length;\n  if (categoriesQuantity !== currentItemCapacity) {\n    const difference = currentItemCapacity - categoriesQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newElement = generateElementOfItem();\n        fragment.appendChild(newElement.element);\n      }\n      StatisticsElement.appendChild(fragment);\n    } else {\n      const statisticsItemElements2 = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const itemIndex = currentItemCapacity - 1 - o;\n        statisticsItemElements2[itemIndex].remove();\n      }\n    }\n  }\n\n  const statisticsItemElements = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item');\n  for (let i = 0; i < categoriesQuantity; i++) {\n    const previousItem = previousCategories[i];\n    const currentItem = categories[i];\n    const thisItemElement = statisticsItemElements[i];\n    if (previousItem) {\n      updateItem(thisItemElement, currentItem, previousItem);\n    } else {\n      updateItem(thisItemElement, currentItem, null);\n    }\n  }\n\n  previousCategories = categories;\n  previousSkeletonScreen = skeletonScreen;\n  previousAnimation = animation;\n}\n\nfunction setUpStorageFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const FieldSize = querySize('window');\n  // const FieldWidth = FieldSize.width;\n  const FieldHeight = FieldSize.height;\n  const defaultCategoriesQuantity = Math.min(7, Math.floor(FieldHeight / 55) + 2);\n  const statistics: StoreSizeStatistics = {\n    categorizedSizes: {},\n    totalSize: 0\n  };\n  for (let i = 0; i < defaultCategoriesQuantity; i++) {\n    const categoryKey = `store-${i}`;\n    statistics.categorizedSizes[categoryKey] = {\n      category: {\n        name: '',\n        key: categoryKey\n      },\n      size: `size-${i}`\n    };\n  }\n  updateStorageField(statistics, true, playing_animation);\n}\n\nasync function refreshStorageStatistics() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  setUpStorageFieldSkeletonScreen();\n  const statistics = await getStoresSizeStatistics();\n  updateStorageField(statistics, false, playing_animation);\n}\n\nexport function openStorage(): void {\n  StorageField.setAttribute('displayed', 'true');\n  refreshStorageStatistics();\n}\n\nexport function closeStorage(): void {\n  StorageField.setAttribute('displayed', 'false');\n}\n","import { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\n\nexport interface PromptButton {\n  text: string;\n  action: Function;\n}\n\nexport function promptMessage(icon: MaterialSymbols, message: string, button: PromptButton | null): void {\n  const allPromptElements = documentQuerySelectorAll('.css_prompt');\n  if (allPromptElements !== null) {\n    for (const promptElement of allPromptElements) {\n      promptElement.remove();\n    }\n  }\n\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n\n  const promptElement = document.createElement('div');\n  promptElement.classList.add('css_prompt');\n  promptElement.setAttribute('animation', booleanToString(playing_animation));\n\n  const promptIconElement = document.createElement('div');\n  promptIconElement.classList.add('css_prompt_icon');\n  promptIconElement.appendChild(getIconElement(icon));\n  promptElement.appendChild(promptIconElement);\n\n  const promptMessageElement = document.createElement('div');\n  promptMessageElement.classList.add('css_prompt_message');\n  promptMessageElement.innerText = message;\n  promptElement.appendChild(promptMessageElement);\n\n  if (typeof button === 'object' && button !== null && button !== undefined) {\n    if (typeof button?.action === 'function') {\n      const promptButtonElement = document.createElement('div');\n      promptButtonElement.classList.add('css_prompt_button');\n      promptButtonElement.innerText = button.text;\n      promptButtonElement.addEventListener(\n        'click',\n        function () {\n          button.action();\n        },\n        { once: true }\n      );\n      promptElement.appendChild(promptButtonElement);\n    }\n  }\n\n  promptElement.addEventListener(\n    'animationend',\n    function (event) {\n      if (event?.target) {\n        event.target.remove();\n      }\n    },\n    { once: true }\n  );\n\n  document.body.appendChild(promptElement);\n}\n","import { mergeAddressesIntoOne } from '../../../tools/address';\nimport { md5 } from '../../../tools/index';\nimport { MergedLocation, SimplifiedLocation } from './index';\n\nself.onmessage = function (e) {\n  const result = processWorkerTask(e.data);\n  self.postMessage(result); // Send the result back to the main thread\n};\n\nfunction processWorkerTask(object: SimplifiedLocation): MergedLocation {\n  const result: MergedLocation = {};\n  for (const key in object) {\n    const hash = md5(\n      String(object[key].n)\n        .trim()\n        .replaceAll(/[\\(\\\\\\)\\:\\\\~\\]*/gim, '')\n    );\n    const nameKey = `ml_${hash}`;\n    if (!result.hasOwnProperty(nameKey)) {\n      result[nameKey] = {\n        n: object[key].n,\n        lo: [object[key].lo],\n        la: [object[key].la],\n        g: [object[key].g],\n        r: [object[key].r],\n        s: [object[key].s],\n        v: [object[key].v],\n        a: [mergeAddressesIntoOne(object[key].a)],\n        id: [object[key].id],\n        hash: hash\n      };\n    } else {\n      result[nameKey].lo.push(object[key].lo);\n      result[nameKey].la.push(object[key].la);\n      if (result[nameKey].g.indexOf(object[key].g) < 0) {\n        result[nameKey].g.push(object[key].g);\n      }\n      result[nameKey].r.push(object[key].r);\n      result[nameKey].s.push(object[key].s);\n      result[nameKey].v.push(object[key].v);\n      result[nameKey].a.push(mergeAddressesIntoOne(object[key].a));\n      result[nameKey].id.push(object[key].id);\n    }\n  }\n  return result;\n}\n","let toSJISFunction\nconst CODEWORDS_COUNT = [\n  0, // Not used\n  26, 44, 70, 100, 134, 172, 196, 242, 292, 346,\n  404, 466, 532, 581, 655, 733, 815, 901, 991, 1085,\n  1156, 1258, 1364, 1474, 1588, 1706, 1828, 1921, 2051, 2185,\n  2323, 2465, 2611, 2761, 2876, 3034, 3196, 3362, 3532, 3706\n]\n\n/**\n * Returns the QR Code size for the specified version\n *\n * @param  {Number} version QR Code version\n * @return {Number}         size of QR code\n */\nexports.getSymbolSize = function getSymbolSize (version) {\n  if (!version) throw new Error('\"version\" cannot be null or undefined')\n  if (version < 1 || version > 40) throw new Error('\"version\" should be in range from 1 to 40')\n  return version * 4 + 17\n}\n\n/**\n * Returns the total number of codewords used to store data and EC information.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Data length in bits\n */\nexports.getSymbolTotalCodewords = function getSymbolTotalCodewords (version) {\n  return CODEWORDS_COUNT[version]\n}\n\n/**\n * Encode data with Bose-Chaudhuri-Hocquenghem\n *\n * @param  {Number} data Value to encode\n * @return {Number}      Encoded value\n */\nexports.getBCHDigit = function (data) {\n  let digit = 0\n\n  while (data !== 0) {\n    digit++\n    data >>>= 1\n  }\n\n  return digit\n}\n\nexports.setToSJISFunction = function setToSJISFunction (f) {\n  if (typeof f !== 'function') {\n    throw new Error('\"toSJISFunc\" is not a valid function.')\n  }\n\n  toSJISFunction = f\n}\n\nexports.isKanjiModeEnabled = function () {\n  return typeof toSJISFunction !== 'undefined'\n}\n\nexports.toSJIS = function toSJIS (kanji) {\n  return toSJISFunction(kanji)\n}\n","const numeric = '[0-9]+'\nconst alphanumeric = '[A-Z $%*+\\\\-./:]+'\nlet kanji = '(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|' +\n  '[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|' +\n  '[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|' +\n  '[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+'\nkanji = kanji.replace(/u/g, '\\\\u')\n\nconst byte = '(?:(?![A-Z0-9 $%*+\\\\-./:]|' + kanji + ')(?:.|[\\r\\n]))+'\n\nexports.KANJI = new RegExp(kanji, 'g')\nexports.BYTE_KANJI = new RegExp('[^A-Z0-9 $%*+\\\\-./:]+', 'g')\nexports.BYTE = new RegExp(byte, 'g')\nexports.NUMERIC = new RegExp(numeric, 'g')\nexports.ALPHANUMERIC = new RegExp(alphanumeric, 'g')\n\nconst TEST_KANJI = new RegExp('^' + kanji + '$')\nconst TEST_NUMERIC = new RegExp('^' + numeric + '$')\nconst TEST_ALPHANUMERIC = new RegExp('^[A-Z0-9 $%*+\\\\-./:]+$')\n\nexports.testKanji = function testKanji (str) {\n  return TEST_KANJI.test(str)\n}\n\nexports.testNumeric = function testNumeric (str) {\n  return TEST_NUMERIC.test(str)\n}\n\nexports.testAlphanumeric = function testAlphanumeric (str) {\n  return TEST_ALPHANUMERIC.test(str)\n}\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","const ECLevel = require('./error-correction-level')\r\n\r\nconst EC_BLOCKS_TABLE = [\r\n// L  M  Q  H\r\n  1, 1, 1, 1,\r\n  1, 1, 1, 1,\r\n  1, 1, 2, 2,\r\n  1, 2, 2, 4,\r\n  1, 2, 4, 4,\r\n  2, 4, 4, 4,\r\n  2, 4, 6, 5,\r\n  2, 4, 6, 6,\r\n  2, 5, 8, 8,\r\n  4, 5, 8, 8,\r\n  4, 5, 8, 11,\r\n  4, 8, 10, 11,\r\n  4, 9, 12, 16,\r\n  4, 9, 16, 16,\r\n  6, 10, 12, 18,\r\n  6, 10, 17, 16,\r\n  6, 11, 16, 19,\r\n  6, 13, 18, 21,\r\n  7, 14, 21, 25,\r\n  8, 16, 20, 25,\r\n  8, 17, 23, 25,\r\n  9, 17, 23, 34,\r\n  9, 18, 25, 30,\r\n  10, 20, 27, 32,\r\n  12, 21, 29, 35,\r\n  12, 23, 34, 37,\r\n  12, 25, 34, 40,\r\n  13, 26, 35, 42,\r\n  14, 28, 38, 45,\r\n  15, 29, 40, 48,\r\n  16, 31, 43, 51,\r\n  17, 33, 45, 54,\r\n  18, 35, 48, 57,\r\n  19, 37, 51, 60,\r\n  19, 38, 53, 63,\r\n  20, 40, 56, 66,\r\n  21, 43, 59, 70,\r\n  22, 45, 62, 74,\r\n  24, 47, 65, 77,\r\n  25, 49, 68, 81\r\n]\r\n\r\nconst EC_CODEWORDS_TABLE = [\r\n// L  M  Q  H\r\n  7, 10, 13, 17,\r\n  10, 16, 22, 28,\r\n  15, 26, 36, 44,\r\n  20, 36, 52, 64,\r\n  26, 48, 72, 88,\r\n  36, 64, 96, 112,\r\n  40, 72, 108, 130,\r\n  48, 88, 132, 156,\r\n  60, 110, 160, 192,\r\n  72, 130, 192, 224,\r\n  80, 150, 224, 264,\r\n  96, 176, 260, 308,\r\n  104, 198, 288, 352,\r\n  120, 216, 320, 384,\r\n  132, 240, 360, 432,\r\n  144, 280, 408, 480,\r\n  168, 308, 448, 532,\r\n  180, 338, 504, 588,\r\n  196, 364, 546, 650,\r\n  224, 416, 600, 700,\r\n  224, 442, 644, 750,\r\n  252, 476, 690, 816,\r\n  270, 504, 750, 900,\r\n  300, 560, 810, 960,\r\n  312, 588, 870, 1050,\r\n  336, 644, 952, 1110,\r\n  360, 700, 1020, 1200,\r\n  390, 728, 1050, 1260,\r\n  420, 784, 1140, 1350,\r\n  450, 812, 1200, 1440,\r\n  480, 868, 1290, 1530,\r\n  510, 924, 1350, 1620,\r\n  540, 980, 1440, 1710,\r\n  570, 1036, 1530, 1800,\r\n  570, 1064, 1590, 1890,\r\n  600, 1120, 1680, 1980,\r\n  630, 1204, 1770, 2100,\r\n  660, 1260, 1860, 2220,\r\n  720, 1316, 1950, 2310,\r\n  750, 1372, 2040, 2430\r\n]\r\n\r\n/**\r\n * Returns the number of error correction block that the QR Code should contain\r\n * for the specified version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction blocks\r\n */\r\nexports.getBlocksCount = function getBlocksCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the number of error correction codewords to use for the specified\r\n * version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction codewords\r\n */\r\nexports.getTotalCodewordsCount = function getTotalCodewordsCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n","const getSymbolSize = require('./utils').getSymbolSize\nconst FINDER_PATTERN_SIZE = 7\n\n/**\n * Returns an array containing the positions of each finder pattern.\n * Each array's element represent the top-left point of the pattern as (x, y) coordinates\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  const size = getSymbolSize(version)\n\n  return [\n    // top-left\n    [0, 0],\n    // top-right\n    [size - FINDER_PATTERN_SIZE, 0],\n    // bottom-left\n    [0, size - FINDER_PATTERN_SIZE]\n  ]\n}\n","/**\n * Helper class to handle QR Code symbol modules\n *\n * @param {Number} size Symbol size\n */\nfunction BitMatrix (size) {\n  if (!size || size < 1) {\n    throw new Error('BitMatrix size must be defined and greater than 0')\n  }\n\n  this.size = size\n  this.data = new Uint8Array(size * size)\n  this.reservedBit = new Uint8Array(size * size)\n}\n\n/**\n * Set bit value at specified location\n * If reserved flag is set, this bit will be ignored during masking process\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n * @param {Boolean} reserved\n */\nBitMatrix.prototype.set = function (row, col, value, reserved) {\n  const index = row * this.size + col\n  this.data[index] = value\n  if (reserved) this.reservedBit[index] = true\n}\n\n/**\n * Returns bit value at specified location\n *\n * @param  {Number}  row\n * @param  {Number}  col\n * @return {Boolean}\n */\nBitMatrix.prototype.get = function (row, col) {\n  return this.data[row * this.size + col]\n}\n\n/**\n * Applies xor operator at specified location\n * (used during masking process)\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n */\nBitMatrix.prototype.xor = function (row, col, value) {\n  this.data[row * this.size + col] ^= value\n}\n\n/**\n * Check if bit at specified location is reserved\n *\n * @param {Number}   row\n * @param {Number}   col\n * @return {Boolean}\n */\nBitMatrix.prototype.isReserved = function (row, col) {\n  return this.reservedBit[row * this.size + col]\n}\n\nmodule.exports = BitMatrix\n","const Mode = require('./mode')\nconst NumericData = require('./numeric-data')\nconst AlphanumericData = require('./alphanumeric-data')\nconst ByteData = require('./byte-data')\nconst KanjiData = require('./kanji-data')\nconst Regex = require('./regex')\nconst Utils = require('./utils')\nconst dijkstra = require('dijkstrajs')\n\n/**\n * Returns UTF8 byte length\n *\n * @param  {String} str Input string\n * @return {Number}     Number of byte\n */\nfunction getStringByteLength (str) {\n  return unescape(encodeURIComponent(str)).length\n}\n\n/**\n * Get a list of segments of the specified mode\n * from a string\n *\n * @param  {Mode}   mode Segment mode\n * @param  {String} str  String to process\n * @return {Array}       Array of object with segments data\n */\nfunction getSegments (regex, mode, str) {\n  const segments = []\n  let result\n\n  while ((result = regex.exec(str)) !== null) {\n    segments.push({\n      data: result[0],\n      index: result.index,\n      mode: mode,\n      length: result[0].length\n    })\n  }\n\n  return segments\n}\n\n/**\n * Extracts a series of segments with the appropriate\n * modes from a string\n *\n * @param  {String} dataStr Input string\n * @return {Array}          Array of object with segments data\n */\nfunction getSegmentsFromString (dataStr) {\n  const numSegs = getSegments(Regex.NUMERIC, Mode.NUMERIC, dataStr)\n  const alphaNumSegs = getSegments(Regex.ALPHANUMERIC, Mode.ALPHANUMERIC, dataStr)\n  let byteSegs\n  let kanjiSegs\n\n  if (Utils.isKanjiModeEnabled()) {\n    byteSegs = getSegments(Regex.BYTE, Mode.BYTE, dataStr)\n    kanjiSegs = getSegments(Regex.KANJI, Mode.KANJI, dataStr)\n  } else {\n    byteSegs = getSegments(Regex.BYTE_KANJI, Mode.BYTE, dataStr)\n    kanjiSegs = []\n  }\n\n  const segs = numSegs.concat(alphaNumSegs, byteSegs, kanjiSegs)\n\n  return segs\n    .sort(function (s1, s2) {\n      return s1.index - s2.index\n    })\n    .map(function (obj) {\n      return {\n        data: obj.data,\n        mode: obj.mode,\n        length: obj.length\n      }\n    })\n}\n\n/**\n * Returns how many bits are needed to encode a string of\n * specified length with the specified mode\n *\n * @param  {Number} length String length\n * @param  {Mode} mode     Segment mode\n * @return {Number}        Bit length\n */\nfunction getSegmentBitsLength (length, mode) {\n  switch (mode) {\n    case Mode.NUMERIC:\n      return NumericData.getBitsLength(length)\n    case Mode.ALPHANUMERIC:\n      return AlphanumericData.getBitsLength(length)\n    case Mode.KANJI:\n      return KanjiData.getBitsLength(length)\n    case Mode.BYTE:\n      return ByteData.getBitsLength(length)\n  }\n}\n\n/**\n * Merges adjacent segments which have the same mode\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction mergeSegments (segs) {\n  return segs.reduce(function (acc, curr) {\n    const prevSeg = acc.length - 1 >= 0 ? acc[acc.length - 1] : null\n    if (prevSeg && prevSeg.mode === curr.mode) {\n      acc[acc.length - 1].data += curr.data\n      return acc\n    }\n\n    acc.push(curr)\n    return acc\n  }, [])\n}\n\n/**\n * Generates a list of all possible nodes combination which\n * will be used to build a segments graph.\n *\n * Nodes are divided by groups. Each group will contain a list of all the modes\n * in which is possible to encode the given text.\n *\n * For example the text '12345' can be encoded as Numeric, Alphanumeric or Byte.\n * The group for '12345' will contain then 3 objects, one for each\n * possible encoding mode.\n *\n * Each node represents a possible segment.\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction buildNodes (segs) {\n  const nodes = []\n  for (let i = 0; i < segs.length; i++) {\n    const seg = segs[i]\n\n    switch (seg.mode) {\n      case Mode.NUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.ALPHANUMERIC, length: seg.length },\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.ALPHANUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.KANJI:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n        break\n      case Mode.BYTE:\n        nodes.push([\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n    }\n  }\n\n  return nodes\n}\n\n/**\n * Builds a graph from a list of nodes.\n * All segments in each node group will be connected with all the segments of\n * the next group and so on.\n *\n * At each connection will be assigned a weight depending on the\n * segment's byte length.\n *\n * @param  {Array} nodes    Array of object with segments data\n * @param  {Number} version QR Code version\n * @return {Object}         Graph of all possible segments\n */\nfunction buildGraph (nodes, version) {\n  const table = {}\n  const graph = { start: {} }\n  let prevNodeIds = ['start']\n\n  for (let i = 0; i < nodes.length; i++) {\n    const nodeGroup = nodes[i]\n    const currentNodeIds = []\n\n    for (let j = 0; j < nodeGroup.length; j++) {\n      const node = nodeGroup[j]\n      const key = '' + i + j\n\n      currentNodeIds.push(key)\n      table[key] = { node: node, lastCount: 0 }\n      graph[key] = {}\n\n      for (let n = 0; n < prevNodeIds.length; n++) {\n        const prevNodeId = prevNodeIds[n]\n\n        if (table[prevNodeId] && table[prevNodeId].node.mode === node.mode) {\n          graph[prevNodeId][key] =\n            getSegmentBitsLength(table[prevNodeId].lastCount + node.length, node.mode) -\n            getSegmentBitsLength(table[prevNodeId].lastCount, node.mode)\n\n          table[prevNodeId].lastCount += node.length\n        } else {\n          if (table[prevNodeId]) table[prevNodeId].lastCount = node.length\n\n          graph[prevNodeId][key] = getSegmentBitsLength(node.length, node.mode) +\n            4 + Mode.getCharCountIndicator(node.mode, version) // switch cost\n        }\n      }\n    }\n\n    prevNodeIds = currentNodeIds\n  }\n\n  for (let n = 0; n < prevNodeIds.length; n++) {\n    graph[prevNodeIds[n]].end = 0\n  }\n\n  return { map: graph, table: table }\n}\n\n/**\n * Builds a segment from a specified data and mode.\n * If a mode is not specified, the more suitable will be used.\n *\n * @param  {String} data             Input data\n * @param  {Mode | String} modesHint Data mode\n * @return {Segment}                 Segment\n */\nfunction buildSingleSegment (data, modesHint) {\n  let mode\n  const bestMode = Mode.getBestModeForData(data)\n\n  mode = Mode.from(modesHint, bestMode)\n\n  // Make sure data can be encoded\n  if (mode !== Mode.BYTE && mode.bit < bestMode.bit) {\n    throw new Error('\"' + data + '\"' +\n      ' cannot be encoded with mode ' + Mode.toString(mode) +\n      '.\\n Suggested mode is: ' + Mode.toString(bestMode))\n  }\n\n  // Use Mode.BYTE if Kanji support is disabled\n  if (mode === Mode.KANJI && !Utils.isKanjiModeEnabled()) {\n    mode = Mode.BYTE\n  }\n\n  switch (mode) {\n    case Mode.NUMERIC:\n      return new NumericData(data)\n\n    case Mode.ALPHANUMERIC:\n      return new AlphanumericData(data)\n\n    case Mode.KANJI:\n      return new KanjiData(data)\n\n    case Mode.BYTE:\n      return new ByteData(data)\n  }\n}\n\n/**\n * Builds a list of segments from an array.\n * Array can contain Strings or Objects with segment's info.\n *\n * For each item which is a string, will be generated a segment with the given\n * string and the more appropriate encoding mode.\n *\n * For each item which is an object, will be generated a segment with the given\n * data and mode.\n * Objects must contain at least the property \"data\".\n * If property \"mode\" is not present, the more suitable mode will be used.\n *\n * @param  {Array} array Array of objects with segments data\n * @return {Array}       Array of Segments\n */\nexports.fromArray = function fromArray (array) {\n  return array.reduce(function (acc, seg) {\n    if (typeof seg === 'string') {\n      acc.push(buildSingleSegment(seg, null))\n    } else if (seg.data) {\n      acc.push(buildSingleSegment(seg.data, seg.mode))\n    }\n\n    return acc\n  }, [])\n}\n\n/**\n * Builds an optimized sequence of segments from a string,\n * which will produce the shortest possible bitstream.\n *\n * @param  {String} data    Input string\n * @param  {Number} version QR Code version\n * @return {Array}          Array of segments\n */\nexports.fromString = function fromString (data, version) {\n  const segs = getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n\n  const nodes = buildNodes(segs)\n  const graph = buildGraph(nodes, version)\n  const path = dijkstra.find_path(graph.map, 'start', 'end')\n\n  const optimizedSegs = []\n  for (let i = 1; i < path.length - 1; i++) {\n    optimizedSegs.push(graph.table[path[i]].node)\n  }\n\n  return exports.fromArray(mergeSegments(optimizedSegs))\n}\n\n/**\n * Splits a string in various segments with the modes which\n * best represent their content.\n * The produced segments are far from being optimized.\n * The output of this function is only used to estimate a QR Code version\n * which may contain the data.\n *\n * @param  {string} data Input string\n * @return {Array}       Array of segments\n */\nexports.rawSplit = function rawSplit (data) {\n  return exports.fromArray(\n    getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n  )\n}\n","function BitBuffer () {\n  this.buffer = []\n  this.length = 0\n}\n\nBitBuffer.prototype = {\n\n  get: function (index) {\n    const bufIndex = Math.floor(index / 8)\n    return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) === 1\n  },\n\n  put: function (num, length) {\n    for (let i = 0; i < length; i++) {\n      this.putBit(((num >>> (length - i - 1)) & 1) === 1)\n    }\n  },\n\n  getLengthInBits: function () {\n    return this.length\n  },\n\n  putBit: function (bit) {\n    const bufIndex = Math.floor(this.length / 8)\n    if (this.buffer.length <= bufIndex) {\n      this.buffer.push(0)\n    }\n\n    if (bit) {\n      this.buffer[bufIndex] |= (0x80 >>> (this.length % 8))\n    }\n\n    this.length++\n  }\n}\n\nmodule.exports = BitBuffer\n","exports.L = { bit: 1 }\nexports.M = { bit: 0 }\nexports.Q = { bit: 3 }\nexports.H = { bit: 2 }\n\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  const lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'l':\n    case 'low':\n      return exports.L\n\n    case 'm':\n    case 'medium':\n      return exports.M\n\n    case 'q':\n    case 'quartile':\n      return exports.Q\n\n    case 'h':\n    case 'high':\n      return exports.H\n\n    default:\n      throw new Error('Unknown EC Level: ' + string)\n  }\n}\n\nexports.isValid = function isValid (level) {\n  return level && typeof level.bit !== 'undefined' &&\n    level.bit >= 0 && level.bit < 4\n}\n\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n"],"names":["Utils","ECLevel","BitBuffer","BitMatrix","AlignmentPattern","FinderPattern","MaskPattern","ECCode","ReedSolomonEncoder","Version","FormatInfo","Mode","Segments","setupFormatInfo","matrix","errorCorrectionLevel","maskPattern","size","bits","getEncodedBits","i","mod","set","createData","version","segments","buffer","forEach","data","put","mode","bit","getLength","getCharCountIndicator","write","dataTotalCodewordsBits","getSymbolTotalCodewords","getTotalCodewordsCount","getLengthInBits","putBit","remainingByte","bitBuffer","totalCodewords","ecTotalCodewords","dataTotalCodewords","ecTotalBlocks","getBlocksCount","blocksInGroup2","blocksInGroup1","totalCodewordsInGroup1","Math","floor","dataCodewordsInGroup1","dataCodewordsInGroup2","ecCount","rs","offset","dcData","Array","ecData","maxDataSize","Uint8Array","b","dataSize","slice","encode","max","r","index","length","createCodewords","createSymbol","isArray","fromArray","Error","estimatedVersion","rawSegments","rawSplit","getBestVersionForData","fromString","bestVersion","dataBits","moduleCount","getSymbolSize","modules","pos","getPositions","row","col","c","setupFinderPattern","value","setupTimingPattern","setupAlignmentPattern","setupVersionInfo","inc","bitIndex","byteIndex","isReserved","dark","setupData","isNaN","getBestMask","bind","applyMask","exports","create","options","mask","M","from","toSJISFunc","setToSJISFunction","VersionCheck","Regex","NUMERIC","id","ccBits","ALPHANUMERIC","BYTE","KANJI","MIXED","isValid","getBestModeForData","dataStr","testNumeric","testAlphanumeric","testKanji","toString","defaultValue","string","toLowerCase","e","Patterns","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PenaltyScores","getMaskAt","j","parseInt","undefined","getPenaltyN1","points","sameCountCol","sameCountRow","lastCol","lastRow","module","get","getPenaltyN2","last","getPenaltyN3","bitsCol","bitsRow","getPenaltyN4","darkCount","modulesCount","abs","ceil","pattern","xor","setupFormatFunc","numPatterns","Object","keys","bestPattern","lowerPenalty","Infinity","p","penalty","G18_BCH","getBCHDigit","getReservedBitsCount","getTotalBitsFromDataArray","totalBits","reservedBits","getBitsLength","getCapacity","usableBits","seg","ecl","currentVersion","getBestVersionForMixedData","getBestVersionForDataLength","d","ALPHA_NUM_CHARS","AlphanumericData","this","prototype","indexOf","charenc","utf8","stringToBytes","str","bin","unescape","encodeURIComponent","bytesToString","bytes","decodeURIComponent","escape","push","charCodeAt","String","fromCharCode","join","EXP_TABLE","LOG_TABLE","x","log","n","exp","mul","y","crypt","isBuffer","md5","message","constructor","encoding","call","m","bytesToWords","l","a","FF","_ff","GG","_gg","HH","_hh","II","_ii","aa","bb","cc","dd","endian","s","t","_blocksize","_digestsize","digestbytes","wordsToBytes","asBytes","asString","bytesToHex","base64map","rotl","rotr","Number","randomBytes","random","words","hex","hexToBytes","substr","bytesToBase64","base64","triplet","charAt","base64ToBytes","replace","imod4","pow","NumericData","group","remainingNum","INPUT_ERROR","WINDOW","window","root","JS_SHA512_NO_WINDOW","WEB_WORKER","self","JS_SHA512_NO_NODE_JS","process","versions","node","g","COMMON_JS","JS_SHA512_NO_COMMON_JS","AMD","ARRAY_BUFFER","JS_SHA512_NO_ARRAY_BUFFER","ArrayBuffer","HEX_CHARS","split","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","obj","isView","JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW","formatMessage","type","createOutputMethod","outputType","Sha512","update","createMethod","method","createHmacOutputMethod","key","HmacSha512","createHmacMethod","sharedMemory","h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","block","start","hBytes","finalized","hashed","result","code","array","oKeyPad","iKeyPad","inner","isString","lastByteIndex","hash","finalize","s0h","s0l","s1h","s1l","c1","c2","c3","c4","abh","abl","dah","dal","cdh","cdl","bch","bcl","majh","majl","t1h","t1l","t2h","t2l","chh","chl","ah","al","bh","bl","ch","cl","dh","dl","eh","el","fh","fl","gh","gl","hh","hl","digest","arr","arrayBuffer","dataView","DataView","setUint32","clone","copyTo","attrs","innerHash","sha512","sha384","sha512_256","sha512_224","hmac","G15_BCH","_min","d0","d1","d2","bx","ay","tmp","la","lb","d3","dy","bx0","bx1","bx2","bx3","vector","len","GF","p1","p2","coeff","divident","divisor","generateECPolynomial","degree","poly","Polynomial","genPoly","initialize","paddedData","remainder","buff","KanjiData","toSJIS","ByteData","TextEncoder","dijkstra","single_source_shortest_paths","graph","predecessors","costs","closest","u","v","cost_of_s_to_u","adjacent_nodes","cost_of_s_to_u_plus_cost_of_e","cost_of_s_to_v","open","PriorityQueue","make","empty","pop","cost","hasOwnProperty","msg","extract_shortest_path_from_predecessor_list","nodes","reverse","find_path","opts","T","queue","sorter","default_sorter","item","sort","shift","getRowColCoords","posCount","intervals","positions","coords","posLength","areItemsDifferent","getIntersection","arrayA","arrayB","_step","_iterator","_createForOfIteratorHelper","done","err","f","_step2","_iterator2","convertPositionsToDistance","lat1","lon1","lat2","lon2","dLat","PI","dLon","sin","cos","atan2","sqrt","convertBytes","contentLength","units","convertNumberToLetters","number","generateLetterLabels","quantity","mergeAddressesIntoOne","addresses","parts","suffixes","map","trim","replaceAll","toNumber","char","numbers","reduce","_numbers","match","parseAddress","address","regex","RegExp","_i","_parts","_part","part","parsedAddress","_i2","_parts2","concat","Set","filter","mergeAddresses","addressToString","city","district","road","road_section","alley","alley_branch","doorplate","floornumber","direction","o","Symbol","iterator","asyncGeneratorStep","Promise","resolve","then","arguments","apply","_next","_throw","offsetDate","origin","date","hours","minutes","duplicatedOrigin","Date","setDate","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","setFullYear","getFullYear","getMonth","getDate","dateToString","padStart","getHours","getMinutes","getSeconds","dateToRelativeTime","time","getTime","seconds","interval","formatTime","roundedTime","parseFloat","toFixed","indexToDay","name","day","dateValueToDayOfWeek","dateValue","timeObjectToString","timeObject","localforage","require","storage","cacheStore","settingsStore","dataUsageStatsStore","updateRateDataStore","updateRateDataWriteAheadLogStore","busArrivalTimeDataWriteAheadLogStore","busArrivalTimeDataStore","personalScheduleStore","recentViewsStore","notificationStore","notificationScheduleStore","folderListStore","folderContentIndexStore","folderContentStore","stores","lfSetItem","_x2","_x3","_x4","_lfSetItem","_asyncToGenerator","store","storeKey","createInstance","setItem","lfGetItem","_x5","_x6","_lfGetItem","getItem","lfRemoveItem","_x7","_x8","_lfRemoveItem","removeItem","lfListItemKeys","_x9","_lfListItemKeys","isStoragePersistent","_isStoragePersistent","navigator","persist","persisted","_askForPersistentStorage","_recordDataUsage","existingDataUsageStatsChunkJSON","existingDataUsageStatsChunkObject","JSON","parse","stats","sum","changedData","min","stringify","newDataUsageStatsChunk","Uint32Array","_listDataUsageStatsChunks","endDate","startDate","blankDataUsageStatsChunk","_getDataUsageStats","width","height","padding","worker","Worker","URL","dataUsageStatsChunks","listDataUsageStatsChunks","reject","onmessage","terminate","onerror","postMessage","documentQuerySelector","selectorExpression","document","querySelector","documentQuerySelectorAll","querySelectorAll","elementQuerySelector","element","elementQuerySelectorAll","getElementsBelow","referenceElement","className","elements","sibling","nextElementSibling","classList","contains","getAPIURL","api","alternative","cities","buckets","proxy","getSettingOptionValue","getNoCacheParameter","port","pakoInflateWorkerResponses","SharedWorker","pakoInflateSharedWorker","pakoInflateWorker","_pakoInflate","taskID","generateIdentifier","_e$data","_slicedToArray","tasks","FetchError","fetchData","_x","_fetchData","url","requestID","tag","fileType","processing","requests","timestamp","setDataReceivingProgress","failed","response","fetch","ok","status","headers","reader","body","getReader","chunks","receivedLength","_yield$reader$read","read","progress","request","uint8Array","position","_chunks","chunk","blob","Blob","inflatedData","pakoInflate","test","now","recordDataUsage","discardExpiredFetchTasks","dataReceivingProgress","expel","broadcastDataReceivingProgress","total","getDataReceivingProgress","_typeof","received","deleteDataReceivingProgress","stage","eventDict","target","event","CustomEvent","detail","dispatchEvent","dataUpdateTime","setDataUpdateTime","timeNumber","year","month","date_object","timeStampToNumber","getDataUpdateTime","deleteDataUpdateTime","getBusData","_getBusData","BusInfo","EssentialInfo","UpdateTime","getBusEvent","_getBusEvent","CarInfoAPIVariableCache","raw","available","simplified","simplifyCarInfo","_simplifyCarInfo","CarInfo","getCarInfo","_getCarInfo","getData","_getData","cacheType","cacheKey","cacheTimestamp","finalResult","cache","LocationAPIVariableCache","merged","indexed","simplifyLocation","_simplifyLocation","Location","mergeLocationByName","_mergeLocationByName","object","indexLocationByGeohash","_indexLocationByGeohash","getLocation","_getLocation","simplified_result","merged_result","StopAPIVariableCache_available","StopAPIVariableCache_data","simplifyStop","_simplifyStop","getStop","_getStop","parseEstimateTime","EstimateTime","text","parseTimeCode","codeLength","substring","number1","number2","parseCarType","CarType","parseCarOnStop","CarOnStop","onStop","parseBusStatus","BusStatus","situation","formatBus","batchFoundBus","carNumber","BusID","RouteName","onThisRoute","getUnicodes","unique","stringLength","unicode","RouteAPIVariableCache_available","RouteAPIVariableCache_data","simplifyRoute","_simplifyRoute","Route","getRoute","_getRoute","searchRouteByRouteID","_searchRouteByRouteID","RouteID","routeKey","_searchRouteByPathAttributeId","PathAttributeId","thisRoute","pid","searchIndex","searchList","readyToSearch","_prepareForSearch","mergedLocation","list","thisItem","dep","des","lo","_step5","_iterator5","thisLocation","_step6","_iterator6","thisCarInfo","BusId","CarNum","_step7","_iterator7","calculateSearchResultScore","queryUnicodes","resultUnicodes","score","_integrateBus","carKey","BusData","BusEvent","Stop","properties","LocationName","thisCar","thisCarNumber","icon","thisBusDataItem","BusDataItem","thisBusDataItemPathAttributeId","thisBusDataItemGoBack","GoBack","thisBusEventItem","BusEventItem","thisBusEventItemStopID","StopID","searchedRoutes","searchRouteByPathAttributeId","searchedRoute","thisRouteID","thisRouteFullPathAttributeId","thisRouteName","thisRouteDeparture","thisRouteDirection","FullPathAttributeId","StopKey","thisLocationItemName","stopLocationId","listRecentViews","_listRecentViews","itemObject","toISOString","logRecentView","_logRecentView","param","existingJSON","existingRecentViewObject","recentViewRouteObject","LocationKey","recentViewLocationObject","CarKey","recentViewBusObject","getRecentView","_getRecentView","existingRecentViewRoute","getIconHTML","identifier","getIconElement","iconElement","createElement","add","innerText","getBlankIconElement","setIcon","parentElement","previousProperties","previousSkeletonScreen","previousAnimation","generateElementOfBusProperty","appendChild","valueElement","updateBusPropertiesField","skeletonScreen","animation","updateProperty","thisElement","thisProperty","previousProperty","updateIcon","updateValue","updateAnimation","setAttribute","updateSkeletonScreen","compareThings","propertyQuantity","currentPropertyCapacity","BusPropertiesGroupBodyElement","difference","fragment","DocumentFragment","newPropertyElement","append","propertyElements","remove","thisPropertyElement","BusField","BusBodyElement","BusGroupsElement","BusPropertiesGroupElement","openBus","pushPageHistory","_initializeBusPage","initializeBusPage","closePreviousPage","playing_animation","setUpBusPropertiesFieldSkeletonScreen","integration","integrateBus","createPersonalSchedule","_createPersonalSchedule","startHours","startMinutes","endHours","endMinutes","days","isInteger","period","end","getPersonalSchedule","_getPersonalSchedule","personalScheduleID","existingPersonalSchedule","updatePersonalSchedule","_updatePersonalSchedule","personalSchedule","listPersonalSchedules","_listPersonalSchedules","existingPersonalScheduleObject","getBusArrivalTimeDataStatsPort","getBusArrivalTimeDataStatsWorkerTasks","getBusArrivalTimeDataStatsWorker","_listBusArrivalTimeDataGroups","_step4","_iterator4","json","getBusArrivalTimesPort","getBusArrivalTimesWorkerResponses","getUpdateRateSharedWorker","getUpdateRateWorker","getBusArrivalTimes","_getBusArrivalTimes","chartWidth","chartHeight","personalSchedules","busArrivalTimeDataGroups","listBusArrivalTimeDataGroups","_e$data2","updateRateData_groups","getUpdateRateWorkerResponses","getUpdateRate","_getUpdateRate","oneWeekAgo","dataGroups","getEstimateTime","_getEstimateTime","MaterialSymbolsAPIVariableCache_available","MaterialSymbolsAPIVariableCache_data","getMaterialSymbolsSearchIndex","_getMaterialSymbolsSearchIndex","apiurl","getMaterialSymbolsAPIURL","FolderList","createFolder","_createFolder","materialSymbolsSearchIndex","symbols","folderID","folderKey","newFolder","updateFolder","_updateFolder","existingFolderJSON","existingFolderObject","modifiedFolder","getFolder","listFolderContent","_listFolderContent","thisFolder","thisFolderContentIndexJSON","thisFolderContentIndexArray","thisFolderContentKey","thisContentJSON","thisContentObject","getFolderContentLength","_getFolderContentLength","listFoldersWithContent","_listFoldersWithContent","_step3","folders","folderObject","listFolders","_iterator3","folder","folderContent","folderContentLength","content","saveToFolder","_x0","_x1","_saveToFolder","contentKey","isFolderContentSaved","_x10","_x11","_isFolderContentSaved","_step9","folderContentKeyToCheck","_iterator9","_removeFromFolder","splice","saveStop","_x15","_x16","_x17","_saveStop","thisStop","thisStopDirection","goBack","thisStopName","thisRouteDestination","newContent","route","endPoints","departure","destination","saveRoute","_x18","_x19","_saveRoute","thisRouteKey","saveLocation","_x20","_x21","_saveLocation","thisLocationKey","_updateFolderContentIndex","_prepareForMaterialSymbolsSearch","dictionary","names","wordToSymbols","nameIndex","symbol","wordIndexKey","dataDownloadCompleted","HomeHeadElement","homeButtonRightElement","currentTarget","folderEditorField","folderCreatorField","folderIconSelectorField","generateElementOfSymbol","onclick","iconInputElement","revokePageHistory","selectFolderIcon","_initializeFolderIconSelectorField","materialSymbolsElement","innerHTML","materialSymbols","symbolElement","openFolderIconSelector","initializeFolderIconSelectorField","prepareForMaterialSymbolsSearch","promptMessage","FolderCreatorField","FolderCreatorBodyElement","FolderCreatorGroupsElement","closeFolderCreator","openPreviousPage","FolderEditorField","FolderEditorHeadElement","LeftButtonElement","FolderEditorBodyElement","FolderEditorGroupsElement","NameInputElement","IconInputElement","OpenFolderIconSelectorElement","FolderContentElement","generateElementOfItem","itemElement","context","main","contextElement","createTextNode","mainElement","capsuleElement","sortUpElement","moveItemOnFolderEditor","sortDownElement","deleteElement","itemID","_x12","_x13","_x14","removeFromFolder","removeItemOnFolderEditor","separator1Element","separator2Element","updateFolderEditorField","closeFolderEditor","thisItemElement","_initializeFolderEditorField","openFolderEditor","initializeFolderEditorField","_x22","_x23","_x24","_x25","updateFolderContentIndex","previousSibling","previousElementSibling","parentNode","insertBefore","nextSibling","FolderManagerField","FolderManagerBodyElement","FolderManagerFolderListElement","folderItemElement","nameElement","statusElement","arrowElement","_initializeFolderManagerField","foldersWithContent","newItemElement","openFolderManager","initializeFolderManagerField","PersonalScheduleEditorField","PersonalScheduleEditorBodyElement","PersonalScheduleEditorHeadElement","leftButtonElement","PersonalScheduleEditorGroups","nameInputElement","startTimeInputElement","endTimeInputElement","dayGroupBodyElement","dayElements","_saveEditedPersonalSchedule","startTime","endTime","_String$split$map","_String$split$map2","_String$split$map3","_String$split$map4","thisDayElement","highlighted","getAttribute","closePersonalScheduleEditor","_initializePersonalScheduleEditorField","saveEditedPersonalSchedule","openPersonalScheduleEditor","initializePersonalScheduleEditorField","PersonalScheduleManagerField","PersonalScheduleManagerBodyElement","ListElement","_initializePersonalScheduleManagerField","openPersonalScheduleManager","initializePersonalScheduleManagerField","getNotificationAPIURL","NotificationProvider","searchParams","getNotificationToken","client_id","secret","payload","getNotificationRequestBody","parameters","NotificationClientID","NotificationSecret","token","schedule_id","currentDate","stop_id","location_name","route_id","route_name","estimate_time","time_formatting_mode","time_offset","scheduled_time","makeNotificationRequest","_makeNotificationRequest","requestOptions","credentials","jsonError","error","_rotateNotificationSecret","requestBody","_saveNotificationClient","saveNotificationClient","_scheduleNotification","processed_schedule_time","rotateNotificationSecret","_saveNotificationSchedule","saveNotificationSchedule","NotifcationSchedules","NotifcationSchedulesIndex","NotifcationSchedulesStopIDIndex","currentClient","provider","getNotificationClientStatus","thisNotificationSchedule","thisNotificationScheduleStopKey","thisNotificationScheduleIndex","_removeNotificationSchedule","existingScheduleIndex","thisScheduleStopKey","stopHasNotifcationSchedules","thisStopKey","thisSchedule","integrateNotifcationSchedules","_integrateNotifcationSchedules","notificationSchedules","listNotifcationSchedules","items","integratedItem","thisItemName","thisItemStopID","thisItemEstimateTime","thisItemScheduleID","thisItemScheduledTime","thisItemScheduledTimeDateInstance","thisItemDate","thisItemHours","thisItemMinutes","thisNotificationScheduleRouteKey","thisNotificationScheduleRoutePathAttributeId","pathAttributeId","items2","itemQuantity","groups","_items","groupKey","is_first","scheduleNotificationOptions","scheduleNotificationForStop","_scheduleNotificationForStop","thisStopLocationId","thisStopGoBack","thisLocationName","RouteKey","timeOffset","scheduling","scheduleNotification","RegisterNotificationField","RegisterNotificationBodyElement","RegisterNotificationGroupsElement","ProviderInputElement","RgistrationKeyInputElement","initializeRegisterNotificationField","getTextWidth","weight","fontFamily","canvas","getContext","font","measureText","drawRoundedRect","ctx","radius","fill","tl","tr","br","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fillStyle","generateRoundedRectPath","inverted","_radius","command","CssVariableValueCache","light","getCSSVariableValue","property","CurrentColorScheme","matchMedia","matches","getComputedStyle","documentElement","getPropertyValue","normalizeVector","hypot","componentQuantity","newVector","Float32Array","scale","UnknownCardinalDirection","NorthCardinalDirection","WestCardinalDirection","SouthCardinalDirection","EastCardinalDirection","NorthEastCardinalDirection","SQRT1_2","SouthEastCardinalDirection","SouthWestCardinalDirection","NorthWestCardinalDirection","getCardinalDirectionFromVector","directions","unitVector","maxDotProduct","bestMatch","_directions","dotProduct","userOrientation","current","permission","gained","asked","getUserOrientation","alpha","cardinalDirection","angle","rankBatchFoundEstimateTime","batchFoundEstimateTime","StopIDList","rankingArray","thisBatchFoundEstimateTimeItem","thisStopID","thisEstimateTime","rankingArrayLength","_rankingArray","rankingRatio","rankingCode","_integrateLocation","BusArrivalTimes","location_labels","display_user_orientation","groupedItems","stopLocationIds","setsOfVectors","StopIDs","RouteIDs","stopLocationQuantity","batchFindEstimateTime","batchFoundBuses","BusDataObj","processedItem","thisBusID","thisBusData","latitude","Latitude","longitude","Longitude","isRouteSearched","thisRouteItem","batchFindBusesForLocation","cardinalDirections","vectorSet","labels","filledProperties","commonProperties","entries","commonProperty","components","component","componentLen","generateLabelFromAddresses","generateDirectionLabels","thisGroupStops","stopQuantity","thisGroupRanking","stopId","thisItemRanking","ranking","route_direction","routeId","parsedEstimateTime","buses","thisBusArrivalTimes","busArrivalTimes","groupQuantity","SaveToFolderField","SaveToFolderBodyElement","SaveToFolderListElement","successfulSaveMessage","failedSaveMessage","iconSpanElement","itemElementID","saveToFolderButtonElement","k","booleanToString","closeSaveToFolder","saveStopItemOnRoute","saveStopItemOnLocation","actionButtonElement","_initializeSaveToFolderField","openSaveToFolder","initializeSaveToFolderField","ScheduleNotificationField","ScheduleNotificationBodyElement","ScheduleNotificationListElement","scheduleNotificationButtonElement","closeScheduleNotification","scheduleNotificationForStopItemOnRoute","scheduleNotificationForStopItemOnLocation","openScheduleNotification","newElement","initializeScheduleNotificationField","_integrateLocationDetails","actions","actionsQuantity","action","_shareLocationPermalink","shareLocationPermalink","_showLocationPermalinkQRCode","showLocationPermalinkQRCode","SegmentBuffersAPIVariableCache_available","SegmentBuffersAPIVariableCache_data","extractSegmentBuffers","_extractSegmentBuffers","xml","simplifySegmentBuffers","_simplifySegmentBuffers","_getSegmentBuffers","extractedResult","simplifiedResult","userPosition","getUserPosition","geolocation","watchPosition","enableHighAccuracy","timeout","maximumAge","_integrateRoute","SimplifiedLocation","MergedLocation","IndexedLocation","SegmentBuffers","getSegmentBuffers","isOnThisRoute","batchFindBusesForRoute","hasSegmentBuffers","thisSegmentBuffers","integratedStopItem","includes","sequence","seqNo","thisSimplifiedLocation","overlappingRoutes","overlappingRouteKey","overlappingRoute","RouteEndPoints","RouteDeparture","RouteDestination","html","thisSimplifiedLocationGeohash","thisIndexedLocationItem","nearbyLocations","mergedLocationKey","thisMergedLocation","nearbyLocationItem","distance","overlappingStopKey","flat","isSegmentBuffer","isStartingPoint","isEndingPoint","useReversed","segmentBufferGroup","thisBufferZone","OriginStopID","DestinationStopID","segmentBuffer","nearestPosition","currentUserPosition","shortestDistance","nearestIndex","getNearestPosition","isBufferZoneOpened","isBufferZoneClosed","resultLength","nextItem","_ref","_ref2","x1","y1","_ref3","x2","y2","distance1","distance2","isNearest","nearest","result2","ProviderAPIVariableCache_available","ProviderAPIVariableCache_data","_getProvider","SemiTimetableAPIVariableCache_available","SemiTimetableAPIVariableCache_data","_getSemiTimeTable","TimetableAPIVariableCache_available","TimetableAPIVariableCache_data","_getTimeTable","generateCalendarFromTimeTables","timeTableRules","SemiTimeTable","TimeTable","today","dayOfToday","originDate","calendar","calendarDays","d_0","d_1","d_2","d_3","d_4","d_5","d_6","calendarDayQuantity","calendarEventGroups","calendarEventQuantity","thisWeekOrigin","getDay","DateType","dayOfWeek","DateValue","thisDayOrigin","thisPeriodStartTime","StartTime","thisPeriodStartTimeDateObject","thisPeriodEndTime","EndTime","thisPeriodEndTimeDateObject","thisPeriodDurationInMinutes","minWindow","LongHeadway","maxWindow","LowHeadway","averageWindow","headwayQuantity","violateRules","thisHeadwayDate","dateString","duration","deviation","thisDepartureTime","DepartureTime","_integrateRouteDetails","Id","findRoute","getSemiTimeTable","getTimeTable","Provider","getProvider","thisRouteGoFirstBusTime","goFirstBusTime","thisRouteGoLastBusTime","goLastBusTime","thisRouteBackFirstBusTime","backFirstBusTime","thisRouteBackLastBusTime","backLastBusTime","thisRouteGoFirstBusTimeOnHoliday","holidayGoFirstBusTime","thisRouteGoLastBusTimeOnHoliday","holidayGoLastBusTime","thisRouteBackFirstBusTimeOnHoliday","holidayBackFirstBusTime","thisRouteBackLastBusTimeOnHoliday","holidayBackLastBusTime","rushHourWindow","peakHeadway","offRushHourWindow","offPeakHeadway","rushHourWindowOnHoliday","holidayPeakHeadway","offRushHourWindowOnHoliday","holidayOffPeakHeadway","go","weekday","first","holiday","back","realSequence","getTimeTableRules","thisProvider","providerId","findProvider","nameZh","ticketPriceDescriptionZh","nameZn","phoneInfo","email","QRCode","generateRoundedQRCodeSVG","outerRadius","innerRadius","filledNeighborhood","blankNeighborhood","qrData","generateQRCodeMatrix","commands","cornerRadius","displayed","_data","neighbor","_data2","some","QRCodeField","QRCodeBodyElement","openQRCode","svg","initializeQRCodeField","_shareRoutePermalink","link","getPermalink","share","title","_showRoutePermalinkQRCode","canvasSize","querySize","canvasWidth","canvasHeight","canvasScale","devicePixelRatio","previousCalendar","generateElementOfDay","generateElementOfEventGroup","eventGroupElement","canvasElement","updateDay","thisDay","currentDay","calendarDayElements","CalendarDaysElement","CalendarEventGroupElements","CalendarEventGroupsElement","_previousCalendar","_previousCalendar2","thisCalendarDayElement","thisEventGroupElement","eventGroupKey","calendarEventGroup","calendarDay","mainColorR","mainColorG","mainColorB","mainColorA","mainColor","gridColor","updateEventGroup","switchCalendarDay","thisCalendarEventGroupElement","thisCalendarEventGroup","drawGridline","thisContext","boxY","fillRect","boxX","textBaseline","labelText","labelMeasurement","labelWidth","labelHeight","actualBoundingBoxDescent","fillText","drawEvent","thisCalendarEvent","thisDayStart","boxWidth","boxHeight","textMeasurement","textWidth","textHeight","thisCalendarEventGroupCanvas","thisCalendarEventGroupCanvasContext","isDisplayed","updateDisplayed","setTransform","resizeRouteDetailsCalendarCanvas","clearRect","updateCalendarGroup","eventGroups","eventGroupQuantity","currentEventGroupCapacity","calendarDaysFragment","calendarEventGroupsFragment","newDayElement","newEventGroupElement","CalendarDayElements","eventGroupIndex","thisEventGroup","generateElementOfProperty","propertyElement","updatePropertiesField","PropertiesGroupElement","PropertiesGroupBodyElement","RouteDetailsField","RouteDetailsBodyElement","RouteDetailsGroupsElement","CalendarGroupElement","CalendarGroupBodyElement","ActionsGroupElement","svaeToFolderActionButtonElement","getPermalinkActionButton","showPermalinkQRCodeActionButton","_initializeRouteDetailsField","existence","shareRoutePermalink","showRoutePermalinkQRCode","setUppropertiesGroupSkeletonScreen","defaultEventQuantity","setUpCalendarGroupSkeletonScreen","integrateRouteDetails","openRouteDetails","initializeRouteDetailsField","RouteField","RouteHeadElement","RouteNameElement","RouteNameSpanElement","RouteButtonRightElement","RouteUpdateTimerElement","RouteGroupTabsElement","RouteGroupTabsTrayElement","RouteGroupTabLineTrackElement","RouteGroupTabLineElement","RouteGroupsElement","previousIntegration","routeSliding_initialIndex","routeSliding_groupQuantity","routeSliding_groupStyles","routeSliding_fieldWidth","routeSliding_sliding","routeRefreshTimer_baseInterval","routeRefreshTimer_minInterval","routeRefreshTimer_dynamicInterval","routeRefreshTimer_dynamic","routeRefreshTimer_lastUpdate","routeRefreshTimer_nextUpdate","routeRefreshTimer_currentRequestID","routeRefreshTimer_refreshing","routeRefreshTimer_streaming","routeRefreshTimer_streamStarted","currentRouteIDSet_RouteID","currentRouteIDSet_PathAttributeId","updateRouteCSS","tabLineWidth","percentage","style","setProperty","handleDataReceivingProgressUpdates","offsetRatio","removeEventListener","generateElementOfThreadBox","threadBoxElement","threadElement","threadProgressElement","threadStatusElement","nextSlideElement","currentSlideElement","threadBoxIdentifier","headElement","stretchElement","threadBoxElementID","itemBodyElement","itemsTrackElement","threadTrackElement","elementsBelowThreadBoxElement","elementsBelowItemElement","elementsBelowLength","itemsTrackElementRect","getBoundingClientRect","itemElementRect","threadTrackElementRect","threadBoxElementY","top","itemElementY","stretched","pushDirection","thisThreadBoxElement","addEventListener","once","stretchRouteItem","capsuleSeparatorElement","bodyElement","buttonsElement","tabBusElement","switchRouteBodyTab","tabBusIconElement","tabArrivalElement","tabArrivalIconElement","tabRouteElement","tabRouteIconElement","tabLocationElement","tabLocationIconElement","saveToFolderElement","saveToFolderIconElement","scheduleNotificationElement","scheduleNotificationIconElement","busesElement","overlappingRoutesElement","busArrivalTimesElement","nearbyLocationsElement","generateElementOfGroup","tracksElement","threadBoxSpace","itemSpaceElement","generateElementOfTab","updateRouteField","_previousIntegration","_previousIntegration2","updateItem","previousItem","updateStatus","thisThreadStatusElement","currentThreadSlideElement","nextThreadSlideElement","thisItemStatusElement","currentItemSlideElement","nextItemSlideElement","thisItemElementRect","left","bottom","right","windowWidth","innerWidth","windowHeight","innerHeight","updateSegmentBuffer","updateName","updateBuses","bus","updateOverlappingRoutes","updateBusArrivalTimes","busArrivalTime","chart","updateNearbyLocations","nearbyLocation","updateNearest","updateThread","previousProgress","thisProgress","thisThreadProgressElement","updateStretch","updateSaveToFolderButton","updateScheduleNotificationButton","havingNotifcationSchedules","WindowSize","FieldWidth","FieldHeight","cumulativeOffset","groupNames","initialGroupStyle","currentGroupCapacity","newGroupsFragment","newTabsFragment","newGroupElement","newTabElement","GroupElements","TabElements","groupIndex","RouteGroupElements","thisGroupElement","thisGroupItemsTrackElement","thisGroupThreadsTrackElement","currentItemCapacity","newItemsFragment","newThreadsFragment","newThreadBoxElement","thisGroupItemElements","thisGroupThreadElements","itemIndex","thisTabElement","scrollTop","refreshRoute","_refreshRoute","refresh_interval_setting","busArrivalTimeChartSize","dynamic","baseInterval","integrateRoute","updateRate","streamRoute","setTimeout","openRoute","scrollLeft","focus","defaultItemQuantity","g_0","g_1","setUpRouteFieldSkeletonScreen","tabCode","buttons","approach","LocationDetailsField","LocationDetailsBodyElement","LocationDetailsActionsElement","updateLocationDetailsField","updateOnclick","currentActionsCapacity","LocationActionElements","_initializeLocationDetailsField","integrateLocationDetails","openLocationDetails","setUpLocationDetailsFieldSkeletonScreen","initializeLocationDetailsField","LocationField","LocationHeadElement","LocationNameElement","LocationNameSpanElement","LocationButtonRightElement","LocationGroupsElement","LocationGroupTabsElement","LocationGroupTabsTrayElement","LocationGroupTabLineTrackElement","LocationGroupTabLineElement","LocationUpdateTimerElement","locationSliding_initialIndex","locationSliding_groupQuantity","locationSliding_groupStyles","locationSliding_fieldWidth","locationSliding_sliding","locationRefreshTimer_baseInterval","locationRefreshTimer_minInterval","locationRefreshTimer_dynamicInterval","locationRefreshTimer_dynamic","locationRefreshTimer_lastUpdate","locationRefreshTimer_nextUpdate","locationRefreshTimer_currentRequestID","locationRefreshTimer_refreshing","locationRefreshTimer_streaming","locationRefreshTimer_streamStarted","currentHashSet_hash","updateLocationCSS","rankElement","rankNextSlideElement","rankCurrentSlideElement","routeDirectionElement","routeNameElement","itemsElement","itemsElementRect","stretchLocationItem","busTabButtonElement","busTabIconElement","switchLocationBodyTab","arrivalTabButtonElement","arrivalTabIconElement","saveButtonElement","saveButtonIconElement","notifyButtonElement","notifyButtonIconElement","groupElement","detailsElement","detailsBodyElement","span","generateElementOfGroupDetailsProperty","updateLocationField","thisElementRect","thisHeadElement","updateRank","thisRankElement","updateRouteDirection","updateRouteName","thisItemBodyElement","thisItemButtonsElement","groupsFragment","tabsFragment","LocationGroupElements","LocationGroupTabElements","thisLocationGroupElement","LocationGroupItemsElement","LocationGroupItemElements","currentGroupPropertyCapacity","groupPropertyQuantity","thisLocationGroupDetailsElement","thisLocationGroupDetailsBodyElement","tabElements","groupElements","itemElements","refreshLocation","_refreshLocation","integrateLocation","streamLocation","openLocation","setUpLocationFieldSkeletonScreen","previousSearchResults","searchField","searchHeadElement","searchBodyElement","searchInputElement","searchInputCanvasElement","searchTypeFilterButtonElement","searchResultsElement","searchKeyboardElement","searchInputCanvasContext","searchInputCanvasScale","cursorWidth","cursorBorderRadius","selectionHighlightBorderRadius","lineHeight","fontSize","keyboardRows","textColor","placeholderTextColor","cursorColor","textWidthToCursorStart","selectedTextWidth","selection","cursorOffset","playingCursorAnimation","keyboardInitialized","deleteCharFromInput","currentValue","getSearchInputValue","newValue","updateSearchResult","updateSearchInput","scrollDocumentToTop","emptyInput","openSystemKeyboard","preventDefault","openKeyboard","newButtonElement","eventName","supportTouch","currentItem","initializeKeyboard","animateCursor","getSearchTypeFilterValue","cursorStart","cursorEnd","textAlign","globalAlpha","performance","requestAnimationFrame","generateElementOfSearchResultItem","searchResultItemElement","typeElement","typeToIcon","updateTypeIcon","updateClickHandler","currentType","searchResults","query","limit","lowerCaseQuery","asIsQueryUnicodes","unicodeGroups","unicodeGroupsLength1","intersection","currentGroup","exactMatchIds","exactMatches","has","searchFor","searchResultLength","searchResultElements2","searchResultElements","openSearch","prepareForSearch","closeSearch","_exportData","settings","Settings","SettingKeys","option","listSettingsWithOptions","RecentViews","personal_schedules","recent_views","importFolders","_importFolders","FolderWithContent","creation","importSettings","_importSettings","SettingWithOption","existingSetting","getSetting","changeSettingOption","importPersonalSchedules","_importPersonalSchedules","PersonalSchedule","_importRecentViews","RecentView","_importData","parsedData","importRecentViews","getHTMLVersionHash","getHTMLVersionBranchName","getTreeURLOfCurrentVersion","getHTMLVersionTimeStamp","SettingsField","SettingsBodyElement","SettingsElement","settingElement","arrowSpanElement","_initializeSettingsField","_listSettings","listSettings","openSettings","initializeSettingsField","_downloadExportFile","exportData","fileName","fileObj","File","canShare","files","downloadBlobFile","releaseFile","pageHistory","page","pageHistoryLength","previousPage","scrollTo","behavior","dataUsageField","dataUsageBodyElement","chartElement","statisticsElement","totalDataUsageElement","maxDataUsagePerMinuteElement","minDataUsagePerMinuteElement","startTimeElement","endTimeElement","_initializeDataUsage","graphWidth","graphHeight","getDataUsageStats","_cancelNotification","removeNotificationSchedule","NotificationScheduleManagerField","NotificationScheduleManagerHeadElement","NotificationScheduleManagerUpdateTimerBoxElement","NotificationScheduleManagerUpdateTimerElement","NotificationScheduleManagerBody","NotificationScheduleList","notifcationScheduleManagerRefreshTimer_baseInterval","notifcationScheduleManagerRefreshTimer_minInterval","notifcationScheduleManagerRefreshTimer_dynamicInterval","notifcationScheduleManagerRefreshTimer_dynamic","notifcationScheduleManagerRefreshTimer_lastUpdate","notifcationScheduleManagerRefreshTimer_nextUpdate","notifcationScheduleManagerRefreshTimer_currentRequestID","notifcationScheduleManagerRefreshTimer_refreshing","notifcationScheduleManagerRefreshTimer_streaming","notifcationScheduleManagerRefreshTimer_streamStarted","hoursElement","notificationScheduleElement","minutesElement","cancelElement","updateNotificationScheduleManagerField","updateHours","updateMinutes","thisItemNotificationScheduleElement","updateMain","updateContext","updateCancel","_cancelNotificationOnNotificationScheduleManager","cancelNotificationOnNotificationScheduleManager","updateFirst","NotificationScheduleItemElements","refreshNotificationScheduleManager","_refreshNotificationScheduleManager","streamNotificationScheduleManager","_streamNotificationScheduleManager","cancellation","cancelNotification","SettingsOptionsField","SettingsOptionsBodyElement","SettingsOptionsOptionsElement","SettingsOptionsDescriptionElement","SettingsOptionsHeadElement","SettingsOptionsTitleElement","setting","optionElement","checkboxContainerElement","checkboxElement","checked","settingKey","settingsOptionsHandler","openSettingsOptions","description","initializeSettingsOptionsField","storeIndexToCategory","_getStoresSizeStatistics","totalSizeInBytes","categorizedSizesInBytes","storesLength","thisStoreSizeInBytes","itemKey","itemLength","thisCategory","thisCategoryKey","category","totalSize","categorizedSizes","thisCategorySize","previousCategories","StorageField","StorageBodyElement","StatisticsElement","statisticsItemElement","updateStorageField","statistics","categories","categoriesQuantity","statisticsItemElements2","statisticsItemElements","_refreshStorageStatistics","defaultCategoriesQuantity","categoryKey","setUpStorageFieldSkeletonScreen","getStoresSizeStatistics","default_option","resourceIntensive","powerSavingAlternative","refresh_interval","display_user_location","boolean","personal_schedule","notification","setUpNotificationScheduleManagerFieldSkeletonScreen","power_saving","data_usage","initializeDataUsage","refreshStorageStatistics","persistent_storage","askForPersistentStorage","export","import","fileInput","file","FileReader","onload","importData","readAsText","click","branch","last_update_date","github","_changeSettingOption","powerSavingSetting","powerSavingSettingValueBoolean","thisSetting","thisSettingOption","thisSettingValue","button","allPromptElements","promptElement","promptIconElement","promptMessageElement","promptButtonElement","anyToString","any","ax","axLength","bxLength","hash_a","hash_b","equal","chars","randomNumber1","randomNumber2","range","blobURL","createObjectURL","downloadLink","href","download","revokeObjectURL","maxTouchPoints","nameKey","processWorkerTask","toSJISFunction","CODEWORDS_COUNT","digit","isKanjiModeEnabled","kanji","numeric","byte","BYTE_KANJI","TEST_KANJI","TEST_NUMERIC","TEST_ALPHANUMERIC","readFloatLE","isSlowBuffer","_isBuffer","EC_BLOCKS_TABLE","EC_CODEWORDS_TABLE","L","Q","H","reservedBit","reserved","getStringByteLength","getSegments","exec","getSegmentsFromString","numSegs","alphaNumSegs","byteSegs","kanjiSegs","s1","s2","getSegmentBitsLength","buildSingleSegment","modesHint","bestMode","acc","segs","buildNodes","table","prevNodeIds","nodeGroup","currentNodeIds","lastCount","prevNodeId","buildGraph","path","optimizedSegs","curr","prevSeg","mergeSegments","bufIndex","num","level"],"ignoreList":[],"sourceRoot":""}