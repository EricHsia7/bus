/*! For license information please see 7c834f3468ff2c9c038b.js.LICENSE.txt */
!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("bus",[],n):"object"==typeof exports?exports.bus=n():r.bus=n()}(self,(()=>(()=>{var r={2151:r=>{var n={utf8:{stringToBytes:function(r){return n.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(n.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var n=[],t=0;t<r.length;t++)n.push(255&r.charCodeAt(t));return n},bytesToString:function(r){for(var n=[],t=0;t<r.length;t++)n.push(String.fromCharCode(r[t]));return n.join("")}}};r.exports=n},3939:r=>{var n,t;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return 16711935&t.rotl(r,8)|4278255360&t.rotl(r,24);for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(r){for(var n=[],t=0,e=0;t<r.length;t++,e+=8)n[e>>>5]|=r[t]<<24-e%32;return n},wordsToBytes:function(r){for(var n=[],t=0;t<32*r.length;t+=8)n.push(r[t>>>5]>>>24-t%32&255);return n},bytesToHex:function(r){for(var n=[],t=0;t<r.length;t++)n.push((r[t]>>>4).toString(16)),n.push((15&r[t]).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],t=0;t<r.length;t+=2)n.push(parseInt(r.substr(t,2),16));return n},bytesToBase64:function(r){for(var t=[],e=0;e<r.length;e+=3)for(var o=r[e]<<16|r[e+1]<<8|r[e+2],u=0;u<4;u++)8*e+6*u<=8*r.length?t.push(n.charAt(o>>>6*(3-u)&63)):t.push("=");return t.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],e=0,o=0;e<r.length;o=++e%4)0!=o&&t.push((n.indexOf(r.charAt(e-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(r.charAt(e))>>>6-2*o);return t}},r.exports=t},7206:r=>{function n(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}r.exports=function(r){return null!=r&&(n(r)||function(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&n(r.slice(0,0))}(r)||!!r._isBuffer)}},3503:(r,n,t)=>{var e,o,u,i,s;e=t(3939),o=t(2151).utf8,u=t(7206),i=t(2151).bin,(s=function(r,n){r.constructor==String?r=n&&"binary"===n.encoding?i.stringToBytes(r):o.stringToBytes(r):u(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var t=e.bytesToWords(r),a=8*r.length,f=1732584193,c=-271733879,l=-1732584194,p=271733878,y=0;y<t.length;y++)t[y]=16711935&(t[y]<<8|t[y]>>>24)|4278255360&(t[y]<<24|t[y]>>>8);t[a>>>5]|=128<<a%32,t[14+(a+64>>>9<<4)]=a;var g=s._ff,h=s._gg,v=s._hh,m=s._ii;for(y=0;y<t.length;y+=16){var d=f,b=c,x=l,A=p;f=g(f,c,l,p,t[y+0],7,-680876936),p=g(p,f,c,l,t[y+1],12,-389564586),l=g(l,p,f,c,t[y+2],17,606105819),c=g(c,l,p,f,t[y+3],22,-1044525330),f=g(f,c,l,p,t[y+4],7,-176418897),p=g(p,f,c,l,t[y+5],12,1200080426),l=g(l,p,f,c,t[y+6],17,-1473231341),c=g(c,l,p,f,t[y+7],22,-45705983),f=g(f,c,l,p,t[y+8],7,1770035416),p=g(p,f,c,l,t[y+9],12,-1958414417),l=g(l,p,f,c,t[y+10],17,-42063),c=g(c,l,p,f,t[y+11],22,-1990404162),f=g(f,c,l,p,t[y+12],7,1804603682),p=g(p,f,c,l,t[y+13],12,-40341101),l=g(l,p,f,c,t[y+14],17,-1502002290),f=h(f,c=g(c,l,p,f,t[y+15],22,1236535329),l,p,t[y+1],5,-165796510),p=h(p,f,c,l,t[y+6],9,-1069501632),l=h(l,p,f,c,t[y+11],14,643717713),c=h(c,l,p,f,t[y+0],20,-373897302),f=h(f,c,l,p,t[y+5],5,-701558691),p=h(p,f,c,l,t[y+10],9,38016083),l=h(l,p,f,c,t[y+15],14,-660478335),c=h(c,l,p,f,t[y+4],20,-405537848),f=h(f,c,l,p,t[y+9],5,568446438),p=h(p,f,c,l,t[y+14],9,-1019803690),l=h(l,p,f,c,t[y+3],14,-187363961),c=h(c,l,p,f,t[y+8],20,1163531501),f=h(f,c,l,p,t[y+13],5,-1444681467),p=h(p,f,c,l,t[y+2],9,-51403784),l=h(l,p,f,c,t[y+7],14,1735328473),f=v(f,c=h(c,l,p,f,t[y+12],20,-1926607734),l,p,t[y+5],4,-378558),p=v(p,f,c,l,t[y+8],11,-2022574463),l=v(l,p,f,c,t[y+11],16,1839030562),c=v(c,l,p,f,t[y+14],23,-35309556),f=v(f,c,l,p,t[y+1],4,-1530992060),p=v(p,f,c,l,t[y+4],11,1272893353),l=v(l,p,f,c,t[y+7],16,-155497632),c=v(c,l,p,f,t[y+10],23,-1094730640),f=v(f,c,l,p,t[y+13],4,681279174),p=v(p,f,c,l,t[y+0],11,-358537222),l=v(l,p,f,c,t[y+3],16,-722521979),c=v(c,l,p,f,t[y+6],23,76029189),f=v(f,c,l,p,t[y+9],4,-640364487),p=v(p,f,c,l,t[y+12],11,-421815835),l=v(l,p,f,c,t[y+15],16,530742520),f=m(f,c=v(c,l,p,f,t[y+2],23,-995338651),l,p,t[y+0],6,-198630844),p=m(p,f,c,l,t[y+7],10,1126891415),l=m(l,p,f,c,t[y+14],15,-1416354905),c=m(c,l,p,f,t[y+5],21,-57434055),f=m(f,c,l,p,t[y+12],6,1700485571),p=m(p,f,c,l,t[y+3],10,-1894986606),l=m(l,p,f,c,t[y+10],15,-1051523),c=m(c,l,p,f,t[y+1],21,-2054922799),f=m(f,c,l,p,t[y+8],6,1873313359),p=m(p,f,c,l,t[y+15],10,-30611744),l=m(l,p,f,c,t[y+6],15,-1560198380),c=m(c,l,p,f,t[y+13],21,1309151649),f=m(f,c,l,p,t[y+4],6,-145523070),p=m(p,f,c,l,t[y+11],10,-1120210379),l=m(l,p,f,c,t[y+2],15,718787259),c=m(c,l,p,f,t[y+9],21,-343485551),f=f+d>>>0,c=c+b>>>0,l=l+x>>>0,p=p+A>>>0}return e.endian([f,c,l,p])})._ff=function(r,n,t,e,o,u,i){var s=r+(n&t|~n&e)+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._gg=function(r,n,t,e,o,u,i){var s=r+(n&e|t&~e)+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._hh=function(r,n,t,e,o,u,i){var s=r+(n^t^e)+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._ii=function(r,n,t,e,o,u,i){var s=r+(t^(n|~e))+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._blocksize=16,s._digestsize=16,r.exports=function(r,n){if(null==r)throw new Error("Illegal argument "+r);var t=e.wordsToBytes(s(r,n));return n&&n.asBytes?t:n&&n.asString?i.bytesToString(t):e.bytesToHex(t)}}},n={};function t(e){var o=n[e];if(void 0!==o)return o.exports;var u=n[e]={exports:{}};return r[e](u,u.exports,t),u.exports}var e={};return(()=>{"use strict";var r=t(3503);function n(r,n){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=e(r))||n&&r&&"number"==typeof r.length){t&&(r=t);var o=0,u=function(){};return{s:u,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return s=r.done,r},e:function(r){a=!0,i=r},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}function e(r,n){if(r){if("string"==typeof r)return o(r,n);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(r,n):void 0}}function o(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=Array(n);t<n;t++)e[t]=r[t];return e}function u(r){var t=[{suffixes:"市",key:"city",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{suffixes:"區",key:"district",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{suffixes:"鄉鎮村里",key:"area",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{suffixes:"路街道",key:"road",process:function(r){return null===r?null:r.map((function(r){return r.replaceAll(/[\(\)（）]/gim,"").trim()}))},type:0},{suffixes:"段",key:"road_section",process:function(r){for(var n=function(r){switch(r){case"一":return 1;case"二":return 2;case"三":return 3;case"四":return 4;case"五":return 5;case"六":return 6;case"七":return 7;case"八":return 8;case"九":return 9;case"十":return 10}return isNaN(parseInt(r))?0:parseInt(r)},t=String(r).length,e=[],o=0;o<t;o++){var u=n(String(r).charAt(o));10===u?e.length>0&&(e=[10*e.reduce((function(r,n){return r+n}),0)]):e=[e.reduce((function(r,n){return r+n}),0)+u]}return e},type:0},{suffixes:"巷",key:"alley",process:function(r){return null===r?null:r.map((function(r){return parseInt(r.trim().replaceAll(/[巷]/gim))}))},type:0},{suffixes:"弄",key:"alley_branch",process:function(r){return null===r?null:r.map((function(r){return parseInt(r.trim().replaceAll(/[弄]/gim))}))},type:0},{suffixes:"號",key:"doorplate",process:function(r){var n,t=String(r).match(/[0-9]+/gim);return t=(null===(n=t)||void 0===n?void 0:n.map((function(r){return null===r?null:parseInt(r)})))||null},type:0},{suffixes:"樓",key:"floornumber",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{key:"exit",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:2},{key:"direction",process:function(r){return null===r?null:r.map((function(r){return r.trim().replace(/[往向]/gim,"")}))},type:1}];function e(r){for(var n,e,o={},u=0,i=t;u<i.length;u++){var s,a=i[u],f=(n=null===(s=a)||void 0===s?void 0:s.suffixes,0===(e=a.type)?new RegExp("([^市區鄉鎮村里路段街道巷弄號樓與]+[".concat(n,"])"),"gmi"):1===e?new RegExp("([往向]+[東南西北])","gmi"):2===e?new RegExp("([0-9]+[號]出口)","gmi"):void 0);o[a.key]=a.process(String(r).match(f))}return o}return function(r){var o,u={},i=n(r);try{for(i.s();!(o=i.n()).done;)for(var s=e(o.value),a=0,f=t;a<f.length;a++){var c=f[a];u.hasOwnProperty(c.key)||(u[c.key]=[]),u[c.key]=u[c.key].concat(s[c.key])}}catch(r){i.e(r)}finally{i.f()}for(var l in u)u[l]=Array.from(new Set(u[l])).filter((function(r){return!!r})).sort((function(r,n){return"number"==typeof r&&"number"==typeof n?r-n:String(r).charCodeAt(0)-String(n).charCodeAt(0)}));return u}(r)}self.onmessage=function(n){var t=function(n){var t={};for(var e in n){var o=r(String(n[e].n).trim().replaceAll(/[\(（）\)\:：\~～]*/gim,"")),i="ml_".concat(o);t.hasOwnProperty(i)?(t[i].id.push(parseInt(e.split("_")[1])),t[i].r.push(n[e].r),t[i].s.push(n[e].s),t[i].v.push(n[e].v),t[i].lo.push(n[e].lo),t[i].la.push(n[e].la),t[i].a.push(u(n[e].a))):t[i]={n:n[e].n,lo:[n[e].lo],la:[n[e].la],r:[n[e].r],s:[n[e].s],v:[n[e].v],a:[u(n[e].a)],id:[parseInt(e.split("_")[1])],hash:o}}return t}(n.data);self.postMessage(t)}})(),e=e.default})()));
//# sourceMappingURL=7c834f3468ff2c9c038b.js.map