"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[9566,9915],{9566(t,n,e){e.d(n,{$j:()=>I,DW:()=>H,Fq:()=>B,L2:()=>L,LH:()=>j,NC:()=>q,R_:()=>z,Rh:()=>S,Xi:()=>T,aq:()=>V,bq:()=>W,eD:()=>N,g$:()=>J,vV:()=>_,z$:()=>E});var r=e(8024),i=e(6483),a=e(5767),o=e(2063),u=e(8011),f=e(9218),l=e(4293),p=e(424),s=e(2303),y=e(6788),c=e(3459),d=e(4311);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return h(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function g(t,n,e,r,i,a,o){try{var u=t[a](o),f=u.value}catch(t){return void e(t)}u.done?n(f):Promise.resolve(f).then(r,i)}function b(t){return function(){var n=this,e=arguments;return new Promise(function(r,i){var a=t.apply(n,e);function o(t){g(a,r,i,o,u,"next",t)}function u(t){g(a,r,i,o,u,"throw",t)}o(void 0)})}}var O={};function S(){return $.apply(this,arguments)}function $(){return($=b(function*(){var t,n=v(yield(0,d.Su)(11));try{for(n.s();!(t=n.n()).done;){var e=t.value,r=yield(0,d.Ct)(11,e);if(r){var i=JSON.parse(r);O.hasOwnProperty(e)||(O[e]=i)}}}catch(t){n.e(t)}finally{n.f()}})).apply(this,arguments)}function _(t,n){return w.apply(this,arguments)}function w(){return(w=b(function*(t,n){var e=(0,r.zx)(),i=yield(0,f.l)(e);if((0,y.LQ)(e),!i.symbols.hasOwnProperty(n))return!1;var a=(0,r.zx)(),o=`f_${a}`;if(O.hasOwnProperty(o))return!1;if(yield(0,d.Ct)(11,o))return!1;var u={name:t,icon:n,id:a,timestamp:(new Date).getTime()};return O[o]=u,yield(0,d.mL)(11,o,JSON.stringify(u)),yield(0,d.mL)(12,o,JSON.stringify([])),a})).apply(this,arguments)}function J(t,n,e){return C.apply(this,arguments)}function C(){return(C=b(function*(t,n,e){var i=`f_${t}`,a=yield(0,d.Ct)(11,i);if(!a)return!1;var o=JSON.parse(a),u=(0,r.zx)(),l=yield(0,f.l)(u);if((0,y.LQ)(u),!l.symbols.hasOwnProperty(e))return!1;var p={name:n,icon:e,id:t,timestamp:o.timestamp};return O[i]=p,yield(0,d.mL)(11,i,JSON.stringify(p)),!0})).apply(this,arguments)}function L(t){var n=`f_${t}`;return!!O.hasOwnProperty(n)&&{name:O[n].name,icon:O[n].icon,id:O[n].id,timestamp:O[n].timestamp}}function N(t){return x.apply(this,arguments)}function x(){return(x=b(function*(t){var n=[],e=`f_${t}`,r=L(t);if("boolean"==typeof r&&!1===r)return n;var i=yield(0,d.Ct)(12,e);if(!i)return n;var a=JSON.parse(i);if(0===a.length){return n.push({type:"empty",id:0,index:0}),n}var o,u=v(a);try{for(u.s();!(o=u.n()).done;){var f=o.value,l=yield(0,d.Ct)(13,f);if(l){var p=JSON.parse(l);n.push(p)}}}catch(t){u.e(t)}finally{u.f()}return n})).apply(this,arguments)}function P(t){return A.apply(this,arguments)}function A(){return(A=b(function*(t){var n=`f_${t}`,e=yield(0,d.Ct)(12,n);return e?JSON.parse(e).length:0})).apply(this,arguments)}function T(){return k.apply(this,arguments)}function k(){return(k=b(function*(){var t,n=yield function(){var t=[];for(var n in O){var e={name:O[n].name,icon:O[n].icon,id:O[n].id,timestamp:O[n].timestamp};t.push(e)}return t.sort(function(t,n){return t.timestamp-n.timestamp}),t}(),e=[],r=v(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=yield N(i.id),o=yield P(i.id);e.push({name:i.name,icon:i.icon,id:i.id,timestamp:i.timestamp,content:a,contentLength:o})}}catch(t){r.e(t)}finally{r.f()}return e})).apply(this,arguments)}function I(t){return D.apply(this,arguments)}function D(){return(D=b(function*(t){var n=!0;"object"===m(t)&&Array.isArray(t)||(n=!1);var e,r=[],i=v(yield(0,d.Su)(13));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=yield(0,d.Ct)(13,a);if(o){var u=JSON.parse(o);n?t.indexOf(u.type)>-1&&r.push(u):r.push(u)}}}catch(t){i.e(t)}finally{i.f()}return r})).apply(this,arguments)}function z(t){return Q.apply(this,arguments)}function Q(){return(Q=b(function*(t){(0,y.Mf)(t,"getEstimateTime_0",0,!1),(0,y.Mf)(t,"getEstimateTime_1",0,!1),(0,y.Mf)(t,"getRoute_0",0,!1),(0,y.Mf)(t,"getRoute_1",0,!1);var n,e=yield(0,o.K)(t),r=yield(0,l.a)(t,!0),u=yield T(),f=(0,c.Js)("time_formatting_mode"),p=(0,c.Js)("power_saving"),d=(0,c.Js)("refresh_interval"),m=[],h=v(u);try{for(h.s();!(n=h.n()).done;){var g=n.value;m=m.concat(g.content.filter(function(t){return"stop"===t.type}).map(function(t){return t.id}))}}catch(t){h.e(t)}finally{h.f()}var b,O={},S=v(e);try{for(S.s();!(b=S.n()).done;){var $=b.value;if(m.indexOf($.StopID)>-1)O[`s_${$.StopID}`]=$}}catch(t){S.e(t)}finally{S.f()}var _,w=[],J=v(u);try{for(J.s();!(_=J.n()).done;){var C,L=_.value,N={name:L.name,icon:L.icon,id:L.id,timestamp:L.timestamp,content:[],contentLength:L.contentLength},x=v(L.content);try{for(x.s();!(C=x.n()).done;){var P=C.value;switch(P.type){case"stop":var A=`s_${P.id}`,k={};if(!O.hasOwnProperty(A))break;k=O[A],P.status=(0,s.$Q)(k.EstimateTime,f);var I=r[`r_${P.route.id}`];P.route.pathAttributeId=I.pid;break;case"route":var D=r[`r_${P.id}`];P.pathAttributeId=D.pid}N.content.push(P)}}catch(t){x.e(t)}finally{x.f()}w.push(N)}}catch(t){J.e(t)}finally{J.f()}var z={folders:w,dataUpdateTime:(0,y.Zt)(t)};return(0,y.LQ)(t),(0,y.gC)(t),p||(d.dynamic&&(yield(0,a.Eu)(e)),yield(0,i.VZ)(e)),z})).apply(this,arguments)}function E(t,n){return M.apply(this,arguments)}function M(){return(M=b(function*(t,n){var e=`f_${t}`,r=`${n.type}_${n.id}`,i=L(t);if("boolean"==typeof i&&!1===i)return!1;var a=yield(0,d.Ct)(12,e);if(!a)return!1;var o=JSON.parse(a);return(0===o.length||o.indexOf(r)<0)&&(yield(0,d.mL)(12,e,JSON.stringify(o.concat(r))),yield(0,d.mL)(13,r,JSON.stringify(n)),!0)})).apply(this,arguments)}function j(t,n){return R.apply(this,arguments)}function R(){return(R=b(function*(t,n){var e,r=`${t}_${n}`,i=v(yield(0,d.Su)(12));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=yield(0,d.Ct)(12,a);if(o)if(JSON.parse(o).indexOf(r)>-1)return!0}}catch(t){i.e(t)}finally{i.f()}return!1})).apply(this,arguments)}function q(t,n,e){return U.apply(this,arguments)}function U(){return(U=b(function*(t,n,e){var r=`f_${t}`,i=`${n}_${e}`,a=L(t);if("boolean"==typeof a&&!1===a)return!1;var o=yield(0,d.Ct)(12,r);if(!o)return!1;var u=JSON.parse(o),f=u.indexOf(i);return f>-1&&u.length>0&&(u.splice(f,1),yield(0,d.mL)(12,r,JSON.stringify(u))),!1===(yield j(n,e))&&(yield(0,d.iQ)(13,i)),!0})).apply(this,arguments)}function V(t,n,e){return Z.apply(this,arguments)}function Z(){return(Z=b(function*(t,n,e){var i=(0,r.zx)(),a=yield(0,p.T)(i),o=yield(0,u.g)(i,0),f=yield(0,l.a)(i,!0),s=a[`s_${n}`],y=parseInt(s.goBack),c=o[`l_${s.stopLocationId}`].n,d=f[`r_${e}`],m=d.n,v=d.dep,h=d.des,g={type:"stop",id:n,timestamp:(new Date).getTime(),name:c,direction:y,route:{name:m,endPoints:{departure:v,destination:h},id:e}};return yield E(t,g)})).apply(this,arguments)}function B(t,n){return F.apply(this,arguments)}function F(){return(F=b(function*(t,n){var e=(0,r.zx)(),i=yield(0,l.a)(e,!0);(0,y.LQ)(e),(0,y.gC)(e);var a=`r_${n}`,o={};if(!i.hasOwnProperty(a))return!1;o=i[a];var u={type:"route",id:n,timestamp:(new Date).getTime(),name:o.n,endPoints:{departure:o.dep,destination:o.des}};return yield E(t,u)})).apply(this,arguments)}function H(t,n){return K.apply(this,arguments)}function K(){return(K=b(function*(t,n){var e=(0,r.zx)(),i=yield(0,u.g)(e,1);(0,y.LQ)(e),(0,y.gC)(e);var a=`ml_${n}`,o={};if(!i.hasOwnProperty(a))return!1;o=i[a];var f={type:"location",id:n,timestamp:(new Date).getTime(),name:o.n};return yield E(t,f)})).apply(this,arguments)}function W(t,n,e,r){return X.apply(this,arguments)}function X(){return(X=b(function*(t,n,e,r){var i=`f_${t}`,a=`${n}_${e}`,o=L(t);if("boolean"==typeof o&&!1===o)return!1;var u=yield(0,d.Ct)(12,i);if(!u)return!1;var f=JSON.parse(u),l=f.indexOf(a);if(l>-1&&f.length>1){var p=0;switch(r){case"up":p=-1;break;case"down":p=1;break;default:p=0}return f.splice(l,1),f.splice(l+p,0,a),yield(0,d.mL)(12,i,JSON.stringify(f)),!0}return!1})).apply(this,arguments)}}}]);
//# sourceMappingURL=c91d854883b58786a43f.js.map