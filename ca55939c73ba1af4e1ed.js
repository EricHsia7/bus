"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[3052],{2174(e,t,n){n.d(t,{Sv:()=>J});var a=n(5767),i=n(365),r=n(77),u=n(3459),o=n(8179),s=n(8024),l=n(4537),d=n(904),c=n(9119);function f(e,t,n,a,i,r,u){try{var o=e[r](u),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(a,i)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function u(e){f(r,a,i,u,o,"next",e)}function o(e){f(r,a,i,u,o,"throw",e)}u(void 0)})}}var h=(0,o.bv)(".w"),v=(0,o.aI)(h,".x"),m=(0,o.aI)(v,".y"),y=(0,o.aI)(m,".z"),g=(0,o.aI)(h,"._"),b=(0,o.aI)(g,".aa"),I={},A=!1,w=15e3,_=5e3,x=15e3,C=!0,L=0,E=0,T="",S=!1,j=!1,k=!1;function M(e){var t=e;if(S){var n=t.detail.progress-1;y.style.setProperty("--da",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,M)}function P(){var e=(0,s.zx)(),t=document.createElement("div");t.classList.add("ea"),t.id=e;var n=document.createElement("div");n.classList.add("fa"),t.appendChild(n);var a=document.createElement("div");a.classList.add("ga");var i=document.createElement("div");i.classList.add("ha"),a.appendChild(i);var r=document.createElement("div");r.classList.add("ia"),a.appendChild(r);var u=document.createElement("div");u.classList.add("ja"),a.appendChild(u);var o=document.createElement("div");o.classList.add("ka");var d=document.createElement("span");return d.appendChild((0,l.YC)("close")),o.appendChild(d),a.appendChild(o),t.appendChild(a),{element:t,id:e}}function Z(e,t,n){function a(e,a,i){function r(e,t){(0,o.aI)(e,".fa").innerText=t.hours}function u(e,t){var n=(0,o.aI)(e,".ga");(0,o.aI)(n,".ha").innerText=t.minutes}function l(e,t){var n=(0,o.aI)(e,".ga");(0,o.aI)(n,".ja").innerText=t.name}function d(e,t){var n=(0,o.aI)(e,".ga");(0,o.aI)(n,".ia").innerText=`${t.route.name} - 往${t.route.direction}`}function c(e,t){var n=(0,o.aI)(e,".ga");(0,o.aI)(n,".ka").onclick=function(){!function(e,t){R.apply(this,arguments)}(e.id,t.schedule_id)}}function f(e,t){e.setAttribute("first",(0,s.xZ)(t.is_first))}function p(e,t){e.setAttribute("animation",(0,s.xZ)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,s.xZ)(t))}null==i?(r(e,a),u(e,a),l(e,a),d(e,a),c(e,a),f(e,a),p(e,n),h(e,t)):(a.hours!==i.hours&&r(e,a),a.minutes!==i.minutes&&u(e,a),(0,s.hw)(i.schedule_id,a.schedule_id)||(l(e,a),d(e,a),c(e,a)),i.is_first!==a.is_first&&f(e,a),false!==n&&p(e,n),A!==t&&h(e,t))}var i=e.itemQuantity,r=e.items,u=(0,o.jg)(b,".ea").length;if(i!==u){var l=u-i;if(l<0){for(var d=new DocumentFragment,c=0,f=Math.abs(l);c<f;c++){var p=P();d.appendChild(p.element)}b.append(d)}else for(var h=(0,o.jg)(b,".ea"),v=0,m=Math.abs(l);v<m;v++){h[u-1-v].remove()}}for(var y=(0,o.jg)(b,".ea"),g=0;g<i;g++){var w=y[g],_=r[g];if(I.hasOwnProperty("items"))if(I.items[g])a(w,_,I.items[g]);else a(w,_,null);else a(w,_,null)}I=e,A=t}function $(){return q.apply(this,arguments)}function q(){return(q=p(function*(){var e=(0,u.Js)("playing_animation"),t=(0,u.Js)("refresh_interval");C=t.dynamic,w=t.baseInterval,S=!0,T=(0,s.zx)(),y.setAttribute("refreshing","true"),y.classList.remove("ca"),document.addEventListener(T,M);var n=yield(0,r.e3)(T);Z(n,!1,e);var i=0;C&&(i=yield(0,a.wz)()),L=(new Date).getTime(),E=C?Math.max(L+_,n.dataUpdateTime+w/i):L+w,x=Math.max(_,E-L),S=!1,y.setAttribute("refreshing","false"),y.style.setProperty("--ba",`${x}ms`),y.classList.add("ca")})).apply(this,arguments)}function O(){return z.apply(this,arguments)}function z(){return(z=p(function*(){$().then(function(){j?setTimeout(function(){O()},Math.max(_,E-(new Date).getTime())):k=!1}).catch(function(e){j?setTimeout(function(){O()},1e4):k=!1})})).apply(this,arguments)}function J(){(0,d.WR)("NotificationScheduleManager"),h.setAttribute("displayed","true"),function(){for(var e=(0,u.Js)("playing_animation"),t=(0,d.gO)("window"),n=(t.width,t.height),a=Math.floor(n/50)+5,i=[],r=0;r<a;r++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});Z({items:i,itemQuantity:a,dataUpdateTime:0},!0,e)}(),j||(j=!0,k?$():(k=!0,O())),(0,d.Z_)()}function R(){return(R=p(function*(e,t){if((0,c.a)("manufacturing","處理中"),yield(0,i.G)(t)){if((0,o.aI)(b,`.ea#${e}`).remove(),(0,c.a)("check_circle","已取消通知"),!S){var n=(0,u.Js)("playing_animation");Z(yield(0,r.e3)(T),!1,n)}}else(0,c.a)("error","取消失敗")})).apply(this,arguments)}},5693(e,t,n){n.d(t,{Xy:()=>x,bF:()=>_});var a=n(5352),i=n(8179),r=n(5579),u=n(904);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,u,o=[],s=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,i,r,u){try{var o=e[r](u),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(a,i)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function u(e){l(r,a,i,u,o,"next",e)}function o(e){l(r,a,i,u,o,"throw",e)}u(void 0)})}}var c=(0,i.bv)(".la"),f=(0,i.aI)(c,".ma"),p=(0,i.aI)(c,".na"),h=(0,i.aI)(p,".oa"),v=(0,i.aI)(f,".pa"),m=(0,i.aI)(v,'.qa[group="schedule-name"] .ra input'),y=(0,i.aI)(v,'.qa[group="schedule-start-time"] .ra input'),g=(0,i.aI)(v,'.qa[group="schedule-end-time"] .ra input'),b=(0,i.aI)(v,'.qa[group="schedule-days"] .ra'),I=(0,i.jg)(b,".sa");function A(){return(A=d(function*(e){for(var t=m.value,n=y.value,i=g.value,r=o(String(n).split(":").map(function(e){return parseInt(e)}),2),u=r[0],s=r[1],l=o(String(i).split(":").map(function(e){return parseInt(e)}),2),d=l[0],c=l[1],f=[],p=0;p<7;p++){var h=I[p],v=h.getAttribute("highlighted"),b=parseInt(h.getAttribute("day"));"true"===v&&f.push(b)}var A=yield(0,a.qZ)(e);A.name=t,A.days=f,A.period.start.hours=u,A.period.start.minutes=s,A.period.end.hours=d,A.period.end.minutes=c,yield(0,a.nL)(A),x()})).apply(this,arguments)}function w(){return w=d(function*(e){var t=yield(0,a.qZ)(e);m.value=t.name,y.value=(0,r.pn)(t.period.start),g.value=(0,r.pn)(t.period.end);for(var n=0;n<7;n++){var i=I[n];t.days.indexOf(n)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}h.onclick=function(){!function(e){A.apply(this,arguments)}(e)}}),w.apply(this,arguments)}function _(e){(0,u.WR)("PersonalScheduleEditor"),c.setAttribute("displayed","true"),function(e){w.apply(this,arguments)}(e),(0,u.Z_)()}function x(){c.setAttribute("displayed","false"),(0,u.l$)()}},8279(e,t,n){n.d(t,{X8:()=>s});var a=n(8179),i=n(2648),r=n(904),u=(0,a.bv)(".fb"),o=(0,a.aI)(u,".gb");function s(e){(0,r.WR)("QRCode"),u.setAttribute("displayed","true"),function(e){var t=(0,i.$)(e,"M",.5,.3,1,"var(--a)",4);o.innerHTML=t}(e)}}}]);
//# sourceMappingURL=ca55939c73ba1af4e1ed.js.map