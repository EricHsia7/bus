"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[537],{752(e,t,a){a.d(t,{Ho:()=>f,b$:()=>v});var n=a(3422),i=a(8179),r=a(4537),o=a(904),c=a(9119),d=(0,i.bv)(".f"),u=(0,i.aI)(d,".g"),l=(0,i.aI)(u,".h");function s(e,t,a,i,o){var d=document.createElement("div");d.classList.add("i");var u=document.createElement("div");u.classList.add("j");var l=document.createElement("span");l.appendChild((0,r.YC)(e.icon)),u.appendChild(l);var s=document.createElement("div");s.classList.add("k"),s.innerText=e.name;var f=e.index;return d.onclick=function(){!function(e,t,a,i,r){(0,c.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),v(),(0,n.mD)(t,a,i,r).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,a,i,o,f)},d.appendChild(u),d.appendChild(s),d}function f(e,t,a,i){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(e,t,a,i){l.innerHTML="";var r=new DocumentFragment;for(var o of n.FX){var c=s(o,e,t,a,i);r.appendChild(c)}l.append(r)}(e,t,a,i)}function v(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},1078(){},1102(){},1306(){},1308(){},1511(){},1603(){},1743(){},2421(){},2696(){},3041(e,t,a){a.d(t,{B:()=>h,n:()=>m});var n=a(9566),i=a(8179),r=a(8024),o=a(4537),c=a(904),d=a(9119),u=(0,i.bv)(".l"),l=(0,i.aI)(u,".m"),s=(0,i.aI)(l,".n"),f="已儲存至資料夾",v="無法儲存";function p(e,t,a,i){var c=document.createElement("div");c.classList.add("o");var u=document.createElement("div");u.classList.add("p");var l=document.createElement("span");l.appendChild((0,o.YC)(e.icon)),u.appendChild(l);var s=document.createElement("div");switch(s.classList.add("q"),s.innerText=e.name,c.appendChild(u),c.appendChild(s),t){case"stop":c.onclick=function(){(0,n.aq)(e.id,a[0],a[1]).then(function(e){e?(0,n.LH)("stop",a[0]).then(function(e){e&&(null!=i&&i.setAttribute("highlighted",(0,r.xZ)(e)),(0,d.a)("folder",f),m())}):(0,d.a)("warning",v)})};break;case"route":c.onclick=function(){(0,n.Fq)(e.id,a[0]).then(function(e){e?(0,n.LH)("route",a[0]).then(function(e){e&&(null!=i&&i.setAttribute("highlighted",(0,r.xZ)(e)),(0,d.a)("folder",f),m())}):(0,d.a)("warning",v)})};break;case"location":c.onclick=function(){(0,n.DW)(e.id,a[0]).then(function(e){e?(0,n.LH)("location",a[0]).then(function(e){e&&(null!=i&&i.setAttribute("highlighted",(0,r.xZ)(e)),(0,d.a)("folder",f),m())}):(0,d.a)("warning",v)})}}return c}function h(e,t,a){(0,c.WR)("SaveToFolder"),u.setAttribute("displayed","true"),function(e,t,a){var i=(0,n.uT)();s.innerHTML="";var r=new DocumentFragment;for(var o of i){var c=p(o,e,t,a);r.appendChild(c)}s.append(r)}(e,t,a)}function m(){(0,c.kr)("SaveToFolder"),u.setAttribute("displayed","false")}},3058(){},3127(){},3534(){},3749(){},3777(){},4305(){},5228(){},5286(e,t,a){a.d(t,{kP:()=>W,zk:()=>J,VY:()=>P,b7:()=>Q,GZ:()=>V,GS:()=>O});var n=a(467),i=a(9566),r=a(8621),o=a(3459),c=a(8179),d=a(8024),u=a(904),l=a(3041),s=a(8134),f=a(9469),v=a(9119),p=a(8279);function h(){return(h=(0,n.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var a=(0,f.i)(0,{id:e,name:t.n});navigator.share&&navigator.share({title:t.n,url:a}).then(function(){(0,v.a)("check_circle","已分享路線")}).catch(function(e){(0,v.a)("cancel","已取消分享")})}})).apply(this,arguments)}function m(){return(m=(0,n.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var a=(0,f.i)(0,{id:e,name:t.n});(0,p.X8)(a)}})).apply(this,arguments)}var g=a(7968),b=a(6141),y='"Noto Sans TC", sans-serif',k=(0,u.gO)("route-details-canvas"),x=k.width,A=k.height,w=Math.min(window.devicePixelRatio,1.875)||1,C={};function D(){var e=document.createElement("div");return e.classList.add("r"),e}function I(){var e=document.createElement("div");e.classList.add("s");var t=document.createElement("canvas");return t.classList.add("t"),e.appendChild(t),e}function _(e,t,a,n,i,r){e.innerText=t.name,e.setAttribute("day",r.toString()),e.onclick=function(){!function(e){for(var t=(0,o.Js)("playing_animation"),a=(0,c.jg)(W,".r"),n=(0,c.jg)(J,".s"),i=0;i<7;i++){var r,d,u=a[i],l=n[i],s=`d_${i}`,f=null===(r=C)||void 0===r?void 0:r.calendarEventGroups[s],v=null===(d=C)||void 0===d?void 0:d.calendarDays[s];if(f&&v){var p=(0,b.t)("--c"),h=(0,b.t)("--d"),m=(0,b.t)("--e"),g=(0,b.t)("--u"),y=(0,b.t)("--b"),k=(0,b.t)("--v");_(u,v,e,!1,t,i),E(l,f,e,y,p,h,m,g,k,i)}}}(r)},e.setAttribute("highlighted",a===r?"true":"false"),e.setAttribute("animation",(0,d.xZ)(i)),e.setAttribute("skeleton-screen",(0,d.xZ)(n))}function E(e,t,a,n,i,r,o,l,s,f){function v(e,t,a){var n=70*t;e.fillStyle=a,e.fillRect(45,n+5,x-45,1.2),e.font=`400 12px ${y}`,e.textBaseline="top";var i=`${String(t).padStart(2,"0")}:00`,r=e.measureText(i),o=r.width,c=r.actualBoundingBoxDescent;e.fillText(i,(45-o)/2,n+(10-c)/2,o)}function p(e,t,a,n,i,r,o){var c=new Date;c.setDate(1),c.setMonth(0),c.setFullYear(t.date.getFullYear()),c.setMonth(t.date.getMonth()),c.setDate(t.date.getDate()),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var d=(t.date.getTime()-c.getTime())/864e5*24*70,u=x-45,l=60*t.duration*1e3/864e5*24*70;(0,g.wg)(e,45,d,u,l,3,`rgba(${n}, ${i}, ${r}, ${o})`),(0,g.wg)(e,45,d,3,l,{tl:3,tr:0,bl:3,br:0},a),e.font=`400 14px ${y}`,e.textBaseline="top",e.fillStyle=a;var s=t.dateString,f=e.measureText(s),v=f.width,p=f.actualBoundingBoxDescent;e.fillText(s,53,d+(l-p)/2,v)}var h=(0,c.aI)(e,".t"),m=h.getContext("2d");if(function(e,t,a){var n=t===a;e.setAttribute("displayed",(0,d.xZ)(n))}(e,a,f),function(e){k=(0,u.gO)("route-details-canvas"),x=k.width,A=k.height,w=Math.min(window.devicePixelRatio,1.875)||1,e.width=x*w,e.height=A*w;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(w,w)}(h),a===f){m.clearRect(0,0,x,A);for(var b=0;b<24;b++)v(m,b,s);for(var C of t)p(m,C,n,i,r,o,l)}else m.clearRect(0,0,x,A)}function L(e,t,a){var n=(new Date).getDay(),i=(0,b.t)("--c"),r=(0,b.t)("--d"),o=(0,b.t)("--e"),d=(0,b.t)("--u"),u=(0,b.t)("--b"),l=(0,b.t)("--v"),s=e.calendarDays,f=e.calendarDayQuantity,v=e.calendarEventGroups,p=(e.calendarEventQuantity,Array.from((0,c.jg)(J,".s"))),h=Array.from((0,c.jg)(W,".r")),m=p.length;if(f!==m){var g=m-f;if(g<0){for(var y=new DocumentFragment,k=new DocumentFragment,x=0;x>g;x--){var A=D();y.appendChild(A),h.push(A);var w=I();k.appendChild(w),p.push(w)}W.append(y),J.append(k)}else if(g>0)for(var L=m-1,T=m-g-1;L>T;L--)h[L].remove(),h.splice(L,1),p[L].remove(),p.splice(L,1)}for(var S=0;S<f;S++){var Z=`d_${S}`,R=s[Z],$=v[Z],F=h[S],M=p[S];_(F,R,n,t,a,S),E(M,$,n,u,i,r,o,d,l,S)}C=e}var T=a(4537),S=[],Z=!1,R=!1;function $(){var e=document.createElement("div");e.classList.add("w");var t=document.createElement("div");t.classList.add("x"),t.appendChild((0,T.oC)()),e.appendChild(t);var a=document.createElement("div");return a.classList.add("y"),e.appendChild(a),e}function F(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.aI)(e,".x");(0,T.yD)(a,t.icon)}function o(e,t){(0,c.aI)(e,".y").innerText=t.value}function u(e,t){e.setAttribute("animation",(0,d.xZ)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,d.xZ)(t))}null==i?(r(e,n),o(e,n),u(e,a),l(e,t)):((0,d.hw)(i,n)||r(e,n),(0,d.hw)(i,n)||o(e,n),Z!==a&&u(e,a),R!==t&&l(e,t))}var i=e.length;t!==R&&Q.setAttribute("skeleton-screen",(0,d.xZ)(t));var r=Array.from((0,c.jg)(P,".w")),o=r.length;if(i!==o){var u=o-i;if(u<0){for(var l=new DocumentFragment,s=0;s>u;s--){var f=$();l.appendChild(f),r.push(f)}P.append(l)}else if(u>0)for(var v=o-1,p=o-u-1;v>p;v--)r[v].remove(),r.splice(v,1)}for(var h=0;h<i;h++){var m=r[h],g=e[h];0===S.length?n(m,g,null):n(m,g,S[h])}S=e,Z=a,R=t}var M=(0,c.bv)(".z"),j=(0,c.aI)(M,"._"),H=(0,c.aI)(j,".aa"),B=(0,c.aI)(H,'.ba[group="calendar"]'),G=(0,c.aI)(B,".ca"),W=(0,c.aI)(G,".da"),J=(0,c.aI)(G,".ea"),N=(0,c.aI)(M,'._ .aa .ba[group="actions"]'),Y=(0,c.aI)(N,'.ca .fa[action="save-to-folder"]'),q=(0,c.aI)(N,'.ca .fa[action="get-permalink"]'),z=(0,c.aI)(N,'.ca .fa[action="show-permalink-qrcode"]'),Q=(0,c.aI)(H,'.ba[group="properties"]'),P=(0,c.aI)(Q,".ca");function X(){return X=(0,n.A)(function*(e,t){var a=(0,o.Js)("playing_animation"),n=yield(0,i.LH)("route",e);Y.setAttribute("animation",(0,d.xZ)(a)),Y.setAttribute("highlighted",(0,d.xZ)(n)),Y.onclick=function(){(0,l.B)("route",[e],Y)},q.setAttribute("animation",(0,d.xZ)(a)),q.onclick=function(){!function(e){h.apply(this,arguments)}(e)},z.setAttribute("animation",(0,d.xZ)(a)),z.onclick=function(){!function(e){m.apply(this,arguments)}(e)},function(){for(var e=(0,o.Js)("playing_animation"),t=[],a=0;a<5;a++)t.push({key:a,icon:"none",value:""});F(t,!0,e)}(),function(){for(var e=(0,o.Js)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},a={},n={},i=0;i<7;i++){var r=`d_${i}`;a[r]=[],n[r]={day:i,code:"d_{i}",name:""};for(var c=0;c<t[r];c++){var d=new Date;d.setHours(0),d.setMinutes(30*c),d.setSeconds(0),d.setMilliseconds(0),a[r].push({date:d,dateString:"",duration:15})}}L({calendarEventGroups:a,calendarDays:n,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var c=(0,d.zx)(),u=yield(0,r.p)(e,t,c);F(u.properties,!1,a),L(u.calendar,!1,a)}),X.apply(this,arguments)}function O(e,t){(0,u.WR)("RouteDetails"),M.setAttribute("displayed","true"),function(e,t){X.apply(this,arguments)}(e,t)}function V(){(0,u.kr)("RouteDetails"),M.setAttribute("displayed","false");var e=(0,c.jg)(J,".s");for(var t of e)t.remove();var a=(0,c.jg)(W,".r");for(var n of a)n.remove()}},5392(){},5461(){},5995(){},6018(){},6388(){},6597(){},7217(){},7225(){},7287(){},7723(){},7868(){},7908(e,t,a){a.d(t,{NW:()=>g,XG:()=>h,hy:()=>m});var n=a(467),i=a(3937),r=a(3422),o=a(8179),c=a(8024),d=a(904),u=a(9119),l=(0,o.bv)(".ga"),s=(0,o.aI)(l,".ha"),f=(0,o.aI)(s,".ia"),v=(0,o.aI)(f,'.ja[group="provider"] .ka input'),p=(0,o.aI)(f,'.ja[group="registration-key"] .ka input');function h(){(0,d.WR)("RegisterNotification"),l.setAttribute("displayed","true"),v.value=(0,r.D7)(),p.value="",(0,d.Z_)()}function m(){l.setAttribute("displayed","false"),(0,d.l$)()}function g(){return b.apply(this,arguments)}function b(){return(b=(0,n.A)(function*(){(0,u.a)("manufacturing","處理中");var e=v.value,t=p.value;if((0,c.Gz)(e))return(0,r.Je)(e),(yield(0,i.e)(t))?void(0,u.a)("check_circle","註冊成功"):void(0,u.a)("error","註冊失敗");(0,u.a)("error","無效的提供者")})).apply(this,arguments)}},8983(){},9991(){}}]);
//# sourceMappingURL=7f1007f6fbc9b97268df.js.map