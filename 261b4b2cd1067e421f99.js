!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():e.bus=r()}(self,()=>(()=>{"use strict";var e,r,n={13611(e,r,n){var t=n(46518),u=n(44576),i=n(62106),o=n(43724),a=TypeError,f=Object.defineProperty,c=u.self!==u;try{if(o){var s=Object.getOwnPropertyDescriptor(u,"self");!c&&s&&s.get&&s.enumerable||i(u,"self",{get:function(){return u},set:function(e){if(this!==u)throw new a("Illegal invocation");f(u,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else t({global:!0,simple:!0,forced:c},{self:u})}catch(e){}},33110(e,r,n){var t=n(46518),u=n(97751),i=n(18745),o=n(69565),a=n(79504),f=n(79039),c=n(34376),s=n(94901),l=n(65810),p=n(10757),y=n(22195),v=n(655),d=n(67680),b=n(616),g=n(33392),m=n(4495),h=n(27819),x=String,k=u("JSON","stringify"),O=a(/./.exec),w=a("".charAt),S=a("".charCodeAt),j=a("".replace),A=a("".slice),F=a([].push),D=a(1.1.toString),P=/[\uD800-\uDFFF]/g,C=/^[\uD800-\uDBFF]$/,I=/^[\uDC00-\uDFFF]$/,N=g(),E=N.length,$=!m||f(function(){var e=u("Symbol")("stringify detection");return"[null]"!==k([e])||"{}"!==k({a:e})||"{}"!==k(Object(e))}),J=f(function(){return'"\\udf06\\ud834"'!==k("\udf06\ud834")||'"\\udead"'!==k("\udead")}),R=$?function(e,r){var n=d(arguments),t=_(r);if(s(t)||void 0!==e&&!p(e))return n[1]=function(e,r){if(s(t)&&(r=o(t,this,x(e),r)),!p(r))return r},i(k,null,n)}:k,T=function(e,r,n){var t=w(n,r-1),u=w(n,r+1);return O(C,e)&&!O(I,u)||O(I,e)&&!O(C,t)?"\\u"+D(S(e,0),16):e},_=function(e){if(s(e))return e;if(c(e)){for(var r=e.length,n=[],t=0;t<r;t++){var u=e[t];"string"==typeof u?F(n,u):"number"!=typeof u&&"Number"!==y(u)&&"String"!==y(u)||F(n,v(u))}var i=n.length,o=!0;return function(e,r){if(o)return o=!1,r;if(c(this))return r;for(var t=0;t<i;t++)if(n[t]===e)return r}}};k&&t({target:"JSON",stat:!0,arity:3,forced:$||J||!h},{stringify:function(e,r,n){var t=_(r),u=[],i=R(e,function(e,r){var n=s(t)?o(t,this,x(e),r):r;return!h&&l(n)?N+(F(u,n.rawJSON)-1):n},n);if("string"!=typeof i)return i;if(J&&(i=j(i,P,T)),h)return i;for(var a="",f=i.length,c=0;c<f;c++){var p=w(i,c);if('"'===p){var y=b(i,++c).end-1,v=A(i,c,y);a+=A(v,0,E)===N?u[A(v,E)]:'"'+v+'"',c=y}else a+=p}return a}})},93327(e,r,n){n(25276),n(44114),n(27495),n(25440),n(79978),n(42762),n(13611),n(28706),n(2008),n(23418),n(23792),n(48598),n(62062),n(72712),n(26910),n(18111),n(22489),n(61701),n(18237),n(5506),n(26099),n(58940),n(84864),n(57465),n(87745),n(38781),n(31415),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698),n(47764),n(71761),n(62953);var t=n(82284),u=(n(76918),n(64346),n(54743),n(11745),n(38309),n(16573),n(78100),n(77936),n(60739),n(23288),n(33110),n(8085),n(21489),n(48140),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(21903),n(91134),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(37467),n(44732),n(33684),n(79577),n(41549),n(49797),n(49631),n(35623),n(76031),n(3296),n(27208),n(48408),n(14603),n(47566),n(98721),n(83503));n(34462).sha512;function i(e,r){return null!=e&&"object"===(0,t.a)(e)&&!Array.isArray(e)&&Object.prototype.hasOwnProperty.call(e,r)}function o(e){var r=[{suffixes:"市",key:"city",process:function(e){return null===e?null:e.map(function(e){return e.trim()})},type:0},{suffixes:"區",key:"district",process:function(e){return null===e?null:e.map(function(e){return e.trim()})},type:0},{suffixes:"鄉鎮村里",key:"area",process:function(e){return null===e?null:e.map(function(e){return e.trim()})},type:0},{suffixes:"路街道",key:"road",process:function(e){return null===e?null:e.map(function(e){return e.replaceAll(/[\(\)（）]/gim,"").trim()})},type:0},{suffixes:"段",key:"road_section",process:function(e){for(var r=function(e){switch(e){case"一":return 1;case"二":return 2;case"三":return 3;case"四":return 4;case"五":return 5;case"六":return 6;case"七":return 7;case"八":return 8;case"九":return 9;case"十":return 10}return isNaN(parseInt(e))?0:parseInt(e)},n=String(e).length,t=[],u=0;u<n;u++){var i=r(String(e).charAt(u));10===i?t.length>0&&(t=[10*t.reduce(function(e,r){return e+r},0)]):t=[t.reduce(function(e,r){return e+r},0)+i]}return t},type:0},{suffixes:"巷",key:"alley",process:function(e){return null===e?null:e.map(function(e){return parseInt(e.trim().replaceAll(/[巷]/gim))})},type:0},{suffixes:"弄",key:"alley_branch",process:function(e){return null===e?null:e.map(function(e){return parseInt(e.trim().replaceAll(/[弄]/gim))})},type:0},{suffixes:"號",key:"doorplate",process:function(e){var r,n=String(e).match(/[0-9]+/gim);return n=(null===(r=n)||void 0===r?void 0:r.map(function(e){return null===e?null:parseInt(e)}))||null},type:0},{suffixes:"樓",key:"floornumber",process:function(e){return null===e?null:e.map(function(e){return e.trim()})},type:0},{key:"exit",process:function(e){return null===e?null:e.map(function(e){return e.trim()})},type:2},{key:"direction",process:function(e){return null===e?null:e.map(function(e){return e.trim().replace(/[往向]/gim,"")})},type:1}];function n(e){function n(e,r){return 0===r?new RegExp(`([^市區鄉鎮村里路段街道巷弄號樓與]+[${e}])`,"gmi"):1===r?new RegExp("([往向]+[東南西北])","gmi"):2===r?new RegExp("([0-9]+[號]出口)","gmi"):void 0}var t={};for(var u of r){var i,o=n(null===(i=u)||void 0===i?void 0:i.suffixes,u.type);t[u.key]=u.process(String(e).match(o))}return t}return function(e){var t={};for(var u of e){var o=n(u);for(var a of r)i(t,a.key)||(t[a.key]=[]),t[a.key]=t[a.key].concat(o[a.key])}for(var f in t)t[f]=Array.from(new Set(t[f])).filter(function(e){return!!e}).sort(function(e,r){return"number"==typeof e&&"number"==typeof r?e-r:String(e).charCodeAt(0)-String(r).charCodeAt(0)});return t}(e)}self.onmessage=function(e){var r=function(e){var r={};for(var n in e){var t=u(String(e[n].n).trim().replaceAll(/[\(（）\)\:：\~～]*/gim,"")),a=`ml_${t}`;i(r,a)?(r[a].lo.push(e[n].lo),r[a].la.push(e[n].la),r[a].g.indexOf(e[n].g)<0&&r[a].g.push(e[n].g),r[a].r.push(e[n].r),r[a].s.push(e[n].s),r[a].v.push(e[n].v),r[a].a.push(o(e[n].a)),r[a].id.push(e[n].id)):r[a]={n:e[n].n,lo:[e[n].lo],la:[e[n].la],g:[e[n].g],r:[e[n].r],s:[e[n].s],v:[e[n].v],a:[o(e[n].a)],id:[e[n].id],hash:t}}return r}(e.data);self.postMessage(r)}}},t={};function u(e){var r=t[e];if(void 0!==r)return r.exports;var i=t[e]={exports:{}};return n[e].call(i.exports,i,i.exports,u),i.exports}u.m=n,u.x=()=>{var e=u.O(void 0,[333,9735,8738,5149,7425,2944,4631,7410,6760,2453],()=>u(93327));return e=u.O(e)},u.amdO={},e=[],u.O=(r,n,t,i)=>{if(!n){var o=1/0;for(s=0;s<e.length;s++){for(var[n,t,i]=e[s],a=!0,f=0;f<n.length;f++)(!1&i||o>=i)&&Object.keys(u.O).every(e=>u.O[e](n[f]))?n.splice(f--,1):(a=!1,i<o&&(o=i));if(a){e.splice(s--,1);var c=t();void 0!==c&&(r=c)}}return r}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,t,i]},u.d=(e,r)=>{for(var n in r)u.o(r,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},u.f={},u.e=e=>Promise.all(Object.keys(u.f).reduce((r,n)=>(u.f[n](e,r),r),[])),u.u=e=>({333:"dcb7d670eedfad5c7d21",2453:"74b56deb719f5801b76e",2944:"30bcb0d7a8edc6266700",4631:"4e85a763949280762c8b",5149:"5ce470ce1b767aa6e156",6760:"f71556e14f80bec7e9e0",7410:"aac8b37a46402ab04195",7425:"511444c4280df75074e2",8738:"4df2b0d53b7e034cce3e",9735:"849a20607ace6bfeb56a"}[e]+".js"),u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),u.p="./",(()=>{var e={3327:1};u.f.i=(r,n)=>{e[r]||importScripts(u.p+u.u(r))};var r=self.webpackChunkbus=self.webpackChunkbus||[],n=r.push.bind(r);r.push=r=>{var[t,i,o]=r;for(var a in i)u.o(i,a)&&(u.m[a]=i[a]);for(o&&o(u);t.length;)e[t.pop()]=1;n(r)}})(),r=u.x,u.x=()=>Promise.all([333,9735,8738,5149,7425,2944,4631,7410,6760,2453].map(u.e,u)).then(r);var i=u.x();return i=i.default})());
//# sourceMappingURL=261b4b2cd1067e421f99.js.map