!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("bus",[],n):"object"==typeof exports?exports.bus=n():t.bus=n()}(self,(()=>(()=>{"use strict";var t={};function n(t){for(var n=[],r=[],e=0;e<t.length;e++)0===e||t[e][0]-t[e-1][0]>0?(r.length>0&&n.push(r),r=[t[e]]):r.push(t[e]);return r.length>0&&n.push(r),n}function r(t,n){var r=t.length;if(r!==n.length)throw new Error("Arrays must have the same length");for(var e=0,o=0,a=0,u=0,i=0,l=0;l<r;l++)e+=t[l],o+=n[l],a+=t[l]*n[l],u+=Math.pow(t[l],2),i+=Math.pow(n[l],2);var f=r*a-e*o,c=Math.sqrt((r*u-Math.pow(e,2))*(r*i-Math.pow(o,2)));return 0===c?0:f/c}function e(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=a(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){l=!0,u=t},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw u}}}}function o(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,a,u,i=[],l=!0,f=!1;try{if(a=(r=r.call(t)).next,0===n){if(Object(r)!==r)return;l=!1}else for(;!(l=(e=a.call(r)).done)&&(i.push(e.value),i.length!==n);l=!0);}catch(t){f=!0,o=t}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw o}}return i}}(t,n)||a(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n){if(t){if("string"==typeof t)return u(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,n):void 0}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);r<n;r++)e[r]=t[r];return e}var i=[],l=!1;if("onconnect"in self)self.onconnect=function(t){var n=t.ports[0];n.onmessage=function(t){var r=o(t.data,2),e=r[0],a=r[1];i.push({collection:e,taskID:a,port:n}),c()}};else{var f=self;self.onmessage=function(t){var n=o(t.data,2),r=n[0],e=n[1];i.push({collection:r,taskID:e,port:f}),c()}}function c(){if(!l&&0!==i.length){l=!0;var t,o,a=i.shift(),u=a.collection,f=a.taskID,s=a.port,h=0,y=0,p=e(u);try{for(p.s();!(o=p.n()).done;){var v,d=e(n(o.value));try{for(d.s();!(v=d.n()).done;){var b=v.value,m=b.map((function(t){return t[0]})),g=r(m,b.map((function(t){return t[1]})));0!==g&&Math.abs(g)>.2&&!isNaN(g)&&(h+=g*m.length,y+=m.length)}}catch(t){d.e(t)}finally{d.f()}}}catch(t){p.e(t)}finally{p.f()}t=h/y;var w=isNaN(t)?.8:Math.abs(t);s.postMessage([w,f]),l=!1,c()}}return t=t.default})()));
//# sourceMappingURL=56eab314e7d65d2f603f.js.map