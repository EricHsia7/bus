!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,()=>(()=>{"use strict";var t,e={251(t,e,r){r.d(e,{a:()=>i,b:()=>l});var n=r(467),a=r(9119);function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32e3,n=URL.createObjectURL(t),a=document.createElement("a");return a.href=n,a.download=e,document.body.appendChild(a),a.click(),a.remove(),setTimeout(function(){URL.revokeObjectURL(n)},r),n}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r=arguments.length>2?arguments[2]:void 0,n=new Blob([t],{type:e}),i=new File([n],r,{type:e});if(navigator.canShare&&navigator.canShare({files:[i]}))try{navigator.share({files:[i]})}catch(t){(0,a.a)("download","下載資料",{text:"下載",action:function(){o(n,r)}})}else o(n,r)}function c(t){return u.apply(this,arguments)}function u(){return(u=(0,n.a)(function*(t){if(navigator.clipboard&&navigator.clipboard.writeText)try{return yield navigator.clipboard.writeText(t),!0}catch(t){}try{var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly","readonly"),document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999);var r=document.execCommand("copy");return document.body.removeChild(e),r}catch(t){return!1}})).apply(this,arguments)}function l(t,e){return s.apply(this,arguments)}function s(){return s=(0,n.a)(function*(t,e){if(navigator.canShare&&navigator.canShare({files:[fileObj]}))try{navigator.share({title:t,url:e})}catch(t){(0,a.a)("link","複製連結",{text:"複製",action:(r=(0,n.a)(function*(){(yield c(e))?(0,a.a)("check","已複製連結"):(0,a.a)("cancel","無法複製連結")}),function(){return r.apply(this,arguments)})})}else c(e);var r}),s.apply(this,arguments)}},574(t,e,r){r.d(e,{a:()=>a,b:()=>h});var n=r(5428),a={vector:[0,0],id:-1,name:"未知",symbol:"?",icon:"explore"},o={vector:[0,1],id:0,name:"北",symbol:"↑",icon:"north"},i={vector:[1,0],id:1,name:"東",symbol:"→",icon:"east"},c={vector:[0,-1],id:2,name:"南",symbol:"↓",icon:"south"},u={vector:[-1,0],id:3,name:"西",symbol:"←",icon:"west"},l={vector:[Math.SQRT1_2,Math.SQRT1_2],id:4,name:"東北",symbol:"↗",icon:"north_east"},s={vector:[Math.SQRT1_2,-Math.SQRT1_2],id:5,name:"東南",symbol:"↘",icon:"south_east"},f={vector:[-Math.SQRT1_2,-Math.SQRT1_2],id:6,name:"西南",symbol:"↙",icon:"south_west"},d={vector:[-Math.SQRT1_2,Math.SQRT1_2],id:7,name:"西北",symbol:"↖",icon:"north_west"};function h(t){var e=[a,o,u,c,i,l,s,f,d],r=(0,n.d)(t),h=-1/0,v=e[0];for(var p of e){var b=p.vector[0]*r[0]+p.vector[1]*r[1];b>h&&(h=b,v=p)}return v}},2129(t,e,r){function n(t){for(var e=0;e<t.length;e++)for(var r=e+1;r<t.length;r++)if(t[e]===t[r])return!1;return!0}function a(t,e){var r=[];if(t.length<=e.length)for(var n of t)e.indexOf(n)>-1&&r.push(n);else for(var a of e)t.indexOf(a)>-1&&r.push(a);return r}r.d(e,{a:()=>n,b:()=>a})},2648(t,e,r){r.d(e,{a:()=>o});var n=r(7968),a=r(157);function o(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000000",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4,u=[[[-1,0],[0,-1]],[[0,-1],[1,0]],[[1,0],[0,1]],[[0,1],[-1,0]]],l=[[[-1,0],[-1,-1],[0,-1]],[[0,-1],[1,-1],[1,0]],[[1,0],[1,1],[0,1]],[[0,1],[-1,1],[-1,0]]],s=function(t,e){for(var r=a.create(t,{errorCorrectionLevel:e}),n=r.modules.size,o=[],i=0;i<n;i++){for(var c=[],u=0;u<n;u++){var l=r.modules.get(u,i);c.push(l)}o.push(c)}return o}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"L"),f=s.length,d=[],h=0;h<f;h++)for(var v=0;v<f;v++)if(1===s[h][v]){for(var p=new Uint8Array(4),b=0;b<4;b++){var g=u[b],m=1;for(var $ of g){var y;1===(null===(y=s[h+$[1]])||void 0===y?void 0:y[v+$[0]])&&(m*=0)}p[b]=m}d=d.concat((0,n.b)((v+o)*c,(h+o)*c,1*c,1*c,{tl:p[0]*e*c,tr:p[1]*e*c,br:p[2]*e*c,bl:p[3]*e*c},!1))}else{for(var M=new Uint8Array(4),w=0;w<4;w++){var S=l[w],x=1;for(var j of S){var T;null!==(T=s[h+j[1]])&&void 0!==T&&T[v+j[0]]||(x*=0)}M[w]=x}M.some(function(t){return 0!==t})&&(d=d.concat((0,n.b)((v+o)*c,(h+o)*c,1*c,1*c,{tl:M[0]*r*c,tr:M[1]*r*c,br:M[2]*r*c,bl:M[3]*r*c},!0)))}return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${(f+2*o)*c} ${(f+2*o)*c}" shape-rendering="geometricPrecision"><path d="${d.join(" ")}" fill="${i}" stroke="${i}" stroke-width="0.1" stroke-linejoin="round" fill-rule="nonzero" /></svg>`}},2945(t,e,r){r.d(e,{a:()=>o,b:()=>a});var n=r(7183);function a(t){for(var e=[],r=0;r<t;r++)e.push(`地點${(0,n.b)(r+1)}`);return e}function o(t){var e=[];for(var r of t)e.push(`向${r.name}${r.symbol}`);return e}},4256(t,e,r){r.d(e,{a:()=>i,b:()=>c});var n=r(2129),a=r(8024),o=r(2945);function i(t){return`${t.city.join("")}${t.district.join("")}${t.road.join("、")}${t.road_section.sort(function(t,e){return t-e}).length>0?t.road_section.join("、")+"段":""}${t.alley.length>0?t.alley.sort(function(t,e){return t-e}).join("、")+"巷":""}${t.alley_branch.length>0?t.alley_branch.sort(function(t,e){return t-e}).join("、")+"弄":""}${t.doorplate.length>0?t.doorplate.sort(function(t,e){return t-e}).join("、")+"號":""}${t.floornumber.length>0?t.floornumber.join("、")+"樓":""}${t.direction.length>0?"（朝"+t.direction.join("、")+"）":""}`}function c(t){var e=[],r={};for(var i of t)for(var c in i)(0,a.e)(r,c)||(r[c]=0),i[c].length>0&&(r[c]=r[c]+1);var u=Object.entries(r).map(function(t){return{key:t[0],value:t[1]}}).filter(function(e){return e.value===t.length}).sort(function(t,e){return t.value-e.value});if(u.length>0)for(var l of u){var s=[],f=-1/0;for(var d of t){var h=d[l.key].join("");s.push(h);var v=h.length;v>f&&(f=v)}(0,n.a)(s)&&e.push({components:s,len:f})}if(e.length>0)return e.sort(function(t,e){return t.len-e.len}),e[0].components;var p=t.length;return(0,o.b)(p)}},4750(t,e,r){r.d(e,{a:()=>s});var n,a=r(467),o=r(3453),i=r(8024),c={};if("undefined"!=typeof SharedWorker){var u=new SharedWorker(new URL(r.p+r.u(701),r.b));(n=u.port).start()}else{var l=new Worker(new URL(r.p+r.u(82),r.b));n=l}function s(t){return f.apply(this,arguments)}function f(){return(f=(0,a.a)(function*(t){var e=(0,i.c)();return yield new Promise(function(r,a){c[e]=r,n.onerror=function(t){a(t.message)},n.postMessage([t,e])})})).apply(this,arguments)}n.onmessage=function(t){var e=(0,o.a)(t.data,2),r=e[0],n=e[1];c[n]&&(c[n](r),delete c[n])},n.onerror=function(t){}},4781(t,e,r){function n(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];if("string"==typeof t)for(var n=t.length,a=0;a<n;a++){var o=t.charCodeAt(a);(r.indexOf(o)<0||!e)&&r.push(o)}return r}function a(t){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(t)}r.d(e,{a:()=>a,b:()=>n})},5428(t,e,r){function n(t,e,r,n,a,o){var i=r+o,c=(r*t+o*n)/i,u=(r*(Math.pow(e,2)+Math.pow(t,2))+o*(Math.pow(a,2)+Math.pow(n,2)))/i-Math.pow(c,2);return Math.sqrt(u)}function a(t,e,r,a,o,i,c,u,l,s,f,d){var h=o+f;return(o*(r*a*i+t*e)+f*(l*s*d+c*u)-h*((o*t+f*c)/h)*((o*e+f*u)/h))/(h*n(t,r,o,c,l,f)*n(e,a,o,u,s,f))}function o(t){var e=Math.hypot(t),r=t.length,n=new Float32Array(r);if(e>0){for(var a=1/e,o=r;o>0;o--)n[o]=t[o]*a;return Array.from(n)}return t}function i(t){var e=t.length;if(0===e)return[0,0];for(var r=1/0,n=-1/0,a=e-1;a>=0;a--){var o=t[a];o>n&&(n=o),o<r&&(r=o)}return[r,n]}r.d(e,{a:()=>i,b:()=>a,c:()=>n,d:()=>o})},5579(t,e,r){function n(){var t=new Date,e=t.getDay(),r=t.getDate()-e,n=new Date;return n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function a(t,e,r,n){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(r),a.setMinutes(n),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(t.getFullYear()),a.setMonth(t.getMonth()),a.setDate(t.getDate()),a.setDate(a.getDate()+e),a}function o(t){var e=t.match(/[0-9\.]*/gm);if(e){var r=parseInt(e[0]),n=parseInt(e[2]),a=parseInt(e[4]),o=parseInt(e[6]),i=parseInt(e[8]),c=parseInt(e[10]),u=new Date;return u.setDate(1),u.setMonth(0),u.setFullYear(r),u.setMonth(n-1),u.setDate(a),u.setHours(o),u.setMinutes(i),u.setSeconds(c),u.getTime()}return 0}function i(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,t.getFullYear()).replaceAll(/M{2,2}/g,String(t.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(t.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(t.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(t.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(t.getSeconds()).padStart(2,"0"))}function c(t){var e=t.getTime(),r=Math.floor(((new Date).getTime()-e)/1e3),n=Math.floor(r/31536e3);return n>=1?`${n}年前`:(n=Math.floor(r/2592e3))>=1?`${n}個月前`:(n=Math.floor(r/86400))>=1?`${n}天前`:(n=Math.floor(r/3600))>=1?`${n}小時前`:(n=Math.floor(r/60))>=1?`${n}分鐘前`:r>0?`${r}秒前`:"現在"}function u(t,e){var r=0|t;switch(e){case 0:return`${r}秒`;case 1:return[String((r-r%60)/60),String(r%60)].map(function(t){return t.padStart(2,"0")}).join(":");case 2:return`${r/60|0}分`;case 3:if(r>=3600)return`${parseFloat((r/3600).toFixed(1))}時`;if(60<=r&&r<3600)return`${r/60|0}分`;if(r<60)return`${r}秒`;break;default:return"--"}}function l(t){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][t]}function s(t){return l(parseInt(t)-1)}function f(t){return`${String(t.hours).padStart(2,"0")}:${String(t.minutes).padStart(2,"0")}`}function d(t,e,r){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(e-1),n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}r.d(e,{a:()=>d,b:()=>c,c:()=>i,d:()=>s,e:()=>u,f:()=>n,g:()=>l,h:()=>a,i:()=>f,j:()=>o})},6141(t,e,r){r.d(e,{a:()=>o});var n=r(8024);var a={light:{},dark:{}};function o(t){var e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if((0,n.e)(a[e],t))return a[e][t];var r=getComputedStyle(document.documentElement).getPropertyValue(t);return a[e][t]=r,r}},7183(t,e,r){function n(t,e,r,n){var a=r*Math.PI/180-t*Math.PI/180,o=n*Math.PI/180-e*Math.PI/180,i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))))}function a(t){for(var e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;t>=1e3&&r<e.length-1;)t/=1e3,r++;return`${Math.floor(100*t)/100} ${e[r]}`}function o(t){for(var e="";t>0;){var r=(t-1)%26;e=String.fromCharCode(r+65)+e,t=Math.floor((t-1)/26)}return e}r.d(e,{a:()=>a,b:()=>o,c:()=>n})},7968(t,e,r){function n(t,e,r,a){var o=(n.canvas||(n.canvas=document.createElement("canvas"))).getContext("2d"),i=`${e} ${r} ${a}`;return o.font=i,o.measureText(t).width}function a(t,e,r,n){var o=(a.canvas||(a.canvas=document.createElement("canvas"))).getContext("2d"),i=`${e} ${r} ${n}`;o.font=i;var c=o.measureText(t);return[Math.max(Math.abs(c.emHeightAscent||0),Math.abs(c.hangingBaseline||0),Math.abs(c.fontBoundingBoxAscent||0),Math.abs(c.actualBoundingBoxAscent||0)),c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent]}function o(t,e,r,n,a,o,i){o="number"==typeof o?{tl:o,tr:o,br:o,bl:o}:{tl:o.tl||0,tr:o.tr||0,br:o.br||0,bl:o.bl||0},t.beginPath(),t.moveTo(e+o.tl,r),t.lineTo(e+n-o.tr,r),t.quadraticCurveTo(e+n,r,e+n,r+o.tr),t.lineTo(e+n,r+a-o.br),t.quadraticCurveTo(e+n,r+a,e+n-o.br,r+a),t.lineTo(e+o.bl,r+a),t.quadraticCurveTo(e,r+a,e,r+a-o.bl),t.lineTo(e,r+o.tl),t.quadraticCurveTo(e,r,e+o.tl,r),t.closePath(),t.fillStyle=i,t.fill()}function i(t,e,r,n,a,o){var i=a="number"==typeof a?{tl:a,tr:a,br:a,bl:a}:{tl:a.tl||0,tr:a.tr||0,br:a.br||0,bl:a.bl||0},c=i.tl,u=i.tr,l=i.br,s=i.bl,f=[];return o?(0!==c&&f.push(`M${t} ${e+c}`,`Q${t} ${e} ${t+c} ${e}`,`H${t}`,`V${e+c}`),0!==u&&f.push(`M${t+r-u} ${e}`,`Q${t+r} ${e} ${t+r} ${e+u}`,`V${e}`,"H"+(t+r-u)),0!==l&&f.push(`M${t+r} ${e+n-l}`,`Q${t+r} ${e+n} ${t+r-l} ${e+n}`,`H${t+r}`,"V"+(e+n-l)),0!==s&&f.push(`M${t+s} ${e+n}`,`Q${t} ${e+n} ${t} ${e+n-s}`,`V${e+n}`,`H${t+s}`)):f.push(`M${t+c} ${e}`,"H"+(t+r-u),`Q${t+r} ${e} ${t+r} ${e+u}`,"V"+(e+n-l),`Q${t+r} ${e+n} ${t+r-l} ${e+n}`,`H${t+s}`,`Q${t} ${e+n} ${t} ${e+n-s}`,`V${e+c}`,`Q${t} ${e} ${t+c} ${e}`),f}r.d(e,{a:()=>o,b:()=>i,c:()=>a,d:()=>n})},8024(t,e,r){r.d(e,{a:()=>f,b:()=>i,c:()=>c,d:()=>u,e:()=>d,f:()=>l,g:()=>h,i:()=>o,j:()=>s});var n=r(2284),a=r(3503),o=r(4462).sha512;function i(t,e){function r(t){return JSON.stringify({e:t})}var n=r(t),o=r(e),i=n.length,c=o.length;if(i===c){if(i>32||c>32){for(var u=a(n),l=a(o),s=!0,f=0;f<8;f++){if(u.charAt(f)!==l.charAt(f)){s=!1;break}}return s}return n===o}return!1}function c(){var t=[[48,10],[97,26],[65,26]],e=Math.floor(268435456*Math.random()),r=Math.floor(268435456*Math.random()),n=new Uint8Array(17);n[0]=95;for(var a=16;a>0;a--){var o=t[r%3],i=o[0]+e%o[1];n[a]=i,e>>>=1,r>>>=1}return String.fromCharCode.apply(null,n)}function u(t){return((new Date).getTime()/t|0).toString(16)}function l(){return window.matchMedia("(display-mode: standalone)").matches}function s(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)}function f(t){return"boolean"==typeof t?t?"true":"false":"unsupported"}function d(t,e){return null!=t&&"object"===(0,n.a)(t)&&!Array.isArray(t)&&Object.prototype.hasOwnProperty.call(t,e)}function h(t){try{return new URL(t),!0}catch(t){return!1}}},8179(t,e,r){function n(t){return document.querySelector(t)}function a(t){return document.querySelectorAll(t)}function o(t,e){return t.querySelector(e)}function i(t,e){return t.querySelectorAll(e)}function c(t,e){for(var r=[],n=t.nextElementSibling;n;)n.classList.contains(e)&&r.push(n),n=n.nextElementSibling;return r}function u(){return document.createElement("div")}r.d(e,{a:()=>u,b:()=>a,c:()=>n,d:()=>i,e:()=>o,f:()=>c})},9469(t,e,r){r.d(e,{a:()=>c,b:()=>i});var n=r(8134),a=r(3030),o=r(4690);function i(){var t=new URL(location.href).searchParams.get("permalink");if(null!==t){var e=String(t);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(e)){var r=e.split(/[\@\~]/);switch(parseInt(r[0])){case 0:(0,n.e)(parseInt(r[1],16)).then(function(t){!1!==t?(0,o.c)(t.id,t.pid):(0,n.c)(r[2]).then(function(t){t.length>0&&(0,o.c)(t[0].id,t[0].pid)})});break;case 1:(0,a.c)(r[1])}}}}function c(t,e){var r=new URL("https://erichsia7.github.io/bus/");switch(t){case 0:r.searchParams.set("permalink",`0@${parseInt(e.id).toString(16)}~${e.name}`);break;case 1:r.searchParams.set("permalink",`1@${e.hash}`)}return decodeURIComponent(r.toString())}},9519(t,e,r){r.d(e,{a:()=>n});var n=r(4668)}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.m=e,n.amdO={},t=[],n.O=(e,r,a,o)=>{if(!r){var i=1/0;for(s=0;s<t.length;s++){for(var[r,a,o]=t[s],c=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every(t=>n.O[t](r[u]))?r.splice(u--,1):(c=!1,o<i&&(i=o));if(c){t.splice(s--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var s=t.length;s>0&&t[s-1][2]>o;s--)t[s]=t[s-1];t[s]=[r,a,o]},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.u=t=>({82:"26173020b22f1f434ab0",132:"82a2e0280e7aaf91e0be",234:"7ca2d4132419825e5eee",281:"7981ef204cd030923bed",319:"181833216f1d19baac20",327:"841bdeaeb0ea78bca576",355:"1fb5449ffa0864f05a76",367:"70fa341d14c9658a5aee",525:"68c29a0b15a555bc8b88",611:"e69b3ab5f56fbdea16ec",625:"d2fbd645847bab11f4a6",660:"5c4b5ec1bfb79ec55b52",662:"7981ef204cd030923bed",701:"26173020b22f1f434ab0",778:"4734505795b7da4648f8",906:"68c29a0b15a555bc8b88",992:"e69b3ab5f56fbdea16ec"}[t]+".js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="./",(()=>{n.b="undefined"!=typeof document&&document.baseURI||self.location.href;var t={289:0,423:0,821:0,112:0,225:0,226:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var a,o,[i,c,u]=r,l=0;if(i.some(e=>0!==t[e])){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(u)var s=u(n)}for(e&&e(r);l<i.length;l++)o=i[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(s)},r=self.webpackChunkbus=self.webpackChunkbus||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var a=n.O(void 0,[35,180,790,157,374,680,470,496,852,600,537,607,196,139,423,532,821,112,474,225,226,155],()=>n(3441));return a=(a=n.O(a)).default})());
//# sourceMappingURL=c727f924f63797989375.js.map