"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[8018],{2174(t,e,a){a.d(e,{Sv:()=>J,m_:()=>P});var n=a(467),i=a(5767),r=a(365),u=a(77),o=a(3459),s=a(8179),l=a(8024),d=a(4537),c=a(904),f=a(9119),p=(0,s.bv)(".o"),h=(0,s.aI)(p,".p"),v=(0,s.aI)(h,".q"),m=(0,s.aI)(v,".r"),g=(0,s.aI)(p,".s"),y=(0,s.aI)(g,".t"),b={},I=!1,A=15e3,_=5e3,x=15e3,k=!0,w=0,C=0,S="",L=!1,Z=!1,j=!1;function z(t){var e=t;if(L){var a=e.detail.progress-1;m.style.setProperty("--w",a.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,z)}function E(){var t=(0,l.zx)(),e=document.createElement("div");e.classList.add("x"),e.id=t;var a=document.createElement("div");a.classList.add("y"),e.appendChild(a);var n=document.createElement("div");n.classList.add("z");var i=document.createElement("div");i.classList.add("_"),n.appendChild(i);var r=document.createElement("div");r.classList.add("aa"),n.appendChild(r);var u=document.createElement("div");u.classList.add("ba"),n.appendChild(u);var o=document.createElement("div");o.classList.add("ca");var s=document.createElement("span");return s.appendChild((0,d.YC)("close")),o.appendChild(s),n.appendChild(o),e.appendChild(n),{element:e,id:t}}function T(t,e,a){function n(t,n,i){function r(t,e){(0,s.aI)(t,".y").innerText=e.hours}function u(t,e){var a=(0,s.aI)(t,".z");(0,s.aI)(a,"._").innerText=e.minutes}function o(t,e){var a=(0,s.aI)(t,".z");(0,s.aI)(a,".ba").innerText=e.name}function d(t,e){var a=(0,s.aI)(t,".z");(0,s.aI)(a,".aa").innerText=`${e.route.name} - 往${e.route.direction}`}function c(t,e){var a=(0,s.aI)(t,".z");(0,s.aI)(a,".ca").onclick=function(){!function(t,e){W.apply(this,arguments)}(t.id,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,l.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,l.xZ)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,l.xZ)(e))}null==i?(r(t,n),u(t,n),o(t,n),d(t,n),c(t,n),f(t,n),p(t,a),h(t,e)):(n.hours!==i.hours&&r(t,n),n.minutes!==i.minutes&&u(t,n),(0,l.hw)(i.schedule_id,n.schedule_id)||(o(t,n),d(t,n),c(t,n)),i.is_first!==n.is_first&&f(t,n),false!==a&&p(t,a),I!==e&&h(t,e))}var i=t.itemQuantity,r=t.items,u=(0,s.jg)(y,".x").length;if(i!==u){var o=u-i;if(o<0){for(var d=new DocumentFragment,c=0,f=Math.abs(o);c<f;c++){var p=E();d.appendChild(p.element)}y.append(d)}else for(var h=(0,s.jg)(y,".x"),v=0,m=Math.abs(o);v<m;v++){h[u-1-v].remove()}}for(var g=(0,s.jg)(y,".x"),A=0;A<i;A++){var _=g[A],x=r[A];if(b.hasOwnProperty("items"))if(b.items[A])n(_,x,b.items[A]);else n(_,x,null);else n(_,x,null)}b=t,I=e}function $(){return R.apply(this,arguments)}function R(){return(R=(0,n.A)(function*(){var t=(0,o.Js)("playing_animation"),e=(0,o.Js)("refresh_interval");k=e.dynamic,A=e.baseInterval,L=!0,S=(0,l.zx)(),m.setAttribute("refreshing","true"),m.classList.remove("v"),document.addEventListener(S,z);var a=yield(0,u.e3)(S);T(a,!1,t);var n=0;k&&(n=yield(0,i.wz)()),w=(new Date).getTime(),C=k?Math.max(w+_,a.dataUpdateTime+A/n):w+A,x=Math.max(_,C-w),L=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--u",`${x}ms`),m.classList.add("v")})).apply(this,arguments)}function M(){return D.apply(this,arguments)}function D(){return(D=(0,n.A)(function*(){$().then(function(){Z?setTimeout(function(){M()},Math.max(_,C-(new Date).getTime())):j=!1}).catch(function(t){Z?setTimeout(function(){M()},1e4):j=!1})})).apply(this,arguments)}function J(){(0,c.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var t=(0,o.Js)("playing_animation"),e=(0,c.gO)("window"),a=(e.width,e.height),n=Math.floor(a/50)+5,i=[],r=0;r<n;r++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});T({items:i,itemQuantity:n,dataUpdateTime:0},!0,t)}(),Z||(Z=!0,j?$():(j=!0,M())),(0,c.Z_)()}function P(){p.setAttribute("displayed","false"),Z=!1,(0,c.l$)()}function W(){return(W=(0,n.A)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,r.G)(e)){if((0,s.aI)(y,`.x#${t}`).remove(),(0,f.a)("check_circle","已取消通知"),!L){var a=(0,o.Js)("playing_animation");T(yield(0,u.e3)(S),!1,a)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},5693(t,e,a){a.d(e,{Dn:()=>k,Xy:()=>x,bF:()=>_,gv:()=>b});var n=a(3453),i=a(467),r=a(5352),u=a(8179),o=a(5579),s=a(904),l=(0,u.bv)(".da"),d=(0,u.aI)(l,".ea"),c=(0,u.aI)(l,".fa"),f=(0,u.aI)(c,".ga"),p=(0,u.aI)(d,".ha"),h=(0,u.aI)(p,'.ia[group="schedule-name"] .ja input'),v=(0,u.aI)(p,'.ia[group="schedule-start-time"] .ja input'),m=(0,u.aI)(p,'.ia[group="schedule-end-time"] .ja input'),g=(0,u.aI)(p,'.ia[group="schedule-days"] .ja'),y=(0,u.jg)(g,".ka");function b(t){return I.apply(this,arguments)}function I(){return(I=(0,i.A)(function*(t){for(var e=h.value,a=v.value,i=m.value,u=String(a).split(":").map(function(t){return parseInt(t)}),o=(0,n.A)(u,2),s=o[0],l=o[1],d=String(i).split(":").map(function(t){return parseInt(t)}),c=(0,n.A)(d,2),f=c[0],p=c[1],g=[],b=0;b<7;b++){var I=y[b],A=I.getAttribute("highlighted"),_=parseInt(I.getAttribute("day"));"true"===A&&g.push(_)}var k=yield(0,r.qZ)(t);k.name=e,k.days=g,k.period.start.hours=s,k.period.start.minutes=l,k.period.end.hours=f,k.period.end.minutes=p,yield(0,r.nL)(k),x()})).apply(this,arguments)}function A(){return(A=(0,i.A)(function*(t){var e=yield(0,r.qZ)(t);h.value=e.name,v.value=(0,o.pn)(e.period.start),m.value=(0,o.pn)(e.period.end);for(var a=0;a<7;a++){var n=y[a];e.days.indexOf(a)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}f.onclick=function(){b(t)}})).apply(this,arguments)}function _(t){(0,s.WR)("PersonalScheduleEditor"),l.setAttribute("displayed","true"),function(t){A.apply(this,arguments)}(t),(0,s.Z_)()}function x(){l.setAttribute("displayed","false"),(0,s.l$)()}function k(t){var e=(0,u.aI)(g,`.ka[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6443(t,e,a){a.d(e,{GS:()=>j,GZ:()=>z,VY:()=>L,b7:()=>S,kP:()=>A,zk:()=>_});var n=a(467),i=a(9566),r=a(8621),u=a(3459),o=a(8179),s=a(8024),l=a(904),d=a(3041),c=a(8332),f=a(9009),p=a(2530);function h(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(t){if("string"==typeof t)return v(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,u=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return u=t.done,t},e:function(t){o=!0,r=t},f:function(){try{u||null==a.return||a.return()}finally{if(o)throw r}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}var m=(0,o.bv)(".la"),g=(0,o.aI)(m,".ma"),y=(0,o.aI)(g,".na"),b=(0,o.aI)(y,'.oa[group="calendar"]'),I=(0,o.aI)(b,".pa"),A=(0,o.aI)(I,".qa"),_=(0,o.aI)(I,".ra"),x=(0,o.aI)(m,'.ma .na .oa[group="actions"]'),k=(0,o.aI)(x,'.pa .sa[action="save-to-folder"]'),w=(0,o.aI)(x,'.pa .sa[action="get-permalink"]'),C=(0,o.aI)(x,'.pa .sa[action="show-permalink-qrcode"]'),S=(0,o.aI)(y,'.oa[group="properties"]'),L=(0,o.aI)(S,".pa");function Z(){return(Z=(0,n.A)(function*(t,e){var a=(0,u.Js)("playing_animation"),n=yield(0,i.LH)("route",t);k.setAttribute("animation",(0,s.xZ)(a)),k.setAttribute("highlighted",(0,s.xZ)(n)),k.onclick=function(){(0,d.B)("route",[t])},w.setAttribute("animation",(0,s.xZ)(a)),w.onclick=function(){(0,c.w)(t)},C.setAttribute("animation",(0,s.xZ)(a)),C.onclick=function(){(0,c.e)(t)},(0,p.h)(S),(0,f.OS)();var o=(0,s.zx)(),l=yield(0,r.p)(t,e,o);(0,p.D)(l.properties,!1,a),(0,f.fB)(l.calendar,!1,a)})).apply(this,arguments)}function j(t,e){(0,l.WR)("RouteDetails"),m.setAttribute("displayed","true"),function(t,e){Z.apply(this,arguments)}(t,e)}function z(){(0,l.kr)("RouteDetails"),m.setAttribute("displayed","false");var t,e=h((0,o.jg)(_,".ta"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var a,n=h((0,o.jg)(A,".ua"));try{for(n.s();!(a=n.n()).done;){a.value.remove()}}catch(t){n.e(t)}finally{n.f()}}},7908(t,e,a){a.d(e,{NW:()=>g,XG:()=>v,hy:()=>m});var n=a(467),i=a(3937),r=a(77),u=a(8179),o=a(8024),s=a(904),l=a(9119),d=(0,u.bv)(".va"),c=(0,u.aI)(d,".wa"),f=(0,u.aI)(c,".xa"),p=(0,u.aI)(f,'.ya[group="provider"] .za input'),h=(0,u.aI)(f,'.ya[group="registration-key"] .za input');function v(){(0,s.WR)("RegisterNotification"),d.setAttribute("displayed","true"),p.value=(0,r.D7)(),h.value="",(0,s.Z_)()}function m(){d.setAttribute("displayed","false"),(0,s.l$)()}function g(){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(){(0,l.a)("manufacturing","處理中");var t=p.value,e=h.value;if((0,o.Gz)(t))return(0,r.Je)(t),(yield(0,i.e)(e))?void(0,l.a)("check_circle","註冊成功"):void(0,l.a)("error","註冊失敗");(0,l.a)("error","無效的提供者")})).apply(this,arguments)}},8279(t,e,a){a.d(e,{Vc:()=>l,X8:()=>s});var n=a(8179),i=a(2648),r=a(904),u=(0,n.bv)("._a"),o=(0,n.aI)(u,".ab");function s(t){(0,r.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,i.$)(t,"M",.5,.3,1,"var(--a)",4);o.innerHTML=e}(t)}function l(){(0,r.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,a){a.d(e,{GJ:()=>y,I1:()=>g,Ps:()=>m,om:()=>b});var n=a(3453),i=a(5352),r=a(8179),u=a(904),o=a(9119),s=(0,r.bv)(".bb"),l=(0,r.aI)(s,".cb"),d=(0,r.aI)(l,".db"),c=(0,r.aI)(d,'.eb[group="schedule-name"] .fb input'),f=(0,r.aI)(d,'.eb[group="schedule-start-time"] .fb input'),p=(0,r.aI)(d,'.eb[group="schedule-end-time"] .fb input'),h=(0,r.aI)(d,'.eb[group="schedule-days"] .fb'),v=(0,r.jg)(h,".gb");function m(){for(var t=c.value,e=f.value,a=p.value,r=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,n.A)(r,2),s=u[0],l=u[1],d=String(a).split(":").map(function(t){return parseInt(t)}),h=(0,n.A)(d,2),m=h[0],g=h[1],b=[],I=0;I<7;I++){var A=v[I],_=A.getAttribute("highlighted"),x=parseInt(A.getAttribute("day"));"true"===_&&b.push(x)}(0,i.Qh)(t,s,l,m,g,b).then(function(t){t?(y(),(0,o.a)("calendar_view_day","已建立個人化行程")):(0,o.a)("error","無法建立個人化行程")})}function g(){(0,u.WR)("PersonalScheduleCreator"),s.setAttribute("displayed","true"),(0,u.Z_)()}function y(){s.setAttribute("displayed","false"),(0,u.l$)()}function b(t){var e=(0,r.aI)(h,`.gb[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}}}]);
//# sourceMappingURL=7f1f1e9d.js.map