"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[704],{4261(t,e,n){n.d(e,{kP:()=>H,zk:()=>N,VY:()=>K,b7:()=>V,GZ:()=>nt,GS:()=>et});var a={};n.r(a),n.d(a,{h:()=>G});var r=n(467),i=n(9566),o=n(8621),l=n(3459),u=n(8024),c=n(8179),s=n(904),d=n(3041),f=n(8134),v=n(9469),m=n(9119),p=n(8279);function h(){return(h=(0,r.A)(function*(t){var e=yield(0,f.Rk)(t);if(!1!==e){var n=(0,v.i)(0,{id:t,name:e.n});navigator.share&&navigator.share({title:e.n,url:n}).then(function(){(0,m.a)("已分享路線","check_circle")}).catch(function(t){(0,m.a)("已取消分享","cancel")})}})).apply(this,arguments)}function y(){return(y=(0,r.A)(function*(t){var e=yield(0,f.Rk)(t);if(!1!==e){var n=(0,v.i)(0,{id:t,name:e.n});(0,p.X8)(n)}})).apply(this,arguments)}var g=n(6141),b=n(7968);function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return A(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var w='"Noto Sans TC", sans-serif',I=(0,s.gO)("route-details-canvas"),k=I.width,D=I.height,S=Math.min(window.devicePixelRatio,1.875)||1,_={};function j(){var t=document.createElement("div");return t.classList.add("xm"),{element:t,id:""}}function C(){var t=document.createElement("div");t.classList.add("zm");var e=document.createElement("canvas");return e.classList.add("_m"),t.appendChild(e),{element:t,id:""}}function M(t,e,n,a,r,i){t.innerText=e.name,t.setAttribute("day",i.toString()),t.onclick=function(){!function(t){for(var e=(0,l.Js)("playing_animation"),n=(0,c.jg)(H,".xm"),a=(0,c.jg)(N,".zm"),r=0;r<7;r++){var i,o,u=n[r],s=a[r],d=`d_${r}`,f=null===(i=_)||void 0===i?void 0:i.calendarEventGroups[d],v=null===(o=_)||void 0===o?void 0:o.calendarDays[d];if(f&&v){var m=(0,g.t)("--c"),p=(0,g.t)("--d"),h=(0,g.t)("--e"),y=(0,g.t)("--ei"),b=(0,g.t)("--b"),x=(0,g.t)("--fc");M(u,v,t,!1,e,r),E(s,f,t,b,m,p,h,y,x,r)}}}(i)},t.setAttribute("highlighted",n===i?"true":"false"),t.setAttribute("animation",(0,u.xZ)(r)),t.setAttribute("skeleton-screen",(0,u.xZ)(a))}function E(t,e,n,a,r,i,o,l,d,f){function v(t,e,n){var a=70*e;t.fillStyle=n,t.fillRect(45,a+5,k-45,1.2),t.font=`400 12px ${w}`,t.textBaseline="top";var r=`${String(e).padStart(2,"0")}:00`,i=t.measureText(r),o=i.width,l=i.actualBoundingBoxDescent;t.fillText(r,(45-o)/2,a+(10-l)/2,o)}function m(t,e,n,a,r,i,o){var l=new Date;l.setDate(1),l.setMonth(0),l.setFullYear(e.date.getFullYear()),l.setMonth(e.date.getMonth()),l.setDate(e.date.getDate()),l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0);var u=(e.date.getTime()-l.getTime())/864e5*24*70,c=k-45,s=60*e.duration*1e3/864e5*24*70;(0,b.wg)(t,45,u,c,s,3,`rgba(${a}, ${r}, ${i}, ${o})`),(0,b.wg)(t,45,u,3,s,{tl:3,tr:0,bl:3,br:0},n),t.font=`400 14px ${w}`,t.textBaseline="top",t.fillStyle=n;var d=e.dateString,f=t.measureText(d),v=f.width,m=f.actualBoundingBoxDescent;t.fillText(d,53,u+(s-m)/2,v)}var p=(0,c.aI)(t,"._m"),h=p.getContext("2d");if(function(t,e,n){var a=e===n;t.setAttribute("displayed",(0,u.xZ)(a))}(t,n,f),function(t){I=(0,s.gO)("route-details-canvas"),k=I.width,D=I.height,S=Math.min(window.devicePixelRatio,1.875)||1,t.width=k*S,t.height=D*S;var e=t.getContext("2d");e.setTransform(1,0,0,1,0,0),e.scale(S,S)}(p),n===f){h.clearRect(0,0,k,D);for(var y=0;y<24;y++)v(h,y,d);var g,A=x(e);try{for(A.s();!(g=A.n()).done;){m(h,g.value,a,r,i,o,l)}}catch(t){A.e(t)}finally{A.f()}}else h.clearRect(0,0,k,D)}function $(t,e,n){var a=(new Date).getDay(),r=(0,g.t)("--c"),i=(0,g.t)("--d"),o=(0,g.t)("--e"),l=(0,g.t)("--ei"),u=(0,g.t)("--b"),s=(0,g.t)("--fc"),d=t.calendarDays,f=t.calendarDayQuantity,v=t.calendarEventGroups,m=(t.calendarEventQuantity,(0,c.jg)(N,".zm").length);if(f!==m){var p=m-f;if(p<0){for(var h=new DocumentFragment,y=new DocumentFragment,b=0,x=Math.abs(p);b<x;b++){var A=j();h.appendChild(A.element);var w=C();y.appendChild(w.element)}H.append(h),N.append(y)}else for(var I=(0,c.jg)(H,".xm"),k=(0,c.jg)(N,".zm"),D=0,S=Math.abs(p);D<S;D++){var $=m-1-D;I[$].remove(),k[$].remove()}}for(var R=(0,c.jg)(H,".xm"),T=(0,c.jg)(N,".zm"),Z=0;Z<f;Z++){var z=`d_${Z}`,B=d[z],G=v[z],L=R[Z],q=T[Z];M(L,B,a,e,n,Z),E(q,G,a,u,r,i,o,l,s,Z)}_=t}var R=n(4537),T=[],Z=!1,z=!1;function B(){var t=document.createElement("div");t.classList.add("sm");var e=document.createElement("div");e.classList.add("tm"),e.appendChild((0,R.oC)()),t.appendChild(e);var n=document.createElement("div");return n.classList.add("um"),t.appendChild(n),{element:t,id:""}}function G(){for(var t=(0,l.Js)("playing_animation"),e=[],n=0;n<5;n++)e.push({key:n,icon:"none",value:""});!function(t,e,n){function a(t,a,r){function i(t,e){var n=(0,c.aI)(t,".tm");(0,R.yD)(n,e.icon)}function o(t,e){(0,c.aI)(t,".um").innerText=e.value}function l(t,e){t.setAttribute("animation",(0,u.xZ)(e))}function s(t,e){t.setAttribute("skeleton-screen",(0,u.xZ)(e))}null==r?(i(t,a),o(t,a),l(t,n),s(t,e)):((0,u.hw)(r,a)||i(t,a),(0,u.hw)(r,a)||o(t,a),Z!==n&&l(t,n),z!==e&&s(t,e))}var r=t.length;e!==z&&V.setAttribute("skeleton-screen",(0,u.xZ)(e));var i=(0,c.jg)(K,".sm").length;if(r!==i){var o=i-r;if(o<0){for(var l=new DocumentFragment,s=0,d=Math.abs(o);s<d;s++){var f=B();l.appendChild(f.element)}K.append(l)}else for(var v=(0,c.jg)(K,".sm"),m=0,p=Math.abs(o);m<p;m++){v[i-1-m].remove()}}for(var h=(0,c.jg)(K,".sm"),y=0;y<r;y++){var g=h[y],b=t[y];0===T.length?a(g,b,null):a(g,b,T[y])}T=t,Z=n,z=e}(e,!0,t)}function L(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return q(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var F=(0,c.bv)(".fm"),J=(0,c.aI)(F,".km"),O=(0,c.aI)(J,".lm"),P=(0,c.aI)(O,'.mm[group="calendar"]'),Q=(0,c.aI)(P,".qm"),H=(0,c.aI)(Q,".wm"),N=(0,c.aI)(Q,".ym"),W=(0,c.aI)(F,'.km .lm .mm[group="actions"]'),Y=(0,c.aI)(W,'.qm .rm[action="save-to-folder"]'),U=(0,c.aI)(W,'.qm .rm[action="get-permalink"]'),X=(0,c.aI)(W,'.qm .rm[action="show-permalink-qrcode"]'),V=(0,c.aI)(O,'.mm[group="properties"]'),K=(0,c.aI)(V,".qm");function tt(){return tt=(0,r.A)(function*(t,e){var n=(0,l.Js)("playing_animation"),r=yield(0,i.LH)("route",t);Y.setAttribute("animation",(0,u.xZ)(n)),Y.setAttribute("highlighted",(0,u.xZ)(r)),Y.onclick=function(){(0,d.B)("route",[t])},U.setAttribute("animation",(0,u.xZ)(n)),U.onclick=function(){!function(t){h.apply(this,arguments)}(t)},X.setAttribute("animation",(0,u.xZ)(n)),X.onclick=function(){!function(t){y.apply(this,arguments)}(t)},G(),function(){for(var t=(0,l.Js)("playing_animation"),e={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},a={},r=0;r<7;r++){var i=`d_${r}`;n[i]=[],a[i]={day:r,code:"d_{i}",name:""};for(var o=0;o<e[i];o++){var u=new Date;u.setHours(0),u.setMinutes(30*o),u.setSeconds(0),u.setMilliseconds(0),n[i].push({date:u,dateString:"",duration:15})}}$({calendarEventGroups:n,calendarDays:a,calendarDayQuantity:7,calendarEventQuantity:e},!0,t)}();var c=(0,u.zx)(),s=yield(0,o.p)(t,e,c);(0,a.updatePropertiesField)(V,s.properties,!1,n),$(s.calendar,!1,n)}),tt.apply(this,arguments)}function et(t,e){(0,s.WR)("RouteDetails"),F.setAttribute("displayed","true"),function(t,e){tt.apply(this,arguments)}(t,e)}function nt(){(0,s.kr)("RouteDetails"),F.setAttribute("displayed","false");var t,e=L((0,c.jg)(N,".zm"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,a=L((0,c.jg)(H,".xm"));try{for(a.s();!(n=a.n()).done;){n.value.remove()}}catch(t){a.e(t)}finally{a.f()}}},7908(t,e,n){n.d(e,{NW:()=>y,XG:()=>p,hy:()=>h});var a=n(467),r=n(3937),i=n(77),o=n(8024),l=n(8179),u=n(904),c=n(9119),s=(0,l.bv)(".an"),d=(0,l.aI)(s,".fn"),f=(0,l.aI)(d,".gn"),v=(0,l.aI)(f,'.hn[group="provider"] .ln input'),m=(0,l.aI)(f,'.hn[group="registration-key"] .ln input');function p(){(0,u.WR)("RegisterNotification"),s.setAttribute("displayed","true"),v.value=(0,i.D7)(),m.value="",(0,u.Z_)()}function h(){s.setAttribute("displayed","false"),(0,u.l$)()}function y(){return g.apply(this,arguments)}function g(){return(g=(0,a.A)(function*(){(0,c.a)("處理中","manufacturing");var t=v.value,e=m.value;if((0,o.Gz)(t))return(0,i.Je)(t),(yield(0,r.e)(e))?void(0,c.a)("註冊成功","check_circle"):void(0,c.a)("註冊失敗","error");(0,c.a)("無效的提供者","error")})).apply(this,arguments)}}}]);
//# sourceMappingURL=85ed2952880dd05009e7.js.map