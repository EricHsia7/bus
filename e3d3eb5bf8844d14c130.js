"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[324],{540(e,t,n){n.d(t,{F:()=>D,a:()=>Z});var a=n(467),r=n(5767),i=n(9566),o=n(3459),d=n(8024),c=n(8179),s=n(4537),l=n(904),u=n(3030),p=n(9119),f=n(4690),m=(0,c.bv)("._"),b=(0,c.aI)(m,".aa"),v=(0,c.aI)(m,".ba"),h=(0,c.aI)(v,".ca"),y=(0,c.aI)(b,".da .ea"),g={},w=!1,C=!1,k=15e3,I=5e3,L=15e3,A=!0,x=0,E=0,_="",T=!1,M=!1,S=!1;function j(){var e=document.createElement("div");e.classList.add("fa"),e.setAttribute("type","stop");var t=document.createElement("div");t.classList.add("ga"),t.appendChild((0,s.YC)("location_on"));var n=document.createElement("div");n.classList.add("ha");var a=document.createElement("div");a.classList.add("ia");var r=document.createElement("div");r.classList.add("ja");var i=document.createElement("div");i.classList.add("ka");var o=document.createElement("div");o.classList.add("la"),o.setAttribute("code","0"),o.setAttribute("displayed","false");var d=document.createElement("div");d.classList.add("ma"),d.setAttribute("code","0"),d.setAttribute("displayed","true"),i.appendChild(o),i.appendChild(d);var c=document.createElement("div");c.classList.add("na"),c.appendChild((0,s.YC)("keyboard_arrow_right"));var l=document.createElement("div");return l.classList.add("oa"),r.appendChild(i),r.appendChild(c),r.appendChild(l),e.appendChild(t),e.appendChild(n),e.appendChild(a),e.appendChild(r),{element:e,id:""}}function $(){var e=document.createElement("div");e.classList.add("pa");var t=document.createElement("div");t.classList.add("qa");var n=document.createElement("div");n.classList.add("ra"),n.appendChild((0,s.oC)());var a=document.createElement("div");a.classList.add("sa"),t.appendChild(n),t.appendChild(a);var r=document.createElement("div");return r.classList.add("ta"),e.appendChild(t),e.appendChild(r),{element:e,id:""}}function P(e){var t=e;if(T){var n=t.detail.progress-1;y.style.setProperty("--wa",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,P)}function D(){for(var e=(0,o.Js)("playing_animation"),t=(0,l.gO)("window"),n=(t.width,t.height),a=Math.floor(n/50/3)+2,r=[],i=0;i<3;i++){for(var d={name:"",icon:"",id:"",timestamp:0,content:[],contentLength:a},c=0;c<a;c++){d.content.push({type:"stop",id:0,timestamp:0,name:"",status:{code:8,text:"",time:-6},direction:0,route:{name:"",endPoints:{departure:"",destination:""},id:0,pathAttributeId:[]}})}r.push(d)}F({folders:r,dataUpdateTime:0},!0,e)}function F(e,t,n){function a(e,a,r){function i(e,t){e.setAttribute("type",t.type)}function o(e,t){var n=(0,c.aI)(e,".ga"),a="";switch(t.type){case"stop":case"location":a="location_on";break;case"route":a="route";break;case"bus":a="directions_bus";break;case"empty":a="lightbulb";break;default:a=""}(0,s.yD)(n,a)}function l(e,t,n){if("stop"===t.type){var a=e.getBoundingClientRect(),r=a.top,i=a.left,o=a.bottom,d=a.right,s=window.innerWidth,l=window.innerHeight,u=(0,c.aI)(e,".ja .ka"),p=(0,c.aI)(u,".la"),f=(0,c.aI)(u,".ma");p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text,n&&o>0&&r<l&&d>0&&i<s?(f.addEventListener("animationend",function(){f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,f.classList.remove("xa"),p.setAttribute("displayed","false")},{once:!0}),p.setAttribute("displayed","true"),f.classList.add("xa")):(f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text)}}function p(e,t){var n="";switch(t.type){case"stop":case"route":case"location":n=t.name;break;case"bus":n=t.busID;break;case"empty":n="沒有內容";break;default:n="null"}(0,c.aI)(e,".ia").innerText=n}function m(e,t){var n="";switch(t.type){case"stop":n=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`;break;case"route":n=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`;break;case"location":n="地點";break;case"bus":break;case"empty":n="提示";break;default:n="null"}(0,c.aI)(e,".ha").innerText=n}function b(e,t){var n=(0,c.aI)(e,".ja .na");switch(t.type){case"stop":n.onclick=function(){(0,f.SR)(t.route.id,t.route.pathAttributeId)};break;case"route":n.onclick=function(){(0,f.SR)(t.id,t.pathAttributeId)};break;case"location":n.onclick=function(){(0,u.so)(t.id)}}}function v(e,t){e.setAttribute("animation",(0,d.xZ)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,d.xZ)(t))}if(null==r)i(e,a),o(e,a),l(e,a,n),p(e,a),m(e,a),b(e,a),v(e,n),h(e,t);else if(a.type!==r.type)i(e,a),o(e,a),l(e,a,n),p(e,a),m(e,a),b(e,a),v(e,n),h(e,t);else{switch(a.type){case"stop":(0,d.hw)(r.route,a.route)||(m(e,a),b(e,a)),r.name!==a.name&&p(e,a),r.status.time!==a.status.time&&l(e,a,n);break;case"route":r.id!==a.id&&b(e,a),(0,d.hw)(r.endPoints,a.endPoints)||m(e,a),r.name!==a.name&&p(e,a);break;case"location":r.id!==a.id&&b(e,a),r.name!==a.name&&p(e,a);break;case"bus":default:break;case"empty":a.type!==r.type&&(m(e,a),p(e,a))}t!==C&&h(e,t),n!==w&&v(e,n)}}function r(e,a,r){function i(e,t){var n=(0,c.aI)(e,".qa");(0,c.aI)(n,".sa").innerText=t.name}function o(e,t){var n=(0,c.aI)(e,".qa"),a=(0,c.aI)(n,".ra");(0,s.yD)(a,t.icon)}function l(e,t){e.setAttribute("animation",(0,d.xZ)(t))}function u(e,t){e.setAttribute("skeleton-screen",(0,d.xZ)(t))}null==r?(i(e,a),o(e,a),l(e,n),u(e,t)):(a.name!==r.name&&i(e,a),a.icon!==r.icon&&o(e,a),n!==w&&l(e,n),t!==C&&u(e,t))}var i=e.folders,o=i.length,l=(0,c.jg)(h,".pa").length;if(o!==l){var p=l-o;if(p<0){for(var m=new DocumentFragment,b=0,v=Math.abs(p);b<v;b++){var y=$();m.appendChild(y.element)}h.append(m)}else for(var k=(0,c.jg)(h,".pa"),I=0,L=Math.abs(p);I<L;I++){k[l-1-I].remove()}}for(var A=(0,c.jg)(h,".pa"),x=0;x<o;x++){var E=i[x].content.length,_=A[x],T=(0,c.aI)(_,".ta"),M=(0,c.jg)(T,".fa").length;if(E!==M){var S=M-E;if(S<0)for(var P=0,D=Math.abs(S);P<D;P++){var F=j();T.appendChild(F.element)}else for(var z=(0,c.jg)(T,".fa"),Y=0,O=Math.abs(S);Y<O;Y++){z[M-1-Y].remove()}}}for(var R=(0,c.jg)(h,".pa"),Z=0;Z<o;Z++){var U=i[Z],N=U.content,q=N.length,J=R[Z],W=(0,c.aI)(J,".ta");if(g.hasOwnProperty("folders"))if(g.folders[Z])r(J,U,g.folders[Z]);else r(J,U,null);else r(J,U,null);for(var H=(0,c.jg)(W,".fa"),Q=0;Q<q;Q++){var B=H[Q],X=N[Q];if(g.hasOwnProperty("folders"))if(g.folders[Z])if(g.folders[Z].content[Q])a(B,X,g.folders[Z].content[Q]);else a(B,X,null);else a(B,X,null);else a(B,X,null)}}g=e,w=n,C=t}function z(){return Y.apply(this,arguments)}function Y(){return(Y=(0,a.A)(function*(){var e=(0,o.Js)("playing_animation"),t=(0,o.Js)("refresh_interval");A=t.dynamic,k=t.baseInterval,T=!0,_=(0,d.zx)(),y.setAttribute("refreshing","true"),y.classList.remove("va"),document.addEventListener(_,P);var n=yield(0,i.R_)(_);F(n,!1,e);var a=0;A&&(a=yield(0,r.wz)()),x=(new Date).getTime(),E=A?Math.max(x+I,n.dataUpdateTime+k/a):x+k,L=Math.max(I,E-x),T=!1,y.setAttribute("refreshing","false"),y.style.setProperty("--ua",`${L}ms`),y.classList.add("va")})).apply(this,arguments)}function O(){return R.apply(this,arguments)}function R(){return(R=(0,a.A)(function*(){z().then(function(){M?setTimeout(function(){O()},Math.max(I,E-(new Date).getTime())):S=!1}).catch(function(e){M?((0,p.a)("error","資料夾網路連線中斷，將在10秒後重試。"),setTimeout(function(){O()},1e4)):S=!1})})).apply(this,arguments)}function Z(){D(),M||(M=!0,S?z():(S=!0,O()))}},4537(e,t,n){n.d(t,{YC:()=>i,Zf:()=>r,oC:()=>o,yD:()=>d});var a=n(8179);function r(e){return`<span class="ya">${e}</span>`}function i(e){var t=document.createElement("span");return t.classList.add("ya"),t.innerText=e,t}function o(){var e=document.createElement("span");return e.classList.add("ya"),e}function d(e,t){(0,a.aI)(e,"span.ya").innerText=t}},6052(e,t,n){n.d(t,{c6:()=>f,pd:()=>m,z1:()=>b});var a=n(9566),r=n(8179),i=n(6189),o=n(904),d=n(9119),c=(0,r.bv)(".za"),s=(0,r.aI)(c,"._a"),l=(0,r.aI)(s,".ab"),u=(0,r.aI)(l,'.bb[group="folder-name"] .cb input'),p=(0,r.aI)(l,'.bb[group="folder-icon"] .cb .db input');function f(){var e=u.value,t=p.value;(0,a.vV)(e,t).then(function(e){e?(b(),(0,d.a)("folder","已建立資料夾")):(0,d.a)("error","無法建立資料夾")})}function m(){(0,o.WR)("FolderCreator"),c.setAttribute("displayed","true"),(0,o.Z_)()}function b(){c.setAttribute("displayed","false"),(0,o.l$)()}(0,r.aI)(l,'.za ._a .ab .bb[group="folder-icon"] .cb .db .eb').onclick=function(){(0,i.r7)("creator")}},6082(e,t,n){n.d(t,{X:()=>h,m:()=>u});var a=n(467),r=n(9734),i=n(8011),o=n(9218),d=n(4293),c=n(6788),s=n(8179),l="downloadData",u=!1,p=(0,s.bv)("._"),f=(0,s.aI)(p,".aa"),m=(0,s.aI)(f,".fb"),b=(0,s.aI)(m,'svg#download-svg path[progress="progress"]');function v(e){var t=e,n=189*(1-(0,c._M)(l));b.style.setProperty("--gb",`${n}px`),"end"===t.detail.stage&&(document.removeEventListener(t.detail.target,v),b.addEventListener("transitionend",function(){m.setAttribute("complete","true")},{once:!0}),b.style.setProperty("--gb","0px"),u=!0)}function h(){return y.apply(this,arguments)}function y(){return(y=(0,a.A)(function*(){(0,c.Mf)(l,"getLocation_0",0,!1),(0,c.Mf)(l,"getLocation_1",0,!1),(0,c.Mf)(l,"getCarInfo_0",0,!1),(0,c.Mf)(l,"getCarInfo_1",0,!1),(0,c.Mf)(l,"getMaterialSymbolsSearchIndex",0,!1),document.addEventListener(l,v),yield(0,d.a)(l,!0),yield(0,i.g)(l,1),yield(0,r.j)(l,!0),yield(0,o.l)(l),(0,c.LQ)(l),(0,c.gC)(l)})).apply(this,arguments)}},6091(e,t,n){n.d(t,{Q:()=>S,u:()=>F});var a=n(467),r=n(5767),i=n(5314),o=n(3459),d=n(8024),c=n(8179),s=n(4884),l=n(4537),u=n(904),p=n(3030),f=n(4690),m=(0,c.bv)("._"),b=(0,c.aI)(m,".ba"),v=(0,c.aI)(b,".hb"),h=(0,c.aI)(v,".ib"),y={},g=!1,w=!1,C=15e3,k=5e3,I=!0,L=!1,A=0,x=0,E="",_=!1;function T(){var e=document.createElement("div");e.classList.add("jb");var t=document.createElement("div");t.classList.add("kb");var n=document.createElement("div");n.classList.add("lb"),n.appendChild((0,l.oC)());var a=document.createElement("div");a.classList.add("mb");var r=document.createElement("div");r.classList.add("nb"),t.appendChild(n),t.appendChild(a),t.appendChild(r);var i=document.createElement("div");return i.classList.add("ob"),e.appendChild(t),e.appendChild(i),{element:e,id:""}}function M(e,t,n){function a(e,a,r){function i(e,t){var n=(0,c.aI)(e,".kb"),a=(0,c.aI)(n,".lb"),r="";switch(t.type){case"route":r="route";break;case"location":r="location_on";break;case"bus":r="directions_bus";break;case"empty":r="lightbulb"}(0,l.yD)(a,r)}function o(e,t){var n=(0,c.aI)(e,".kb .mb"),a="";switch(t.type){case"route":a="路線";break;case"location":a="地點";break;case"bus":a="公車";break;case"empty":a="提示"}n.innerText=a}function u(e,t){(0,c.aI)(e,".kb .nb").innerText=t.time.relative}function m(e,t){(0,c.aI)(e,".ob").innerText=t.name}function b(e,t){switch(t.type){case"route":e.onclick=function(){(0,f.SR)(t.id,t.pid)};break;case"location":e.onclick=function(){(0,p.so)(t.hash)};break;case"bus":e.onclick=function(){(0,s.$l)(t.id)};break;case"empty":e.onclick=null}}function v(e,t){e.setAttribute("animation",(0,d.xZ)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,d.xZ)(t))}if(null==r)i(e,a),o(e,a),u(e,a),m(e,a),b(e,a),v(e,n),h(e,t);else if(a.type!==r.type)i(e,a),o(e,a),u(e,a),m(e,a),b(e,a),v(e,n),h(e,t);else{switch(a.type){case"location":(0,d.hw)(r.name,a.name)||m(e,a),r.time!==a.time&&u(e,a),(0,d.hw)(r.hash,a.hash)||b(e,a);break;case"route":(0,d.hw)(r.name,a.name)||m(e,a),r.time!==a.time&&u(e,a),(0,d.hw)(r.id,a.id)&&(0,d.hw)(r.pid,a.pid)||b(e,a);break;case"bus":(0,d.hw)(r.name,a.name)||m(e,a),r.time!==a.time&&u(e,a),(0,d.hw)(r.id,a.id)||b(e,a);break;case"empty":r.time!==a.time&&u(e,a)}n!==g&&v(e,n),t!==w&&h(e,t)}}var r=e.itemQuantity,i=(0,c.jg)(h,".jb").length;if(r!==i){var o=i-r;if(o<0){for(var u=new DocumentFragment,m=0,b=Math.abs(o);m<b;m++){var v=T();u.appendChild(v.element)}h.append(u)}else for(var C=(0,c.jg)(h,".jb"),k=0,I=Math.abs(o);k<I;k++){C[i-1-k].remove()}}for(var L=(0,c.jg)(h,".jb"),A=0;A<r;A++){var x=L[A],E=e.items[A];if(y.hasOwnProperty("items"))if(y.items[A])a(x,E,y.items[A]);else a(x,E,null);else a(x,E,null)}y=e,g=n,w=t}function S(){for(var e=(0,o.Js)("playing_animation"),t=(0,u.gO)("window"),n=Math.floor(t.height/70/3)+2,a=[],r=0;r<n;r++)a.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});M({items:a,itemQuantity:a.length,dataUpdateTime:0},!0,e)}function j(){return $.apply(this,arguments)}function $(){return($=(0,a.A)(function*(){var e=(0,o.Js)("playing_animation"),t=(0,o.Js)("refresh_interval");I=t.dynamic,C=t.baseInterval,E=(0,d.zx)();var n=yield(0,i.$i)(E);M(n,!1,e);var a=0;I&&(a=yield(0,r.wz)()),A=(new Date).getTime(),x=I?Math.max(A+k,n.dataUpdateTime+C/a):A+C,Math.max(k,x-A)})).apply(this,arguments)}function P(){return D.apply(this,arguments)}function D(){return(D=(0,a.A)(function*(){j().then(function(){L?setTimeout(function(){P()},Math.max(k,x-(new Date).getTime())):_=!1}).catch(function(e){L?setTimeout(function(){P()},1e4):_=!1})})).apply(this,arguments)}function F(){S(),L||(L=!0,_?j():(_=!0,P()))}},6189(e,t,n){n.d(t,{Pk:()=>k,jW:()=>L,r7:()=>I});var a=n(467),r=n(9218),i=n(6788),o=n(972),d=n(8179),c=n(8024),s=n(4781),l=n(6082),u=n(4537),p=n(904),f=n(9119);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var v="",h=(0,d.bv)(".pb"),y=(0,d.bv)(".za"),g=(0,d.bv)(".i");function w(e){var t=document.createElement("div");return t.classList.add("qb"),t.onclick=function(){!function(e){var t;switch(v){case"editor":t=(0,d.aI)(h,'.ub .vb .wb[group="folder-icon"] .xb .yb input');break;case"creator":t=(0,d.aI)(y,'._a .ab .bb[group="folder-icon"] .cb .db input')}t.value=e,L()}(e)},t.appendChild((0,u.YC)(e)),{element:t,id:""}}function C(){return(C=(0,a.A)(function*(){var e=(0,d.aI)(g,".rb .sb");e.innerHTML="";var t=(0,c.zx)(),n=yield(0,r.l)(t);(0,i.LQ)(t);var a=new DocumentFragment;for(var o in n.symbols){var s=w(o);a.appendChild(s.element)}e.append(a)})).apply(this,arguments)}function k(e){var t=(0,d.aI)(g,".rb .tb"),n=(0,d.aI)(g,".rb .sb");if(!(0,s.iO)(e)){var a,r=(0,o.U)(e),i=new DocumentFragment,c=m(r);try{for(c.s();!(a=c.n()).done;){var l=w(a.value.item);i.appendChild(l.element)}}catch(e){c.e(e)}finally{c.f()}t.innerHTML="",t.append(i),t.setAttribute("displayed",r.length>0?"true":"false"),n.setAttribute("displayed",r.length>0?"false":"true")}}function I(e){switch((0,p.WR)("FolderIconSelector"),e){case"editor":v="editor",(0,d.aI)(h,'.ub .vb .wb[group="folder-icon"] .xb .yb .zb');break;case"creator":v="creator",(0,d.aI)(y,'._a .ab .bb[group="folder-icon"] .cb .db .eb')}l.m?(g.setAttribute("displayed","true"),function(){C.apply(this,arguments)}(v),(0,o.L)()):(0,f.a)("download_for_offline","資料還在下載中")}function L(){(0,p.kr)("FolderIconSelector"),g.setAttribute("displayed","false")}},8379(e,t,n){n.d(t,{g:()=>v,m:()=>h});var a=n(467),r=n(9566),i=n(8179),o=n(9333),d=n(4537),c=n(904);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var u=(0,i.bv)("._b"),p=(0,i.aI)(u,".ac"),f=(0,i.aI)(p,".bc");function m(e){var t=document.createElement("div");t.classList.add("cc"),t.onclick=function(){(0,o.uy)(e.id)};var n=document.createElement("div");n.classList.add("dc"),n.appendChild((0,d.YC)(e.icon));var a=document.createElement("div");a.classList.add("ec"),a.appendChild(document.createTextNode(e.name));var r=document.createElement("div");r.classList.add("fc"),r.appendChild(document.createTextNode(String(e.contentLength)));var i=document.createElement("div");return i.classList.add("gc"),i.appendChild((0,d.YC)("arrow_forward_ios")),t.appendChild(n),t.appendChild(a),t.appendChild(r),t.appendChild(i),{element:t,id:""}}function b(){return(b=(0,a.A)(function*(){var e=yield(0,r.Xi)();f.innerHTML="";var t,n=new DocumentFragment,a=s(e);try{for(a.s();!(t=a.n()).done;){var i=m(t.value);n.appendChild(i.element)}}catch(e){a.e(e)}finally{a.f()}f.append(n)})).apply(this,arguments)}function v(){(0,c.WR)("FolderManager"),u.setAttribute("displayed","true"),function(){b.apply(this,arguments)}()}function h(){(0,c.kr)("FolderManager"),u.setAttribute("displayed","false")}},9333(e,t,n){n.d(t,{I6:()=>x,uy:()=>A});var a=n(467),r=n(9566),i=n(8179),o=n(8024),d=n(6189),c=n(4537),s=n(904),l=n(9119);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var f=(0,i.bv)(".pb"),m=(0,i.aI)(f,".hc"),b=(0,i.aI)(m,".ic"),v=(0,i.aI)(f,".ub"),h=(0,i.aI)(v,".vb"),y=(0,i.aI)(h,'.wb[group="folder-name"] .xb input'),g=(0,i.aI)(h,'.wb[group="folder-icon"] .xb .yb input'),w=(0,i.aI)(h,'.wb[group="folder-icon"] .xb .yb .zb'),C=(0,i.aI)(h,'.wb[group="folder-content"] .xb');function k(e,t){var n=(0,o.zx)(),a=document.createElement("div");a.id=n,a.classList.add("jc"),a.setAttribute("type",t.type);var d="",s="",u="";switch(t.type){case"stop":u="location_on",d=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`,s=t.name;break;case"route":u="route",d=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`,s=t.name;break;case"location":u="location_on",d="地點",s=t.name;break;case"bus":d="",s=t.name;break;case"empty":u="lightbulb",d="提示",s="沒有內容";break;default:u="",d="null",s="null"}var p=document.createElement("div");p.classList.add("kc"),p.appendChild((0,c.YC)(u));var m=document.createElement("div");m.classList.add("lc"),m.appendChild(document.createTextNode(d));var b=document.createElement("div");b.classList.add("mc"),b.appendChild(document.createTextNode(s));var v=document.createElement("div");v.classList.add("nc");var h=document.createElement("div");h.classList.add("oc"),h.appendChild((0,c.YC)("keyboard_arrow_down")),h.onclick=function(){E(n,e.id,t.type,t.id,"up")};var y=document.createElement("div");y.classList.add("pc"),y.appendChild((0,c.YC)("keyboard_arrow_down")),y.onclick=function(){E(n,e.id,t.type,t.id,"down")};var g=document.createElement("div");g.classList.add("qc"),g.appendChild((0,c.YC)("delete")),g.onclick=function(){!function(e,t,n,a){var o=(0,i.aI)(f,`.ub .vb .wb[group="folder-content"] .xb .jc#${e}`);(0,r.NC)(t,n,a).then(function(e){if(e)switch(o.remove(),n){case"stop":(0,l.a)("delete","已移除站牌");break;case"route":(0,l.a)("delete","已移除路線");break;case"location":(0,l.a)("delete","已移除地點")}else(0,l.a)("error","無法移除")})}(n,e.id,t.type,t.id)};var w=document.createElement("div");w.classList.add("rc");var C=document.createElement("div");return C.classList.add("rc"),v.appendChild(h),v.appendChild(y),v.appendChild(g),v.appendChild(w),v.appendChild(C),a.appendChild(p),a.appendChild(m),a.appendChild(b),a.appendChild(v),{element:a,id:n}}function I(e,t){y.value=e.name,g.value=e.icon,b.onclick=function(){var t,n,a;t=e.id,n=y.value,a=g.value,(0,r.g$)(t,n,a).then(function(e){e?(x(),(0,l.a)("check_circle","已儲存變更")):(0,l.a)("error","無法儲存")})},C.innerHTML="";var n,a=new DocumentFragment,i=u(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,d=k(e,o);a.appendChild(d.element)}}catch(e){i.e(e)}finally{i.f()}C.append(a)}function L(){return(L=(0,a.A)(function*(e){I((0,r.L2)(e),yield(0,r.eD)(e))})).apply(this,arguments)}function A(e){(0,s.WR)("FolderEditor"),f.setAttribute("displayed","true"),function(e){L.apply(this,arguments)}(e),(0,s.Z_)()}function x(){f.setAttribute("displayed","false"),(0,s.l$)()}function E(e,t,n,a,o){var d=(0,i.aI)(f,`.ub .vb .wb[group="folder-content"] .xb .jc#${e}`);(0,r.bq)(t,n,a,o).then(function(e){if(e)switch(o){case"up":var t=d.previousElementSibling;t&&d.parentNode.insertBefore(d,t),(0,l.a)("arrow_circle_up","已往上移");break;case"down":var n=d.nextElementSibling;n&&d.parentNode.insertBefore(n,d),(0,l.a)("arrow_circle_down","已往下移")}else(0,l.a)("error","無法移動")})}w.onclick=function(){(0,d.r7)("editor")}}}]);
//# sourceMappingURL=e3d3eb5bf8844d14c130.js.map