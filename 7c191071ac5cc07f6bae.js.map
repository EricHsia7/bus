{"version":3,"file":"7c191071ac5cc07f6bae.js","mappings":"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","sources":["webpack://bus/./src/interface/location/details/index.ts","webpack://bus/./src/interface/notification-schedule-manager/index.ts","webpack://bus/./src/interface/personal-schedule-editor/index.ts","webpack://bus/./src/interface/personal-schedule-manager/index.ts","webpack://bus/./src/interface/qrcode/index.ts","webpack://bus/./src/interface/personal-schedule-creator/index.ts","webpack://bus/./src/interface/prompt/index.ts"],"sourcesContent":["import { getLocation, MergedLocation, MergedLocationItem } from '../../../data/apis/getLocation/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../../../data/apis/loader';\nimport { IntegratedLocationDetails, IntegratedLocationDetailsAction, integrateLocationDetails } from '../../../data/location/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier, hasOwnProperty } from '../../../tools/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../../index';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nlet previousIntegration = {} as IntegratedLocationDetails;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst LocationDetailsField = documentQuerySelector('.css_location_details_field');\nconst LocationDetailsBodyElement = elementQuerySelector(LocationDetailsField, '.css_location_details_body');\nconst LocationDetailsActionsElement = elementQuerySelector(LocationDetailsBodyElement, '.css_location_details_actions');\n\nfunction generateElementOfItem(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_location_details_action');\n\n  // Icon\n  const icon = document.createElement('div');\n  icon.classList.add('css_location_details_action_icon');\n  icon.appendChild(getBlankIconElement());\n  element.appendChild(icon);\n\n  // Name\n  const name = document.createElement('div');\n  name.classList.add('css_location_details_action_name');\n  element.appendChild(name);\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction updateLocationDetailsField(integration: IntegratedLocationDetails, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction, previousItem: IntegratedLocationDetailsAction | null): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_location_details_action_icon');\n      setIcon(thisIconElement, thisItem.icon);\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const nameElement = elementQuerySelector(thisElement, '.css_location_details_action_name');\n      nameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      thisElement.onclick = thisItem.action;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateIcon(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (previousItem.key !== thisItem.key) {\n        updateIcon(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n      }\n\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const actions = integration.actions;\n  const actionsQuantity = integration.actionsQuantity;\n\n  const currentActionsCapacity = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action').length;\n  if (actionsQuantity !== currentActionsCapacity) {\n    const difference = currentActionsCapacity - actionsQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement.element);\n      }\n      LocationDetailsActionsElement.append(fragment);\n    } else {\n      const LocationActionElements = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const itemIndex = currentActionsCapacity - 1 - o;\n        LocationActionElements[itemIndex].remove();\n      }\n    }\n  }\n\n  const LocationActionElements = elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action');\n\n  for (let i = 0; i < actionsQuantity; i++) {\n    const thisElement = LocationActionElements[i];\n    const thisItem = actions[i];\n    if (hasOwnProperty(previousIntegration, 'actions')) {\n      if (previousIntegration.actions[i]) {\n        const previousItem = previousIntegration.actions[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpLocationDetailsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const actions: IntegratedLocationDetailsAction[] = [];\n  /*\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  */\n  const defaultActionsQuantity = 3;\n  for (let i = 0; i < defaultActionsQuantity; i++) {\n    actions.push({\n      name: '',\n      icon: '',\n      key: `action-${i}`,\n      action: function () {}\n    });\n  }\n\n  updateLocationDetailsField(\n    {\n      actions: actions,\n      actionsQuantity: defaultActionsQuantity,\n      hash: ''\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function initializeLocationDetailsField(hash: string) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  const integration = await integrateLocationDetails(hash, requestID);\n  updateLocationDetailsField(integration, false, playing_animation);\n}\n\nexport function openLocationDetails(hash: string): void {\n  pushPageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'true');\n  setUpLocationDetailsFieldSkeletonScreen();\n  initializeLocationDetailsField(hash);\n}\n\nexport function closeLocationDetails(): void {\n  revokePageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'false');\n}\n\nexport async function shareLocationPermalink(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (hasOwnProperty(Location, thisLocationKey)) {\n    const thisLocation = Location[thisLocationKey] as MergedLocationItem;\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisLocation.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('check_circle', '已分享地點');\n        })\n        .catch((e) => {\n          promptMessage('cancel', '已取消分享');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showLocationPermalinkQRCode(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (hasOwnProperty(Location, thisLocationKey)) {\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    openQRCode(link);\n  }\n}\n","import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../data/apis/loader';\nimport { cancelNotification } from '../../data/notification/apis/cancelNotification/index';\nimport { IntegratedNotificationScheduleItem, IntegratedNotificationSchedules, integrateNotifcationSchedules, NotificationSchedule } from '../../data/notification/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString, compareThings, generateIdentifier, hasOwnProperty } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst NotificationScheduleManagerField = documentQuerySelector('.css_notification_schedule_manager_field');\nconst NotificationScheduleManagerHeadElement = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_head');\nconst NotificationScheduleManagerUpdateTimerBoxElement = elementQuerySelector(NotificationScheduleManagerHeadElement, '.css_notification_schedule_manager_update_timer_box');\nconst NotificationScheduleManagerUpdateTimerElement = elementQuerySelector(NotificationScheduleManagerUpdateTimerBoxElement, '.css_notification_schedule_manager_update_timer');\nconst NotificationScheduleManagerBody = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_body');\nconst NotificationScheduleList = elementQuerySelector(NotificationScheduleManagerBody, '.css_notification_schedule_manager_notification_schedule_list');\n\nlet previousIntegration = {} as IntegratedNotificationSchedules;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet notifcationScheduleManagerRefreshTimer_retryInterval: number = 10 * 1000;\nlet notifcationScheduleManagerRefreshTimer_baseInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_minInterval: number = 5 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamic: boolean = true;\nlet notifcationScheduleManagerRefreshTimer_lastUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_nextUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_currentRequestID: string = '';\nlet notifcationScheduleManagerRefreshTimer_refreshing: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_streaming: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_streamStarted: boolean = false;\n\nfunction animateUpdateTimer(): void {\n  NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-notification-schedule-manager-update-timer-interval', `${notifcationScheduleManagerRefreshTimer_dynamicInterval}ms`);\n  NotificationScheduleManagerUpdateTimerElement.classList.add('css_notification_schedule_manager_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (notifcationScheduleManagerRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-notification-schedule-manager-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfItem(): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main item element\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_notification_schedule_manager_item');\n  itemElement.id = identifier;\n\n  // Hours element\n  const hoursElement = document.createElement('div');\n  hoursElement.classList.add('css_notification_schedule_manager_item_hours');\n  itemElement.appendChild(hoursElement);\n\n  // Notification schedule container\n  const notificationScheduleElement = document.createElement('div');\n  notificationScheduleElement.classList.add('css_notification_schedule_manager_item_notification_schedule');\n\n  // Minutes element\n  const minutesElement = document.createElement('div');\n  minutesElement.classList.add('css_notification_schedule_manager_item_notification_schedule_minutes');\n  notificationScheduleElement.appendChild(minutesElement);\n\n  // Context element\n  const contextElement = document.createElement('div');\n  contextElement.classList.add('css_notification_schedule_manager_item_notification_schedule_context');\n  notificationScheduleElement.appendChild(contextElement);\n\n  // Main element\n  const mainElement = document.createElement('div');\n  mainElement.classList.add('css_notification_schedule_manager_item_notification_schedule_main');\n  notificationScheduleElement.appendChild(mainElement);\n\n  // Cancel button element\n  const cancelElement = document.createElement('div');\n  cancelElement.classList.add('css_notification_schedule_manager_item_notification_schedule_cancel');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('close'));\n  cancelElement.appendChild(iconElement);\n\n  notificationScheduleElement.appendChild(cancelElement);\n\n  // Assemble\n  itemElement.appendChild(notificationScheduleElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction updateNotificationScheduleManagerField(integration: IntegratedNotificationSchedules, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem, previousItem: IntegratedNotificationScheduleItem | null): void {\n    function updateHours(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemHoursElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_hours');\n      thisItemHoursElement.innerText = thisItem.hours;\n    }\n\n    function updateMinutes(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMinutesElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_minutes');\n      thisItemMinutesElement.innerText = thisItem.minutes;\n    }\n\n    function updateMain(thisItemElement: HTMLElementm, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMainElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_main');\n      thisItemMainElement.innerText = thisItem.name;\n    }\n\n    function updateContext(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemContextElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_context');\n      thisItemContextElement.innerText = `${thisItem.route.name} - 往${thisItem.route.direction}`;\n    }\n\n    function updateCancel(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemCancelElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_cancel');\n      thisItemCancelElement.onclick = function () {\n        cancelNotificationOnNotificationScheduleManager(thisItemElement, thisItem.schedule_id);\n      };\n    }\n\n    function updateFirst(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      thisItemElement.setAttribute('first', booleanToString(thisItem.is_first));\n    }\n\n    function updateAnimation(thisItemElement: HTMLElement, animation: boolean): void {\n      thisItemElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisItemElement: HTMLElement, skeletonScreen: boolean): void {\n      thisItemElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateHours(thisItemElement, thisItem);\n      updateMinutes(thisItemElement, thisItem);\n      updateMain(thisItemElement, thisItem);\n      updateContext(thisItemElement, thisItem);\n      updateCancel(thisItemElement, thisItem);\n      updateFirst(thisItemElement, thisItem);\n      updateAnimation(thisItemElement, animation);\n      updateSkeletonScreen(thisItemElement, skeletonScreen);\n    } else {\n      if (thisItem.hours !== previousItem.hours) {\n        updateHours(thisItemElement, thisItem);\n      }\n      if (thisItem.minutes !== previousItem.minutes) {\n        updateMinutes(thisItemElement, thisItem);\n      }\n      if (!compareThings(previousItem.schedule_id, thisItem.schedule_id)) {\n        updateMain(thisItemElement, thisItem);\n        updateContext(thisItemElement, thisItem);\n        updateCancel(thisItemElement, thisItem);\n      }\n      if (previousItem.is_first !== thisItem.is_first) {\n        updateFirst(thisItemElement, thisItem);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisItemElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisItemElement, skeletonScreen);\n      }\n    }\n  }\n\n  const itemQuantity = integration.itemQuantity;\n  const items = integration.items;\n\n  const currentItemCapacity = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item').length;\n  if (itemQuantity !== currentItemCapacity) {\n    const difference = currentItemCapacity - itemQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement.element);\n      }\n      NotificationScheduleList.append(fragment);\n    } else {\n      const NotificationScheduleItemElements = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const itemIndex = currentItemCapacity - 1 - o;\n        NotificationScheduleItemElements[itemIndex].remove();\n      }\n    }\n  }\n\n  const NotificationScheduleItemElements = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item');\n  for (let j = 0; j < itemQuantity; j++) {\n    const thisItemElement = NotificationScheduleItemElements[j];\n    const thisItem = items[j];\n    if (hasOwnProperty(previousIntegration, 'items')) {\n      if (previousIntegration.items[j]) {\n        const previousItem = previousIntegration.items[j];\n        updateItem(thisItemElement, thisItem, previousItem);\n      } else {\n        updateItem(thisItemElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisItemElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpNotificationScheduleManagerFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: IntegratedNotificationSchedules['itemQuantity'] = Math.floor(FieldHeight / 50) + 5;\n  let items: IntegratedNotificationSchedules['items'] = [];\n  for (let i = 0; i < defaultItemQuantity; i++) {\n    items.push({\n      name: '',\n      stop_id: 0,\n      estimate_time: 0,\n      schedule_id: 'null',\n      scheduled_time: 0,\n      route: {\n        name: '',\n        direction: '',\n        id: 0,\n        pathAttributeId: []\n      },\n      is_first: true,\n      date: '',\n      hours: '',\n      minutes: ''\n    });\n  }\n  updateNotificationScheduleManagerField(\n    {\n      items: items,\n      itemQuantity: defaultItemQuantity,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function refreshNotificationScheduleManager() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  notifcationScheduleManagerRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  notifcationScheduleManagerRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  notifcationScheduleManagerRefreshTimer_refreshing = true;\n  notifcationScheduleManagerRefreshTimer_currentRequestID = generateIdentifier();\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'true');\n  NotificationScheduleManagerUpdateTimerElement.classList.remove('css_notification_schedule_manager_update_timer_slide_rtl');\n  document.addEventListener(notifcationScheduleManagerRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n  updateNotificationScheduleManagerField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  notifcationScheduleManagerRefreshTimer_lastUpdate = new Date().getTime();\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = Math.max(notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_minInterval, integration.dataUpdateTime + notifcationScheduleManagerRefreshTimer_baseInterval / updateRate);\n  } else {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_baseInterval;\n  }\n  notifcationScheduleManagerRefreshTimer_dynamicInterval = Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - notifcationScheduleManagerRefreshTimer_lastUpdate);\n  notifcationScheduleManagerRefreshTimer_refreshing = false;\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nasync function streamNotificationScheduleManager() {\n  refreshNotificationScheduleManager()\n    .then(function () {\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        setTimeout(\n          function () {\n            streamNotificationScheduleManager();\n          },\n          Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        setTimeout(function () {\n          streamNotificationScheduleManager();\n        }, notifcationScheduleManagerRefreshTimer_retryInterval);\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openNotificationScheduleManager(): void {\n  pushPageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'true');\n  setUpNotificationScheduleManagerFieldSkeletonScreen();\n  if (!notifcationScheduleManagerRefreshTimer_streaming) {\n    notifcationScheduleManagerRefreshTimer_streaming = true;\n    if (!notifcationScheduleManagerRefreshTimer_streamStarted) {\n      notifcationScheduleManagerRefreshTimer_streamStarted = true;\n      streamNotificationScheduleManager();\n    } else {\n      refreshNotificationScheduleManager();\n    }\n  }\n  closePreviousPage();\n}\n\nexport function closeNotificationScheduleManager(): void {\n  // revokePageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'false');\n  notifcationScheduleManagerRefreshTimer_streaming = false;\n  openPreviousPage();\n}\n\nexport async function cancelNotificationOnNotificationScheduleManager(thisItemElement: HTMLElement, schedule_id: NotificationSchedule['schedule_id']) {\n  promptMessage('manufacturing', '處理中');\n  const cancellation = await cancelNotification(schedule_id);\n  if (cancellation) {\n    thisItemElement.remove();\n    promptMessage('check_circle', '已取消通知');\n    if (!notifcationScheduleManagerRefreshTimer_refreshing) {\n      const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n      const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n      updateNotificationScheduleManagerField(integration, false, playing_animation);\n    }\n  } else {\n    promptMessage('error', '取消失敗');\n  }\n}\n","import { getPersonalSchedule, updatePersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { timeObjectToString, WeekDayIndex } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\n\nconst PersonalScheduleEditorField = documentQuerySelector('.css_personal_schedule_editor_field');\nconst PersonalScheduleEditorBodyElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_body');\nconst PersonalScheduleEditorHeadElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_head');\nconst leftButtonElement = elementQuerySelector(PersonalScheduleEditorHeadElement, '.css_personal_schedule_editor_button_left');\nconst PersonalScheduleEditorGroups = elementQuerySelector(PersonalScheduleEditorBodyElement, '.css_personal_schedule_editor_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-name\"] .css_personal_schedule_editor_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-start-time\"] .css_personal_schedule_editor_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-end-time\"] .css_personal_schedule_editor_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-days\"] .css_personal_schedule_editor_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_editor_day');\n\nexport async function saveEditedPersonalSchedule(personalScheduleID: string) {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  let personalSchedule = await getPersonalSchedule(personalScheduleID);\n  personalSchedule.name = name;\n  personalSchedule.days = days;\n  personalSchedule.period.start.hours = startHours;\n  personalSchedule.period.start.minutes = startMinutes;\n  personalSchedule.period.end.hours = endHours;\n  personalSchedule.period.end.minutes = endMinutes;\n\n  await updatePersonalSchedule(personalSchedule);\n  closePersonalScheduleEditor();\n}\n\nasync function initializePersonalScheduleEditorField(personalScheduleID: string) {\n  const personalSchedule = await getPersonalSchedule(personalScheduleID);\n  nameInputElement.value = personalSchedule.name;\n  startTimeInputElement.value = timeObjectToString(personalSchedule.period.start);\n  endTimeInputElement.value = timeObjectToString(personalSchedule.period.end);\n\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    if (personalSchedule.days.indexOf(i) > -1) {\n      thisDayElement.setAttribute('highlighted', 'true');\n    } else {\n      thisDayElement.setAttribute('highlighted', 'false');\n    }\n  }\n  leftButtonElement.onclick = function () {\n    saveEditedPersonalSchedule(personalScheduleID);\n  };\n}\n\nexport function openPersonalScheduleEditor(personalScheduleID: string): void {\n  pushPageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'true');\n  initializePersonalScheduleEditorField(personalScheduleID);\n  closePreviousPage();\n}\n\nexport function closePersonalScheduleEditor(): void {\n  // revokePageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function switchPersonalScheduleEditorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_editor_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { listPersonalSchedules, PersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { openPersonalScheduleEditor } from '../personal-schedule-editor/index';\n\nconst PersonalScheduleManagerField = documentQuerySelector('.css_personal_schedule_manager_field');\nconst PersonalScheduleManagerBodyElement = elementQuerySelector(PersonalScheduleManagerField, '.css_personal_schedule_manager_body');\nconst ListElement = elementQuerySelector(PersonalScheduleManagerBodyElement, '.css_personal_schedule_manager_list');\n\nfunction generateElementOfItem(item: PersonalSchedule): GeneratedElement {\n  // const identifier = generateIdentifier();\n\n  // Main item element\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_personal_schedule_manager_item');\n  // itemElement.id = identifier;\n  itemElement.onclick = function () {\n    openPersonalScheduleEditor(item.id);\n  };\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_personal_schedule_manager_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n  itemElement.appendChild(nameElement);\n\n  // Arrow element\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_personal_schedule_manager_item_arrow');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(iconElement);\n  itemElement.appendChild(arrowElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\nasync function initializePersonalScheduleManagerField() {\n  ListElement.innerHTML = '';\n  const personalSchedules = await listPersonalSchedules();\n  const fragment = new DocumentFragment();\n  for (const item of personalSchedules) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement.element);\n  }\n  ListElement.append(fragment);\n}\n\nexport function openPersonalScheduleManager(): void {\n  pushPageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'true');\n  initializePersonalScheduleManagerField();\n}\n\nexport function closePersonalScheduleManager(): void {\n  revokePageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'false');\n}\n","import { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateRoundedQRCodeSVG } from '../../tools/qrcode';\nimport { pushPageHistory, revokePageHistory } from '../index';\n\nconst QRCodeField = documentQuerySelector('.css_qrcode_field');\nconst QRCodeBodyElement = elementQuerySelector(QRCodeField, '.css_qrcode_body');\n\nexport function initializeQRCodeField(text: string): void {\n  const svg = generateRoundedQRCodeSVG(text, 'M', 0.5, 0.3, 1, 'var(--b-cssvar-333333)', 4);\n  QRCodeBodyElement.innerHTML = svg;\n}\n\nexport function openQRCode(text: string): void {\n  pushPageHistory('QRCode');\n  QRCodeField.setAttribute('displayed', 'true');\n  initializeQRCodeField(text);\n  // closePreviousPage();\n}\n\nexport function closeQRCode(): void {\n  revokePageHistory('QRCode');\n  QRCodeField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { createPersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { WeekDayIndex } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst PersonalScheduleCreatorField = documentQuerySelector('.css_personal_schedule_creator_field');\nconst PersonalScheduleCreatorBodyElement = elementQuerySelector(PersonalScheduleCreatorField, '.css_personal_schedule_creator_body');\nconst PersonalScheduleCreatorGroups = elementQuerySelector(PersonalScheduleCreatorBodyElement, '.css_personal_schedule_creator_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-name\"] .css_personal_schedule_creator_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-start-time\"] .css_personal_schedule_creator_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-end-time\"] .css_personal_schedule_creator_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-days\"] .css_personal_schedule_creator_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_creator_day');\n\nexport function createFormulatedPersonalSchedule(): void {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  createPersonalSchedule(name, startHours, startMinutes, endHours, endMinutes, days).then(function (e) {\n    if (e) {\n      closePersonalScheduleCreator();\n      promptMessage('calendar_view_day', '已建立個人化行程');\n    } else {\n      promptMessage('error', '無法建立個人化行程');\n    }\n  });\n}\n\nexport function openPersonalScheduleCreator(): void {\n  pushPageHistory('PersonalScheduleCreator');\n  PersonalScheduleCreatorField.setAttribute('displayed', 'true');\n  closePreviousPage();\n}\n\nexport function closePersonalScheduleCreator(): void {\n  // revokePageHistory('PersonalScheduleCreator');\n  PersonalScheduleCreatorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function switchPersonalScheduleCreatorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_creator_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\n\nexport interface PromptButton {\n  text: string;\n  action: Function;\n}\n\nexport function promptMessage(icon: MaterialSymbols, message: string, button?: PromptButton | null): void {\n  const allPromptElements = documentQuerySelectorAll('.css_prompt');\n  if (allPromptElements !== null) {\n    for (const promptElement of allPromptElements) {\n      promptElement.remove();\n    }\n  }\n\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n\n  const promptElement = document.createElement('div');\n  promptElement.classList.add('css_prompt');\n  promptElement.setAttribute('animation', booleanToString(playing_animation));\n\n  const promptIconElement = document.createElement('div');\n  promptIconElement.classList.add('css_prompt_icon');\n  promptIconElement.appendChild(getIconElement(icon));\n  promptElement.appendChild(promptIconElement);\n\n  const promptMessageElement = document.createElement('div');\n  promptMessageElement.classList.add('css_prompt_message');\n  promptMessageElement.innerText = message;\n  promptElement.appendChild(promptMessageElement);\n\n  if (typeof button === 'object' && button !== null && button !== undefined) {\n    if (typeof button?.action === 'function') {\n      const promptButtonElement = document.createElement('div');\n      promptButtonElement.classList.add('css_prompt_button');\n      promptButtonElement.innerText = button.text;\n      promptButtonElement.addEventListener(\n        'click',\n        function () {\n          button.action();\n        },\n        { once: true }\n      );\n      promptElement.appendChild(promptButtonElement);\n    }\n  }\n\n  promptElement.addEventListener(\n    'animationend',\n    function (event) {\n      if (event?.target) {\n        event.target.remove();\n      }\n    },\n    { once: true }\n  );\n\n  document.body.appendChild(promptElement);\n}\n"],"names":["previousIntegration","previousAnimation","previousSkeletonScreen","LocationDetailsField","documentQuerySelector","LocationDetailsBodyElement","elementQuerySelector","LocationDetailsActionsElement","generateElementOfItem","element","document","createElement","classList","add","icon","appendChild","getBlankIconElement","name","id","updateLocationDetailsField","integration","skeletonScreen","animation","updateItem","thisElement","thisItem","previousItem","updateIcon","thisIconElement","setIcon","updateName","innerText","updateOnclick","onclick","action","updateAnimation","setAttribute","booleanToString","updateSkeletonScreen","key","actions","actionsQuantity","currentActionsCapacity","elementQuerySelectorAll","length","difference","fragment","DocumentFragment","o","d","Math","abs","newItemElement","append","LocationActionElements","remove","i","hasOwnProperty","_initializeLocationDetailsField","_asyncToGenerator","hash","playing_animation","getSettingOptionValue","requestID","generateIdentifier","integrateLocationDetails","apply","arguments","openLocationDetails","pushPageHistory","push","setUpLocationDetailsFieldSkeletonScreen","_x","initializeLocationDetailsField","closeLocationDetails","revokePageHistory","shareLocationPermalink","_x2","_shareLocationPermalink","Location","getLocation","deleteDataReceivingProgress","deleteDataUpdateTime","thisLocationKey","thisLocation","link","getPermalink","navigator","share","title","n","url","then","promptMessage","e","showLocationPermalinkQRCode","_x3","_showLocationPermalinkQRCode","openQRCode","NotificationScheduleManagerField","NotificationScheduleManagerHeadElement","NotificationScheduleManagerUpdateTimerBoxElement","NotificationScheduleManagerUpdateTimerElement","NotificationScheduleManagerBody","NotificationScheduleList","notifcationScheduleManagerRefreshTimer_baseInterval","notifcationScheduleManagerRefreshTimer_minInterval","notifcationScheduleManagerRefreshTimer_dynamicInterval","notifcationScheduleManagerRefreshTimer_dynamic","notifcationScheduleManagerRefreshTimer_lastUpdate","notifcationScheduleManagerRefreshTimer_nextUpdate","notifcationScheduleManagerRefreshTimer_currentRequestID","notifcationScheduleManagerRefreshTimer_refreshing","notifcationScheduleManagerRefreshTimer_streaming","notifcationScheduleManagerRefreshTimer_streamStarted","handleDataReceivingProgressUpdates","event","CustomEvent","offsetRatio","detail","progress","style","setProperty","toString","stage","removeEventListener","target","identifier","itemElement","hoursElement","notificationScheduleElement","minutesElement","contextElement","mainElement","cancelElement","iconElement","getIconElement","updateNotificationScheduleManagerField","thisItemElement","updateHours","hours","updateMinutes","thisItemNotificationScheduleElement","minutes","updateMain","updateContext","route","direction","updateCancel","_cancelNotificationOnNotificationScheduleManager","this","cancelNotificationOnNotificationScheduleManager","schedule_id","updateFirst","is_first","compareThings","itemQuantity","items","currentItemCapacity","NotificationScheduleItemElements","j","refreshNotificationScheduleManager","_refreshNotificationScheduleManager","refresh_interval_setting","dynamic","baseInterval","addEventListener","integrateNotifcationSchedules","updateRate","getUpdateRate","Date","getTime","max","dataUpdateTime","streamNotificationScheduleManager","_streamNotificationScheduleManager","setTimeout","err","openNotificationScheduleManager","WindowSize","querySize","FieldHeight","width","height","defaultItemQuantity","floor","stop_id","estimate_time","scheduled_time","pathAttributeId","date","setUpNotificationScheduleManagerFieldSkeletonScreen","closePreviousPage","closeNotificationScheduleManager","openPreviousPage","cancelNotification","PersonalScheduleEditorField","PersonalScheduleEditorBodyElement","PersonalScheduleEditorHeadElement","leftButtonElement","PersonalScheduleEditorGroups","nameInputElement","startTimeInputElement","endTimeInputElement","dayGroupBodyElement","dayElements","saveEditedPersonalSchedule","_saveEditedPersonalSchedule","personalScheduleID","value","startTime","endTime","_String$split$map","String","split","map","parseInt","_String$split$map2","_slicedToArray","startHours","startMinutes","_String$split$map3","_String$split$map4","endHours","endMinutes","days","thisDayElement","highlighted","getAttribute","day","personalSchedule","getPersonalSchedule","period","start","end","updatePersonalSchedule","closePersonalScheduleEditor","_initializePersonalScheduleEditorField","timeObjectToString","indexOf","openPersonalScheduleEditor","initializePersonalScheduleEditorField","switchPersonalScheduleEditorDay","PersonalScheduleManagerField","PersonalScheduleManagerBodyElement","ListElement","item","nameElement","createTextNode","arrowElement","_initializePersonalScheduleManagerField","innerHTML","_step","personalSchedules","listPersonalSchedules","_iterator","_createForOfIteratorHelper","s","done","f","openPersonalScheduleManager","initializePersonalScheduleManagerField","closePersonalScheduleManager","QRCodeField","QRCodeBodyElement","text","svg","generateRoundedQRCodeSVG","initializeQRCodeField","closeQRCode","PersonalScheduleCreatorField","PersonalScheduleCreatorBodyElement","PersonalScheduleCreatorGroups","createFormulatedPersonalSchedule","createPersonalSchedule","closePersonalScheduleCreator","openPersonalScheduleCreator","switchPersonalScheduleCreatorDay","message","button","allPromptElements","documentQuerySelectorAll","promptElement","promptIconElement","promptMessageElement","_typeof","promptButtonElement","once","body"],"ignoreList":[],"sourceRoot":""}