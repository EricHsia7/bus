!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():t.bus=r()}(self,(()=>(()=>{"use strict";var t,r={4256:(t,r,e)=>{e.d(r,{_q:()=>l,pD:()=>u});var n=e(8024);function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=c(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(u)throw o}}}}function c(t,r){if(t){if("string"==typeof t)return i(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function u(t){return"".concat(t.city.join("")).concat(t.district.join("")).concat(t.road.join("、")).concat(t.road_section.sort((function(t,r){return t-r})).length>0?t.road_section.join("、")+"段":"").concat(t.alley.length>0?t.alley.sort((function(t,r){return t-r})).join("、")+"巷":"").concat(t.alley_branch.length>0?t.alley_branch.sort((function(t,r){return t-r})).join("、")+"弄":"").concat(t.doorplate.length>0?t.doorplate.sort((function(t,r){return t-r})).join("、")+"號":"").concat(t.floornumber.length>0?t.floornumber.join("、")+"樓":"").concat(t.direction.length>0?"（朝"+t.direction.join("、")+"）":"")}function l(t){var r,e=[],c={},i=o(t);try{for(i.s();!(r=i.n()).done;){var u=r.value;for(var l in u)c.hasOwnProperty(l)||(c[l]=0),u[l].length>0&&(c[l]=c[l]+1)}}catch(t){i.e(t)}finally{i.f()}var f=Object.entries(c).map((function(t){return{key:t[0],value:t[1]}})).filter((function(r){return r.value===t.length})).sort((function(t,r){return t.value-r.value}));if(f.length>0){var s,h=o(f);try{for(h.s();!(s=h.n()).done;){var d,v=s.value,p=[],g=o(t);try{for(g.s();!(d=g.n()).done;){u=d.value;p.push(u[v.key].join(""))}}catch(t){g.e(t)}finally{g.f()}(0,n.W8)(p)&&e.push({components:p,len:Math.max.apply(Math,a(p.map((function(t){return t.length}))))})}}catch(t){h.e(t)}finally{h.f()}}if(e.length>0)return(e=e.sort((function(t,r){return t.len-r.len})))[0].components;var y=t.length;return(0,n.VO)(y)}},8024:(t,r,e)=>{function n(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=a(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){u=!0,c=t},f:function(){try{i||null==e.return||e.return()}finally{if(u)throw c}}}}function a(t,r){if(t){if("string"==typeof t)return o(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}e.d(r,{B5:()=>I,D9:()=>h,FU:()=>m,MR:()=>S,MX:()=>g,QX:()=>s,VO:()=>p,W8:()=>d,_N:()=>O,e5:()=>A,hw:()=>l,iO:()=>M,p1:()=>j,q_:()=>i,t9:()=>w,tH:()=>f,wg:()=>u,zx:()=>b});var c=e(3503);function i(t,r,e,n){var a=(i.canvas||(i.canvas=document.createElement("canvas"))).getContext("2d"),o="".concat(r," ").concat(e," ").concat(n);return a.font=o,a.measureText(t).width}function u(t,r,e,n,a,o,c){o="number"==typeof o?{tl:o,tr:o,br:o,bl:o}:{tl:o.tl||0,tr:o.tr||0,br:o.br||0,bl:o.bl||0},t.beginPath(),t.moveTo(r+o.tl,e),t.lineTo(r+n-o.tr,e),t.quadraticCurveTo(r+n,e,r+n,e+o.tr),t.lineTo(r+n,e+a-o.br),t.quadraticCurveTo(r+n,e+a,r+n-o.br,e+a),t.lineTo(r+o.bl,e+a),t.quadraticCurveTo(r,e+a,r,e+a-o.bl),t.lineTo(r,e+o.tl),t.quadraticCurveTo(r,e,r+o.tl,e),t.closePath(),t.fillStyle=c,t.fill()}function l(t,r){function e(t){return JSON.stringify({e:t})}var n=e(t),a=e(r),o=n.length,i=a.length;if(o===i){if(o>32||i>32){for(var u=c(n),l=c(a),f=!0,s=0;s<8;s++){if(u.charAt(s)!==l.charAt(s)){f=!1;break}}return f}return n===a}return!1}function f(t){for(var r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],e=0;t>=1024&&e<r.length-1;)t/=1024,e++;return"".concat(t.toFixed(2)," ").concat(r[e])}function s(t){for(var r=[],e=[],n=0;n<t.length;n++)0===n||t[n][0]-t[n-1][0]>0?(e.length>0&&r.push(e),e=[t[n]]):e.push(t[n]);return e.length>0&&r.push(e),r}function h(t,r){var e=t.length;if(e!==r.length)throw new Error("Arrays must have the same length");for(var n=0,a=0,o=0,c=0,i=0,u=0;u<e;u++)n+=t[u],a+=r[u],o+=t[u]*r[u],c+=Math.pow(t[u],2),i+=Math.pow(r[u],2);var l=e*o-n*a,f=Math.sqrt((e*c-Math.pow(n,2))*(e*i-Math.pow(a,2)));return 0===f?0:l/f}function d(t){for(var r=0;r<t.length;r++)for(var e=r+1;e<t.length;e++)if(t[r]===t[e])return!1;return!0}function v(t){for(var r="";t>0;){var e=(t-1)%26;r=String.fromCharCode(e+65)+r,t=Math.floor((t-1)/26)}return r}function p(t){for(var r=[],e=0;e<t;e++)r.push("地點".concat(v(e+1)));return r}function g(t){var r,e=[],a=[{vector:[0,0],label:"未知"},{vector:[0,1],label:"北"},{vector:[1,0],label:"東"},{vector:[0,-1],label:"南"},{vector:[-1,0],label:"西"},{vector:[Math.sqrt(2)/2,Math.sqrt(2)/2],label:"東北"},{vector:[Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"東南"},{vector:[-Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"西南"},{vector:[-Math.sqrt(2)/2,Math.sqrt(2)/2],label:"西北"}],o=n(t);try{for(o.s();!(r=o.n()).done;){var c,i=r.value,u=0,l=0,f=n(i);try{for(f.s();!(c=f.n()).done;){var s=c.value;u+=s[0],l+=s[1]}}catch(t){f.e(t)}finally{f.f()}var h,d=x([u,l]),v=[],p=n(a);try{for(p.s();!(h=p.n()).done;){var g=h.value,y=g.vector[0]*d[0]+g.vector[1]*d[1];v.push({label:g.label,dotProduct:y})}}catch(t){p.e(t)}finally{p.f()}var b=(v=v.sort((function(t,r){return r.dotProduct-t.dotProduct})))[0];e.push(b.label)}}catch(t){o.e(t)}finally{o.f()}return e}var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function b(){for(var t="".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","_"),r=0;r<16;r++){var e=Math.round(Math.random()*y.length);t+=y.substring(e,e+1)}return t}function m(t){return(((new Date).getTime()/t).toFixed(0)*t).toString(36)}function M(t){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(t)}function S(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",e=arguments.length>2?arguments[2]:void 0,n=new Blob([t],{type:r}),a=new File([n],e,{type:r});if(navigator.canShare&&navigator.canShare({files:[a]}))navigator.share({files:[a]}).catch((function(t){}));else{var o=URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=e,document.body.appendChild(c),c.click(),c.remove(),setTimeout((function(){URL.revokeObjectURL(o)}),1e4)}}function w(){return window.matchMedia("(display-mode: standalone)").matches}function x(t){var r=Math.hypot(t),e=[];if(r>0){var a,o=1/r,c=n(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;e.push(i*o)}}catch(t){c.e(t)}finally{c.f()}return e}return t}function j(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)}function A(t,r){var e=t.length;if(e<3)return t;for(var n=0,a=0;a<e;a++)n+=t[a];for(var o=n/e,c=0,i=0;i<e;i++)c+=Math.pow(t[i]-o,2);for(var u=Math.sqrt(c/e),l=[],f=0,s=0;s<e;s++){var h=Math.exp(t[s]/u);f+=h,l.push(h)}for(var d=Math.pow(e,r),v={},p=0;p<e;p++){var g="k_".concat(Math.floor(l[p]/f*d));v.hasOwnProperty(g)||(v[g]={sum:0,len:0}),v[g].sum+=t[p],v[g].len+=1}var y=[];for(var b in v){var m=v[b];y.push(Math.floor(m.sum/m.len))}return y.sort((function(t,r){return t-r})),y}function I(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=[];if("string"==typeof t)for(var n=t.length,a=0;a<n;a++){var o=t.charCodeAt(a);(e.indexOf(o)<0||!r)&&e.push(o)}return e}function O(t,r){var e=[];if(t.length<=r.length){var a,o=n(t);try{for(o.s();!(a=o.n()).done;){var c=a.value;r.indexOf(c)>-1&&e.push(c)}}catch(t){o.e(t)}finally{o.f()}}else{var i,u=n(r);try{for(u.s();!(i=u.n()).done;){var l=i.value;t.indexOf(l)>-1&&e.push(l)}}catch(t){u.e(t)}finally{u.f()}}return e}},8141:(t,r,e)=>{function n(t,r,e){var n=e.x-r.x,a=e.y-r.y,o=n*n+a*a,c=((t.x-r.x)*n+(t.y-r.y)*a)/o;if(c<0)n=t.x-r.x,a=t.y-r.y;else if(c>1)n=t.x-e.x,a=t.y-e.y;else{var i={x:r.x+c*n,y:r.y+c*a};n=t.x-i.x,a=t.y-i.y}return Math.sqrt(n*n+a*a)}function a(t,r){if(t.length<3)return t;for(var e=0,o=0,c=1;c<t.length-1;c++){var i=n(t[c],t[0],t[t.length-1]);i>e&&(o=c,e=i)}if(e>r){var u=t.slice(0,o+1),l=t.slice(o),f=a(u,r),s=a(l,r);return f.slice(0,f.length-1).concat(s)}return[t[0],t[t.length-1]]}function o(t,r){if(t.length<1)return"";for(var e="M".concat(t[0].x*r,",").concat(t[0].y*r),n=1;n<t.length-1;n++){var a=t[n],o=t[n+1]||a;e+="Q".concat(a.x*r,",").concat(a.y*r,",").concat((a.x*r+o.x*r)/2,",").concat((a.y*r+o.y*r)/2)}var c=t[t.length-1];return e+="L".concat(c.x*r,",").concat(c.y*r)}e.d(r,{p:()=>o,z:()=>a})},9469:(t,r,e)=>{e.d(r,{_:()=>c,i:()=>i});var n=e(8134),a=e(4690),o=e(3030);function c(){var t=new URL(location.href).searchParams.get("permalink");if(null!==t){var r=String(t);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(r)){var e=r.split(/[\@\~]/);switch(parseInt(e[0])){case 0:(0,n.Rk)(parseInt(e[1],16)).then((function(t){t.length>0?(0,a.SR)(t[0].id,t[0].pid):(0,n.k9)(e[2]).then((function(t){t.length>0&&(0,a.SR)(t[0].id,t[0].pid)}))}));break;case 1:var c=e[1];(0,o.so)(c)}}}}function i(t,r){var e=new URL("https://erichsia7.github.io/bus/");switch(t){case 0:e.searchParams.set("permalink","0@".concat(parseInt(r.id).toString(16),"~").concat(r.name));break;case 1:e.searchParams.set("permalink","1@".concat(r.hash))}return decodeURIComponent(e.toString())}},841:(t,r,e)=>{function n(t,r,e,n){var a=e*Math.PI/180-t*Math.PI/180,o=n*Math.PI/180-r*Math.PI/180,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(t*Math.PI/180)*Math.cos(e*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))))}e.d(r,{b:()=>n})},3648:(t,r,e)=>{function n(t){return document.querySelector(t)}function a(t){return document.querySelectorAll(t)}function o(t,r){return t.querySelector(r)}function c(t,r){return t.querySelectorAll(r)}e.d(r,{aI:()=>o,bv:()=>n,e0:()=>a,jg:()=>c})},5579:(t,r,e)=>{function n(){var t=new Date,r=t.getDay(),e=t.getDate()-r,n=new Date;return n.setDate(e),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function a(t,r,e,n){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(e),a.setMinutes(n),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(t.getFullYear()),a.setMonth(t.getMonth()),a.setDate(t.getDate()),a.setDate(a.getDate()+r),a}function o(t){var r=t.match(/[0-9\.]*/gm);if(r){var e=parseInt(r[0]),n=parseInt(r[2]),a=parseInt(r[4]),o=parseInt(r[6]),c=parseInt(r[8]),i=parseInt(r[10]),u=new Date;return u.setDate(1),u.setMonth(0),u.setFullYear(e),u.setMonth(n-1),u.setDate(a),u.setHours(o),u.setMinutes(c),u.setSeconds(i),u.getTime()}return 0}function c(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,t.getFullYear()).replaceAll(/M{2,2}/g,String(t.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(t.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(t.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(t.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(t.getSeconds()).padStart(2,"0"))}function i(t){var r=t.getTime(),e=Math.floor(((new Date).getTime()-r)/1e3),n=Math.floor(e/31536e3);return n>=1?"".concat(n,"年前"):(n=Math.floor(e/2592e3))>=1?"".concat(n,"個月前"):(n=Math.floor(e/86400))>=1?"".concat(n,"天前"):(n=Math.floor(e/3600))>=1?"".concat(n,"小時前"):(n=Math.floor(e/60))>=1?"".concat(n,"分鐘前"):"".concat(e,"秒前")}function u(t,r){switch(t=Math.round(t),r){case 0:return"".concat(t,"秒");case 1:return[e=String((t-t%60)/60),String(t%60)].map((function(t){return t.padStart(2,"0")})).join(":");case 2:var e=String(Math.floor(t/60));return"".concat(e,"分");case 3:if(t>=3600){var n=String(parseFloat((t/3600).toFixed(1)));return"".concat(n,"時")}if(60<=t&&t<3600){e=String(Math.floor(t/60));return"".concat(e,"分")}if(t<60)return"".concat(t,"秒");break;default:return"--"}}function l(t){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][t]}function f(t){return l(parseInt(t)-1)}function s(t){return"".concat(String(t.hours).padStart(2,"0"),":").concat(String(t.minutes).padStart(2,"0"))}e.d(r,{$T:()=>c,HN:()=>i,P$:()=>n,S1:()=>a,Zn:()=>o,fU:()=>u,kd:()=>l,mr:()=>f,pn:()=>s})}},e={};function n(t){var a=e[t];if(void 0!==a)return a.exports;var o=e[t]={id:t,loaded:!1,exports:{}};return r[t](o,o.exports,n),o.loaded=!0,o.exports}n.m=r,t=[],n.O=(r,e,a,o)=>{if(!e){var c=1/0;for(f=0;f<t.length;f++){for(var[e,a,o]=t[f],i=!0,u=0;u<e.length;u++)(!1&o||c>=o)&&Object.keys(n.O).every((t=>n.O[t](e[u])))?e.splice(u--,1):(i=!1,o<c&&(c=o));if(i){t.splice(f--,1);var l=a();void 0!==l&&(r=l)}}return r}o=o||0;for(var f=t.length;f>0&&t[f-1][2]>o;f--)t[f]=t[f-1];t[f]=[e,a,o]},n.d=(t,r)=>{for(var e in r)n.o(r,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},n.u=t=>({132:"1b8b8854ae98108b421e",148:"2810270669b4c687f07e",152:"d3d70f08aba9045c7810",332:"d2e5e6feb1651ba6c722",648:"f523bd06cb542838f829",892:"31c74de07a7678303fe2"}[t]+".min.js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="./",(()=>{n.b=document.baseURI||self.location.href;var t={687:0,827:0};n.O.j=r=>0===t[r];var r=(r,e)=>{var a,o,[c,i,u]=e,l=0;if(c.some((r=>0!==t[r]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(u)var f=u(n)}for(r&&r(e);l<c.length;l++)o=c[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(f)},e=self.webpackChunkbus=self.webpackChunkbus||[];e.forEach(r.bind(null,0)),e.push=r.bind(null,e.push.bind(e))})();var a=n.O(void 0,[803,790,592,765,491,354,350,935,799,802,446,84,777,462,762,853,874,977,680,150,335,827,724,794,238,69,236,960,927],(()=>n(4381)));return a=(a=n.O(a)).default})()));
//# sourceMappingURL=368ba10a9b4f1bd36249.min.js.map