"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(e,t,a){a.d(t,{S5:()=>te,SR:()=>he,U7:()=>be});var n=a(467),i=a(5767),d=a(9566),r=a(3422),s=a(5314),o=a(7123),l=a(3459),u=a(8179),c=a(7968),p=a(8024),v=a(5579),m=a(4537),f=a(904),h=a(3030),b=a(9119),g=a(3041),A=a(752),y=a(5286);function C(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return L(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("E0")}var d,r=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,d=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw d}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var I=(0,u.bv)(".jm"),E=(0,u.aI)(I,".tm"),x=(0,u.aI)(E,".wm"),w=(0,u.aI)(x,"span"),T=(0,u.aI)(E,".vm"),k=(0,u.aI)(E,".bn .cn"),_=(0,u.aI)(E,".xm"),j=(0,u.aI)(_,".ym"),S=(0,u.aI)(E,"._m"),R=(0,u.aI)(S,".an"),Z=(0,u.aI)(I,".en"),$={},P=!1,D=!1,N=0,B=0,M=0,z={},Y=0,F=!1,q=15e3,Q=5e3,H=15e3,O=!0,U=0,J=0,G="",K=!1,W=!1,X=!1,V=0,ee=[];function te(){Z.addEventListener("touchstart",function(){N=Math.round(Z.scrollLeft/Y)},{passive:!0}),Z.addEventListener("scroll",function(e){F=!0;var t=e.target.scrollLeft/Y;B=t>N?N+1:N-1;var a=t-N,n=Math.abs(a);n>1&&(a>0?(N=Math.floor(t),B=N+1):(N=Math.ceil(t),B=N-1),n=Math.abs(t-N));var i=z[`g_${N}`]||{width:0,offset:0},d=z[`g_${B}`]||{width:0,offset:0},r=i.width+(d.width-i.width)*n,s=-1*(i.offset+(d.offset-i.offset)*n)+.5*Y-.5*r;ae(M,s,r-20,t)},{passive:!0}),Z.addEventListener("scrollend",function(e){var t=e.target.scrollLeft/Y;N=Math.round(t),F=!1},{passive:!0})}function ae(e,t,a,n){Z.style.setProperty("--im",e.toString()),R.style.setProperty("--nm",a.toString()),j.style.setProperty("--om",`${t.toString()}px`),j.style.setProperty("--qm",n.toString())}function ne(e){var t=e;if(K){var a=t.detail.progress-1;k.style.setProperty("--rm",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,ne)}function ie(){var e=document.createElement("div");e.classList.add("nn"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var t=document.createElement("div");t.classList.add("on");var a=document.createElement("div");a.classList.add("yn"),a.setAttribute("displayed","false"),t.appendChild(a);var n=document.createElement("div");n.classList.add("pn");var i=document.createElement("div");i.classList.add("tf"),i.setAttribute("code","0"),i.setAttribute("displayed","false"),n.appendChild(i);var d=document.createElement("div");return d.classList.add("uf"),d.setAttribute("code","0"),d.setAttribute("displayed","true"),n.appendChild(d),e.appendChild(t),e.appendChild(n),e}function de(e){var t=document.createElement("div");t.classList.add("jn"),t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var a=document.createElement("div");a.classList.add("kn");var n=document.createElement("div");n.classList.add("ln"),a.appendChild(n);var i=document.createElement("div");i.classList.add("mn");var d=document.createElement("div");d.classList.add("zn");var r=document.createElement("div");r.classList.add("tf"),r.setAttribute("code","0"),r.setAttribute("displayed","false"),d.appendChild(r);var s=document.createElement("div");s.classList.add("uf"),s.setAttribute("code","0"),s.setAttribute("displayed","true"),d.appendChild(s),i.appendChild(d);var o=document.createElement("div");o.classList.add("_n"),o.appendChild((0,m.YC)("keyboard_arrow_down")),o.onclick=function(){!function(e,t){var a=(0,u.aI)(e,".bo"),n=e.parentElement,i=t.parentElement,d=(0,u.ji)(t,"nn"),r=(0,u.ji)(e,"jn"),s=r.length,o=n.getBoundingClientRect(),l=e.getBoundingClientRect(),c=i.getBoundingClientRect(),p=t.getBoundingClientRect(),v=p.top-c.top,m=l.top-o.top,f="true"===e.getAttribute("stretched"),h="true"===e.getAttribute("animation");if(h){var b=f?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--op",`${v}px`),e.setAttribute("stretching","true"),e.style.setProperty("--qp",`${m}px`);for(var g=0;g<s;g++){var A=r[g],y=d[g];y.style.setProperty("--rp",(-1*g-1).toString()),y.setAttribute("push-direction",b),y.setAttribute("push-state","1"),A.setAttribute("push-direction",b),A.setAttribute("push-state","1")}e.addEventListener("transitionend",function(){for(var a=0;a<s;a++){var n=r[a],i=d[a];i.setAttribute("push-direction","0"),i.setAttribute("push-state","0"),n.setAttribute("push-direction","0"),n.setAttribute("push-state","0")}t.setAttribute("stretching","false"),e.setAttribute("stretching","false")},{once:!0}),e.addEventListener("transitionstart",function(){for(var e=0;e<s;e++){var t=r[e];d[e].setAttribute("push-state","2"),t.setAttribute("push-state","2")}},{once:!0})}f?(h?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),e.setAttribute("stretched","false"),t.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),e.setAttribute("stretched","true"),t.setAttribute("stretched","true"))}(t,e)},i.appendChild(o);var l=document.createElement("div");l.classList.add("ao"),i.appendChild(l),a.appendChild(i);var c=document.createElement("div");c.classList.add("bo"),c.setAttribute("displayed","false");var p=document.createElement("div");p.classList.add("co");var v=document.createElement("div");v.classList.add("do"),v.setAttribute("highlighted","true"),v.setAttribute("type","tab"),v.setAttribute("code","0"),v.onclick=function(){Ae(t,0)};var f=document.createElement("div");f.classList.add("eo"),f.appendChild((0,m.YC)("directions_bus")),v.appendChild(f),v.appendChild(document.createTextNode("公車")),p.appendChild(v);var h=document.createElement("div");h.classList.add("do"),h.setAttribute("highlighted","false"),h.setAttribute("type","tab"),h.setAttribute("code","1"),h.onclick=function(){Ae(t,1)};var b=document.createElement("div");b.classList.add("eo"),b.appendChild((0,m.YC)("departure_board")),h.appendChild(b),h.appendChild(document.createTextNode("抵達時間")),p.appendChild(h);var g=document.createElement("div");g.classList.add("do"),g.setAttribute("highlighted","false"),g.setAttribute("type","tab"),g.setAttribute("code","2"),g.onclick=function(){Ae(t,2)};var A=document.createElement("div");A.classList.add("eo"),A.appendChild((0,m.YC)("route")),g.appendChild(A),g.appendChild(document.createTextNode("路線")),p.appendChild(g);var y=document.createElement("div");y.classList.add("do"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){Ae(t,3)};var C=document.createElement("div");C.classList.add("eo"),C.appendChild((0,m.YC)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),p.appendChild(y);var L=document.createElement("div");L.classList.add("do"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var I=document.createElement("div");I.classList.add("eo"),I.appendChild((0,m.YC)("folder")),L.appendChild(I),L.appendChild(document.createTextNode("儲存")),p.appendChild(L);var E=document.createElement("div");E.classList.add("do"),E.setAttribute("highlighted","false"),E.setAttribute("type","schedule-notification"),E.setAttribute("enabled","true");var x=document.createElement("div");x.classList.add("eo"),x.appendChild((0,m.YC)("notifications")),E.appendChild(x),E.appendChild(document.createTextNode("通知")),p.appendChild(E),c.appendChild(p);var w=document.createElement("div");w.classList.add("fo"),w.setAttribute("displayed","true"),c.appendChild(w);var T=document.createElement("div");T.classList.add("go"),T.setAttribute("displayed","false"),c.appendChild(T);var k=document.createElement("div");k.classList.add("ho"),k.setAttribute("displayed","false"),c.appendChild(k);var _=document.createElement("div");return _.classList.add("io"),_.setAttribute("displayed","false"),c.appendChild(_),t.appendChild(a),t.appendChild(c),t}function re(){var e=document.createElement("div");e.classList.add("fn");var t=document.createElement("div");t.classList.add("gn");var a=document.createElement("div");a.classList.add("hn");var n=document.createElement("div");n.classList.add("jo");var i=document.createElement("div");i.classList.add("in");var d=document.createElement("div");return d.classList.add("ko"),i.appendChild(d),a.appendChild(n),t.appendChild(a),t.appendChild(i),e.appendChild(t),e}function se(){var e=document.createElement("div");e.classList.add("zm");var t=document.createElement("span");return e.appendChild(t),e}function oe(){var e=document.createElement("div");e.classList.add("lo"),e.setAttribute("on-this-route","false");var t=document.createElement("div");t.classList.add("mo");var a=document.createElement("div");a.classList.add("no"),a.appendChild((0,m.YC)("directions_bus"));var n=document.createElement("div");n.classList.add("oo");var i=document.createElement("div");i.classList.add("po");var d=document.createElement("div");d.classList.add("qo");var r=document.createElement("div");r.classList.add("ro");var s=document.createElement("div");return s.classList.add("so"),t.appendChild(a),t.appendChild(n),e.appendChild(t),i.appendChild(d),i.appendChild(r),i.appendChild(s),e.appendChild(i),e}function le(){var e=document.createElement("div");e.classList.add("to");var t=document.createElement("div");t.classList.add("uo");var a=document.createElement("div");a.classList.add("vo"),a.appendChild((0,m.YC)("route"));var n=document.createElement("div");n.classList.add("wo");var i=document.createElement("div");i.classList.add("xo");var d=document.createElement("div");d.classList.add("yo");var r=document.createElement("div");r.classList.add("zo"),r.setAttribute("type","view-route"),r.innerText="查看路線";var s=document.createElement("div");return s.classList.add("zo"),s.setAttribute("type","save-to-folder"),s.setAttribute("highlighted","false"),s.innerText="儲存路線",t.appendChild(a),t.appendChild(n),e.appendChild(t),e.appendChild(i),d.appendChild(r),d.appendChild(s),e.appendChild(d),e}function ue(){var e=document.createElement("div");e.classList.add("_o");var t=document.createElement("div");t.classList.add("ap");var a=document.createElement("div");a.classList.add("bp"),a.appendChild((0,m.YC)("calendar_view_day"));var n=document.createElement("div");n.classList.add("cp");var i=document.createElement("div");i.classList.add("dp");var d=document.createElement("div");return d.classList.add("ep"),t.appendChild(a),t.appendChild(n),t.appendChild(i),e.appendChild(t),e.appendChild(d),e}function ce(){var e=document.createElement("div");e.classList.add("fp");var t=document.createElement("div");t.classList.add("gp");var a=document.createElement("div");a.classList.add("hp"),a.appendChild((0,m.YC)("location_on"));var n=document.createElement("div");n.classList.add("ip");var i=document.createElement("div");i.classList.add("jp");var d=document.createElement("div");d.classList.add("kp");var r=document.createElement("div");r.classList.add("lp"),r.setAttribute("type","view-location"),r.innerText="查看地點";var s=document.createElement("div");return s.classList.add("lp"),s.setAttribute("type","save-to-folder"),s.setAttribute("highlighted","false"),s.innerText="儲存地點",t.appendChild(a),t.appendChild(n),e.appendChild(t),e.appendChild(i),d.appendChild(r),d.appendChild(s),e.appendChild(d),e}function pe(e,t,a){var n,i;function s(t,a,n,i,s,o){function l(e,t,a,n,i){var d=(0,u.aI)(t,".pn"),r=(0,u.aI)(d,".uf"),s=(0,u.aI)(d,".tf"),o=(0,u.aI)(e,".zn"),l=(0,u.aI)(o,".uf"),c=(0,u.aI)(o,".tf");if(s.setAttribute("code",a.status.code.toString()),c.setAttribute("code",a.status.code.toString()),c.innerText=a.status.text,!n&&i)return r.addEventListener("animationend",function(){r.setAttribute("code",a.status.code.toString()),r.classList.remove("wf"),s.setAttribute("displayed","false")},{once:!0}),l.addEventListener("animationend",function(){l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text,l.classList.remove("wf"),c.setAttribute("displayed","false")},{once:!0}),c.setAttribute("displayed","true"),s.setAttribute("displayed","true"),r.classList.add("wf"),void l.classList.add("wf");r.setAttribute("code",a.status.code.toString()),l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text}function c(e,t,a){e.setAttribute("segment-buffer",(0,p.xZ)(a.segmentBuffer.isSegmentBuffer)),t.setAttribute("segment-buffer",(0,p.xZ)(a.segmentBuffer.isSegmentBuffer))}function m(e,t){(0,u.aI)(e,".ln").innerText=t.name}function f(e,t){var a=(0,u.aI)(e,".fo"),n=(0,u.jg)(a,".lo"),i=n.length,d=t.buses.length,r=i-d;if(r<0){for(var s=new DocumentFragment,o=0;o>r;o--){var l=oe();s.appendChild(l)}a.append(s)}else for(var c=i-1,v=i-r-1;c>v;c--)n[c].remove();for(var m=(0,u.jg)(a,".lo"),f=0;f<d;f++){var h=t.buses[f],b=m[f],g=(0,u.aI)(b,".mo"),A=(0,u.aI)(g,".oo"),y=(0,u.aI)(b,".po"),C=(0,u.aI)(y,".qo"),L=(0,u.aI)(y,".ro"),I=(0,u.aI)(y,".so");b.setAttribute("on-this-route",(0,p.xZ)(h.onThisRoute)),A.innerText=h.carNumber,C.innerText=`路線：${h.RouteName}`,L.innerText=`狀態：${h.status.text}`,I.innerText=`類型：${h.type}`}a.setAttribute("empty",(0,p.xZ)(0===d))}function b(e,t){var a=(0,u.aI)(e,".go"),n=(0,u.jg)(a,".to"),i=n.length,r=t.overlappingRoutes.length,s=i-r;if(s<0){for(var o=new DocumentFragment,l=0;l>s;l--){var c=le();o.appendChild(c)}a.append(o)}else for(var v=i-1,m=i-s-1;v>m;v--)n[v].remove();for(var f=(0,u.jg)(a,".to"),h=0;h<r;h++){var b=t.overlappingRoutes[h],A=f[h],y=(0,u.aI)(A,".uo"),C=(0,u.aI)(y,".wo"),L=(0,u.aI)(A,".xo"),I=(0,u.aI)(A,".yo"),E=(0,u.aI)(I,'.zo[type="view-route"]'),x=(0,u.aI)(I,'.zo[type="save-to-folder"]');C.innerText=b.name,L.innerText=b.RouteEndPoints.text,function(e,t,a){e.onclick=function(){ge(t,a)}}(E,b.RouteID,b.PathAttributeId),function(e,t){e.onclick=function(){(0,g.B)("route",[t],e)},(0,d.LH)("route",t).then(function(t){e.setAttribute("highlighted",(0,p.xZ)(t))})}(x,b.RouteID)}a.setAttribute("empty",(0,p.xZ)(0===r))}function y(e,t){var a=(0,u.aI)(e,".ho"),n=(0,u.jg)(a,"._o"),i=n.length,d=t.busArrivalTimes.length,r=i-d;if(r<0){for(var s=new DocumentFragment,o=0;o>r;o--){var l=ue();s.appendChild(l)}a.append(s)}else for(var c=i-1,m=i-r-1;c>m;c--)n[c].remove();for(var f=(0,u.jg)(a,"._o"),h=0;h<d;h++){var b=t.busArrivalTimes[h],g=f[h],A=(0,u.aI)(g,".ap"),y=(0,u.aI)(A,".cp"),C=(0,u.aI)(A,".dp"),L=(0,u.aI)(g,".ep");y.innerText=b.personalSchedule.name,C.innerText=`週${(0,v.kd)(b.day).name} ${(0,v.pn)(b.personalSchedule.period.start)} - ${(0,v.pn)(b.personalSchedule.period.end)}`,L.innerHTML=b.chart}a.setAttribute("empty",(0,p.xZ)(0===d))}function C(e,t){var a=(0,u.aI)(e,".io"),n=(0,u.jg)(a,".fp"),i=n.length,r=t.nearbyLocations.length,s=i-r;if(s<0){for(var o=new DocumentFragment,l=0;l>s;l--){var c=ce();o.appendChild(c)}a.append(o)}else for(var v=i-1,m=i-s-1;v>m;v--)n[v].remove();for(var f=(0,u.jg)(a,".fp"),b=0;b<r;b++){var A=t.nearbyLocations[b],y=f[b],C=(0,u.aI)(y,".gp"),L=(0,u.aI)(C,".ip"),I=(0,u.aI)(y,".jp"),E=(0,u.aI)(y,".kp"),x=(0,u.aI)(E,'.lp[type="view-location"]'),w=(0,u.aI)(E,'.lp[type="save-to-folder"]');L.innerText=A.name,I.innerText=`${A.distance}公尺`,function(e,t){e.onclick=function(){(0,h.so)(t)}}(x,A.hash),function(e,t){e.onclick=function(){(0,g.B)("location",[t],e)},(0,d.LH)("location",t).then(function(t){e.setAttribute("highlighted",(0,p.xZ)(t))})}(w,A.hash)}a.setAttribute("empty",(0,p.xZ)(0===r))}function L(e,t,a){e.setAttribute("nearest",(0,p.xZ)(a.nearest)),t.setAttribute("nearest",(0,p.xZ)(a.nearest))}function I(e,t,a,n,i){var d=(null==a?void 0:a.progress)||0,r=(null==t?void 0:t.progress)||0,s=(0,u.aI)(e,".on .yn");if(!n&&i&&0!==d&&0===r&&Math.abs(r-d)>0)return s.style.setProperty("--mp","100%"),void s.addEventListener("transitionend",function(){s.setAttribute("displayed","false"),s.style.setProperty("--mp","-100%")},{once:!0});r>0?(s.setAttribute("displayed","true"),s.style.setProperty("--mp",100*(r-1)+"%")):s.setAttribute("displayed","false")}function E(e,t,a){a&&((0,u.aI)(e,".bo").setAttribute("displayed","false"),e.setAttribute("stretched","false"),t.setAttribute("stretched","false"))}function x(e,t,a){e.setAttribute("animation",(0,p.xZ)(a)),t.setAttribute("animation",(0,p.xZ)(a))}function w(e,t,a){e.setAttribute("skeleton-screen",(0,p.xZ)(a)),t.setAttribute("skeleton-screen",(0,p.xZ)(a))}function T(t,a){var n=(0,u.aI)(t,'.bo .co .do[type="save-to-folder"]');n.onclick=function(){(0,g.B)("stop",[a.id,e.RouteID],n)},(0,d.LH)("stop",a.id).then(function(e){n.setAttribute("highlighted",(0,p.xZ)(e))})}function k(t,a){var n=(0,u.aI)(t,'.bo .co .do[type="schedule-notification"]');n.onclick=function(){(0,A.Ho)(n,a.id,e.RouteID,a.status.time)};var i=(0,r.Zc)(a.id);n.setAttribute("highlighted",(0,p.xZ)(i))}null===i?(l(t,a,n,s,o),m(t,n),f(t,n),b(t,n),y(t,n),C(t,n),c(t,a,n),L(t,a,n),I(a,n,i,s,o),E(t,a,s),x(t,a,o),w(t,a,s),T(t,n),k(t,n)):(n.status.time!==i.status.time&&(l(t,a,n,s,o),k(t,n)),(0,p.hw)(i.buses,n.buses)||f(t,n),(0,p.hw)(i.busArrivalTimes,n.busArrivalTimes)||y(t,n),i.nearest!==n.nearest&&L(t,a,n),i.progress!==n.progress&&I(a,n,i,s,o),i.id!==n.id&&(m(t,n),c(t,a,n),b(t,n),C(t,n),T(t,n),k(t,n)),P!==o&&x(t,a,o),D!==s&&(E(t,a,s),w(t,a,s)))}var o=(0,f.gO)("window"),l=o.width,m=o.height,b=e.groupQuantity,C=e.itemQuantity,L=e.groupedItems,I=e.groupNames;M=b,Y=l;for(var E=0,k=0;k<b;k++){var R=`g_${k}`,B=(0,c.q_)(I[k],500,"17px",'"Noto Sans TC", sans-serif')+20;z[R]={width:B,offset:E},E+=B}if(z[`g_${b}`]={width:0,offset:E},!F){var q=z[`g_${N}`],Q=-1*q.offset+.5*Y-.5*q.width,H=q.width-20;ae(M,Q,H,N)}D!==t&&(x.setAttribute("skeleton-screen",(0,p.xZ)(t)),_.setAttribute("skeleton-screen",(0,p.xZ)(t)),S.setAttribute("skeleton-screen",(0,p.xZ)(t))),P!==a&&(x.setAttribute("animation",(0,p.xZ)(a)),_.setAttribute("animation",(0,p.xZ)(a)),S.setAttribute("animation",(0,p.xZ)(a))),(null===(n=$)||void 0===n?void 0:n.RouteID)!==e.RouteID&&(T.onclick=function(){(0,y.GS)(e.RouteID,e.PathAttributeId)}),(null===(i=$)||void 0===i?void 0:i.RouteName)!==e.RouteName&&(w.innerText=e.RouteName);var O=(0,u.jg)(Z,".fn"),U=O.length;if(b!==U){var J=U-b;if(J<0){for(var G=new DocumentFragment,K=new DocumentFragment,W=0;W>J;W--){var X=re();G.appendChild(X);var V=se();K.appendChild(V)}Z.append(G),j.append(K)}else for(var ee=(0,u.jg)(j,".zm"),te=U-1,ne=U-J-1;te>ne;te--)O[te].remove(),ee[te].remove()}for(var pe=(0,u.jg)(Z,".fn"),ve=0;ve<b;ve++){var me=`g_${ve}`,fe=pe[ve],he=(0,u.aI)(fe,".in"),be=(0,u.aI)(fe,".hn"),Ae=(0,u.jg)(he,".jn"),ye=Ae.length;if(C[me]!==ye){var Ce=ye-C[me];if(Ce<0){for(var Le=new DocumentFragment,Ie=new DocumentFragment,Ee=0;Ee>Ce;Ee--){var xe=ie(),we=de(xe);Le.appendChild(we),Ie.appendChild(xe)}he.append(Le),be.append(Ie)}else for(var Te=(0,u.jg)(be,".nn"),ke=ye-1,_e=ye-Ce-1;ke>_e;ke--)Ae[ke].remove(),Te[ke].remove()}}var je=(0,u.jg)(j,".zm");j.style.setProperty("--pm",`${E}px`);for(var Se=0;Se<b;Se++){var Re=`g_${Se}`,Ze=je[Se];(0,u.aI)(Ze,"span").innerText=I[Se],Ze.style.setProperty("--km",`${z[Re].offset}px`),Ze.style.setProperty("--lm",`${z[Re].width}px`),Ze.style.setProperty("--mm",Se.toString());var $e=pe[Se];t&&($e.scrollTop=0);for(var Pe=(0,u.aI)($e,".in"),De=(0,u.aI)($e,".hn"),Ne=(0,u.jg)(Pe,".jn"),Be=(0,u.jg)(De,".nn"),Me=0;Me<C[Re];Me++){var ze=Ne[Me],Ye=Be[Me],Fe=L[Re][Me];if((0,p.mQ)($,"groupedItems"))if((0,p.mQ)($.groupedItems,Re))if($.groupedItems[Re][Me])s(ze,Ye,Fe,$.groupedItems[Re][Me],t,a);else s(ze,Ye,Fe,null,t,a);else s(ze,Ye,Fe,null,t,a);else s(ze,Ye,Fe,null,t,a)}}$=e,P=a,D=t}function ve(){return me.apply(this,arguments)}function me(){return(me=(0,n.A)(function*(){var e=(0,l.Js)("playing_animation"),t=(0,l.Js)("refresh_interval"),a=(0,f.gO)("route-bus-arrival-time-chart");O=t.dynamic,q=t.baseInterval,K=!0,G=(0,p.zx)(),k.setAttribute("refreshing","true"),k.classList.remove("dn"),document.addEventListener(G,ne);var n=yield(0,o.R)(V,ee,a.width,a.height,G);pe(n,!1,e);var d=0;O&&(d=yield(0,i.wz)()),U=(new Date).getTime(),J=O?Math.max(U+Q,n.dataUpdateTime+q/d):U+q,H=Math.max(Q,J-U),K=!1,k.setAttribute("refreshing","false"),k.style.setProperty("--sm",`${H}ms`),k.classList.add("dn")})).apply(this,arguments)}function fe(){ve().then(function(){W?setTimeout(function(){fe()},Math.max(Q,J-(new Date).getTime())):X=!1}).catch(function(e){W?((0,b.a)("error","路線網路連線中斷，將在10秒後重試。"),setTimeout(function(){fe()},1e4)):X=!1})}function he(e,t){(0,f.WR)("Route"),(0,s.XK)("route",e),V=e,ee=t,N=0,z={},I.setAttribute("displayed","true"),Z.scrollLeft=0,Z.focus(),function(e,t){for(var a=(0,l.Js)("playing_animation"),n=(0,f.gO)("window"),i=(n.width,n.height),d=Math.floor(i/50)+5,r={},s=0;s<2;s++){var o=`g_${s}`;r[o]=[];for(var u=0;u<d;u++)r[o].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:u,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}pe({groupNames:["往載入中","往載入中"],groupedItems:r,groupQuantity:2,itemQuantity:{g_0:d,g_1:d},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:e,PathAttributeId:t,dataUpdateTime:0},!0,a)}(e,t),W||(W=!0,X?ve():(X=!0,fe())),(0,f.Z_)()}function be(){I.setAttribute("displayed","false"),W=!1,(0,f.l$)()}function ge(e,t){W=!1,he(e,t)}function Ae(e,t){var a,n=(0,u.aI)(e,".co"),i=C((0,u.jg)(n,'.do[highlighted="true"][type="tab"]'));try{for(i.s();!(a=i.n()).done;){a.value.setAttribute("highlighted","false")}}catch(e){i.e(e)}finally{i.f()}switch((0,u.aI)(n,`.do[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,u.aI)(e,".fo").setAttribute("displayed","true"),(0,u.aI)(e,".ho").setAttribute("displayed","false"),(0,u.aI)(e,".go").setAttribute("displayed","false"),(0,u.aI)(e,".io").setAttribute("displayed","false");break;case 1:(0,u.aI)(e,".fo").setAttribute("displayed","false"),(0,u.aI)(e,".ho").setAttribute("displayed","true"),(0,u.aI)(e,".go").setAttribute("displayed","false"),(0,u.aI)(e,".io").setAttribute("displayed","false");break;case 2:(0,u.aI)(e,".fo").setAttribute("displayed","false"),(0,u.aI)(e,".ho").setAttribute("displayed","false"),(0,u.aI)(e,".go").setAttribute("displayed","true"),(0,u.aI)(e,".io").setAttribute("displayed","false");break;case 3:(0,u.aI)(e,".fo").setAttribute("displayed","false"),(0,u.aI)(e,".ho").setAttribute("displayed","false"),(0,u.aI)(e,".go").setAttribute("displayed","false"),(0,u.aI)(e,".io").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=42c66b38f5cec2e60ed7.js.map