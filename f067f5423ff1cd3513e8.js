"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[838],{752(e,t,n){n.d(t,{Ho:()=>p,b$:()=>h});var r=n(3422),a=n(8179),i=n(4537),o=n(904),u=n(9119);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,a.bv)(".nd"),s=(0,a.aI)(d,".od"),f=(0,a.aI)(s,".pd");function v(e,t,n,a,o){var c=document.createElement("div");c.classList.add("qd");var l=document.createElement("div");l.classList.add("rd");var d=document.createElement("span");d.appendChild((0,i.YC)(e.icon)),l.appendChild(d);var s=document.createElement("div");s.classList.add("sd"),s.appendChild(document.createTextNode(e.name));var f=e.index;return c.onclick=function(){!function(e,t,n,a,i){(0,u.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),h(),(0,r.mD)(t,n,a,i).then(function(t){switch(t){case 0:(0,u.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,u.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,u.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,n,a,o,f)},c.appendChild(l),c.appendChild(s),{element:c,id:""}}function p(e,t,n,a){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(e,t,n,a){f.innerHTML="";var i,o=new DocumentFragment,u=c(r.FX);try{for(u.s();!(i=u.n()).done;){var l=v(i.value,e,t,n,a);o.appendChild(l.element)}}catch(e){u.e(e)}finally{u.f()}f.append(o)}(e,t,n,a)}function h(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},1078(){},1102(){},1306(){},1308(){},1511(){},1603(){},1743(){},2421(){},2696(){},3041(e,t,n){n.d(t,{B:()=>b,n:()=>A});var r=n(467),a=n(9566),i=n(8179),o=n(8024),u=n(4537),c=n(904),l=n(9119);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=(0,i.bv)(".td"),v=(0,i.aI)(f,".ud"),p=(0,i.aI)(v,".vd"),h="已儲存至資料夾",m="無法儲存";function y(e,t,n){var r=document.createElement("div");r.classList.add("wd");var c=document.createElement("div");c.classList.add("xd");var d=document.createElement("span");d.appendChild((0,u.YC)(e.icon)),c.appendChild(d);var s=document.createElement("div");switch(s.classList.add("yd"),s.appendChild(document.createTextNode(e.name)),t){case"stop-on-route":r.onclick=function(){!function(e,t,n,r){var u=(0,i.bv)(`.ba .ca .da .ea .fa .ha#${e}`),c=(0,i.aI)(u,'.lb .mb .nb[type="save-to-folder"]');(0,a.aq)(t,n,r).then(function(e){e?(0,a.LH)("stop",n).then(function(e){e&&(c.setAttribute("highlighted",(0,o.xZ)(e)),(0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})}(n[0],e.id,n[1],n[2])};break;case"stop-on-location":r.onclick=function(){!function(e,t,n,r){var u=(0,i.bv)(`.zd ._d .ae .be .ce#${e}`),c=(0,i.aI)(u,'.de .ee .fe[type="save-to-folder"]');(0,a.aq)(t,n,r).then(function(e){e?(0,a.LH)("stop",n).then(function(e){e&&(c.setAttribute("highlighted",(0,o.xZ)(e)),(0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})}(n[0],e.id,n[1],n[2])};break;case"route":r.onclick=function(){var t,r,o;t=e.id,r=n[0],o=(0,i.bv)('.ge .he .ie .je[group="actions"] .ke .le[action="save-to-folder"]'),(0,a.Fq)(t,r).then(function(e){e?(0,a.LH)("route",r).then(function(e){e&&(o.setAttribute("highlighted","true"),(0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})};break;case"route-on-route":r.onclick=function(){var t,r;t=e.id,r=n[0],(0,a.Fq)(t,r).then(function(e){e?(0,a.LH)("route",r).then(function(e){e&&((0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})};break;case"location":case"location-on-route":r.onclick=function(){var t,r;t=e.id,r=n[0],(0,a.DW)(t,r).then(function(e){e?(0,a.LH)("location",r).then(function(e){e&&((0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})}}return r.appendChild(c),r.appendChild(s),{element:r,id:""}}function g(){return(g=(0,r.A)(function*(e,t){var n=yield(0,a.Xi)();p.innerHTML="";var r,i=new DocumentFragment,o=d(n);try{for(o.s();!(r=o.n()).done;){var u=y(r.value,e,t);i.appendChild(u.element)}}catch(e){o.e(e)}finally{o.f()}p.append(i)})).apply(this,arguments)}function b(e,t){(0,c.WR)("SaveToFolder"),f.setAttribute("displayed","true"),function(e,t){g.apply(this,arguments)}(e,t)}function A(){(0,c.kr)("SaveToFolder"),f.setAttribute("displayed","false")}},3058(){},3127(){},3534(){},3749(){},3777(){},4305(){},5228(){},5286(e,t,n){n.d(t,{kP:()=>J,zk:()=>Y,VY:()=>V,b7:()=>P,GZ:()=>te,GS:()=>ee});var r=n(467),a=n(9566),i=n(8621),o=n(3459),u=n(8179),c=n(8024),l=n(904),d=n(3041),s=n(8134),f=n(9469),v=n(9119),p=n(8279);function h(){return(h=(0,r.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var n=(0,f.i)(0,{id:e,name:t.n});navigator.share&&navigator.share({title:t.n,url:n}).then(function(){(0,v.a)("check_circle","已分享路線")}).catch(function(e){(0,v.a)("cancel","已取消分享")})}})).apply(this,arguments)}function m(){return(m=(0,r.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var n=(0,f.i)(0,{id:e,name:t.n});(0,p.X8)(n)}})).apply(this,arguments)}var y=n(7968),g=n(6141);function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w='"Noto Sans TC", sans-serif',k=(0,l.gO)("route-details-canvas"),x=k.width,C=k.height,S=Math.min(window.devicePixelRatio,1.875)||1,I={};function E(){var e=document.createElement("div");return e.classList.add("me"),{element:e,id:""}}function D(){var e=document.createElement("div");e.classList.add("ne");var t=document.createElement("canvas");return t.classList.add("oe"),e.appendChild(t),{element:e,id:""}}function j(e,t,n,r,a,i){e.innerText=t.name,e.setAttribute("day",i.toString()),e.onclick=function(){!function(e){for(var t=(0,o.Js)("playing_animation"),n=(0,u.jg)(J,".me"),r=(0,u.jg)(Y,".ne"),a=0;a<7;a++){var i,c,l=n[a],d=r[a],s=`d_${a}`,f=null===(i=I)||void 0===i?void 0:i.calendarEventGroups[s],v=null===(c=I)||void 0===c?void 0:c.calendarDays[s];if(f&&v){var p=(0,g.t)("--c"),h=(0,g.t)("--d"),m=(0,g.t)("--e"),y=(0,g.t)("--nc"),b=(0,g.t)("--b"),A=(0,g.t)("--ra");j(l,v,e,!1,t,a),L(d,f,e,b,p,h,m,y,A,a)}}}(i)},e.setAttribute("highlighted",n===i?"true":"false"),e.setAttribute("animation",(0,c.xZ)(a)),e.setAttribute("skeleton-screen",(0,c.xZ)(r))}function L(e,t,n,r,a,i,o,d,s,f){function v(e,t,n){var r=70*t;e.fillStyle=n,e.fillRect(45,r+5,x-45,1.2),e.font=`400 12px ${w}`,e.textBaseline="top";var a=`${String(t).padStart(2,"0")}:00`,i=e.measureText(a),o=i.width,u=i.actualBoundingBoxDescent;e.fillText(a,(45-o)/2,r+(10-u)/2,o)}function p(e,t,n,r,a,i,o){var u=new Date;u.setDate(1),u.setMonth(0),u.setFullYear(t.date.getFullYear()),u.setMonth(t.date.getMonth()),u.setDate(t.date.getDate()),u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);var c=(t.date.getTime()-u.getTime())/864e5*24*70,l=x-45,d=60*t.duration*1e3/864e5*24*70;(0,y.wg)(e,45,c,l,d,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,y.wg)(e,45,c,3,d,{tl:3,tr:0,bl:3,br:0},n),e.font=`400 14px ${w}`,e.textBaseline="top",e.fillStyle=n;var s=t.dateString,f=e.measureText(s),v=f.width,p=f.actualBoundingBoxDescent;e.fillText(s,53,c+(d-p)/2,v)}var h=(0,u.aI)(e,".oe"),m=h.getContext("2d");if(function(e,t,n){var r=t===n;e.setAttribute("displayed",(0,c.xZ)(r))}(e,n,f),function(e){k=(0,l.gO)("route-details-canvas"),x=k.width,C=k.height,S=Math.min(window.devicePixelRatio,1.875)||1,e.width=x*S,e.height=C*S;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(S,S)}(h),n===f){m.clearRect(0,0,x,C);for(var g=0;g<24;g++)v(m,g,s);var A,I=b(t);try{for(I.s();!(A=I.n()).done;){p(m,A.value,r,a,i,o,d)}}catch(e){I.e(e)}finally{I.f()}}else m.clearRect(0,0,x,C)}function T(e,t,n){var r=(new Date).getDay(),a=(0,g.t)("--c"),i=(0,g.t)("--d"),o=(0,g.t)("--e"),c=(0,g.t)("--nc"),l=(0,g.t)("--b"),d=(0,g.t)("--ra"),s=e.calendarDays,f=e.calendarDayQuantity,v=e.calendarEventGroups,p=(e.calendarEventQuantity,(0,u.jg)(Y,".ne").length);if(f!==p){var h=p-f;if(h<0){for(var m=new DocumentFragment,y=new DocumentFragment,b=0,A=Math.abs(h);b<A;b++){var w=E();m.appendChild(w.element);var k=D();y.appendChild(k.element)}J.append(m),Y.append(y)}else for(var x=(0,u.jg)(J,".me"),C=(0,u.jg)(Y,".ne"),S=0,T=Math.abs(h);S<T;S++){var _=p-1-S;x[_].remove(),C[_].remove()}}for(var M=(0,u.jg)(J,".me"),$=(0,u.jg)(Y,".ne"),R=0;R<f;R++){var Z=`d_${R}`,F=s[Z],H=v[Z],q=M[R],B=$[R];j(q,F,r,t,n,R),L(B,H,r,l,a,i,o,c,d,R)}I=e}var _=n(4537),M=[],$=!1,R=!1;function Z(){var e=document.createElement("div");e.classList.add("pe");var t=document.createElement("div");t.classList.add("qe"),t.appendChild((0,_.oC)()),e.appendChild(t);var n=document.createElement("div");return n.classList.add("re"),e.appendChild(n),{element:e,id:""}}function F(e,t,n){function r(e,r,a){function i(e,t){var n=(0,u.aI)(e,".qe");(0,_.yD)(n,t.icon)}function o(e,t){(0,u.aI)(e,".re").innerText=t.value}function l(e,t){e.setAttribute("animation",(0,c.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,c.xZ)(t))}null==a?(i(e,r),o(e,r),l(e,n),d(e,t)):((0,c.hw)(a,r)||i(e,r),(0,c.hw)(a,r)||o(e,r),$!==n&&l(e,n),R!==t&&d(e,t))}var a=e.length;t!==R&&P.setAttribute("skeleton-screen",(0,c.xZ)(t));var i=(0,u.jg)(V,".pe").length;if(a!==i){var o=i-a;if(o<0){for(var l=new DocumentFragment,d=0,s=Math.abs(o);d<s;d++){var f=Z();l.appendChild(f.element)}V.append(l)}else for(var v=(0,u.jg)(V,".pe"),p=0,h=Math.abs(o);p<h;p++){v[i-1-p].remove()}}for(var m=(0,u.jg)(V,".pe"),y=0;y<a;y++){var g=m[y],b=e[y];0===M.length?r(g,b,null):r(g,b,M[y])}M=e,$=n,R=t}function H(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=(0,u.bv)(".ge"),G=(0,u.aI)(B,".he"),N=(0,u.aI)(G,".ie"),O=(0,u.aI)(N,'.je[group="calendar"]'),W=(0,u.aI)(O,".ke"),J=(0,u.aI)(W,".se"),Y=(0,u.aI)(W,".te"),z=(0,u.aI)(B,'.he .ie .je[group="actions"]'),Q=(0,u.aI)(z,'.ke .le[action="save-to-folder"]'),U=(0,u.aI)(z,'.ke .le[action="get-permalink"]'),X=(0,u.aI)(z,'.ke .le[action="show-permalink-qrcode"]'),P=(0,u.aI)(N,'.je[group="properties"]'),V=(0,u.aI)(P,".ke");function K(){return K=(0,r.A)(function*(e,t){var n=(0,o.Js)("playing_animation"),r=yield(0,a.LH)("route",e);Q.setAttribute("animation",(0,c.xZ)(n)),Q.setAttribute("highlighted",(0,c.xZ)(r)),Q.onclick=function(){(0,d.B)("route",[e])},U.setAttribute("animation",(0,c.xZ)(n)),U.onclick=function(){!function(e){h.apply(this,arguments)}(e)},X.setAttribute("animation",(0,c.xZ)(n)),X.onclick=function(){!function(e){m.apply(this,arguments)}(e)},function(){for(var e=(0,o.Js)("playing_animation"),t=[],n=0;n<5;n++)t.push({key:n,icon:"none",value:""});F(t,!0,e)}(),function(){for(var e=(0,o.Js)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var i=`d_${a}`;n[i]=[],r[i]={day:a,code:"d_{i}",name:""};for(var u=0;u<t[i];u++){var c=new Date;c.setHours(0),c.setMinutes(30*u),c.setSeconds(0),c.setMilliseconds(0),n[i].push({date:c,dateString:"",duration:15})}}T({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var u=(0,c.zx)(),l=yield(0,i.p)(e,t,u);F(l.properties,!1,n),T(l.calendar,!1,n)}),K.apply(this,arguments)}function ee(e,t){(0,l.WR)("RouteDetails"),B.setAttribute("displayed","true"),function(e,t){K.apply(this,arguments)}(e,t)}function te(){(0,l.kr)("RouteDetails"),B.setAttribute("displayed","false");var e,t=H((0,u.jg)(Y,".ne"));try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(e){t.e(e)}finally{t.f()}var n,r=H((0,u.jg)(J,".me"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(e){r.e(e)}finally{r.f()}}},5392(){},5461(){},5995(){},6018(){},6388(){},6597(){},7217(){},7225(){},7287(){},7723(){},7868(){},7908(e,t,n){n.d(t,{NW:()=>y,XG:()=>h,hy:()=>m});var r=n(467),a=n(3937),i=n(3422),o=n(8179),u=n(8024),c=n(904),l=n(9119),d=(0,o.bv)(".ue"),s=(0,o.aI)(d,".ve"),f=(0,o.aI)(s,".we"),v=(0,o.aI)(f,'.xe[group="provider"] .ye input'),p=(0,o.aI)(f,'.xe[group="registration-key"] .ye input');function h(){(0,c.WR)("RegisterNotification"),d.setAttribute("displayed","true"),v.value=(0,i.D7)(),p.value="",(0,c.Z_)()}function m(){d.setAttribute("displayed","false"),(0,c.l$)()}function y(){return g.apply(this,arguments)}function g(){return(g=(0,r.A)(function*(){(0,l.a)("manufacturing","處理中");var e=v.value,t=p.value;if((0,u.Gz)(e))return(0,i.Je)(e),(yield(0,a.e)(t))?void(0,l.a)("check_circle","註冊成功"):void(0,l.a)("error","註冊失敗");(0,l.a)("error","無效的提供者")})).apply(this,arguments)}},8983(){},9991(){}}]);
//# sourceMappingURL=f067f5423ff1cd3513e8.js.map