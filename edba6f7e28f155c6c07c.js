"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[13],{112(){},124(){},245(){},321(){},626(){},969(){},1003(){},1195(){},1351(t,e,i){i.d(e,{a:()=>x,b:()=>w,c:()=>T,d:()=>S,e:()=>k,f:()=>j});var n=i(467),a=i(8011),r=i(6788),u=i(6983),s=i(3459),d=i(8179),c=i(8024),o=i(9469),l=i(251),f=i(4537),p=i(904),h=i(8279),v={},m=!1,g=!1,y=(0,d.c)(".mg"),b=(0,d.e)(y,".rg"),A=(0,d.e)(b,".sg");function C(){var t=(0,d.a)();t.classList.add("tg");var e=(0,d.a)();e.classList.add("ug"),e.appendChild((0,f.a)()),t.appendChild(e);var i=(0,d.a)();return i.classList.add("vg"),t.appendChild(i),t}function L(t,e,i){function n(t,n,a){function r(t,e){var i=(0,d.e)(t,".ug");(0,f.c)(i,e.icon)}function u(t,e){(0,d.e)(t,".vg").innerText=e.name}function s(t,e){t.onclick=e.action}function o(t,e){t.setAttribute("animation",(0,c.a)(e))}function l(t,e){t.setAttribute("skeleton-screen",(0,c.a)(e))}null==a?(r(t,n),u(t,n),s(t,n),o(t,i),l(t,e)):(a.key!==n.key&&(r(t,n),u(t,n),s(t,n)),i!==m&&o(t,i),e!==g&&l(t,e))}var a=t.actions,r=t.actionsQuantity,u=Array.from((0,d.d)(A,".tg")),s=u.length;if(r!==s){var o=s-r;if(o<0){for(var l=new DocumentFragment,p=0;p>o;p--){var h=C();l.appendChild(h),u.push(h)}A.append(l)}else if(o>0)for(var y=s-1,b=s-o-1;y>b;y--)u[y].remove(),u.splice(y,1)}for(var L=0;L<r;L++){var _=u[L],k=a[L];if((0,c.f)(v,"actions"))if(v.actions[L])n(_,k,v.actions[L]);else n(_,k,null);else n(_,k,null)}v=t,m=i,g=e}function _(){return(_=(0,n.a)(function*(t){var e=(0,s.b)("playing_animation"),i=(0,c.c)();!function(){for(var t=(0,s.b)("playing_animation"),e=[],i=0;i<3;i++)e.push({name:"",icon:"",key:`action-${i}`,action:function(){}});L({actions:e,actionsQuantity:3,hash:""},!0,t)}(),L(yield(0,u.a)(t,i),!1,e)})).apply(this,arguments)}function k(){y.setAttribute("displayed","true")}function w(){y.setAttribute("displayed","false")}function T(t){(0,p.c)("LocationDetails"),k(),function(t){_.apply(this,arguments)}(t),(0,p.b)()}function x(){w(),(0,p.i)(),(0,p.e)("LocationDetails")}function S(t){return M.apply(this,arguments)}function M(){return(M=(0,n.a)(function*(t){var e=(0,c.c)(),i=yield(0,a.a)(e,1);(0,r.a)(e),(0,r.b)(e);var n=`ml_${t}`;if((0,c.f)(i,n)){var u=i[n],s=(0,o.a)(1,{hash:t});(0,l.b)(u.n,s)}})).apply(this,arguments)}function j(t){return E.apply(this,arguments)}function E(){return(E=(0,n.a)(function*(t){var e=(0,c.c)(),i=yield(0,a.a)(e,1);(0,r.a)(e),(0,r.b)(e);var n=`ml_${t}`;if((0,c.f)(i,n)){var u=(0,o.a)(1,{hash:t});(0,h.c)(u)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(t,e,i){i.d(e,{a:()=>N,b:()=>F,c:()=>H,d:()=>z});var n=i(467),a=i(5767),r=i(365),u=i(3422),s=i(3459),d=i(8179),c=i(8024),o=i(4537),l=i(904),f=i(9119),p=(0,d.c)(".ei"),h=(0,d.e)(p,".hi"),v=(0,d.e)(h,".li"),m=(0,d.e)(v,".mi"),g=(0,d.e)(p,".oi"),y=(0,d.e)(g,".pi"),b={},A=!1,C=15e3,L=5e3,_=15e3,k=!0,w=0,T=0,x="",S=!1,M=!1,j=!1;function E(t){var e=t;if(S){var i=e.detail.progress-1;m.style.setProperty("--fi",i.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,E)}function I(){var t=(0,d.a)();t.classList.add("qi");var e=(0,d.a)();e.classList.add("ri"),t.appendChild(e);var i=(0,d.a)();i.classList.add("si");var n=(0,d.a)();n.classList.add("ti"),i.appendChild(n);var a=(0,d.a)();a.classList.add("ui"),i.appendChild(a);var r=(0,d.a)();r.classList.add("vi"),i.appendChild(r);var u=(0,d.a)();u.classList.add("wi");var s=document.createElement("span");return s.appendChild((0,o.b)("close")),u.appendChild(s),i.appendChild(u),t.appendChild(i),t}function P(t,e,i){function n(t,n,a){function r(t,e){(0,d.e)(t,".ri").innerText=e.hours}function u(t,e){var i=(0,d.e)(t,".si");(0,d.e)(i,".ti").innerText=e.minutes}function s(t,e){var i=(0,d.e)(t,".si");(0,d.e)(i,".vi").innerText=e.name}function o(t,e){var i=(0,d.e)(t,".si");(0,d.e)(i,".ui").innerText=`${e.route.name} - 往${e.route.direction}`}function l(t,e){var i=(0,d.e)(t,".si");(0,d.e)(i,".wi").onclick=function(){!function(t,e){R.apply(this,arguments)}(t,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,c.a)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,c.a)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,c.a)(e))}null==a?(r(t,n),u(t,n),s(t,n),o(t,n),l(t,n),f(t,n),p(t,i),h(t,e)):(n.hours!==a.hours&&r(t,n),n.minutes!==a.minutes&&u(t,n),(0,c.b)(a.schedule_id,n.schedule_id)||(s(t,n),o(t,n),l(t,n)),a.is_first!==n.is_first&&f(t,n),false!==i&&p(t,i),A!==e&&h(t,e))}var a=t.itemQuantity,r=t.items,u=Array.from((0,d.d)(y,".qi")),s=u.length;if(a!==s){var o=s-a;if(o<0){for(var l=new DocumentFragment,f=0;f>o;f--){var p=I();l.appendChild(p),u.push(p)}y.append(l)}else if(o>0)for(var h=s-1,v=s-o-1;h>v;h--)u[h].remove(),u.splice(h,1)}for(var m=0;m<a;m++){var g=u[m],C=r[m];if((0,c.f)(b,"items"))if(b.items[m])n(g,C,b.items[m]);else n(g,C,null);else n(g,C,null)}b=t,A=e}function $(){return D.apply(this,arguments)}function D(){return(D=(0,n.a)(function*(){var t=(0,s.b)("playing_animation"),e=(0,s.b)("refresh_interval");k=e.dynamic,C=e.baseInterval,S=!0,x=(0,c.c)(),m.setAttribute("refreshing","true"),m.classList.remove("ni"),document.addEventListener(x,E);var i=yield(0,u.h)(x);P(i,!1,t);var n=0;k&&(n=yield(0,a.c)()),w=(new Date).getTime(),T=k?Math.max(w+L,i.dataUpdateTime+C/n):w+C,_=Math.max(L,T-w),S=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--gi",`${_}ms`),m.classList.add("ni")})).apply(this,arguments)}function q(){return Q.apply(this,arguments)}function Q(){return(Q=(0,n.a)(function*(){$().then(function(){M?setTimeout(function(){q()},Math.max(L,T-(new Date).getTime())):j=!1}).catch(function(t){M?setTimeout(function(){q()},1e4):j=!1})})).apply(this,arguments)}function z(){p.setAttribute("displayed","true")}function F(){p.setAttribute("displayed","false")}function H(){(0,l.c)("NotificationScheduleManager"),z(),function(){for(var t=(0,s.b)("playing_animation"),e=(0,l.d)("window"),i=(e.width,e.height),n=Math.floor(i/50)+5,a=[],r=0;r<n;r++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});P({items:a,itemQuantity:n,dataUpdateTime:0},!0,t)}(),M||(M=!0,j?$():(j=!0,q())),(0,l.b)()}function N(){F(),M=!1,(0,l.i)(),(0,l.e)("NotificationScheduleManager")}function R(){return(R=(0,n.a)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,r.a)(e)){if(t.remove(),(0,f.a)("check_circle","已取消通知"),!S){var i=(0,s.b)("playing_animation");P(yield(0,u.h)(x),!1,i)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(t,e,i){i.d(e,{a:()=>x,b:()=>w,c:()=>T,d:()=>C,e:()=>k,f:()=>S});var n=i(3453),a=i(467),r=i(5352),u=i(8179),s=i(5579),d=i(904),c=i(7891),o=i(9119),l=(0,u.c)(".sh"),f=(0,u.e)(l,".xh"),p=(0,u.e)(l,".th"),h=(0,u.e)(p,".uh"),v=(0,u.e)(f,".yh"),m=(0,u.e)(v,'.zh[group="schedule-name"] .ci input'),g=(0,u.e)(v,'.zh[group="schedule-start-time"] .ci input'),y=(0,u.e)(v,'.zh[group="schedule-end-time"] .ci input'),b=(0,u.e)(v,'.zh[group="schedule-days"] .ci'),A=(0,u.d)(b,".di");function C(t){return L.apply(this,arguments)}function L(){return(L=(0,a.a)(function*(t){for(var e=m.value,i=g.value,a=y.value,u=String(i).split(":").map(function(t){return parseInt(t)}),s=(0,n.a)(u,2),d=s[0],l=s[1],f=String(a).split(":").map(function(t){return parseInt(t)}),p=(0,n.a)(f,2),h=p[0],v=p[1],b=[],C=0;C<7;C++){var L=A[C],_=L.getAttribute("highlighted"),k=parseInt(L.getAttribute("day"));"true"===_&&b.push(k)}var w=yield(0,r.b)(t);w.name=e,w.days=b,w.period.start.hours=d,w.period.start.minutes=l,w.period.end.hours=h,w.period.end.minutes=v,(yield(0,r.e)(w))?(x(),(0,c.c)()):(0,o.a)("error","無法儲存變更")})).apply(this,arguments)}function _(){return(_=(0,a.a)(function*(t){var e=yield(0,r.b)(t);m.value=e.name,g.value=(0,s.i)(e.period.start),y.value=(0,s.i)(e.period.end);for(var i=0;i<7;i++){var n=A[i];e.days.indexOf(i)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}h.onclick=function(){C(t)}})).apply(this,arguments)}function k(){l.setAttribute("displayed","true")}function w(){l.setAttribute("displayed","false")}function T(t){(0,d.c)("PersonalScheduleEditor"),k(),function(t){_.apply(this,arguments)}(t),(0,d.b)()}function x(){w(),(0,d.i)(),(0,d.e)("PersonalScheduleEditor")}function S(t){var e=(0,u.e)(b,`.di[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(t,e,i){i.d(e,{a:()=>y,b:()=>m,c:()=>p,d:()=>g,e:()=>v});var n=i(467),a=i(5352),r=i(8179),u=i(4537),s=i(904),d=i(5693),c=(0,r.c)(".wg"),o=(0,r.e)(c,".ah"),l=(0,r.e)(o,".bh");function f(t){var e=(0,r.a)();e.classList.add("ch"),e.onclick=function(){(0,d.c)(t.id)};var i=(0,r.a)();i.classList.add("dh"),i.innerText=t.name,e.appendChild(i);var n=(0,r.a)();n.classList.add("eh");var a=document.createElement("span");return a.appendChild((0,u.b)("arrow_forward_ios")),n.appendChild(a),e.appendChild(n),e}function p(){return h.apply(this,arguments)}function h(){return(h=(0,n.a)(function*(){l.innerHTML="";var t=yield(0,a.d)(),e=new DocumentFragment;for(var i of t){var n=f(i);e.appendChild(n)}l.append(e)})).apply(this,arguments)}function v(){c.setAttribute("displayed","true")}function m(){c.setAttribute("displayed","false")}function g(){(0,s.c)("PersonalScheduleManager"),c.setAttribute("displayed","true"),p(),(0,s.b)()}function y(){c.setAttribute("displayed","false"),(0,s.i)(),(0,s.e)("PersonalScheduleManager")}},7943(){},8279(t,e,i){i.d(e,{a:()=>l,b:()=>c,c:()=>o,d:()=>d});var n=i(8179),a=i(2648),r=i(904),u=(0,n.c)(".aj"),s=(0,n.e)(u,".fj");function d(){u.setAttribute("displayed","true")}function c(){u.setAttribute("displayed","false")}function o(t){(0,r.c)("QRCode"),d(),function(t){var e=(0,a.a)(t,"M",.5,.3,1,"var(--a)",4);s.innerHTML=e}(t),(0,r.b)()}function l(){c(),(0,r.i)(),(0,r.e)("QRCode")}},8380(t,e,i){i.d(e,{a:()=>_,b:()=>y,c:()=>C,d:()=>L,e:()=>A,f:()=>k});var n=i(3453),a=i(467),r=i(5352),u=i(8179),s=i(904),d=i(7891),c=i(9119),o=(0,u.c)(".fh"),l=(0,u.e)(o,".kh"),f=(0,u.e)(l,".lh"),p=(0,u.e)(f,'.mh[group="schedule-name"] .qh input'),h=(0,u.e)(f,'.mh[group="schedule-start-time"] .qh input'),v=(0,u.e)(f,'.mh[group="schedule-end-time"] .qh input'),m=(0,u.e)(f,'.mh[group="schedule-days"] .qh'),g=(0,u.d)(m,".rh");function y(){return b.apply(this,arguments)}function b(){return(b=(0,a.a)(function*(){for(var t=p.value,e=h.value,i=v.value,a=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,n.a)(a,2),s=u[0],o=u[1],l=String(i).split(":").map(function(t){return parseInt(t)}),f=(0,n.a)(l,2),m=f[0],y=f[1],b=[],A=0;A<7;A++){var C=g[A],L=C.getAttribute("highlighted"),k=parseInt(C.getAttribute("day"));"true"===L&&b.push(k)}(yield(0,r.a)(t,s,o,m,y,b))?(_(),(0,c.a)("calendar_view_day","已建立個人化行程"),(0,d.c)()):(0,c.a)("error","無法建立個人化行程")})).apply(this,arguments)}function A(){o.setAttribute("displayed","true")}function C(){o.setAttribute("displayed","false")}function L(){(0,s.c)("PersonalScheduleCreator"),A(),(0,s.b)()}function _(){C(),(0,s.i)(),(0,s.e)("PersonalScheduleCreator")}function k(t){var e=(0,u.e)(m,`.rh[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},8558(){},8969(){},9119(t,e,i){i.d(e,{a:()=>d});var n=i(2284),a=i(3459),r=i(8179),u=i(8024),s=i(4537);function d(t,e,i){var d=(0,r.b)(".gj");if(null!==d)for(var c of d)c.remove();var o=(0,a.b)("playing_animation"),l=(0,r.a)();l.classList.add("gj"),l.setAttribute("animation",(0,u.a)(o));var f=(0,r.a)();f.classList.add("ij"),f.appendChild((0,s.b)(t)),l.appendChild(f);var p=(0,r.a)();if(p.classList.add("jj"),p.innerText=e,l.appendChild(p),"object"===(0,n.a)(i)&&null!=i&&"function"==typeof(null==i?void 0:i.action)){var h=(0,r.a)();h.classList.add("kj"),h.innerText=i.text,h.addEventListener("click",function(){i.action()},{once:!0}),l.appendChild(h),l.setAttribute("button","true")}l.addEventListener("animationend",function(t){null!=t&&t.target&&t.target.remove()},{once:!0}),document.body.appendChild(l)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=edba6f7e28f155c6c07c.js.map