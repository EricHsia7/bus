!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("bus",[],t):"object"==typeof exports?exports.bus=t():e.bus=t()}(self,()=>(()=>{"use strict";var e,t={574(e,t,r){r.d(t,{a:()=>a,b:()=>h});var n=r(5428),a={vector:[0,0],id:-1,name:"未知",symbol:"?",icon:"explore"},o={vector:[0,1],id:0,name:"北",symbol:"↑",icon:"north"},i={vector:[1,0],id:1,name:"東",symbol:"→",icon:"east"},u={vector:[0,-1],id:2,name:"南",symbol:"↓",icon:"south"},c={vector:[-1,0],id:3,name:"西",symbol:"←",icon:"west"},s={vector:[Math.SQRT1_2,Math.SQRT1_2],id:4,name:"東北",symbol:"↗",icon:"north_east"},l={vector:[Math.SQRT1_2,-Math.SQRT1_2],id:5,name:"東南",symbol:"↘",icon:"south_east"},f={vector:[-Math.SQRT1_2,-Math.SQRT1_2],id:6,name:"西南",symbol:"↙",icon:"south_west"},d={vector:[-Math.SQRT1_2,Math.SQRT1_2],id:7,name:"西北",symbol:"↖",icon:"north_west"};function h(e){var t=[a,o,c,u,i,s,l,f,d],r=(0,n.d)(e),h=-1/0,v=t[0];for(var b of t){var p=b.vector[0]*r[0]+b.vector[1]*r[1];p>h&&(h=p,v=b)}return v}},2129(e,t,r){function n(e){for(var t=0;t<e.length;t++)for(var r=t+1;r<e.length;r++)if(e[t]===e[r])return!1;return!0}function a(e,t){var r=[];if(e.length<=t.length)for(var n of e)t.indexOf(n)>-1&&r.push(n);else for(var a of t)e.indexOf(a)>-1&&r.push(a);return r}r.d(t,{a:()=>n,b:()=>a})},2648(e,t,r){r.d(t,{a:()=>o});var n=r(7968),a=r(157);function o(e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000000",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4,c=[[[-1,0],[0,-1]],[[0,-1],[1,0]],[[1,0],[0,1]],[[0,1],[-1,0]]],s=[[[-1,0],[-1,-1],[0,-1]],[[0,-1],[1,-1],[1,0]],[[1,0],[1,1],[0,1]],[[0,1],[-1,1],[-1,0]]],l=function(e,t){for(var r=a.create(e,{errorCorrectionLevel:t}),n=r.modules.size,o=[],i=0;i<n;i++){for(var u=[],c=0;c<n;c++){var s=r.modules.get(c,i);u.push(s)}o.push(u)}return o}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"L"),f=l.length,d=[],h=0;h<f;h++)for(var v=0;v<f;v++)if(1===l[h][v]){for(var b=new Uint8Array(4),p=0;p<4;p++){var g=c[p],m=1;for(var $ of g){var M;1===(null===(M=l[h+$[1]])||void 0===M?void 0:M[v+$[0]])&&(m*=0)}b[p]=m}d=d.concat((0,n.b)((v+o)*u,(h+o)*u,1*u,1*u,{tl:b[0]*t*u,tr:b[1]*t*u,br:b[2]*t*u,bl:b[3]*t*u},!1))}else{for(var y=new Uint8Array(4),w=0;w<4;w++){var S=s[w],j=1;for(var x of S){var T;null!==(T=l[h+x[1]])&&void 0!==T&&T[v+x[0]]||(j*=0)}y[w]=j}y.some(function(e){return 0!==e})&&(d=d.concat((0,n.b)((v+o)*u,(h+o)*u,1*u,1*u,{tl:y[0]*r*u,tr:y[1]*r*u,br:y[2]*r*u,bl:y[3]*r*u},!0)))}return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${(f+2*o)*u} ${(f+2*o)*u}" shape-rendering="geometricPrecision"><path d="${d.join(" ")}" fill="${i}" stroke="${i}" stroke-width="0.1" stroke-linejoin="round" fill-rule="nonzero" /></svg>`}},2945(e,t,r){r.d(t,{a:()=>o,b:()=>a});var n=r(7183);function a(e){for(var t=[],r=0;r<e;r++)t.push(`地點${(0,n.b)(r+1)}`);return t}function o(e){var t=[];for(var r of e)t.push(`向${r.name}${r.symbol}`);return t}},4256(e,t,r){r.d(t,{a:()=>i,b:()=>u});var n=r(2129),a=r(8024),o=r(2945);function i(e){return`${e.city.join("")}${e.district.join("")}${e.road.join("、")}${e.road_section.sort(function(e,t){return e-t}).length>0?e.road_section.join("、")+"段":""}${e.alley.length>0?e.alley.sort(function(e,t){return e-t}).join("、")+"巷":""}${e.alley_branch.length>0?e.alley_branch.sort(function(e,t){return e-t}).join("、")+"弄":""}${e.doorplate.length>0?e.doorplate.sort(function(e,t){return e-t}).join("、")+"號":""}${e.floornumber.length>0?e.floornumber.join("、")+"樓":""}${e.direction.length>0?"（朝"+e.direction.join("、")+"）":""}`}function u(e){var t=[],r={};for(var i of e)for(var u in i)(0,a.e)(r,u)||(r[u]=0),i[u].length>0&&(r[u]=r[u]+1);var c=Object.entries(r).map(function(e){return{key:e[0],value:e[1]}}).filter(function(t){return t.value===e.length}).sort(function(e,t){return e.value-t.value});if(c.length>0)for(var s of c){var l=[],f=-1/0;for(var d of e){var h=d[s.key].join("");l.push(h);var v=h.length;v>f&&(f=v)}(0,n.a)(l)&&t.push({components:l,len:f})}if(t.length>0)return t.sort(function(e,t){return e.len-t.len}),t[0].components;var b=e.length;return(0,o.b)(b)}},4750(e,t,r){r.d(t,{a:()=>l});var n,a=r(467),o=r(3453),i=r(8024),u={};if("undefined"!=typeof SharedWorker){var c=new SharedWorker(new URL(r.p+r.u(701),r.b));(n=c.port).start()}else{var s=new Worker(new URL(r.p+r.u(82),r.b));n=s}function l(e){return f.apply(this,arguments)}function f(){return(f=(0,a.a)(function*(e){var t=(0,i.c)();return yield new Promise(function(r,a){u[t]=r,n.onerror=function(e){a(e.message)},n.postMessage([e,t])})})).apply(this,arguments)}n.onmessage=function(e){var t=(0,o.a)(e.data,2),r=t[0],n=t[1];u[n]&&(u[n](r),delete u[n])},n.onerror=function(e){}},4781(e,t,r){function n(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];if("string"==typeof e)for(var n=e.length,a=0;a<n;a++){var o=e.charCodeAt(a);(r.indexOf(o)<0||!t)&&r.push(o)}return r}function a(e){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(e)}r.d(t,{a:()=>a,b:()=>n})},5428(e,t,r){function n(e,t,r,n,a,o){var i=r+o,u=(r*e+o*n)/i,c=(r*(Math.pow(t,2)+Math.pow(e,2))+o*(Math.pow(a,2)+Math.pow(n,2)))/i-Math.pow(u,2);return Math.sqrt(c)}function a(e,t,r,a,o,i,u,c,s,l,f,d){var h=o+f;return(o*(r*a*i+e*t)+f*(s*l*d+u*c)-h*((o*e+f*u)/h)*((o*t+f*c)/h))/(h*n(e,r,o,u,s,f)*n(t,a,o,c,l,f))}function o(e){var t=Math.hypot(e),r=e.length,n=new Float32Array(r);if(t>0){for(var a=1/t,o=r;o>0;o--)n[o]=e[o]*a;return Array.from(n)}return e}function i(e){var t=e.length;if(0===t)return[0,0];for(var r=1/0,n=-1/0,a=t-1;a>=0;a--){var o=e[a];o>n&&(n=o),o<r&&(r=o)}return[r,n]}r.d(t,{a:()=>i,b:()=>a,c:()=>n,d:()=>o})},5579(e,t,r){function n(){var e=new Date,t=e.getDay(),r=e.getDate()-t,n=new Date;return n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function a(e,t,r,n){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(r),a.setMinutes(n),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(e.getFullYear()),a.setMonth(e.getMonth()),a.setDate(e.getDate()),a.setDate(a.getDate()+t),a}function o(e){var t=e.match(/[0-9\.]*/gm);if(t){var r=parseInt(t[0]),n=parseInt(t[2]),a=parseInt(t[4]),o=parseInt(t[6]),i=parseInt(t[8]),u=parseInt(t[10]),c=new Date;return c.setDate(1),c.setMonth(0),c.setFullYear(r),c.setMonth(n-1),c.setDate(a),c.setHours(o),c.setMinutes(i),c.setSeconds(u),c.getTime()}return 0}function i(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,e.getFullYear()).replaceAll(/M{2,2}/g,String(e.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(e.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(e.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(e.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(e.getSeconds()).padStart(2,"0"))}function u(e){var t=e.getTime(),r=Math.floor(((new Date).getTime()-t)/1e3),n=Math.floor(r/31536e3);return n>=1?`${n}年前`:(n=Math.floor(r/2592e3))>=1?`${n}個月前`:(n=Math.floor(r/86400))>=1?`${n}天前`:(n=Math.floor(r/3600))>=1?`${n}小時前`:(n=Math.floor(r/60))>=1?`${n}分鐘前`:r>0?`${r}秒前`:"現在"}function c(e,t){var r=0|e;switch(t){case 0:return`${r}秒`;case 1:return[String((r-r%60)/60),String(r%60)].map(function(e){return e.padStart(2,"0")}).join(":");case 2:return`${r/60|0}分`;case 3:if(r>=3600)return`${parseFloat((r/3600).toFixed(1))}時`;if(60<=r&&r<3600)return`${r/60|0}分`;if(r<60)return`${r}秒`;break;default:return"--"}}function s(e){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][e]}function l(e){return s(parseInt(e)-1)}function f(e){return`${String(e.hours).padStart(2,"0")}:${String(e.minutes).padStart(2,"0")}`}function d(e,t,r){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(e),n.setMonth(t-1),n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}r.d(t,{a:()=>d,b:()=>u,c:()=>i,d:()=>l,e:()=>c,f:()=>n,g:()=>s,h:()=>a,i:()=>f,j:()=>o})},6141(e,t,r){r.d(t,{a:()=>o});var n=r(8024);var a={light:{},dark:{}};function o(e){var t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if((0,n.e)(a[t],e))return a[t][e];var r=getComputedStyle(document.documentElement).getPropertyValue(e);return a[t][e]=r,r}},7183(e,t,r){function n(e,t,r,n){var a=r*Math.PI/180-e*Math.PI/180,o=n*Math.PI/180-t*Math.PI/180,i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))))}function a(e){for(var t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;e>=1e3&&r<t.length-1;)e/=1e3,r++;return`${Math.floor(100*e)/100} ${t[r]}`}function o(e){for(var t="";e>0;){var r=(e-1)%26;t=String.fromCharCode(r+65)+t,e=Math.floor((e-1)/26)}return t}r.d(t,{a:()=>a,b:()=>o,c:()=>n})},7968(e,t,r){function n(e,t,r,a){var o=(n.canvas||(n.canvas=document.createElement("canvas"))).getContext("2d"),i=`${t} ${r} ${a}`;return o.font=i,o.measureText(e).width}function a(e,t,r,n){var o=(a.canvas||(a.canvas=document.createElement("canvas"))).getContext("2d"),i=`${t} ${r} ${n}`;o.font=i;var u=o.measureText(e);return[Math.max(Math.abs(u.emHeightAscent||0),Math.abs(u.hangingBaseline||0),Math.abs(u.fontBoundingBoxAscent||0),Math.abs(u.actualBoundingBoxAscent||0)),u.width,u.fontBoundingBoxAscent+u.fontBoundingBoxDescent]}function o(e,t,r,n,a,o,i){o="number"==typeof o?{tl:o,tr:o,br:o,bl:o}:{tl:o.tl||0,tr:o.tr||0,br:o.br||0,bl:o.bl||0},e.beginPath(),e.moveTo(t+o.tl,r),e.lineTo(t+n-o.tr,r),e.quadraticCurveTo(t+n,r,t+n,r+o.tr),e.lineTo(t+n,r+a-o.br),e.quadraticCurveTo(t+n,r+a,t+n-o.br,r+a),e.lineTo(t+o.bl,r+a),e.quadraticCurveTo(t,r+a,t,r+a-o.bl),e.lineTo(t,r+o.tl),e.quadraticCurveTo(t,r,t+o.tl,r),e.closePath(),e.fillStyle=i,e.fill()}function i(e,t,r,n,a,o){var i=a="number"==typeof a?{tl:a,tr:a,br:a,bl:a}:{tl:a.tl||0,tr:a.tr||0,br:a.br||0,bl:a.bl||0},u=i.tl,c=i.tr,s=i.br,l=i.bl,f=[];return o?(0!==u&&f.push(`M${e} ${t+u}`,`Q${e} ${t} ${e+u} ${t}`,`H${e}`,`V${t+u}`),0!==c&&f.push(`M${e+r-c} ${t}`,`Q${e+r} ${t} ${e+r} ${t+c}`,`V${t}`,"H"+(e+r-c)),0!==s&&f.push(`M${e+r} ${t+n-s}`,`Q${e+r} ${t+n} ${e+r-s} ${t+n}`,`H${e+r}`,"V"+(t+n-s)),0!==l&&f.push(`M${e+l} ${t+n}`,`Q${e} ${t+n} ${e} ${t+n-l}`,`V${t+n}`,`H${e+l}`)):f.push(`M${e+u} ${t}`,"H"+(e+r-c),`Q${e+r} ${t} ${e+r} ${t+c}`,"V"+(t+n-s),`Q${e+r} ${t+n} ${e+r-s} ${t+n}`,`H${e+l}`,`Q${e} ${t+n} ${e} ${t+n-l}`,`V${t+u}`,`Q${e} ${t} ${e+u} ${t}`),f}r.d(t,{a:()=>o,b:()=>i,c:()=>a,d:()=>n})},8024(e,t,r){r.d(t,{a:()=>v,b:()=>u,c:()=>c,d:()=>s,e:()=>b,f:()=>d,g:()=>p,i:()=>f,j:()=>i,k:()=>h});var n=r(2284),a=r(9119),o=r(3503),i=r(4462).sha512;function u(e,t){function r(e){return JSON.stringify({e})}var n=r(e),a=r(t),i=n.length,u=a.length;if(i===u){if(i>32||u>32){for(var c=o(n),s=o(a),l=!0,f=0;f<8;f++){if(c.charAt(f)!==s.charAt(f)){l=!1;break}}return l}return n===a}return!1}function c(){var e=[[48,10],[97,26],[65,26]],t=Math.floor(268435456*Math.random()),r=Math.floor(268435456*Math.random()),n=new Uint8Array(17);n[0]=95;for(var a=16;a>0;a--){var o=e[r%3],i=o[0]+t%o[1];n[a]=i,t>>>=1,r>>>=1}return String.fromCharCode.apply(null,n)}function s(e){return((new Date).getTime()/e|0).toString(16)}function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32e3,n=URL.createObjectURL(e),a=document.createElement("a");return a.href=n,a.download=t,document.body.appendChild(a),a.click(),a.remove(),setTimeout(function(){URL.revokeObjectURL(n)},r),n}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r=arguments.length>2?arguments[2]:void 0,n=new Blob([e],{type:t}),o=new File([n],r,{type:t});navigator.canShare&&navigator.canShare({files:[o]})?navigator.share({files:[o]}).catch(function(e){(0,a.a)("download","下載資料",{text:"下載",action:function(){l(n,r)}})}):l(n,r)}function d(){return window.matchMedia("(display-mode: standalone)").matches}function h(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)}function v(e){return"boolean"==typeof e?e?"true":"false":"unsupported"}function b(e,t){return null!=e&&"object"===(0,n.a)(e)&&!Array.isArray(e)&&Object.prototype.hasOwnProperty.call(e,t)}function p(e){try{return new URL(e),!0}catch(e){return!1}}},8179(e,t,r){function n(e){return document.querySelector(e)}function a(e){return document.querySelectorAll(e)}function o(e,t){return e.querySelector(t)}function i(e,t){return e.querySelectorAll(t)}function u(e,t){for(var r=[],n=e.nextElementSibling;n;)n.classList.contains(t)&&r.push(n),n=n.nextElementSibling;return r}function c(){return document.createElement("div")}r.d(t,{a:()=>c,b:()=>a,c:()=>n,d:()=>i,e:()=>o,f:()=>u})},9469(e,t,r){r.d(t,{a:()=>u,b:()=>i});var n=r(8134),a=r(3030),o=r(4690);function i(){var e=new URL(location.href).searchParams.get("permalink");if(null!==e){var t=String(e);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(t)){var r=t.split(/[\@\~]/);switch(parseInt(r[0])){case 0:(0,n.e)(parseInt(r[1],16)).then(function(e){!1!==e?(0,o.c)(e.id,e.pid):(0,n.c)(r[2]).then(function(e){e.length>0&&(0,o.c)(e[0].id,e[0].pid)})});break;case 1:(0,a.c)(r[1])}}}}function u(e,t){var r=new URL("https://erichsia7.github.io/bus/");switch(e){case 0:r.searchParams.set("permalink",`0@${parseInt(t.id).toString(16)}~${t.name}`);break;case 1:r.searchParams.set("permalink",`1@${t.hash}`)}return decodeURIComponent(r.toString())}},9519(e,t,r){r.d(t,{a:()=>n});var n=r(4668)}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,n.amdO={},e=[],n.O=(t,r,a,o)=>{if(!r){var i=1/0;for(l=0;l<e.length;l++){for(var[r,a,o]=e[l],u=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(n.O).every(e=>n.O[e](r[c]))?r.splice(c--,1):(u=!1,o<i&&(i=o));if(u){e.splice(l--,1);var s=a();void 0!==s&&(t=s)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,a,o]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.u=e=>({82:"26173020b22f1f434ab0",132:"82a2e0280e7aaf91e0be",234:"7ca2d4132419825e5eee",281:"7981ef204cd030923bed",319:"181833216f1d19baac20",327:"841bdeaeb0ea78bca576",355:"1fb5449ffa0864f05a76",367:"70fa341d14c9658a5aee",525:"68c29a0b15a555bc8b88",611:"e69b3ab5f56fbdea16ec",625:"d2fbd645847bab11f4a6",660:"5c4b5ec1bfb79ec55b52",662:"7981ef204cd030923bed",701:"26173020b22f1f434ab0",778:"4734505795b7da4648f8",906:"68c29a0b15a555bc8b88",992:"e69b3ab5f56fbdea16ec"}[e]+".js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="./",(()=>{n.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={289:0,423:0,821:0,112:0,225:0,226:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,u,c]=r,s=0;if(i.some(t=>0!==e[t])){for(a in u)n.o(u,a)&&(n.m[a]=u[a]);if(c)var l=c(n)}for(t&&t(r);s<i.length;s++)o=i[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=self.webpackChunkbus=self.webpackChunkbus||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[35,180,790,157,374,680,470,496,852,600,537,607,196,139,423,532,821,112,474,225,226,155],()=>n(3441));return a=(a=n.O(a)).default})());
//# sourceMappingURL=9d0d4e7c6373175cb179.js.map