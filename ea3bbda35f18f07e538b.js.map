{"version":3,"file":"ea3bbda35f18f07e538b.js","mappings":"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","sources":["webpack://bus/./src/interface/personal-schedule-editor/index.ts","webpack://bus/./src/interface/qrcode/index.ts","webpack://bus/./src/interface/personal-schedule-creator/index.ts","webpack://bus/./src/interface/index.ts","webpack://bus/./src/interface/icons/index.ts","webpack://bus/./src/interface/prompt/index.ts","webpack://bus/./src/interface/notification-schedule-manager/index.ts","webpack://bus/./src/interface/location/details/index.ts","webpack://bus/./src/interface/personal-schedule-manager/index.ts"],"sourcesContent":["import { getPersonalSchedule, updatePersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { timeObjectToString, WeekDayIndex } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst PersonalScheduleEditorField = documentQuerySelector('.css_personal_schedule_editor_field');\nconst PersonalScheduleEditorBodyElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_body');\nconst PersonalScheduleEditorHeadElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_head');\nconst leftButtonElement = elementQuerySelector(PersonalScheduleEditorHeadElement, '.css_personal_schedule_editor_button_left');\nconst PersonalScheduleEditorGroups = elementQuerySelector(PersonalScheduleEditorBodyElement, '.css_personal_schedule_editor_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-name\"] .css_personal_schedule_editor_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-start-time\"] .css_personal_schedule_editor_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-end-time\"] .css_personal_schedule_editor_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-days\"] .css_personal_schedule_editor_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_editor_day');\n\nexport async function saveEditedPersonalSchedule(personalScheduleID: string) {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  let personalSchedule = await getPersonalSchedule(personalScheduleID);\n  personalSchedule.name = name;\n  personalSchedule.days = days;\n  personalSchedule.period.start.hours = startHours;\n  personalSchedule.period.start.minutes = startMinutes;\n  personalSchedule.period.end.hours = endHours;\n  personalSchedule.period.end.minutes = endMinutes;\n\n  await updatePersonalSchedule(personalSchedule);\n  promptMessage('check_circle', '已儲存變更');\n  closePersonalScheduleEditor();\n}\n\nasync function initializePersonalScheduleEditorField(personalScheduleID: string) {\n  const personalSchedule = await getPersonalSchedule(personalScheduleID);\n  nameInputElement.value = personalSchedule.name;\n  startTimeInputElement.value = timeObjectToString(personalSchedule.period.start);\n  endTimeInputElement.value = timeObjectToString(personalSchedule.period.end);\n\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    if (personalSchedule.days.indexOf(i) > -1) {\n      thisDayElement.setAttribute('highlighted', 'true');\n    } else {\n      thisDayElement.setAttribute('highlighted', 'false');\n    }\n  }\n  leftButtonElement.onclick = function () {\n    saveEditedPersonalSchedule(personalScheduleID);\n  };\n}\n\nexport function openPersonalScheduleEditor(personalScheduleID: string): void {\n  pushPageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'true');\n  initializePersonalScheduleEditorField(personalScheduleID);\n  closePreviousPage();\n}\n\nexport function closePersonalScheduleEditor(): void {\n  // revokePageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function switchPersonalScheduleEditorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_editor_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateRoundedQRCodeSVG } from '../../tools/qrcode';\nimport { pushPageHistory, revokePageHistory } from '../index';\n\nconst QRCodeField = documentQuerySelector('.css_qrcode_field');\nconst QRCodeBodyElement = elementQuerySelector(QRCodeField, '.css_qrcode_body');\n\nexport function initializeQRCodeField(text: string): void {\n  const svg = generateRoundedQRCodeSVG(text, 'M', 0.5, 0.3, 1, 'var(--b-cssvar-333333)', 4);\n  QRCodeBodyElement.innerHTML = svg;\n}\n\nexport function openQRCode(text: string): void {\n  pushPageHistory('QRCode');\n  QRCodeField.setAttribute('displayed', 'true');\n  initializeQRCodeField(text);\n  // closePreviousPage();\n}\n\nexport function closeQRCode(): void {\n  revokePageHistory('QRCode');\n  QRCodeField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { createPersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { WeekDayIndex } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst PersonalScheduleCreatorField = documentQuerySelector('.css_personal_schedule_creator_field');\nconst PersonalScheduleCreatorBodyElement = elementQuerySelector(PersonalScheduleCreatorField, '.css_personal_schedule_creator_body');\nconst PersonalScheduleCreatorGroups = elementQuerySelector(PersonalScheduleCreatorBodyElement, '.css_personal_schedule_creator_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-name\"] .css_personal_schedule_creator_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-start-time\"] .css_personal_schedule_creator_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-end-time\"] .css_personal_schedule_creator_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-days\"] .css_personal_schedule_creator_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_creator_day');\n\nexport function createFormulatedPersonalSchedule(): void {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  createPersonalSchedule(name, startHours, startMinutes, endHours, endMinutes, days).then(function (e) {\n    if (e) {\n      closePersonalScheduleCreator();\n      promptMessage('calendar_view_day', '已建立個人化行程');\n    } else {\n      promptMessage('error', '無法建立個人化行程');\n    }\n  });\n}\n\nexport function openPersonalScheduleCreator(): void {\n  pushPageHistory('PersonalScheduleCreator');\n  PersonalScheduleCreatorField.setAttribute('displayed', 'true');\n  closePreviousPage();\n}\n\nexport function closePersonalScheduleCreator(): void {\n  // revokePageHistory('PersonalScheduleCreator');\n  PersonalScheduleCreatorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function switchPersonalScheduleCreatorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_creator_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { documentQuerySelector } from '../tools/elements';\nimport { isRunningStandalone } from '../tools/index';\nimport { closeBus, openBus } from './bus/index';\nimport { closeFolderCreator, openFolderCreator } from './folder-creator/index';\nimport { closeFolderEditor, openFolderEditor } from './folder-editor/index';\nimport { closeFolderManager, openFolderManager } from './folder-manager/index';\nimport { closePersonalScheduleEditor, openPersonalScheduleEditor } from './personal-schedule-editor/index';\nimport { closePersonalScheduleManager, openPersonalScheduleManager } from './personal-schedule-manager/index';\nimport { closeRegisterNotification, openRegisterNotification } from './register-notification/index';\nimport { closeSearch, openSearch } from './search/index';\nimport { closeSettings, openSettings } from './settings/index';\n\nconst SplashScreenElement = documentQuerySelector('.css_splash_screen');\nconst ErrorMessageElement = documentQuerySelector('.css_error_message');\n\nconst splashScreenTimer_minimalTimeOut = 100;\nconst splashScreenTimer_openTime = new Date().getTime();\n\ntype Page = 'Home' | 'FolderCreator' | 'FolderEditor' | 'FolderIconSelector' | 'FolderManager' | 'LocationDetails' | 'Location' | 'RouteDetails' | 'Route' | 'SaveToFolder' | 'Search' | 'Settings' | 'SettingsOptions' | 'DataUsage' | 'PersonalScheduleManager' | 'PersonalScheduleCreator' | 'PersonalScheduleEditor' | 'Bus' | 'RegisterNotification' | 'ScheduleNotification' | 'NotificationScheduleManager' | 'QRCode';\n\nlet pageHistory: Array<Page> = ['Home'];\n\nexport function pushPageHistory(page: Page): void {\n  const pageHistoryLength = pageHistory.length;\n  const lastPage = pageHistory[pageHistoryLength - 1];\n  if (lastPage !== page) {\n    pageHistory.push(page);\n  }\n}\n\nexport function revokePageHistory(page: Page): void {\n  if (pageHistory.indexOf(page) > -1) {\n    const pageHistoryLength = pageHistory.length;\n    if (pageHistory[pageHistoryLength - 1] === page) {\n      pageHistory.pop();\n    }\n  }\n}\n\nexport function closePreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        closeFolderCreator();\n        break;\n      case 'FolderEditor':\n        closeFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        closeFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        closeSearch();\n        break;\n      case 'Settings':\n        closeSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        closePersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        closePersonalScheduleEditor();\n        break;\n      case 'Bus':\n        closeBus();\n        break;\n      case 'RegisterNotification':\n        closeRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function openPreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    pageHistory.pop();\n    switch (previousPage) {\n      case 'Home':\n        break;\n      case 'FolderCreator':\n        openFolderCreator();\n        break;\n      case 'FolderEditor':\n        openFolderEditor();\n        break;\n      case 'FolderIconSelector':\n        break;\n      case 'FolderManager':\n        openFolderManager();\n        break;\n      case 'Location':\n        break;\n      case 'LocationDetails':\n        break;\n      case 'Route':\n        break;\n      case 'RouteDetails':\n        break;\n      case 'SaveToFolder':\n        break;\n      case 'Search':\n        openSearch();\n        break;\n      case 'Settings':\n        openSettings();\n        break;\n      case 'SettingsOptions':\n        break;\n      case 'DataUsage':\n        break;\n      case 'PersonalScheduleManager':\n        openPersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        break;\n      case 'PersonalScheduleEditor':\n        openPersonalScheduleEditor();\n        break;\n      case 'Bus':\n        openBus();\n        break;\n      case 'RegisterNotification':\n        openRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        break;\n      case 'NotificationScheduleManager':\n        break;\n      case 'QRCode':\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function setSplashScreenIconOffsetY(): void {\n  let offset = 0;\n  if (isRunningStandalone()) {\n    offset = (-1 * (window.outerHeight - window.innerHeight)) / 2;\n  }\n  documentQuerySelector('.css_splash_screen svg.css_splash_screen_icon').style.setProperty('--b-cssvar-splash-screen-icon-offset-y', `${offset}px`);\n}\n\nexport function fadeOutSplashScreen(callback: Function): void {\n  function fadeOut() {\n    SplashScreenElement.classList.add('css_splash_screen_fade_out');\n    SplashScreenElement.addEventListener(\n      'animationend',\n      function () {\n        SplashScreenElement.setAttribute('displayed', 'false');\n        SplashScreenElement.classList.remove('css_splash_screen_fade_out');\n        if (typeof callback === 'function') {\n          callback();\n        }\n      },\n      { once: true }\n    );\n  }\n  const cureentTime = new Date().getTime();\n  if (cureentTime - splashScreenTimer_openTime < splashScreenTimer_minimalTimeOut) {\n    setTimeout(fadeOut, Math.max(1, cureentTime - splashScreenTimer_openTime));\n  } else {\n    fadeOut();\n  }\n}\n\nexport function showErrorMessage(): void {\n  ErrorMessageElement.setAttribute('displayed', 'true');\n}\n\nexport type GroupStyles = {\n  [groupKey: string]: {\n    width: number;\n    offset: number;\n  };\n};\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\ntype SizeType = 'window' | 'head' | 'head-one-button' | 'head-two-button' | 'route-details-canvas' | 'route-bus-arrival-time-chart' | 'location-bus-arrival-time-chart';\n\nexport function querySize(type: SizeType): Size {\n  let width: number = 0;\n  let height: number = 0;\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n  switch (type) {\n    case 'window':\n      width = windowWidth;\n      height = windowHeight;\n      break;\n    case 'head':\n      width = windowWidth;\n      height = 55;\n      break;\n    case 'head-one-button':\n      width = windowWidth - 55;\n      height = 55;\n      break;\n    case 'head-two-button':\n      width = windowWidth - 55 * 2;\n      height = 55;\n      break;\n    case 'route-details-canvas':\n      width = windowWidth - 10 * 2 - 10 * 2;\n      height = 24 * 70;\n      break;\n    case 'route-bus-arrival-time-chart':\n      width = windowWidth - 45 - 15 - 20;\n      height = 75;\n      break;\n    case 'location-bus-arrival-time-chart':\n      width = windowWidth - 30 - 20;\n      height = 75;\n      break;\n    default:\n      width = 0;\n      height = 0;\n      break;\n  }\n  return {\n    width,\n    height\n  };\n}\n\nexport function scrollDocumentToTop(): void {\n  window.scrollTo({\n    top: 0,\n    behavior: 'instant'\n  });\n}\n","import { elementQuerySelector } from '../../tools/elements';\nimport { MaterialSymbols } from './material-symbols-type';\n\nexport function getIconHTML(identifier: MaterialSymbols): string {\n  return /*html*/ `<span class=\"css_material_symbols_rounded\">${identifier}</span>`;\n}\n\nexport function getIconElement(identifier: MaterialSymbols): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  iconElement.innerText = identifier;\n  return iconElement;\n}\n\nexport function getBlankIconElement(): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  return iconElement;\n}\n\nexport function setIcon(parentElement: HTMLElement, identifier: MaterialSymbols): void {\n  const thisSpanElement = elementQuerySelector(parentElement, 'span.css_material_symbols_rounded');\n  thisSpanElement.innerText = identifier;\n}\n","import { getSettingOptionValue } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\n\nexport interface PromptButton {\n  text: string;\n  action: Function;\n}\n\nexport function promptMessage(icon: MaterialSymbols, message: string, button?: PromptButton | null): void {\n  const allPromptElements = documentQuerySelectorAll('.css_prompt');\n  if (allPromptElements !== null) {\n    for (const promptElement of allPromptElements) {\n      promptElement.remove();\n    }\n  }\n\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n\n  const promptElement = documentCreateDivElement();\n  promptElement.classList.add('css_prompt');\n  promptElement.setAttribute('animation', booleanToString(playing_animation));\n\n  const promptIconElement = documentCreateDivElement();\n  promptIconElement.classList.add('css_prompt_icon');\n  promptIconElement.appendChild(getIconElement(icon));\n  promptElement.appendChild(promptIconElement);\n\n  const promptMessageElement = documentCreateDivElement();\n  promptMessageElement.classList.add('css_prompt_message');\n  promptMessageElement.innerText = message;\n  promptElement.appendChild(promptMessageElement);\n\n  if (typeof button === 'object' && button !== null && button !== undefined) {\n    if (typeof button?.action === 'function') {\n      const promptButtonElement = documentCreateDivElement();\n      promptButtonElement.classList.add('css_prompt_button');\n      promptButtonElement.innerText = button.text;\n      promptButtonElement.addEventListener(\n        'click',\n        function () {\n          button.action();\n        },\n        { once: true }\n      );\n      promptElement.appendChild(promptButtonElement);\n      promptElement.setAttribute('button', 'true');\n    }\n  }\n\n  promptElement.addEventListener(\n    'animationend',\n    function (event) {\n      if (event?.target) {\n        event.target.remove();\n      }\n    },\n    { once: true }\n  );\n\n  document.body.appendChild(promptElement);\n}\n","import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../data/apis/loader';\nimport { cancelNotification } from '../../data/notification/apis/cancelNotification/index';\nimport { IntegratedNotificationScheduleItem, IntegratedNotificationSchedules, integrateNotifcationSchedules, NotificationSchedule } from '../../data/notification/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString, compareThings, generateIdentifier, hasOwnProperty } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst NotificationScheduleManagerField = documentQuerySelector('.css_notification_schedule_manager_field');\nconst NotificationScheduleManagerHeadElement = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_head');\nconst NotificationScheduleManagerUpdateTimerBoxElement = elementQuerySelector(NotificationScheduleManagerHeadElement, '.css_notification_schedule_manager_update_timer_box');\nconst NotificationScheduleManagerUpdateTimerElement = elementQuerySelector(NotificationScheduleManagerUpdateTimerBoxElement, '.css_notification_schedule_manager_update_timer');\nconst NotificationScheduleManagerBody = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_body');\nconst NotificationScheduleList = elementQuerySelector(NotificationScheduleManagerBody, '.css_notification_schedule_manager_notification_schedule_list');\n\nlet previousIntegration = {} as IntegratedNotificationSchedules;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet notifcationScheduleManagerRefreshTimer_retryInterval: number = 10 * 1000;\nlet notifcationScheduleManagerRefreshTimer_baseInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_minInterval: number = 5 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamic: boolean = true;\nlet notifcationScheduleManagerRefreshTimer_lastUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_nextUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_currentRequestID: string = '';\nlet notifcationScheduleManagerRefreshTimer_refreshing: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_streaming: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_streamStarted: boolean = false;\n\nfunction animateUpdateTimer(): void {\n  NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-notification-schedule-manager-update-timer-interval', `${notifcationScheduleManagerRefreshTimer_dynamicInterval}ms`);\n  NotificationScheduleManagerUpdateTimerElement.classList.add('css_notification_schedule_manager_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (notifcationScheduleManagerRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-notification-schedule-manager-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfItem(): HTMLElement {\n  // Main item element\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_notification_schedule_manager_item');\n\n  // Hours element\n  const hoursElement = documentCreateDivElement();\n  hoursElement.classList.add('css_notification_schedule_manager_item_hours');\n  itemElement.appendChild(hoursElement);\n\n  // Notification schedule container\n  const notificationScheduleElement = documentCreateDivElement();\n  notificationScheduleElement.classList.add('css_notification_schedule_manager_item_notification_schedule');\n\n  // Minutes element\n  const minutesElement = documentCreateDivElement();\n  minutesElement.classList.add('css_notification_schedule_manager_item_notification_schedule_minutes');\n  notificationScheduleElement.appendChild(minutesElement);\n\n  // Context element\n  const contextElement = documentCreateDivElement();\n  contextElement.classList.add('css_notification_schedule_manager_item_notification_schedule_context');\n  notificationScheduleElement.appendChild(contextElement);\n\n  // Main element\n  const mainElement = documentCreateDivElement();\n  mainElement.classList.add('css_notification_schedule_manager_item_notification_schedule_main');\n  notificationScheduleElement.appendChild(mainElement);\n\n  // Cancel button element\n  const cancelElement = documentCreateDivElement();\n  cancelElement.classList.add('css_notification_schedule_manager_item_notification_schedule_cancel');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('close'));\n  cancelElement.appendChild(iconElement);\n\n  notificationScheduleElement.appendChild(cancelElement);\n\n  // Assemble\n  itemElement.appendChild(notificationScheduleElement);\n\n  return itemElement;\n}\n\nfunction updateNotificationScheduleManagerField(integration: IntegratedNotificationSchedules, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem, previousItem: IntegratedNotificationScheduleItem | null): void {\n    function updateHours(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemHoursElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_hours');\n      thisItemHoursElement.innerText = thisItem.hours;\n    }\n\n    function updateMinutes(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMinutesElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_minutes');\n      thisItemMinutesElement.innerText = thisItem.minutes;\n    }\n\n    function updateMain(thisItemElement: HTMLElementm, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMainElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_main');\n      thisItemMainElement.innerText = thisItem.name;\n    }\n\n    function updateContext(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemContextElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_context');\n      thisItemContextElement.innerText = `${thisItem.route.name} - 往${thisItem.route.direction}`;\n    }\n\n    function updateCancel(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemCancelElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_cancel');\n      thisItemCancelElement.onclick = function () {\n        cancelNotificationOnNotificationScheduleManager(thisItemElement, thisItem.schedule_id);\n      };\n    }\n\n    function updateFirst(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      thisItemElement.setAttribute('first', booleanToString(thisItem.is_first));\n    }\n\n    function updateAnimation(thisItemElement: HTMLElement, animation: boolean): void {\n      thisItemElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisItemElement: HTMLElement, skeletonScreen: boolean): void {\n      thisItemElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateHours(thisItemElement, thisItem);\n      updateMinutes(thisItemElement, thisItem);\n      updateMain(thisItemElement, thisItem);\n      updateContext(thisItemElement, thisItem);\n      updateCancel(thisItemElement, thisItem);\n      updateFirst(thisItemElement, thisItem);\n      updateAnimation(thisItemElement, animation);\n      updateSkeletonScreen(thisItemElement, skeletonScreen);\n    } else {\n      if (thisItem.hours !== previousItem.hours) {\n        updateHours(thisItemElement, thisItem);\n      }\n      if (thisItem.minutes !== previousItem.minutes) {\n        updateMinutes(thisItemElement, thisItem);\n      }\n      if (!compareThings(previousItem.schedule_id, thisItem.schedule_id)) {\n        updateMain(thisItemElement, thisItem);\n        updateContext(thisItemElement, thisItem);\n        updateCancel(thisItemElement, thisItem);\n      }\n      if (previousItem.is_first !== thisItem.is_first) {\n        updateFirst(thisItemElement, thisItem);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisItemElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisItemElement, skeletonScreen);\n      }\n    }\n  }\n\n  const itemQuantity = integration.itemQuantity;\n  const items = integration.items;\n\n  const itemElements = Array.from(elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item'));\n  const currentItemElementsLength = itemElements.length;\n  if (itemQuantity !== currentItemElementsLength) {\n    const difference = currentItemElementsLength - itemQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement);\n        itemElements.push(newItemElement);\n      }\n      NotificationScheduleList.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentItemElementsLength - 1, q = currentItemElementsLength - difference - 1; p > q; p--) {\n        itemElements[p].remove();\n        itemElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let j = 0; j < itemQuantity; j++) {\n    const thisItemElement = itemElements[j];\n    const thisItem = items[j];\n    if (hasOwnProperty(previousIntegration, 'items')) {\n      if (previousIntegration.items[j]) {\n        const previousItem = previousIntegration.items[j];\n        updateItem(thisItemElement, thisItem, previousItem);\n      } else {\n        updateItem(thisItemElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisItemElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpNotificationScheduleManagerFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: IntegratedNotificationSchedules['itemQuantity'] = Math.floor(FieldHeight / 50) + 5;\n  let items: IntegratedNotificationSchedules['items'] = [];\n  for (let i = 0; i < defaultItemQuantity; i++) {\n    items.push({\n      name: '',\n      stop_id: 0,\n      estimate_time: 0,\n      schedule_id: 'null',\n      scheduled_time: 0,\n      route: {\n        name: '',\n        direction: '',\n        id: 0,\n        pathAttributeId: []\n      },\n      is_first: true,\n      date: '',\n      hours: '',\n      minutes: ''\n    });\n  }\n  updateNotificationScheduleManagerField(\n    {\n      items: items,\n      itemQuantity: defaultItemQuantity,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function refreshNotificationScheduleManager() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  notifcationScheduleManagerRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  notifcationScheduleManagerRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  notifcationScheduleManagerRefreshTimer_refreshing = true;\n  notifcationScheduleManagerRefreshTimer_currentRequestID = generateIdentifier();\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'true');\n  NotificationScheduleManagerUpdateTimerElement.classList.remove('css_notification_schedule_manager_update_timer_slide_rtl');\n  document.addEventListener(notifcationScheduleManagerRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n  updateNotificationScheduleManagerField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  notifcationScheduleManagerRefreshTimer_lastUpdate = new Date().getTime();\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = Math.max(notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_minInterval, integration.dataUpdateTime + notifcationScheduleManagerRefreshTimer_baseInterval / updateRate);\n  } else {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_baseInterval;\n  }\n  notifcationScheduleManagerRefreshTimer_dynamicInterval = Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - notifcationScheduleManagerRefreshTimer_lastUpdate);\n  notifcationScheduleManagerRefreshTimer_refreshing = false;\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nasync function streamNotificationScheduleManager() {\n  refreshNotificationScheduleManager()\n    .then(function () {\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        setTimeout(\n          function () {\n            streamNotificationScheduleManager();\n          },\n          Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        setTimeout(function () {\n          streamNotificationScheduleManager();\n        }, notifcationScheduleManagerRefreshTimer_retryInterval);\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openNotificationScheduleManager(): void {\n  pushPageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'true');\n  setUpNotificationScheduleManagerFieldSkeletonScreen();\n  if (!notifcationScheduleManagerRefreshTimer_streaming) {\n    notifcationScheduleManagerRefreshTimer_streaming = true;\n    if (!notifcationScheduleManagerRefreshTimer_streamStarted) {\n      notifcationScheduleManagerRefreshTimer_streamStarted = true;\n      streamNotificationScheduleManager();\n    } else {\n      refreshNotificationScheduleManager();\n    }\n  }\n  closePreviousPage();\n}\n\nexport function closeNotificationScheduleManager(): void {\n  // revokePageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'false');\n  notifcationScheduleManagerRefreshTimer_streaming = false;\n  openPreviousPage();\n}\n\nexport async function cancelNotificationOnNotificationScheduleManager(thisItemElement: HTMLElement, schedule_id: NotificationSchedule['schedule_id']) {\n  promptMessage('manufacturing', '處理中');\n  const cancellation = await cancelNotification(schedule_id);\n  if (cancellation) {\n    thisItemElement.remove();\n    promptMessage('check_circle', '已取消通知');\n    if (!notifcationScheduleManagerRefreshTimer_refreshing) {\n      const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n      const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n      updateNotificationScheduleManagerField(integration, false, playing_animation);\n    }\n  } else {\n    promptMessage('error', '取消失敗');\n  }\n}\n","import { getLocation, MergedLocation, MergedLocationItem } from '../../../data/apis/getLocation/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../../../data/apis/loader';\nimport { IntegratedLocationDetails, IntegratedLocationDetailsAction, integrateLocationDetails } from '../../../data/location/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier, hasOwnProperty } from '../../../tools/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { pushPageHistory, revokePageHistory } from '../../index';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nlet previousIntegration = {} as IntegratedLocationDetails;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst LocationDetailsField = documentQuerySelector('.css_location_details_field');\nconst LocationDetailsBodyElement = elementQuerySelector(LocationDetailsField, '.css_location_details_body');\nconst LocationDetailsActionsElement = elementQuerySelector(LocationDetailsBodyElement, '.css_location_details_actions');\n\nfunction generateElementOfItem(): HTMLElement {\n  const element = documentCreateDivElement();\n  element.classList.add('css_location_details_action');\n\n  // Icon\n  const icon = documentCreateDivElement();\n  icon.classList.add('css_location_details_action_icon');\n  icon.appendChild(getBlankIconElement());\n  element.appendChild(icon);\n\n  // Name\n  const name = documentCreateDivElement();\n  name.classList.add('css_location_details_action_name');\n  element.appendChild(name);\n\n  return element;\n}\n\nfunction updateLocationDetailsField(integration: IntegratedLocationDetails, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction, previousItem: IntegratedLocationDetailsAction | null): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_location_details_action_icon');\n      setIcon(thisIconElement, thisItem.icon);\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      const nameElement = elementQuerySelector(thisElement, '.css_location_details_action_name');\n      nameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: IntegratedLocationDetailsAction): void {\n      thisElement.onclick = thisItem.action;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateIcon(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (previousItem.key !== thisItem.key) {\n        updateIcon(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n      }\n\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const actions = integration.actions;\n  const actionsQuantity = integration.actionsQuantity;\n\n  const actionElements = Array.from(elementQuerySelectorAll(LocationDetailsActionsElement, '.css_location_details_action'));\n  const currentActionElementsLength = actionElements.length;\n  if (actionsQuantity !== currentActionElementsLength) {\n    const difference = currentActionElementsLength - actionsQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement);\n        actionElements.push(newItemElement);\n      }\n      LocationDetailsActionsElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentActionElementsLength - 1, q = currentActionElementsLength - difference - 1; p > q; p--) {\n        actionElements[p].remove();\n        actionElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < actionsQuantity; i++) {\n    const thisElement = actionElements[i];\n    const thisItem = actions[i];\n    if (hasOwnProperty(previousIntegration, 'actions')) {\n      if (previousIntegration.actions[i]) {\n        const previousItem = previousIntegration.actions[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpLocationDetailsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const actions: IntegratedLocationDetailsAction[] = [];\n  /*\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  */\n  const defaultActionsQuantity = 3;\n  for (let i = 0; i < defaultActionsQuantity; i++) {\n    actions.push({\n      name: '',\n      icon: '',\n      key: `action-${i}`,\n      action: function () {}\n    });\n  }\n\n  updateLocationDetailsField(\n    {\n      actions: actions,\n      actionsQuantity: defaultActionsQuantity,\n      hash: ''\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function initializeLocationDetailsField(hash: string) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  const integration = await integrateLocationDetails(hash, requestID);\n  updateLocationDetailsField(integration, false, playing_animation);\n}\n\nexport function openLocationDetails(hash: string): void {\n  pushPageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'true');\n  setUpLocationDetailsFieldSkeletonScreen();\n  initializeLocationDetailsField(hash);\n}\n\nexport function closeLocationDetails(): void {\n  revokePageHistory('LocationDetails');\n  LocationDetailsField.setAttribute('displayed', 'false');\n}\n\nexport async function shareLocationPermalink(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (hasOwnProperty(Location, thisLocationKey)) {\n    const thisLocation = Location[thisLocationKey] as MergedLocationItem;\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisLocation.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('check_circle', '已分享地點');\n        })\n        .catch((e) => {\n          promptMessage('cancel', '已取消分享');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showLocationPermalinkQRCode(hash: string) {\n  const requestID = generateIdentifier();\n  const Location = (await getLocation(requestID, 1)) as MergedLocation;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisLocationKey = `ml_${hash}`;\n  if (hasOwnProperty(Location, thisLocationKey)) {\n    const link = getPermalink(1, {\n      hash: hash\n    });\n    openQRCode(link);\n  }\n}\n","import { listPersonalSchedules, PersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { pushPageHistory, revokePageHistory } from '../index';\nimport { openPersonalScheduleEditor } from '../personal-schedule-editor/index';\n\nconst PersonalScheduleManagerField = documentQuerySelector('.css_personal_schedule_manager_field');\nconst PersonalScheduleManagerBodyElement = elementQuerySelector(PersonalScheduleManagerField, '.css_personal_schedule_manager_body');\nconst ListElement = elementQuerySelector(PersonalScheduleManagerBodyElement, '.css_personal_schedule_manager_list');\n\nfunction generateElementOfItem(item: PersonalSchedule): HTMLElement {\n  // Main item element\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_personal_schedule_manager_item');\n  itemElement.onclick = function () {\n    openPersonalScheduleEditor(item.id);\n  };\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_personal_schedule_manager_item_name');\n  nameElement.innerText = item.name;\n  itemElement.appendChild(nameElement);\n\n  // Arrow element\n  const arrowElement = documentCreateDivElement();\n  arrowElement.classList.add('css_personal_schedule_manager_item_arrow');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(iconElement);\n  itemElement.appendChild(arrowElement);\n\n  return itemElement;\n}\nasync function initializePersonalScheduleManagerField() {\n  ListElement.innerHTML = '';\n  const personalSchedules = await listPersonalSchedules();\n  const fragment = new DocumentFragment();\n  for (const item of personalSchedules) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement);\n  }\n  ListElement.append(fragment);\n}\n\nexport function openPersonalScheduleManager(): void {\n  pushPageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'true');\n  initializePersonalScheduleManagerField();\n}\n\nexport function closePersonalScheduleManager(): void {\n  revokePageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'false');\n}\n"],"names":["PersonalScheduleEditorField","documentQuerySelector","PersonalScheduleEditorBodyElement","elementQuerySelector","PersonalScheduleEditorHeadElement","leftButtonElement","PersonalScheduleEditorGroups","nameInputElement","startTimeInputElement","endTimeInputElement","dayGroupBodyElement","dayElements","elementQuerySelectorAll","saveEditedPersonalSchedule","_x","_saveEditedPersonalSchedule","apply","arguments","_asyncToGenerator","personalScheduleID","name","value","startTime","endTime","_String$split$map","String","split","map","e","parseInt","_String$split$map2","_slicedToArray","startHours","startMinutes","_String$split$map3","_String$split$map4","endHours","endMinutes","days","i","thisDayElement","highlighted","getAttribute","day","push","personalSchedule","getPersonalSchedule","period","start","hours","minutes","end","updatePersonalSchedule","promptMessage","closePersonalScheduleEditor","_initializePersonalScheduleEditorField","timeObjectToString","indexOf","setAttribute","onclick","openPersonalScheduleEditor","pushPageHistory","_x2","initializePersonalScheduleEditorField","closePreviousPage","openPreviousPage","switchPersonalScheduleEditorDay","QRCodeField","QRCodeBodyElement","openQRCode","text","svg","generateRoundedQRCodeSVG","innerHTML","initializeQRCodeField","closeQRCode","revokePageHistory","PersonalScheduleCreatorField","PersonalScheduleCreatorBodyElement","PersonalScheduleCreatorGroups","createFormulatedPersonalSchedule","createPersonalSchedule","then","closePersonalScheduleCreator","openPersonalScheduleCreator","switchPersonalScheduleCreatorDay","SplashScreenElement","ErrorMessageElement","splashScreenTimer_openTime","Date","getTime","pageHistory","page","pageHistoryLength","length","pop","closeFolderCreator","closeFolderEditor","closeFolderManager","closeSearch","closeSettings","closePersonalScheduleManager","closeBus","closeRegisterNotification","previousPage","openFolderCreator","openFolderEditor","openFolderManager","openSearch","openSettings","openPersonalScheduleManager","openBus","openRegisterNotification","setSplashScreenIconOffsetY","offset","isRunningStandalone","window","outerHeight","innerHeight","style","setProperty","fadeOutSplashScreen","callback","fadeOut","classList","add","addEventListener","remove","once","cureentTime","setTimeout","Math","max","showErrorMessage","querySize","type","width","height","windowWidth","innerWidth","windowHeight","scrollDocumentToTop","scrollTo","top","behavior","getIconElement","identifier","iconElement","document","createElement","innerText","getBlankIconElement","setIcon","parentElement","icon","message","button","allPromptElements","documentQuerySelectorAll","promptElement","playing_animation","getSettingOptionValue","documentCreateDivElement","booleanToString","promptIconElement","appendChild","promptMessageElement","_typeof","action","promptButtonElement","event","target","body","NotificationScheduleManagerField","NotificationScheduleManagerHeadElement","NotificationScheduleManagerUpdateTimerBoxElement","NotificationScheduleManagerUpdateTimerElement","NotificationScheduleManagerBody","NotificationScheduleList","previousIntegration","previousSkeletonScreen","notifcationScheduleManagerRefreshTimer_baseInterval","notifcationScheduleManagerRefreshTimer_minInterval","notifcationScheduleManagerRefreshTimer_dynamicInterval","notifcationScheduleManagerRefreshTimer_dynamic","notifcationScheduleManagerRefreshTimer_lastUpdate","notifcationScheduleManagerRefreshTimer_nextUpdate","notifcationScheduleManagerRefreshTimer_currentRequestID","notifcationScheduleManagerRefreshTimer_refreshing","notifcationScheduleManagerRefreshTimer_streaming","notifcationScheduleManagerRefreshTimer_streamStarted","handleDataReceivingProgressUpdates","CustomEvent","offsetRatio","detail","progress","toString","stage","removeEventListener","generateElementOfItem","itemElement","hoursElement","notificationScheduleElement","minutesElement","contextElement","mainElement","cancelElement","updateNotificationScheduleManagerField","integration","skeletonScreen","animation","updateItem","thisItemElement","thisItem","previousItem","updateHours","updateMinutes","thisItemNotificationScheduleElement","updateMain","updateContext","route","direction","updateCancel","_cancelNotificationOnNotificationScheduleManager","this","cancelNotificationOnNotificationScheduleManager","schedule_id","updateFirst","is_first","updateAnimation","updateSkeletonScreen","compareThings","itemQuantity","items","itemElements","Array","from","currentItemElementsLength","difference","fragment","DocumentFragment","o","newItemElement","append","p","q","splice","j","hasOwnProperty","refreshNotificationScheduleManager","_refreshNotificationScheduleManager","refresh_interval_setting","dynamic","baseInterval","generateIdentifier","integrateNotifcationSchedules","updateRate","getUpdateRate","dataUpdateTime","streamNotificationScheduleManager","_streamNotificationScheduleManager","err","openNotificationScheduleManager","WindowSize","FieldHeight","defaultItemQuantity","floor","stop_id","estimate_time","scheduled_time","id","pathAttributeId","date","setUpNotificationScheduleManagerFieldSkeletonScreen","closeNotificationScheduleManager","cancelNotification","previousAnimation","LocationDetailsField","LocationDetailsBodyElement","LocationDetailsActionsElement","element","updateLocationDetailsField","thisElement","updateIcon","thisIconElement","updateName","updateOnclick","key","actions","actionsQuantity","actionElements","currentActionElementsLength","_initializeLocationDetailsField","hash","requestID","integrateLocationDetails","openLocationDetails","setUpLocationDetailsFieldSkeletonScreen","initializeLocationDetailsField","closeLocationDetails","shareLocationPermalink","_shareLocationPermalink","Location","getLocation","deleteDataReceivingProgress","deleteDataUpdateTime","thisLocationKey","thisLocation","link","getPermalink","navigator","share","title","n","url","showLocationPermalinkQRCode","_x3","_showLocationPermalinkQRCode","PersonalScheduleManagerField","PersonalScheduleManagerBodyElement","ListElement","item","nameElement","arrowElement","_initializePersonalScheduleManagerField","personalSchedules","listPersonalSchedules","initializePersonalScheduleManagerField"],"ignoreList":[],"sourceRoot":""}