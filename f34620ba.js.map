{"version":3,"file":"f34620ba.js","mappings":"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","sources":["webpack://bus/./src/data/apis/index.ts","webpack://bus/./src/index.ts","webpack://bus/./src/data/bus/index.ts","webpack://bus/./src/data/apis/loader.ts"],"sourcesContent":["import { formatTime } from '../../tools/time';\nimport { BusData, BusDataItem } from './getBusData/index';\nimport { BusEvent, BusEventItem } from './getBusEvent/index';\nimport { SimplifiedRoute } from './getRoute/index';\n\nexport interface EstimateTimeStatus {\n  code: 0 | 0.5 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8; // 8: loading\n  text: string;\n  time: number;\n}\n\nexport function parseEstimateTime(EstimateTime: string, mode: number): EstimateTimeStatus {\n  if (typeof EstimateTime === 'string') {\n    const time = parseInt(EstimateTime);\n    if (time === -3) {\n      return { code: 6, text: '末班駛離', time };\n    }\n    if (time === -4) {\n      return { code: 5, text: '今日停駛', time };\n    }\n    if (time === -2) {\n      return { code: 4, text: '交通管制', time };\n    }\n    if (time === -1) {\n      return { code: 3, text: '未發車', time };\n    }\n    if (0 <= time && time <= 10) {\n      return { code: 2, text: '進站中', time };\n    }\n    if (10 < time && time <= 180) {\n      return { code: 1, text: formatTime(time, mode), time };\n    }\n    if (180 < time && time <= 250) {\n      return { code: 0.5, text: formatTime(time, mode), time };\n    }\n    if (250 < time) {\n      return { code: 0, text: formatTime(time, mode), time };\n    }\n  }\n  return { code: 7, text: '發生錯誤', time: -5 };\n}\n\nexport interface TimeMoment {\n  type: 'moment';\n  hours: number;\n  minutes: number;\n}\n\nexport interface TimeRange {\n  type: 'range';\n  min: number;\n  max: number;\n}\n\n/**\n * parseTimeCode\n * @param code 0: hhmm/mm, 1: mmMM/mm\n * @param mode 0: moment, 1: range\n * @returns 0: TimeMoment, 1: TimeRange\n */\n\nexport function parseTimeCode(code: string, mode: 0 | 1): TimeMoment | TimeRange {\n  const codeLength = code.length;\n  if (mode === 0) {\n    let hours = 0;\n    let minutes = 0;\n    if (codeLength === 4) {\n      hours = parseInt(code.substring(0, 2));\n      minutes = parseInt(code.substring(2, 4));\n    }\n    if (codeLength === 2) {\n      minutes = parseInt(code);\n    }\n    return {\n      type: 'moment',\n      hours: hours,\n      minutes: minutes\n    };\n  }\n  if (mode === 1) {\n    let min = 0;\n    let max = 0;\n    if (codeLength === 4) {\n      const number1 = parseInt(code.substring(0, 2));\n      const number2 = parseInt(code.substring(2, 4));\n      min = Math.min(number1, number2);\n      max = Math.max(number1, number2);\n    }\n    if (codeLength === 2) {\n      const number = parseInt(code);\n      min = number;\n      max = number;\n    }\n    return {\n      type: 'range',\n      min: min,\n      max: max\n    };\n  }\n}\n\nexport interface BatchFoundBusPosition {\n  longitude: number;\n  latitude: number;\n}\n\nexport interface BatchFoundBus {\n  CarType: BusEventItem['CarType'];\n  BusStatus: BusEventItem['BusStatus'];\n  BusID: string;\n  CarOnStop: BusEventItem['CarOnStop'];\n  onThisRoute: boolean;\n  position: BatchFoundBusPosition;\n  RouteName: string;\n  RouteID: number;\n  index: number;\n}\n\nexport type BatchFoundBuses = { [key: string]: Array<BatchFoundBus> };\n\nexport function batchFindBusesForRoute(BusEvent: BusEvent, BusData: BusData, Route: SimplifiedRoute, RouteID: number, PathAttributeId: Array<number>): BatchFoundBuses {\n  const result = {} as BatchFoundBuses;\n  const BusDataObj: {\n    [key: string]: BusDataItem;\n  } = {};\n  for (const BusDataItem of BusData) {\n    const thisBusID = BusDataItem.BusID;\n    BusDataObj[thisBusID] = BusDataItem;\n  }\n\n  for (const BusEventItem of BusEvent) {\n    const processedItem = {} as BatchFoundBus;\n\n    // collect data from 'BusEvent'\n    processedItem.CarType = BusEventItem.CarType;\n    processedItem.BusStatus = BusEventItem.BusStatus;\n    processedItem.BusID = BusEventItem.BusID;\n    processedItem.CarOnStop = BusEventItem.CarOnStop;\n\n    // check whether this bus is on the route\n    const thisRouteID = parseInt(BusEventItem.RouteID);\n    const thisBusID = String(BusEventItem.BusID);\n    let isOnThisRoute: boolean = false;\n    let index: number = 0;\n    if (thisRouteID === RouteID || PathAttributeId.indexOf(thisRouteID) > -1 || thisRouteID === RouteID * 10) {\n      isOnThisRoute = true;\n      index = thisBusID.charCodeAt(0) * Math.pow(10, -5);\n    } else {\n      isOnThisRoute = false;\n      index = thisBusID.charCodeAt(0);\n    }\n    processedItem.onThisRoute = isOnThisRoute;\n    processedItem.index = index;\n\n    // collect data from 'BusData'\n    let thisBusData = {} as BusDataItem;\n    if (BusDataObj.hasOwnProperty(thisBusID)) {\n      thisBusData = BusDataObj[thisBusID];\n    } else {\n      continue;\n    }\n    processedItem.position = {\n      latitude: parseFloat(thisBusData.Latitude),\n      longitude: parseFloat(thisBusData.Longitude)\n    };\n\n    // search data from 'Route'\n    let searchedRoute = {};\n    let isRouteSearched = false;\n    for (const key in Route) {\n      const thisRouteItem = Route[key];\n      const pid = thisRouteItem.pid;\n      if (pid.indexOf(thisRouteID) > -1) {\n        searchedRoute = thisRouteItem;\n        isRouteSearched = true;\n        break;\n      }\n    }\n    processedItem.RouteName = isRouteSearched ? searchedRoute.n : '未知路線';\n    processedItem.RouteID = isRouteSearched ? searchedRoute.id : null;\n\n    const StopKey = `s_${BusEventItem.StopID}`;\n    if (!result.hasOwnProperty(StopKey)) {\n      result[StopKey] = [];\n    }\n    result[StopKey].push(processedItem);\n    // Handle multiple buses (of the same route) on a stop\n  }\n  return result;\n}\n\nexport function batchFindBusesForLocation(BusEvent: BusEvent, BusData: BusData, Route: SimplifiedRoute, StopIDList: Array<number>): BatchFoundBuses {\n  const result = {} as BatchFoundBuses;\n  const BusDataObj: {\n    [BusID: string]: BusDataItem;\n  } = {};\n  for (const BusDataItem of BusData) {\n    const thisBusID = BusDataItem.BusID;\n    BusDataObj[thisBusID] = BusDataItem;\n  }\n\n  for (const BusEventItem of BusEvent) {\n    const processedItem = {} as BatchFoundBus;\n\n    const thisStopID = parseInt(BusEventItem.StopID);\n    const thisRouteID = parseInt(BusEventItem.RouteID);\n    const thisBusID = String(BusEventItem.BusID);\n\n    // Check whether this bus is on one of the specified stops\n    if (StopIDList.indexOf(thisStopID) < 0) {\n      continue;\n    }\n\n    processedItem.index = thisBusID.charCodeAt(0);\n    processedItem.onThisRoute = true; // Every entry in Location is stop-route pair\n\n    // Collect data from 'BusEvent'\n    processedItem.CarType = BusEventItem.CarType;\n    processedItem.BusStatus = BusEventItem.BusStatus;\n    processedItem.BusID = BusEventItem.BusID;\n    processedItem.CarOnStop = BusEventItem.CarOnStop;\n\n    // Collect data from 'BusData'\n    let thisBusData = {} as BusDataItem;\n    if (BusDataObj.hasOwnProperty(thisBusID)) {\n      thisBusData = BusDataObj[thisBusID];\n    } else {\n      continue;\n    }\n    processedItem.position = {\n      latitude: parseFloat(thisBusData.Latitude),\n      longitude: parseFloat(thisBusData.Longitude)\n    };\n\n    // Search data from 'Route'\n    let searchedRoute = {};\n    let isRouteSearched = false;\n    for (const key in Route) {\n      const thisRouteItem = Route[key];\n      const pid = thisRouteItem.pid;\n      if (pid.indexOf(thisRouteID) > -1) {\n        searchedRoute = thisRouteItem;\n        isRouteSearched = true;\n        break;\n      }\n    }\n    processedItem.RouteName = isRouteSearched ? searchedRoute.n : '未知路線';\n    processedItem.RouteID = isRouteSearched ? searchedRoute.id : null;\n\n    const StopKey = `s_${thisStopID}`;\n    if (!result.hasOwnProperty(StopKey)) {\n      result[StopKey] = [];\n    }\n    result[StopKey].push(processedItem);\n  }\n  return result;\n}\n\ninterface FormattedBusStatus {\n  onStop: boolean;\n  situation: string;\n  text: string;\n}\n\ninterface FormattedBusPosition {\n  longitude: number;\n  latitude: number;\n}\n\nexport function parseCarType(CarType: '0' | '1' | '2' | '3'): '一般' | '低底盤' | '大復康巴士' | '狗狗友善專車' | '未知類型' {\n  let type = '';\n  switch (CarType) {\n    case '0':\n      type = '一般';\n      break;\n    case '1':\n      type = '低底盤';\n      break;\n    case '2':\n      type = '大復康巴士';\n      break;\n    case '3':\n      type = '狗狗友善專車';\n      break;\n    default:\n      type = '未知類型';\n  }\n  return type;\n}\n\nexport function parseCarOnStop(CarOnStop: '0' | '1'): string {\n  let onStop = '';\n  switch (CarOnStop) {\n    case '0':\n      onStop = '離站';\n      break;\n    case '1':\n      onStop = '進站';\n      break;\n    default:\n      onStop = '未知狀態'; // Handle unexpected values if necessary\n  }\n  return onStop;\n}\n\nexport function parseBusStatus(BusStatus: '0' | '1' | '2' | '3' | '4' | '5' | '99'): string {\n  let situation = '';\n  switch (BusStatus) {\n    case '0':\n      situation = '正常';\n      break;\n    case '1':\n      situation = '車禍';\n      break;\n    case '2':\n      situation = '故障';\n      break;\n    case '3':\n      situation = '塞車';\n      break;\n    case '4':\n      situation = '緊急求援';\n      break;\n    case '5':\n      situation = '加油';\n      break;\n    case '99':\n      situation = '非營運狀態';\n      break;\n    default:\n      situation = '未知狀態'; // Handle unexpected values if necessary\n  }\n  return situation;\n}\n\nexport interface FormattedBus {\n  type: '一般' | '低底盤' | '大復康巴士' | '狗狗友善專車' | '未知類型';\n  carNumber: string;\n  status: FormattedBusStatus;\n  RouteName: string;\n  onThisRoute: boolean;\n  index: number;\n  position: FormattedBusPosition;\n}\n\nexport function formatBus(batchFoundBus: BatchFoundBus): FormattedBus {\n  const result = {} as FormattedBus;\n\n  const CarType = batchFoundBus.CarType;\n  const type = parseCarType(CarType);\n  result.type = type;\n\n  const CarOnStop = batchFoundBus.CarOnStop;\n  const onStop = parseCarOnStop(CarOnStop);\n\n  const BusStatus = batchFoundBus.BusStatus;\n  const situation = parseBusStatus(BusStatus);\n\n  result.carNumber = batchFoundBus.BusID;\n  result.status = {\n    onStop: onStop,\n    situation: situation,\n    text: `${onStop} | ${situation}`\n  };\n  result.RouteName = batchFoundBus.RouteName;\n  result.onThisRoute = batchFoundBus.onThisRoute;\n  result.index = batchFoundBus.index;\n  result.position = batchFoundBus.position;\n  return result;\n}\n","import { recoverBusArrivalTimeDataFromWriteAheadLog } from './data/analytics/bus-arrival-time/index';\r\nimport { discardExpiredDataUsageStats } from './data/analytics/data-usage/index';\r\nimport { discardExpiredUpdateRateDataGroups, initializeUpdateRateDataGroups, recoverUpdateRateDataFromWriteAheadLog } from './data/analytics/update-rate/index';\r\nimport { initializeFolderList } from './data/folder/index';\r\nimport { discardExpiredNotificationSchedules, initializeNotificationSchedules, loadNotificationClient } from './data/notification/index';\r\nimport { discardExpiredRecentViews } from './data/recent-views/index';\r\nimport { initializeSettings } from './data/settings/index';\r\nimport { checkAppVersion } from './data/settings/version';\r\nimport { askForCalibratingPermission } from './data/user-orientation/index';\r\nimport { askForPositioningPermission } from './data/user-position/index';\r\nimport { closeBus, openBus } from './interface/bus/index';\r\nimport { closeDataUsage } from './interface/data-usage/index';\r\nimport { closeFolderCreator, createFormulatedFolder, openFolderCreator } from './interface/folder-creator/index';\r\nimport { closeFolderEditor, saveEditedFolder } from './interface/folder-editor/index';\r\nimport { closeFolderIconSelector, openFolderIconSelector, updateMaterialSymbolsSearchResult } from './interface/folder-icon-selector/index';\r\nimport { closeFolderManager } from './interface/folder-manager/index';\r\nimport { initializeFolders, setUpFolderFieldSkeletonScreen } from './interface/home/folders/index';\r\nimport { downloadData } from './interface/home/index';\r\nimport { initializeRecentViews, setUpRecentViewsFieldSkeletonScreen } from './interface/home/recent-views/index';\r\nimport { fadeOutSplashScreen, setSplashScreenIconOffsetY, showErrorMessage } from './interface/index';\r\nimport { closeLocationDetails } from './interface/location/details/index';\r\nimport { closeLocation, initializeLocationSliding, openLocation } from './interface/location/index';\r\nimport { cancelNotificationOnNotificationScheduleManager, closeNotificationScheduleManager, openNotificationScheduleManager } from './interface/notification-schedule-manager/index';\r\nimport { closePersonalScheduleCreator, createFormulatedPersonalSchedule, openPersonalScheduleCreator, switchPersonalScheduleCreatorDay } from './interface/personal-schedule-creator/index';\r\nimport { closePersonalScheduleEditor, openPersonalScheduleEditor, saveEditedPersonalSchedule, switchPersonalScheduleEditorDay } from './interface/personal-schedule-editor/index';\r\nimport { closePersonalScheduleManager } from './interface/personal-schedule-manager/index';\r\nimport { closeQRCode, openQRCode } from './interface/qrcode/index';\r\nimport { closeRegisterNotification, openRegisterNotification, saveFormulatedRegisterNotification } from './interface/register-notification/index';\r\nimport { closeRouteDetails } from './interface/route/details/index';\r\nimport { closeRoute, initializeRouteSliding, switchRoute } from './interface/route/index';\r\nimport { closeSaveToFolder, openSaveToFolder } from './interface/save-to-folder/index';\r\nimport { closeScheduleNotification, openScheduleNotification, scheduleNotificationForStopItemOnLocation, scheduleNotificationForStopItemOnRoute } from './interface/schedule-notification/index';\r\nimport { closeSearch, openSearch, resizeSearchInputCanvas, switchSearchTypeFilter, updateSearchInput, updateSearchResult } from './interface/search/index';\r\nimport { closeSettings, downloadExportFile, openFileToImportData, openSettings, showPromptToAskForPersistentStorage, viewCommitOfCurrentVersion } from './interface/settings/index';\r\nimport { closeSettingsOptions, openSettingsOptions, settingsOptionsHandler } from './interface/settings/options';\r\nimport { closeStorage } from './interface/storage/index';\r\nimport { openPermalink } from './tools/permalink';\r\nimport { documentQuerySelector } from './tools/elements';\r\n\r\nimport './interface/theme.css';\r\n\r\nimport './interface/index.css';\r\n\r\nimport './interface/icons/index.css';\r\n\r\nimport './interface/animation.css';\r\n\r\nimport './interface/home/field.css';\r\nimport './interface/home/head.css';\r\nimport './interface/home/body.css';\r\n\r\nimport './interface/home/recent-views/recent-views.css';\r\nimport './interface/home/recent-views/item.css';\r\n\r\nimport './interface/home/folders/folders.css';\r\nimport './interface/home/folders/item.css';\r\n\r\nimport './interface/search/field.css';\r\nimport './interface/search/head.css';\r\nimport './interface/search/body.css';\r\nimport './interface/search/keyboard.css';\r\n\r\nimport './interface/route/field.css';\r\nimport './interface/route/head.css';\r\nimport './interface/route/groups.css';\r\nimport './interface/route/item.css';\r\nimport './interface/route/thread.css';\r\nimport './interface/route/index.css';\r\n\r\nimport './interface/route/details/field.css';\r\nimport './interface/route/details/head.css';\r\nimport './interface/route/details/body.css';\r\nimport './interface/route/details/groups.css';\r\nimport './interface/route/details/actions.css';\r\nimport './interface/route/details/properties.css';\r\nimport './interface/route/details/calendar.css';\r\n\r\nimport './interface/location/field.css';\r\nimport './interface/location/head.css';\r\nimport './interface/location/groups.css';\r\nimport './interface/location/group-details.css';\r\nimport './interface/location/group-items.css';\r\nimport './interface/location/index.css';\r\n\r\nimport './interface/location/details/field.css';\r\nimport './interface/location/details/head.css';\r\nimport './interface/location/details/body.css';\r\nimport './interface/location/details/actions.css';\r\nimport './interface/location/details/index.css';\r\n\r\nimport './interface/bus/field.css';\r\nimport './interface/bus/head.css';\r\nimport './interface/bus/body.css';\r\nimport './interface/bus/groups.css';\r\nimport './interface/bus/properties.css';\r\n\r\nimport './interface/settings/field.css';\r\nimport './interface/settings/head.css';\r\nimport './interface/settings/body.css';\r\nimport './interface/settings/items.css';\r\nimport './interface/settings/index.css';\r\n\r\nimport './interface/save-to-folder/field.css';\r\nimport './interface/save-to-folder/head.css';\r\nimport './interface/save-to-folder/body.css';\r\nimport './interface/save-to-folder/list.css';\r\nimport './interface/save-to-folder/item.css';\r\n\r\nimport './interface/folder-manager/field.css';\r\nimport './interface/folder-manager/head.css';\r\nimport './interface/folder-manager/body.css';\r\nimport './interface/folder-manager/list.css';\r\nimport './interface/folder-manager/item.css';\r\n\r\nimport './interface/folder-editor/field.css';\r\nimport './interface/folder-editor/head.css';\r\nimport './interface/folder-editor/body.css';\r\nimport './interface/folder-editor/groups.css';\r\nimport './interface/folder-editor/folder-name.css';\r\nimport './interface/folder-editor/folder-icon.css';\r\nimport './interface/folder-editor/folder-content.css';\r\n\r\nimport './interface/folder-creator/field.css';\r\nimport './interface/folder-creator/head.css';\r\nimport './interface/folder-creator/body.css';\r\nimport './interface/folder-creator/groups.css';\r\nimport './interface/folder-creator/folder-name.css';\r\nimport './interface/folder-creator/folder-icon.css';\r\n\r\nimport './interface/folder-icon-selector/field.css';\r\nimport './interface/folder-icon-selector/head.css';\r\nimport './interface/folder-icon-selector/body.css';\r\nimport './interface/folder-icon-selector/symbols.css';\r\n\r\nimport './interface/personal-schedule-manager/field.css';\r\nimport './interface/personal-schedule-manager/head.css';\r\nimport './interface/personal-schedule-manager/body.css';\r\nimport './interface/personal-schedule-manager/list.css';\r\nimport './interface/personal-schedule-manager/item.css';\r\n\r\nimport './interface/personal-schedule-creator/field.css';\r\nimport './interface/personal-schedule-creator/head.css';\r\nimport './interface/personal-schedule-creator/body.css';\r\nimport './interface/personal-schedule-creator/groups.css';\r\nimport './interface/personal-schedule-creator/schedule-name.css';\r\nimport './interface/personal-schedule-creator/schedule-start-time.css';\r\nimport './interface/personal-schedule-creator/schedule-end-time.css';\r\nimport './interface/personal-schedule-creator/schedule-days.css';\r\n\r\nimport './interface/personal-schedule-editor/field.css';\r\nimport './interface/personal-schedule-editor/head.css';\r\nimport './interface/personal-schedule-editor/body.css';\r\nimport './interface/personal-schedule-editor/groups.css';\r\nimport './interface/personal-schedule-editor/schedule-name.css';\r\nimport './interface/personal-schedule-editor/schedule-start-time.css';\r\nimport './interface/personal-schedule-editor/schedule-end-time.css';\r\nimport './interface/personal-schedule-editor/schedule-days.css';\r\n\r\nimport './interface/notification-schedule-manager/field.css';\r\nimport './interface/notification-schedule-manager/head.css';\r\nimport './interface/notification-schedule-manager/body.css';\r\nimport './interface/notification-schedule-manager/list.css';\r\nimport './interface/notification-schedule-manager/item.css';\r\n\r\nimport './interface/register-notification/field.css';\r\nimport './interface/register-notification/head.css';\r\nimport './interface/register-notification/body.css';\r\nimport './interface/register-notification/groups.css';\r\nimport './interface/register-notification/provider.css';\r\nimport './interface/register-notification/registration-key.css';\r\n\r\nimport './interface/schedule-notification/field.css';\r\nimport './interface/schedule-notification/head.css';\r\nimport './interface/schedule-notification/body.css';\r\nimport './interface/schedule-notification/list.css';\r\nimport './interface/schedule-notification/item.css';\r\n\r\nimport './interface/data-usage/field.css';\r\nimport './interface/data-usage/head.css';\r\nimport './interface/data-usage/body.css';\r\nimport './interface/data-usage/chart.css';\r\nimport './interface/data-usage/statistics.css';\r\n\r\nimport './interface/storage/field.css';\r\nimport './interface/storage/head.css';\r\nimport './interface/storage/body.css';\r\nimport './interface/storage/statistics.css';\r\nimport './interface/storage/index.css';\r\n\r\nimport './interface/qrcode/field.css';\r\nimport './interface/qrcode/head.css';\r\nimport './interface/qrcode/body.css';\r\nimport './interface/qrcode/qrcode.css';\r\n\r\nimport './interface/prompt/index.css';\r\n\r\nlet busInitialized = false;\r\nlet busSecondlyInitialized = false;\r\n\r\nwindow.bus = {\r\n  initialize: function () {\r\n    if (busInitialized === false) {\r\n      busInitialized = true;\r\n      setSplashScreenIconOffsetY();\r\n      initializeSettings().then(function () {\r\n        setUpRecentViewsFieldSkeletonScreen();\r\n        setUpFolderFieldSkeletonScreen();\r\n        checkAppVersion()\r\n          .then((status) => {\r\n            if (status === 'ok') {\r\n              initializeRouteSliding();\r\n              initializeLocationSliding();\r\n              resizeSearchInputCanvas();\r\n              window.addEventListener('resize', () => {\r\n                resizeSearchInputCanvas();\r\n              });\r\n              if (screen) {\r\n                if (screen.orientation) {\r\n                  screen.orientation.addEventListener('change', () => {\r\n                    resizeSearchInputCanvas();\r\n                  });\r\n                }\r\n              }\r\n              initializeRecentViews();\r\n              initializeFolderList().then(() => {\r\n                initializeFolders();\r\n              });\r\n              const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n              const searchInputElement = documentQuerySelector('.css_search_field .css_search_head .css_search_search_input #search_input') as HTMLInputElement;\r\n              mediaQuery.addEventListener('change', function () {\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('paste', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('cut', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('selectionchange', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              document.addEventListener('selectionchange', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('keyup', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n\r\n              const searchMaterialSymbolsInputElement = documentQuerySelector('.css_folder_icon_selector_field .css_folder_icon_selector_head .css_folder_icon_selector_search_input #search_material_symbols_input') as HTMLInputElement;\r\n              searchMaterialSymbolsInputElement.addEventListener('paste', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              searchMaterialSymbolsInputElement.addEventListener('cut', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              searchMaterialSymbolsInputElement.addEventListener('selectionchange', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              document.addEventListener('selectionchange', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              searchMaterialSymbolsInputElement.addEventListener('keyup', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              openPermalink();\r\n              fadeOutSplashScreen(function () {\r\n                loadNotificationClient();\r\n                initializeNotificationSchedules().then(function () {\r\n                  discardExpiredNotificationSchedules();\r\n                });\r\n                document.addEventListener(\r\n                  'click',\r\n                  function () {\r\n                    askForPositioningPermission();\r\n                    askForCalibratingPermission();\r\n                  },\r\n                  { once: true }\r\n                );\r\n              });\r\n            }\r\n            if (status === 'fetchError' || status === 'unknownError') {\r\n              showErrorMessage();\r\n              fadeOutSplashScreen();\r\n            }\r\n          })\r\n          .catch(() => {\r\n            showErrorMessage();\r\n            fadeOutSplashScreen();\r\n          });\r\n      });\r\n    }\r\n  },\r\n  secondlyInitialize: function () {\r\n    if (!busSecondlyInitialized) {\r\n      busSecondlyInitialized = true;\r\n      downloadData();\r\n      discardExpiredUpdateRateDataGroups();\r\n      discardExpiredDataUsageStats();\r\n      recoverBusArrivalTimeDataFromWriteAheadLog();\r\n      discardExpiredRecentViews();\r\n      discardExpiredUpdateRateDataGroups().then(function () {\r\n        initializeUpdateRateDataGroups().then(function () {\r\n          recoverUpdateRateDataFromWriteAheadLog();\r\n        });\r\n      });\r\n    }\r\n  },\r\n  route: {\r\n    closeRoute,\r\n    switchRoute,\r\n    closeRouteDetails\r\n  },\r\n  location: {\r\n    openLocation,\r\n    closeLocation,\r\n    closeLocationDetails\r\n  },\r\n  folder: {\r\n    openSaveToFolder,\r\n    closeSaveToFolder,\r\n    closeFolderManager,\r\n    closeFolderEditor,\r\n    openFolderIconSelector,\r\n    closeFolderIconSelector,\r\n    openFolderCreator,\r\n    closeFolderCreator,\r\n    createFormulatedFolder,\r\n    saveEditedFolder\r\n  },\r\n  search: {\r\n    openSearch,\r\n    closeSearch,\r\n    switchSearchTypeFilter\r\n  },\r\n  storage: {\r\n    closeStorage\r\n  },\r\n  dataUsage: {\r\n    closeDataUsage\r\n  },\r\n  personalSchedule: {\r\n    closePersonalScheduleManager,\r\n    openPersonalScheduleCreator,\r\n    closePersonalScheduleCreator,\r\n    createFormulatedPersonalSchedule,\r\n    switchPersonalScheduleCreatorDay,\r\n    openPersonalScheduleEditor,\r\n    closePersonalScheduleEditor,\r\n    switchPersonalScheduleEditorDay,\r\n    saveEditedPersonalSchedule\r\n  },\r\n  settings: {\r\n    openSettings,\r\n    closeSettings,\r\n    openSettingsOptions,\r\n    closeSettingsOptions,\r\n    settingsOptionsHandler,\r\n    downloadExportFile,\r\n    openFileToImportData,\r\n    viewCommitOfCurrentVersion,\r\n    showPromptToAskForPersistentStorage\r\n  },\r\n  bus: {\r\n    openBus,\r\n    closeBus\r\n  },\r\n  notification: {\r\n    openNotificationScheduleManager,\r\n    closeNotificationScheduleManager,\r\n    openRegisterNotification,\r\n    closeRegisterNotification,\r\n    saveFormulatedRegisterNotification,\r\n    openScheduleNotification,\r\n    closeScheduleNotification,\r\n    scheduleNotificationForStopItemOnRoute,\r\n    scheduleNotificationForStopItemOnLocation,\r\n    cancelNotificationOnNotificationScheduleManager\r\n  },\r\n  qrcode: {\r\n    openQRCode,\r\n    closeQRCode\r\n  }\r\n};\r\n\r\nexport default window.bus;\r\n","import { MaterialSymbols } from '../../interface/icons/material-symbols-type';\nimport { getBusData } from '../apis/getBusData/index';\nimport { getBusEvent } from '../apis/getBusEvent/index';\nimport { CarInfoItem, getCarInfo } from '../apis/getCarInfo/index';\nimport { getLocation, SimplifiedLocation } from '../apis/getLocation/index';\nimport { getStop } from '../apis/getStop/index';\nimport { parseBusStatus, parseCarOnStop, parseCarType } from '../apis/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../apis/loader';\nimport { searchRouteByPathAttributeId } from '../search/index';\n\nexport interface integratedBus {\n  properties: Array<{\n    key: string;\n    icon: MaterialSymbols;\n    value: string;\n  }>;\n  RouteID: number;\n  FullPathAttributeId: Array<number>;\n}\n\nexport async function integrateBus(id: CarInfoItem['BusId'], requestID: string): Promise<integratedBus> {\n  const carKey = `c_${id}`;\n  const CarInfo = await getCarInfo(requestID, true);\n  const BusData = await getBusData(requestID);\n  const BusEvent = await getBusEvent(requestID);\n  const Stop = await getStop(requestID);\n  const Location = (await getLocation(requestID, 0)) as SimplifiedLocation;\n\n  let result: integratedBus = {\n    properties: [],\n    LocationName: ''\n  };\n\n  // Collect data from CarInfo\n  let thisCar = {};\n  if (CarInfo.hasOwnProperty(carKey)) {\n    thisCar = CarInfo[carKey];\n  } else {\n    return result;\n  }\n\n  const thisCarNumber = thisCar.CarNum;\n  result.properties.push({\n    key: 'car_number',\n    icon: 'tag',\n    value: thisCarNumber\n  });\n\n  const thisCarType = thisCar.CarType;\n  const type = parseCarType(thisCarType);\n  result.properties.push({\n    key: 'car_type',\n    icon: 'directions_bus',\n    value: type\n  });\n\n  // Collect data from BusData\n  let thisBusDataItem = {};\n  for (const BusDataItem of BusData) {\n    const thisBusDataItemBusID = BusDataItem.BusID;\n    if (thisBusDataItemBusID === thisCarNumber) {\n      thisBusDataItem = BusDataItem;\n      break;\n    }\n  }\n  const thisBusDataItemPathAttributeId = parseInt(thisBusDataItem.RouteID);\n  // result.PathAttributeId = thisBusDataItemPathAttributeId;\n  const thisBusDataItemBusStatus = thisBusDataItem.BusStatus;\n  const situation = parseBusStatus(thisBusDataItemBusStatus);\n  const thisBusDataItemGoBack = parseInt(thisBusDataItem.GoBack);\n\n  // Collect data from BusEvent\n  let thisBusEventItem = {};\n  for (const BusEventItem of BusEvent) {\n    const thisBusEventItemBusID = BusEventItem.BusID;\n    if (thisBusEventItemBusID === thisCarNumber) {\n      thisBusEventItem = BusEventItem;\n      break;\n    }\n  }\n\n  const thisBusEventItemCarOnStop = thisBusEventItem.CarOnStop;\n  const onStop = parseCarOnStop(thisBusEventItemCarOnStop);\n  result.properties.push({\n    key: 'status',\n    icon: 'vital_signs',\n    value: `${onStop} | ${situation}`\n  });\n  const thisBusEventItemStopID = thisBusEventItem.StopID;\n\n  // Search routes\n  const searchedRoutes = await searchRouteByPathAttributeId(thisBusDataItemPathAttributeId);\n  let searchedRoute = {};\n  if (searchedRoutes.length > 0) {\n    searchedRoute = searchedRoutes[0];\n  } else {\n    return result;\n  }\n  const thisRouteID = searchedRoute.id;\n  const thisRouteFullPathAttributeId = searchedRoute.pid;\n  const thisRouteName = searchedRoute.n;\n  const thisRouteDeparture = searchedRoute.dep;\n  const thisRouteDestination = searchedRoute.des;\n  const thisRouteDirection = [thisRouteDestination, thisRouteDeparture, ''][thisBusDataItemGoBack ? thisBusDataItemGoBack : 0];\n  result.properties.push({\n    key: 'route',\n    icon: 'route',\n    value: `${thisRouteName} - 往${thisRouteDirection}`\n  });\n\n  result.RouteID = thisRouteID;\n  result.FullPathAttributeId = thisRouteFullPathAttributeId;\n\n  // Collect data from Stop\n  const StopKey = `s_${thisBusEventItemStopID}`;\n  let thisStopItem = {};\n  if (Stop.hasOwnProperty(StopKey)) {\n    thisStopItem = Stop[StopKey];\n  } else {\n    return result;\n  }\n  const thisStopItemStopLocationId = thisStopItem.stopLocationId;\n\n  // Collect data drom Location\n  const LocationKey = `l_${thisStopItemStopLocationId}`;\n  const thisLocationItem = Location[LocationKey];\n  const thisLocationItemName = thisLocationItem.n;\n  result.properties.push({\n    key: 'location_name',\n    icon: 'location_on',\n    value: thisLocationItemName\n  });\n\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  return result;\n}\n","import { pakoInflate } from '../../tools/pako-inflate/index';\nimport { timeStampToNumber } from '../../tools/time';\nimport { recordDataUsage } from '../analytics/data-usage/index';\n\ntype FetchTaskRequest = [resolve: Function, reject: Function, requestID: string, tag: string];\n\ninterface FetchTask {\n  processing: boolean;\n  requests: Array<FetchTaskRequest>;\n  failed: boolean;\n  timestamp: number;\n  result: any;\n}\n\ntype FetchTasks = { [url: string]: FetchTask };\n\nconst tasks: FetchTasks = {};\n\nconst TTL = 30000;\nconst FetchError = new Error('FetchError');\n\nexport async function fetchData(url: string, requestID: string, tag: string, fileType: 'json' | 'xml'): Promise<object> {\n  // Check concurrency\n  if (tasks.hasOwnProperty(url)) {\n    if (tasks[url].processing) {\n      return await new Promise((resolve, reject) => {\n        tasks[url].requests.push([resolve, reject, requestID, tag]);\n      });\n    } else if (tasks[url].result !== null && new Date().getTime() <= tasks[url].timestamp) {\n      setDataReceivingProgress(requestID, tag, 0, true);\n      return tasks[url].result;\n    }\n  } else {\n    tasks[url] = {\n      processing: true,\n      requests: [],\n      failed: false,\n      timestamp: -1,\n      result: null\n    };\n  }\n\n  // Fetch data\n  const response = await fetch(url);\n  if (!response.ok) {\n    setDataReceivingProgress(requestID, tag, 0, true);\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  // Read chunks\n  const contentLength = parseInt(String(response.headers.get('content-length')));\n  const reader = response.body.getReader();\n  const chunks = [];\n  let receivedLength = 0;\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) {\n      break;\n    }\n    chunks.push(value);\n    receivedLength += value.length;\n    const progress = receivedLength / contentLength;\n    setDataReceivingProgress(requestID, tag, progress, false);\n    if (tasks.hasOwnProperty(url)) {\n      for (const request of tasks[url].requests) {\n        setDataReceivingProgress(request[2], request[3], progress, false);\n      }\n    }\n  }\n\n  // Concatenate all the chunks into a single Uint8Array\n  const uint8Array = new Uint8Array(receivedLength);\n  let position = 0;\n  for (const chunk of chunks) {\n    uint8Array.set(chunk, position);\n    position += chunk.length;\n  }\n\n  // Create a blob from the concatenated Uint8Array\n  const blob = new Blob([uint8Array], { type: 'application/gzip' });\n  const arrayBuffer = await blob.arrayBuffer();\n  const inflatedData = await pakoInflate(arrayBuffer);\n\n  let result;\n  switch (fileType) {\n    case 'json':\n      if (/^<!doctype html>/.test(inflatedData)) {\n        result = await fetchData(url.replace('https://tcgbusfs.blob.core.windows.net/', 'https://erichsia7.github.io/bus-alternative-static-apis/'), requestID, tag, fileType);\n      } else {\n        result = JSON.parse(inflatedData);\n      }\n      break;\n    case 'xml':\n      result = inflatedData;\n      break;\n    default:\n      break;\n  }\n\n  // Record data usage\n  const now = new Date();\n  await recordDataUsage(contentLength, now);\n\n  if (result) {\n    // Resolve promises\n    if (tasks.hasOwnProperty(url)) {\n      const progress = receivedLength / contentLength;\n      let request = tasks[url].requests.shift();\n      while (request) {\n        request[0](result);\n        setDataReceivingProgress(request[2], request[3], progress, false);\n        request = tasks[url].requests.shift();\n      }\n      tasks[url].result = result;\n      tasks[url].timestamp = now.getTime() + TTL;\n      tasks[url].processing = false;\n    }\n    discardExpiredFetchTasks();\n    return result;\n  } else {\n    // Reject promises\n    if (tasks.hasOwnProperty(url)) {\n      let request = tasks[url].requests.shift();\n      while (request) {\n        request[1](FetchError);\n        setDataReceivingProgress(request[2], request[3], 0, true);\n        request = tasks[url].requests.shift();\n      }\n      tasks[url].failed = true;\n    }\n    discardExpiredFetchTasks();\n    throw FetchError;\n  }\n}\n\nfunction discardExpiredFetchTasks(): void {\n  const now = new Date().getTime();\n  for (const url in tasks) {\n    if (tasks.hasOwnProperty(url)) {\n      if (!tasks[url].processing) {\n        if (now > tasks[url].timestamp) {\n          delete tasks[url];\n          continue;\n        }\n      }\n      if (tasks[url].failed) {\n        delete tasks[url];\n        continue;\n      }\n    }\n  }\n}\n\nexport type DataReceivingProgress = {\n  [requestID: string]: {\n    [tag: string]: {\n      expel: boolean;\n      progress: number;\n      total: number;\n    };\n  };\n};\n\nconst dataReceivingProgress: DataReceivingProgress = {};\n\nexport function setDataReceivingProgress(requestID: string, tag: string, progress: number, expel: boolean): void {\n  if (!dataReceivingProgress.hasOwnProperty(requestID)) {\n    dataReceivingProgress[requestID] = {};\n  }\n  if (dataReceivingProgress[requestID].hasOwnProperty(tag)) {\n    if (expel) {\n      dataReceivingProgress[requestID][tag].expel = true;\n    } else {\n      dataReceivingProgress[requestID][tag].expel = false;\n      dataReceivingProgress[requestID][tag].progress = progress;\n    }\n    broadcastDataReceivingProgress(requestID, 'run');\n  } else {\n    dataReceivingProgress[requestID][tag] = { expel: false, progress: progress, total: 1 };\n    broadcastDataReceivingProgress(requestID, 'start');\n  }\n}\n\nexport function getDataReceivingProgress(requestID: string): number {\n  if (dataReceivingProgress.hasOwnProperty(requestID)) {\n    if (typeof dataReceivingProgress[requestID] === 'object') {\n      let total: number = 0;\n      let received: number = 0;\n      for (const key in dataReceivingProgress[requestID]) {\n        if (!dataReceivingProgress[requestID][key].expel) {\n          total += dataReceivingProgress[requestID][key].total;\n          received += dataReceivingProgress[requestID][key].progress;\n        }\n      }\n      const progress = Math.min(Math.max(received / total, 0), 1);\n      return progress === Infinity || isNaN(progress) ? 1 : progress;\n    }\n  }\n  return 1;\n}\n\nexport function deleteDataReceivingProgress(requestID: string): void {\n  if (dataReceivingProgress.hasOwnProperty(requestID)) {\n    delete dataReceivingProgress[requestID];\n    broadcastDataReceivingProgress(requestID, 'end');\n  }\n}\n\nexport interface DataReceivingProgressEventDict {\n  target: string;\n  stage: 'start' | 'run' | 'end';\n  progress: number;\n}\n\nexport type DataReceivingProgressEvent = CustomEvent<DataReceivingProgressEventDict>;\n\nexport function broadcastDataReceivingProgress(requestID: string, stage: DataReceivingProgressEventDict['stage']): void {\n  const eventDict: DataReceivingProgressEventDict = {\n    target: requestID,\n    stage: stage,\n    progress: getDataReceivingProgress(requestID)\n  };\n  const event = new CustomEvent(requestID, { detail: eventDict });\n  document.dispatchEvent(event);\n}\n\nexport type DataUpdateTime = { [key: string]: number };\n\nexport const dataUpdateTime: DataUpdateTime = {};\n\nexport function setDataUpdateTime(requestID: string, timeStamp: string | number): void {\n  if (!dataUpdateTime.hasOwnProperty(requestID)) {\n    dataUpdateTime[requestID] = 0;\n  }\n  let timeNumber = 0;\n  if (typeof timeStamp === 'string') {\n    timeNumber = timeStampToNumber(timeStamp);\n  }\n  if (timeNumber > dataUpdateTime[requestID]) {\n    dataUpdateTime[requestID] = timeNumber;\n  }\n}\n\nexport function getDataUpdateTime(requestID: string): number {\n  if (dataUpdateTime.hasOwnProperty(requestID)) {\n    return dataUpdateTime[requestID] * 1;\n  } else {\n    return 0;\n  }\n}\n\nexport function deleteDataUpdateTime(requestID: string): void {\n  if (dataUpdateTime.hasOwnProperty(requestID)) {\n    delete dataUpdateTime[requestID];\n  }\n}\n"],"names":["parseEstimateTime","EstimateTime","mode","time","parseInt","code","text","formatTime","parseTimeCode","codeLength","length","hours","minutes","substring","type","min","max","number1","number2","Math","number","batchFindBusesForRoute","BusEvent","BusData","Route","RouteID","PathAttributeId","_step","result","BusDataObj","_iterator","_createForOfIteratorHelper","s","n","done","BusDataItem","value","BusID","err","e","f","_step2","_iterator2","BusEventItem","processedItem","CarType","BusStatus","CarOnStop","thisRouteID","thisBusID","String","isOnThisRoute","index","indexOf","charCodeAt","pow","onThisRoute","thisBusData","hasOwnProperty","position","latitude","parseFloat","Latitude","longitude","Longitude","searchedRoute","isRouteSearched","key","thisRouteItem","pid","RouteName","id","StopKey","StopID","push","batchFindBusesForLocation","StopIDList","_step3","_iterator3","_step4","_iterator4","thisStopID","parseCarType","parseCarOnStop","onStop","parseBusStatus","situation","formatBus","batchFoundBus","carNumber","status","busInitialized","busSecondlyInitialized","window","bus","initialize","setSplashScreenIconOffsetY","initializeSettings","then","setUpRecentViewsFieldSkeletonScreen","setUpFolderFieldSkeletonScreen","checkAppVersion","initializeRouteSliding","initializeLocationSliding","resizeSearchInputCanvas","addEventListener","screen","orientation","initializeRecentViews","initializeFolderList","initializeFolders","mediaQuery","matchMedia","searchInputElement","documentQuerySelector","updateSearchInput","selectionStart","selectionEnd","updateSearchResult","document","searchMaterialSymbolsInputElement","updateMaterialSymbolsSearchResult","openPermalink","fadeOutSplashScreen","loadNotificationClient","initializeNotificationSchedules","discardExpiredNotificationSchedules","askForPositioningPermission","askForCalibratingPermission","once","showErrorMessage","secondlyInitialize","downloadData","discardExpiredUpdateRateDataGroups","discardExpiredDataUsageStats","recoverBusArrivalTimeDataFromWriteAheadLog","discardExpiredRecentViews","initializeUpdateRateDataGroups","recoverUpdateRateDataFromWriteAheadLog","route","closeRoute","switchRoute","closeRouteDetails","location","openLocation","closeLocation","closeLocationDetails","folder","openSaveToFolder","closeSaveToFolder","closeFolderManager","closeFolderEditor","openFolderIconSelector","closeFolderIconSelector","openFolderCreator","closeFolderCreator","createFormulatedFolder","saveEditedFolder","search","openSearch","closeSearch","switchSearchTypeFilter","storage","closeStorage","dataUsage","closeDataUsage","personalSchedule","closePersonalScheduleManager","openPersonalScheduleCreator","closePersonalScheduleCreator","createFormulatedPersonalSchedule","switchPersonalScheduleCreatorDay","openPersonalScheduleEditor","closePersonalScheduleEditor","switchPersonalScheduleEditorDay","saveEditedPersonalSchedule","settings","openSettings","closeSettings","openSettingsOptions","closeSettingsOptions","settingsOptionsHandler","downloadExportFile","openFileToImportData","viewCommitOfCurrentVersion","showPromptToAskForPersistentStorage","openBus","closeBus","notification","openNotificationScheduleManager","closeNotificationScheduleManager","openRegisterNotification","closeRegisterNotification","saveFormulatedRegisterNotification","openScheduleNotification","closeScheduleNotification","scheduleNotificationForStopItemOnRoute","scheduleNotificationForStopItemOnLocation","cancelNotificationOnNotificationScheduleManager","qrcode","openQRCode","closeQRCode","integrateBus","_x","_x2","_integrateBus","apply","arguments","_asyncToGenerator","requestID","carKey","CarInfo","getCarInfo","getBusData","getBusEvent","Stop","getStop","Location","getLocation","properties","LocationName","thisCar","thisCarNumber","CarNum","icon","thisCarType","thisBusDataItem","thisBusDataItemPathAttributeId","thisBusDataItemBusStatus","thisBusDataItemGoBack","GoBack","thisBusEventItem","thisBusEventItemCarOnStop","thisBusEventItemStopID","searchedRoutes","searchRouteByPathAttributeId","thisRouteFullPathAttributeId","thisRouteName","thisRouteDeparture","dep","thisRouteDirection","des","FullPathAttributeId","thisLocationItemName","stopLocationId","deleteDataReceivingProgress","deleteDataUpdateTime","tasks","FetchError","Error","fetchData","_x3","_x4","_fetchData","url","tag","fileType","processing","Promise","resolve","reject","requests","Date","getTime","timestamp","setDataReceivingProgress","failed","response","fetch","ok","contentLength","headers","get","reader","body","getReader","chunks","receivedLength","_yield$reader$read","read","progress","request","uint8Array","Uint8Array","_i","_chunks","chunk","set","blob","Blob","arrayBuffer","inflatedData","pakoInflate","test","replace","JSON","parse","now","recordDataUsage","shift","discardExpiredFetchTasks","dataReceivingProgress","expel","broadcastDataReceivingProgress","total","getDataReceivingProgress","_typeof","received","Infinity","isNaN","stage","eventDict","target","event","CustomEvent","detail","dispatchEvent","dataUpdateTime","setDataUpdateTime","timeStamp","timeNumber","timeStampToNumber","getDataUpdateTime"],"ignoreList":[],"sourceRoot":""}