"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[226],{4131(t,n,e){e.d(n,{a:()=>A,b:()=>j,c:()=>x,d:()=>w});var i=e(467),a=e(2937),r=e(8179),o=e(7968),c=e(8024),u=e(5579),l=e(904),d=(0,r.c)(".wj"),s=(0,r.e)(d,".xj"),f=(0,r.e)(s,"._j"),p=(0,r.e)(d,".ck"),v=Array.from((0,r.d)(p,".dk")),h=new Date,b={},m=["","",""],g=0,k=!1;function y(t,n,e){for(var i="'Noto Sans TC', sans-serif",a=[],r=[],c=0;c<24;c++){var l=`${c.toString().padStart(2,"0")}:00`,d=90*c+10;a.push(`M35 ${d}`,"h"+(e-35)),r.push(`<text x="5" y="${d+3}" font-weight="400" font-size="10" font-family="${i}" component="gridline-label">${l}</text>`)}for(var s=`<path d="${a.join(" ")}" fill="none" stroke-width="0.45" component="gridline"/>`,f=2180,p=n.getDay(),v=t.repeated[p],h=t.scheduled,b=(0,u.f)(n,0,0,t.timeZoneOffset-n.getTimezoneOffset()),m=[b.getFullYear(),b.getMonth()+1,b.getDate()],g=h.length-1;g>=0;g--)m[0]===h[g].date[0]&&m[1]===h[g].date[1]&&m[2]===h[g].date[2]&&v.push({type:"repeated",time:h[g].time,interval:h[g].interval,count:h[g].count,day:p});for(var k=[],y=[],$=[],w=v.length-1;w>=0;w--){var j=v[w].time[0]/1440*f,x=e-35,A=(v[w].time[1]-v[w].time[0])/1440*f,C=v[w].time[0]%60,T=(v[w].time[0]-C)/60,D=v[w].time[1]%60,L=(v[w].time[1]-D)/60,M=`${T.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")} - ${L.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`,S=`每${v[w].interval[0]===v[w].interval[1]?v[w].interval[0]:v[w].interval.join(" - ")}分鐘一班 | ${v[w].count[0]===v[w].count[1]?v[w].count[0]:v[w].count.join(" - ")}班`;Array.prototype.push.apply(k,(0,o.a)(35,j,x,A,5,!1)),y.push(`M38 ${j+3}`,"v"+(A-6)),$.push(`<text x="44" y="${j+3+17}" font-weight="500" font-size="15" font-family="${i}" component="event-title">${M}</text>`,`<text x="44" y="${j+3+17+17}" font-weight="500" font-size="15" font-family="${i}" component="event-description">${S}</text>`)}var Y=`<path d="${k.join(" ")}" stroke="none" component="event-box"/>`,F=`<path d="${y.join(" ")}" fill="none" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" component="event-decoration"/>`;return`<svg width="${e}" height="2180" viewBox="0 0 ${e} 2180" xmlns="http://www.w3.org/2000/svg">${s}${r.join("")}${Y}${F}${$.join("")}</svg>`}function $(){return($=(0,i.a)(function*(t){var n=(0,l.d)("window");g=n.width,h=new Date;var e=(0,c.c)(),i=yield(0,a.a)(t,e);b=i;for(var r=0;r<3;r++){var o=(0,u.f)(h,r-1,0,0);m[r]=y(i,o,g),v[r].innerHTML=m[r]}f.innerText=(0,u.c)(h,"YYYY-MM-DD WW"),k||(k=!0,p.addEventListener("scrollend",function(){var t=p.scrollLeft,n=Math.round(t/g);if(0===n){h=(0,u.f)(h,-1,0,0);var e=(0,u.f)(h,-1,0,0);v[0].before(v[2]),p.scrollTo({left:g});var i=[v[2],v[0],v[1]];v[0]=i[0],v[1]=i[1],v[2]=i[2];var a=[y(b,e,g),m[0],m[1]];m[0]=a[0],m[1]=a[1],m[2]=a[2],v[0].innerHTML=m[0],f.innerText=(0,u.c)(h,"YYYY-MM-DD WW")}else if(2===n){h=(0,u.f)(h,1,0,0);var r=(0,u.f)(h,1,0,0);v[2].after(v[0]),p.scrollTo({left:g});var o=[v[1],v[2],v[0]];v[0]=o[0],v[1]=o[1],v[2]=o[2];var c=[m[1],m[2],y(b,r,g)];m[0]=c[0],m[1]=c[1],m[2]=c[2],v[2].innerHTML=m[2],f.innerText=(0,u.c)(h,"YYYY-MM-DD WW")}}),p.scrollTo({left:g}))})).apply(this,arguments)}function w(){d.setAttribute("displayed","true")}function j(){d.setAttribute("displayed","false")}function x(t){(0,l.c)("RouteCalendar"),w(),function(t){$.apply(this,arguments)}(t),(0,l.b)()}function A(){j(),(0,l.i)(),(0,l.e)("RouteCalendar")}},4373(t,n,e){e.d(n,{a:()=>T,b:()=>A,c:()=>C,d:()=>D,e:()=>x,f:()=>M});var i=e(467),a=e(4293),r=e(6788),o=e(8621),c=e(3459),u=e(8179),l=e(8024),d=e(9469),s=e(251),f=e(4537),p=e(904),v=e(8279),h={},b=!1,m=!1,g=(0,u.c)(".nj"),k=(0,u.e)(g,".rj"),y=(0,u.e)(k,".sj");function $(){var t=(0,u.a)();t.classList.add("tj");var n=(0,u.a)();n.classList.add("uj"),n.appendChild((0,f.a)()),t.appendChild(n);var e=(0,u.a)();return e.classList.add("vj"),t.appendChild(e),t}function w(t,n,e){function i(t,i,a){function r(t,n){var e=(0,u.e)(t,".uj");(0,f.c)(e,n.icon)}function o(t,n){(0,u.e)(t,".vj").innerText=n.name}function c(t,n){t.onclick=n.action}function d(t,n){t.setAttribute("animation",(0,l.a)(n))}function s(t,n){t.setAttribute("skeleton-screen",(0,l.a)(n))}null==a?(r(t,i),o(t,i),c(t,i),d(t,e),s(t,n)):(a.key!==i.key&&(r(t,i),o(t,i),c(t,i)),e!==b&&d(t,e),n!==m&&s(t,n))}var a=t.actions,r=t.actionsQuantity,o=Array.from((0,u.d)(y,".tj")),c=o.length;if(r!==c){var d=c-r;if(d<0){for(var s=new DocumentFragment,p=0;p>d;p--){var v=$();s.appendChild(v),o.push(v)}y.append(s)}else if(d>0)for(var g=c-1,k=c-d-1;g>k;g--)o[g].remove(),o.splice(g,1)}for(var w=0;w<r;w++){var j=o[w],x=a[w];if((0,l.f)(h,"actions"))if(h.actions[w])i(j,x,h.actions[w]);else i(j,x,null);else i(j,x,null)}h=t,b=e,m=n}function j(){return(j=(0,i.a)(function*(t,n){var e=(0,c.b)("playing_animation"),i=(0,l.c)();!function(){for(var t=(0,c.b)("playing_animation"),n=[],e=0;e<4;e++)n.push({name:"",icon:"",key:`action-${e}`,action:function(){}});w({actions:n,actionsQuantity:4,RouteID:0},!0,t)}(),w(yield(0,o.a)(t,n,i),!1,e)})).apply(this,arguments)}function x(){g.setAttribute("displayed","true")}function A(){g.setAttribute("displayed","false")}function C(t,n){(0,p.c)("RouteDetails"),x(),function(t,n){j.apply(this,arguments)}(t,n),(0,p.b)()}function T(){A(),(0,p.i)(),(0,p.e)("RouteDetails")}function D(t){return L.apply(this,arguments)}function L(){return(L=(0,i.a)(function*(t){var n=(0,l.c)(),e=yield(0,a.a)(n,!0);(0,r.a)(n),(0,r.b)(n);var i=`r_${t}`;if((0,l.f)(e,i)){var o=e[i],c=(0,d.a)(0,{id:t,name:o.n});(0,s.b)(o.n,c)}})).apply(this,arguments)}function M(t){return S.apply(this,arguments)}function S(){return(S=(0,i.a)(function*(t){var n=(0,l.c)(),e=yield(0,a.a)(n,!0);(0,r.a)(n),(0,r.b)(n);var i=`r_${t}`;if((0,l.f)(e,i)){var o=e[i],c=(0,d.a)(0,{id:t,name:o.n});(0,v.c)(c)}})).apply(this,arguments)}},3041(t,n,e){e.d(n,{a:()=>w,b:()=>y,c:()=>$,d:()=>k});var i=e(9566),a=e(8179),r=e(8024),o=e(6052),c=e(4537),u=e(904),l=e(9119),d=(0,a.c)(".fk"),s=(0,a.e)(d,".kk"),f=(0,a.e)(s,".lk"),p=(0,a.e)(d,".gk"),v=(0,a.e)(p,".ik"),h="已儲存至資料夾",b="無法儲存";function m(t,n,e,o){var u=(0,a.a)();u.classList.add("mk");var d=(0,a.a)();d.classList.add("nk");var s=document.createElement("span");s.appendChild((0,c.b)(t.icon)),d.appendChild(s);var f=(0,a.a)();switch(f.classList.add("ok"),f.innerText=t.name,u.appendChild(d),u.appendChild(f),n){case"stop":u.onclick=function(){(0,i.n)(t.id,e[0],e[1]).then(function(t){t?(0,i.e)("stop",e[0]).then(function(t){t&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(t)),(0,l.a)("folder",h),w())}):(0,l.a)("warning",b)})};break;case"route":u.onclick=function(){(0,i.m)(t.id,e[0]).then(function(t){t?(0,i.e)("route",e[0]).then(function(t){t&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(t)),(0,l.a)("folder",h),w())}):(0,l.a)("warning",b)})};break;case"location":u.onclick=function(){(0,i.l)(t.id,e[0]).then(function(t){t?(0,i.e)("location",e[0]).then(function(t){t&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(t)),(0,l.a)("folder",h),w())}):(0,l.a)("warning",b)})}}return u}function g(t,n,e){v.onclick=function(){(0,o.c)(function(){g(t,n,e)})};var a=(0,i.j)();f.innerHTML="";var r=new DocumentFragment;for(var c of a){var u=m(c,t,n,e);r.appendChild(u)}f.append(r)}function k(){d.setAttribute("displayed","true")}function y(){d.setAttribute("displayed","false")}function $(t,n,e){(0,u.c)("SaveToFolder"),k(),g(t,n,e),(0,u.b)()}function w(){y(),(0,u.i)(),(0,u.e)("SaveToFolder")}},752(t,n,e){e.d(n,{a:()=>h,b:()=>p,c:()=>v,d:()=>f});var i=e(3422),a=e(8179),r=e(4537),o=e(904),c=e(9119),u=(0,a.c)(".pk"),l=(0,a.e)(u,".tk"),d=(0,a.e)(l,".uk");function s(t,n,e,o,u){var l=(0,a.a)();l.classList.add("vk");var d=(0,a.a)();d.classList.add("wk");var s=document.createElement("span");s.appendChild((0,r.b)(t.icon)),d.appendChild(s);var f=(0,a.a)();f.classList.add("xk"),f.innerText=t.name;var p=t.index;return l.onclick=function(){!function(t,n,e,a,r){(0,c.a)("manufacturing","處理中"),t.setAttribute("enabled","false"),h(),(0,i.m)(n,e,a,r).then(function(n){switch(n){case 0:(0,c.a)("error","設定失敗"),t.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),t.setAttribute("enabled","true"),t.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),t.setAttribute("enabled","true")}})}(n,e,o,u,p)},l.appendChild(d),l.appendChild(f),l}function f(){u.setAttribute("displayed","true")}function p(){u.setAttribute("displayed","false")}function v(t,n,e,a){(0,o.c)("ScheduleNotification"),f(),function(t,n,e,a){d.innerHTML="";var r=new DocumentFragment;for(var o of i.n){var c=s(o,t,n,e,a);r.appendChild(c)}d.append(r)}(t,n,e,a),(0,o.b)()}function h(){p(),(0,o.i)(),(0,o.e)("ScheduleNotification")}},4680(){},7820(){},1580(){},3377(){},9354(){},5328(){},3796(){},1828(){},6597(){},3777(){},9991(){},2421(){},2696(){},5461(){},5392(){},3534(){},6018(){},7225(){},1308(){},7723(){},1603(){},3749(){},7217(){},7287(){}}]);
//# sourceMappingURL=30e3791a0861fd4e0e6f.js.map