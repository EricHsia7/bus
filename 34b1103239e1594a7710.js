"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(t,e,a){a.d(e,{a:()=>gt,b:()=>bt,c:()=>Z,d:()=>At,e:()=>vt});var i=a(467),s=a(5767),r=a(9566),d=a(3422),n=a(5314),l=a(7123),o=a(3459),u=a(8179),p=a(7968),c=a(8024),h=a(5579),f=a(4537),v=a(904),b=a(3030),A=a(9119),g=a(3041),m=a(752),y=a(5286),L=(0,u.c)(".uh"),C=(0,u.e)(L,".di"),k=(0,u.e)(C,".gi"),j=(0,u.e)(k,"span"),w=(0,u.e)(C,".fi"),x=(0,u.e)(C,".mi .ni"),T=(0,u.e)(C,".hi"),R=(0,u.e)(T,".ii"),_=(0,u.e)(C,".ki"),P=(0,u.e)(_,".li"),$=(0,u.e)(L,".pi"),S={},E=!1,D=!1,I=0,N=0,B=0,M={},q=0,F=!1,z=15e3,Q=5e3,H=15e3,U=!0,W=0,G=0,J="",K=!1,O=!1,V=!1,X=0,Y=[];function Z(){$.addEventListener("touchstart",function(){I=Math.round($.scrollLeft/q)},{passive:!0}),$.addEventListener("scroll",function(t){F=!0;var e=t.target.scrollLeft/q;N=e>I?I+1:I-1;var a=e-I,i=Math.abs(a);i>1&&(a>0?(I=Math.floor(e),N=I+1):(I=Math.ceil(e),N=I-1),i=Math.abs(e-I));var s=M[`g_${I}`]||{width:0,offset:0},r=M[`g_${N}`]||{width:0,offset:0},d=s.width+(r.width-s.width)*i,n=-1*(s.offset+(r.offset-s.offset)*i)+.5*q-.5*d;tt(B,n,d-20,e)},{passive:!0}),$.addEventListener("scrollend",function(t){var e=t.target.scrollLeft/q;I=Math.round(e),F=!1},{passive:!0})}function tt(t,e,a,i){$.style.setProperty("--th",t.toString()),P.style.setProperty("--yh",a.toString()),R.style.setProperty("--zh",`${e.toString()}px`),R.style.setProperty("--ai",i.toString())}function et(t){var e=t;if(K){var a=e.detail.progress-1;x.style.setProperty("--bi",a.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,et)}function at(){var t=(0,u.a)();t.classList.add("yi"),t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var e=(0,u.a)();e.classList.add("zi");var a=(0,u.a)();a.classList.add("ij"),a.setAttribute("displayed","false"),e.appendChild(a);var i=(0,u.a)();i.classList.add("_i");var s=(0,u.a)();s.classList.add("tb"),s.setAttribute("code","0"),s.setAttribute("displayed","false"),i.appendChild(s);var r=(0,u.a)();return r.classList.add("ub"),r.setAttribute("code","0"),r.setAttribute("displayed","true"),i.appendChild(r),t.appendChild(e),t.appendChild(i),t}function it(t){var e=(0,u.a)();e.classList.add("ui"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var a=(0,u.a)();a.classList.add("vi");var i=(0,u.a)();i.classList.add("wi"),a.appendChild(i);var s=(0,u.a)();s.classList.add("xi");var r=(0,u.a)();r.classList.add("jj");var d=(0,u.a)();d.classList.add("tb"),d.setAttribute("code","0"),d.setAttribute("displayed","false"),r.appendChild(d);var n=(0,u.a)();n.classList.add("ub"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),r.appendChild(n),s.appendChild(r);var l=(0,u.a)();l.classList.add("kj"),l.appendChild((0,f.b)("keyboard_arrow_down")),l.onclick=function(){!function(t,e){var a=(0,u.e)(t,".mj"),i=t.parentElement,s=e.parentElement,r=(0,u.f)(e,"yi"),d=(0,u.f)(t,"ui"),n=d.length,l=i.getBoundingClientRect(),o=t.getBoundingClientRect(),p=s.getBoundingClientRect(),c=e.getBoundingClientRect(),h=c.top-p.top,f=o.top-l.top,v="true"===t.getAttribute("stretched"),b="true"===t.getAttribute("animation");if(b){var A=v?"2":"1";e.setAttribute("stretching","true"),e.style.setProperty("--zk",`${h}px`),t.setAttribute("stretching","true"),t.style.setProperty("--al",`${f}px`);for(var g=0;g<n;g++){var m=d[g],y=r[g];y.style.setProperty("--bl",(-1*g-1).toString()),y.setAttribute("push-direction",A),y.setAttribute("push-state","1"),m.setAttribute("push-direction",A),m.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var a=0;a<n;a++){var i=d[a],s=r[a];s.setAttribute("push-direction","0"),s.setAttribute("push-state","0"),i.setAttribute("push-direction","0"),i.setAttribute("push-state","0")}e.setAttribute("stretching","false"),t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var t=0;t<n;t++){var e=d[t];r[t].setAttribute("push-state","2"),e.setAttribute("push-state","2")}},{once:!0})}v?(b?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"),e.setAttribute("stretched","true"))}(e,t)},s.appendChild(l);var o=(0,u.a)();o.classList.add("lj"),s.appendChild(o),a.appendChild(s);var p=(0,u.a)();p.classList.add("mj"),p.setAttribute("displayed","false");var c=(0,u.a)();c.classList.add("nj");var h=(0,u.a)();h.classList.add("oj"),h.setAttribute("highlighted","true"),h.setAttribute("type","tab"),h.setAttribute("code","0"),h.onclick=function(){yt(e,0)};var v=(0,u.a)();v.classList.add("pj"),v.appendChild((0,f.b)("directions_bus")),h.appendChild(v),h.appendChild(document.createTextNode("公車")),c.appendChild(h);var b=(0,u.a)();b.classList.add("oj"),b.setAttribute("highlighted","false"),b.setAttribute("type","tab"),b.setAttribute("code","1"),b.onclick=function(){yt(e,1)};var A=(0,u.a)();A.classList.add("pj"),A.appendChild((0,f.b)("departure_board")),b.appendChild(A),b.appendChild(document.createTextNode("抵達時間")),c.appendChild(b);var g=(0,u.a)();g.classList.add("oj"),g.setAttribute("highlighted","false"),g.setAttribute("type","tab"),g.setAttribute("code","2"),g.onclick=function(){yt(e,2)};var m=(0,u.a)();m.classList.add("pj"),m.appendChild((0,f.b)("route")),g.appendChild(m),g.appendChild(document.createTextNode("路線")),c.appendChild(g);var y=(0,u.a)();y.classList.add("oj"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){yt(e,3)};var L=(0,u.a)();L.classList.add("pj"),L.appendChild((0,f.b)("location_on")),y.appendChild(L),y.appendChild(document.createTextNode("地點")),c.appendChild(y);var C=(0,u.a)();C.classList.add("oj"),C.setAttribute("highlighted","false"),C.setAttribute("type","save-to-folder");var k=(0,u.a)();k.classList.add("pj"),k.appendChild((0,f.b)("folder")),C.appendChild(k),C.appendChild(document.createTextNode("儲存")),c.appendChild(C);var j=(0,u.a)();j.classList.add("oj"),j.setAttribute("highlighted","false"),j.setAttribute("type","schedule-notification"),j.setAttribute("enabled","true");var w=(0,u.a)();w.classList.add("pj"),w.appendChild((0,f.b)("notifications")),j.appendChild(w),j.appendChild(document.createTextNode("通知")),c.appendChild(j),p.appendChild(c);var x=(0,u.a)();x.classList.add("qj"),x.setAttribute("displayed","true"),p.appendChild(x);var T=(0,u.a)();T.classList.add("rj"),T.setAttribute("displayed","false"),p.appendChild(T);var R=(0,u.a)();R.classList.add("sj"),R.setAttribute("displayed","false"),p.appendChild(R);var _=(0,u.a)();return _.classList.add("tj"),_.setAttribute("displayed","false"),p.appendChild(_),e.appendChild(a),e.appendChild(p),e}function st(){var t=(0,u.a)();t.classList.add("qi");var e=(0,u.a)();e.classList.add("ri");var a=(0,u.a)();a.classList.add("si");var i=(0,u.a)();i.classList.add("uj");var s=(0,u.a)();s.classList.add("ti");var r=(0,u.a)();return r.classList.add("vj"),s.appendChild(r),a.appendChild(i),e.appendChild(a),e.appendChild(s),t.appendChild(e),t}function rt(){var t=(0,u.a)();t.classList.add("ji");var e=document.createElement("span");return t.appendChild(e),t}function dt(){var t=(0,u.a)();t.classList.add("wj"),t.setAttribute("on-this-route","false");var e=(0,u.a)();e.classList.add("xj");var a=(0,u.a)();a.classList.add("yj"),a.appendChild((0,f.b)("directions_bus"));var i=(0,u.a)();i.classList.add("zj");var s=(0,u.a)();s.classList.add("_j");var r=(0,u.a)();r.classList.add("ak");var d=(0,u.a)();d.classList.add("bk");var n=(0,u.a)();return n.classList.add("ck"),e.appendChild(a),e.appendChild(i),t.appendChild(e),s.appendChild(r),s.appendChild(d),s.appendChild(n),t.appendChild(s),t}function nt(){var t=(0,u.a)();t.classList.add("dk");var e=(0,u.a)();e.classList.add("ek");var a=(0,u.a)();a.classList.add("fk"),a.appendChild((0,f.b)("route"));var i=(0,u.a)();i.classList.add("gk");var s=(0,u.a)();s.classList.add("hk");var r=(0,u.a)();r.classList.add("ik");var d=(0,u.a)();d.classList.add("jk"),d.setAttribute("type","view-route"),d.innerText="查看路線";var n=(0,u.a)();return n.classList.add("jk"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存路線",e.appendChild(a),e.appendChild(i),t.appendChild(e),t.appendChild(s),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function lt(){var t=(0,u.a)();t.classList.add("kk");var e=(0,u.a)();e.classList.add("lk");var a=(0,u.a)();a.classList.add("mk"),a.appendChild((0,f.b)("calendar_view_day"));var i=(0,u.a)();i.classList.add("nk");var s=(0,u.a)();s.classList.add("ok");var r=(0,u.a)();return r.classList.add("pk"),e.appendChild(a),e.appendChild(i),e.appendChild(s),t.appendChild(e),t.appendChild(r),t}function ot(){var t=(0,u.a)();t.classList.add("qk");var e=(0,u.a)();e.classList.add("rk");var a=(0,u.a)();a.classList.add("sk"),a.appendChild((0,f.b)("location_on"));var i=(0,u.a)();i.classList.add("tk");var s=(0,u.a)();s.classList.add("uk");var r=(0,u.a)();r.classList.add("vk");var d=(0,u.a)();d.classList.add("wk"),d.setAttribute("type","view-location"),d.innerText="查看地點";var n=(0,u.a)();return n.classList.add("wk"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存地點",e.appendChild(a),e.appendChild(i),t.appendChild(e),t.appendChild(s),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function ut(t,e,a){var i,s;function n(e,a,i,s,n,l){function o(t,e,a,i,s){var r=(0,u.e)(e,"._i"),d=(0,u.e)(r,".ub"),n=(0,u.e)(r,".tb"),l=(0,u.e)(t,".jj"),o=(0,u.e)(l,".ub"),p=(0,u.e)(l,".tb");if(n.setAttribute("code",a.status.code.toString()),p.setAttribute("code",a.status.code.toString()),p.innerText=a.status.text,!i&&s){var c=t.getBoundingClientRect(),h=c.top,f=c.left,v=c.bottom,b=c.right,A=window.innerWidth,g=window.innerHeight;if(v>0&&h<g&&b>0&&f<A)return d.addEventListener("animationend",function(){d.setAttribute("code",a.status.code.toString()),d.classList.remove("wb"),n.setAttribute("displayed","false")},{once:!0}),o.addEventListener("animationend",function(){o.setAttribute("code",a.status.code.toString()),o.innerText=a.status.text,o.classList.remove("wb"),p.setAttribute("displayed","false")},{once:!0}),p.setAttribute("displayed","true"),n.setAttribute("displayed","true"),d.classList.add("wb"),void o.classList.add("wb")}d.setAttribute("code",a.status.code.toString()),o.setAttribute("code",a.status.code.toString()),o.innerText=a.status.text}function p(t,e,a){t.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer)),e.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer))}function f(t,e){(0,u.e)(t,".wi").innerText=e.name}function v(t,e){var a=(0,u.e)(t,".qj"),i=Array.from((0,u.d)(a,".wj")),s=i.length,r=e.buses.length,d=s-r;if(d<0){for(var n=new DocumentFragment,l=0;l>d;l--){var o=dt();n.appendChild(o),i.push(o)}a.append(n)}else if(d>0)for(var p=s-1,h=s-d-1;p>h;p--)i[p].remove(),i.splice(p,1);for(var f=0;f<r;f++){var v=e.buses[f],b=i[f],A=(0,u.e)(b,".xj"),g=(0,u.e)(A,".zj"),m=(0,u.e)(b,"._j"),y=(0,u.e)(m,".ak"),L=(0,u.e)(m,".bk"),C=(0,u.e)(m,".ck");b.setAttribute("on-this-route",(0,c.a)(v.onThisRoute)),g.innerText=v.carNumber,y.innerText=`路線：${v.RouteName}`,L.innerText=`狀態：${v.status.text}`,C.innerText=`類型：${v.type}`}a.setAttribute("empty",(0,c.a)(0===r))}function A(t,e){var a=(0,u.e)(t,".rj"),i=Array.from((0,u.d)(a,".dk")),s=i.length,d=e.overlappingRoutes.length,n=s-d;if(n<0){for(var l=new DocumentFragment,o=0;o>n;o--){var p=nt();l.appendChild(p),i.push(p)}a.append(l)}else if(n>0)for(var h=s-1,f=s-n-1;h>f;h--)i[h].remove(),i.splice(h,1);for(var v=0;v<d;v++){var b=e.overlappingRoutes[v],A=i[v],m=(0,u.e)(A,".ek"),y=(0,u.e)(m,".gk"),L=(0,u.e)(A,".hk"),C=(0,u.e)(A,".ik"),k=(0,u.e)(C,'.jk[type="view-route"]'),j=(0,u.e)(C,'.jk[type="save-to-folder"]');y.innerText=b.name,L.innerText=b.RouteEndPoints.text,function(t,e,a){t.onclick=function(){mt(e,a)}}(k,b.RouteID,b.PathAttributeId),function(t,e){t.onclick=function(){(0,g.c)("route",[e],t)},(0,r.e)("route",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(j,b.RouteID)}a.setAttribute("empty",(0,c.a)(0===d))}function y(t,e){var a=(0,u.e)(t,".sj"),i=Array.from((0,u.d)(a,".kk")),s=i.length,r=e.busArrivalTimes.length,d=s-r;if(d<0){for(var n=new DocumentFragment,l=0;l>d;l--){var o=lt();n.appendChild(o),i.push(o)}a.append(n)}else if(d>0)for(var p=s-1,f=s-d-1;p>f;p--)i[p].remove(),i.splice(p,1);for(var v=0;v<r;v++){var b=e.busArrivalTimes[v],A=i[v],g=(0,u.e)(A,".lk"),m=(0,u.e)(g,".nk"),y=(0,u.e)(g,".ok"),L=(0,u.e)(A,".pk");m.innerText=b.personalSchedule.name,y.innerText=`週${(0,h.g)(b.day).name} ${(0,h.i)(b.personalSchedule.period.start)} - ${(0,h.i)(b.personalSchedule.period.end)}`,L.innerHTML=b.chart}a.setAttribute("empty",(0,c.a)(0===r))}function L(t,e){var a=(0,u.e)(t,".tj"),i=Array.from((0,u.d)(a,".qk")),s=i.length,d=e.nearbyLocations.length,n=s-d;if(n<0){for(var l=new DocumentFragment,o=0;o>n;o--){var p=ot();l.appendChild(p),i.push(p)}a.append(l)}else if(n>0)for(var h=s-1,f=s-n-1;h>f;h--)i[h].remove(),i.splice(h,1);for(var v=0;v<d;v++){var A=e.nearbyLocations[v],m=i[v],y=(0,u.e)(m,".rk"),L=(0,u.e)(y,".tk"),C=(0,u.e)(m,".uk"),k=(0,u.e)(m,".vk"),j=(0,u.e)(k,'.wk[type="view-location"]'),w=(0,u.e)(k,'.wk[type="save-to-folder"]');L.innerText=A.name,C.innerText=`${A.distance}公尺`,function(t,e){t.onclick=function(){(0,b.d)(e)}}(j,A.hash),function(t,e){t.onclick=function(){(0,g.c)("location",[e],t)},(0,r.e)("location",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(w,A.hash)}a.setAttribute("empty",(0,c.a)(0===d))}function C(t,e,a){t.setAttribute("nearest",(0,c.a)(a.nearest)),e.setAttribute("nearest",(0,c.a)(a.nearest))}function k(t,e,a,i,s){var r=(null==a?void 0:a.progress)||0,d=(null==e?void 0:e.progress)||0,n=(0,u.e)(t,".zi .ij");if(!i&&s&&0!==r&&0===d&&Math.abs(d-r)>0)return n.style.setProperty("--xk","100%"),void n.addEventListener("transitionend",function(){n.setAttribute("displayed","false"),n.style.setProperty("--xk","-100%")},{once:!0});d>0?(n.setAttribute("displayed","true"),n.style.setProperty("--xk",100*(d-1)+"%")):n.setAttribute("displayed","false")}function j(t,e,a){a&&((0,u.e)(t,".mj").setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false"))}function w(t,e,a){t.setAttribute("animation",(0,c.a)(a)),e.setAttribute("animation",(0,c.a)(a))}function x(t,e,a){t.setAttribute("skeleton-screen",(0,c.a)(a)),e.setAttribute("skeleton-screen",(0,c.a)(a))}function T(e,a){var i=(0,u.e)(e,'.mj .nj .oj[type="save-to-folder"]');i.onclick=function(){(0,g.c)("stop",[a.id,t.RouteID],i)},(0,r.e)("stop",a.id).then(function(t){i.setAttribute("highlighted",(0,c.a)(t))})}function R(e,a){var i=(0,u.e)(e,'.mj .nj .oj[type="schedule-notification"]');i.onclick=function(){(0,m.c)(i,a.id,t.RouteID,a.status.time)};var s=(0,d.r)(a.id);i.setAttribute("highlighted",(0,c.a)(s))}null===s?(o(e,a,i,n,l),f(e,i),v(e,i),A(e,i),y(e,i),L(e,i),p(e,a,i),C(e,a,i),k(a,i,s,n,l),j(e,a,n),w(e,a,l),x(e,a,n),T(e,i),R(e,i)):(i.status.time!==s.status.time&&(o(e,a,i,n,l),R(e,i)),(0,c.b)(s.buses,i.buses)||v(e,i),(0,c.b)(s.busArrivalTimes,i.busArrivalTimes)||y(e,i),s.nearest!==i.nearest&&C(e,a,i),s.progress!==i.progress&&k(a,i,s,n,l),s.id!==i.id&&(f(e,i),p(e,a,i),A(e,i),L(e,i),T(e,i),R(e,i)),E!==l&&w(e,a,l),D!==n&&(j(e,a,n),x(e,a,n)))}var l=(0,v.d)("window"),o=l.width,f=l.height,A=t.groupQuantity,L=t.itemQuantity,C=t.groupedItems,x=t.groupNames;B=A,q=o;for(var P=0,N=0;N<A;N++){var z=`g_${N}`,Q=(0,p.d)(x[N],500,"17px",'"Noto Sans TC", sans-serif')+20;M[z]={width:Q,offset:P},P+=Q}if(M[`g_${A}`]={width:0,offset:P},!F){var H=M[`g_${I}`],U=-1*H.offset+.5*q-.5*H.width,W=H.width-20;tt(B,U,W,I)}D!==e&&(k.setAttribute("skeleton-screen",(0,c.a)(e)),T.setAttribute("skeleton-screen",(0,c.a)(e)),_.setAttribute("skeleton-screen",(0,c.a)(e))),E!==a&&(k.setAttribute("animation",(0,c.a)(a)),T.setAttribute("animation",(0,c.a)(a)),_.setAttribute("animation",(0,c.a)(a))),(null===(i=S)||void 0===i?void 0:i.RouteID)!==t.RouteID&&(w.onclick=function(){(0,y.g)(t.RouteID,t.PathAttributeId)}),(null===(s=S)||void 0===s?void 0:s.RouteName)!==t.RouteName&&(j.innerText=t.RouteName);var G=Array.from((0,u.d)($,".qi")),J=Array.from((0,u.d)(R,".ji")),K=G.length;if(A!==K){var O=K-A;if(O<0){for(var V=new DocumentFragment,X=new DocumentFragment,Y=0;Y>O;Y--){var Z=st();V.appendChild(Z),G.push(Z);var et=rt();X.appendChild(et),J.push(et)}$.append(V),R.append(X)}else if(O>0)for(var ut=K-1,pt=K-O-1;ut>pt;ut--)G[ut].remove(),G.splice(ut,1),J[ut].remove(),J.splice(ut,1)}for(var ct=0;ct<A;ct++){var ht=`g_${ct}`,ft=G[ct],vt=(0,u.e)(ft,".ti"),bt=(0,u.e)(ft,".si"),At=Array.from((0,u.d)(vt,".ui")),gt=Array.from((0,u.d)(bt,".yi")),yt=At.length;if(L[ht]!==yt){var Lt=yt-L[ht];if(Lt<0){for(var Ct=new DocumentFragment,kt=new DocumentFragment,jt=0;jt>Lt;jt--){var wt=at(),xt=it(wt);Ct.appendChild(xt),At.push(xt),kt.appendChild(wt),gt.push(wt)}vt.append(Ct),bt.append(kt)}else if(Lt>0)for(var Tt=yt-1,Rt=yt-Lt-1;Tt>Rt;Tt--)At[Tt].remove(),At.splice(Tt,1),gt[Tt].remove(),gt.splice(Tt,1)}var _t=J[ct];(0,u.e)(_t,"span").innerText=x[ct],_t.style.setProperty("--vh",`${M[ht].offset}px`),_t.style.setProperty("--wh",`${M[ht].width}px`),_t.style.setProperty("--xh",ct.toString()),e&&(ft.scrollTop=0);for(var Pt=0;Pt<L[ht];Pt++){var $t=At[Pt],St=gt[Pt],Et=C[ht][Pt];if((0,c.e)(S,"groupedItems"))if((0,c.e)(S.groupedItems,ht))if(S.groupedItems[ht][Pt])n($t,St,Et,S.groupedItems[ht][Pt],e,a);else n($t,St,Et,null,e,a);else n($t,St,Et,null,e,a);else n($t,St,Et,null,e,a)}}R.style.setProperty("--_h",`${P}px`),S=t,E=a,D=e}function pt(){return ct.apply(this,arguments)}function ct(){return(ct=(0,i.a)(function*(){var t=(0,o.b)("playing_animation"),e=(0,o.b)("refresh_interval"),a=(0,v.d)("route-bus-arrival-time-chart");U=e.dynamic,z=e.baseInterval,K=!0,J=(0,c.c)(),x.setAttribute("refreshing","true"),x.classList.remove("oi"),document.addEventListener(J,et);var i=yield(0,l.a)(X,Y,a.width,a.height,J);ut(i,!1,t);var r=0;U&&(r=yield(0,s.c)()),W=(new Date).getTime(),G=U?Math.max(W+Q,i.dataUpdateTime+z/r):W+z,H=Math.max(Q,G-W),K=!1,x.setAttribute("refreshing","false"),x.style.setProperty("--ci",`${H}ms`),x.classList.add("oi")})).apply(this,arguments)}function ht(){pt().then(function(){O?setTimeout(function(){ht()},Math.max(Q,G-(new Date).getTime())):V=!1}).catch(function(t){O?((0,A.a)("error","路線網路連線中斷，將在10秒後重試。"),setTimeout(function(){ht()},1e4)):V=!1})}function ft(t,e){X=t,Y=e,I=0,M={},$.scrollLeft=0,$.focus(),function(t,e){for(var a=(0,o.b)("playing_animation"),i=(0,v.d)("window"),s=(i.width,i.height),r=Math.floor(s/50)+5,d={},n=0;n<2;n++){var l=`g_${n}`;d[l]=[];for(var u=0;u<r;u++)d[l].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:u,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}ut({groupNames:["往載入中","往載入中"],groupedItems:d,groupQuantity:2,itemQuantity:{g_0:r,g_1:r},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:t,PathAttributeId:e,dataUpdateTime:0},!0,a)}(t,e),O||(O=!0,V?pt():(V=!0,ht()))}function vt(t){var e="ltr"===t?"mc":"nc";L.addEventListener("animationend",function(){L.classList.remove(e)},{once:!0}),L.classList.add(e),L.setAttribute("displayed","true")}function bt(t){var e="ltr"===t?"oc":"pc";L.addEventListener("animationend",function(){L.setAttribute("displayed","false"),L.classList.remove(e)},{once:!0}),L.classList.add(e)}function At(t,e){(0,v.c)("Route"),(0,n.e)("route",t),vt("rtl"),ft(t,e),(0,v.b)()}function gt(){bt("ltr"),O=!1,(0,v.i)(),(0,v.e)("Route")}function mt(t,e){O=!1,(0,n.e)("route",t),ft(t,e)}function yt(t,e){var a=(0,u.e)(t,".nj"),i=(0,u.d)(a,'.oj[highlighted="true"][type="tab"]');for(var s of i)s.setAttribute("highlighted","false");switch((0,u.e)(a,`.oj[code="${e}"]`).setAttribute("highlighted","true"),e){case 0:(0,u.e)(t,".qj").setAttribute("displayed","true"),(0,u.e)(t,".sj").setAttribute("displayed","false"),(0,u.e)(t,".rj").setAttribute("displayed","false"),(0,u.e)(t,".tj").setAttribute("displayed","false");break;case 1:(0,u.e)(t,".qj").setAttribute("displayed","false"),(0,u.e)(t,".sj").setAttribute("displayed","true"),(0,u.e)(t,".rj").setAttribute("displayed","false"),(0,u.e)(t,".tj").setAttribute("displayed","false");break;case 2:(0,u.e)(t,".qj").setAttribute("displayed","false"),(0,u.e)(t,".sj").setAttribute("displayed","false"),(0,u.e)(t,".rj").setAttribute("displayed","true"),(0,u.e)(t,".tj").setAttribute("displayed","false");break;case 3:(0,u.e)(t,".qj").setAttribute("displayed","false"),(0,u.e)(t,".sj").setAttribute("displayed","false"),(0,u.e)(t,".rj").setAttribute("displayed","false"),(0,u.e)(t,".tj").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=34b1103239e1594a7710.js.map