"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[838],{752(e,t,n){n.d(t,{Ho:()=>p,b$:()=>h});var r=n(3422),a=n(8179),i=n(4537),o=n(904),c=n(9119);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,a.bv)(".rd"),s=(0,a.aI)(d,".sd"),f=(0,a.aI)(s,".td");function v(e,t,n,a,o){var u=document.createElement("div");u.classList.add("ud");var l=document.createElement("div");l.classList.add("vd");var d=document.createElement("span");d.appendChild((0,i.YC)(e.icon)),l.appendChild(d);var s=document.createElement("div");s.classList.add("wd"),s.appendChild(document.createTextNode(e.name));var f=e.index;return u.onclick=function(){!function(e,t,n,a,i){(0,c.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),h(),(0,r.mD)(t,n,a,i).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,n,a,o,f)},u.appendChild(l),u.appendChild(s),{element:u,id:""}}function p(e,t,n,a){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(e,t,n,a){f.innerHTML="";var i,o=new DocumentFragment,c=u(r.FX);try{for(c.s();!(i=c.n()).done;){var l=v(i.value,e,t,n,a);o.appendChild(l.element)}}catch(e){c.e(e)}finally{c.f()}f.append(o)}(e,t,n,a)}function h(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},1102(){},1306(){},1308(){},1603(){},1743(){},2421(){},2696(){},3041(e,t,n){n.d(t,{B:()=>b,n:()=>A});var r=n(467),a=n(9566),i=n(8179),o=n(8024),c=n(4537),u=n(904),l=n(9119);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=(0,i.bv)(".xd"),v=(0,i.aI)(f,".yd"),p=(0,i.aI)(v,".zd"),h="已儲存至資料夾",m="無法儲存";function y(e,t,n){var r=document.createElement("div");r.classList.add("_d");var u=document.createElement("div");u.classList.add("ae");var d=document.createElement("span");d.appendChild((0,c.YC)(e.icon)),u.appendChild(d);var s=document.createElement("div");switch(s.classList.add("be"),s.appendChild(document.createTextNode(e.name)),t){case"stop-on-route":r.onclick=function(){!function(e,t,n,r){var c=(0,i.bv)(`.ba .ca .da .ea .fa .ha#${e}`),u=(0,i.aI)(c,'.lb .mb .nb[type="save-to-folder"]');(0,a.aq)(t,n,r).then(function(e){e?(0,a.LH)("stop",n).then(function(e){e&&(u.setAttribute("highlighted",(0,o.xZ)(e)),(0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})}(n[0],e.id,n[1],n[2])};break;case"stop-on-location":r.onclick=function(){!function(e,t,n,r){var c=(0,i.bv)(`.ce .de .ee .fe .ge#${e}`),u=(0,i.aI)(c,'.he .ie .je[type="save-to-folder"]');(0,a.aq)(t,n,r).then(function(e){e?(0,a.LH)("stop",n).then(function(e){e&&(u.setAttribute("highlighted",(0,o.xZ)(e)),(0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})}(n[0],e.id,n[1],n[2])};break;case"route":r.onclick=function(){var t,r,o;t=e.id,r=n[0],o=(0,i.bv)('.ke .le .me .ne[group="actions"] .oe .pe[action="save-to-folder"]'),(0,a.Fq)(t,r).then(function(e){e?(0,a.LH)("route",r).then(function(e){e&&(o.setAttribute("highlighted","true"),(0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})};break;case"route-on-route":r.onclick=function(){var t,r;t=e.id,r=n[0],(0,a.Fq)(t,r).then(function(e){e?(0,a.LH)("route",r).then(function(e){e&&((0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})};break;case"location":case"location-on-route":r.onclick=function(){var t,r;t=e.id,r=n[0],(0,a.DW)(t,r).then(function(e){e?(0,a.LH)("location",r).then(function(e){e&&((0,l.a)("folder",h),A())}):(0,l.a)("warning",m)})}}return r.appendChild(u),r.appendChild(s),{element:r,id:""}}function g(){return(g=(0,r.A)(function*(e,t){var n=yield(0,a.Xi)();p.innerHTML="";var r,i=new DocumentFragment,o=d(n);try{for(o.s();!(r=o.n()).done;){var c=y(r.value,e,t);i.appendChild(c.element)}}catch(e){o.e(e)}finally{o.f()}p.append(i)})).apply(this,arguments)}function b(e,t){(0,u.WR)("SaveToFolder"),f.setAttribute("displayed","true"),function(e,t){g.apply(this,arguments)}(e,t)}function A(){(0,u.kr)("SaveToFolder"),f.setAttribute("displayed","false")}},3058(){},3127(){},3534(){},3749(){},3777(){},5286(e,t,n){n.d(t,{kP:()=>J,zk:()=>Q,VY:()=>V,b7:()=>X,GZ:()=>te,GS:()=>ee});var r=n(467),a=n(9566),i=n(8621),o=n(3459),c=n(8179),u=n(8024),l=n(904),d=n(3041),s=n(8134),f=n(9469),v=n(9119),p=n(8279);function h(){return(h=(0,r.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var n=(0,f.i)(0,{id:e,name:t.n});navigator.share&&navigator.share({title:t.n,url:n}).then(function(){(0,v.a)("check_circle","已分享路線")}).catch(function(e){(0,v.a)("cancel","已取消分享")})}})).apply(this,arguments)}function m(){return(m=(0,r.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var n=(0,f.i)(0,{id:e,name:t.n});(0,p.X8)(n)}})).apply(this,arguments)}var y=n(7968),g=n(6141);function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w='"Noto Sans TC", sans-serif',x=(0,l.gO)("route-details-canvas"),k=x.width,C=x.height,S=Math.min(window.devicePixelRatio,1.875)||1,E={};function I(){var e=document.createElement("div");return e.classList.add("qe"),{element:e,id:""}}function D(){var e=document.createElement("div");e.classList.add("re");var t=document.createElement("canvas");return t.classList.add("se"),e.appendChild(t),{element:e,id:""}}function L(e,t,n,r,a,i){e.innerText=t.name,e.setAttribute("day",i.toString()),e.onclick=function(){!function(e){for(var t=(0,o.Js)("playing_animation"),n=(0,c.jg)(J,".qe"),r=(0,c.jg)(Q,".re"),a=0;a<7;a++){var i,u,l=n[a],d=r[a],s=`d_${a}`,f=null===(i=E)||void 0===i?void 0:i.calendarEventGroups[s],v=null===(u=E)||void 0===u?void 0:u.calendarDays[s];if(f&&v){var p=(0,g.t)("--c"),h=(0,g.t)("--d"),m=(0,g.t)("--e"),y=(0,g.t)("--nc"),b=(0,g.t)("--b"),A=(0,g.t)("--ra");L(l,v,e,!1,t,a),T(d,f,e,b,p,h,m,y,A,a)}}}(i)},e.setAttribute("highlighted",n===i?"true":"false"),e.setAttribute("animation",(0,u.xZ)(a)),e.setAttribute("skeleton-screen",(0,u.xZ)(r))}function T(e,t,n,r,a,i,o,d,s,f){function v(e,t,n){var r=70*t;e.fillStyle=n,e.fillRect(45,r+5,k-45,1.2),e.font=`400 12px ${w}`,e.textBaseline="top";var a=`${String(t).padStart(2,"0")}:00`,i=e.measureText(a),o=i.width,c=i.actualBoundingBoxDescent;e.fillText(a,(45-o)/2,r+(10-c)/2,o)}function p(e,t,n,r,a,i,o){var c=new Date;c.setDate(1),c.setMonth(0),c.setFullYear(t.date.getFullYear()),c.setMonth(t.date.getMonth()),c.setDate(t.date.getDate()),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var u=(t.date.getTime()-c.getTime())/864e5*24*70,l=k-45,d=60*t.duration*1e3/864e5*24*70;(0,y.wg)(e,45,u,l,d,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,y.wg)(e,45,u,3,d,{tl:3,tr:0,bl:3,br:0},n),e.font=`400 14px ${w}`,e.textBaseline="top",e.fillStyle=n;var s=t.dateString,f=e.measureText(s),v=f.width,p=f.actualBoundingBoxDescent;e.fillText(s,53,u+(d-p)/2,v)}var h=(0,c.aI)(e,".se"),m=h.getContext("2d");if(function(e,t,n){var r=t===n;e.setAttribute("displayed",(0,u.xZ)(r))}(e,n,f),function(e){x=(0,l.gO)("route-details-canvas"),k=x.width,C=x.height,S=Math.min(window.devicePixelRatio,1.875)||1,e.width=k*S,e.height=C*S;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(S,S)}(h),n===f){m.clearRect(0,0,k,C);for(var g=0;g<24;g++)v(m,g,s);var A,E=b(t);try{for(E.s();!(A=E.n()).done;){p(m,A.value,r,a,i,o,d)}}catch(e){E.e(e)}finally{E.f()}}else m.clearRect(0,0,k,C)}function M(e,t,n){var r=(new Date).getDay(),a=(0,g.t)("--c"),i=(0,g.t)("--d"),o=(0,g.t)("--e"),u=(0,g.t)("--nc"),l=(0,g.t)("--b"),d=(0,g.t)("--ra"),s=e.calendarDays,f=e.calendarDayQuantity,v=e.calendarEventGroups,p=(e.calendarEventQuantity,(0,c.jg)(Q,".re").length);if(f!==p){var h=p-f;if(h<0){for(var m=new DocumentFragment,y=new DocumentFragment,b=0,A=Math.abs(h);b<A;b++){var w=I();m.appendChild(w.element);var x=D();y.appendChild(x.element)}J.append(m),Q.append(y)}else for(var k=(0,c.jg)(J,".qe"),C=(0,c.jg)(Q,".re"),S=0,M=Math.abs(h);S<M;S++){var _=p-1-S;k[_].remove(),C[_].remove()}}for(var j=(0,c.jg)(J,".qe"),$=(0,c.jg)(Q,".re"),Z=0;Z<f;Z++){var F=`d_${Z}`,R=s[F],H=v[F],q=j[Z],B=$[Z];L(q,R,r,t,n,Z),T(B,H,r,l,a,i,o,u,d,Z)}E=e}var _=n(4537),j=[],$=!1,Z=!1;function F(){var e=document.createElement("div");e.classList.add("te");var t=document.createElement("div");t.classList.add("ue"),t.appendChild((0,_.oC)()),e.appendChild(t);var n=document.createElement("div");return n.classList.add("ve"),e.appendChild(n),{element:e,id:""}}function R(e,t,n){function r(e,r,a){function i(e,t){var n=(0,c.aI)(e,".ue");(0,_.yD)(n,t.icon)}function o(e,t){(0,c.aI)(e,".ve").innerText=t.value}function l(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}null==a?(i(e,r),o(e,r),l(e,n),d(e,t)):((0,u.hw)(a,r)||i(e,r),(0,u.hw)(a,r)||o(e,r),$!==n&&l(e,n),Z!==t&&d(e,t))}var a=e.length;t!==Z&&X.setAttribute("skeleton-screen",(0,u.xZ)(t));var i=(0,c.jg)(V,".te").length;if(a!==i){var o=i-a;if(o<0){for(var l=new DocumentFragment,d=0,s=Math.abs(o);d<s;d++){var f=F();l.appendChild(f.element)}V.append(l)}else for(var v=(0,c.jg)(V,".te"),p=0,h=Math.abs(o);p<h;p++){v[i-1-p].remove()}}for(var m=(0,c.jg)(V,".te"),y=0;y<a;y++){var g=m[y],b=e[y];0===j.length?r(g,b,null):r(g,b,j[y])}j=e,$=n,Z=t}function H(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=(0,c.bv)(".ke"),O=(0,c.aI)(B,".le"),G=(0,c.aI)(O,".me"),N=(0,c.aI)(G,'.ne[group="calendar"]'),Y=(0,c.aI)(N,".oe"),J=(0,c.aI)(Y,".we"),Q=(0,c.aI)(Y,".xe"),U=(0,c.aI)(B,'.le .me .ne[group="actions"]'),W=(0,c.aI)(U,'.oe .pe[action="save-to-folder"]'),z=(0,c.aI)(U,'.oe .pe[action="get-permalink"]'),P=(0,c.aI)(U,'.oe .pe[action="show-permalink-qrcode"]'),X=(0,c.aI)(G,'.ne[group="properties"]'),V=(0,c.aI)(X,".oe");function K(){return K=(0,r.A)(function*(e,t){var n=(0,o.Js)("playing_animation"),r=yield(0,a.LH)("route",e);W.setAttribute("animation",(0,u.xZ)(n)),W.setAttribute("highlighted",(0,u.xZ)(r)),W.onclick=function(){(0,d.B)("route",[e])},z.setAttribute("animation",(0,u.xZ)(n)),z.onclick=function(){!function(e){h.apply(this,arguments)}(e)},P.setAttribute("animation",(0,u.xZ)(n)),P.onclick=function(){!function(e){m.apply(this,arguments)}(e)},function(){for(var e=(0,o.Js)("playing_animation"),t=[],n=0;n<5;n++)t.push({key:n,icon:"none",value:""});R(t,!0,e)}(),function(){for(var e=(0,o.Js)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var i=`d_${a}`;n[i]=[],r[i]={day:a,code:"d_{i}",name:""};for(var c=0;c<t[i];c++){var u=new Date;u.setHours(0),u.setMinutes(30*c),u.setSeconds(0),u.setMilliseconds(0),n[i].push({date:u,dateString:"",duration:15})}}M({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var c=(0,u.zx)(),l=yield(0,i.p)(e,t,c);R(l.properties,!1,n),M(l.calendar,!1,n)}),K.apply(this,arguments)}function ee(e,t){(0,l.WR)("RouteDetails"),B.setAttribute("displayed","true"),function(e,t){K.apply(this,arguments)}(e,t)}function te(){(0,l.kr)("RouteDetails"),B.setAttribute("displayed","false");var e,t=H((0,c.jg)(Q,".re"));try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(e){t.e(e)}finally{t.f()}var n,r=H((0,c.jg)(J,".qe"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(e){r.e(e)}finally{r.f()}}},5392(){},5461(){},6018(){},6388(){},6597(){},7217(){},7225(){},7287(){},7723(){},7868(){},9991(){}}]);
//# sourceMappingURL=b85efedad499984ed972.js.map