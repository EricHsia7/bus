"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(t,e,a){a.d(e,{a:()=>ft,b:()=>Z,c:()=>bt});var s=a(467),i=a(5767),d=a(9566),r=a(3422),n=a(5314),l=a(7123),o=a(3459),u=a(8179),c=a(7968),p=a(8024),h=a(5579),b=a(4537),f=a(904),v=a(3030),A=a(9119),g=a(3041),m=a(752),y=a(5286),C=(0,u.c)(".ca"),L=(0,u.e)(C,".dm"),w=(0,u.e)(L,".gm"),x=(0,u.e)(w,"span"),T=(0,u.e)(L,".fm"),k=(0,u.e)(L,".mm .nm"),_=(0,u.e)(L,".hm"),R=(0,u.e)(_,".im"),P=(0,u.e)(L,".km"),$=(0,u.e)(P,".lm"),S=(0,u.e)(C,".da"),D={},I=!1,E=!1,N=0,q=0,B=0,M={},z=0,F=!1,j=15e3,Q=5e3,H=15e3,U=!0,W=0,G=0,J="",K=!1,O=!1,V=!1,X=0,Y=[];function Z(){S.addEventListener("touchstart",function(){N=Math.round(S.scrollLeft/z)},{passive:!0}),S.addEventListener("scroll",function(t){F=!0;var e=t.target.scrollLeft/z;q=e>N?N+1:N-1;var a=e-N,s=Math.abs(a);s>1&&(a>0?(N=Math.floor(e),q=N+1):(N=Math.ceil(e),q=N-1),s=Math.abs(e-N));var i=M[`g_${N}`]||{width:0,offset:0},d=M[`g_${q}`]||{width:0,offset:0},r=i.width+(d.width-i.width)*s,n=-1*(i.offset+(d.offset-i.offset)*s)+.5*z-.5*r;tt(B,n,r-20,e)},{passive:!0}),S.addEventListener("scrollend",function(t){var e=t.target.scrollLeft/z;N=Math.round(e),F=!1},{passive:!0})}function tt(t,e,a,s){S.style.setProperty("--ul",t.toString()),$.style.setProperty("--yl",a.toString()),R.style.setProperty("--zl",`${e.toString()}px`),R.style.setProperty("--am",s.toString())}function et(t){var e=t;if(K){var a=e.detail.progress-1;k.style.setProperty("--bm",a.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,et)}function at(){var t=(0,u.a)();t.classList.add("qm"),t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var e=(0,u.a)();e.classList.add("rm");var a=(0,u.a)();a.classList.add("_n"),a.setAttribute("displayed","false"),e.appendChild(a);var s=(0,u.a)();s.classList.add("sm");var i=(0,u.a)();i.classList.add("cb"),i.setAttribute("code","0"),i.setAttribute("displayed","false"),s.appendChild(i);var d=(0,u.a)();return d.classList.add("db"),d.setAttribute("code","0"),d.setAttribute("displayed","true"),s.appendChild(d),t.appendChild(e),t.appendChild(s),t}function st(t){var e=(0,u.a)();e.classList.add("ia"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var a=(0,u.a)();a.classList.add("oa");var s=(0,u.a)();s.classList.add("pa"),a.appendChild(s);var i=(0,u.a)();i.classList.add("ra");var d=(0,u.a)();d.classList.add("bb");var r=(0,u.a)();r.classList.add("cb"),r.setAttribute("code","0"),r.setAttribute("displayed","false"),d.appendChild(r);var n=(0,u.a)();n.classList.add("db"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),d.appendChild(n),i.appendChild(d);var l=(0,u.a)();l.classList.add("_a"),l.appendChild((0,b.b)("keyboard_arrow_down")),l.onclick=function(){!function(t,e){var a=(0,u.e)(t,".ob"),s=t.parentElement,i=e.parentElement,d=(0,u.f)(e,"qm"),r=(0,u.f)(t,"ia"),n=r.length,l=s.getBoundingClientRect(),o=t.getBoundingClientRect(),c=i.getBoundingClientRect(),p=e.getBoundingClientRect(),h=p.top-c.top,b=o.top-l.top,f="true"===t.getAttribute("stretched"),v="true"===t.getAttribute("animation");if(v){var A=f?"2":"1";e.setAttribute("stretching","true"),e.style.setProperty("--do",`${h}px`),t.setAttribute("stretching","true"),t.style.setProperty("--ba",`${b}px`);for(var g=0;g<n;g++){var m=r[g],y=d[g];y.style.setProperty("--eo",(-1*g-1).toString()),y.setAttribute("push-direction",A),y.setAttribute("push-state","1"),m.setAttribute("push-direction",A),m.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var a=0;a<n;a++){var s=r[a],i=d[a];i.setAttribute("push-direction","0"),i.setAttribute("push-state","0"),s.setAttribute("push-direction","0"),s.setAttribute("push-state","0")}e.setAttribute("stretching","false"),t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var t=0;t<n;t++){var e=r[t];d[t].setAttribute("push-state","2"),e.setAttribute("push-state","2")}},{once:!0})}f?(v?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"),e.setAttribute("stretched","true"))}(e,t)},i.appendChild(l);var o=(0,u.a)();o.classList.add("wa"),i.appendChild(o),a.appendChild(i);var c=(0,u.a)();c.classList.add("ob"),c.setAttribute("displayed","false");var p=(0,u.a)();p.classList.add("pb");var h=(0,u.a)();h.classList.add("qb"),h.setAttribute("highlighted","true"),h.setAttribute("type","tab"),h.setAttribute("code","0"),h.onclick=function(){At(e,0)};var f=(0,u.a)();f.classList.add("zb"),f.appendChild((0,b.b)("directions_bus")),h.appendChild(f),h.appendChild(document.createTextNode("公車")),p.appendChild(h);var v=(0,u.a)();v.classList.add("qb"),v.setAttribute("highlighted","false"),v.setAttribute("type","tab"),v.setAttribute("code","1"),v.onclick=function(){At(e,1)};var A=(0,u.a)();A.classList.add("zb"),A.appendChild((0,b.b)("departure_board")),v.appendChild(A),v.appendChild(document.createTextNode("抵達時間")),p.appendChild(v);var g=(0,u.a)();g.classList.add("qb"),g.setAttribute("highlighted","false"),g.setAttribute("type","tab"),g.setAttribute("code","2"),g.onclick=function(){At(e,2)};var m=(0,u.a)();m.classList.add("zb"),m.appendChild((0,b.b)("route")),g.appendChild(m),g.appendChild(document.createTextNode("路線")),p.appendChild(g);var y=(0,u.a)();y.classList.add("qb"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){At(e,3)};var C=(0,u.a)();C.classList.add("zb"),C.appendChild((0,b.b)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),p.appendChild(y);var L=(0,u.a)();L.classList.add("qb"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var w=(0,u.a)();w.classList.add("zb"),w.appendChild((0,b.b)("folder")),L.appendChild(w),L.appendChild(document.createTextNode("儲存")),p.appendChild(L);var x=(0,u.a)();x.classList.add("qb"),x.setAttribute("highlighted","false"),x.setAttribute("type","schedule-notification"),x.setAttribute("enabled","true");var T=(0,u.a)();T.classList.add("zb"),T.appendChild((0,b.b)("notifications")),x.appendChild(T),x.appendChild(document.createTextNode("通知")),p.appendChild(x),c.appendChild(p);var k=(0,u.a)();k.classList.add("ac"),k.setAttribute("displayed","true"),c.appendChild(k);var _=(0,u.a)();_.classList.add("bc"),_.setAttribute("displayed","false"),c.appendChild(_);var R=(0,u.a)();R.classList.add("cc"),R.setAttribute("displayed","false"),c.appendChild(R);var P=(0,u.a)();return P.classList.add("dc"),P.setAttribute("displayed","false"),c.appendChild(P),e.appendChild(a),e.appendChild(c),e}function it(){var t=(0,u.a)();t.classList.add("ea");var e=(0,u.a)();e.classList.add("fa");var a=(0,u.a)();a.classList.add("pm");var s=(0,u.a)();s.classList.add("ao");var i=(0,u.a)();i.classList.add("ga");var d=(0,u.a)();return d.classList.add("ha"),i.appendChild(d),a.appendChild(s),e.appendChild(a),e.appendChild(i),t.appendChild(e),t}function dt(){var t=(0,u.a)();t.classList.add("jm");var e=document.createElement("span");return t.appendChild(e),t}function rt(){var t=(0,u.a)();t.classList.add("ec"),t.setAttribute("on-this-route","false");var e=(0,u.a)();e.classList.add("rc");var a=(0,u.a)();a.classList.add("vc"),a.appendChild((0,b.b)("directions_bus"));var s=(0,u.a)();s.classList.add("zc");var i=(0,u.a)();i.classList.add("ed");var d=(0,u.a)();d.classList.add("gd");var r=(0,u.a)();r.classList.add("hd");var n=(0,u.a)();return n.classList.add("id"),e.appendChild(a),e.appendChild(s),t.appendChild(e),i.appendChild(d),i.appendChild(r),i.appendChild(n),t.appendChild(i),t}function nt(){var t=(0,u.a)();t.classList.add("fc");var e=(0,u.a)();e.classList.add("sc");var a=(0,u.a)();a.classList.add("wc"),a.appendChild((0,b.b)("route"));var s=(0,u.a)();s.classList.add("_c");var i=(0,u.a)();i.classList.add("jd");var d=(0,u.a)();d.classList.add("md");var r=(0,u.a)();r.classList.add("od"),r.setAttribute("type","view-route"),r.innerText="查看路線";var n=(0,u.a)();return n.classList.add("od"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存路線",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),d.appendChild(r),d.appendChild(n),t.appendChild(d),t}function lt(){var t=(0,u.a)();t.classList.add("gc");var e=(0,u.a)();e.classList.add("tc");var a=(0,u.a)();a.classList.add("xc"),a.appendChild((0,b.b)("calendar_view_day"));var s=(0,u.a)();s.classList.add("ad");var i=(0,u.a)();i.classList.add("cd");var d=(0,u.a)();return d.classList.add("fd"),e.appendChild(a),e.appendChild(s),e.appendChild(i),t.appendChild(e),t.appendChild(d),t}function ot(){var t=(0,u.a)();t.classList.add("hc");var e=(0,u.a)();e.classList.add("uc");var a=(0,u.a)();a.classList.add("yc"),a.appendChild((0,b.b)("location_on"));var s=(0,u.a)();s.classList.add("bd");var i=(0,u.a)();i.classList.add("kd");var d=(0,u.a)();d.classList.add("nd");var r=(0,u.a)();r.classList.add("pd"),r.setAttribute("type","view-location"),r.innerText="查看地點";var n=(0,u.a)();return n.classList.add("pd"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存地點",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),d.appendChild(r),d.appendChild(n),t.appendChild(d),t}function ut(t,e,a){var s,i;function n(e,a,s,i,n,l){function o(t,e,a,s,i){var d=(0,u.e)(e,".sm"),r=(0,u.e)(d,".db"),n=(0,u.e)(d,".cb"),l=(0,u.e)(t,".bb"),o=(0,u.e)(l,".db"),c=(0,u.e)(l,".cb");if(n.setAttribute("code",a.status.code.toString()),c.setAttribute("code",a.status.code.toString()),c.innerText=a.status.text,!s&&i){var p=t.getBoundingClientRect(),h=p.top,b=p.left,f=p.bottom,v=p.right,A=window.innerWidth,g=window.innerHeight;if(f>0&&h<g&&v>0&&b<A)return r.addEventListener("animationend",function(){r.setAttribute("code",a.status.code.toString()),r.classList.remove("nb"),n.setAttribute("displayed","false")},{once:!0}),o.addEventListener("animationend",function(){o.setAttribute("code",a.status.code.toString()),o.innerText=a.status.text,o.classList.remove("nb"),c.setAttribute("displayed","false")},{once:!0}),c.setAttribute("displayed","true"),n.setAttribute("displayed","true"),r.classList.add("nb"),void o.classList.add("nb")}r.setAttribute("code",a.status.code.toString()),o.setAttribute("code",a.status.code.toString()),o.innerText=a.status.text}function c(t,e,a){t.setAttribute("segment-buffer",(0,p.a)(a.segmentBuffer.isSegmentBuffer)),e.setAttribute("segment-buffer",(0,p.a)(a.segmentBuffer.isSegmentBuffer))}function b(t,e){(0,u.e)(t,".pa").innerText=e.name}function f(t,e){var a=(0,u.e)(t,".ac"),s=Array.from((0,u.d)(a,".ec")),i=s.length,d=e.buses.length,r=i-d;if(r<0){for(var n=new DocumentFragment,l=0;l>r;l--){var o=rt();n.appendChild(o),s.push(o)}a.append(n)}else if(r>0)for(var c=i-1,h=i-r-1;c>h;c--)s[c].remove(),s.splice(c,1);for(var b=0;b<d;b++){var f=e.buses[b],v=s[b],A=(0,u.e)(v,".rc"),g=(0,u.e)(A,".zc"),m=(0,u.e)(v,".ed"),y=(0,u.e)(m,".gd"),C=(0,u.e)(m,".hd"),L=(0,u.e)(m,".id");v.setAttribute("on-this-route",(0,p.a)(f.onThisRoute)),g.innerText=f.carNumber,y.innerText=`路線：${f.RouteName}`,C.innerText=`狀態：${f.status.text}`,L.innerText=`類型：${f.type}`}a.setAttribute("empty",(0,p.a)(0===d))}function A(t,e){var a=(0,u.e)(t,".bc"),s=Array.from((0,u.d)(a,".fc")),i=s.length,r=e.overlappingRoutes.length,n=i-r;if(n<0){for(var l=new DocumentFragment,o=0;o>n;o--){var c=nt();l.appendChild(c),s.push(c)}a.append(l)}else if(n>0)for(var h=i-1,b=i-n-1;h>b;h--)s[h].remove(),s.splice(h,1);for(var f=0;f<r;f++){var v=e.overlappingRoutes[f],A=s[f],m=(0,u.e)(A,".sc"),y=(0,u.e)(m,"._c"),C=(0,u.e)(A,".jd"),L=(0,u.e)(A,".md"),w=(0,u.e)(L,'.od[type="view-route"]'),x=(0,u.e)(L,'.od[type="save-to-folder"]');y.innerText=v.name,C.innerText=v.RouteEndPoints.text,function(t,e,a){t.onclick=function(){vt(e,a)}}(w,v.RouteID,v.PathAttributeId),function(t,e){t.onclick=function(){(0,g.b)("route",[e],t)},(0,d.e)("route",e).then(function(e){t.setAttribute("highlighted",(0,p.a)(e))})}(x,v.RouteID)}a.setAttribute("empty",(0,p.a)(0===r))}function y(t,e){var a=(0,u.e)(t,".cc"),s=Array.from((0,u.d)(a,".gc")),i=s.length,d=e.busArrivalTimes.length,r=i-d;if(r<0){for(var n=new DocumentFragment,l=0;l>r;l--){var o=lt();n.appendChild(o),s.push(o)}a.append(n)}else if(r>0)for(var c=i-1,b=i-r-1;c>b;c--)s[c].remove(),s.splice(c,1);for(var f=0;f<d;f++){var v=e.busArrivalTimes[f],A=s[f],g=(0,u.e)(A,".tc"),m=(0,u.e)(g,".ad"),y=(0,u.e)(g,".cd"),C=(0,u.e)(A,".fd");m.innerText=v.personalSchedule.name,y.innerText=`週${(0,h.g)(v.day).name} ${(0,h.i)(v.personalSchedule.period.start)} - ${(0,h.i)(v.personalSchedule.period.end)}`,C.innerHTML=v.chart}a.setAttribute("empty",(0,p.a)(0===d))}function C(t,e){var a=(0,u.e)(t,".dc"),s=Array.from((0,u.d)(a,".hc")),i=s.length,r=e.nearbyLocations.length,n=i-r;if(n<0){for(var l=new DocumentFragment,o=0;o>n;o--){var c=ot();l.appendChild(c),s.push(c)}a.append(l)}else if(n>0)for(var h=i-1,b=i-n-1;h>b;h--)s[h].remove(),s.splice(h,1);for(var f=0;f<r;f++){var A=e.nearbyLocations[f],m=s[f],y=(0,u.e)(m,".uc"),C=(0,u.e)(y,".bd"),L=(0,u.e)(m,".kd"),w=(0,u.e)(m,".nd"),x=(0,u.e)(w,'.pd[type="view-location"]'),T=(0,u.e)(w,'.pd[type="save-to-folder"]');C.innerText=A.name,L.innerText=`${A.distance}公尺`,function(t,e){t.onclick=function(){(0,v.c)(e)}}(x,A.hash),function(t,e){t.onclick=function(){(0,g.b)("location",[e],t)},(0,d.e)("location",e).then(function(e){t.setAttribute("highlighted",(0,p.a)(e))})}(T,A.hash)}a.setAttribute("empty",(0,p.a)(0===r))}function L(t,e,a){t.setAttribute("nearest",(0,p.a)(a.nearest)),e.setAttribute("nearest",(0,p.a)(a.nearest))}function w(t,e,a,s,i){var d=(null==a?void 0:a.progress)||0,r=(null==e?void 0:e.progress)||0,n=(0,u.e)(t,".rm ._n");if(!s&&i&&0!==d&&0===r&&Math.abs(r-d)>0)return n.style.setProperty("--bo","100%"),void n.addEventListener("transitionend",function(){n.setAttribute("displayed","false"),n.style.setProperty("--bo","-100%")},{once:!0});r>0?(n.setAttribute("displayed","true"),n.style.setProperty("--bo",100*(r-1)+"%")):n.setAttribute("displayed","false")}function x(t,e,a){a&&((0,u.e)(t,".ob").setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false"))}function T(t,e,a){t.setAttribute("animation",(0,p.a)(a)),e.setAttribute("animation",(0,p.a)(a))}function k(t,e,a){t.setAttribute("skeleton-screen",(0,p.a)(a)),e.setAttribute("skeleton-screen",(0,p.a)(a))}function _(e,a){var s=(0,u.e)(e,'.ob .pb .qb[type="save-to-folder"]');s.onclick=function(){(0,g.b)("stop",[a.id,t.RouteID],s)},(0,d.e)("stop",a.id).then(function(t){s.setAttribute("highlighted",(0,p.a)(t))})}function R(e,a){var s=(0,u.e)(e,'.ob .pb .qb[type="schedule-notification"]');s.onclick=function(){(0,m.b)(s,a.id,t.RouteID,a.status.time)};var i=(0,r.r)(a.id);s.setAttribute("highlighted",(0,p.a)(i))}null===i?(o(e,a,s,n,l),b(e,s),f(e,s),A(e,s),y(e,s),C(e,s),c(e,a,s),L(e,a,s),w(a,s,i,n,l),x(e,a,n),T(e,a,l),k(e,a,n),_(e,s),R(e,s)):(s.status.time!==i.status.time&&(o(e,a,s,n,l),R(e,s)),(0,p.b)(i.buses,s.buses)||f(e,s),(0,p.b)(i.busArrivalTimes,s.busArrivalTimes)||y(e,s),i.nearest!==s.nearest&&L(e,a,s),i.progress!==s.progress&&w(a,s,i,n,l),i.id!==s.id&&(b(e,s),c(e,a,s),A(e,s),C(e,s),_(e,s),R(e,s)),I!==l&&T(e,a,l),E!==n&&(x(e,a,n),k(e,a,n)))}var l=(0,f.e)("window"),o=l.width,b=l.height,A=t.groupQuantity,C=t.itemQuantity,L=t.groupedItems,k=t.groupNames;B=A,z=o;for(var $=0,q=0;q<A;q++){var j=`g_${q}`,Q=(0,c.d)(k[q],500,"17px",'"Noto Sans TC", sans-serif')+20;M[j]={width:Q,offset:$},$+=Q}if(M[`g_${A}`]={width:0,offset:$},!F){var H=M[`g_${N}`],U=-1*H.offset+.5*z-.5*H.width,W=H.width-20;tt(B,U,W,N)}E!==e&&(w.setAttribute("skeleton-screen",(0,p.a)(e)),_.setAttribute("skeleton-screen",(0,p.a)(e)),P.setAttribute("skeleton-screen",(0,p.a)(e))),I!==a&&(w.setAttribute("animation",(0,p.a)(a)),_.setAttribute("animation",(0,p.a)(a)),P.setAttribute("animation",(0,p.a)(a))),(null===(s=D)||void 0===s?void 0:s.RouteID)!==t.RouteID&&(T.onclick=function(){(0,y.f)(t.RouteID,t.PathAttributeId)}),(null===(i=D)||void 0===i?void 0:i.RouteName)!==t.RouteName&&(x.innerText=t.RouteName);var G=Array.from((0,u.d)(S,".ea")),J=Array.from((0,u.d)(R,".jm")),K=G.length;if(A!==K){var O=K-A;if(O<0){for(var V=new DocumentFragment,X=new DocumentFragment,Y=0;Y>O;Y--){var Z=it();V.appendChild(Z),G.push(Z);var et=dt();X.appendChild(et),J.push(et)}S.append(V),R.append(X)}else if(O>0)for(var ut=K-1,ct=K-O-1;ut>ct;ut--)G[ut].remove(),G.splice(ut,1),J[ut].remove(),J.splice(ut,1)}for(var pt=0;pt<A;pt++){var ht=`g_${pt}`,bt=G[pt],ft=(0,u.e)(bt,".ga"),At=(0,u.e)(bt,".pm"),gt=Array.from((0,u.d)(ft,".ia")),mt=Array.from((0,u.d)(At,".qm")),yt=gt.length;if(C[ht]!==yt){var Ct=yt-C[ht];if(Ct<0){for(var Lt=new DocumentFragment,wt=new DocumentFragment,xt=0;xt>Ct;xt--){var Tt=at(),kt=st(Tt);Lt.appendChild(kt),gt.push(kt),wt.appendChild(Tt),mt.push(Tt)}ft.append(Lt),At.append(wt)}else if(Ct>0)for(var _t=yt-1,Rt=yt-Ct-1;_t>Rt;_t--)gt[_t].remove(),gt.splice(_t,1),mt[_t].remove(),mt.splice(_t,1)}var Pt=J[pt];(0,u.e)(Pt,"span").innerText=k[pt],Pt.style.setProperty("--vl",`${M[ht].offset}px`),Pt.style.setProperty("--wl",`${M[ht].width}px`),Pt.style.setProperty("--xl",pt.toString()),e&&(bt.scrollTop=0);for(var $t=0;$t<C[ht];$t++){var St=gt[$t],Dt=mt[$t],It=L[ht][$t];if((0,p.e)(D,"groupedItems"))if((0,p.e)(D.groupedItems,ht))if(D.groupedItems[ht][$t])n(St,Dt,It,D.groupedItems[ht][$t],e,a);else n(St,Dt,It,null,e,a);else n(St,Dt,It,null,e,a);else n(St,Dt,It,null,e,a)}}R.style.setProperty("--_l",`${$}px`),D=t,I=a,E=e}function ct(){return pt.apply(this,arguments)}function pt(){return(pt=(0,s.a)(function*(){var t=(0,o.b)("playing_animation"),e=(0,o.b)("refresh_interval"),a=(0,f.e)("route-bus-arrival-time-chart");U=e.dynamic,j=e.baseInterval,K=!0,J=(0,p.c)(),k.setAttribute("refreshing","true"),k.classList.remove("om"),document.addEventListener(J,et);var s=yield(0,l.a)(X,Y,a.width,a.height,J);ut(s,!1,t);var d=0;U&&(d=yield(0,i.c)()),W=(new Date).getTime(),G=U?Math.max(W+Q,s.dataUpdateTime+j/d):W+j,H=Math.max(Q,G-W),K=!1,k.setAttribute("refreshing","false"),k.style.setProperty("--cm",`${H}ms`),k.classList.add("om")})).apply(this,arguments)}function ht(){ct().then(function(){O?setTimeout(function(){ht()},Math.max(Q,G-(new Date).getTime())):V=!1}).catch(function(t){O?((0,A.a)("error","路線網路連線中斷，將在10秒後重試。"),setTimeout(function(){ht()},1e4)):V=!1})}function bt(t,e){(0,f.d)("Route"),(0,n.e)("route",t),X=t,Y=e,N=0,M={},C.setAttribute("displayed","true"),S.scrollLeft=0,S.focus(),function(t,e){for(var a=(0,o.b)("playing_animation"),s=(0,f.e)("window"),i=(s.width,s.height),d=Math.floor(i/50)+5,r={},n=0;n<2;n++){var l=`g_${n}`;r[l]=[];for(var u=0;u<d;u++)r[l].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:u,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}ut({groupNames:["往載入中","往載入中"],groupedItems:r,groupQuantity:2,itemQuantity:{g_0:d,g_1:d},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:t,PathAttributeId:e,dataUpdateTime:0},!0,a)}(t,e),O||(O=!0,V?ct():(V=!0,ht())),(0,f.a)()}function ft(){C.setAttribute("displayed","false"),O=!1,(0,f.c)()}function vt(t,e){O=!1,bt(t,e)}function At(t,e){var a=(0,u.e)(t,".pb"),s=(0,u.d)(a,'.qb[highlighted="true"][type="tab"]');for(var i of s)i.setAttribute("highlighted","false");switch((0,u.e)(a,`.qb[code="${e}"]`).setAttribute("highlighted","true"),e){case 0:(0,u.e)(t,".ac").setAttribute("displayed","true"),(0,u.e)(t,".cc").setAttribute("displayed","false"),(0,u.e)(t,".bc").setAttribute("displayed","false"),(0,u.e)(t,".dc").setAttribute("displayed","false");break;case 1:(0,u.e)(t,".ac").setAttribute("displayed","false"),(0,u.e)(t,".cc").setAttribute("displayed","true"),(0,u.e)(t,".bc").setAttribute("displayed","false"),(0,u.e)(t,".dc").setAttribute("displayed","false");break;case 2:(0,u.e)(t,".ac").setAttribute("displayed","false"),(0,u.e)(t,".cc").setAttribute("displayed","false"),(0,u.e)(t,".bc").setAttribute("displayed","true"),(0,u.e)(t,".dc").setAttribute("displayed","false");break;case 3:(0,u.e)(t,".ac").setAttribute("displayed","false"),(0,u.e)(t,".cc").setAttribute("displayed","false"),(0,u.e)(t,".bc").setAttribute("displayed","false"),(0,u.e)(t,".dc").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=f2c3a37faccec6b077e1.js.map