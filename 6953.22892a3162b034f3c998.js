"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[1775,6953],{752(e,t,n){n.d(t,{Ho:()=>m,b$:()=>p});var r=n(77),a=n(8179),i=n(4537),o=n(904),c=n(9119);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=document.querySelector(".zs"),s=(0,a.aI)(d,".ct"),f=(0,a.aI)(s,".dt");function h(e,t,n){var o=document.createElement("div");o.classList.add("et");var u=document.createElement("div");u.classList.add("ft");var l=document.createElement("span");l.appendChild((0,i.YC)(e.icon)),u.appendChild(l);var d=document.createElement("div");switch(d.classList.add("gt"),d.appendChild(document.createTextNode(e.name)),t){case"stop-on-route":o.onclick=function(){!function(e,t,n,i,o){var u=document.querySelector(`.zl ._l .am .bm .dm .do#${e}`),l=(0,a.aI)(u,'.ko .lo .mo[type="schedule-notification"]');(0,c.a)("manufacturing","處理中"),l.setAttribute("enabled","false"),p(),(0,r.mD)(t,n,i,o).then(function(e){switch(e){case 0:(0,c.a)("error","設定失敗"),l.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),l.setAttribute("enabled","true"),l.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),l.setAttribute("enabled","true")}})}(n[0],n[1],n[2],n[3],e.index)};break;case"stop-on-location":o.onclick=function(){!function(e,t,n,i,o){var u=document.querySelector(`.sh .ni .oi .xi .yi#${e}`),l=(0,a.aI)(u,'.sj .tj .uj[type="schedule-notification"]');(0,c.a)("manufacturing","處理中"),l.setAttribute("enabled","false"),p(),(0,r.mD)(t,n,i,o).then(function(e){switch(e){case 0:(0,c.a)("error","設定失敗"),l.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),l.setAttribute("enabled","true"),l.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),l.setAttribute("enabled","true")}})}(n[0],n[1],n[2],n[3],e.index)}}return o.appendChild(u),o.appendChild(d),{element:o,id:""}}function m(e,t){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(e,t){f.innerHTML="";var n,a=new DocumentFragment,i=u(r.FX);try{for(i.s();!(n=i.n()).done;){var o=h(n.value,e,t);a.appendChild(o.element)}}catch(e){i.e(e)}finally{i.f()}f.append(a)}(e,t)}function p(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},2994(e,t,n){n.d(t,{G:()=>b,Q:()=>g});var r=n(467),a=n(4225),i=n(3459),o=n(8179),c=n(8024),u=n(904),l=[],d=!1,s=!1,f=document.querySelector(".ht"),h=(0,o.aI)(f,".lt"),m=(0,o.aI)(h,".mt");function p(){var e=document.createElement("div");e.classList.add("nt");var t=document.createElement("div");t.classList.add("ot");var n=document.createElement("div");return n.classList.add("pt"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function v(e,t,n){function r(e,r,a){function i(e,t){(0,o.aI)(e,".pt").innerText=t.size}function u(e,t){(0,o.aI)(e,".ot").innerText=t.category.name}function l(e,t){e.setAttribute("animation",(0,c.xZ)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,c.xZ)(t))}a?(r.category.key!==a.category.key&&(u(e,r),i(e,r)),r.size!==a.size&&i(e,r),d!==n&&l(e,n),s!==t&&f(e,t)):(i(e,r),u(e,r),l(e,n),f(e,t))}var a=[];for(var i in e.categorizedSizes){var u=e.categorizedSizes[i];a.push(u)}var f=a.length,h=(0,o.jg)(m,".nt").length;if(f!==h){var v=h-f;if(v<0){for(var y=new DocumentFragment,b=0,g=Math.abs(v);b<g;b++){var w=p();y.appendChild(w.element)}m.appendChild(y)}else for(var A=(0,o.jg)(m,".nt"),k=0,S=Math.abs(v);k<S;k++){A[h-1-k].remove()}}for(var C=(0,o.jg)(m,".nt"),I=0;I<f;I++){var x=l[I],L=a[I],E=C[I];r(E,L,x||null)}l=a,s=t,d=n}function y(){return(y=(0,r.A)(function*(){var e=(0,i.Js)("playing_animation");!function(){for(var e=(0,i.Js)("playing_animation"),t=(0,u.gO)("window").height,n=Math.min(7,Math.floor(t/55)+2),r={categorizedSizes:{},totalSize:0},a=0;a<n;a++){var o=`store-${a}`;r.categorizedSizes[o]={category:{name:"",key:o},size:`size-${a}`}}v(r,!0,e)}(),v(yield(0,a.F)(),!1,e)})).apply(this,arguments)}function b(){f.setAttribute("displayed","true"),function(){y.apply(this,arguments)}()}function g(){f.setAttribute("displayed","false")}},3041(e,t,n){n.d(t,{B:()=>g,n:()=>w});var r=n(467),a=n(9566),i=n(8179),o=n(8024),c=n(4537),u=n(904),l=n(9119);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=document.querySelector(".qs"),h=(0,i.aI)(f,".us"),m=(0,i.aI)(h,".vs"),p="已儲存至資料夾",v="無法儲存";function y(e,t,n){var r=document.createElement("div");r.classList.add("ws");var u=document.createElement("div");u.classList.add("xs");var d=document.createElement("span");d.appendChild((0,c.YC)(e.icon)),u.appendChild(d);var s=document.createElement("div");switch(s.classList.add("ys"),s.appendChild(document.createTextNode(e.name)),t){case"stop-on-route":r.onclick=function(){!function(e,t,n,r){var c=document.querySelector(`.zl ._l .am .bm .dm .do#${e}`),u=(0,i.aI)(c,'.ko .lo .mo[type="save-to-folder"]');(0,a.aq)(t,n,r).then(function(e){e?(0,a.LH)("stop",n).then(function(e){e&&(u.setAttribute("highlighted",(0,o.xZ)(e)),(0,l.a)("folder",p),w())}):(0,l.a)("warning",v)})}(n[0],e.id,n[1],n[2])};break;case"stop-on-location":r.onclick=function(){!function(e,t,n,r){var c=document.querySelector(`.sh .ni .oi .xi .yi#${e}`),u=(0,i.aI)(c,'.sj .tj .uj[type="save-to-folder"]');(0,a.aq)(t,n,r).then(function(e){e?(0,a.LH)("stop",n).then(function(e){e&&(u.setAttribute("highlighted",(0,o.xZ)(e)),(0,l.a)("folder",p),w())}):(0,l.a)("warning",v)})}(n[0],e.id,n[1],n[2])};break;case"route":r.onclick=function(){var t,r,i;t=e.id,r=n[0],i=document.querySelector('.cc .dc .ec .fc[group="actions"] .gc .jc[action="save-to-folder"]'),(0,a.Fq)(t,r).then(function(e){e?(0,a.LH)("route",r).then(function(e){e&&(i.setAttribute("highlighted","true"),(0,l.a)("folder",p),w())}):(0,l.a)("warning",v)})};break;case"route-on-route":r.onclick=function(){var t,r;t=e.id,r=n[0],(0,a.Fq)(t,r).then(function(e){e?(0,a.LH)("route",r).then(function(e){e&&((0,l.a)("folder",p),w())}):(0,l.a)("warning",v)})};break;case"location":case"location-on-route":r.onclick=function(){var t,r;t=e.id,r=n[0],(0,a.DW)(t,r).then(function(e){e?(0,a.LH)("location",r).then(function(e){e&&((0,l.a)("folder",p),w())}):(0,l.a)("warning",v)})}}return r.appendChild(u),r.appendChild(s),{element:r,id:""}}function b(){return(b=(0,r.A)(function*(e,t){var n=yield(0,a.Xi)();m.innerHTML="";var r,i=new DocumentFragment,o=d(n);try{for(o.s();!(r=o.n()).done;){var c=y(r.value,e,t);i.appendChild(c.element)}}catch(e){o.e(e)}finally{o.f()}m.append(i)})).apply(this,arguments)}function g(e,t){(0,u.WR)("SaveToFolder"),f.setAttribute("displayed","true"),function(e,t){b.apply(this,arguments)}(e,t)}function w(){(0,u.kr)("SaveToFolder"),f.setAttribute("displayed","false")}},5009(e,t,n){n.d(t,{Bb:()=>ue,H2:()=>oe,RC:()=>ie,gn:()=>te,ld:()=>ne,rf:()=>ce});var r=n(8134),a=n(8179),i=n(7968),o=n(8024),c=n(6141),u=n(4781),l=n(4884),d=n(6082),s=n(4537),f=n(904),h=n(3030),m=n(9119),p=n(4690);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=[],g=document.querySelector(".rf"),w=(0,a.aI)(g,".sf"),A=(0,a.aI)(g,".tr"),k=(0,a.aI)(w,".tf #search_input"),S=(0,a.aI)(w,".tf canvas"),C=(0,a.aI)(w,".sr"),I=(0,a.aI)(A,".ur"),x=(0,a.aI)(A,".yr"),L=S.getContext("2d"),E=window.devicePixelRatio,j=15*E,T=1.8*E,M=.9*E,z=4*E,q=25*E,_=20*E,$=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],D=(0,c.t)("--j"),F=(0,c.t)("--ke"),H=(0,c.t)("--k"),O=0,N=0,R=0,U=!1,W=0,Z=(0,f.gO)("head-two-button"),Y=Z.width*E,B=Z.height*E,P=!1,G=!1;function J(){var e=ee(),t=e.substring(0,e.length-1);k.value=t,ie(),te(-1,-1),(0,f.p9)()}function X(){k.value="",ie(),te(-1,-1),(0,f.p9)()}function Q(e){e.preventDefault(),k.focus(),(0,f.p9)()}function K(){!function(){if(!G){G=!0;var e,t=new DocumentFragment,n=v($);try{for(n.s();!(e=n.n()).done;){var r,a=v(e.value);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=document.createElement("button");c.classList.add("zr");var u=(0,o.p1)()?"touchstart":"mousedown";switch(i){case"刪除":c.addEventListener(u,J),c.appendChild((0,s.YC)("backspace"));break;case"清空":c.addEventListener(u,X),c.appendChild(document.createTextNode(i));break;case"鍵盤":c.addEventListener(u,Q),c.appendChild((0,s.YC)("keyboard"));break;default:c.addEventListener(u,function(e){return function(){var t,n;t=e,n=`${ee()}${t}`,k.value=n,ie(),te(-1,-1),(0,f.p9)()}}(i)),c.appendChild(document.createTextNode(i))}t.appendChild(c)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}x.append(t)}}(),x.setAttribute("displayed","true"),P=!0,re(),te(-1,-1)}function V(){return parseInt(C.getAttribute("type"))}function ee(){return String(k.value)}function te(e,t){var n=ee(),r=!1;0===n.length?(n="搜尋路線、地點、公車",r=!0,e=0,t=0):-1===e&&-1===t&&(t=1*(e=n.length)),Z=(0,f.gO)("head-two-button"),Y=Z.width*E,B=Z.height*E,D=(0,c.t)("--j"),F=(0,c.t)("--ke"),H=(0,c.t)("--k"),L.font=`400 ${_}px "Noto Sans TC", sans-serif`,L.textAlign="center",L.textBaseline="middle",O=L.measureText(n).width,N=L.measureText(n.substring(0,e)).width,R=L.measureText(n.substring(e,t)).width,W=r?1:Math.max(1,N),L.clearRect(0,0,Y,B),e===t?(U=!0,L.globalAlpha=1,L.fillStyle=r?F:D,L.fillText(n,O/2+(Math.min(W,Y-j)-W),B/2),(0,i.wg)(L,Math.min(W,Y-j),(B-q)/2,T,q,M,H)):(U=!1,L.globalAlpha=.27,(0,i.wg)(L,Math.min(W,Y-j),(B-q)/2,R,q,z,H),L.globalAlpha=1,L.fillStyle=r?F:D,L.fillText(n,O/2+(Math.min(W,Y-j)-W),B/2),L.globalAlpha=.08,(0,i.wg)(L,Math.min(W,Y-j),(B-q)/2,R,q,z,H))}function ne(){Z=(0,f.gO)("head-two-button"),Y=Z.width,B=Z.height,S.width=Y*E,S.height=B*E,te(-1,-1)}function re(){var e=performance.now(),t=1-Math.pow(Math.sin(Math.PI*e/960),4);U&&(L.globalAlpha=t,L.clearRect(Math.min(W,Y-j)-1,0,T+2,B),(0,i.wg)(L,Math.min(W,Y-j),(B-q)/2,T,q,M,H)),P&&window.requestAnimationFrame(re)}function ae(){var e=document.createElement("div");e.classList.add("vr");var t=document.createElement("div");t.classList.add("xr");var n=document.createElement("div");return n.classList.add("wr"),n.appendChild((0,s.oC)()),e.appendChild(n),e.appendChild(t),{element:e,id:""}}function ie(){var e=["route","location_on","directions_bus"];function t(t,n,r){function i(t,n){var r=(0,a.aI)(n,".wr");(0,s.yD)(r,e[t.item.type])}function o(e,t){(0,a.aI)(t,".xr").innerText=e.item.n}function c(e,t){switch(e.item.type){case 0:t.onclick=function(){(0,p.SR)(e.item.id,e.item.pid)};break;case 1:t.onclick=function(){(0,h.so)(e.item.hash)};break;case 2:t.onclick=function(){(0,l.$l)(e.item.id)}}}r?(n.item.type!==r.item.type&&i(n,t),n.item.id!==r.item.id&&(o(n,t),c(n,t))):(i(n,t),o(n,t),c(n,t))}var n=V(),i=ee();if(!(0,u.iO)(i)){var o=(0,r.GU)(i,n,30),c=o.length,d=(0,a.jg)(I,".vr").length;if(c!==d){var f=d-c;if(f<0){for(var m=new DocumentFragment,v=0,y=Math.abs(f);v<y;v++){var g=ae();m.appendChild(g.element)}I.appendChild(m)}else for(var w=(0,a.jg)(I,".vr"),A=0,k=Math.abs(f);A<k;A++){w[d-1-A].remove()}}for(var S=(0,a.jg)(I,".vr"),C=0;C<c;C++){var x=b[C],L=o[C],E=S[C];t(E,L,x||null)}b=o}}function oe(){var e=V(),t=-1;t=e>=-1&&e<2?e+1:-1;(0,s.yD)(C,["filter_list","route","location_on","directions_bus"][t+1]),C.setAttribute("type",t.toString()),ie()}function ce(){d.m?((0,f.WR)("Search"),g.setAttribute("displayed","true"),K(),(0,r.dD)()):(0,m.a)("download_for_offline","資料還在下載中")}function ue(){(0,f.kr)("Search"),x.setAttribute("displayed","false"),P=!1,g.setAttribute("displayed","false")}},6166(e,t,n){n.d(t,{wx:()=>v,yH:()=>p});var r=n(3459),a=n(8179),i=n(904);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=document.querySelector("._r"),l=(0,a.aI)(u,".is"),d=(0,a.aI)(l,".js"),s=(0,a.aI)(l,".ps"),f=(0,a.aI)(u,".bs"),h=(0,a.aI)(f,".hs");function m(e,t,n){var a=document.createElement("div");a.classList.add("ks");var i=document.createElement("div");i.classList.add("ls"),i.appendChild(document.createTextNode(t.name));var c=document.createElement("div");c.classList.add("ms");var u=document.createElement("input");return u.type="checkbox",u.checked=e.option===n,u.onclick=function(t){!function(e,t,n){var a,i=o(document.querySelectorAll('._r .is .js .ks .ms input[type="checkbox"]'));try{for(i.s();!(a=i.n()).done;){a.value.checked=!1}}catch(e){i.e(e)}finally{i.f()}var c=e.target;c.checked=!0,(0,r.aN)(t,n)}(t,e.key,n)},c.appendChild(u),a.appendChild(i),a.appendChild(c),{element:a,id:""}}function p(e){(0,i.WR)("SettingsOptions"),u.setAttribute("displayed","true"),function(e){var t=(0,r.PL)(e);h.innerText=t.name,s.innerText=t.description,d.innerHTML="";var n,a=new DocumentFragment,i=0,c=o(t.options);try{for(c.s();!(n=c.n()).done;){var u=m(t,n.value,i);a.appendChild(u.element),i+=1}}catch(e){c.e(e)}finally{c.f()}d.append(a)}(e),(0,i.Z_)()}function v(){u.setAttribute("displayed","false"),(0,i.l$)()}}}]);
//# sourceMappingURL=6953.22892a3162b034f3c998.js.map