{"version":3,"file":"b5576d2a.js","mappings":"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","sources":["webpack://bus/./src/interface/route/details/properties.ts","webpack://bus/./src/interface/icons/index.ts","webpack://bus/./src/interface/personal-schedule-manager/index.ts","webpack://bus/./src/interface/route/details/actions.ts","webpack://bus/./src/interface/folder-manager/index.ts","webpack://bus/./src/interface/route/details/calendar.ts","webpack://bus/./src/interface/prompt/index.ts","webpack://bus/./src/interface/folder-editor/index.ts"],"sourcesContent":["import { getSettingOptionValue } from '../../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings } from '../../../tools/index';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { GeneratedElement } from '../../index';\nimport { PropertiesGroupBodyElement, PropertiesGroupElement } from './index';\n\nlet previousProperties = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction generateElementOfProperty(): GeneratedElement {\n  const propertyElement = document.createElement('div');\n  propertyElement.classList.add('css_route_details_property');\n\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_route_details_property_icon');\n  iconElement.appendChild(getBlankIconElement());\n  propertyElement.appendChild(iconElement);\n\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_route_details_property_value');\n  propertyElement.appendChild(valueElement);\n\n  return {\n    element: propertyElement,\n    id: ''\n  };\n}\n\nexport function setUppropertiesGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultPropertyQuantity = 5;\n  const properties = [];\n  for (let i = 0; i < defaultPropertyQuantity; i++) {\n    properties.push({\n      key: i,\n      icon: 'none',\n      value: ''\n    });\n  }\n  updatePropertiesField(properties, true, playing_animation);\n}\n\nexport function updatePropertiesField(properties: Array, skeletonScreen: boolean, animation: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisProperty: object, previousProperty: object): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: object): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_route_details_property_icon');\n      setIcon(thisIconElement, thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: object): void {\n      elementQuerySelector(thisElement, '.css_route_details_property_value').innerText = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousProperty === null || previousProperty === undefined) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const propertyQuantity = properties.length;\n\n  if (skeletonScreen !== previousSkeletonScreen) {\n    PropertiesGroupElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  }\n\n  const currentPropertyCapacity = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property').length;\n  if (propertyQuantity !== currentPropertyCapacity) {\n    const difference = currentPropertyCapacity - propertyQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        // const propertyIndex = currentPropertyCapacity + o;\n        const newPropertyElement = generateElementOfProperty();\n        fragment.appendChild(newPropertyElement.element);\n      }\n      PropertiesGroupBodyElement.append(fragment);\n    } else {\n      const propertyElements = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const propertyIndex = currentPropertyCapacity - 1 - o;\n        propertyElements[propertyIndex].remove();\n      }\n    }\n  }\n\n  const propertyElements = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property');\n  for (let i = 0; i < propertyQuantity; i++) {\n    const thisPropertyElement = propertyElements[i];\n    const thisProperty = properties[i];\n    if (previousProperties.length === 0) {\n      updateProperty(thisPropertyElement, thisProperty, null);\n    } else {\n      updateProperty(thisPropertyElement, thisProperty, previousProperties[i]);\n    }\n  }\n\n  previousProperties = properties;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n","import { elementQuerySelector } from '../../tools/elements';\nimport { MaterialSymbols } from './material-symbols-type';\n\nexport function getIconHTML(identifier: MaterialSymbols): string {\n  return /*html*/ `<span class=\"css_material_symbols_rounded\">${identifier}</span>`;\n}\n\nexport function getIconElement(identifier: MaterialSymbols): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  iconElement.innerText = identifier;\n  return iconElement;\n}\n\nexport function getBlankIconElement(): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  return iconElement;\n}\n\nexport function setIcon(parentElement: HTMLElement, identifier: MaterialSymbols): void {\n  const thisSpanElement = elementQuerySelector(parentElement, 'span.css_material_symbols_rounded');\n  thisSpanElement.innerText = identifier;\n}\n","import { listPersonalSchedules, PersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { openPersonalScheduleEditor } from '../personal-schedule-editor/index';\n\nconst PersonalScheduleManagerField = documentQuerySelector('.css_personal_schedule_manager_field');\nconst PersonalScheduleManagerBodyElement = elementQuerySelector(PersonalScheduleManagerField, '.css_personal_schedule_manager_body');\nconst ListElement = elementQuerySelector(PersonalScheduleManagerBodyElement, '.css_personal_schedule_manager_list');\n\nfunction generateElementOfItem(item: PersonalSchedule): GeneratedElement {\n  // const identifier = generateIdentifier();\n\n  // Main item element\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_personal_schedule_manager_item');\n  // itemElement.id = identifier;\n  itemElement.onclick = function () {\n    openPersonalScheduleEditor(item.id);\n  };\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_personal_schedule_manager_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n  itemElement.appendChild(nameElement);\n\n  // Arrow element\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_personal_schedule_manager_item_arrow');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(iconElement);\n  itemElement.appendChild(arrowElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\nasync function initializePersonalScheduleManagerField() {\n  ListElement.innerHTML = '';\n  const personalSchedules = await listPersonalSchedules();\n  const fragment = new DocumentFragment();\n  for (const item of personalSchedules) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement.element);\n  }\n  ListElement.append(fragment);\n}\n\nexport function openPersonalScheduleManager(): void {\n  pushPageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'true');\n  initializePersonalScheduleManagerField();\n}\n\nexport function closePersonalScheduleManager(): void {\n  revokePageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'false');\n}\n","import { searchRouteByRouteID } from '../../../data/search/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nexport async function shareRoutePermalink(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisRoute.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('check_circle', '已分享路線');\n        })\n        .catch((e) => {\n          promptMessage('cancel', '已取消分享');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showRoutePermalinkQRCode(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    openQRCode(link);\n  }\n}\n","import { FolderWithContent, listFoldersWithContent } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { openFolderEditor } from '../folder-editor/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\n\nconst FolderManagerField = documentQuerySelector('.css_folder_manager_field');\nconst FolderManagerBodyElement = elementQuerySelector(FolderManagerField, '.css_folder_manager_body');\nconst FolderManagerFolderListElement = elementQuerySelector(FolderManagerBodyElement, '.css_folder_manager_folder_list');\n\nfunction generateElementOfItem(item: FolderWithContent): GeneratedElement {\n  // Main container\n  const folderItemElement = document.createElement('div');\n  folderItemElement.classList.add('css_folder_manager_folder_item');\n  folderItemElement.onclick = () => {\n    openFolderEditor(item.id);\n  };\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_manager_folder_item_icon');\n  iconElement.appendChild(getIconElement(item.icon));\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_folder_manager_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_folder_manager_folder_item_status');\n  statusElement.appendChild(document.createTextNode(String(item.contentLength)));\n\n  // Arrow\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_folder_manager_folder_item_arrow');\n  arrowElement.appendChild(getIconElement('arrow_forward_ios'));\n\n  // Assemble\n  folderItemElement.appendChild(iconElement);\n  folderItemElement.appendChild(nameElement);\n  folderItemElement.appendChild(statusElement);\n  folderItemElement.appendChild(arrowElement);\n\n  return {\n    element: folderItemElement,\n    id: ''\n  };\n}\n\nasync function initializeFolderManagerField() {\n  const foldersWithContent = await listFoldersWithContent();\n  FolderManagerFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item);\n    fragment.appendChild(newItemElement.element);\n  }\n  FolderManagerFolderListElement.append(fragment);\n}\n\nexport function openFolderManager(): void {\n  pushPageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'true');\n  initializeFolderManagerField();\n  // closePreviousPage();\n}\n\nexport function closeFolderManager(): void {\n  revokePageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { Calendar, CalendarDay, CalendarEvent, CalendarEventGroup } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { drawRoundedRect } from '../../../tools/graphic';\nimport { booleanToString } from '../../../tools/index';\nimport { getCSSVariableValue } from '../../../tools/style';\nimport { GeneratedElement, querySize } from '../../index';\nimport { CalendarDaysElement, CalendarEventGroupsElement } from './index';\n\nconst calendarRatio = 70;\nconst scaleLimit = 3150 / (calendarRatio * 24);\nconst gridlineBoxHeight = 10;\nconst gridlineWidth = 1.2;\nconst gridlineLabelWidthLimit = 45;\nconst fontFamily: string = '\"Noto Sans TC\", sans-serif';\n\nlet canvasSize = querySize('route-details-canvas');\nlet canvasWidth = canvasSize.width;\nlet canvasHeight = canvasSize.height;\nlet canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\nlet previousCalendar = {} as Calendar;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction resizeRouteDetailsCalendarCanvas(canvas: HTMLCanvasElement): void {\n  canvasSize = querySize('route-details-canvas');\n  canvasWidth = canvasSize.width;\n  canvasHeight = canvasSize.height;\n  canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\n  // Set the new size\n  canvas.width = canvasWidth * canvasScale;\n  canvas.height = canvasHeight * canvasScale;\n\n  // Reset transformations before scaling\n  const context = canvas.getContext('2d');\n  context.setTransform(1, 0, 0, 1, 0, 0);\n  context.scale(canvasScale, canvasScale);\n}\n\nfunction generateElementOfDay(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_route_details_calendar_day');\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction generateElementOfEventGroup(): GeneratedElement {\n  // Main event group element\n  const eventGroupElement = document.createElement('div');\n  eventGroupElement.classList.add('css_route_details_calendar_event_group');\n\n  // Canvas element\n  const canvasElement = document.createElement('canvas');\n  canvasElement.classList.add('css_route_details_calendar_event_group_canvas');\n  eventGroupElement.appendChild(canvasElement);\n\n  return {\n    element: eventGroupElement,\n    id: ''\n  };\n}\n\nexport function setUpCalendarGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultEventQuantity = {\n    d_0: 47,\n    d_1: 47,\n    d_2: 47,\n    d_3: 47,\n    d_4: 47,\n    d_5: 47,\n    d_6: 47\n  };\n  const defaultDayQuantity = 7;\n  let calendarEventGroups = {};\n  let calendarDays = {};\n  for (let i = 0; i < defaultDayQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    calendarEventGroups[eventGroupKey] = [];\n    calendarDays[eventGroupKey] = {\n      day: i,\n      code: `d_{i}`,\n      name: ''\n    };\n    for (let j = 0; j < defaultEventQuantity[eventGroupKey]; j++) {\n      const date = new Date();\n      date.setHours(0);\n      date.setMinutes(j * 30);\n      date.setSeconds(0);\n      date.setMilliseconds(0);\n      calendarEventGroups[eventGroupKey].push({\n        date: date,\n        dateString: '',\n        duration: 15\n      });\n    }\n  }\n  updateCalendarGroup(\n    {\n      calendarEventGroups: calendarEventGroups,\n      calendarDays: calendarDays,\n      calendarDayQuantity: defaultDayQuantity,\n      calendarEventQuantity: defaultEventQuantity\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateDay(thisDayElement: HTMLElement, thisDay: CalendarDay, currentDay: number, skeletonScreen: boolean, animation: boolean, index: number): void {\n  thisDayElement.innerText = thisDay.name;\n  thisDayElement.setAttribute('day', index.toString());\n  thisDayElement.onclick = function () {\n    switchCalendarDay(index);\n  };\n  thisDayElement.setAttribute('highlighted', currentDay === index ? 'true' : 'false');\n  thisDayElement.setAttribute('animation', booleanToString(animation));\n  thisDayElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n}\n\nfunction updateEventGroup(thisCalendarEventGroupElement: HTMLElement, thisCalendarEventGroup: CalendarEventGroup, currentDay: number, mainColor: string, mainColorR: string, mainColorG: string, mainColorB: string, mainColorA: string, gridColor: string, index: number): void {\n  function drawGridline(thisContext: CanvasRenderingContext2D, hours: number, gridColor: string): void {\n    const boxX = 0;\n    const boxY = hours * calendarRatio;\n\n    // Cache the color value once\n    thisContext.fillStyle = gridColor;\n\n    // Draw line\n    thisContext.fillRect(boxX + gridlineLabelWidthLimit, boxY + 5, canvasWidth - gridlineLabelWidthLimit, gridlineWidth);\n\n    // Draw label\n    thisContext.font = `400 ${12}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    const labelText = `${String(hours).padStart(2, '0')}:00`;\n    const labelMeasurement = thisContext.measureText(labelText);\n    const labelWidth = labelMeasurement.width;\n    const labelHeight = labelMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(labelText, (gridlineLabelWidthLimit - labelWidth) / 2, boxY + (gridlineBoxHeight - labelHeight) / 2, labelWidth);\n  }\n\n  function drawEvent(thisContext: CanvasRenderingContext2D, thisCalendarEvent: CalendarEvent, mainColor: string, mainColorR: string, mainColorG: string, mainColorB: string, mainColorA: string): void {\n    // Calculate the start of the day for this event only once.\n    const thisDayStart = new Date();\n    thisDayStart.setDate(1);\n    thisDayStart.setMonth(0);\n    thisDayStart.setFullYear(thisCalendarEvent.date.getFullYear());\n    thisDayStart.setMonth(thisCalendarEvent.date.getMonth());\n    thisDayStart.setDate(thisCalendarEvent.date.getDate());\n    thisDayStart.setHours(0);\n    thisDayStart.setMinutes(0);\n    thisDayStart.setSeconds(0);\n    thisDayStart.setMilliseconds(0);\n\n    const boxX = gridlineLabelWidthLimit;\n    const boxY = ((thisCalendarEvent.date.getTime() - thisDayStart.getTime()) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n    const boxWidth = canvasWidth - gridlineLabelWidthLimit;\n    const boxHeight = ((thisCalendarEvent.duration * 60 * 1000) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n\n    // Draw background with rounded rectangle\n    drawRoundedRect(thisContext, boxX, boxY, boxWidth, boxHeight, 3, `rgba(${mainColorR}, ${mainColorG}, ${mainColorB}, ${mainColorA})`);\n\n    // Draw decoration (a thin rounded rectangle)\n    drawRoundedRect(thisContext, boxX, boxY, 3, boxHeight, { tl: 3, tr: 0, bl: 3, br: 0 }, mainColor);\n\n    // Draw event text\n    thisContext.font = `400 ${14}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    thisContext.fillStyle = mainColor;\n    const text = thisCalendarEvent.dateString;\n    const textMeasurement = thisContext.measureText(text);\n    const textWidth = textMeasurement.width;\n    const textHeight = textMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(text, boxX + 8, boxY + (boxHeight - textHeight) / 2, textWidth);\n  }\n\n  function updateDisplayed(thisCalendarEventGroupElement: HTMLElement, currentDay: number, index: number): void {\n    // Set the displayed attribute based on whether it is the current day.\n    const isDisplayed = currentDay === index;\n    thisCalendarEventGroupElement.setAttribute('displayed', booleanToString(isDisplayed));\n  }\n\n  // Get the canvas and its 2D context.\n  const thisCalendarEventGroupCanvas = elementQuerySelector(thisCalendarEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n  const thisCalendarEventGroupCanvasContext = thisCalendarEventGroupCanvas.getContext('2d');\n\n  // Update the displayed attribute\n  updateDisplayed(thisCalendarEventGroupElement, currentDay, index);\n\n  // Always resize the canvas to ensure proper dimensions.\n  resizeRouteDetailsCalendarCanvas(thisCalendarEventGroupCanvas);\n\n  const isDisplayed = currentDay === index;\n  if (isDisplayed) {\n    // Clear the canvas and redraw the content when displayed.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    // Draw the gridlines.\n    for (let hours = 0; hours < 24; hours++) {\n      drawGridline(thisCalendarEventGroupCanvasContext, hours, gridColor);\n    }\n\n    // Draw all events for this group.\n    for (const thisCalendarEvent of thisCalendarEventGroup) {\n      drawEvent(thisCalendarEventGroupCanvasContext, thisCalendarEvent, mainColor, mainColorR, mainColorG, mainColorB, mainColorA);\n    }\n  } else {\n    // When not displayed, clear the canvas.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n  }\n}\n\nexport function updateCalendarGroup(calendar: Calendar, skeletonScreen: boolean, animation: boolean): void {\n  // The default day to display.\n  const currentDay = new Date().getDay();\n\n  // Retrieve the CSS variable values just once\n  const mainColorR = getCSSVariableValue('--b-cssvar-main-color-r');\n  const mainColorG = getCSSVariableValue('--b-cssvar-main-color-g');\n  const mainColorB = getCSSVariableValue('--b-cssvar-main-color-b');\n  const mainColorA = getCSSVariableValue('--b-cssvar-main-color-opacity-e');\n  const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n  const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n  const eventGroups = calendar.calendarDays;\n  const eventGroupQuantity = calendar.calendarDayQuantity;\n  const calendarEventGroups = calendar.calendarEventGroups;\n  const eventQuantity = calendar.calendarEventQuantity;\n\n  const currentEventGroupCapacity = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group').length;\n  if (eventGroupQuantity !== currentEventGroupCapacity) {\n    const difference = currentEventGroupCapacity - eventGroupQuantity;\n    if (difference < 0) {\n      // Add missing day and event group elements.\n      const calendarDaysFragment = new DocumentFragment();\n      const calendarEventGroupsFragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newDayElement = generateElementOfDay();\n        calendarDaysFragment.appendChild(newDayElement.element);\n        const newEventGroupElement = generateElementOfEventGroup();\n        calendarEventGroupsFragment.appendChild(newEventGroupElement.element);\n      }\n      CalendarDaysElement.append(calendarDaysFragment);\n      CalendarEventGroupsElement.append(calendarEventGroupsFragment);\n    } else {\n      // Remove extra elements.\n      const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n      const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const eventGroupIndex = currentEventGroupCapacity - 1 - o;\n        CalendarDayElements[eventGroupIndex].remove();\n        CalendarEventGroupElements[eventGroupIndex].remove();\n      }\n    }\n  }\n\n  // Update each day and its corresponding event group.\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (let i = 0; i < eventGroupQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    const thisDay = eventGroups[eventGroupKey];\n    const thisEventGroup = calendarEventGroups[eventGroupKey];\n\n    const thisDayElement = CalendarDayElements[i];\n    const thisEventGroupElement = CalendarEventGroupElements[i];\n\n    updateDay(thisDayElement, thisDay, currentDay, skeletonScreen, animation, i);\n    updateEventGroup(thisEventGroupElement, thisEventGroup, currentDay, mainColor, mainColorR, mainColorG, mainColorB, mainColorA, gridColor, i);\n  }\n\n  previousCalendar = calendar;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nexport function switchCalendarDay(day: number): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const calendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (let i = 0; i < 7; i++) {\n    const thisCalendarDayElement = calendarDayElements[i];\n    // const thisCalendarDayElementDay = parseInt(thisCalendarDayElement.getAttribute('day'));\n    const thisEventGroupElement = CalendarEventGroupElements[i];\n    // if (thisCalendarDayElementDay === day) {\n    /*\n      thisCalendarDayElement.setAttribute('highlighted', 'true');\n      thisEventGroupElement.setAttribute('displayed', 'true');\n      */\n    const eventGroupKey = `d_${i}`;\n    const calendarEventGroup = previousCalendar?.calendarEventGroups[eventGroupKey];\n    const calendarDay = previousCalendar?.calendarDays[eventGroupKey];\n    if (calendarEventGroup && calendarDay) {\n      // Retrieve the CSS variable values just once\n      const mainColorR = getCSSVariableValue('--b-cssvar-main-color-r');\n      const mainColorG = getCSSVariableValue('--b-cssvar-main-color-g');\n      const mainColorB = getCSSVariableValue('--b-cssvar-main-color-b');\n      const mainColorA = getCSSVariableValue('--b-cssvar-main-color-opacity-e');\n      const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n      const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n      // Reuse the drawing logic from updateEventGroup and updateDay for the visible event group.\n      updateDay(thisCalendarDayElement, calendarDay, day, false, playing_animation, i);\n      updateEventGroup(thisEventGroupElement, calendarEventGroup, day, mainColor, mainColorR, mainColorG, mainColorB, mainColorA, gridColor, i);\n    }\n    /*} else {\n      thisCalendarDayElement.setAttribute('highlighted', 'false');\n      thisEventGroupElement.setAttribute('displayed', 'false');\n\n      // Clear the canvas for non-displayed elements.\n      const canvas = elementQuerySelector(thisEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    }*/\n  }\n}\n","import { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\n\nexport interface PromptButton {\n  text: string;\n  action: Function;\n}\n\nexport function promptMessage(icon: MaterialSymbols, message: string, button: PromptButton | null): void {\n  const allPromptElements = documentQuerySelectorAll('.css_prompt');\n  if (allPromptElements !== null) {\n    for (const promptElement of allPromptElements) {\n      promptElement.remove();\n    }\n  }\n\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n\n  const promptElement = document.createElement('div');\n  promptElement.classList.add('css_prompt');\n  promptElement.setAttribute('animation', booleanToString(playing_animation));\n\n  const promptIconElement = document.createElement('div');\n  promptIconElement.classList.add('css_prompt_icon');\n  promptIconElement.appendChild(getIconElement(icon));\n  promptElement.appendChild(promptIconElement);\n\n  const promptMessageElement = document.createElement('div');\n  promptMessageElement.classList.add('css_prompt_message');\n  promptMessageElement.innerText = message;\n  promptElement.appendChild(promptMessageElement);\n\n  if (typeof button === 'object' && button !== null && button !== undefined) {\n    if (typeof button?.action === 'function') {\n      const promptButtonElement = document.createElement('div');\n      promptButtonElement.classList.add('css_prompt_button');\n      promptButtonElement.innerText = button.text;\n      promptButtonElement.addEventListener(\n        'click',\n        function () {\n          button.action();\n        },\n        { once: true }\n      );\n      promptElement.appendChild(promptButtonElement);\n    }\n  }\n\n  promptElement.addEventListener(\n    'animationend',\n    function (event) {\n      if (event?.target) {\n        event.target.remove();\n      }\n    },\n    { once: true }\n  );\n\n  document.body.appendChild(promptElement);\n}\n","import { Folder, FolderContent, getFolder, listFolderContent, removeFromFolder, updateFolder, updateFolderContentIndex } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { openFolderIconSelector } from '../folder-icon-selector/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst FolderEditorHeadElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_head');\nconst LeftButtonElement = elementQuerySelector(FolderEditorHeadElement, '.css_folder_editor_button_left');\nconst FolderEditorBodyElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_body');\nconst FolderEditorGroupsElement = elementQuerySelector(FolderEditorBodyElement, '.css_folder_editor_groups');\nconst NameInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-name\"] .css_folder_editor_group_body input') as HTMLInputElement;\nconst IconInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input') as HTMLInputElement;\nconst OpenFolderIconSelectorElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\nconst FolderContentElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body');\n\nOpenFolderIconSelectorElement.onclick = function () {\n  openFolderIconSelector('editor');\n};\n\nfunction generateElementOfItem(folder: Folder, item: FolderContent): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.id = identifier;\n  itemElement.classList.add('css_folder_editor_folder_item');\n  itemElement.setAttribute('type', item.type);\n\n  // Icon, context, main text\n  let context = '';\n  let main = '';\n  let icon: MaterialSymbols = '';\n  switch (item.type) {\n    case 'stop':\n      icon = 'location_on';\n      context = `${item.route ? item.route.name : ''} - 往${item.route ? [item.route.endPoints.destination, item.route.endPoints.departure, ''][item.direction ? item.direction : 0] : ''}`;\n      main = item.name;\n      break;\n    case 'route':\n      icon = 'route';\n      context = `${item.endPoints.departure} \\u2194 ${item.endPoints.destination}`;\n      main = item.name;\n      break;\n    case 'location':\n      icon = 'location_on';\n      context = '地點';\n      main = item.name;\n      break;\n    case 'bus':\n      context = '';\n      main = item.name;\n      break;\n    case 'empty':\n      icon = 'lightbulb';\n      context = '提示';\n      main = '沒有內容';\n      break;\n    default:\n      icon = '';\n      context = 'null';\n      main = 'null';\n      break;\n  }\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_editor_folder_item_icon');\n  iconElement.appendChild(getIconElement(icon));\n\n  // Context element\n  const contextElement = document.createElement('div');\n  contextElement.classList.add('css_folder_editor_folder_item_context');\n  contextElement.appendChild(document.createTextNode(context));\n\n  // Main element\n  const mainElement = document.createElement('div');\n  mainElement.classList.add('css_folder_editor_folder_item_main');\n  mainElement.appendChild(document.createTextNode(main));\n\n  // Capsule element\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_folder_editor_folder_item_capsule');\n\n  // Sort up control\n  const sortUpElement = document.createElement('div');\n  sortUpElement.classList.add('css_folder_editor_folder_item_sort_control_up');\n  sortUpElement.appendChild(getIconElement('keyboard_arrow_down'));\n  sortUpElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'up');\n  };\n\n  // Sort down control\n  const sortDownElement = document.createElement('div');\n  sortDownElement.classList.add('css_folder_editor_folder_item_sort_control_down');\n  sortDownElement.appendChild(getIconElement('keyboard_arrow_down'));\n  sortDownElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'down');\n  };\n\n  // Delete control\n  const deleteElement = document.createElement('div');\n  deleteElement.classList.add('css_folder_editor_folder_item_delete');\n  deleteElement.appendChild(getIconElement('delete'));\n  deleteElement.onclick = () => {\n    removeItemOnFolderEditor(identifier, folder.id, item.type, item.id);\n  };\n\n  // Capsule separators\n  const separator1Element = document.createElement('div');\n  separator1Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n  const separator2Element = document.createElement('div');\n  separator2Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(sortUpElement);\n  capsuleElement.appendChild(sortDownElement);\n  capsuleElement.appendChild(deleteElement);\n  capsuleElement.appendChild(separator1Element);\n  capsuleElement.appendChild(separator2Element);\n\n  // Assemble main item\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(contextElement);\n  itemElement.appendChild(mainElement);\n  itemElement.appendChild(capsuleElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction updateFolderEditorField(folder: Folder, content: Array<FolderContent>): void {\n  NameInputElement.value = folder.name;\n  IconInputElement.value = folder.icon;\n\n  LeftButtonElement.onclick = function () {\n    saveEditedFolder(folder.id);\n  };\n\n  FolderContentElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of content) {\n    const thisItemElement = generateElementOfItem(folder, item);\n    fragment.appendChild(thisItemElement.element);\n  }\n  FolderContentElement.append(fragment);\n}\n\nasync function initializeFolderEditorField(folderID: string) {\n  // TODO: add skeleton screen\n  const folder = getFolder(folderID);\n  const content = await listFolderContent(folderID);\n  updateFolderEditorField(folder, content);\n}\n\nexport function openFolderEditor(folderID: string): void {\n  pushPageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'true');\n  initializeFolderEditorField(folderID);\n  closePreviousPage();\n}\n\nexport function closeFolderEditor(): void {\n  // revokePageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function removeItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: number): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  removeFromFolder(folderID, type, id).then((e) => {\n    if (e) {\n      itemElement.remove();\n      switch (type) {\n        case 'stop':\n          promptMessage('delete', '已移除站牌');\n          break;\n        case 'route':\n          promptMessage('delete', '已移除路線');\n          break;\n        case 'location':\n          promptMessage('delete', '已移除地點');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('error', '無法移除');\n    }\n  });\n}\n\nexport function moveItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: FolderContent['id'], direction: 'up' | 'down'): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  updateFolderContentIndex(folderID, type, id, direction).then((e) => {\n    if (e) {\n      switch (direction) {\n        case 'up':\n          const previousSibling = itemElement.previousElementSibling;\n          if (previousSibling) {\n            itemElement.parentNode.insertBefore(itemElement, previousSibling);\n          }\n          promptMessage('arrow_circle_up', '已往上移');\n          break;\n        case 'down':\n          const nextSibling = itemElement.nextElementSibling;\n          if (nextSibling) {\n            itemElement.parentNode.insertBefore(nextSibling, itemElement);\n          }\n          promptMessage('arrow_circle_down', '已往下移');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('error', '無法移動');\n    }\n  });\n}\n\nexport function saveEditedFolder(folderID: string): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  updateFolder(folderID, name, icon).then(function () {\n    closeFolderEditor();\n  });\n}\n"],"names":["previousProperties","previousAnimation","previousSkeletonScreen","generateElementOfProperty","propertyElement","document","createElement","classList","add","iconElement","appendChild","getBlankIconElement","valueElement","element","id","setUppropertiesGroupSkeletonScreen","playing_animation","getSettingOptionValue","properties","i","push","key","icon","value","updatePropertiesField","skeletonScreen","animation","updateProperty","thisElement","thisProperty","previousProperty","updateIcon","thisIconElement","elementQuerySelector","setIcon","updateValue","innerText","updateAnimation","setAttribute","booleanToString","updateSkeletonScreen","compareThings","propertyQuantity","length","PropertiesGroupElement","currentPropertyCapacity","elementQuerySelectorAll","PropertiesGroupBodyElement","difference","fragment","DocumentFragment","o","d","Math","abs","newPropertyElement","append","propertyElements","remove","thisPropertyElement","getIconHTML","identifier","getIconElement","parentElement","PersonalScheduleManagerField","documentQuerySelector","PersonalScheduleManagerBodyElement","ListElement","generateElementOfItem","item","itemElement","onclick","openPersonalScheduleEditor","nameElement","createTextNode","name","arrowElement","_initializePersonalScheduleManagerField","_asyncToGenerator","innerHTML","_step","personalSchedules","listPersonalSchedules","_iterator","_createForOfIteratorHelper","s","n","done","err","e","f","apply","arguments","openPersonalScheduleManager","pushPageHistory","initializePersonalScheduleManagerField","closePersonalScheduleManager","revokePageHistory","shareRoutePermalink","_x","_shareRoutePermalink","RouteID","thisRoute","searchRouteByRouteID","link","getPermalink","navigator","share","title","url","then","promptMessage","showRoutePermalinkQRCode","_x2","_showRoutePermalinkQRCode","openQRCode","FolderManagerField","FolderManagerBodyElement","FolderManagerFolderListElement","folderItemElement","openFolderEditor","statusElement","String","contentLength","_initializeFolderManagerField","foldersWithContent","listFoldersWithContent","newItemElement","openFolderManager","initializeFolderManagerField","closeFolderManager","fontFamily","canvasSize","querySize","canvasWidth","width","canvasHeight","height","canvasScale","min","window","devicePixelRatio","previousCalendar","generateElementOfDay","generateElementOfEventGroup","eventGroupElement","canvasElement","setUpCalendarGroupSkeletonScreen","defaultEventQuantity","d_0","d_1","d_2","d_3","d_4","d_5","d_6","calendarEventGroups","calendarDays","eventGroupKey","day","code","j","date","Date","setHours","setMinutes","setSeconds","setMilliseconds","dateString","duration","updateCalendarGroup","calendarDayQuantity","calendarEventQuantity","updateDay","thisDayElement","thisDay","currentDay","index","toString","calendarDayElements","CalendarDaysElement","CalendarEventGroupElements","CalendarEventGroupsElement","_previousCalendar","_previousCalendar2","thisCalendarDayElement","thisEventGroupElement","calendarEventGroup","calendarDay","mainColorR","getCSSVariableValue","mainColorG","mainColorB","mainColorA","mainColor","gridColor","updateEventGroup","switchCalendarDay","thisCalendarEventGroupElement","thisCalendarEventGroup","drawGridline","thisContext","hours","boxY","fillStyle","fillRect","boxX","font","textBaseline","labelText","padStart","labelMeasurement","measureText","labelWidth","labelHeight","actualBoundingBoxDescent","fillText","drawEvent","thisCalendarEvent","thisDayStart","setDate","setMonth","setFullYear","getFullYear","getMonth","getDate","getTime","boxWidth","boxHeight","drawRoundedRect","tl","tr","bl","br","text","textMeasurement","textWidth","textHeight","thisCalendarEventGroupCanvas","thisCalendarEventGroupCanvasContext","getContext","isDisplayed","updateDisplayed","canvas","context","setTransform","scale","resizeRouteDetailsCalendarCanvas","clearRect","calendar","getDay","eventGroups","eventGroupQuantity","currentEventGroupCapacity","calendarDaysFragment","calendarEventGroupsFragment","newDayElement","newEventGroupElement","CalendarDayElements","eventGroupIndex","thisEventGroup","message","button","allPromptElements","documentQuerySelectorAll","promptElement","promptIconElement","promptMessageElement","_typeof","action","promptButtonElement","addEventListener","once","event","target","body","FolderEditorField","FolderEditorHeadElement","LeftButtonElement","FolderEditorBodyElement","FolderEditorGroupsElement","NameInputElement","IconInputElement","OpenFolderIconSelectorElement","FolderContentElement","folder","generateIdentifier","type","main","route","endPoints","destination","departure","direction","contextElement","mainElement","capsuleElement","sortUpElement","moveItemOnFolderEditor","sortDownElement","deleteElement","itemID","folderID","removeFromFolder","removeItemOnFolderEditor","separator1Element","separator2Element","updateFolderEditorField","content","updateFolder","closeFolderEditor","thisItemElement","_initializeFolderEditorField","getFolder","listFolderContent","initializeFolderEditorField","closePreviousPage","openPreviousPage","updateFolderContentIndex","previousSibling","previousElementSibling","parentNode","insertBefore","nextSibling","nextElementSibling","openFolderIconSelector"],"ignoreList":[],"sourceRoot":""}