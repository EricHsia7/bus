"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[3556],{2994(e,t,n){n.d(t,{G:()=>b});var r=n(467),a=n(4225),i=n(3459),o=n(8179),c=n(8024),d=n(904),l=[],u=!1,s=!1,f=(0,o.bv)(".ht"),p=(0,o.aI)(f,".lt"),m=(0,o.aI)(p,".mt");function v(){var e=document.createElement("div");e.classList.add("nt");var t=document.createElement("div");t.classList.add("ot");var n=document.createElement("div");return n.classList.add("pt"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function h(e,t,n){function r(e,r,a){function i(e,t){(0,o.aI)(e,".pt").innerText=t.size}function d(e,t){(0,o.aI)(e,".ot").innerText=t.category.name}function l(e,t){e.setAttribute("animation",(0,c.xZ)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,c.xZ)(t))}a?(r.category.key!==a.category.key&&(d(e,r),i(e,r)),r.size!==a.size&&i(e,r),u!==n&&l(e,n),s!==t&&f(e,t)):(i(e,r),d(e,r),l(e,n),f(e,t))}var a=[];for(var i in e.categorizedSizes){var d=e.categorizedSizes[i];a.push(d)}var f=a.length,p=(0,o.jg)(m,".nt").length;if(f!==p){var h=p-f;if(h<0){for(var y=new DocumentFragment,b=0,g=Math.abs(h);b<g;b++){var w=v();y.appendChild(w.element)}m.appendChild(y)}else for(var A=(0,o.jg)(m,".nt"),C=0,k=Math.abs(h);C<k;C++){A[p-1-C].remove()}}for(var x=(0,o.jg)(m,".nt"),I=0;I<f;I++){var E=l[I],S=a[I],L=x[I];r(L,S,E||null)}l=a,s=t,u=n}function y(){return(y=(0,r.A)(function*(){var e=(0,i.Js)("playing_animation");!function(){for(var e=(0,i.Js)("playing_animation"),t=(0,d.gO)("window").height,n=Math.min(7,Math.floor(t/55)+2),r={categorizedSizes:{},totalSize:0},a=0;a<n;a++){var o=`store-${a}`;r.categorizedSizes[o]={category:{name:"",key:o},size:`size-${a}`}}h(r,!0,e)}(),h(yield(0,a.F)(),!1,e)})).apply(this,arguments)}function b(){f.setAttribute("displayed","true"),function(){y.apply(this,arguments)}()}},5009(e,t,n){n.d(t,{Bb:()=>oe,rf:()=>ie});var r=n(8134),a=n(8179),i=n(7968),o=n(8024),c=n(6141),d=n(4781),l=n(4884),u=n(6082),s=n(4537),f=n(904),p=n(3030),m=n(9119),v=n(4690);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=[],g=(0,a.bv)(".yf"),w=(0,a.aI)(g,".zf"),A=(0,a.aI)(g,".kr"),C=(0,a.aI)(w,"._f #search_input"),k=(0,a.aI)(w,"._f canvas"),x=(0,a.aI)(w,".jr"),I=(0,a.aI)(A,".lr"),E=(0,a.aI)(A,".pr"),S=k.getContext("2d"),L=window.devicePixelRatio,M=15*L,T=1.8*L,j=.9*L,z=4*L,_=25*L,$=20*L,R=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],O=(0,c.t)("--a"),D=(0,c.t)("--re"),F=(0,c.t)("--b"),N=0,Y=0,H=0,P=!1,U=0,W=(0,f.gO)("head-two-button"),Z=W.width*L,q=W.height*L,B=!1,G=!1;function J(){var e=ee(),t=e.substring(0,e.length-1);C.value=t,ae(),te(-1,-1),(0,f.p9)()}function Q(){C.value="",ae(),te(-1,-1),(0,f.p9)()}function V(e){e.preventDefault(),C.focus(),(0,f.p9)()}function K(){!function(){if(!G){G=!0;var e,t=new DocumentFragment,n=h(R);try{for(n.s();!(e=n.n()).done;){var r,a=h(e.value);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=document.createElement("button");c.classList.add("qr");var d=(0,o.p1)()?"touchstart":"mousedown";switch(i){case"刪除":c.addEventListener(d,J),c.appendChild((0,s.YC)("backspace"));break;case"清空":c.addEventListener(d,Q),c.appendChild(document.createTextNode(i));break;case"鍵盤":c.addEventListener(d,V),c.appendChild((0,s.YC)("keyboard"));break;default:c.addEventListener(d,function(e){return function(){var t,n;t=e,n=`${ee()}${t}`,C.value=n,ae(),te(-1,-1),(0,f.p9)()}}(i)),c.appendChild(document.createTextNode(i))}t.appendChild(c)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}E.append(t)}}(),E.setAttribute("displayed","true"),B=!0,ne(),te(-1,-1)}function X(){return parseInt(x.getAttribute("type"))}function ee(){return String(C.value)}function te(e,t){var n=ee(),r=!1;0===n.length?(n="搜尋路線、地點、公車",r=!0,e=0,t=0):-1===e&&-1===t&&(t=1*(e=n.length)),W=(0,f.gO)("head-two-button"),Z=W.width*L,q=W.height*L,O=(0,c.t)("--a"),D=(0,c.t)("--re"),F=(0,c.t)("--b"),S.font=`400 ${$}px "Noto Sans TC", sans-serif`,S.textAlign="center",S.textBaseline="middle",N=S.measureText(n).width,Y=S.measureText(n.substring(0,e)).width,H=S.measureText(n.substring(e,t)).width,U=r?1:Math.max(1,Y),S.clearRect(0,0,Z,q),e===t?(P=!0,S.globalAlpha=1,S.fillStyle=r?D:O,S.fillText(n,N/2+(Math.min(U,Z-M)-U),q/2),(0,i.wg)(S,Math.min(U,Z-M),(q-_)/2,T,_,j,F)):(P=!1,S.globalAlpha=.27,(0,i.wg)(S,Math.min(U,Z-M),(q-_)/2,H,_,z,F),S.globalAlpha=1,S.fillStyle=r?D:O,S.fillText(n,N/2+(Math.min(U,Z-M)-U),q/2),S.globalAlpha=.08,(0,i.wg)(S,Math.min(U,Z-M),(q-_)/2,H,_,z,F))}function ne(){var e=performance.now(),t=1-Math.pow(Math.sin(Math.PI*e/960),4);P&&(S.globalAlpha=t,S.clearRect(Math.min(U,Z-M)-1,0,T+2,q),(0,i.wg)(S,Math.min(U,Z-M),(q-_)/2,T,_,j,F)),B&&window.requestAnimationFrame(ne)}function re(){var e=document.createElement("div");e.classList.add("mr");var t=document.createElement("div");t.classList.add("or");var n=document.createElement("div");return n.classList.add("nr"),n.appendChild((0,s.oC)()),e.appendChild(n),e.appendChild(t),{element:e,id:""}}function ae(){var e=["route","location_on","directions_bus"];function t(t,n,r){function i(t,n){var r=(0,a.aI)(n,".nr");(0,s.yD)(r,e[t.item.type])}function o(e,t){(0,a.aI)(t,".or").innerText=e.item.n}function c(e,t){switch(e.item.type){case 0:t.onclick=function(){(0,v.SR)(e.item.id,e.item.pid)};break;case 1:t.onclick=function(){(0,p.so)(e.item.hash)};break;case 2:t.onclick=function(){(0,l.$l)(e.item.id)}}}r?(n.item.type!==r.item.type&&i(n,t),n.item.id!==r.item.id&&(o(n,t),c(n,t))):(i(n,t),o(n,t),c(n,t))}var n=X(),i=ee();if(!(0,d.iO)(i)){var o=(0,r.GU)(i,n,30),c=o.length,u=(0,a.jg)(I,".mr").length;if(c!==u){var f=u-c;if(f<0){for(var m=new DocumentFragment,h=0,y=Math.abs(f);h<y;h++){var g=re();m.appendChild(g.element)}I.appendChild(m)}else for(var w=(0,a.jg)(I,".mr"),A=0,C=Math.abs(f);A<C;A++){w[u-1-A].remove()}}for(var k=(0,a.jg)(I,".mr"),x=0;x<c;x++){var E=b[x],S=o[x],L=k[x];t(L,S,E||null)}b=o}}function ie(){u.m?((0,f.WR)("Search"),g.setAttribute("displayed","true"),K(),(0,r.dD)()):(0,m.a)("download_for_offline","資料還在下載中")}function oe(){(0,f.kr)("Search"),E.setAttribute("displayed","false"),B=!1,g.setAttribute("displayed","false")}},6104(e,t,n){n.d(t,{Ow:()=>A,gE:()=>E,jk:()=>L,os:()=>C,rY:()=>I,vv:()=>k,ze:()=>S});var r=n(467),a=n(5976),i=n(5427),o=n(3459),c=n(3251),d=n(4311),l=n(8179),u=n(8024),s=n(4537),f=n(904),p=n(9119);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=(0,l.bv)(".rr"),y=(0,l.aI)(h,".as"),b=(0,l.aI)(y,".cs");function g(e){var t=document.createElement("div");t.classList.add("es"),t.setAttribute("type",e.type);var n=document.createElement("div");n.classList.add("gs");var r=document.createElement("span");r.appendChild((0,s.YC)(e.icon)),n.appendChild(r);var a=document.createElement("div");a.classList.add("hs"),a.appendChild(document.createTextNode(e.name));var i=document.createElement("div");i.classList.add("js"),i.appendChild(document.createTextNode(e.status));var o=document.createElement("div");o.classList.add("ks");var c=document.createElement("span");return c.appendChild((0,s.YC)("arrow_forward_ios")),o.appendChild(c),"function"==typeof e.action?t.onclick=function(){e.action()}:"string"==typeof e.action&&t.setAttribute("onclick",e.action),t.appendChild(n),t.appendChild(a),t.appendChild(i),t.appendChild(o),{element:t,id:""}}function w(){return(w=(0,r.A)(function*(){var e=yield(0,o.cl)();b.innerHTML="";var t,n=new DocumentFragment,r=m(e);try{for(r.s();!(t=r.n()).done;){var a=g(t.value);n.appendChild(a.element)}}catch(e){r.e(e)}finally{r.f()}b.append(n)})).apply(this,arguments)}function A(){(0,f.WR)("Settings"),h.setAttribute("displayed","true"),function(){w.apply(this,arguments)}()}function C(){(0,f.kr)("Settings"),h.setAttribute("displayed","false")}function k(){return x.apply(this,arguments)}function x(){return(x=(0,r.A)(function*(){(0,p.a)("manufacturing","資料匯出中");var e=yield(0,a.R)();(0,u.MR)(e,"application/json","bus-export.json")})).apply(this,arguments)}function I(){var e=(0,u.zx)(),t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.setAttribute("name",e),t.id=e,t.classList.add("ps"),t.addEventListener("change",function(t){if(0===t.target.files.length)(0,l.bv)(`body #${e}`).remove();else{var n=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;(0,i.Qx)(n).then(function(t){t?(0,p.a)("check_circle","已匯入資料"):(0,p.a)("error","無法匯入資料"),(0,l.bv)(`body #${e}`).remove()})},r.readAsText(n)}},{once:!0}),t.addEventListener("cancel",function(){(0,l.bv)(`body #${e}`).remove()},{once:!0}),document.body.append(t),(0,l.bv)(`body #${e}`).click()}function E(){var e=(0,c._P)();window.open(e)}function S(){window.open("https://github.com/EricHsia7/bus")}function L(){(0,d.VC)().then(function(e){switch(e){case"granted":(0,p.a)("check_circle","已開啟永久儲存");break;case"denied":(0,p.a)("cancel","永久儲存權限已被拒絕");break;case"unsupported":(0,p.a)("warning","此瀏覽器不支援永久儲存");break;default:(0,p.a)("error","發生錯誤")}})}},6166(e,t,n){n.d(t,{yH:()=>v});var r=n(3459),a=n(8179),i=n(904);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,a.bv)(".sr"),l=(0,a.aI)(d,".bs"),u=(0,a.aI)(l,".ds"),s=(0,a.aI)(l,".os"),f=(0,a.aI)(d,".ur"),p=(0,a.aI)(f,"._r");function m(e,t,n){var i=document.createElement("div");i.classList.add("fs");var c=document.createElement("div");c.classList.add("is"),c.appendChild(document.createTextNode(t.name));var d=document.createElement("div");d.classList.add("ls");var l=document.createElement("input");return l.type="checkbox",l.checked=e.option===n,l.onclick=function(t){!function(e,t,n){var i,c=o((0,a.e0)('.sr .bs .ds .fs .ls input[type="checkbox"]'));try{for(c.s();!(i=c.n()).done;){i.value.checked=!1}}catch(e){c.e(e)}finally{c.f()}var d=e.target;d.checked=!0,(0,r.aN)(t,n)}(t,e.key,n)},d.appendChild(l),i.appendChild(c),i.appendChild(d),{element:i,id:""}}function v(e){(0,i.WR)("SettingsOptions"),d.setAttribute("displayed","true"),function(e){var t=(0,r.PL)(e);p.innerText=t.name,s.innerText=t.description,u.innerHTML="";var n,a=new DocumentFragment,i=0,c=o(t.options);try{for(c.s();!(n=c.n()).done;){var d=m(t,n.value,i);a.appendChild(d.element),i+=1}}catch(e){c.e(e)}finally{c.f()}u.append(a)}(e),(0,i.Z_)()}}}]);
//# sourceMappingURL=b17132b551cb82518a73.js.map