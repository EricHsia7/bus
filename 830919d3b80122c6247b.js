"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[8052,9933],{77(t,e,r){r.d(e,{D7:()=>T,Db:()=>O,FX:()=>F,G7:()=>k,Je:()=>P,M3:()=>h,VJ:()=>C,Zc:()=>L,cS:()=>A,e3:()=>j,gc:()=>x,hc:()=>I,mD:()=>H,ms:()=>w,ph:()=>v,se:()=>m,uQ:()=>D,z9:()=>Q});var n=r(8024),i=r(8011),a=r(4293),o=r(424),u=r(6788),s=r(3459),l=r(4311),f=r(3447);function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return d(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e,r,n,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function y(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){p(a,n,i,o,u,"next",t)}function u(t){p(a,n,i,o,u,"throw",t)}o(void 0)})}}var v="",h="",m="",g=[],_={},b={};function w(){return S.apply(this,arguments)}function S(){return(S=y(function*(){var t={provider:v,client_id:h,secret:m};yield(0,l.mL)(9,"n_client",JSON.stringify(t))})).apply(this,arguments)}function O(){return $.apply(this,arguments)}function $(){return($=y(function*(){var t=yield(0,l.Ct)(9,"n_client");if(t){var e=JSON.parse(t);v=e.provider,h=e.client_id,m=e.secret}})).apply(this,arguments)}function I(){return""!==h&&""!==m}function P(t){if(!(0,n.Gz)(t))throw new Error("The provider is not valid.");var e=new URL(t);v=`${e.protocol}//${e.hostname}`}function T(){return String(v)}function x(t){void 0!==t&&(h=String(t))}function D(t){void 0!==t&&(m=String(t))}function A(){return N.apply(this,arguments)}function N(){return(N=y(function*(){(new Date).getTime();var t,e=0,r=c(yield(0,l.Su)(10));try{for(r.s();!(t=r.n()).done;){var n=t.value,i=yield(0,l.Ct)(10,n),a=JSON.parse(i),o=a.schedule_id,u=`s_${a.stop_id}`;g.push(a),_[o]=e,b.hasOwnProperty(u)||(b[u]=[]),b[u].push(e),e+=1}}catch(t){r.e(t)}finally{r.f()}})).apply(this,arguments)}function k(t,e,r,n,i,a,o,u,s,l){return J.apply(this,arguments)}function J(){return(J=y(function*(t,e,r,n,i,a,o,u,s,f){var c={schedule_id:t,stop_id:e,location_name:r,route_id:n,route_name:i,direction:a,estimate_time:o,time_formatting_mode:u,time_offset:s,scheduled_time:f},d=`s_${e}`,p=g.length;g.push(c),_[t]=p,b.hasOwnProperty(d)||(b[d]=[]),b[d].push(p),yield(0,l.mL)(10,t,JSON.stringify(c))})).apply(this,arguments)}function C(t){return M.apply(this,arguments)}function M(){return(M=y(function*(t){if(_.hasOwnProperty(t)){var e=_[t],r=`s_${g[e].stop_id}`;g.splice(e,1,null),b[r].splice(b[r].indexOf(e),1),delete _[t],yield(0,l.iQ)(10,t)}})).apply(this,arguments)}function L(t){var e=(new Date).getTime(),r=`s_${t}`;if(b.hasOwnProperty(r)){var n,i=c(b[r]);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=g[a];if(null!==o)if(o.scheduled_time>e)return!0}}catch(t){i.e(t)}finally{i.f()}}return!1}function Q(){return E.apply(this,arguments)}function E(){return(E=y(function*(){var t=(new Date).getTime();for(var e in _){var r=_[e],n=g[r];if(n.scheduled_time<=t){var i=`s_${n.stop_id}`;g.splice(r,1,null),b[i].splice(b[i].indexOf(r),1),delete _[e],yield(0,l.iQ)(10,e)}}})).apply(this,arguments)}function j(t){return U.apply(this,arguments)}function U(){return(U=y(function*(t){var e,r=yield(0,a.a)(t,!0),n=function(){var t,e=(new Date).getTime(),r=[],n=c(g);try{for(n.s();!(t=n.n()).done;){var i=t.value;null!==i&&i.scheduled_time>e&&r.push(i)}}catch(t){n.e(t)}finally{n.f()}return r}(),i=(new Date).getTime(),o=[],s=c(n);try{for(s.s();!(e=s.n()).done;){var l=e.value,f={},d=l.location_name;f.name=d;var p=l.stop_id;f.stop_id=p;var y=l.estimate_time;f.estimate_time=y;var v=l.schedule_id;f.schedule_id=v;var h=l.scheduled_time;f.scheduled_time=h;var m=new Date(h),_=m.getDate(),b=m.getHours(),w=m.getMinutes();f.date=String(_).padStart(2,"0"),f.hours=String(b).padStart(2,"0"),f.minutes=String(w).padStart(2,"0"),f.route={};var S=l.route_name;f.route.name=S;var O=l.route_id;f.route.id=O;var $=l.direction;f.route.direction=$;var I=`r_${l.route_id}`;if(r.hasOwnProperty(I)){var P=r[I].pid;f.route.pathAttributeId=P,o.push(f)}}}catch(t){s.e(t)}finally{s.f()}o.sort(function(t,e){return t.scheduled_time-e.scheduled_time});for(var T=[],x=0,D={},A=0,N=o;A<N.length;A++){var k=N[A],J=`g_${k.date}_${k.hours}`;D.hasOwnProperty(J)?k.is_first=!1:(D[J]=!0,k.is_first=!0),T.push(k),x+=1}var C={items:T,itemQuantity:x,dataUpdateTime:Math.max((0,u.Zt)(t),i)};return(0,u.gC)(t),(0,u.LQ)(t),C})).apply(this,arguments)}var F=[{name:"到站前5分鐘",time_offset:-5,icon:"clock_loader_10",index:0},{name:"到站前10分鐘",time_offset:-10,icon:"clock_loader_20",index:1},{name:"到站前15分鐘",time_offset:-15,icon:"clock_loader_40",index:2},{name:"到站前20分鐘",time_offset:-20,icon:"clock_loader_60",index:3},{name:"到站前25分鐘",time_offset:-25,icon:"clock_loader_80",index:4},{name:"到站前30分鐘",time_offset:-30,icon:"clock_loader_90",index:5}];function H(t,e,r,n){return z.apply(this,arguments)}function z(){return(z=y(function*(t,e,r,l){if(I()){var c=(0,s.Js)("time_formatting_mode"),d=(0,n.zx)(),p=yield(0,o.T)(d),y=yield(0,i.g)(d,0),v=yield(0,a.a)(d,!0);(0,u.LQ)(d),(0,u.gC)(d);var h=`s_${t}`,m={};if(!p.hasOwnProperty(h))return 0;var g=(m=p[h]).stopLocationId,_=m.goBack,b=`l_${g}`;if(!y.hasOwnProperty(b))return 0;var w=y[b].n,S=`r_${e}`,O={};if(!v.hasOwnProperty(S))return 0;var $=(O=v[S]).n,P=O.dep,T=[O.des,P,""][_?parseInt(_):0],x=F[l].time_offset,D=(new Date).getTime()+1e3*r+60*x*1e3;return!1===(yield(0,f.Z)(t,w,e,$,T,r,c,x,D))?0:1}return 2})).apply(this,arguments)}},2757(t,e,r){r.d(e,{R:()=>S});var n=r(4256),i=r(574),a=r(2945),o=r(5428),u=r(6483),s=r(6802),l=r(7810),f=r(2063),c=r(8011),d=r(4293),p=r(424),y=r(2303),v=r(6788),h=r(3459),m=r(1238);function g(t,e,r,n,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function _(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return b(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e){var r={},n=[];for(var i in t){var a=t[i],o=a.StopID,u=parseInt(a.EstimateTime);u>=0&&e.indexOf(o)>-1&&n.push([o,u])}var s=n.length;n.sort(function(t,e){return t[1]-e[1]});for(var l=1,f=0,c=n;f<c.length;f++){var d=l/s,p=(d-d%.25)/.25;r[`s_${c[f][0]}`]={number:l,text:l.toString(),code:p},l+=1}return r}function S(t,e,r,n){return O.apply(this,arguments)}function O(){var t;return t=function*(t,e,r,g){(0,v.Mf)(g,"getLocation_0",0,!1),(0,v.Mf)(g,"getLocation_1",0,!1),(0,v.Mf)(g,"getRoute_0",0,!1),(0,v.Mf)(g,"getRoute_1",0,!1),(0,v.Mf)(g,"getStop_0",0,!1),(0,v.Mf)(g,"getStop_1",0,!1),(0,v.Mf)(g,"getEstimateTime_0",0,!1),(0,v.Mf)(g,"getEstimateTime_1",0,!1),(0,v.Mf)(g,"getBusEvent_0",0,!1),(0,v.Mf)(g,"getBusEvent_1",0,!1);for(var b=yield(0,f.K)(g),S=yield(0,c.g)(g,1),O=yield(0,d.a)(g,!0),$=yield(0,p.T)(g),I=yield(0,l.J)(g),P=yield(0,s.d)(g),T=yield(0,u.Io)(e,r),x=(0,h.Js)("time_formatting_mode"),D=(0,h.Js)("location_labels"),A=(0,h.Js)("display_user_orientation"),N={},k={},J={},C=(0,m.Y)(),M=S[`ml_${t}`],L=M.n,Q=M.id,E=M.v,j=[],U=[],F=Q.length,H=0;H<F;H++)j=j.concat(M.s[H]),U=U.concat(M.r[H]);var z,R=function(t,e){var r,n={},i=_(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.indexOf(a.StopID)>-1&&(n[`s_${a.StopID}`]=a)}}catch(t){i.e(t)}finally{i.f()}return n}(b,j),Z=(0,y.AS)(I,P,O,j),B=[],K=_(E);try{for(K.s();!(z=K.n()).done;){var q,G=z.value,V=0,X=0,Y=_(G);try{for(Y.s();!(q=Y.n()).done;){var W=q.value;V+=W[0],X+=W[1]}}catch(t){Y.e(t)}finally{Y.f()}var tt=(0,o.hF)([V,X]),et=(0,i.DK)(tt);B.push(et)}}catch(t){K.e(t)}finally{K.f()}var rt=[];switch(D){case"address":rt=(0,n._q)(M.a);break;case"letters":rt=(0,a.V)(F);break;case"directions":rt=(0,a.M)(B)}for(var nt=0;nt<F;nt++){var it=`g_${nt}`;N[it]=[],k[it]=0,J[it]={name:rt[nt],properties:[{key:"address",icon:"personal_places",value:(0,n.pD)(M.a[nt])},{key:"exact_position",icon:"location_on",value:`${M.la[nt].toFixed(5)}, ${M.lo[nt].toFixed(5)}`},{key:"cardinal_direction",icon:B[nt].icon,value:`${B[nt].name}${A&&-1!==C.cardinalDirection.id&&C.cardinalDirection.id===B[nt].id?"（目前指向）":""}`}]};for(var at=M.s[nt],ot=at.length,ut=w(R,at),st=0;st<ot;st++){var lt={},ft=M.s[nt][st],ct=`s_${ft}`,dt={};if($.hasOwnProperty(ct)){dt=$[ct],lt.stopId=ft;var pt={number:0,text:"--",code:-1};ut.hasOwnProperty(ct)&&(pt=ut[ct]),lt.ranking=pt;var yt=M.r[nt][st],vt=`r_${yt}`,ht={};if(O.hasOwnProperty(vt)){ht=O[vt],lt.route_name=ht.n,lt.route_direction=`往${[ht.des,ht.dep,""][parseInt(dt.goBack)]}`,lt.routeId=yt;var mt={};if(R.hasOwnProperty(ct)){mt=R[ct];var gt=(0,y.$Q)(mt.EstimateTime,x);lt.status=gt;var _t=[];Z.hasOwnProperty(ct)&&(_t=Z[ct].map(function(t){return(0,y.s$)(t)})),lt.buses=_t;var bt=[];T.hasOwnProperty(ct)&&(bt=T[ct]),lt.busArrivalTimes=bt,N[it].push(lt),k[it]+=1}}}}}for(var wt in N)N[wt].sort(function(t,e){return t.routeId-e.routeId});var St={groupedItems:N,groups:J,groupQuantity:F,itemQuantity:k,LocationName:L,hash:t,dataUpdateTime:(0,v.Zt)(g)};return(0,v.LQ)(g),(0,v.gC)(g),St},O=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){g(a,n,i,o,u,"next",t)}function u(t){g(a,n,i,o,u,"throw",t)}o(void 0)})},O.apply(this,arguments)}},3937(t,e,r){r.d(e,{e:()=>s});var n=r(77),i=r(4778),a=r(2571),o=r(1172);function u(t,e,r,n,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function s(t){return l.apply(this,arguments)}function l(){var t;return t=function*(t){if(!t)return!1;var e=(0,i.F)("register"),r=(0,a.b)("register",[t]),u=yield(0,o.R)("register",e,r);return!1!==u&&200===u.code&&"register"===u.method&&((0,n.gc)(u.client_id),(0,n.uQ)(u.secret),yield(0,n.ms)(),!0)},l=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){u(a,n,i,o,s,"next",t)}function s(t){u(a,n,i,o,s,"throw",t)}o(void 0)})},l.apply(this,arguments)}},5314(t,e,r){r.d(e,{$i:()=>S,DF:()=>b,FU:()=>h,Qj:()=>y,XK:()=>g});var n=r(8024),i=r(5579),a=r(9734),o=r(8011),u=r(4293),s=r(6788),l=r(4311);function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e,r,n,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function p(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){d(a,n,i,o,u,"next",t)}function u(t){d(a,n,i,o,u,"throw",t)}o(void 0)})}}function y(){return v.apply(this,arguments)}function v(){return(v=p(function*(){var t,e=[],r=(new Date).getTime(),n=f(yield(0,l.Su)(8));try{for(n.s();!(t=n.n()).done;){var i=t.value,a=yield(0,l.Ct)(8,i),o=JSON.parse(a);r-new Date(o.time).getTime()<=12096e5&&e.push(o)}}catch(t){n.e(t)}finally{n.f()}return 0===e.length&&e.push({type:"empty",time:(new Date).toISOString(),name:"沒有內容",id:0}),e})).apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return(m=p(function*(){var t,e=(new Date).getTime(),r=f(yield(0,l.Su)(8));try{for(r.s();!(t=r.n()).done;){var n=t.value,i=yield(0,l.Ct)(8,n),a=JSON.parse(i);e-new Date(a.time).getTime()>12096e5&&(yield(0,l.iQ)(8,n))}}catch(t){r.e(t)}finally{r.f()}})).apply(this,arguments)}function g(t,e){return _.apply(this,arguments)}function _(){return(_=p(function*(t,e){var r=(0,n.zx)(),i=`${t}_${e}`,s=(new Date).toISOString(),f=yield(0,l.Ct)(8,i);if(f){var c=JSON.parse(f);c.time=s,yield(0,l.mL)(8,i,JSON.stringify(c))}else switch(t){case"route":var d=yield(0,u.a)(r,!0),p=`r_${e}`;if(d.hasOwnProperty(p)){var y={type:"route",time:s,name:d[p].n,id:e};yield(0,l.mL)(8,i,JSON.stringify(y))}break;case"location":var v=yield(0,o.g)(r,1),h=`ml_${e}`;if(v.hasOwnProperty(h)){var m={type:"location",time:s,name:v[h].n,hash:e};yield(0,l.mL)(8,i,JSON.stringify(m))}break;case"bus":var g=yield(0,a.j)(r,!0),_=`c_${e}`;if(g.hasOwnProperty(_)){var b={type:"bus",time:s,name:g[_].CarNum,id:e};yield(0,l.mL)(8,i,JSON.stringify(b))}}})).apply(this,arguments)}function b(t,e){return w.apply(this,arguments)}function w(){return(w=p(function*(t,e){var r=`${t}_${e}`,n=yield(0,l.Ct)(8,r);return!!n&&JSON.parse(n)})).apply(this,arguments)}function S(t){return O.apply(this,arguments)}function O(){return(O=p(function*(t){var e,r=yield y(),n=yield(0,u.a)(t,!0),a=[],o=0,l=f(r);try{for(l.s();!(e=l.n()).done;){var c=e.value,d=c.type,p=new Date(c.time);switch(d){case"route":var v={type:"route"},h=c.name;v.name=h;var m=c.id;v.id=m;var g=n[`r_${m}`].pid;v.pid=g,v.time={absolute:p.getTime(),relative:(0,i.HN)(p)},a.push(v),o+=1;break;case"location":var _={type:"location"},b=c.hash;_.hash=b;var w=c.name;_.name=w,_.time={absolute:p.getTime(),relative:(0,i.HN)(p)},a.push(_),o+=1;break;case"bus":var S={type:"bus"},O=c.id;S.id=O;var $=c.name;S.name=$,S.time={absolute:p.getTime(),relative:(0,i.HN)(p)},a.push(S),o+=1;break;case"empty":var I={type:"empty"},P=c.id;I.id=P;var T=c.name;I.name=T,I.time={absolute:p.getTime(),relative:(0,i.HN)(p)},a.push(I),o=1}}}catch(t){l.e(t)}finally{l.f()}a.sort(function(t,e){return e.time.absolute-t.time.absolute});var x={items:a,itemQuantity:o,dataUpdateTime:(new Date).getTime()};return(0,s.LQ)(t),(0,s.gC)(t),x})).apply(this,arguments)}},5352(t,e,r){r.d(e,{Qh:()=>l,nL:()=>p,qZ:()=>c,ty:()=>v,vQ:()=>g});var n=r(8024),i=r(4311);function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r,n,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){u(a,n,i,o,s,"next",t)}function s(t){u(a,n,i,o,s,"throw",t)}o(void 0)})}}function l(t,e,r,n,i,a){return f.apply(this,arguments)}function f(){return(f=s(function*(t,e,r,o,u,s){var l=(0,n.zx)();if(e<0||e>23||r<0||r>59||o<0||o>23||u<0||u>59)return!1;if(!(Number.isInteger(e)&&Number.isInteger(r)&&Number.isInteger(o)&&Number.isInteger(u)))return!1;if(s.length>7)return!1;var f,c=a(s);try{for(c.s();!(f=c.n()).done;){var d=f.value;if("number"==typeof d&&(d<0||d>6||!Number.isInteger(d)))return!1}}catch(t){c.e(t)}finally{c.f()}var p={name:t,period:{start:{hours:e,minutes:r},end:{hours:o,minutes:u}},days:s,id:l};return yield(0,i.mL)(7,l,JSON.stringify(p)),!0})).apply(this,arguments)}function c(t){return d.apply(this,arguments)}function d(){return(d=s(function*(t){var e=yield(0,i.Ct)(7,t);if(e)return JSON.parse(e)})).apply(this,arguments)}function p(t){return y.apply(this,arguments)}function y(){return(y=s(function*(t){(yield c(t.id))&&(yield(0,i.mL)(7,t.id,JSON.stringify(t)))})).apply(this,arguments)}function v(){return h.apply(this,arguments)}function h(){return(h=s(function*(){var t,e=[],r=a(yield(0,i.Su)(7));try{for(r.s();!(t=r.n()).done;){var n=t.value,o=yield(0,i.Ct)(7,n);if(o){var u=JSON.parse(o);e.push(u)}}}catch(t){r.e(t)}finally{r.f()}return e.sort(function(t,e){return 60*t.period.end.hours+t.period.end.minutes-(60*e.period.end.hours+e.period.end.minutes)}),e.sort(function(t,e){return 60*t.period.start.hours+t.period.start.minutes-(60*e.period.start.hours+e.period.start.minutes)}),e})).apply(this,arguments)}function m(){return(m=s(function*(){var t,e={},r=a(yield v());try{for(r.s();!(t=r.n()).done;){var n,i=t.value,o=a(i.days);try{for(o.s();!(n=o.n()).done;){var u=`d_${n.value}`;e.hasOwnProperty(u)||(e[u]=[]);var s={start:i.period.start,end:i.period.end};e[u].push(s)}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}for(var l in e){for(var f=e[l],c=f.length,d=[],p=0;p<c;p++){var y=f[p-1]||f[p],h=f[p];0===d.length?d.push(h):60*h.start.hours+h.start.minutes>=60*y.start.hours+y.start.minutes&&60*h.start.hours+h.start.minutes<=60*y.end.hours+y.end.minutes?(d[d.length-1].end.hours=h.end.hours,d[d.length-1].end.minutes=h.end.minutes):d.push(h)}e[l]=d}return e})).apply(this,arguments)}function g(t){return _.apply(this,arguments)}function _(){return _=s(function*(t){var e=yield function(){return m.apply(this,arguments)}(),r=`d_${t.getDay()}`,n=t.getHours(),i=t.getMinutes();if(e.hasOwnProperty(r)){var o,u=a(e[r]);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(60*n+i>=60*s.start.hours+s.start.minutes&&60*n+i<=60*s.end.hours+s.end.minutes)return!0}}catch(t){u.e(t)}finally{u.f()}}return!1}),_.apply(this,arguments)}}}]);
//# sourceMappingURL=830919d3b80122c6247b.js.map