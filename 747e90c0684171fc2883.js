"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[600],{904(e,t,a){a.d(t,{a:()=>F,b:()=>E,c:()=>D,d:()=>j,e:()=>P,f:()=>H,g:()=>R,h:()=>N});var i=a(8179),r=a(4884),n=a(9499),s=a(6052),d=a(9333),o=a(8379),c=a(6082),l=a(4294),u=a(833),p=a(3030),h=a(2174),f=a(8380),b=a(5693),v=a(7891),g=a(8279),m=a(7908),y=a(4131),k=a(4373),A=a(4690),L=a(3041),C=a(752),w=a(5009),x=a(6104),T=a(6166),S=a(2994),_=(0,i.c)(".if"),$=(0,i.c)(".kf"),I=(new Date).getTime(),M=["Home"];function D(e){var t=M.length;M[t-1]!==e&&M.push(e)}function P(e){var t=M.length;t>1&&M[t-1]===e&&M.pop()}function E(){var e=M.length;if(e>1)switch(M[e-2]){case"Home":(0,c.c)();break;case"FolderCreator":(0,s.b)();break;case"FolderEditor":(0,d.a)();break;case"IconSelector":(0,l.b)();break;case"FolderManager":(0,o.b)();break;case"Location":(0,p.b)();break;case"LocationDetails":(0,u.b)();break;case"Route":(0,A.b)();break;case"RouteDetails":(0,k.b)();break;case"RouteCalendar":(0,y.b)();break;case"SaveToFolder":(0,L.b)();break;case"Search":(0,w.b)();break;case"Settings":(0,x.c)();break;case"SettingsOptions":(0,T.b)();break;case"DataUsage":(0,n.b)();break;case"PersonalScheduleManager":(0,v.b)();break;case"PersonalScheduleCreator":(0,f.c)();break;case"PersonalScheduleEditor":(0,b.b)();break;case"Bus":(0,r.c)();break;case"RegisterNotification":(0,m.a)();break;case"ScheduleNotification":(0,C.b)();break;case"NotificationScheduleManager":(0,h.b)();break;case"QRCode":(0,g.b)();break;case"Storage":(0,S.b)()}}function N(){var e=M.length;if(e>1)switch(M[e-2]){case"Home":(0,c.d)();break;case"FolderCreator":(0,s.d)();break;case"FolderEditor":(0,d.c)();break;case"IconSelector":(0,l.e)();break;case"FolderManager":(0,o.d)();break;case"Location":(0,p.e)();break;case"LocationDetails":(0,u.e)();break;case"Route":(0,A.e)();break;case"RouteDetails":(0,k.e)();break;case"RouteCalendar":(0,y.d)();break;case"SaveToFolder":(0,L.d)();break;case"Search":(0,w.f)();break;case"Settings":(0,x.h)();break;case"SettingsOptions":(0,T.d)();break;case"DataUsage":(0,n.d)();break;case"PersonalScheduleManager":(0,v.e)();break;case"PersonalScheduleCreator":(0,f.e)();break;case"PersonalScheduleEditor":(0,b.e)();break;case"Bus":(0,r.e)();break;case"RegisterNotification":(0,m.c)();break;case"ScheduleNotification":(0,C.d)();break;case"NotificationScheduleManager":(0,h.d)();break;case"QRCode":(0,g.d)();break;case"Storage":(0,S.d)()}}function F(e){function t(){_.classList.add("jf"),_.addEventListener("animationend",function(){_.setAttribute("displayed","false"),_.classList.remove("jf"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-I<100?setTimeout(t,Math.max(1,a-I)):t()}function R(){$.setAttribute("displayed","true")}function j(e){var t=0,a=0,i=window.innerWidth,r=window.innerHeight;switch(e){case"window":t=i,a=r;break;case"head":t=i,a=55;break;case"head-one-button":t=i-55,a=55;break;case"head-two-button":t=i-110,a=55;break;case"route-details-canvas":t=i-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=i-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=i-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function H(){window.scrollTo({top:0,behavior:"instant"})}},833(e,t,a){a.d(t,{a:()=>S,b:()=>x,c:()=>T,d:()=>_,e:()=>w,f:()=>I});var i=a(467),r=a(8011),n=a(6788),s=a(6983),d=a(3459),o=a(8179),c=a(8024),l=a(9469),u=a(251),p=a(4537),h=a(904),f=a(8279),b={},v=!1,g=!1,m=(0,o.c)(".mi"),y=(0,o.e)(m,".ri"),k=(0,o.e)(y,".si");function A(){var e=(0,o.a)();e.classList.add("ti");var t=(0,o.a)();t.classList.add("ui"),t.appendChild((0,p.a)()),e.appendChild(t);var a=(0,o.a)();return a.classList.add("vi"),e.appendChild(a),e}function L(e,t,a){function i(e,i,r){function n(e,t){var a=(0,o.e)(e,".ui");(0,p.c)(a,t.icon)}function s(e,t){(0,o.e)(e,".vi").innerText=t.name}function d(e,t){e.onclick=t.action}function l(e,t){e.setAttribute("animation",(0,c.a)(t))}function u(e,t){e.setAttribute("skeleton-screen",(0,c.a)(t))}null==r?(n(e,i),s(e,i),d(e,i),l(e,a),u(e,t)):(r.key!==i.key&&(n(e,i),s(e,i),d(e,i)),a!==v&&l(e,a),t!==g&&u(e,t))}var r=e.actions,n=e.actionsQuantity,s=Array.from((0,o.d)(k,".ti")),d=s.length;if(n!==d){var l=d-n;if(l<0){for(var u=new DocumentFragment,h=0;h>l;h--){var f=A();u.appendChild(f),s.push(f)}k.append(u)}else if(l>0)for(var m=d-1,y=d-l-1;m>y;m--)s[m].remove(),s.splice(m,1)}for(var L=0;L<n;L++){var C=s[L],w=r[L];if((0,c.f)(b,"actions"))if(b.actions[L])i(C,w,b.actions[L]);else i(C,w,null);else i(C,w,null)}b=e,v=a,g=t}function C(){return(C=(0,i.a)(function*(e){var t=(0,d.b)("playing_animation"),a=(0,c.c)();!function(){for(var e=(0,d.b)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});L({actions:t,actionsQuantity:3,hash:""},!0,e)}(),L(yield(0,s.a)(e,a),!1,t)})).apply(this,arguments)}function w(){m.setAttribute("displayed","true")}function x(){m.setAttribute("displayed","false")}function T(e){(0,h.c)("LocationDetails"),w(),function(e){C.apply(this,arguments)}(e),(0,h.b)()}function S(){x(),(0,h.h)(),(0,h.e)("LocationDetails")}function _(e){return $.apply(this,arguments)}function $(){return($=(0,i.a)(function*(e){var t=(0,c.c)(),a=yield(0,r.a)(t,1);(0,n.a)(t),(0,n.b)(t);var i=`ml_${e}`;if((0,c.f)(a,i)){var s=a[i],d=(0,l.a)(1,{hash:e});(0,u.b)(s.n,d)}})).apply(this,arguments)}function I(e){return M.apply(this,arguments)}function M(){return(M=(0,i.a)(function*(e){var t=(0,c.c)(),a=yield(0,r.a)(t,1);(0,n.a)(t),(0,n.b)(t);var i=`ml_${e}`;if((0,c.f)(a,i)){var s=(0,l.a)(1,{hash:e});(0,f.c)(s)}})).apply(this,arguments)}},3030(e,t,a){a.d(t,{a:()=>se,b:()=>re,c:()=>z,d:()=>ne,e:()=>ie});var i=a(467),r=a(5767),n=a(9566),s=a(2757),d=a(3422),o=a(5314),c=a(3459),l=a(8179),u=a(7968),p=a(8024),h=a(9915),f=a(5579),b=a(4537),v=a(904),g=a(833),m=a(9119),y=a(3041),k=a(752),A=(0,l.c)(".mf"),L=(0,l.e)(A,".vf"),C=(0,l.e)(L,".zf"),w=(0,l.e)(C,"span"),x=(0,l.e)(L,".yf"),T=(0,l.e)(A,".ig"),S=(0,l.e)(L,"._f"),_=(0,l.e)(S,".ag"),$=(0,l.e)(L,".dg"),I=(0,l.e)($,".eg"),M=(0,l.e)(L,".fg .gg"),D={},P=!1,E=!1,N=0,F=0,R=0,j={},H=0,Q=!1,B=new h.a(function(){return te.apply(this,arguments)},15e3),U="",W=(0,p.e)();function z(){T.addEventListener("touchstart",function(){N=Math.round(T.scrollLeft/H)},{passive:!0}),T.addEventListener("scroll",function(e){Q=!0;var t=e.target.scrollLeft/H;F=t>N?N+1:N-1;var a=t-N,i=Math.abs(a);i>1&&(a>0?(N=Math.floor(t),F=N+1):(N=Math.ceil(t),F=N-1),i=Math.abs(t-N));var r=j[`g_${N}`]||{width:0,offset:0},n=j[`g_${F}`]||{width:0,offset:0},s=r.width+(n.width-r.width)*i,d=-1*(r.offset+(n.offset-r.offset)*i)+.5*H-.5*s;O(R,d,s-20,t)},{passive:!0}),T.addEventListener("scrollend",function(e){var t=e.target.scrollLeft/H,a=t-F;-.01<a&&a<.01&&(N=Math.round(t),Q=!1)},{passive:!0})}function O(e,t,a,i){T.style.setProperty("--lf",e.toString()),I.style.setProperty("--pf",a.toString()),_.style.setProperty("--qf",`${t.toFixed(W)}px`),_.style.setProperty("--sf",i.toString())}function q(e){M.style.setProperty("--uf",`${e}ms`),M.classList.add("hg")}function G(e){var t=e;M.style.setProperty("--tf",t.detail.progress.toString()),"end"===t.detail.stage&&document.removeEventListener(t.detail.target,G)}function J(){var e=(0,l.a)();e.classList.add("tg"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var t=(0,l.a)();t.classList.add("ug");var a=(0,l.a)();a.classList.add("vg");var i=(0,l.a)();i.classList.add("xg"),i.setAttribute("code","-1"),i.setAttribute("displayed","false");var r=(0,l.a)();r.classList.add("yg"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),a.appendChild(i),a.appendChild(r);var n=(0,l.a)();n.classList.add("hh");var s=(0,l.a)();s.classList.add("ih");var d=(0,l.a)();d.classList.add("jh");var o=(0,l.a)();o.classList.add("mh");var c=(0,l.a)();c.classList.add("we"),c.setAttribute("code","0"),c.setAttribute("displayed","false");var u=(0,l.a)();u.classList.add("xe"),u.setAttribute("code","0"),u.setAttribute("displayed","true"),o.appendChild(c),o.appendChild(u);var p=(0,l.a)();p.classList.add("lh"),p.appendChild((0,b.b)("keyboard_arrow_down")),p.onclick=function(){!function(e){var t=(0,l.e)(e,".nh"),a=e.parentElement,i=(0,l.f)(e,"tg"),r=i.length,n=a.getBoundingClientRect(),s=e.getBoundingClientRect().top-n.top,d="true"===e.getAttribute("stretched"),o="true"===e.getAttribute("animation");if(o){var c=d?"2":"1";e.setAttribute("stretching","true"),e.style.setProperty("--rg",`${s}px`);for(var u=0;u<r;u++){var p=i[u];p.setAttribute("push-direction",c),p.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var t=0;t<r;t++){var a=i[t];a.setAttribute("push-direction","0"),a.setAttribute("push-state","0")}e.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var e=0;e<r;e++){i[e].setAttribute("push-state","2")}},{once:!0})}d?(o?t.addEventListener("transitionend",function(){t.setAttribute("displayed","false")},{once:!0}):t.setAttribute("displayed","false"),e.setAttribute("stretched","false")):(t.setAttribute("displayed","true"),e.setAttribute("stretched","true"))}(e)};var h=(0,l.a)();h.classList.add("kh"),d.appendChild(o),d.appendChild(p),d.appendChild(h),t.appendChild(a),t.appendChild(n),t.appendChild(s),t.appendChild(d);var f=(0,l.a)();f.classList.add("nh"),f.setAttribute("displayed","false");var v=(0,l.a)();v.classList.add("oh");var g=(0,l.a)();g.classList.add("ph"),g.setAttribute("highlighted","true"),g.setAttribute("type","tab"),g.setAttribute("code","0");var m=(0,l.a)();m.classList.add("sh"),m.appendChild((0,b.b)("directions_bus")),g.appendChild(m),g.appendChild(document.createTextNode("公車")),g.onclick=function(){de(e,0)};var y=(0,l.a)();y.classList.add("ph"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","1");var k=(0,l.a)();k.classList.add("sh"),k.appendChild((0,b.b)("departure_board")),y.appendChild(k),y.appendChild(document.createTextNode("抵達時間")),y.onclick=function(){de(e,1)};var A=(0,l.a)();A.classList.add("ph"),A.setAttribute("highlighted","false"),A.setAttribute("type","save-to-folder");var L=(0,l.a)();L.classList.add("sh"),L.appendChild((0,b.b)("folder")),A.appendChild(L),A.appendChild(document.createTextNode("儲存"));var C=(0,l.a)();C.classList.add("ph"),C.setAttribute("highlighted","false"),C.setAttribute("type","schedule-notification"),C.setAttribute("enabled","true");var w=(0,l.a)();w.classList.add("sh"),w.appendChild((0,b.b)("notifications")),C.appendChild(w),C.appendChild(document.createTextNode("通知")),v.appendChild(g),v.appendChild(y),v.appendChild(A),v.appendChild(C);var x=(0,l.a)();x.classList.add("th"),x.setAttribute("displayed","true");var T=(0,l.a)();return T.classList.add("uh"),T.setAttribute("displayed","false"),f.appendChild(v),f.appendChild(x),f.appendChild(T),e.appendChild(t),e.appendChild(f),e}function K(){var e=(0,l.a)();e.classList.add("jg");var t=(0,l.a)();t.classList.add("kg");var a=(0,l.a)();a.classList.add("lg"),t.appendChild(a);var i=(0,l.a)();return i.classList.add("sg"),e.appendChild(t),e.appendChild(i),e}function V(){var e=(0,l.a)();e.classList.add("bg");var t=document.createElement("span");return e.appendChild(t),e}function X(){var e=(0,l.a)();e.classList.add("ng");var t=(0,l.a)();t.classList.add("og"),t.appendChild((0,b.a)());var a=(0,l.a)();return a.classList.add("pg"),e.appendChild(t),e.appendChild(a),e}function Y(){var e=(0,l.a)();e.classList.add("vh"),e.setAttribute("on-this-route","false");var t=(0,l.a)();t.classList.add("xh");var a=(0,l.a)();a.classList.add("zh"),a.appendChild((0,b.b)("directions_bus"));var i=(0,l.a)();i.classList.add("ai");var r=(0,l.a)();r.classList.add("di");var n=(0,l.a)();n.classList.add("hi");var s=(0,l.a)();s.classList.add("ii");var d=(0,l.a)();return d.classList.add("ji"),t.appendChild(a),t.appendChild(i),e.appendChild(t),r.appendChild(n),r.appendChild(s),r.appendChild(d),e.appendChild(r),e}function Z(){var e=(0,l.a)();e.classList.add("wh");var t=(0,l.a)();t.classList.add("yh");var a=(0,l.a)();a.classList.add("_h"),a.appendChild((0,b.b)("calendar_view_day"));var i=(0,l.a)();i.classList.add("bi");var r=(0,l.a)();r.classList.add("ci");var n=(0,l.a)();return n.classList.add("ei"),t.appendChild(a),t.appendChild(i),t.appendChild(r),e.appendChild(t),e.appendChild(n),e}function ee(e,t,a){var i,r;function s(e,i,r){function s(e,t,a,i){var r=(0,l.e)(e,".ug"),n=(0,l.e)(r,".mh"),s=(0,l.e)(n,".we"),d=(0,l.e)(n,".xe");if(s.setAttribute("code",t.status.code.toString()),s.innerText=t.status.text,!a&&i){var o=e.getBoundingClientRect(),c=o.top,u=o.left,p=o.bottom,h=o.right,f=window.innerWidth,b=window.innerHeight;if(p>0&&c<b&&h>0&&u<f)return d.addEventListener("animationend",function(){d.setAttribute("code",t.status.code.toString()),d.innerText=t.status.text,d.classList.remove("_e"),s.setAttribute("displayed","false")},{once:!0}),s.setAttribute("displayed","true"),void d.classList.add("_e")}d.setAttribute("code",t.status.code.toString()),d.innerText=t.status.text}function o(e,t,a,i){var r=(0,l.e)(e,".ug"),n=(0,l.e)(r,".vg"),s=(0,l.e)(n,".xg"),d=(0,l.e)(n,".yg");if(s.setAttribute("code",t.ranking.code.toString()),s.innerText=t.ranking.text,!a&&i){var o=e.getBoundingClientRect(),c=o.top,u=o.left,p=o.bottom,h=o.right,f=window.innerWidth,b=window.innerHeight;if(p>0&&c<b&&h>0&&u<f)return d.addEventListener("animationend",function(){d.setAttribute("code",t.ranking.code.toString()),d.innerText=t.ranking.text,d.classList.remove("gh"),s.setAttribute("displayed","false")},{once:!0}),s.setAttribute("displayed","true"),void d.classList.add("gh")}d.setAttribute("code",t.ranking.code.toString()),d.innerText=t.ranking.text}function c(e,t){var a=(0,l.e)(e,".ug");(0,l.e)(a,".hh").innerText=t.route_direction}function u(e,t){var a=(0,l.e)(e,".ug");(0,l.e)(a,".ih").innerText=t.route_name}function h(e,t){var a=(0,l.e)(e,".nh"),i=(0,l.e)(a,".th"),r=Array.from((0,l.d)(i,".vh")),n=r.length,s=t.buses.length,d=n-s;if(d<0){for(var o=new DocumentFragment,c=0;c>d;c--){var u=Y();o.appendChild(u),r.push(u)}i.append(o)}else if(d>0)for(var h=n-1,f=n-d-1;h>f;h--)r[h].remove(),r.splice(h,1);for(var b=0;b<s;b++){var v=t.buses[b],g=r[b],m=(0,l.e)(g,".xh"),y=(0,l.e)(m,".ai"),k=(0,l.e)(g,".di"),A=(0,l.e)(k,".hi"),L=(0,l.e)(k,".ii"),C=(0,l.e)(k,".ji");g.setAttribute("on-this-route",(0,p.a)(v.onThisRoute)),y.innerText=v.carNumber,A.innerText=`路線：${v.RouteName}`,L.innerText=`狀態：${v.status.text}`,C.innerText=`類型：${v.type}`}i.setAttribute("empty",(0,p.a)(0===s))}function b(e,t){var a=(0,l.e)(e,".nh"),i=(0,l.e)(a,".uh"),r=Array.from((0,l.d)(i,".wh")),n=r.length,s=t.busArrivalTimes.length,d=n-s;if(d<0){for(var o=new DocumentFragment,c=0;c>d;c--){var u=Z();o.appendChild(u),r.push(u)}i.append(o)}else if(d>0)for(var h=n-1,b=n-d-1;h>b;h--)r[h].remove(),r.splice(h,1);for(var v=0;v<s;v++){var g=t.busArrivalTimes[v],m=r[v],y=(0,l.e)(m,".yh"),k=(0,l.e)(y,".bi"),A=(0,l.e)(y,".ci"),L=(0,l.e)(m,".ei");k.innerText=g.personalSchedule.name,A.innerText=`週${(0,f.e)(g.day).name} ${(0,f.g)(g.personalSchedule.period.start)} - ${(0,f.g)(g.personalSchedule.period.end)}`,L.innerHTML=g.chart}i.setAttribute("empty",(0,p.a)(0===s))}function v(e,t){t&&e.setAttribute("stretched","false")}function g(e,t){e.setAttribute("animation",(0,p.a)(t))}function m(e,t){e.setAttribute("skeleton-screen",(0,p.a)(t))}function A(e,t){var a=(0,l.e)(e,".nh"),i=(0,l.e)(a,".oh"),r=(0,l.e)(i,'.ph[type="save-to-folder"]');r.onclick=function(){(0,y.c)("stop",[t.stopId,t.routeId],r)},(0,n.e)("stop",t.stopId).then(function(e){r.setAttribute("highlighted",(0,p.a)(e))})}function L(e,t){var a=(0,l.e)(e,".nh"),i=(0,l.e)(a,".oh"),r=(0,l.e)(i,'.ph[type="schedule-notification"]');r.onclick=function(){(0,k.c)(r,t.stopId,t.routeId,t.status.time)};var n=(0,d.r)(t.stopId);r.setAttribute("highlighted",(0,p.a)(n))}null==r?(s(e,i,t,a),o(e,i,t,a),c(e,i),u(e,i),h(e,i),b(e,i),v(e,t),g(e,a),m(e,t),A(e,i),L(e,i)):(i.status.time!==r.status.time&&(s(e,i,t,a),L(e,i)),r.ranking.number===i.ranking.number&&r.ranking.code===i.ranking.code||o(e,i,t,a),r.stopId!==i.stopId&&(c(e,i),u(e,i),A(e,i)),(0,p.b)(r.buses,i.buses)||h(e,i),(0,p.b)(r.busArrivalTimes,i.busArrivalTimes)||b(e,i),a!==P&&g(e,a),t!==E&&(v(e,t),m(e,t)))}function o(e,i,r){function n(e,t){var a=(0,l.e)(e,".og");(0,b.c)(a,t.icon)}function s(e,t){(0,l.e)(e,".pg").innerHTML=t.value}function d(e,t){e.setAttribute("animation",(0,p.a)(t))}function o(e,t){e.setAttribute("skeleton-screen",(0,p.a)(t))}null==r?(n(e,i),s(e,i),d(e,a),o(e,t)):((0,p.b)(r.icon,i.icon)||n(e,i),(0,p.b)(r.value,i.value)||s(e,i),a!==P&&d(e,a),t!==E&&o(e,t))}var c=(0,v.d)("window"),h=c.width,m=c.height,A=e.groupQuantity,L=e.itemQuantity,I=e.groupedItems,M=e.groups;R=A,H=h;for(var F=0,B=0;B<A;B++){var U=`g_${B}`,W=(0,u.c)(M[U].name,500,"17px",'"Noto Sans TC", sans-serif')+20;j[U]={width:W,offset:F},F+=W}if(j[`g_${A}`]={width:0,offset:F},!Q){var z=j[`g_${N}`],q=-1*z.offset+.5*H-.5*z.width,G=z.width-20;O(R,q,G,N)}(null===(i=D)||void 0===i?void 0:i.hash)!==e.hash&&(x.onclick=function(){(0,g.c)(e.hash)}),(null===(r=D)||void 0===r?void 0:r.LocationName)!==e.LocationName&&(w.innerText=e.LocationName),P!==a&&(C.setAttribute("animation",(0,p.a)(a)),S.setAttribute("animation",(0,p.a)(a))),E!==t&&(C.setAttribute("skeleton-screen",(0,p.a)(t)),S.setAttribute("skeleton-screen",(0,p.a)(t)),$.setAttribute("skeleton-screen",(0,p.a)(t)));var ee=Array.from((0,l.d)(T,".jg")),te=Array.from((0,l.d)(_,".bg")),ae=ee.length;if(A!==ae){var ie=ae-A;if(ie<0){for(var re=new DocumentFragment,ne=new DocumentFragment,se=0;se>ie;se--){var de=K();re.appendChild(de),ee.push(de);var oe=V();ne.appendChild(oe),te.push(oe)}T.append(re),_.append(ne)}else if(ie>0)for(var ce=ae-1,le=ae-ie-1;ce>le;ce--)ee[ce].remove(),ee.splice(ce,1),te[ce].remove(),te.splice(ce,1)}for(var ue=(0,l.d)(T,".jg"),pe=0;pe<A;pe++){var he=`g_${pe}`,fe=ue[pe],be=(0,l.e)(fe,".kg"),ve=(0,l.e)(be,".lg"),ge=Array.from((0,l.d)(ve,".ng")),me=ge.length,ye=M[he].properties.length;if(ye!==me){var ke=me-ye;if(ke<0){for(var Ae=new DocumentFragment,Le=0;Le>ke;Le--){var Ce=X();Ae.appendChild(Ce),ge.push(Ce)}ve.append(Ae)}else if(ke>0)for(var we=me-1,xe=me-ke-1;we>xe;we--)ge[we].remove(),ge.splice(we,1)}var Te=(0,l.e)(fe,".sg"),Se=Array.from((0,l.d)(Te,".tg")),_e=Se.length;if(L[he]!==_e){var $e=_e-L[he];if($e<0){for(var Ie=new DocumentFragment,Me=0;Me>$e;Me--){var De=J();Ie.appendChild(De),Se.push(De)}Te.append(Ie)}else if($e>0)for(var Pe=_e-1,Ee=_e-$e-1;Pe>Ee;Pe--)Se[Pe].remove(),Se.splice(Pe,1)}var Ne=te[pe];(0,l.e)(Ne,"span").innerText=M[he].name,Ne.style.setProperty("--nf",`${j[he].offset}px`),Ne.style.setProperty("--of",`${j[he].width}px`),Ne.style.setProperty("--cg",pe.toString()),t&&(fe.scrollTop=0);for(var Fe=0;Fe<ye;Fe++){var Re=M[he].properties[Fe],je=ge[Fe];if((0,p.f)(D,"groups"))if((0,p.f)(D.groups,he))if(D.groups[he].properties[Fe])o(je,Re,D.groups[he].properties[Fe]);else o(je,Re,null);else o(je,Re,null);else o(je,Re,null)}for(var He=0;He<L[he];He++){var Qe=Se[He],Be=I[he][He];if((0,p.f)(D,"groupedItems"))if((0,p.f)(D.groupedItems,he))if(D.groupedItems[he][He])s(Qe,Be,D.groupedItems[he][He]);else s(Qe,Be,null);else s(Qe,Be,null);else s(Qe,Be,null)}}_.style.setProperty("--rf",`${F}px`),D=e,P=a,E=t}function te(){return(te=(0,i.a)(function*(){try{var e=(0,c.b)("playing_animation"),t=(0,c.b)("refresh_interval"),a=(0,v.d)("location-bus-arrival-time-chart"),i=(0,p.c)();M.setAttribute("refreshing","true"),M.classList.remove("hg"),document.addEventListener(i,G);var n=yield(0,s.a)(U,a.width,a.height,i);ee(n,!1,e);var d=0;t.dynamic&&(d=yield(0,r.c)());var o=(new Date).getTime(),l=0;l=t.dynamic?Math.max(o+5e3,n.dataUpdateTime+t.baseInterval/d):o+t.baseInterval;var u=Math.max(5e3,l-o);return M.setAttribute("refreshing","false"),q(u),u}catch(e){var h=1e4;return(0,m.a)("error","地點發生錯誤，將在10秒後重試。"),q(h),h}})).apply(this,arguments)}function ae(e){U=e,N=0,j={},T.scrollLeft=0,T.focus(),function(e){for(var t=(0,c.b)("playing_animation"),a=(0,v.d)("window"),i=(a.width,a.height),r={g_0:Math.floor(i/50)+5,g_1:Math.floor(i/50)+5},n={},s=0;s<2;s++){var d=`g_${s}`;n[d]=[];for(var o=0;o<r[d];o++)n[d].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}ee({groupedItems:n,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:r,LocationName:"載入中",hash:e,dataUpdateTime:0},!0,t)}(e),B.isPaused?B.resume(!0):B.tick()}function ie(){A.setAttribute("displayed","true")}function re(){A.setAttribute("displayed","false")}function ne(e){(0,v.c)("Location"),(0,o.e)("location",e),ie(),ae(e),(0,v.b)()}function se(){re(),B.pause(),(0,v.h)(),(0,v.e)("Location")}function de(e,t){var a=(0,l.e)(e,".nh"),i=(0,l.e)(a,".oh"),r=(0,l.d)(i,'.ph[highlighted="true"][type="tab"]');for(var n of r)n.setAttribute("highlighted","false");switch((0,l.e)(i,`.ph[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,l.e)(e,".th").setAttribute("displayed","true"),(0,l.e)(e,".uh").setAttribute("displayed","false");break;case 1:(0,l.e)(e,".th").setAttribute("displayed","false"),(0,l.e)(e,".uh").setAttribute("displayed","true")}}},5259(){},9151(){},5172(){},9050(){},8550(){},5518(){},9731(){},5135(){},8969(){},4071(){},245(){},1003(){}}]);
//# sourceMappingURL=747e90c0684171fc2883.js.map