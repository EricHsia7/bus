!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("bus",[],t):"object"==typeof exports?exports.bus=t():e.bus=t()}(self,(()=>(()=>{"use strict";var e,t={3648:(e,t,r)=>{function n(e){return document.querySelector(e)}function a(e){return document.querySelectorAll(e)}function o(e,t){return e.querySelector(t)}function c(e,t){return e.querySelectorAll(t)}r.d(t,{aI:()=>o,bv:()=>n,e0:()=>a,jg:()=>c})},4750:(e,t,r)=>{r.d(t,{h:()=>l});var n=r(8024);function a(e,t,r,n,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,a)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i,u={};if("undefined"!=typeof SharedWorker){var s=new SharedWorker(new URL(r.p+r.u(82),r.b));(i=s.port).start()}else{var f=new Worker(new URL(r.p+r.u(701),r.b));i=f}function l(e){return d.apply(this,arguments)}function d(){var e;return e=function*(e){var t=(0,n.zx)("t");return yield new Promise((function(r,n){u[t]=r,i.onerror=function(e){n(e.message)},i.postMessage([e,t])}))},d=function(){var t=this,r=arguments;return new Promise((function(n,o){var c=e.apply(t,r);function i(e){a(c,n,o,i,u,"next",e)}function u(e){a(c,n,o,i,u,"throw",e)}i(void 0)}))},d.apply(this,arguments)}i.onmessage=function(e){var t=o(e.data,2),r=t[0],n=t[1];u[n]&&(u[n](r),delete u[n])},i.onerror=function(e){console.error(e.message)}},4781:(e,t,r)=>{function n(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];if("string"==typeof e)for(var n=e.length,a=0;a<n;a++){var o=e.charCodeAt(a);(r.indexOf(o)<0||!t)&&r.push(o)}return r}function a(e){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(e)}r.d(t,{B5:()=>n,iO:()=>a})},5428:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw c}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,n,a,o){var c=r+o,i=(r*e+o*n)/c,u=(r*(Math.pow(t,2)+Math.pow(e,2))+o*(Math.pow(a,2)+Math.pow(n,2)))/c-Math.pow(i,2);return Math.sqrt(u)}function c(e,t,r,n,a,c,i,u,s,f,l,d){var h=a+l;return(a*(r*n*c+e*t)+l*(s*f*d+i*u)-h*((a*e+l*i)/h)*((a*t+l*u)/h))/(h*o(e,r,a,i,s,l)*o(t,n,a,u,f,l))}function i(e){var t=Math.hypot(e),r=[];if(t>0){var a,o=1/t,c=n(e);try{for(c.s();!(a=c.n()).done;){var i=a.value;r.push(i*o)}}catch(e){c.e(e)}finally{c.f()}return r}return e}function u(e){var t=e.length;if(0===t)return[0,0];for(var r=1/0,n=-1/0,a=t-1;a>=0;a--){var o=e[a];o>n&&(n=o),o<r&&(r=o)}return[r,n]}r.d(t,{Ck:()=>i,DJ:()=>u,Hi:()=>c,VY:()=>o})},5579:(e,t,r)=>{function n(){var e=new Date,t=e.getDay(),r=e.getDate()-t,n=new Date;return n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function a(e,t,r,n){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(r),a.setMinutes(n),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(e.getFullYear()),a.setMonth(e.getMonth()),a.setDate(e.getDate()),a.setDate(a.getDate()+t),a}function o(e){var t=e.match(/[0-9\.]*/gm);if(t){var r=parseInt(t[0]),n=parseInt(t[2]),a=parseInt(t[4]),o=parseInt(t[6]),c=parseInt(t[8]),i=parseInt(t[10]),u=new Date;return u.setDate(1),u.setMonth(0),u.setFullYear(r),u.setMonth(n-1),u.setDate(a),u.setHours(o),u.setMinutes(c),u.setSeconds(i),u.getTime()}return 0}function c(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,e.getFullYear()).replaceAll(/M{2,2}/g,String(e.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(e.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(e.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(e.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(e.getSeconds()).padStart(2,"0"))}function i(e){var t=e.getTime(),r=Math.floor(((new Date).getTime()-t)/1e3),n=Math.floor(r/31536e3);return n>=1?"".concat(n,"年前"):(n=Math.floor(r/2592e3))>=1?"".concat(n,"個月前"):(n=Math.floor(r/86400))>=1?"".concat(n,"天前"):(n=Math.floor(r/3600))>=1?"".concat(n,"小時前"):(n=Math.floor(r/60))>=1?"".concat(n,"分鐘前"):r>0?"".concat(r,"秒前"):"現在"}function u(e,t){var r=0|e;switch(t){case 0:return"".concat(r,"秒");case 1:return[String((r-r%60)/60),String(r%60)].map((function(e){return e.padStart(2,"0")})).join(":");case 2:return"".concat(r/60|0,"分");case 3:if(r>=3600){var n=parseFloat((r/3600).toFixed(1));return"".concat(n,"時")}if(60<=r&&r<3600)return"".concat(r/60|0,"分");if(r<60)return"".concat(r,"秒");break;default:return"--"}}function s(e){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][e]}function f(e){return s(parseInt(e)-1)}function l(e){return"".concat(String(e.hours).padStart(2,"0"),":").concat(String(e.minutes).padStart(2,"0"))}r.d(t,{$T:()=>c,HN:()=>i,P$:()=>n,S1:()=>a,Zn:()=>o,fU:()=>u,kd:()=>s,mr:()=>f,pn:()=>l})},6141:(e,t,r)=>{function n(e){return getComputedStyle(document.documentElement).getPropertyValue(e)}r.d(t,{t:()=>n})},7307:(e,t,r)=>{r.d(t,{O:()=>a});var n=r(2754);function a(e){return new n._k({issuer:"Bus",label:"Bus",algorithm:"SHA256",digits:8,period:10,secret:e}).generate()}},8141:(e,t,r)=>{function n(e,t,r){var n=r.x-t.x,a=r.y-t.y,o=n*n+a*a,c=((e.x-t.x)*n+(e.y-t.y)*a)/o;if(c<0)n=e.x-t.x,a=e.y-t.y;else if(c>1)n=e.x-r.x,a=e.y-r.y;else{var i={x:t.x+c*n,y:t.y+c*a};n=e.x-i.x,a=e.y-i.y}return Math.sqrt(n*n+a*a)}function a(e,t){if(e.length<3)return e;for(var r=0,o=0,c=1;c<e.length-1;c++){var i=n(e[c],e[0],e[e.length-1]);i>r&&(o=c,r=i)}if(r>t){var u=e.slice(0,o+1),s=e.slice(o),f=a(u,t),l=a(s,t);return f.slice(0,f.length-1).concat(l)}return[e[0],e[e.length-1]]}function o(e,t){if(e.length<1)return"";for(var r="M".concat(e[0].x*t,",").concat(e[0].y*t),n=1;n<e.length-1;n++){var a=e[n],o=e[n+1]||a;r+="Q".concat(a.x*t,",").concat(a.y*t,",").concat((a.x*t+o.x*t)/2,",").concat((a.y*t+o.y*t)/2)}var c=e[e.length-1];return r+="L".concat(c.x*t,",").concat(c.y*t)}r.d(t,{p:()=>o,z:()=>a})},9469:(e,t,r)=>{r.d(t,{_:()=>c,i:()=>i});var n=r(8134),a=r(4690),o=r(3030);function c(){var e=new URL(location.href).searchParams.get("permalink");if(null!==e){var t=String(e);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(t)){var r=t.split(/[\@\~]/);switch(parseInt(r[0])){case 0:(0,n.Rk)(parseInt(r[1],16)).then((function(e){!1!==e?(0,a.SR)(e.id,e.pid):(0,n.k9)(r[2]).then((function(e){e.length>0&&(0,a.SR)(e[0].id,e[0].pid)}))}));break;case 1:(0,o.so)(r[1])}}}}function i(e,t){var r=new URL("https://erichsia7.github.io/bus/");switch(e){case 0:r.searchParams.set("permalink","0@".concat(parseInt(t.id).toString(16),"~").concat(t.name));break;case 1:r.searchParams.set("permalink","1@".concat(t.hash))}return decodeURIComponent(r.toString())}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,a,o)=>{if(!r){var c=1/0;for(f=0;f<e.length;f++){for(var[r,a,o]=e[f],i=!0,u=0;u<r.length;u++)(!1&o||c>=o)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(i=!1,o<c&&(c=o));if(i){e.splice(f--,1);var s=a();void 0!==s&&(t=s)}}return t}o=o||0;for(var f=e.length;f>0&&e[f-1][2]>o;f--)e[f]=e[f-1];e[f]=[r,a,o]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.u=e=>({82:"2b46b0018b863b906aed",132:"7732f27cfd63d88b5ce2",148:"d1ceb04b8f51a02e6b4b",211:"1cb6e86665319b1cb846",332:"8f123608fa91b51f3b52",551:"7072573beb3c5ab62c2a",592:"1cb6e86665319b1cb846",648:"a69d182a732f0010a0d4",701:"2b46b0018b863b906aed",850:"13108726740f815d3f0e",892:"9e521ee9b22c43e13efb",932:"7072573beb3c5ab62c2a",960:"b5e6c7bd5d14ef076f41"}[e]+".js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="./",(()=>{n.b=document.baseURI||self.location.href;var e={677:0,827:0,238:0,325:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[c,i,u]=r,s=0;if(c.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(u)var f=u(n)}for(t&&t(r);s<c.length;s++)o=c[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(f)},r=self.webpackChunkbus=self.webpackChunkbus||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[281,790,754,343,799,821,327,133,806,150,827,794,238,627,704,466,325,927,687],(()=>n(7084)));return a=(a=n.O(a)).default})()));
//# sourceMappingURL=95c7f1c0f8d3f5673841.js.map