"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[6230],{2174(t,e,n){n.d(e,{Sv:()=>z,m_:()=>J});var i=n(467),r=n(5767),a=n(365),u=n(77),o=n(3459),c=n(8179),s=n(8024),l=n(4537),d=n(904),f=n(9119),p=document.querySelector(".fb"),h=(0,c.aI)(p,".gb"),m=(0,c.aI)(h,".hb"),v=(0,c.aI)(m,".ib"),b=(0,c.aI)(p,".jb"),g=(0,c.aI)(b,".kb"),y={},I=!1,A=15e3,_=5e3,S=15e3,k=!0,w=0,x=0,C="",q=!1,j=!1,L=!1;function Z(t){var e=t;if(q){var n=e.detail.progress-1;v.style.setProperty("--nb",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,Z)}function E(){var t=(0,s.zx)(),e=document.createElement("div");e.classList.add("ob"),e.id=t;var n=document.createElement("div");n.classList.add("pb"),e.appendChild(n);var i=document.createElement("div");i.classList.add("qb");var r=document.createElement("div");r.classList.add("rb"),i.appendChild(r);var a=document.createElement("div");a.classList.add("sb"),i.appendChild(a);var u=document.createElement("div");u.classList.add("tb"),i.appendChild(u);var o=document.createElement("div");o.classList.add("ub");var c=document.createElement("span");return c.appendChild((0,l.YC)("close")),o.appendChild(c),i.appendChild(o),e.appendChild(i),{element:e,id:t}}function T(t,e,n){function i(t,i,r){function a(t,e){(0,c.aI)(t,".pb").innerText=e.hours}function u(t,e){var n=(0,c.aI)(t,".qb");(0,c.aI)(n,".rb").innerText=e.minutes}function o(t,e){var n=(0,c.aI)(t,".qb");(0,c.aI)(n,".tb").innerText=e.name}function l(t,e){var n=(0,c.aI)(t,".qb");(0,c.aI)(n,".sb").innerText=`${e.route.name} - 往${e.route.direction}`}function d(t,e){var n=(0,c.aI)(t,".qb");(0,c.aI)(n,".ub").onclick=function(){!function(t,e){P.apply(this,arguments)}(t.id,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,s.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,s.xZ)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,s.xZ)(e))}null==r?(a(t,i),u(t,i),o(t,i),l(t,i),d(t,i),f(t,i),p(t,n),h(t,e)):(i.hours!==r.hours&&a(t,i),i.minutes!==r.minutes&&u(t,i),(0,s.hw)(r.schedule_id,i.schedule_id)||(o(t,i),l(t,i),d(t,i)),r.is_first!==i.is_first&&f(t,i),false!==n&&p(t,n),I!==e&&h(t,e))}var r=t.itemQuantity,a=t.items,u=(0,c.jg)(g,".ob").length;if(r!==u){var o=u-r;if(o<0){for(var l=new DocumentFragment,d=0,f=Math.abs(o);d<f;d++){var p=E();l.appendChild(p.element)}g.append(l)}else for(var h=(0,c.jg)(g,".ob"),m=0,v=Math.abs(o);m<v;m++){h[u-1-m].remove()}}for(var b=(0,c.jg)(g,".ob"),A=0;A<r;A++){var _=b[A],S=a[A];if(y.hasOwnProperty("items"))if(y.items[A])i(_,S,y.items[A]);else i(_,S,null);else i(_,S,null)}y=t,I=e}function $(){return R.apply(this,arguments)}function R(){return(R=(0,i.A)(function*(){var t=(0,o.Js)("playing_animation"),e=(0,o.Js)("refresh_interval");k=e.dynamic,A=e.baseInterval,q=!0,C=(0,s.zx)(),v.setAttribute("refreshing","true"),v.classList.remove("mb"),document.addEventListener(C,Z);var n=yield(0,u.e3)(C);T(n,!1,t);var i=0;k&&(i=yield(0,r.wz)()),w=(new Date).getTime(),x=k?Math.max(w+_,n.dataUpdateTime+A/i):w+A,S=Math.max(_,x-w),q=!1,v.setAttribute("refreshing","false"),v.style.setProperty("--lb",`${S}ms`),v.classList.add("mb")})).apply(this,arguments)}function M(){return D.apply(this,arguments)}function D(){return(D=(0,i.A)(function*(){$().then(function(){j?setTimeout(function(){M()},Math.max(_,x-(new Date).getTime())):L=!1}).catch(function(t){j?setTimeout(function(){M()},1e4):L=!1})})).apply(this,arguments)}function z(){(0,d.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var t=(0,o.Js)("playing_animation"),e=(0,d.gO)("window"),n=(e.width,e.height),i=Math.floor(n/50)+5,r=[],a=0;a<i;a++)r.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});T({items:r,itemQuantity:i,dataUpdateTime:0},!0,t)}(),j||(j=!0,L?$():(L=!0,M())),(0,d.Z_)()}function J(){p.setAttribute("displayed","false"),j=!1,(0,d.l$)()}function P(){return(P=(0,i.A)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,a.G)(e)){if((0,c.aI)(g,`.ob#${t}`).remove(),(0,f.a)("check_circle","已取消通知"),!q){var n=(0,o.Js)("playing_animation");T(yield(0,u.e3)(C),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},5693(t,e,n){n.d(e,{Dn:()=>k,Xy:()=>S,bF:()=>_,gv:()=>y});var i=n(3453),r=n(467),a=n(5352),u=n(8179),o=n(5579),c=n(904),s=document.querySelector(".vb"),l=(0,u.aI)(s,".wb"),d=(0,u.aI)(s,".xb"),f=(0,u.aI)(d,".yb"),p=(0,u.aI)(l,".zb"),h=(0,u.aI)(p,'._b[group="schedule-name"] .ac input'),m=(0,u.aI)(p,'._b[group="schedule-start-time"] .ac input'),v=(0,u.aI)(p,'._b[group="schedule-end-time"] .ac input'),b=(0,u.aI)(p,'._b[group="schedule-days"] .ac'),g=(0,u.jg)(b,".bc");function y(t){return I.apply(this,arguments)}function I(){return(I=(0,r.A)(function*(t){for(var e=h.value,n=m.value,r=v.value,u=String(n).split(":").map(function(t){return parseInt(t)}),o=(0,i.A)(u,2),c=o[0],s=o[1],l=String(r).split(":").map(function(t){return parseInt(t)}),d=(0,i.A)(l,2),f=d[0],p=d[1],b=[],y=0;y<7;y++){var I=g[y],A=I.getAttribute("highlighted"),_=parseInt(I.getAttribute("day"));"true"===A&&b.push(_)}var k=yield(0,a.qZ)(t);k.name=e,k.days=b,k.period.start.hours=c,k.period.start.minutes=s,k.period.end.hours=f,k.period.end.minutes=p,yield(0,a.nL)(k),S()})).apply(this,arguments)}function A(){return(A=(0,r.A)(function*(t){var e=yield(0,a.qZ)(t);h.value=e.name,m.value=(0,o.pn)(e.period.start),v.value=(0,o.pn)(e.period.end);for(var n=0;n<7;n++){var i=g[n];e.days.indexOf(n)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}f.onclick=function(){y(t)}})).apply(this,arguments)}function _(t){(0,c.WR)("PersonalScheduleEditor"),s.setAttribute("displayed","true"),function(t){A.apply(this,arguments)}(t),(0,c.Z_)()}function S(){s.setAttribute("displayed","false"),(0,c.l$)()}function k(t){var e=(0,u.aI)(b,`.bc[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6443(t,e,n){n.d(e,{GS:()=>L,GZ:()=>Z,VY:()=>q,b7:()=>C,kP:()=>A,zk:()=>_});var i=n(467),r=n(9566),a=n(8621),u=n(3459),o=n(8179),c=n(8024),s=n(904),l=n(3041),d=n(8332),f=n(9009),p=n(2530);function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw a}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var v=document.querySelector(".cc"),b=(0,o.aI)(v,".dc"),g=(0,o.aI)(b,".ec"),y=(0,o.aI)(g,'.fc[group="calendar"]'),I=(0,o.aI)(y,".gc"),A=(0,o.aI)(I,".hc"),_=(0,o.aI)(I,".ic"),S=(0,o.aI)(v,'.dc .ec .fc[group="actions"]'),k=(0,o.aI)(S,'.gc .jc[action="save-to-folder"]'),w=(0,o.aI)(S,'.gc .jc[action="get-permalink"]'),x=(0,o.aI)(S,'.gc .jc[action="show-permalink-qrcode"]'),C=(0,o.aI)(g,'.fc[group="properties"]'),q=(0,o.aI)(C,".gc");function j(){return(j=(0,i.A)(function*(t,e){var n=(0,u.Js)("playing_animation"),i=yield(0,r.LH)("route",t);k.setAttribute("animation",(0,c.xZ)(n)),k.setAttribute("highlighted",(0,c.xZ)(i)),k.onclick=function(){(0,l.B)("route",[t])},w.setAttribute("animation",(0,c.xZ)(n)),w.onclick=function(){(0,d.w)(t)},x.setAttribute("animation",(0,c.xZ)(n)),x.onclick=function(){(0,d.e)(t)},(0,p.h)(C),(0,f.OS)();var o=(0,c.zx)(),s=yield(0,a.p)(t,e,o);(0,p.D)(s.properties,!1,n),(0,f.fB)(s.calendar,!1,n)})).apply(this,arguments)}function L(t,e){(0,s.WR)("RouteDetails"),v.setAttribute("displayed","true"),function(t,e){j.apply(this,arguments)}(t,e)}function Z(){(0,s.kr)("RouteDetails"),v.setAttribute("displayed","false");var t,e=h((0,o.jg)(_,".ga"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,i=h((0,o.jg)(A,".fa"));try{for(i.s();!(n=i.n()).done;){n.value.remove()}}catch(t){i.e(t)}finally{i.f()}}},7908(t,e,n){n.d(e,{NW:()=>b,XG:()=>m,hy:()=>v});var i=n(467),r=n(3937),a=n(77),u=n(8179),o=n(8024),c=n(904),s=n(9119),l=document.querySelector(".kc"),d=(0,u.aI)(l,".lc"),f=(0,u.aI)(d,".mc"),p=(0,u.aI)(f,'.nc[group="provider"] .oc input'),h=(0,u.aI)(f,'.nc[group="registration-key"] .oc input');function m(){(0,c.WR)("RegisterNotification"),l.setAttribute("displayed","true"),p.value=(0,a.D7)(),h.value="",(0,c.Z_)()}function v(){l.setAttribute("displayed","false"),(0,c.l$)()}function b(){return g.apply(this,arguments)}function g(){return(g=(0,i.A)(function*(){(0,s.a)("manufacturing","處理中");var t=p.value,e=h.value;if((0,o.Gz)(t))return(0,a.Je)(t),(yield(0,r.e)(e))?void(0,s.a)("check_circle","註冊成功"):void(0,s.a)("error","註冊失敗");(0,s.a)("error","無效的提供者")})).apply(this,arguments)}},8279(t,e,n){n.d(e,{Vc:()=>s,X8:()=>c});var i=n(8179),r=n(2648),a=n(904),u=document.querySelector(".pc"),o=(0,i.aI)(u,".qc");function c(t){(0,a.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,r.$)(t,"M",.5,.3,1,"var(--j)",4);o.innerHTML=e}(t)}function s(){(0,a.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>g,I1:()=>b,Ps:()=>v,om:()=>y});var i=n(3453),r=n(5352),a=n(8179),u=n(904),o=n(9119),c=document.querySelector(".rc"),s=(0,a.aI)(c,".sc"),l=(0,a.aI)(s,".tc"),d=(0,a.aI)(l,'.uc[group="schedule-name"] .vc input'),f=(0,a.aI)(l,'.uc[group="schedule-start-time"] .vc input'),p=(0,a.aI)(l,'.uc[group="schedule-end-time"] .vc input'),h=(0,a.aI)(l,'.uc[group="schedule-days"] .vc'),m=(0,a.jg)(h,".wc");function v(){for(var t=d.value,e=f.value,n=p.value,a=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,i.A)(a,2),c=u[0],s=u[1],l=String(n).split(":").map(function(t){return parseInt(t)}),h=(0,i.A)(l,2),v=h[0],b=h[1],y=[],I=0;I<7;I++){var A=m[I],_=A.getAttribute("highlighted"),S=parseInt(A.getAttribute("day"));"true"===_&&y.push(S)}(0,r.Qh)(t,c,s,v,b,y).then(function(t){t?(g(),(0,o.a)("calendar_view_day","已建立個人化行程")):(0,o.a)("error","無法建立個人化行程")})}function b(){(0,u.WR)("PersonalScheduleCreator"),c.setAttribute("displayed","true"),(0,u.Z_)()}function g(){c.setAttribute("displayed","false"),(0,u.l$)()}function y(t){var e=(0,a.aI)(h,`.wc[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}}}]);
//# sourceMappingURL=6230.edf0fdc07712689516da.js.map