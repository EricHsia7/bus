"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[204],{904(e,t,a){a.d(t,{AE:()=>k,BM:()=>I,WR:()=>g,Z_:()=>A,f1:()=>L,gO:()=>C,kr:()=>y,l$:()=>w,p9:()=>x});var n=a(8024),i=a(8179),r=a(4927),s=a(6052),d=a(9333),o=a(8379),c=a(5693),l=a(7891),u=a(7908),p=a(5009),v=a(6104),h=(0,i.bv)(".f"),f=(0,i.bv)(".g"),b=(new Date).getTime(),m=["Home"];function g(e){var t=m.length;m[t-1]!==e&&m.push(e)}function y(e){if(m.indexOf(e)>-1){var t=m.length;m[t-1]===e&&m.pop()}}function A(){var e=m.length;if(e>1)switch(m[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.z1)();break;case"FolderEditor":(0,d.I6)();break;case"FolderManager":(0,o.m)();break;case"Search":(0,p.Bb)();break;case"Settings":(0,v.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.FN)();break;case"RegisterNotification":(0,u.hy)()}}function w(){var e=m.length;if(e>1){var t=m[e-2];switch(m.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.pd)();break;case"FolderEditor":(0,d.uy)();break;case"FolderManager":(0,o.g)();break;case"Search":(0,p.rf)();break;case"Settings":(0,v.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$l)();break;case"RegisterNotification":(0,u.XG)()}}}function I(){var e=0;(0,n.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,i.bv)(".f svg.h").style.setProperty("--i",`${e}px`)}function k(e){function t(){h.classList.add("j"),h.addEventListener("animationend",function(){h.setAttribute("displayed","false"),h.classList.remove("j"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-b<100?setTimeout(t,Math.max(1,a-b)):t()}function L(){f.setAttribute("displayed","true")}function C(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function x(){window.scrollTo({top:0,behavior:"instant"})}},1351(e,t,a){a.d(t,{ID:()=>L,co:()=>C,k9:()=>x,qp:()=>_});var n=a(467),i=a(8011),r=a(6788),s=a(6983),d=a(3459),o=a(8179),c=a(8024),l=a(9469),u=a(4537),p=a(904),v=a(9119),h=a(8279),f={},b=!1,m=!1,g=(0,o.bv)(".k"),y=(0,o.aI)(g,".l"),A=(0,o.aI)(y,".m");function w(){var e=document.createElement("div");e.classList.add("n");var t=document.createElement("div");t.classList.add("o"),t.appendChild((0,u.oC)()),e.appendChild(t);var a=document.createElement("div");return a.classList.add("p"),e.appendChild(a),{element:e,id:""}}function I(e,t,a){function n(e,n,i){function r(e,t){var a=(0,o.aI)(e,".o");(0,u.yD)(a,t.icon)}function s(e,t){(0,o.aI)(e,".p").innerText=t.name}function d(e,t){e.onclick=t.action}function l(e,t){e.setAttribute("animation",(0,c.xZ)(t))}function p(e,t){e.setAttribute("skeleton-screen",(0,c.xZ)(t))}null==i?(r(e,n),s(e,n),d(e,n),l(e,a),p(e,t)):(i.key!==n.key&&(r(e,n),s(e,n),d(e,n)),a!==b&&l(e,a),t!==m&&p(e,t))}var i=e.actions,r=e.actionsQuantity,s=(0,o.jg)(A,".n").length;if(r!==s){var d=s-r;if(d<0){for(var l=new DocumentFragment,p=0,v=Math.abs(d);p<v;p++){var h=w();l.appendChild(h.element)}A.append(l)}else for(var g=(0,o.jg)(A,".n"),y=0,I=Math.abs(d);y<I;y++){g[s-1-y].remove()}}for(var k=(0,o.jg)(A,".n"),L=0;L<r;L++){var C=k[L],x=i[L];if(f.hasOwnProperty("actions"))if(f.actions[L])n(C,x,f.actions[L]);else n(C,x,null);else n(C,x,null)}f=e,b=a,m=t}function k(){return(k=(0,n.A)(function*(e){var t=(0,d.Js)("playing_animation"),a=(0,c.zx)();I(yield(0,s.v)(e,a),!1,t)})).apply(this,arguments)}function L(e){(0,p.WR)("LocationDetails"),g.setAttribute("displayed","true"),function(){for(var e=(0,d.Js)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});I({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){k.apply(this,arguments)}(e)}function C(){(0,p.kr)("LocationDetails"),g.setAttribute("displayed","false")}function x(e){return E.apply(this,arguments)}function E(){return(E=(0,n.A)(function*(e){var t=(0,c.zx)(),a=yield(0,i.g)(t,1);(0,r.LQ)(t),(0,r.gC)(t);var n=`ml_${e}`;if(a.hasOwnProperty(n)){var s=a[n],d=(0,l.i)(1,{hash:e});navigator.share&&navigator.share({title:s.n,url:d}).then(function(){(0,v.a)("已分享地點","check_circle")}).catch(function(e){(0,v.a)("已取消分享","cancel")})}})).apply(this,arguments)}function _(e){return S.apply(this,arguments)}function S(){return(S=(0,n.A)(function*(e){var t=(0,c.zx)(),a=yield(0,i.g)(t,1);(0,r.LQ)(t),(0,r.gC)(t);var n=`ml_${e}`;if(a.hasOwnProperty(n)){var s=(0,l.i)(1,{hash:e});(0,h.X8)(s)}})).apply(this,arguments)}},3030(e,t,a){a.d(t,{eS:()=>ue,s_:()=>V,so:()=>le});var n=a(467),i=a(5767),r=a(9566),s=a(2757),d=a(77),o=a(5314),c=a(3459),l=a(8179),u=a(7968),p=a(8024),v=a(5579),h=a(4537),f=a(904),b=a(9119),m=a(3041),g=a(752),y=a(1351);function A(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return w(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,d=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){d=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(d)throw r}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var I=(0,l.bv)(".q"),k=(0,l.aI)(I,".r"),L=(0,l.aI)(k,".s"),C=(0,l.aI)(L,"span"),x=(0,l.aI)(k,".t"),E=(0,l.aI)(I,".u"),_=(0,l.aI)(k,".v"),S=(0,l.aI)(_,".w"),T=(0,l.aI)(k,".x"),$=(0,l.aI)(T,".y"),M=(0,l.aI)(k,".z ._"),j={},P=!1,D=!1,Z=0,R=0,N=0,O={},F=0,z=!1,H=15e3,Q=5e3,B=15e3,q=!0,W=0,J=0,U="",Y=!1,X=!1,G=!1,K="";function V(){E.addEventListener("touchstart",function(){Z=Math.round(E.scrollLeft/F)},{passive:!0}),E.addEventListener("scroll",function(e){z=!0;var t=e.target.scrollLeft/F;R=t>Z?Z+1:Z-1;var a=t-Z,n=Math.abs(a);n>1&&(a>0?(Z=Math.floor(t),R=Z+1):(Z=Math.ceil(t),R=Z-1),n=Math.abs(t-Z));var i=O[`g_${Z}`]||{width:0,offset:0},r=O[`g_${R}`]||{width:0,offset:0},s=i.width+(r.width-i.width)*n,d=-1*(i.offset+(r.offset-i.offset)*n)+.5*F-.5*s;ee(N,d,s-20,t),t===R&&(Z=Math.round(E.scrollLeft/F),z=!1)},{passive:!0})}function ee(e,t,a,n){E.style.setProperty("--aa",e.toString()),$.style.setProperty("--ba",a.toString()),S.style.setProperty("--ca",`${t.toString()}px`),S.style.setProperty("--da",n.toString())}function te(e){var t=e;if(Y){var a=t.detail.progress-1;M.style.setProperty("--ga",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,te)}function ae(){var e=(0,p.zx)(),t=document.createElement("div");t.classList.add("ha"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var a=document.createElement("div");a.classList.add("ia");var n=document.createElement("div");n.classList.add("ja");var i=document.createElement("div");i.classList.add("ka"),i.setAttribute("code","-1"),i.setAttribute("displayed","false");var r=document.createElement("div");r.classList.add("la"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),n.appendChild(i),n.appendChild(r);var s=document.createElement("div");s.classList.add("ma");var d=document.createElement("div");d.classList.add("na");var o=document.createElement("div");o.classList.add("oa");var c=document.createElement("div");c.classList.add("pa");var u=document.createElement("div");u.classList.add("qa"),u.setAttribute("code","0"),u.setAttribute("displayed","false");var v=document.createElement("div");v.classList.add("ra"),v.setAttribute("code","0"),v.setAttribute("displayed","true"),c.appendChild(u),c.appendChild(v);var f=document.createElement("div");f.classList.add("sa"),f.appendChild((0,h.YC)("keyboard_arrow_down")),f.onclick=function(){!function(e){var t=(0,l.aI)(E,`._a .cb .ha#${e}`),a=(0,l.aI)(t,".ua"),n=t.parentElement,i=(0,l.ji)(t,"ha"),r=i.length,s=n.getBoundingClientRect(),d=t.getBoundingClientRect(),o=d.top-s.top,c="true"===t.getAttribute("stretched"),u="true"===t.getAttribute("animation");if(u){var p=c?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--bc",`${o}px`);for(var v=0;v<r;v++){var h=i[v];h.setAttribute("push-direction",p),h.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var e=0;e<r;e++){var a=i[e];a.setAttribute("push-direction","0"),a.setAttribute("push-state","0")}t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var e=0;e<r;e++){i[e].setAttribute("push-state","2")}},{once:!0})}c?(u?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}(e)};var b=document.createElement("div");b.classList.add("ta"),o.appendChild(c),o.appendChild(f),o.appendChild(b),a.appendChild(n),a.appendChild(s),a.appendChild(d),a.appendChild(o);var m=document.createElement("div");m.classList.add("ua"),m.setAttribute("displayed","false");var g=document.createElement("div");g.classList.add("va");var y=document.createElement("div");y.classList.add("wa"),y.setAttribute("highlighted","true"),y.setAttribute("type","tab"),y.setAttribute("code","0");var A=document.createElement("div");A.classList.add("xa"),A.appendChild((0,h.YC)("directions_bus")),y.appendChild(A),y.appendChild(document.createTextNode("公車")),y.onclick=function(){pe(e,0)};var w=document.createElement("div");w.classList.add("wa"),w.setAttribute("highlighted","false"),w.setAttribute("type","tab"),w.setAttribute("code","1");var I=document.createElement("div");I.classList.add("xa"),I.appendChild((0,h.YC)("departure_board")),w.appendChild(I),w.appendChild(document.createTextNode("抵達時間")),w.onclick=function(){pe(e,1)};var k=document.createElement("div");k.classList.add("wa"),k.setAttribute("highlighted","false"),k.setAttribute("type","save-to-folder");var L=document.createElement("div");L.classList.add("xa"),L.appendChild((0,h.YC)("folder")),k.appendChild(L),k.appendChild(document.createTextNode("儲存"));var C=document.createElement("div");C.classList.add("wa"),C.setAttribute("highlighted","false"),C.setAttribute("type","schedule-notification"),C.setAttribute("enabled","true");var x=document.createElement("div");x.classList.add("xa"),x.appendChild((0,h.YC)("notifications")),C.appendChild(x),C.appendChild(document.createTextNode("通知")),g.appendChild(y),g.appendChild(w),g.appendChild(k),g.appendChild(C);var _=document.createElement("div");_.classList.add("ya"),_.setAttribute("displayed","true");var S=document.createElement("div");return S.classList.add("za"),S.setAttribute("displayed","false"),m.appendChild(g),m.appendChild(_),m.appendChild(S),t.appendChild(a),t.appendChild(m),{element:t,id:e}}function ne(){var e=document.createElement("div");e.classList.add("_a");var t=document.createElement("div");t.classList.add("ab");var a=document.createElement("div");a.classList.add("bb"),t.appendChild(a);var n=document.createElement("div");return n.classList.add("cb"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function ie(){var e=document.createElement("div");e.classList.add("db");var t=document.createElement("span");return e.appendChild(t),{element:e,id:""}}function re(){var e=document.createElement("div");e.classList.add("eb");var t=document.createElement("div");t.classList.add("fb"),t.appendChild((0,h.oC)());var a=document.createElement("div");return a.classList.add("gb"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function se(e,t,a){var n;function i(e,n,i){function s(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,d=n.right,o=window.innerWidth,c=window.innerHeight,u=(0,l.aI)(e,".ia"),p=(0,l.aI)(u,".pa"),v=(0,l.aI)(p,".qa"),h=(0,l.aI)(p,".ra");v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,a&&s>0&&i<c&&d>0&&r<o?(h.addEventListener("animationend",function(){h.setAttribute("code",t.status.code.toString()),h.innerText=t.status.text,h.classList.remove("hb"),v.setAttribute("displayed","false")},{once:!0}),v.setAttribute("displayed","true"),h.classList.add("hb")):(h.setAttribute("code",t.status.code.toString()),h.innerText=t.status.text)}function o(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,d=n.right,o=window.innerWidth,c=window.innerHeight,u=(0,l.aI)(e,".ia"),p=(0,l.aI)(u,".ja"),v=(0,l.aI)(p,".ka"),h=(0,l.aI)(p,".la");v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,a&&s>0&&i<c&&d>0&&r<o?(h.addEventListener("animationend",function(){h.setAttribute("code",t.ranking.code.toString()),h.innerText=t.ranking.text,h.classList.remove("ib"),v.setAttribute("displayed","false")},{once:!0}),v.setAttribute("displayed","true"),h.classList.add("ib")):(h.setAttribute("code",t.ranking.code.toString()),h.innerText=t.ranking.text)}function c(e,t){var a=(0,l.aI)(e,".ia");(0,l.aI)(a,".ma").innerText=t.route_direction}function u(e,t){var a=(0,l.aI)(e,".ia");(0,l.aI)(a,".na").innerText=t.route_name}function f(e,t){var a=(0,l.aI)(e,".ua");(0,l.aI)(a,".ya").innerHTML=0===t.buses.length?'<div class="jb">目前沒有公車可顯示</div>':t.buses.map(function(e){return`<div class="kb" on-this-route="${e.onThisRoute}"><div class="lb"><div class="mb">${(0,h.Zf)("directions_bus")}</div><div class="nb">${e.carNumber}</div></div><div class="ob"><div class="pb">路線：${e.RouteName}</div><div class="qb">狀態：${e.status.text}</div><div class="rb">類型：${e.type}</div></div></div>`}).join("")}function b(e,t){var a=(0,l.aI)(e,".ua");(0,l.aI)(a,".za").innerHTML=0===t.busArrivalTimes.length?'<div class="sb">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map(function(e){return`<div class="tb"><div class="ub"><div class="vb">${(0,h.Zf)("calendar_view_day")}</div><div class="wb">${e.personalSchedule.name}</div><div class="xb">週${(0,v.kd)(e.day).name} ${(0,v.pn)(e.personalSchedule.period.start)} - ${(0,v.pn)(e.personalSchedule.period.end)}</div></div><div class="yb">${e.chart}</div></div>`}).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function A(e,t){e.setAttribute("animation",(0,p.xZ)(t))}function w(e,t){e.setAttribute("skeleton-screen",(0,p.xZ)(t))}function I(e,t){var a=(0,l.aI)(e,".ua"),n=(0,l.aI)(a,".va"),i=(0,l.aI)(n,'.wa[type="save-to-folder"]');i.onclick=function(){(0,m.B)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,r.LH)("stop",t.stopId).then(function(e){i.setAttribute("highlighted",(0,p.xZ)(e))})}function k(e,t){var a=(0,l.aI)(e,".ua"),n=(0,l.aI)(a,".va"),i=(0,l.aI)(n,'.wa[type="schedule-notification"]');i.onclick=function(){(0,g.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var r=(0,d.Zc)(t.stopId);i.setAttribute("highlighted",(0,p.xZ)(r))}null==i?(s(e,n,a),o(e,n,a),c(e,n),u(e,n),f(e,n),b(e,n),y(e,t),A(e,a),w(e,t),I(e,n),k(e,n)):(n.status.time!==i.status.time&&(s(e,n,a),k(e,n)),i.ranking.number===n.ranking.number&&i.ranking.code===n.ranking.code||o(e,n,a),i.stopId!==n.stopId&&(c(e,n),u(e,n),I(e,n)),(0,p.hw)(i.buses,n.buses)||f(e,n),(0,p.hw)(i.busArrivalTimes,n.busArrivalTimes)||b(e,n),a!==P&&A(e,a),t!==D&&(y(e,t),w(e,t)))}function s(e,n,i){function r(e,t){var a=(0,l.aI)(e,".fb");(0,h.yD)(a,t.icon)}function s(e,t){(0,l.aI)(e,".gb").innerHTML=t.value}function d(e,t){e.setAttribute("animation",(0,p.xZ)(t))}function o(e,t){e.setAttribute("skeleton-screen",(0,p.xZ)(t))}null==i?(r(e,n),s(e,n),d(e,a),o(e,t)):((0,p.hw)(i.icon,n.icon)||r(e,n),(0,p.hw)(i.value,n.value)||s(e,n),a!==P&&d(e,a),t!==D&&o(e,t))}var o=(0,f.gO)("window"),c=o.width,b=o.height,A=e.groupQuantity,w=e.itemQuantity,I=e.groupedItems,k=e.groups;N=A,F=c;for(var $=0,M=0;M<A;M++){var R=`g_${M}`,H=(0,u.q_)(k[R].name,500,"17px",'"Noto Sans TC", sans-serif')+20;O[R]={width:H,offset:$},$+=H}if(O[`g_${A}`]={width:0,offset:$},!z){var Q=O[`g_${Z}`],B=-1*Q.offset+.5*F-.5*Q.width,q=Q.width-20;ee(N,B,q,Z)}(null===(n=j)||void 0===n?void 0:n.hash)!==e.hash&&(C.innerText=e.LocationName,x.onclick=function(){(0,y.ID)(e.hash)}),P!==a&&(L.setAttribute("animation",(0,p.xZ)(a)),_.setAttribute("animation",(0,p.xZ)(a))),D!==t&&(L.setAttribute("skeleton-screen",(0,p.xZ)(t)),_.setAttribute("skeleton-screen",(0,p.xZ)(t)),T.setAttribute("skeleton-screen",(0,p.xZ)(t)));var W=(0,l.jg)(E,"._a").length;if(A!==W){var J=W-A;if(J<0){for(var U=new DocumentFragment,Y=new DocumentFragment,X=0,G=Math.abs(J);X<G;X++){var K=ne();U.appendChild(K.element);var V=ie();Y.appendChild(V.element)}E.append(U),S.append(Y)}else for(var te=(0,l.jg)(E,"._a"),se=(0,l.jg)(S,".db"),de=0,oe=Math.abs(J);de<oe;de++){var ce=W-1-de;te[ce].remove(),se[ce].remove()}}for(var le=(0,l.jg)(E,"._a"),ue=0;ue<A;ue++){var pe=`g_${ue}`,ve=le[ue],he=(0,l.jg)(ve,".cb .ha").length;if(w[pe]!==he){var fe=he-w[pe];if(fe<0)for(var be=(0,l.aI)(ve,".cb"),me=0,ge=Math.abs(fe);me<ge;me++){var ye=ae();be.appendChild(ye.element)}else for(var Ae=(0,l.jg)(ve,".cb .ha"),we=0,Ie=Math.abs(fe);we<Ie;we++){Ae[he-1-we].remove()}}var ke=(0,l.jg)((0,l.jg)(E,"._a")[ue],".ab .bb .eb").length,Le=k[pe].properties.length;if(Le!==ke){var Ce=ke-Le;if(Ce<0)for(var xe=(0,l.aI)(ve,".ab"),Ee=(0,l.aI)(xe,".bb"),_e=0,Se=Math.abs(Ce);_e<Se;_e++){var Te=re();Ee.appendChild(Te.element)}else for(var $e=(0,l.aI)(ve,".ab"),Me=(0,l.aI)($e,".bb"),je=(0,l.jg)(Me,".eb"),Pe=0,De=Math.abs(Ce);Pe<De;Pe++){je[ke-1-Pe].remove()}}}for(var Ze=(0,l.jg)(S,".db"),Re=(0,l.jg)(E,"._a"),Ne=0;Ne<A;Ne++){var Oe=`g_${Ne}`,Fe=Ze[Ne];(0,l.aI)(Fe,"span").innerText=k[Oe].name,Fe.style.setProperty("--zb",`${O[Oe].width}px`),Fe.style.setProperty("--_b",Ne.toString());for(var ze=Re[Ne],He=(0,l.jg)(ze,".ab .bb .eb"),Qe=(0,l.jg)(ze,".cb .ha"),Be=k[Oe].properties.length,qe=0;qe<Be;qe++){var We=k[Oe].properties[qe],Je=He[qe];if(j.hasOwnProperty("groups"))if(j.groups.hasOwnProperty(Oe))if(j.groups[Oe].properties[qe])s(Je,We,j.groups[Oe].properties[qe]);else s(Je,We,null);else s(Je,We,null);else s(Je,We,null)}for(var Ue=0;Ue<w[Oe];Ue++){var Ye=Qe[Ue],Xe=I[Oe][Ue];if(j.hasOwnProperty("groupedItems"))if(j.groupedItems.hasOwnProperty(Oe))if(j.groupedItems[Oe][Ue])i(Ye,Xe,j.groupedItems[Oe][Ue]);else i(Ye,Xe,null);else i(Ye,Xe,null);else i(Ye,Xe,null)}}j=e,P=a,D=t}function de(){return oe.apply(this,arguments)}function oe(){return(oe=(0,n.A)(function*(){var e=(0,c.Js)("playing_animation"),t=(0,c.Js)("refresh_interval"),a=(0,f.gO)("location-bus-arrival-time-chart");q=t.dynamic,H=t.baseInterval,Y=!0,U=(0,p.zx)(),M.setAttribute("refreshing","true"),M.classList.remove("fa"),document.addEventListener(U,te);var n=yield(0,s.R)(K,a.width,a.height,U);se(n,!1,e);var r=0;q&&(r=yield(0,i.wz)()),W=(new Date).getTime(),J=q?Math.max(W+Q,n.dataUpdateTime+H/r):W+H,B=Math.max(Q,J-W),Y=!1,M.setAttribute("refreshing","false"),M.style.setProperty("--ea",`${B}ms`),M.classList.add("fa")})).apply(this,arguments)}function ce(){de().then(function(){X?setTimeout(function(){ce()},Math.max(Q,J-(new Date).getTime())):G=!1}).catch(function(e){X?((0,b.a)("地點網路連線中斷，將在10秒後重試。","error"),setTimeout(function(){ce()},1e4)):G=!1})}function le(e){(0,f.WR)("Location"),(0,o.XK)("location",e),K=e,Z=0,O={},I.setAttribute("displayed","true"),E.scrollLeft=0,E.focus(),function(){for(var e=(0,c.Js)("playing_animation"),t=(0,f.gO)("window"),a=(t.width,t.height),n={g_0:Math.floor(a/50)+5,g_1:Math.floor(a/50)+5},i={},r=0;r<2;r++){var s=`g_${r}`;i[s]=[];for(var d=0;d<n[s];d++)i[s].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}se({groupedItems:i,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:n,LocationName:"載入中",hash:"loading",dataUpdateTime:0},!0,e)}(),X||(X=!0,G?de():(G=!0,ce())),(0,f.Z_)()}function ue(){I.setAttribute("displayed","false"),X=!1,(0,f.l$)()}function pe(e,t){var a,n=(0,l.aI)(E,`._a .cb .ha#${e}`),i=(0,l.aI)(n,".ua"),r=(0,l.aI)(i,".va"),s=A((0,l.jg)(r,'.wa[highlighted="true"][type="tab"]'));try{for(s.s();!(a=s.n()).done;){a.value.setAttribute("highlighted","false")}}catch(e){s.e(e)}finally{s.f()}switch((0,l.aI)(r,`.wa[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,l.aI)(n,".ya").setAttribute("displayed","true"),(0,l.aI)(n,".za").setAttribute("displayed","false");break;case 1:(0,l.aI)(n,".ya").setAttribute("displayed","false"),(0,l.aI)(n,".za").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=5f579fedaec06d4b1db4.js.map