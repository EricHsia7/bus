"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[335],{4356(e,t,n){n.d(t,{default:()=>B});var r=n(6483),o=n(8925),a=n(5767),i=n(9566),c=n(77),d=n(5314),l=n(3459),u=n(3251),s=n(1238),f=n(1531),p=n(4927),v=n(9499),h=n(6052),m=n(9333),y=n(6189),g=n(8379),b=n(540),w=n(6082),C=n(6091),S=n(904),I=n(1351),E=n(3030),k=n(2174),L=n(8380),A=n(5693),_=n(7891),F=n(8279),x=n(7908),M=n(4261),P=n(4690),T=n(3041),N=n(752),R=n(5009),z=n(6104),$=n(6166),Y=n(2994),D=n(9469),j=n(8179),O=!1,H=!1;window.bus={initialize:function(){!1===O&&(O=!0,(0,S.BM)(),(0,l.Yq)().then(function(){(0,C.Q)(),(0,b.F)(),(0,u.A)().then(function(e){if("ok"===e){(0,P.S5)(),(0,E.s_)(),(0,R.ld)(),window.addEventListener("resize",function(){(0,R.ld)()}),screen&&screen.orientation&&screen.orientation.addEventListener("change",function(){(0,R.ld)()}),(0,C.u)(),(0,i.Rh)().then(function(){(0,b.a)()});var t=window.matchMedia("(prefers-color-scheme: dark)"),n=(0,j.bv)(".yf .zf ._f #search_input");t.addEventListener("change",function(){(0,R.gn)(n.selectionStart,n.selectionEnd)}),n.addEventListener("paste",function(){(0,R.RC)(),(0,R.gn)(n.selectionStart,n.selectionEnd)}),n.addEventListener("cut",function(){(0,R.RC)(),(0,R.gn)(n.selectionStart,n.selectionEnd)}),n.addEventListener("selectionchange",function(){(0,R.RC)(),(0,R.gn)(n.selectionStart,n.selectionEnd)}),document.addEventListener("selectionchange",function(){(0,R.RC)(),(0,R.gn)(n.selectionStart,n.selectionEnd)}),n.addEventListener("keyup",function(){(0,R.RC)(),(0,R.gn)(n.selectionStart,n.selectionEnd)});var r=(0,j.bv)(".ff .hf .if #search_material_symbols_input");r.addEventListener("paste",function(){(0,y.Pk)(r.value)}),r.addEventListener("cut",function(){(0,y.Pk)(r.value)}),r.addEventListener("selectionchange",function(){(0,y.Pk)(r.value)}),document.addEventListener("selectionchange",function(){(0,y.Pk)(r.value)}),r.addEventListener("keyup",function(){(0,y.Pk)(r.value)}),(0,D._)(),(0,S.AE)(function(){(0,c.Db)(),(0,c.cS)().then(function(){(0,c.z9)()}),document.addEventListener("click",function(){(0,f.to)(),(0,s.q)()},{once:!0})})}"fetchError"!==e&&"unknownError"!==e||((0,S.f1)(),(0,S.AE)())}).catch(function(){(0,S.f1)(),(0,S.AE)()})}))},secondlyInitialize:function(){H||(H=!0,(0,w.X)(),(0,a.fV)(),(0,o.Ir)(),(0,r.$t)(),(0,d.FU)(),(0,a.fV)().then(function(){(0,a.MN)().then(function(){(0,a.cy)()})}))},route:{closeRoute:P.U7,switchRoute:P.Ch,closeRouteDetails:M.GZ},location:{openLocation:E.so,closeLocation:E.eS,closeLocationDetails:I.co},folder:{openSaveToFolder:T.B,closeSaveToFolder:T.n,closeFolderManager:g.m,closeFolderEditor:m.I6,openFolderIconSelector:y.r7,closeFolderIconSelector:y.jW,openFolderCreator:h.pd,closeFolderCreator:h.z1,createFormulatedFolder:h.c6,saveEditedFolder:m.Bo},search:{openSearch:R.rf,closeSearch:R.Bb,switchSearchTypeFilter:R.H2},storage:{closeStorage:Y.Q},dataUsage:{closeDataUsage:v.i},personalSchedule:{closePersonalScheduleManager:_.Z,openPersonalScheduleCreator:L.I1,closePersonalScheduleCreator:L.GJ,createFormulatedPersonalSchedule:L.Ps,switchPersonalScheduleCreatorDay:L.om,openPersonalScheduleEditor:A.bF,closePersonalScheduleEditor:A.Xy,switchPersonalScheduleEditorDay:A.Dn,saveEditedPersonalSchedule:A.gv},settings:{openSettings:z.Ow,closeSettings:z.os,openSettingsOptions:$.yH,closeSettingsOptions:$.wx,settingsOptionsHandler:$.Yi,downloadExportFile:z.vv,openFileToImportData:z.rY,viewCommitOfCurrentVersion:z.hP,showPromptToAskForPersistentStorage:z.jk},bus:{openBus:p.$,closeBus:p.F},notification:{openNotificationScheduleManager:k.Sv,closeNotificationScheduleManager:k.m_,openRegisterNotification:x.XG,closeRegisterNotification:x.hy,saveFormulatedRegisterNotification:x.NW,openScheduleNotification:N.Ho,closeScheduleNotification:N.b$,scheduleNotificationForStopItemOnRoute:N.H9,scheduleNotificationForStopItemOnLocation:N.b6,cancelNotificationOnNotificationScheduleManager:k.Gv},qrcode:{openQRCode:F.X8,closeQRCode:F.Vc}};const B=window.bus},4927(e,t,n){n.d(t,{F:()=>C,$:()=>w});var r=n(467),o=n(6160),a=n(5314),i=n(3459),c=n(8024),d=n(8179),l=n(904),u=n(4537),s=[],f=!1,p=!0;function v(){var e=document.createElement("div");e.classList.add("wc");var t=document.createElement("div");t.classList.add("xc");var n=document.createElement("div");return n.classList.add("yc"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function h(e,t,n,r){function o(e,t,o){function a(e,t){var n=(0,d.aI)(e,".xc");(0,d.Je)(n),n.appendChild((0,u.YC)(t.icon))}function i(e,t){(0,d.aI)(e,".yc").innerText=t.value}function l(e,t){e.setAttribute("animation",t)}function s(e,t){e.setAttribute("skeleton-screen",t)}null===o?(a(e,t),i(e,t),s(e,n),l(e,r)):((0,c.hw)(o,t)||a(e,t),(0,c.hw)(o,t)||i(e,t),n!==f&&s(e,n),r!==p&&l(e,r))}var a=t.length,i=(0,d.jg)(e,".tc .wc").length;if(a!==i){var l=i-a;if(l<0)for(var h=0;h<Math.abs(l);h++){var m=v();(0,d.aI)(e,".tc").appendChild(m.element)}else for(var y=0;y<Math.abs(l);y++){var g=i-1-y;(0,d.jg)(e,".tc .wc")[g].remove()}}for(var b=(0,d.jg)(e,".tc .wc"),w=0;w<a;w++){var C=b[w],S=t[w];0===s.length?o(C,S,null):o(C,S,s[w])}s=t,p=r,f=n}var m=(0,d.bv)(".cc"),y=((0,d.aI)(m,".ec"),(0,d.aI)(m,".mc")),g=(0,d.aI)(y,".nc"),b=(0,d.aI)(g,'.oc[group="properties"]');(0,d.aI)(g,'.oc[group="location"]');function w(e){(0,l.WR)("Bus"),(0,a.XK)("bus",e),m.setAttribute("displayed","true"),function(e){S.apply(this,arguments)}(e),(0,l.Z_)()}function C(){m.setAttribute("displayed","false"),(0,l.l$)()}function S(){return(S=(0,r.A)(function*(e){!function(e){for(var t=(0,i.Js)("playing_animation"),n=[],r=0;r<5;r++)n.push({key:r,icon:"none",value:""});h(e,n,!0,t)}(b);var t=(0,i.Js)("playing_animation"),n=(0,c.zx)(),r=yield(0,o.i)(e,n);h(b,r.properties,!1,t)})).apply(this,arguments)}},6052(e,t,n){n.d(t,{c6:()=>p,pd:()=>v,z1:()=>h});var r=n(9566),o=n(8179),a=n(6189),i=n(904),c=n(9119),d=(0,o.bv)(".se"),l=(0,o.aI)(d,".xe"),u=(0,o.aI)(l,".ye"),s=(0,o.aI)(u,'.ze[group="folder-name"] .cf input'),f=(0,o.aI)(u,'.ze[group="folder-icon"] .cf .df input');function p(){var e=s.value,t=f.value;(0,r.vV)(e,t).then(function(e){e?(h(),(0,c.a)("已建立資料夾","folder")):(0,c.a)("無法建立資料夾","error")})}function v(){(0,i.WR)("FolderCreator"),d.setAttribute("displayed","true"),(0,i.Z_)()}function h(){d.setAttribute("displayed","false"),(0,i.l$)()}(0,o.aI)(u,'.se .xe .ye .ze[group="folder-icon"] .cf .df .ef').onclick=function(){(0,a.r7)("creator")}},6189(e,t,n){n.d(t,{Pk:()=>S,jW:()=>E,r7:()=>I});var r=n(467),o=n(9218),a=n(6788),i=n(972),c=n(8024),d=n(8179),l=n(4781),u=n(6082),s=n(4537),f=n(904),p=n(9119);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m="",y=(0,d.bv)(".ud"),g=(0,d.bv)(".se"),b=(0,d.bv)(".ff");function w(e){var t=document.createElement("div");return t.classList.add("nf"),t.onclick=function(){!function(e){var t;switch(m){case"editor":t=(0,d.aI)(y,'.yd .zd ._d[group="folder-icon"] .de .fe input');break;case"creator":t=(0,d.aI)(g,'.xe .ye .ze[group="folder-icon"] .cf .df input')}t.value=e,E()}(e)},t.appendChild((0,s.YC)(e)),{element:t,id:""}}function C(){return(C=(0,r.A)(function*(){var e=(0,d.aI)(b,".kf .lf");e.innerHTML="";var t=(0,c.zx)(),n=yield(0,o.l)(t);(0,a.LQ)(t);var r=new DocumentFragment;for(var i in n.symbols){var l=w(i);r.appendChild(l.element)}e.append(r)})).apply(this,arguments)}function S(e){var t=(0,d.aI)(b,".kf .mf"),n=(0,d.aI)(b,".kf .lf");if(!(0,l.iO)(e)){var r,o=(0,i.U)(e),a=new DocumentFragment,c=v(o);try{for(c.s();!(r=c.n()).done;){var u=w(r.value.item);a.appendChild(u.element)}}catch(e){c.e(e)}finally{c.f()}t.innerHTML="",t.append(a),t.setAttribute("displayed",o.length>0?"true":"false"),n.setAttribute("displayed",o.length>0?"false":"true")}}function I(e){switch((0,f.WR)("FolderIconSelector"),e){case"editor":m="editor",(0,d.aI)(y,'.yd .zd ._d[group="folder-icon"] .de .fe .ge');break;case"creator":m="creator",(0,d.aI)(g,'.xe .ye .ze[group="folder-icon"] .cf .df .ef')}u.m?(b.setAttribute("displayed","true"),function(){C.apply(this,arguments)}(m),(0,i.L)()):(0,p.a)("資料還在下載中","download_for_offline")}function E(){(0,f.kr)("FolderIconSelector"),b.setAttribute("displayed","false")}},8379(e,t,n){n.d(t,{g:()=>m,m:()=>y});var r=n(467),o=n(9566),a=n(8179),i=n(9333),c=n(4537),d=n(904);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=(0,a.bv)(".ed"),f=(0,a.aI)(s,".jd"),p=(0,a.aI)(f,".kd");function v(e){var t=document.createElement("div");t.classList.add("ld"),t.onclick=function(){(0,i.uy)(e.id)};var n=document.createElement("div");n.classList.add("md"),n.appendChild((0,c.YC)(e.icon));var r=document.createElement("div");r.classList.add("nd"),r.appendChild(document.createTextNode(e.name));var o=document.createElement("div");o.classList.add("od"),o.appendChild(document.createTextNode(String(e.contentLength)));var a=document.createElement("div");return a.classList.add("td"),a.appendChild((0,c.YC)("arrow_forward_ios")),t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),{element:t,id:""}}function h(){return(h=(0,r.A)(function*(){var e=yield(0,o.Xi)();p.innerHTML="";var t,n=new DocumentFragment,r=l(e);try{for(r.s();!(t=r.n()).done;){var a=v(t.value);n.appendChild(a.element)}}catch(e){r.e(e)}finally{r.f()}p.append(n)})).apply(this,arguments)}function m(){(0,d.WR)("FolderManager"),s.setAttribute("displayed","true"),function(){h.apply(this,arguments)}()}function y(){(0,d.kr)("FolderManager"),s.setAttribute("displayed","false")}},9333(e,t,n){n.d(t,{Bo:()=>A,I6:()=>k,uy:()=>E});var r=n(467),o=n(9566),a=n(8024),i=n(8179),c=n(6189),d=n(4537),l=n(904),u=n(9119);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,i.bv)(".ud"),v=(0,i.aI)(p,".vd"),h=(0,i.aI)(v,".wd"),m=(0,i.aI)(p,".yd"),y=(0,i.aI)(m,".zd"),g=(0,i.aI)(y,'._d[group="folder-name"] .de input'),b=(0,i.aI)(y,'._d[group="folder-icon"] .de .fe input'),w=(0,i.aI)(y,'._d[group="folder-icon"] .de .fe .ge'),C=(0,i.aI)(y,'._d[group="folder-content"] .de');function S(e,t){var n=(0,a.zx)(),r=document.createElement("div");r.id=n,r.classList.add("he"),r.setAttribute("type",t.type);var c="",l="",s="";switch(t.type){case"stop":s="location_on",c=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`,l=t.name;break;case"route":s="route",c=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`,l=t.name;break;case"location":s="location_on",c="地點",l=t.name;break;case"bus":c="",l=t.name;break;case"empty":s="lightbulb",c="提示",l="沒有內容";break;default:s="",c="null",l="null"}var f=document.createElement("div");f.classList.add("ie"),f.appendChild((0,d.YC)(s));var v=document.createElement("div");v.classList.add("je"),v.appendChild(document.createTextNode(c));var h=document.createElement("div");h.classList.add("le"),h.appendChild(document.createTextNode(l));var m=document.createElement("div");m.classList.add("me");var y=document.createElement("div");y.classList.add("ne"),y.appendChild((0,d.YC)("keyboard_arrow_down")),y.onclick=function(){L(n,e.id,t.type,t.id,"up")};var g=document.createElement("div");g.classList.add("oe"),g.appendChild((0,d.YC)("keyboard_arrow_down")),g.onclick=function(){L(n,e.id,t.type,t.id,"down")};var b=document.createElement("div");b.classList.add("pe"),b.appendChild((0,d.YC)("delete")),b.onclick=function(){!function(e,t,n,r){var a=(0,i.aI)(p,`.yd .zd ._d[group="folder-content"] .de .he#${e}`);(0,o.NC)(t,n,r).then(function(e){if(e)switch(a.remove(),n){case"stop":(0,u.a)("已移除站牌","delete");break;case"route":(0,u.a)("已移除路線","delete");break;case"location":(0,u.a)("已移除地點","delete")}else(0,u.a)("無法移除","error")})}(n,e.id,t.type,t.id)};var w=document.createElement("div");w.classList.add("qe");var C=document.createElement("div");return C.classList.add("qe"),m.appendChild(y),m.appendChild(g),m.appendChild(b),m.appendChild(w),m.appendChild(C),r.appendChild(f),r.appendChild(v),r.appendChild(h),r.appendChild(m),{element:r,id:n}}function I(){return(I=(0,r.A)(function*(e){!function(e,t){g.value=e.name,b.value=e.icon,h.onclick=function(){A(e.id)},C.innerHTML="";var n,r=new DocumentFragment,o=s(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=S(e,a);r.appendChild(i.element)}}catch(e){o.e(e)}finally{o.f()}C.append(r)}((0,o.L2)(e),yield(0,o.eD)(e))})).apply(this,arguments)}function E(e){(0,l.WR)("FolderEditor"),p.setAttribute("displayed","true"),function(e){I.apply(this,arguments)}(e),(0,l.Z_)()}function k(){p.setAttribute("displayed","false"),(0,l.l$)()}function L(e,t,n,r,a){var c=(0,i.aI)(p,`.yd .zd ._d[group="folder-content"] .de .he#${e}`);(0,o.bq)(t,n,r,a).then(function(e){if(e)switch(a){case"up":var t=c.previousElementSibling;t&&c.parentNode.insertBefore(c,t),(0,u.a)("已往上移","arrow_circle_up");break;case"down":var n=c.nextElementSibling;n&&c.parentNode.insertBefore(n,c),(0,u.a)("已往下移","arrow_circle_down")}else(0,u.a)("無法移動","error")})}function A(e){var t=g.value,n=b.value;(0,o.g$)(e,t,n),k()}w.onclick=function(){(0,c.r7)("editor")}},9499(e,t,n){n.d(t,{i:()=>g,k:()=>y});var r=n(467),o=n(8925),a=n(7183),i=n(8179),c=n(5579),d=n(904),l=(0,i.bv)(".of"),u=(0,i.aI)(l,".sf"),s=(0,i.aI)(u,".tf"),f=(0,i.aI)(u,".uf"),p=(0,i.aI)(f,'.vf[name="total-data-usage"] .xf'),v=(0,i.aI)(f,'.vf[name="start-time"] .xf'),h=(0,i.aI)(f,'.vf[name="end-time"] .xf');function m(){return(m=(0,r.A)(function*(){var e=(0,d.gO)("window"),t=e.width,n=Math.min(5/18*t,.33*e.height),r=yield(0,o.LN)(t,n,20);p.innerText=(0,a.tH)(r.stats.sum),v.innerText=(0,c.$T)(r.period.start,"YYYY-MM-DD"),h.innerText=(0,c.$T)(r.period.end,"YYYY-MM-DD"),s.innerHTML=r.chart})).apply(this,arguments)}function y(){(0,d.WR)("DataUsage"),l.setAttribute("displayed","true"),function(){m.apply(this,arguments)}(),(0,d.Z_)()}function g(){l.setAttribute("displayed","false"),(0,d.l$)()}}}]);
//# sourceMappingURL=17000f1a818b4a101ad4.js.map