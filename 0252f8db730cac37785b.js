"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{313(e,t,r){r.d(t,{s:()=>c});var n=r(467),o=r(4311),i=r(3153),a=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,f={};function c(e){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,9],[1,9]].map(function(e){return{url:(0,i.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var o=t.value,l=yield(0,a.Fd)(o.url,e,`getProvider_${o.e[0]}`,"json");r=r.concat(l.BusInfo),(0,a.ZL)(e,l.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var l="bus_provider_cache",c=yield(0,o.Ct)(0,`${l}_timestamp`);if(null===c){var y=yield t();return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(y)),s||(s=!0,f=y),y}if((new Date).getTime()-parseInt(c)>5184e6){var p=yield t();return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(p)),p}if(!s){var m=yield(0,o.Ct)(0,l);s=!0,f=JSON.parse(m)}return(0,a.Mf)(e,"getProvider_0",0,!0),(0,a.Mf)(e,"getProvider_1",0,!0),(0,a.ZL)(e,-1),f}),y.apply(this,arguments)}},424(e,t,r){r.d(t,{T:()=>p});var n=r(467),o=r(4311),i=r(3153),a=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,f={};function c(e){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(132),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return m=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,11],[1,11]].map(function(e){return{url:(0,i.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var o=t.value,l=yield(0,a.Fd)(o.url,e,`getStop_${o.e[0]}`,"json");r=r.concat(l.BusInfo),(0,a.ZL)(e,l.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var l="bus_stop_cache",y=yield(0,o.Ct)(0,`${l}_timestamp`);if(null===y){var p=yield t(),m=yield c(p);return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(m)),s||(s=!0,f=m),m}if((new Date).getTime()-parseInt(y)>3888e6){var d=yield t(),v=yield c(d);return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(v)),v}if(!s){var g=yield(0,o.Ct)(0,l);s=!0,f=JSON.parse(g)}return(0,a.Mf)(e,"getStop_0",0,!0),(0,a.Mf)(e,"getStop_1",0,!0),(0,a.ZL)(e,-1),f}),m.apply(this,arguments)}},1932(e,t,r){r.d(t,{L:()=>d});var n=r(467),o=r(4311),i=r(3153),a=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,f={};function c(e){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(332),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(892),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function d(e){return v.apply(this,arguments)}function v(){return v=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r="",n=u([[0,15],[1,15]].map(function(e){return{url:(0,i.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var o=t.value;r+=(yield(0,a.Fd)(o.url,e,`getSegmentBuffers_${o.e[0]}`,"xml")),(0,a.ZL)(e,-1)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var l="bus_segment_buffers_cache",y=yield(0,o.Ct)(0,`${l}_timestamp`);if(null===y){var m=yield t(),d=yield c(m),v=yield p(d);return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(v)),s||(s=!0,f=v),v}if((new Date).getTime()-parseInt(y)>2592e6){var g=yield t(),h=yield c(g),b=yield p(h);return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(b)),b}if(!s){var w=yield(0,o.Ct)(0,l);s=!0,f=JSON.parse(w)}return(0,a.Mf)(e,"getSegmentBuffers_0",0,!0),(0,a.Mf)(e,"getSegmentBuffers_1",0,!0),(0,a.ZL)(e,-1),f}),v.apply(this,arguments)}},2303(e,t,r){r.d(t,{$Q:()=>a,AS:()=>s,Ov:()=>f,aU:()=>u,eu:()=>y,s$:()=>p,w_:()=>l,zi:()=>c});var n=r(5579);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if("string"==typeof e){var r=parseInt(e);if(-3===r)return{code:6,text:"末班駛離",time:r};if(-4===r)return{code:5,text:"今日停駛",time:r};if(-2===r)return{code:4,text:"交通管制",time:r};if(-1===r)return{code:3,text:"未發車",time:r};if(0<=r&&r<=10)return{code:2,text:"進站中",time:r};if(10<r&&r<=180)return{code:1,text:(0,n.fU)(r,t),time:r};if(180<r&&r<=250)return{code:.5,text:(0,n.fU)(r,t),time:r};if(250<r)return{code:0,text:(0,n.fU)(r,t),time:r}}return{code:7,text:"發生錯誤",time:-5}}function u(e,t){var r=e.length;if(0===t){var n=0,o=0;return 4===r&&(n=parseInt(e.substring(0,2)),o=parseInt(e.substring(2,4))),2===r&&(o=parseInt(e)),{type:"moment",hours:n,minutes:o}}if(1===t){var i=0,a=0;if(4===r){var u=parseInt(e.substring(0,2)),l=parseInt(e.substring(2,4));i=Math.min(u,l),a=Math.max(u,l)}if(2===r){var s=parseInt(e);i=s,a=s}return{type:"range",min:i,max:a}}}function l(e,t,r,n,i){var a,u={},l={},s=o(t);try{for(s.s();!(a=s.n()).done;){var f=a.value;l[f.BusID]=f}}catch(e){s.e(e)}finally{s.f()}var c,y=o(e);try{for(y.s();!(c=y.n()).done;){var p=c.value,m={};m.CarType=p.CarType,m.BusStatus=p.BusStatus,m.BusID=p.BusID,m.CarOnStop=p.CarOnStop;var d=parseInt(p.RouteID),v=String(p.BusID),g=!1,h=0;d===n||i.indexOf(d)>-1||d===10*n?(g=!0,h=v.charCodeAt(0)*Math.pow(10,-5)):(g=!1,h=v.charCodeAt(0)),m.onThisRoute=g,m.index=h;var b={};if(l.hasOwnProperty(v)){b=l[v],m.position={latitude:parseFloat(b.Latitude),longitude:parseFloat(b.Longitude)};var w={},S=!1;for(var A in r){var I=r[A];if(I.pid.indexOf(d)>-1){w=I,S=!0;break}}m.RouteName=S?w.n:"未知路線",m.RouteID=S?w.id:null;var T=`s_${p.StopID}`;u.hasOwnProperty(T)||(u[T]=[]),u[T].push(m)}}}catch(e){y.e(e)}finally{y.f()}return u}function s(e,t,r,n){var i,a={},u={},l=o(t);try{for(l.s();!(i=l.n()).done;){var s=i.value;u[s.BusID]=s}}catch(e){l.e(e)}finally{l.f()}var f,c=o(e);try{for(c.s();!(f=c.n()).done;){var y=f.value,p={},m=parseInt(y.StopID),d=parseInt(y.RouteID),v=String(y.BusID);if(!(n.indexOf(m)<0)){p.index=v.charCodeAt(0),p.onThisRoute=!0,p.CarType=y.CarType,p.BusStatus=y.BusStatus,p.BusID=y.BusID,p.CarOnStop=y.CarOnStop;var g={};if(u.hasOwnProperty(v)){g=u[v],p.position={latitude:parseFloat(g.Latitude),longitude:parseFloat(g.Longitude)};var h={},b=!1;for(var w in r){var S=r[w];if(S.pid.indexOf(d)>-1){h=S,b=!0;break}}p.RouteName=b?h.n:"未知路線",p.RouteID=b?h.id:null;var A=`s_${m}`;a.hasOwnProperty(A)||(a[A]=[]),a[A].push(p)}}}}catch(e){c.e(e)}finally{c.f()}return a}function f(e){var t="";switch(e){case"0":t="一般";break;case"1":t="低底盤";break;case"2":t="大復康巴士";break;case"3":t="狗狗友善專車";break;default:t="未知類型"}return t}function c(e){var t="";switch(e){case"0":t="離站";break;case"1":t="進站";break;default:t="未知狀態"}return t}function y(e){var t="";switch(e){case"0":t="正常";break;case"1":t="車禍";break;case"2":t="故障";break;case"3":t="塞車";break;case"4":t="緊急求援";break;case"5":t="加油";break;case"99":t="非營運狀態";break;default:t="未知狀態"}return t}function p(e){var t={},r=f(e.CarType);t.type=r;var n=c(e.CarOnStop),o=y(e.BusStatus);return t.carNumber=e.BusID,t.status={onStop:n,situation:o,text:`${n} | ${o}`},t.RouteName=e.RouteName,t.onThisRoute=e.onThisRoute,t.index=e.index,t.position=e.position,t}},4293(e,t,r){r.d(t,{a:()=>p});var n=r(467),o=r(4311),i=r(3153),a=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,f={};function c(e){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(148),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return m=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,10],[1,10]].map(function(e){return{url:(0,i.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var o=t.value,l=yield(0,a.Fd)(o.url,e,`getRoute_${o.e[0]}`,"json");r=r.concat(l.BusInfo),(0,a.ZL)(e,l.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return yield t();var l="bus_route_cache",y=yield(0,o.Ct)(0,`${l}_timestamp`);if(null===y){var p=yield t(),m=yield c(p);return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(m)),s||(s=!0,f=m),m}if((new Date).getTime()-parseInt(y)>864e5){var d=yield t(),v=yield c(d);return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(v)),s||(s=!0,f=v),v}if(!s){var g=yield(0,o.Ct)(0,l);s=!0,f=JSON.parse(g)}return(0,a.Mf)(e,"getRoute_0",0,!0),(0,a.Mf)(e,"getRoute_1",0,!0),(0,a.ZL)(e,-1),f}),m.apply(this,arguments)}},6788(e,t,r){r.d(t,{Fd:()=>y,LQ:()=>g,Mf:()=>d,ZL:()=>w,Zt:()=>S,_M:()=>v,gC:()=>A});var n=r(2284),o=r(467),i=r(4750),a=r(5579),u=r(8925);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f={},c=1e4;function y(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=(0,o.A)(function*(e,t,r,n){console.log(0);var o=new Error("FetchError");if(console.log(1),f.hasOwnProperty(e)){if(console.log(2),f[e].processing)return console.log(3),yield new Promise(function(n,o){console.log(4),f[e].requests.push([n,o,t,r])});if(f[e].cached&&(console.log(5),(new Date).getTime()-f[e].timestamp<=c))return console.log(6),f[e].result;console.log(7)}else console.log(8),f[e]={processing:!0,requests:[],cached:!1,failed:!1,timestamp:-1,result:null};console.log(9);var a=yield fetch(e);if(!a.ok)throw console.log(10),d(t,r,0,!0),new Error(`HTTP error! status: ${a.status}`);console.log(11);var s=parseInt(String(a.headers.get("content-length"))),p=a.body.getReader(),m=[];console.log(12);for(var v=0;;){var g=yield p.read(),h=g.done,b=g.value;if(console.log(13),h)break;m.push(b);var w=(v+=b.length)/s;console.log(14),d(t,r,w,!1),console.log(15);var S,A=l(f[e].requests);try{for(A.s();!(S=A.n()).done;){var I=S.value;console.log(16),d(I[2],I[3],w,!1),console.log(17)}}catch(e){A.e(e)}finally{A.f()}}console.log(18);for(var T=new Uint8Array(v),_=0,O=0,L=m;O<L.length;O++){var $=L[O];T.set($,_),_+=$.length}var C,x=new Blob([T],{type:"application/gzip"}),D=yield x.arrayBuffer(),M=yield(0,i.h)(D);switch(console.log(19),n){case"json":console.log(20),C=/^<!doctype html>/.test(M)?yield y(e.replace("https://tcgbusfs.blob.core.windows.net/","https://erichsia7.github.io/bus-alternative-static-apis/"),t,r,n):JSON.parse(M),console.log(21);break;case"xml":console.log(22),C=M,console.log(23)}console.log(24);var N=(new Date).getTime();if(console.log(25),yield(0,u.N$)(s,N),console.log(26),C){console.log(27);for(var k=v/s,B=f[e].requests.shift();B;)console.log(28),B[0](C),d(B[2],B[3],k,!1),B=f[e].requests.shift();return console.log(29),f[e].processing=!1,f[e].result=C,f[e].timestamp=N+c,f[e].cached=!0,console.log(30),C}console.log(31);for(var j=f[e].requests.shift();j;)console.log(32),j[1](o),d(j[2],j[3],0,!0),j=f[e].requests.shift();throw console.log(33),f[e].failed=!0,o})).apply(this,arguments)}var m={};function d(e,t,r,n){m.hasOwnProperty(e)||(m[e]={});var o=`t_${t}`;m[e].hasOwnProperty(o)?(n?m[e][o].expel=!0:(m[e][o].expel=!1,m[e][o].progress=r),h(e,"run")):(m[e][o]={expel:!1,progress:r,total:1},h(e,"start"))}function v(e){if(m.hasOwnProperty(e)&&"object"===(0,n.A)(m[e])){var t=0,r=0;for(var o in m[e])m[e][o].expel||(t+=m[e][o].total,r+=m[e][o].progress);var i=Math.min(Math.max(r/t,0),1);return i===1/0||isNaN(i)?1:i}return 1}function g(e){m.hasOwnProperty(e)&&(delete m[e],h(e,"end"))}function h(e,t){var r={target:e,stage:t,progress:v(e)},n=new CustomEvent(e,{detail:r});document.dispatchEvent(n)}var b={};function w(e,t){b.hasOwnProperty(e)||(b[e]=0);var r=0;"string"==typeof t&&(r=(0,a.Zn)(t)),r>b[e]&&(b[e]=r)}function S(e){return b.hasOwnProperty(e)?1*b[e]:0}function A(e){b.hasOwnProperty(e)&&delete b[e]}},8201(e,t,r){r.d(t,{Y:()=>c});var n=r(467),o=r(4311),i=r(3153),a=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,f={};function c(e){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,12],[1,12]].map(function(e){return{url:(0,i.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var o=t.value,l=yield(0,a.Fd)(o.url,e,`getSemiTimeTable_${o.e[0]}`,"json");r=r.concat(l.BusInfo),(0,a.ZL)(e,l.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var l="bus_semi_timetable_cache",c=yield(0,o.Ct)(0,`${l}_timestamp`);if(null===c){var y=yield t();return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(y)),s||(s=!0,f=y),y}if((new Date).getTime()-parseInt(c)>12096e5){var p=yield t();return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(p)),p}if(!s){var m=yield(0,o.Ct)(0,l);s=!0,f=JSON.parse(m)}return(0,a.Mf)(e,"getSemiTimeTable_0",0,!0),(0,a.Mf)(e,"getSemiTimeTable_1",0,!0),(0,a.ZL)(e,-1),f}),y.apply(this,arguments)}},8671(e,t,r){r.d(t,{s:()=>c});var n=r(467),o=r(4311),i=r(3153),a=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,f={};function c(e){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,14],[1,14]].map(function(e){return{url:(0,i.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var o=t.value,l=yield(0,a.Fd)(o.url,e,`getTimeTable_${o.e[0]}`,"json");r=r.concat(l.BusInfo),(0,a.ZL)(e,l.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var l="bus_timetable_cache",c=yield(0,o.Ct)(0,`${l}_timestamp`);if(null===c){var y=yield t();return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(y)),s||(s=!0,f=y),y}if((new Date).getTime()-parseInt(c)>12096e5){var p=yield t();return yield(0,o.mL)(0,`${l}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,l,JSON.stringify(p)),p}if(!s){var m=yield(0,o.Ct)(0,l);s=!0,f=JSON.parse(m)}return(0,a.Mf)(e,"getTimeTable_0",0,!0),(0,a.Mf)(e,"getTimeTable_1",0,!0),(0,a.ZL)(e,-1),f}),y.apply(this,arguments)}}}]);
//# sourceMappingURL=0252f8db730cac37785b.js.map