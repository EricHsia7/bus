{"version":3,"file":"844c7b05b91036a1c5b9.js","mappings":"6aAOMA,GAA8BC,EAAAA,EAAAA,GAAsB,OACpDC,GAAoCC,EAAAA,EAAAA,GAAqBH,EAA6B,OACtFI,GAAoCD,EAAAA,EAAAA,GAAqBH,EAA6B,OACtFK,GAAoBF,EAAAA,EAAAA,GAAqBC,EAAmC,OAC5EE,GAA+BH,EAAAA,EAAAA,GAAqBD,EAAmC,OACvFK,GAAmBJ,EAAAA,EAAAA,GAAqBG,EAA8B,wCACtEE,GAAwBL,EAAAA,EAAAA,GAAqBG,EAA8B,8CAC3EG,GAAsBN,EAAAA,EAAAA,GAAqBG,EAA8B,4CACzEI,GAAsBP,EAAAA,EAAAA,GAAqBG,EAA8B,kCACzEK,GAAcC,EAAAA,EAAAA,GAAwBF,EAAqB,OAE1D,SAAeG,EAA0BC,GAAA,OAAAC,EAAAC,MAAC,KAADC,UAAA,CAmC/C,SAAAF,IAAA,OAAAA,GAAAG,EAAAA,EAAAA,GAnCM,UAA0CC,GAa/C,IAZA,IAAMC,EAAOb,EAAiBc,MACxBC,EAAYd,EAAsBa,MAClCE,EAAUd,EAAoBY,MAEpCG,EAAmCC,OAAOH,GACvCI,MAAM,KACNC,IAAI,SAACC,GAAC,OAAKC,SAASD,EAAE,GAACE,GAAAC,EAAAA,EAAAA,GAAAP,EAAA,GAFnBQ,EAAUF,EAAA,GAAEG,EAAYH,EAAA,GAG/BI,EAA+BT,OAAOF,GACnCG,MAAM,KACNC,IAAI,SAACC,GAAC,OAAKC,SAASD,EAAE,GAACO,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAFnBE,EAAQD,EAAA,GAAEE,EAAUF,EAAA,GAIvBG,EAAO,GACFC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMC,EAAiB7B,EAAY4B,GAC7BE,EAAcD,EAAeE,aAAa,eAC1CC,EAAMd,SAASW,EAAeE,aAAa,QAC7B,SAAhBD,GACFH,EAAKM,KAAKD,EAEd,CAEA,IAAIE,QAAyBC,EAAAA,EAAAA,GAAoB3B,GACjD0B,EAAiBzB,KAAOA,EACxByB,EAAiBP,KAAOA,EACxBO,EAAiBE,OAAOC,MAAMC,MAAQjB,EACtCa,EAAiBE,OAAOC,MAAME,QAAUjB,EACxCY,EAAiBE,OAAOI,IAAIF,MAAQb,EACpCS,EAAiBE,OAAOI,IAAID,QAAUb,QAEhCe,EAAAA,EAAAA,GAAuBP,IAC7BQ,EAAAA,EAAAA,GAAc,eAAgB,SAC9BC,KAEAC,EAAAA,EAAAA,IACF,IAACvC,MAAA,KAAAC,UAAA,CAEmD,SAAAuC,IAiBnD,OAjBmDA,GAAAtC,EAAAA,EAAAA,GAApD,UAAqDC,GACnD,IAAM0B,QAAyBC,EAAAA,EAAAA,GAAoB3B,GACnDZ,EAAiBc,MAAQwB,EAAiBzB,KAC1CZ,EAAsBa,OAAQoC,EAAAA,EAAAA,GAAmBZ,EAAiBE,OAAOC,OACzEvC,EAAoBY,OAAQoC,EAAAA,EAAAA,GAAmBZ,EAAiBE,OAAOI,KAEvE,IAAK,IAAIZ,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMC,EAAiB7B,EAAY4B,GAC/BM,EAAiBP,KAAKoB,QAAQnB,IAAM,EACtCC,EAAemB,aAAa,cAAe,QAE3CnB,EAAemB,aAAa,cAAe,QAE/C,CACAtD,EAAkBuD,QAAU,WAC1B/C,EAA2BM,EAC7B,CACF,IAACH,MAAA,KAAAC,UAAA,CAEM,SAAS4C,EAA2BC,GACzC,IAAMC,EAAwC,QAA5BD,EAAoC,KAAqC,KAC3F9D,EAA4BgE,iBAC1B,eACA,WACEhE,EAA4BiE,UAAUC,OAAOH,EAC/C,EACA,CAAEI,MAAM,IAEVnE,EAA4BiE,UAAUG,IAAIL,GAC1C/D,EAA4B2D,aAAa,YAAa,OACxD,CAEO,SAASU,EAA2BP,GACzC,IAAMC,EAAwC,QAA5BD,EAAoC,KAAsC,KAC5F9D,EAA4BgE,iBAC1B,eACA,WACEhE,EAA4B2D,aAAa,YAAa,SACtD3D,EAA4BiE,UAAUC,OAAOH,EAC/C,EACA,CAAEI,MAAM,IAEVnE,EAA4BiE,UAAUG,IAAIL,EAC5C,CAEO,SAASO,EAA2BnD,IACzCoD,EAAAA,EAAAA,GAAgB,0BAChBV,EAA2B,OAjD5B,SAEmDW,GAAAhB,EAAAxC,MAAC,KAADC,UAAA,CAgDlDwD,CAAsCtD,IACtCuD,EAAAA,EAAAA,IACF,CAEO,SAASpB,IACde,EAA2B,QAC3BM,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,GAAkB,yBACpB,CAEO,SAASC,EAAgClC,GAC9C,IAAMH,GAAiBrC,EAAAA,EAAAA,GAAqBO,EAAqB,YAA0CiC,OAEvF,SADAH,EAAeE,aAAa,eAE9CF,EAAemB,aAAa,cAAe,SAE3CnB,EAAemB,aAAa,cAAe,OAE/C,C,0KCnHMmB,GAA+B7E,EAAAA,EAAAA,GAAsB,OACrD8E,GAAqC5E,EAAAA,EAAAA,GAAqB2E,EAA8B,OACxFE,GAAc7E,EAAAA,EAAAA,GAAqB4E,EAAoC,OAE7E,SAASE,EAAsBC,GAE7B,IAAMC,GAAcC,EAAAA,EAAAA,KACpBD,EAAYlB,UAAUG,IAAI,MAC1Be,EAAYvB,QAAU,YACpBU,EAAAA,EAAAA,GAA2BY,EAAKG,GAClC,EAGA,IAAMC,GAAcF,EAAAA,EAAAA,KACpBE,EAAYrB,UAAUG,IAAI,MAC1BkB,EAAYC,UAAYL,EAAK9D,KAC7B+D,EAAYK,YAAYF,GAGxB,IAAMG,GAAeL,EAAAA,EAAAA,KACrBK,EAAaxB,UAAUG,IAAI,MAC3B,IAAMsB,EAAcC,SAASC,cAAc,QAK3C,OAJAF,EAAYF,aAAYK,EAAAA,EAAAA,GAAe,sBACvCJ,EAAaD,YAAYE,GACzBP,EAAYK,YAAYC,GAEjBN,CACT,CAEO,SAAe5B,IAAsC,OAAAuC,EAAA9E,MAAC,KAADC,UAAA,CAS3D,SAAA6E,IAAA,OAAAA,GAAA5E,EAAAA,EAAAA,GATM,YACL8D,EAAYe,UAAY,GACxB,IAAMC,QAA0BC,EAAAA,EAAAA,KAC1BC,EAAW,IAAIC,iBACrB,IAAK,IAAMjB,KAAQc,EAAmB,CACpC,IAAMI,EAAcnB,EAAsBC,GAC1CgB,EAASV,YAAYY,EACvB,CACApB,EAAYqB,OAAOH,EACrB,IAAClF,MAAA,KAAAC,UAAA,CAEM,SAASqF,EAA4BxC,GAC1C,IAAMC,EAAwC,QAA5BD,EAAoC,KAAqC,KAC3FgB,EAA6Bd,iBAC3B,eACA,WACEc,EAA6Bb,UAAUC,OAAOH,EAChD,EACA,CAAEI,MAAM,IAEVW,EAA6Bb,UAAUG,IAAIL,GAC3Ce,EAA6BnB,aAAa,YAAa,OACzD,CAEO,SAAS4C,EAA4BzC,GAC1C,IAAMC,EAAwC,QAA5BD,EAAoC,KAAsC,KAC5FgB,EAA6Bd,iBAC3B,eACA,WACEc,EAA6BnB,aAAa,YAAa,SACvDmB,EAA6Bb,UAAUC,OAAOH,EAChD,EACA,CAAEI,MAAM,IAEVW,EAA6Bb,UAAUG,IAAIL,EAC7C,CAEO,SAASyC,KACdjC,EAAAA,EAAAA,GAAgB,2BAChB+B,EAA4B,OAC5B/C,KACAmB,EAAAA,EAAAA,IACF,CAEO,SAAS+B,IACdF,EAA4B,QAC5B5B,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,GAAkB,0BACpB,C,iIC3EM8B,GAA4BzG,EAAAA,EAAAA,GAAsB,OAClD0G,GAAcxG,EAAAA,EAAAA,GAAqBuG,EAA2B,OAE9DE,GAAgBzG,EAAAA,EAAAA,GAAqBwG,EAAa,OAElDE,GAAuB1G,EAAAA,EAAAA,GAAqByG,EAAe,yBAC3DE,GAA2B3G,EAAAA,EAAAA,GAAqB0G,EAAsB,OACtEE,GAAuB5G,EAAAA,EAAAA,GAAqB2G,EAA0B,SAEtEE,GAA6B7G,EAAAA,EAAAA,GAAqByG,EAAe,iCACjEK,GAAiC9G,EAAAA,EAAAA,GAAqB6G,EAA4B,OAClFE,GAA6B/G,EAAAA,EAAAA,GAAqB8G,EAAgC,SAElFE,GAAchH,EAAAA,EAAAA,GAAqBuG,EAA2B,OAC9DrG,GAAoBF,EAAAA,EAAAA,GAAqBgH,EAAa,OACtDC,GAAqBjH,EAAAA,EAAAA,GAAqBgH,EAAa,OAE7D,SAASE,IACPhH,EAAkBuD,QAAU,WAgD5B0D,EAAyB,QACzB3C,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,GAAkB,yBA/ChB2C,EAAAA,EAAAA,IACF,EAEAH,EAAmBxD,QAAU,YA+CxB,WAAiD4D,EAAAxG,MAAC,KAADC,UAAA,CA9CpDwG,EACF,EAEAV,EAAqB1F,OAAQqG,EAAAA,EAAAA,KAC7BR,EAA2B7F,MAAQ,EACrC,CAEO,SAASsG,EAAyB7D,GACvC,IAAMC,EAAwC,QAA5BD,EAAoC,KAAqC,KAC3F4C,EAA0B1C,iBACxB,eACA,WACE0C,EAA0BzC,UAAUC,OAAOH,EAC7C,EACA,CAAEI,MAAM,IAEVuC,EAA0BzC,UAAUG,IAAIL,GACxC2C,EAA0B/C,aAAa,YAAa,OACtD,CAEO,SAAS2D,EAAyBxD,GACvC,IAAMC,EAAwC,QAA5BD,EAAoC,KAAsC,KAC5F4C,EAA0B1C,iBACxB,eACA,WACE0C,EAA0B/C,aAAa,YAAa,SACpD+C,EAA0BzC,UAAUC,OAAOH,EAC7C,EACA,CAAEI,MAAM,IAEVuC,EAA0BzC,UAAUG,IAAIL,EAC1C,CAEO,SAAS6D,KACdrD,EAAAA,EAAAA,GAAgB,wBAChBoD,EAAyB,OACzBN,KACA3C,EAAAA,EAAAA,IACF,CA0BC,SAAA8C,IAAA,OAAAA,GAAAtG,EAAAA,EAAAA,GAlBM,aACLmC,EAAAA,EAAAA,GAAc,gBAAiB,OAC/B,IAAMwE,EAAWd,EAAqB1F,MAChCyG,EAAkBZ,EAA2B7F,MACnD,IAAK0G,EAAAA,EAAAA,GAAWF,GAOhB,OAFAG,EAAAA,EAAAA,GAAwBH,UACEI,EAAAA,EAAAA,GAA2BH,SAEnDzE,EAAAA,EAAAA,GAAc,eAAgB,aAG9BA,EAAAA,EAAAA,GAAc,QAAS,SAVvBA,EAAAA,EAAAA,GAAc,QAAS,SAa3B,IAACrC,MAAA,KAAAC,UAAA,C,iGC7FKiH,GAAcjI,EAAAA,EAAAA,GAAsB,OACpCkI,GAAoBhI,EAAAA,EAAAA,GAAqB+H,EAAa,OAOrD,SAASE,EAAWtE,GACzB,IAAMC,EAAwC,QAA5BD,EAAoC,KAAqC,KAC3FoE,EAAYlE,iBACV,eACA,WACEkE,EAAYjE,UAAUC,OAAOH,EAC/B,EACA,CAAEI,MAAM,IAEV+D,EAAYjE,UAAUG,IAAIL,GAC1BmE,EAAYvE,aAAa,YAAa,OACxC,CAEO,SAAS0E,EAAWvE,GACzB,IAAMC,EAAwC,QAA5BD,EAAoC,KAAsC,KAC5FoE,EAAYlE,iBACV,eACA,WACEkE,EAAYvE,aAAa,YAAa,SACtCuE,EAAYjE,UAAUC,OAAOH,EAC/B,EACA,CAAEI,MAAM,IAEV+D,EAAYjE,UAAUG,IAAIL,EAC5B,CAEO,SAASuE,EAAWC,IACzBhE,EAAAA,EAAAA,GAAgB,UAChB6D,EAAW,OAjCN,SAA+BG,GACpC,IAAMC,GAAMC,EAAAA,EAAAA,GAAyBF,EAAM,IAAK,GAAK,GAAK,EAAG,WAA0B,GACvFJ,EAAkBpC,UAAYyC,CAChC,CA+BEE,CAAsBH,IACtB7D,EAAAA,EAAAA,IACF,CAEO,SAASiE,IACdN,EAAW,QACX1D,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,GAAkB,SACpB,C,+IC1CMgE,GAA+B3I,EAAAA,EAAAA,GAAsB,OACrD4I,GAAqC1I,EAAAA,EAAAA,GAAqByI,EAA8B,OACxFE,GAAgC3I,EAAAA,EAAAA,GAAqB0I,EAAoC,OACzFtI,GAAmBJ,EAAAA,EAAAA,GAAqB2I,EAA+B,wCACvEtI,GAAwBL,EAAAA,EAAAA,GAAqB2I,EAA+B,8CAC5ErI,GAAsBN,EAAAA,EAAAA,GAAqB2I,EAA+B,4CAC1EpI,GAAsBP,EAAAA,EAAAA,GAAqB2I,EAA+B,kCAC1EnI,GAAcC,EAAAA,EAAAA,GAAwBF,EAAqB,OAE1D,SAAeqI,IAAgC,OAAAC,EAAAhI,MAAC,KAADC,UAAA,CA+BrD,SAAA+H,IAAA,OAAAA,GAAA9H,EAAAA,EAAAA,GA/BM,YAaL,IAZA,IAAME,EAAOb,EAAiBc,MACxBC,EAAYd,EAAsBa,MAClCE,EAAUd,EAAoBY,MAEpCG,EAAmCC,OAAOH,GACvCI,MAAM,KACNC,IAAI,SAACC,GAAC,OAAKC,SAASD,EAAE,GAACE,GAAAC,EAAAA,EAAAA,GAAAP,EAAA,GAFnBQ,EAAUF,EAAA,GAAEG,EAAYH,EAAA,GAG/BI,EAA+BT,OAAOF,GACnCG,MAAM,KACNC,IAAI,SAACC,GAAC,OAAKC,SAASD,EAAE,GAACO,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAFnBE,EAAQD,EAAA,GAAEE,EAAUF,EAAA,GAIvBG,EAAO,GACFC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMC,EAAiB7B,EAAY4B,GAC7BE,EAAcD,EAAeE,aAAa,eAC1CC,EAAMd,SAASW,EAAeE,aAAa,QAC7B,SAAhBD,GACFH,EAAKM,KAAKD,EAEd,QAEuBsG,EAAAA,EAAAA,GAAuB7H,EAAMY,EAAYC,EAAcG,EAAUC,EAAYC,KAElG4G,KACA7F,EAAAA,EAAAA,GAAc,oBAAqB,aAEnCE,EAAAA,EAAAA,OAEAF,EAAAA,EAAAA,GAAc,QAAS,YAE3B,IAACrC,MAAA,KAAAC,UAAA,CAEM,SAASkI,EAA4BrF,GAC1C,IAAMC,EAAwC,QAA5BD,EAAoC,KAAqC,KAC3F8E,EAA6B5E,iBAC3B,eACA,WACE4E,EAA6B3E,UAAUC,OAAOH,EAChD,EACA,CAAEI,MAAM,IAEVyE,EAA6B3E,UAAUG,IAAIL,GAC3C6E,EAA6BjF,aAAa,YAAa,OACzD,CAEO,SAASyF,EAA4BtF,GAC1C,IAAMC,EAAwC,QAA5BD,EAAoC,KAAsC,KAC5F8E,EAA6B5E,iBAC3B,eACA,WACE4E,EAA6BjF,aAAa,YAAa,SACvDiF,EAA6B3E,UAAUC,OAAOH,EAChD,EACA,CAAEI,MAAM,IAEVyE,EAA6B3E,UAAUG,IAAIL,EAC7C,CAEO,SAASsF,KACd9E,EAAAA,EAAAA,GAAgB,2BAChB4E,EAA4B,QAC5BzE,EAAAA,EAAAA,IACF,CAEO,SAASwE,IACdE,EAA4B,QAC5BzE,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,GAAkB,0BACpB,CAEO,SAAS0E,EAAiC3G,GAC/C,IAAMH,GAAiBrC,EAAAA,EAAAA,GAAqBO,EAAqB,YAA2CiC,OAExF,SADAH,EAAeE,aAAa,eAE9CF,EAAemB,aAAa,cAAe,SAE3CnB,EAAemB,aAAa,cAAe,OAE/C,C,uGCpFO,SAASN,EAAckG,EAAuBC,EAAiBC,GACpE,IAAMC,GAAoBC,EAAAA,EAAAA,GAAyB,OACnD,GAA0B,OAAtBD,EACF,IAAK,IAAME,KAAiBF,EAC1BE,EAAc1F,SAIlB,IAAM2F,GAAoBC,EAAAA,EAAAA,GAAsB,qBAE1CF,GAAgBxE,EAAAA,EAAAA,KACtBwE,EAAc3F,UAAUG,IAAI,MAC5BwF,EAAcjG,aAAa,aAAaoG,EAAAA,EAAAA,GAAgBF,IAExD,IAAMG,GAAoB5E,EAAAA,EAAAA,KAC1B4E,EAAkB/F,UAAUG,IAAI,MAChC4F,EAAkBxE,aAAYK,EAAAA,EAAAA,GAAe0D,IAC7CK,EAAcpE,YAAYwE,GAE1B,IAAMC,GAAuB7E,EAAAA,EAAAA,KAK7B,GAJA6E,EAAqBhG,UAAUG,IAAI,MACnC6F,EAAqB1E,UAAYiE,EACjCI,EAAcpE,YAAYyE,GAEJ,YAAlBC,EAAAA,EAAAA,GAAOT,IAAPS,MAA8BT,GACF,mBAAnBA,aAAM,EAANA,EAAQU,QAAuB,CACxC,IAAMC,GAAsBhF,EAAAA,EAAAA,KAC5BgF,EAAoBnG,UAAUG,IAAI,MAClCgG,EAAoB7E,UAAYkE,EAAOlB,KACvC6B,EAAoBpG,iBAClB,QACA,WACEyF,EAAOU,QACT,EACA,CAAEhG,MAAM,IAEVyF,EAAcpE,YAAY4E,GAC1BR,EAAcjG,aAAa,SAAU,OACvC,CAGFiG,EAAc5F,iBACZ,eACA,SAAUqG,GACJA,SAAAA,EAAOC,QACTD,EAAMC,OAAOpG,QAEjB,EACA,CAAEC,MAAM,IAGVwB,SAAS4E,KAAK/E,YAAYoE,EAC5B,C","sources":["webpack://bus/./src/interface/personal-schedule-editor/index.ts","webpack://bus/./src/interface/personal-schedule-manager/index.ts","webpack://bus/./src/interface/register-notification/index.ts","webpack://bus/./src/interface/qrcode/index.ts","webpack://bus/./src/interface/personal-schedule-creator/index.ts","webpack://bus/./src/interface/prompt/index.ts"],"sourcesContent":["import { getPersonalSchedule, updatePersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { timeObjectToString, WeekDayIndex } from '../../tools/time';\nimport { hidePreviousPage, PageTransitionDirection, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { initializePersonalScheduleManagerField } from '../personal-schedule-manager/index';\nimport { promptMessage } from '../prompt/index';\n\nconst PersonalScheduleEditorField = documentQuerySelector('.css_personal_schedule_editor_field');\nconst PersonalScheduleEditorBodyElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_body');\nconst PersonalScheduleEditorHeadElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_head');\nconst leftButtonElement = elementQuerySelector(PersonalScheduleEditorHeadElement, '.css_personal_schedule_editor_button_left');\nconst PersonalScheduleEditorGroups = elementQuerySelector(PersonalScheduleEditorBodyElement, '.css_personal_schedule_editor_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-name\"] .css_personal_schedule_editor_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-start-time\"] .css_personal_schedule_editor_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-end-time\"] .css_personal_schedule_editor_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-days\"] .css_personal_schedule_editor_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_editor_day');\n\nexport async function saveEditedPersonalSchedule(personalScheduleID: string) {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  let personalSchedule = await getPersonalSchedule(personalScheduleID);\n  personalSchedule.name = name;\n  personalSchedule.days = days;\n  personalSchedule.period.start.hours = startHours;\n  personalSchedule.period.start.minutes = startMinutes;\n  personalSchedule.period.end.hours = endHours;\n  personalSchedule.period.end.minutes = endMinutes;\n\n  await updatePersonalSchedule(personalSchedule);\n  promptMessage('check_circle', '已儲存變更');\n  closePersonalScheduleEditor();\n  // callback\n  initializePersonalScheduleManagerField();\n}\n\nasync function initializePersonalScheduleEditorField(personalScheduleID: string) {\n  const personalSchedule = await getPersonalSchedule(personalScheduleID);\n  nameInputElement.value = personalSchedule.name;\n  startTimeInputElement.value = timeObjectToString(personalSchedule.period.start);\n  endTimeInputElement.value = timeObjectToString(personalSchedule.period.end);\n\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    if (personalSchedule.days.indexOf(i) > -1) {\n      thisDayElement.setAttribute('highlighted', 'true');\n    } else {\n      thisDayElement.setAttribute('highlighted', 'false');\n    }\n  }\n  leftButtonElement.onclick = function () {\n    saveEditedPersonalSchedule(personalScheduleID);\n  };\n}\n\nexport function showPersonalScheduleEditor(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_in_ltr' : 'css_page_transition_slide_in_rtl';\n  PersonalScheduleEditorField.addEventListener(\n    'animationend',\n    function () {\n      PersonalScheduleEditorField.classList.remove(className);\n    },\n    { once: true }\n  );\n  PersonalScheduleEditorField.classList.add(className);\n  PersonalScheduleEditorField.setAttribute('displayed', 'true');\n}\n\nexport function hidePersonalScheduleEditor(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_out_ltr' : 'css_page_transition_slide_out_rtl';\n  PersonalScheduleEditorField.addEventListener(\n    'animationend',\n    function () {\n      PersonalScheduleEditorField.setAttribute('displayed', 'false');\n      PersonalScheduleEditorField.classList.remove(className);\n    },\n    { once: true }\n  );\n  PersonalScheduleEditorField.classList.add(className);\n}\n\nexport function openPersonalScheduleEditor(personalScheduleID: string): void {\n  pushPageHistory('PersonalScheduleEditor');\n  showPersonalScheduleEditor('rtl');\n  initializePersonalScheduleEditorField(personalScheduleID);\n  hidePreviousPage();\n}\n\nexport function closePersonalScheduleEditor(): void {\n  hidePersonalScheduleEditor('ltr');\n  showPreviousPage();\n  revokePageHistory('PersonalScheduleEditor');\n}\n\nexport function switchPersonalScheduleEditorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_editor_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { listPersonalSchedules, PersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, PageTransitionDirection, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { openPersonalScheduleEditor } from '../personal-schedule-editor/index';\n\nconst PersonalScheduleManagerField = documentQuerySelector('.css_personal_schedule_manager_field');\nconst PersonalScheduleManagerBodyElement = elementQuerySelector(PersonalScheduleManagerField, '.css_personal_schedule_manager_body');\nconst ListElement = elementQuerySelector(PersonalScheduleManagerBodyElement, '.css_personal_schedule_manager_list');\n\nfunction generateElementOfItem(item: PersonalSchedule): HTMLElement {\n  // Main item element\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_personal_schedule_manager_item');\n  itemElement.onclick = function () {\n    openPersonalScheduleEditor(item.id);\n  };\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_personal_schedule_manager_item_name');\n  nameElement.innerText = item.name;\n  itemElement.appendChild(nameElement);\n\n  // Arrow element\n  const arrowElement = documentCreateDivElement();\n  arrowElement.classList.add('css_personal_schedule_manager_item_arrow');\n  const iconElement = document.createElement('span');\n  iconElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(iconElement);\n  itemElement.appendChild(arrowElement);\n\n  return itemElement;\n}\n\nexport async function initializePersonalScheduleManagerField() {\n  ListElement.innerHTML = '';\n  const personalSchedules = await listPersonalSchedules();\n  const fragment = new DocumentFragment();\n  for (const item of personalSchedules) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement);\n  }\n  ListElement.append(fragment);\n}\n\nexport function showPersonalScheduleManager(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_in_ltr' : 'css_page_transition_slide_in_rtl';\n  PersonalScheduleManagerField.addEventListener(\n    'animationend',\n    function () {\n      PersonalScheduleManagerField.classList.remove(className);\n    },\n    { once: true }\n  );\n  PersonalScheduleManagerField.classList.add(className);\n  PersonalScheduleManagerField.setAttribute('displayed', 'true');\n}\n\nexport function hidePersonalScheduleManager(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_out_ltr' : 'css_page_transition_slide_out_rtl';\n  PersonalScheduleManagerField.addEventListener(\n    'animationend',\n    function () {\n      PersonalScheduleManagerField.setAttribute('displayed', 'false');\n      PersonalScheduleManagerField.classList.remove(className);\n    },\n    { once: true }\n  );\n  PersonalScheduleManagerField.classList.add(className);\n}\n\nexport function openPersonalScheduleManager(): void {\n  pushPageHistory('PersonalScheduleManager');\n  showPersonalScheduleManager('rtl');\n  initializePersonalScheduleManagerField();\n  hidePreviousPage();\n}\n\nexport function closePersonalScheduleManager(): void {\n  hidePersonalScheduleManager('ltr');\n  showPreviousPage();\n  revokePageHistory('PersonalScheduleManager');\n}\n","import { registerNotificationClient } from '../../data/notification/apis/registerNotificationClient/index';\nimport { getNotificationProvider, setNotificationProvider } from '../../data/notification/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { isValidURL } from '../../tools/index';\nimport { hidePreviousPage, PageTransitionDirection, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\nimport { initializeSettingsField } from '../settings/index';\n\nconst RegisterNotificationField = documentQuerySelector('.css_register_notification_field');\nconst bodyElement = elementQuerySelector(RegisterNotificationField, '.css_register_notification_body');\n\nconst groupsElement = elementQuerySelector(bodyElement, '.css_register_notification_groups');\n\nconst providerGroupElement = elementQuerySelector(groupsElement, '.css_register_notification_group[group=\"provider\"]');\nconst providerGroupBodyElement = elementQuerySelector(providerGroupElement, '.css_register_notification_group_body');\nconst providerInputElement = elementQuerySelector(providerGroupBodyElement, 'input');\n\nconst rgistrationKeyGroupElement = elementQuerySelector(groupsElement, '.css_register_notification_group[group=\"registration-key\"]');\nconst rgistrationKeyGroupBodyElement = elementQuerySelector(rgistrationKeyGroupElement, '.css_register_notification_group_body');\nconst rgistrationKeyInputElement = elementQuerySelector(rgistrationKeyGroupBodyElement, 'input');\n\nconst headElement = elementQuerySelector(RegisterNotificationField, '.css_register_notification_head');\nconst leftButtonElement = elementQuerySelector(headElement, '.css_register_notification_button_left');\nconst rightButtonElement = elementQuerySelector(headElement, '.css_register_notification_button_right');\n\nfunction initializeRegisterNotificationField() {\n  leftButtonElement.onclick = function () {\n    closeRegisterNotification();\n    // callback\n    initializeSettingsField();\n  };\n\n  rightButtonElement.onclick = function () {\n    saveFormulatedRegisterNotification();\n  };\n\n  providerInputElement.value = getNotificationProvider();\n  rgistrationKeyInputElement.value = '';\n}\n\nexport function showRegisterNotification(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_in_ltr' : 'css_page_transition_slide_in_rtl';\n  RegisterNotificationField.addEventListener(\n    'animationend',\n    function () {\n      RegisterNotificationField.classList.remove(className);\n    },\n    { once: true }\n  );\n  RegisterNotificationField.classList.add(className);\n  RegisterNotificationField.setAttribute('displayed', 'true');\n}\n\nexport function hideRegisterNotification(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_out_ltr' : 'css_page_transition_slide_out_rtl';\n  RegisterNotificationField.addEventListener(\n    'animationend',\n    function () {\n      RegisterNotificationField.setAttribute('displayed', 'false');\n      RegisterNotificationField.classList.remove(className);\n    },\n    { once: true }\n  );\n  RegisterNotificationField.classList.add(className);\n}\n\nexport function openRegisterNotification(): void {\n  pushPageHistory('RegisterNotification');\n  showRegisterNotification('rtl');\n  initializeRegisterNotificationField();\n  hidePreviousPage();\n}\n\nexport function closeRegisterNotification(): void {\n  hideRegisterNotification('ltr');\n  showPreviousPage();\n  revokePageHistory('RegisterNotification');\n}\n\nexport async function saveFormulatedRegisterNotification() {\n  promptMessage('manufacturing', '處理中');\n  const provider = providerInputElement.value;\n  const registrationKey = rgistrationKeyInputElement.value;\n  if (!isValidURL(provider)) {\n    promptMessage('error', '無效的提供者');\n    return;\n  }\n  // register\n  setNotificationProvider(provider);\n  const registering = await registerNotificationClient(registrationKey);\n  if (registering) {\n    promptMessage('check_circle', '註冊成功');\n    return;\n  } else {\n    promptMessage('error', '註冊失敗');\n    return;\n  }\n}\n","import { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateRoundedQRCodeSVG } from '../../tools/qrcode';\nimport { hidePreviousPage, PageTransitionDirection, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\n\nconst QRCodeField = documentQuerySelector('.css_qrcode_field');\nconst QRCodeBodyElement = elementQuerySelector(QRCodeField, '.css_qrcode_body');\n\nexport function initializeQRCodeField(text: string): void {\n  const svg = generateRoundedQRCodeSVG(text, 'M', 0.5, 0.3, 1, 'var(--b-cssvar-333333)', 4);\n  QRCodeBodyElement.innerHTML = svg;\n}\n\nexport function showQRCode(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_in_ltr' : 'css_page_transition_slide_in_rtl';\n  QRCodeField.addEventListener(\n    'animationend',\n    function () {\n      QRCodeField.classList.remove(className);\n    },\n    { once: true }\n  );\n  QRCodeField.classList.add(className);\n  QRCodeField.setAttribute('displayed', 'true');\n}\n\nexport function hideQRCode(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_out_ltr' : 'css_page_transition_slide_out_rtl';\n  QRCodeField.addEventListener(\n    'animationend',\n    function () {\n      QRCodeField.setAttribute('displayed', 'false');\n      QRCodeField.classList.remove(className);\n    },\n    { once: true }\n  );\n  QRCodeField.classList.add(className);\n}\n\nexport function openQRCode(text: string): void {\n  pushPageHistory('QRCode');\n  showQRCode('rtl');\n  initializeQRCodeField(text);\n  hidePreviousPage();\n}\n\nexport function closeQRCode(): void {\n  hideQRCode('ltr');\n  showPreviousPage();\n  revokePageHistory('QRCode');\n}\n","import { createPersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { WeekDayIndex } from '../../tools/time';\nimport { hidePreviousPage, PageTransitionDirection, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { initializePersonalScheduleManagerField } from '../personal-schedule-manager/index';\nimport { promptMessage } from '../prompt/index';\n\nconst PersonalScheduleCreatorField = documentQuerySelector('.css_personal_schedule_creator_field');\nconst PersonalScheduleCreatorBodyElement = elementQuerySelector(PersonalScheduleCreatorField, '.css_personal_schedule_creator_body');\nconst PersonalScheduleCreatorGroups = elementQuerySelector(PersonalScheduleCreatorBodyElement, '.css_personal_schedule_creator_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-name\"] .css_personal_schedule_creator_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-start-time\"] .css_personal_schedule_creator_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-end-time\"] .css_personal_schedule_creator_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-days\"] .css_personal_schedule_creator_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_creator_day');\n\nexport async function createFormulatedPersonalSchedule(): void {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  const creation = await createPersonalSchedule(name, startHours, startMinutes, endHours, endMinutes, days);\n  if (creation) {\n    closePersonalScheduleCreator();\n    promptMessage('calendar_view_day', '已建立個人化行程');\n    // callback\n    initializePersonalScheduleManagerField();\n  } else {\n    promptMessage('error', '無法建立個人化行程');\n  }\n}\n\nexport function showPersonalScheduleCreator(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_in_ltr' : 'css_page_transition_slide_in_rtl';\n  PersonalScheduleCreatorField.addEventListener(\n    'animationend',\n    function () {\n      PersonalScheduleCreatorField.classList.remove(className);\n    },\n    { once: true }\n  );\n  PersonalScheduleCreatorField.classList.add(className);\n  PersonalScheduleCreatorField.setAttribute('displayed', 'true');\n}\n\nexport function hidePersonalScheduleCreator(pageTransitionDirection: PageTransitionDirection): void {\n  const className = pageTransitionDirection === 'ltr' ? 'css_page_transition_slide_out_ltr' : 'css_page_transition_slide_out_rtl';\n  PersonalScheduleCreatorField.addEventListener(\n    'animationend',\n    function () {\n      PersonalScheduleCreatorField.setAttribute('displayed', 'false');\n      PersonalScheduleCreatorField.classList.remove(className);\n    },\n    { once: true }\n  );\n  PersonalScheduleCreatorField.classList.add(className);\n}\n\nexport function openPersonalScheduleCreator(): void {\n  pushPageHistory('PersonalScheduleCreator');\n  showPersonalScheduleCreator('rtl');\n  hidePreviousPage();\n}\n\nexport function closePersonalScheduleCreator(): void {\n  hidePersonalScheduleCreator('ltr');\n  showPreviousPage();\n  revokePageHistory('PersonalScheduleCreator');\n}\n\nexport function switchPersonalScheduleCreatorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_creator_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { getSettingOptionValue } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\n\nexport interface PromptButton {\n  text: string;\n  action: Function;\n}\n\nexport function promptMessage(icon: MaterialSymbols, message: string, button?: PromptButton | null): void {\n  const allPromptElements = documentQuerySelectorAll('.css_prompt');\n  if (allPromptElements !== null) {\n    for (const promptElement of allPromptElements) {\n      promptElement.remove();\n    }\n  }\n\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n\n  const promptElement = documentCreateDivElement();\n  promptElement.classList.add('css_prompt');\n  promptElement.setAttribute('animation', booleanToString(playing_animation));\n\n  const promptIconElement = documentCreateDivElement();\n  promptIconElement.classList.add('css_prompt_icon');\n  promptIconElement.appendChild(getIconElement(icon));\n  promptElement.appendChild(promptIconElement);\n\n  const promptMessageElement = documentCreateDivElement();\n  promptMessageElement.classList.add('css_prompt_message');\n  promptMessageElement.innerText = message;\n  promptElement.appendChild(promptMessageElement);\n\n  if (typeof button === 'object' && button !== null && button !== undefined) {\n    if (typeof button?.action === 'function') {\n      const promptButtonElement = documentCreateDivElement();\n      promptButtonElement.classList.add('css_prompt_button');\n      promptButtonElement.innerText = button.text;\n      promptButtonElement.addEventListener(\n        'click',\n        function () {\n          button.action();\n        },\n        { once: true }\n      );\n      promptElement.appendChild(promptButtonElement);\n      promptElement.setAttribute('button', 'true');\n    }\n  }\n\n  promptElement.addEventListener(\n    'animationend',\n    function (event) {\n      if (event?.target) {\n        event.target.remove();\n      }\n    },\n    { once: true }\n  );\n\n  document.body.appendChild(promptElement);\n}\n"],"names":["PersonalScheduleEditorField","documentQuerySelector","PersonalScheduleEditorBodyElement","elementQuerySelector","PersonalScheduleEditorHeadElement","leftButtonElement","PersonalScheduleEditorGroups","nameInputElement","startTimeInputElement","endTimeInputElement","dayGroupBodyElement","dayElements","elementQuerySelectorAll","saveEditedPersonalSchedule","_x","_saveEditedPersonalSchedule","apply","arguments","_asyncToGenerator","personalScheduleID","name","value","startTime","endTime","_String$split$map","String","split","map","e","parseInt","_String$split$map2","_slicedToArray","startHours","startMinutes","_String$split$map3","_String$split$map4","endHours","endMinutes","days","i","thisDayElement","highlighted","getAttribute","day","push","personalSchedule","getPersonalSchedule","period","start","hours","minutes","end","updatePersonalSchedule","promptMessage","closePersonalScheduleEditor","initializePersonalScheduleManagerField","_initializePersonalScheduleEditorField","timeObjectToString","indexOf","setAttribute","onclick","showPersonalScheduleEditor","pageTransitionDirection","className","addEventListener","classList","remove","once","add","hidePersonalScheduleEditor","openPersonalScheduleEditor","pushPageHistory","_x2","initializePersonalScheduleEditorField","hidePreviousPage","showPreviousPage","revokePageHistory","switchPersonalScheduleEditorDay","PersonalScheduleManagerField","PersonalScheduleManagerBodyElement","ListElement","generateElementOfItem","item","itemElement","documentCreateDivElement","id","nameElement","innerText","appendChild","arrowElement","iconElement","document","createElement","getIconElement","_initializePersonalScheduleManagerField","innerHTML","personalSchedules","listPersonalSchedules","fragment","DocumentFragment","thisElement","append","showPersonalScheduleManager","hidePersonalScheduleManager","openPersonalScheduleManager","closePersonalScheduleManager","RegisterNotificationField","bodyElement","groupsElement","providerGroupElement","providerGroupBodyElement","providerInputElement","rgistrationKeyGroupElement","rgistrationKeyGroupBodyElement","rgistrationKeyInputElement","headElement","rightButtonElement","initializeRegisterNotificationField","hideRegisterNotification","initializeSettingsField","_saveFormulatedRegisterNotification","saveFormulatedRegisterNotification","getNotificationProvider","showRegisterNotification","openRegisterNotification","provider","registrationKey","isValidURL","setNotificationProvider","registerNotificationClient","QRCodeField","QRCodeBodyElement","showQRCode","hideQRCode","openQRCode","text","svg","generateRoundedQRCodeSVG","initializeQRCodeField","closeQRCode","PersonalScheduleCreatorField","PersonalScheduleCreatorBodyElement","PersonalScheduleCreatorGroups","createFormulatedPersonalSchedule","_createFormulatedPersonalSchedule","createPersonalSchedule","closePersonalScheduleCreator","showPersonalScheduleCreator","hidePersonalScheduleCreator","openPersonalScheduleCreator","switchPersonalScheduleCreatorDay","icon","message","button","allPromptElements","documentQuerySelectorAll","promptElement","playing_animation","getSettingOptionValue","booleanToString","promptIconElement","promptMessageElement","_typeof","action","promptButtonElement","event","target","body"],"ignoreList":[],"sourceRoot":""}