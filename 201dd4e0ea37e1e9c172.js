"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[601],{540(e,t,a){a.d(t,{a:()=>M,b:()=>_});var n=a(467),i=a(5767),r=a(9566),s=a(3459),c=a(8179),o=a(8024),d=a(9915),u=a(4537),l=a(904),b=a(3030),f=a(9119),p=a(4690),h=(0,c.c)(".sa"),v=(0,c.e)(h,".ya"),m=(0,c.e)(h,".hb"),k=(0,c.e)(m,".wb"),g=(0,c.e)(v,".db .eb"),y={},w=!1,L=!1,C=new d.a(function(){return E.apply(this,arguments)},15e3);function A(){var e=(0,c.a)();e.classList.add("cc"),e.setAttribute("type","stop");var t=(0,c.a)();t.classList.add("dc"),t.appendChild((0,u.b)("location_on"));var a=(0,c.a)();a.classList.add("ec");var n=(0,c.a)();n.classList.add("gc");var i=(0,c.a)();i.classList.add("hc");var r=(0,c.a)();r.classList.add("lc");var s=(0,c.a)();s.classList.add("mc"),s.setAttribute("code","0"),s.setAttribute("displayed","false");var o=(0,c.a)();o.classList.add("nc"),o.setAttribute("code","0"),o.setAttribute("displayed","true"),r.appendChild(s),r.appendChild(o);var d=(0,c.a)();d.classList.add("ic"),d.appendChild((0,u.b)("keyboard_arrow_right"));var l=(0,c.a)();return l.classList.add("jc"),i.appendChild(r),i.appendChild(d),i.appendChild(l),e.appendChild(t),e.appendChild(a),e.appendChild(n),e.appendChild(i),e}function S(){var e=(0,c.a)();e.classList.add("xb");var t=(0,c.a)();t.classList.add("zb");var a=(0,c.a)();a.classList.add("_b"),a.appendChild((0,u.a)());var n=(0,c.a)();n.classList.add("ac"),t.appendChild(a),t.appendChild(n);var i=(0,c.a)();return i.classList.add("bc"),e.appendChild(t),e.appendChild(i),e}function x(e){g.style.setProperty("--xa",`${e}ms`),g.classList.add("gb")}function T(e){var t=e,a=t.detail.progress-1;g.style.setProperty("--wa",a.toString()),"end"===t.detail.stage&&document.removeEventListener(t.detail.target,T)}function _(){for(var e=(0,s.b)("playing_animation"),t=(0,l.d)("window"),a=(t.width,t.height),n=Math.floor(a/50/3)+2,i=[],r=0;r<3;r++){for(var c={name:"",icon:"",id:"",timestamp:0,content:[],contentLength:n},o=0;o<n;o++){c.content.push({type:"stop",id:0,timestamp:0,name:"",status:{code:8,text:"",time:-6},direction:0,route:{name:"",endPoints:{departure:"",destination:""},id:0,pathAttributeId:[]}})}i.push(c)}P({folders:i,dataUpdateTime:0},!0,e)}function P(e,t,a){function n(e,n,i){function r(e,t){e.setAttribute("type",t.type)}function s(e,t){var a=(0,c.e)(e,".dc"),n="";switch(t.type){case"stop":case"location":n="location_on";break;case"route":n="route";break;case"bus":n="directions_bus";break;case"empty":n="lightbulb";break;default:n=""}(0,u.c)(a,n)}function d(e,t,a){if("stop"===t.type){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,o=n.right,d=window.innerWidth,u=window.innerHeight,l=(0,c.e)(e,".hc .lc"),b=(0,c.e)(l,".mc"),f=(0,c.e)(l,".nc");b.setAttribute("code",t.status.code.toString()),b.innerText=t.status.text,a&&s>0&&i<u&&o>0&&r<d?(f.addEventListener("animationend",function(){f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,f.classList.remove("pc"),b.setAttribute("displayed","false")},{once:!0}),b.setAttribute("displayed","true"),f.classList.add("pc")):(f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text)}}function l(e,t){var a="";switch(t.type){case"stop":case"route":case"location":a=t.name;break;case"bus":a=t.busID;break;case"empty":a="沒有內容";break;default:a="null"}(0,c.e)(e,".gc").innerText=a}function f(e,t){var a="";switch(t.type){case"stop":a=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`;break;case"route":a=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`;break;case"location":a="地點";break;case"bus":break;case"empty":a="提示";break;default:a="null"}(0,c.e)(e,".ec").innerText=a}function h(e,t){var a=(0,c.e)(e,".hc .ic");switch(t.type){case"stop":a.onclick=function(){(0,p.d)(t.route.id,t.route.pathAttributeId)};break;case"route":a.onclick=function(){(0,p.d)(t.id,t.pathAttributeId)};break;case"location":a.onclick=function(){(0,b.d)(t.id)}}}function v(e,t){e.setAttribute("animation",(0,o.a)(t))}function m(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}if(null==i)r(e,n),s(e,n),d(e,n,a),l(e,n),f(e,n),h(e,n),v(e,a),m(e,t);else if(n.type!==i.type)r(e,n),s(e,n),d(e,n,a),l(e,n),f(e,n),h(e,n),v(e,a),m(e,t);else{switch(n.type){case"stop":(0,o.b)(i.route,n.route)||(f(e,n),h(e,n)),i.name!==n.name&&l(e,n),i.status.time!==n.status.time&&d(e,n,a);break;case"route":i.id!==n.id&&h(e,n),(0,o.b)(i.endPoints,n.endPoints)||f(e,n),i.name!==n.name&&l(e,n);break;case"location":i.id!==n.id&&h(e,n),i.name!==n.name&&l(e,n);break;case"bus":default:break;case"empty":n.type!==i.type&&(f(e,n),l(e,n))}t!==L&&m(e,t),a!==w&&v(e,a)}}function i(e,n,i){function r(e,t){var a=(0,c.e)(e,".zb");(0,c.e)(a,".ac").innerText=t.name}function s(e,t){var a=(0,c.e)(e,".zb"),n=(0,c.e)(a,"._b");(0,u.c)(n,t.icon)}function d(e,t){e.setAttribute("animation",(0,o.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==i?(r(e,n),s(e,n),d(e,a),l(e,t)):(n.name!==i.name&&r(e,n),n.icon!==i.icon&&s(e,n),a!==w&&d(e,a),t!==L&&l(e,t))}var r=e.folders,s=r.length,d=Array.from((0,c.d)(k,".xb")),l=d.length;if(s!==l){var f=l-s;if(f<0){for(var h=new DocumentFragment,v=0;v>f;v--){var m=S();h.appendChild(m),d.push(m)}k.append(h)}else if(f>0)for(var g=l-1,C=l-f-1;g>C;g--)d[g].remove(),d.splice(g,1)}for(var x=0;x<s;x++){var T=r[x],_=T.content,P=_.length,E=d[x],M=(0,c.e)(E,".bc"),D=Array.from((0,c.d)(M,".cc")),I=D.length;if(P!==I){var F=I-P;if(F<0)for(var R=0;R>F;R--){var H=A();M.appendChild(H),D.push(H)}else if(F>0)for(var $=I-1,N=I-F-1;$>N;$--)D[$].remove(),D.splice($,1)}if((0,o.f)(y,"folders"))if(y.folders[x])i(E,T,y.folders[x]);else i(E,T,null);else i(E,T,null);for(var U=0;U<P;U++){var Q=D[U],j=_[U];if((0,o.f)(y,"folders"))if(y.folders[x])if(y.folders[x].content[U])n(Q,j,y.folders[x].content[U]);else n(Q,j,null);else n(Q,j,null);else n(Q,j,null)}}y=e,w=a,L=t}function E(){return(E=(0,n.a)(function*(){try{var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval"),a=(0,o.c)();g.setAttribute("refreshing","true"),g.classList.remove("gb"),document.addEventListener(a,T);var n=yield(0,r.d)(a);P(n,!1,e);var c=0;t.dynamic&&(c=yield(0,i.c)());var d=(new Date).getTime(),u=0;u=t.dynamic?Math.max(d+5e3,n.dataUpdateTime+t.baseInterval/c):d+t.baseInterval;var l=Math.max(5e3,u-d);return g.setAttribute("refreshing","false"),x(l),l}catch(e){console.log(3,e);var b=1e4;return(0,f.a)("error","資料夾發生錯誤，將在10秒後重試。"),x(b),b}})).apply(this,arguments)}function M(){C.isPaused?C.resume(!0):C.tick()}},904(e,t,a){a.d(t,{a:()=>$,b:()=>F,c:()=>D,d:()=>U,e:()=>I,f:()=>Q,g:()=>H,h:()=>N,i:()=>R});var n=a(8179),i=a(8024),r=a(4884),s=a(9499),c=a(6052),o=a(9333),d=a(8379),u=a(6082),l=a(4294),b=a(1351),f=a(3030),p=a(2174),h=a(8380),v=a(5693),m=a(7891),k=a(8279),g=a(7908),y=a(5286),w=a(4690),L=a(3041),C=a(752),A=a(5009),S=a(6104),x=a(6166),T=a(2994),_=(0,n.c)(".ja"),P=(0,n.c)(".oa"),E=(new Date).getTime(),M=["Home"];function D(e){var t=M.length;M[t-1]!==e&&M.push(e)}function I(e){var t=M.length;t>1&&M[t-1]===e&&M.pop()}function F(){var e=M.length;if(e>1)switch(M[e-2]){case"Home":(0,u.c)();break;case"FolderCreator":(0,c.b)();break;case"FolderEditor":(0,o.a)();break;case"IconSelector":(0,l.b)();break;case"FolderManager":(0,d.b)();break;case"Location":(0,f.b)();break;case"LocationDetails":(0,b.b)();break;case"Route":(0,w.b)();break;case"RouteDetails":(0,y.f)();break;case"SaveToFolder":(0,L.b)();break;case"Search":(0,A.b)();break;case"Settings":(0,S.c)();break;case"SettingsOptions":(0,x.b)();break;case"DataUsage":(0,s.b)();break;case"PersonalScheduleManager":(0,m.b)();break;case"PersonalScheduleCreator":(0,h.c)();break;case"PersonalScheduleEditor":(0,v.b)();break;case"Bus":(0,r.c)();break;case"RegisterNotification":(0,g.a)();break;case"ScheduleNotification":(0,C.b)();break;case"NotificationScheduleManager":(0,p.b)();break;case"QRCode":(0,k.b)();break;case"Storage":(0,T.b)()}}function R(){var e=M.length;if(e>1)switch(M[e-2]){case"Home":(0,u.d)();break;case"FolderCreator":(0,c.d)();break;case"FolderEditor":(0,o.c)();break;case"IconSelector":(0,l.e)();break;case"FolderManager":(0,d.d)();break;case"Location":(0,f.e)();break;case"LocationDetails":(0,b.e)();break;case"Route":(0,w.e)();break;case"RouteDetails":(0,y.h)();break;case"SaveToFolder":(0,L.d)();break;case"Search":(0,A.f)();break;case"Settings":(0,S.h)();break;case"SettingsOptions":(0,x.d)();break;case"DataUsage":(0,s.d)();break;case"PersonalScheduleManager":(0,m.e)();break;case"PersonalScheduleCreator":(0,h.e)();break;case"PersonalScheduleEditor":(0,v.e)();break;case"Bus":(0,r.e)();break;case"RegisterNotification":(0,g.c)();break;case"ScheduleNotification":(0,C.d)();break;case"NotificationScheduleManager":(0,p.d)();break;case"QRCode":(0,k.d)();break;case"Storage":(0,T.d)()}}function H(){var e=0;(0,i.g)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.c)(".ja svg.ka").style.setProperty("--la",`${e}px`)}function $(e){function t(){_.classList.add("ma"),_.addEventListener("animationend",function(){_.setAttribute("displayed","false"),_.classList.remove("ma"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-E<100?setTimeout(t,Math.max(1,a-E)):t()}function N(){P.setAttribute("displayed","true")}function U(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function Q(){window.scrollTo({top:0,behavior:"instant"})}},2547(){},4294(e,t,a){a.d(t,{a:()=>M,b:()=>P,c:()=>x,d:()=>E,e:()=>_});var n,i=a(467),r=a(9218),s=a(6788),c=a(972),o=a(3459),d=a(8179),u=a(8024),l=a(4781),b=a(4537),f=a(904),p=(0,d.c)(".qc"),h=(0,d.e)(p,".rc"),v=(0,d.e)(h,"#search_material_symbols_input"),m=(0,d.e)(p,".uc"),k=(0,d.e)(m,".vc"),g=[],y=[],w=!1,L=!1;function C(){var e=(0,d.a)();return e.classList.add("wc"),e.appendChild((0,b.a)()),e}function A(e,t,a,i){function r(e,r,s){function c(e,t){(0,b.c)(e,t)}function o(e,t,a){e.onclick=function(){!function(e,t){t.value=e,M()}(t,a)}}function d(e,t){e.setAttribute("skeleton-screen",(0,u.a)(t))}function l(e,t){e.setAttribute("animation",(0,u.a)(t))}null==s?(c(e,r),o(e,r,t),d(e,a),l(e,i)):(s!==r?(c(e,r),o(e,r,t)):n!==t&&o(e,r,t),L!==a&&d(e,a),w!==i&&l(e,i))}var s=e.length,c=Array.from((0,d.d)(k,".wc")),o=c.length;if(s!==o){var l=o-s;if(l<0){for(var f=new DocumentFragment,p=0;p>l;p--){var h=C();f.appendChild(h),c.push(h)}k.append(f)}else if(l>0)for(var v=o-1,m=o-l-1;v>m;v--)c[v].remove(),c.splice(v,1)}for(var g=0;g<s;g++){var A=y[g],S=e[g],x=c[g];r(x,S,A||null)}y=e.slice(),n=t,L=a,w=i}function S(){return(S=(0,i.a)(function*(e){var t=(0,o.b)("playing_animation"),a=(0,u.c)();v.value="",function(e){for(var t=(0,o.b)("playing_animation"),a=(0,f.d)("window"),n=Math.floor(a.width/50)*(Math.floor(a.height/50)+3),i=[],r=0;r<n;r++)i.push("");A(i,e,!0,t)}(e);var n=yield(0,r.a)(a);for(var i in g=[],n.symbols)g.push(i);A(g,e,!1,t),(0,c.a)(n),(0,s.a)(a)})).apply(this,arguments)}function x(){v.addEventListener("paste",function(){T()}),v.addEventListener("cut",function(){T()}),v.addEventListener("selectionchange",function(){T()}),document.addEventListener("selectionchange",function(){T()}),v.addEventListener("keyup",function(){T()})}function T(){var e=v.value;if(!(0,l.a)(e)){for(var t=(0,c.b)(e),a=t.length-1;a>=0;a--){var i=t[a].item,r=g.indexOf(i);if(g[a]&&!(r<0)){var s=[g[r],g[a]];g[a]=s[0],g[r]=s[1]}}A(g,n,!1,w)}}function _(){p.setAttribute("displayed","true")}function P(){p.setAttribute("displayed","false")}function E(e){(0,f.c)("IconSelector"),_(),function(e){S.apply(this,arguments)}(e),(0,f.b)()}function M(){P(),(0,f.i)(),(0,f.e)("IconSelector")}},4537(e,t,a){a.d(t,{a:()=>r,b:()=>i,c:()=>s});var n=a(8179);function i(e){var t=document.createElement("span");return t.classList.add("ra"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("ra"),e}function s(e,t){(0,n.e)(e,"span.ra").innerText=t}},4953(){},5259(){},5297(){},6082(e,t,a){a.d(t,{a:()=>l,b:()=>m,c:()=>y,d:()=>g});var n=a(467),i=a(9734),r=a(8011),s=a(9218),c=a(4293),o=a(6788),d=a(8179),u="downloadData",l=!1,b=(0,d.c)(".sa"),f=(0,d.e)(b,".ya"),p=(0,d.e)(f,".cb"),h=(0,d.e)(p,'svg#download-svg path[progress="progress"]');function v(e){var t=e,a=189*(1-(0,o.d)(u));h.style.setProperty("--ua",`${a}px`),"end"===t.detail.stage&&(document.removeEventListener(t.detail.target,v),p.setAttribute("complete","true"),h.style.setProperty("--ua","0px"),l=!0)}function m(){return k.apply(this,arguments)}function k(){return(k=(0,n.a)(function*(){(0,o.f)(u,"getRoute_0",0,!1),(0,o.f)(u,"getRoute_1",0,!1),(0,o.f)(u,"getLocation_0",0,!1),(0,o.f)(u,"getLocation_1",0,!1),(0,o.f)(u,"getCarInfo_0",0,!1),(0,o.f)(u,"getCarInfo_1",0,!1),(0,o.f)(u,"getMaterialSymbolsSearchIndex",0,!1),document.addEventListener(u,v),yield Promise.all([(0,c.a)(u,!0),(0,r.a)(u,1),(0,i.a)(u,!0),(0,s.a)(u)]),(0,o.a)(u),(0,o.b)(u)})).apply(this,arguments)}function g(){b.setAttribute("displayed","true")}function y(){b.setAttribute("displayed","false")}},6091(e,t,a){a.d(t,{a:()=>H,b:()=>M});var n=a(467),i=a(5767),r=a(5314),s=a(3459),c=a(8179),o=a(8024),d=a(4884),u=a(4537),l=a(904),b=a(3030),f=a(4690),p=(0,c.c)(".sa"),h=(0,c.e)(p,".hb"),v=(0,c.e)(h,".ib"),m=(0,c.e)(v,".nb"),k={},g=!1,y=!1,w=15e3,L=5e3,C=!0,A=!1,S=0,x=0,T="",_=!1;function P(){var e=(0,c.a)();e.classList.add("qb");var t=(0,c.a)();t.classList.add("rb");var a=(0,c.a)();a.classList.add("sb"),a.appendChild((0,u.a)());var n=(0,c.a)();n.classList.add("tb");var i=(0,c.a)();i.classList.add("ub"),t.appendChild(a),t.appendChild(n),t.appendChild(i);var r=(0,c.a)();return r.classList.add("vb"),e.appendChild(t),e.appendChild(r),e}function E(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.e)(e,".rb"),n=(0,c.e)(a,".sb"),i="";switch(t.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,u.c)(n,i)}function s(e,t){var a=(0,c.e)(e,".rb"),n=(0,c.e)(a,".tb"),i="";switch(t.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function l(e,t){var a=(0,c.e)(e,".rb");(0,c.e)(a,".ub").innerText=t.time.relative}function p(e,t){(0,c.e)(e,".vb").innerText=t.name}function h(e,t){switch(t.type){case"route":e.onclick=function(){(0,f.d)(t.id,t.pid)};break;case"location":e.onclick=function(){(0,b.d)(t.hash)};break;case"bus":e.onclick=function(){(0,d.d)(t.id)};break;case"empty":e.onclick=null}}function v(e,t){e.setAttribute("animation",(0,o.a)(t))}function m(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}if(null==i)r(e,n),s(e,n),l(e,n),p(e,n),h(e,n),v(e,a),m(e,t);else if(n.type!==i.type)r(e,n),s(e,n),l(e,n),p(e,n),h(e,n),v(e,a),m(e,t);else{switch(n.type){case"location":(0,o.b)(i.name,n.name)||p(e,n),i.time!==n.time&&l(e,n),(0,o.b)(i.hash,n.hash)||h(e,n);break;case"route":i.name!==n.name&&p(e,n),i.time!==n.time&&l(e,n),i.id===n.id&&(0,o.b)(i.pid,n.pid)||h(e,n);break;case"bus":i.name!==n.name&&p(e,n),i.time!==n.time&&l(e,n),i.id!==n.id&&h(e,n);break;case"empty":i.time!==n.time&&l(e,n)}g!==a&&v(e,a),y!==t&&m(e,t)}}var i=e.itemQuantity,r=Array.from((0,c.d)(m,".qb")),s=r.length;if(i!==s){var l=s-i;if(l<0){for(var p=new DocumentFragment,h=0;h>l;h--){var v=P();p.appendChild(v),r.push(v)}m.append(p)}else if(l>0)for(var w=s-1,L=s-l-1;w>L;w--)r[w].remove(),r.splice(w,1)}for(var C=0;C<i;C++){var A=r[C],S=e.items[C];if((0,o.f)(k,"items"))if(k.items[C])n(A,S,k.items[C]);else n(A,S,null);else n(A,S,null)}k=e,g=a,y=t}function M(){for(var e=(0,s.b)("playing_animation"),t=(0,l.d)("window"),a=Math.floor(t.height/70/3)+2,n=[],i=0;i<a;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});E({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function D(){return I.apply(this,arguments)}function I(){return(I=(0,n.a)(function*(){var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval");C=t.dynamic,w=t.baseInterval,T=(0,o.c)();var a=yield(0,r.c)(T);E(a,!1,e);var n=0;C&&(n=yield(0,i.c)()),S=(new Date).getTime(),x=C?Math.max(S+L,a.dataUpdateTime+w/n):S+w,Math.max(L,x-S)})).apply(this,arguments)}function F(){return R.apply(this,arguments)}function R(){return(R=(0,n.a)(function*(){D().then(function(){A?setTimeout(function(){F()},Math.max(L,x-(new Date).getTime())):_=!1}).catch(function(e){A?setTimeout(function(){F()},1e4):_=!1})})).apply(this,arguments)}function H(){A||(A=!0,_?D():(_=!0,F()))}},6110(){},6561(){},6764(){},6971(){},7114(){},7336(){},7499(){},8933(){},9080(){},9657(){}}]);
//# sourceMappingURL=201dd4e0ea37e1e9c172.js.map