"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[4039],{2530(e,t,n){n.d(t,{D:()=>v,h:()=>f});var r=n(3459),a=n(8179),i=n(8024),o=n(4537),d=n(6443),c=[],l=!1,u=!1;function s(){var e=document.createElement("div");e.classList.add("dm");var t=document.createElement("div");t.classList.add("em"),t.appendChild((0,o.oC)()),e.appendChild(t);var n=document.createElement("div");return n.classList.add("fm"),e.appendChild(n),{element:e,id:""}}function f(){for(var e=(0,r.Js)("playing_animation"),t=[],n=0;n<5;n++)t.push({key:n,icon:"none",value:""});v(t,!0,e)}function v(e,t,n){function r(e,r,d){function c(e,t){var n=(0,a.aI)(e,".em");(0,o.yD)(n,t.icon)}function s(e,t){(0,a.aI)(e,".fm").innerText=t.value}function f(e,t){e.setAttribute("animation",(0,i.xZ)(t))}function v(e,t){e.setAttribute("skeleton-screen",(0,i.xZ)(t))}null==d?(c(e,r),s(e,r),f(e,n),v(e,t)):((0,i.hw)(d,r)||c(e,r),(0,i.hw)(d,r)||s(e,r),l!==n&&f(e,n),u!==t&&v(e,t))}var f=e.length;t!==u&&d.b7.setAttribute("skeleton-screen",(0,i.xZ)(t));var v=(0,a.jg)(d.VY,".dm").length;if(f!==v){var p=v-f;if(p<0){for(var m=new DocumentFragment,h=0,y=Math.abs(p);h<y;h++){var g=s();m.appendChild(g.element)}d.VY.append(m)}else for(var b=(0,a.jg)(d.VY,".dm"),C=0,w=Math.abs(p);C<w;C++){b[v-1-C].remove()}}for(var A=(0,a.jg)(d.VY,".dm"),k=0;k<f;k++){var E=A[k],x=e[k];0===c.length?r(E,x,null):r(E,x,c[k])}c=e,l=n,u=t}},4537(e,t,n){n.d(t,{YC:()=>i,Zf:()=>a,oC:()=>o,yD:()=>d});var r=n(8179);function a(e){return`<span class="pb">${e}</span>`}function i(e){var t=document.createElement("span");return t.classList.add("pb"),t.innerText=e,t}function o(){var e=document.createElement("span");return e.classList.add("pb"),e}function d(e,t){(0,r.aI)(e,"span.pb").innerText=t}},7891(e,t,n){n.d(t,{Z:()=>y,z:()=>h});var r=n(467),a=n(5352),i=n(8179),o=n(4537),d=n(904),c=n(5693);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=(0,i.bv)(".sk"),f=(0,i.aI)(s,".xk"),v=(0,i.aI)(f,".yk");function p(e){var t=document.createElement("div");t.classList.add("zk"),t.onclick=function(){(0,c.bF)(e.id)};var n=document.createElement("div");n.classList.add("_k"),n.appendChild(document.createTextNode(e.name)),t.appendChild(n);var r=document.createElement("div");r.classList.add("al");var a=document.createElement("span");return a.appendChild((0,o.YC)("arrow_forward_ios")),r.appendChild(a),t.appendChild(r),{element:t,id:""}}function m(){return(m=(0,r.A)(function*(){v.innerHTML="";var e,t=yield(0,a.ty)(),n=new DocumentFragment,r=l(t);try{for(r.s();!(e=r.n()).done;){var i=p(e.value);n.appendChild(i.element)}}catch(e){r.e(e)}finally{r.f()}v.append(n)})).apply(this,arguments)}function h(){(0,d.WR)("PersonalScheduleManager"),s.setAttribute("displayed","true"),function(){m.apply(this,arguments)}()}function y(){(0,d.kr)("PersonalScheduleManager"),s.setAttribute("displayed","false")}},8332(e,t,n){n.d(t,{e:()=>u,w:()=>c});var r=n(467),a=n(8134),i=n(9469),o=n(9119),d=n(8279);function c(e){return l.apply(this,arguments)}function l(){return(l=(0,r.A)(function*(e){var t=yield(0,a.Rk)(e);if(!1!==t){var n=(0,i.i)(0,{id:e,name:t.n});navigator.share&&navigator.share({title:t.n,url:n}).then(function(){(0,o.a)("check_circle","已分享路線")}).catch(function(e){(0,o.a)("cancel","已取消分享")})}})).apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return(s=(0,r.A)(function*(e){var t=yield(0,a.Rk)(e);if(!1!==t){var n=(0,i.i)(0,{id:e,name:t.n});(0,d.X8)(n)}})).apply(this,arguments)}},8379(e,t,n){n.d(t,{g:()=>h,m:()=>y});var r=n(467),a=n(9566),i=n(8179),o=n(9333),d=n(4537),c=n(904);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=(0,i.bv)(".jc"),f=(0,i.aI)(s,".oc"),v=(0,i.aI)(f,".pc");function p(e){var t=document.createElement("div");t.classList.add("qc"),t.onclick=function(){(0,o.uy)(e.id)};var n=document.createElement("div");n.classList.add("rc"),n.appendChild((0,d.YC)(e.icon));var r=document.createElement("div");r.classList.add("sc"),r.appendChild(document.createTextNode(e.name));var a=document.createElement("div");a.classList.add("tc"),a.appendChild(document.createTextNode(String(e.contentLength)));var i=document.createElement("div");return i.classList.add("yc"),i.appendChild((0,d.YC)("arrow_forward_ios")),t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(i),{element:t,id:""}}function m(){return(m=(0,r.A)(function*(){var e=yield(0,a.Xi)();v.innerHTML="";var t,n=new DocumentFragment,r=l(e);try{for(r.s();!(t=r.n()).done;){var i=p(t.value);n.appendChild(i.element)}}catch(e){r.e(e)}finally{r.f()}v.append(n)})).apply(this,arguments)}function h(){(0,c.WR)("FolderManager"),s.setAttribute("displayed","true"),function(){m.apply(this,arguments)}()}function y(){(0,c.kr)("FolderManager"),s.setAttribute("displayed","false")}},9009(e,t,n){n.d(t,{OS:()=>C,fB:()=>k});var r=n(3459),a=n(8179),i=n(7968),o=n(8024),d=n(6141),c=n(904),l=n(6443);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f='"Noto Sans TC", sans-serif',v=(0,c.gO)("route-details-canvas"),p=v.width,m=v.height,h=Math.min(window.devicePixelRatio,1.875)||1,y={};function g(){var e=document.createElement("div");return e.classList.add("ua"),{element:e,id:""}}function b(){var e=document.createElement("div");e.classList.add("ta");var t=document.createElement("canvas");return t.classList.add("hm"),e.appendChild(t),{element:e,id:""}}function C(){for(var e=(0,r.Js)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},a={},i=0;i<7;i++){var o=`d_${i}`;n[o]=[],a[o]={day:i,code:"d_{i}",name:""};for(var d=0;d<t[o];d++){var c=new Date;c.setHours(0),c.setMinutes(30*d),c.setSeconds(0),c.setMilliseconds(0),n[o].push({date:c,dateString:"",duration:15})}}k({calendarEventGroups:n,calendarDays:a,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}function w(e,t,n,i,c,u){e.innerText=t.name,e.setAttribute("day",u.toString()),e.onclick=function(){!function(e){for(var t=(0,r.Js)("playing_animation"),n=(0,a.jg)(l.kP,".ua"),i=(0,a.jg)(l.zk,".ta"),o=0;o<7;o++){var c,u,s=n[o],f=i[o],v=`d_${o}`,p=null===(c=y)||void 0===c?void 0:c.calendarEventGroups[v],m=null===(u=y)||void 0===u?void 0:u.calendarDays[v];if(p&&m){var h=(0,d.t)("--c"),g=(0,d.t)("--d"),b=(0,d.t)("--e"),C=(0,d.t)("--nj"),k=(0,d.t)("--b"),E=(0,d.t)("--kb");w(s,m,e,!1,t,o),A(f,p,e,k,h,g,b,C,E,o)}}}(u)},e.setAttribute("highlighted",n===u?"true":"false"),e.setAttribute("animation",(0,o.xZ)(c)),e.setAttribute("skeleton-screen",(0,o.xZ)(i))}function A(e,t,n,r,d,l,s,y,g,b){function C(e,t,n){var r=70*t;e.fillStyle=n,e.fillRect(45,r+5,p-45,1.2),e.font=`400 12px ${f}`,e.textBaseline="top";var a=`${String(t).padStart(2,"0")}:00`,i=e.measureText(a),o=i.width,d=i.actualBoundingBoxDescent;e.fillText(a,(45-o)/2,r+(10-d)/2,o)}function w(e,t,n,r,a,o,d){var c=new Date;c.setDate(1),c.setMonth(0),c.setFullYear(t.date.getFullYear()),c.setMonth(t.date.getMonth()),c.setDate(t.date.getDate()),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var l=(t.date.getTime()-c.getTime())/864e5*24*70,u=p-45,s=60*t.duration*1e3/864e5*24*70;(0,i.wg)(e,45,l,u,s,3,`rgba(${r}, ${a}, ${o}, ${d})`),(0,i.wg)(e,45,l,3,s,{tl:3,tr:0,bl:3,br:0},n),e.font=`400 14px ${f}`,e.textBaseline="top",e.fillStyle=n;var v=t.dateString,m=e.measureText(v),h=m.width,y=m.actualBoundingBoxDescent;e.fillText(v,53,l+(s-y)/2,h)}var A=(0,a.aI)(e,".hm"),k=A.getContext("2d");if(function(e,t,n){var r=t===n;e.setAttribute("displayed",(0,o.xZ)(r))}(e,n,b),function(e){v=(0,c.gO)("route-details-canvas"),p=v.width,m=v.height,h=Math.min(window.devicePixelRatio,1.875)||1,e.width=p*h,e.height=m*h;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(h,h)}(A),n===b){k.clearRect(0,0,p,m);for(var E=0;E<24;E++)C(k,E,g);var x,S=u(t);try{for(S.s();!(x=S.n()).done;){w(k,x.value,r,d,l,s,y)}}catch(e){S.e(e)}finally{S.f()}}else k.clearRect(0,0,p,m)}function k(e,t,n){var r=(new Date).getDay(),i=(0,d.t)("--c"),o=(0,d.t)("--d"),c=(0,d.t)("--e"),u=(0,d.t)("--nj"),s=(0,d.t)("--b"),f=(0,d.t)("--kb"),v=e.calendarDays,p=e.calendarDayQuantity,m=e.calendarEventGroups,h=(e.calendarEventQuantity,(0,a.jg)(l.zk,".ta").length);if(p!==h){var C=h-p;if(C<0){for(var k=new DocumentFragment,E=new DocumentFragment,x=0,S=Math.abs(C);x<S;x++){var L=g();k.appendChild(L.element);var I=b();E.appendChild(I.element)}l.kP.append(k),l.zk.append(E)}else for(var _=(0,a.jg)(l.kP,".ua"),T=(0,a.jg)(l.zk,".ta"),M=0,j=Math.abs(C);M<j;M++){var D=h-1-M;_[D].remove(),T[D].remove()}}for(var $=(0,a.jg)(l.kP,".ua"),Y=(0,a.jg)(l.zk,".ta"),F=0;F<p;F++){var P=`d_${F}`,R=v[P],Z=m[P],z=$[F],B=Y[F];w(z,R,r,t,n,F),A(B,Z,r,s,i,o,c,u,f,F)}y=e}},9119(e,t,n){n.d(t,{a:()=>u});var r=n(2284),a=n(3459),i=n(8179),o=n(8024),d=n(4537);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){var l=(0,i.e0)(".tm");if(null!==l){var u,s=c(l);try{for(s.s();!(u=s.n()).done;){u.value.remove()}}catch(e){s.e(e)}finally{s.f()}}var f=(0,a.Js)("playing_animation"),v=document.createElement("div");v.classList.add("tm"),v.setAttribute("animation",(0,o.xZ)(f));var p=document.createElement("div");p.classList.add("um"),p.appendChild((0,d.YC)(e)),v.appendChild(p);var m=document.createElement("div");if(m.classList.add("vm"),m.innerText=t,v.appendChild(m),"object"===(0,r.A)(n)&&null!=n&&"function"==typeof(null==n?void 0:n.action)){var h=document.createElement("div");h.classList.add("wm"),h.innerText=n.text,h.addEventListener("click",function(){n.action()},{once:!0}),v.appendChild(h)}v.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(v)}},9333(e,t,n){n.d(t,{I6:()=>S,uy:()=>x});var r=n(467),a=n(9566),i=n(8179),o=n(8024),d=n(6189),c=n(4537),l=n(904),u=n(9119);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=(0,i.bv)(".zc"),p=(0,i.aI)(v,"._c"),m=(0,i.aI)(p,".ad"),h=(0,i.aI)(v,".cd"),y=(0,i.aI)(h,".dd"),g=(0,i.aI)(y,'.ed[group="folder-name"] .id input'),b=(0,i.aI)(y,'.ed[group="folder-icon"] .id .kd input'),C=(0,i.aI)(y,'.ed[group="folder-icon"] .id .kd .ld'),w=(0,i.aI)(y,'.ed[group="folder-content"] .id');function A(e,t){var n=(0,o.zx)(),r=document.createElement("div");r.id=n,r.classList.add("md"),r.setAttribute("type",t.type);var d="",l="",s="";switch(t.type){case"stop":s="location_on",d=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`,l=t.name;break;case"route":s="route",d=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`,l=t.name;break;case"location":s="location_on",d="地點",l=t.name;break;case"bus":d="",l=t.name;break;case"empty":s="lightbulb",d="提示",l="沒有內容";break;default:s="",d="null",l="null"}var f=document.createElement("div");f.classList.add("nd"),f.appendChild((0,c.YC)(s));var p=document.createElement("div");p.classList.add("od"),p.appendChild(document.createTextNode(d));var m=document.createElement("div");m.classList.add("qd"),m.appendChild(document.createTextNode(l));var h=document.createElement("div");h.classList.add("rd");var y=document.createElement("div");y.classList.add("sd"),y.appendChild((0,c.YC)("keyboard_arrow_down")),y.onclick=function(){L(n,e.id,t.type,t.id,"up")};var g=document.createElement("div");g.classList.add("td"),g.appendChild((0,c.YC)("keyboard_arrow_down")),g.onclick=function(){L(n,e.id,t.type,t.id,"down")};var b=document.createElement("div");b.classList.add("ud"),b.appendChild((0,c.YC)("delete")),b.onclick=function(){!function(e,t,n,r){var o=(0,i.aI)(v,`.cd .dd .ed[group="folder-content"] .id .md#${e}`);(0,a.NC)(t,n,r).then(function(e){if(e)switch(o.remove(),n){case"stop":(0,u.a)("delete","已移除站牌");break;case"route":(0,u.a)("delete","已移除路線");break;case"location":(0,u.a)("delete","已移除地點")}else(0,u.a)("error","無法移除")})}(n,e.id,t.type,t.id)};var C=document.createElement("div");C.classList.add("vd");var w=document.createElement("div");return w.classList.add("vd"),h.appendChild(y),h.appendChild(g),h.appendChild(b),h.appendChild(C),h.appendChild(w),r.appendChild(f),r.appendChild(p),r.appendChild(m),r.appendChild(h),{element:r,id:n}}function k(e,t){g.value=e.name,b.value=e.icon,m.onclick=function(){var t,n,r;t=e.id,n=g.value,r=b.value,(0,a.g$)(t,n,r).then(function(e){e?(S(),(0,u.a)("check_circle","已儲存變更")):(0,u.a)("error","無法儲存")})},w.innerHTML="";var n,r=new DocumentFragment,i=s(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,d=A(e,o);r.appendChild(d.element)}}catch(e){i.e(e)}finally{i.f()}w.append(r)}function E(){return(E=(0,r.A)(function*(e){k((0,a.L2)(e),yield(0,a.eD)(e))})).apply(this,arguments)}function x(e){(0,l.WR)("FolderEditor"),v.setAttribute("displayed","true"),function(e){E.apply(this,arguments)}(e),(0,l.Z_)()}function S(){v.setAttribute("displayed","false"),(0,l.l$)()}function L(e,t,n,r,o){var d=(0,i.aI)(v,`.cd .dd .ed[group="folder-content"] .id .md#${e}`);(0,a.bq)(t,n,r,o).then(function(e){if(e)switch(o){case"up":var t=d.previousElementSibling;t&&d.parentNode.insertBefore(d,t),(0,u.a)("arrow_circle_up","已往上移");break;case"down":var n=d.nextElementSibling;n&&d.parentNode.insertBefore(n,d),(0,u.a)("arrow_circle_down","已往下移")}else(0,u.a)("error","無法移動")})}C.onclick=function(){(0,d.r7)("editor")}}}]);
//# sourceMappingURL=bc4fb603.js.map