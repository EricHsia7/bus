"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[150],{972:(e,t,n)=>{n.d(t,{L:()=>d,U:()=>m});var r=n(8024),o=n(2129),a=n(9930),i=n(4781),s=n(6788);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}var p={},f=[],v=!1;function d(){return y.apply(this,arguments)}function y(){var e;return e=function*(){var e,t=(0,r.zx)("r"),n=yield(0,a.z)(t),o={},c=0,l=u(n);try{for(l.s();!(e=l.n()).done;){var d,y=e.value,h=u((0,i.B5)(y,!0));try{for(h.s();!(d=h.n()).done;){var m=d.value,g="u_".concat(m);o.hasOwnProperty(g)||(o[g]=[]),o[g].push(c)}}catch(e){h.e(e)}finally{h.f()}c+=1}}catch(e){l.e(e)}finally{l.f()}f=n,p=o,v=!0,(0,s.LQ)(t),(0,s.gC)(t)},y=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,s,"next",e)}function s(e){l(a,r,o,i,s,"throw",e)}i(void 0)}))},y.apply(this,arguments)}function h(e,t){var n,r=0,o=0,a=u(t);try{for(a.s();!(n=a.n()).done;){var i=n.value,s=e.indexOf(i,o);s>-1?r+=s:r-=o,o+=1}}catch(e){a.e(e)}finally{a.f()}return e===t&&(r=10*Math.abs(r)),r}function m(e,t){if(!v)return[];var n,r=String(e).toLowerCase(),a=(0,i.B5)(r,!0),s=(0,i.B5)(r,!1),c=[],l=u(a);try{for(l.s();!(n=l.n()).done;){var d=n.value,y="u_".concat(d);p.hasOwnProperty(y)&&c.push(p[y])}}catch(e){l.e(e)}finally{l.f()}c.sort((function(e,t){return e.length-t.length}));var m=c.length-1,g=[];if(0===m&&(g=c[0]),m>0)for(var b=0;b<m;b++){var w=c[b],S=c[b+1];g=0===b?(0,o._N)(w,S):(0,o._N)(g,S)}var _,A=[],I=u(g);try{for(I.s();!(_=I.n()).done;){var k=_.value,O=f[k];if(!(0<t))break;var x=h(s,(0,i.B5)(O,!1));A.push({item:O,score:x})}}catch(e){I.e(e)}finally{I.f()}return A.sort((function(e,t){return t.score-e.score})),A}},1531:(e,t,n)=>{n.d(t,{to:()=>u,uQ:()=>l});var r=n(3459),o=n(7183);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s={current:{latitude:0,longitude:0},permission:{gained:!1,asked:!1},id:0};function u(){!1===s.permission.asked&&(0,r.Js)("display_user_location")&&(s.permission.asked=!0,s.id=navigator.geolocation.watchPosition((function(e){s.permission.gained=!0,s.current.latitude=e.coords.latitude,s.current.longitude=e.coords.longitude}),(function(e){var t="";switch(e.code){case e.PERMISSION_DENIED:t="This website does not have permission to use the Geolocation API";break;case e.POSITION_UNAVAILABLE:t="The current position could not be determined.";break;case e.PERMISSION_DENIED_TIMEOUT:t="The current position could not be determined within the specified timeout period."}""==t&&(t="The position could not be determined due to an unknown error (Code: "+e.code.toString()+")."),console.log(t)}),{enableHighAccuracy:!0,timeout:3e4,maximumAge:0}))}function c(){return s.permission.asked&&s.permission.gained?s.current:s.permission.asked||s.permission.gained?s.permission.asked&&!s.permission.gained?s.current:void 0:(u(),s.current)}function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:450,r=c(),i=[],s=a(e);try{for(s.s();!(t=s.n()).done;){var u=t.value,l=(0,o.aV)(r.latitude,r.longitude,u.latitude,u.longitude);l<=n&&i.push({position:u,distance:l})}}catch(e){s.e(e)}finally{s.f()}return i.length>0?(i=i.sort((function(e,t){return e.distance-t.distance})))[0].position:null}},3251:(e,t,n)=>{n.d(t,{A:()=>f,HL:()=>c,NO:()=>l,iJ:()=>p,kE:()=>u});var r=n(3648);function o(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,u,"next",e)}function u(e){o(i,r,a,s,u,"throw",e)}s(void 0)}))}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new URLSearchParams(window.location.search);n.set("v",e);var r=window.location.pathname+"?"+n.toString();t?window.location.replace(r):history.replaceState(null,"",r)}function s(){return(s=a((function*(){try{var e=yield fetch("./version.json?_=".concat((new Date).getTime()),{cache:"no-store"});if(!e.ok)throw new Error("Network response was not ok");return e.json()}catch(e){return console.error("There was a problem with the fetch operation:",e),!1}}))).apply(this,arguments)}function u(){return(0,r.bv)('head meta[name="version-hash"]').getAttribute("content")}function c(){return(0,r.bv)('head meta[name="version-branch-name"]').getAttribute("content")}function l(){var e=(0,r.bv)('head meta[name="version-full-hash"]').getAttribute("content");return"https://github.com/EricHsia7/bus/commit/".concat(e)}function p(){return(0,r.bv)('head meta[name="version-time-stamp"]').getAttribute("content")}function f(){return v.apply(this,arguments)}function v(){return v=a((function*(){var e=yield function(){return s.apply(this,arguments)}();return"boolean"==typeof e?!1===e?"fetchError":"unknownError":u()!==e.hash?(i(e.hash,!0),"refreshing"):(i(e.hash,!1),"ok")})),v.apply(this,arguments)}},3459:(e,t,n)=>{n.d(t,{Gn:()=>m,Js:()=>S,PL:()=>w,Yq:()=>v,aN:()=>g,cl:()=>y});var r=n(4311),o=n(5579),a=n(3251),i=n(4636);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,s,"next",e)}function s(e){c(a,r,o,i,s,"throw",e)}i(void 0)}))}}var p=["time_formatting_mode","refresh_interval","display_user_location","location_labels","proxy","folder","personal_schedule","notification","playing_animation","power_saving","data_usage","storage","persistent_storage","export","import","version","branch","last_update_date","github"],f={time_formatting_mode:{key:"time_formatting_mode",name:"預估時間格式",icon:"glyphs",status:"",action:"bus.settings.openSettingsOptions('time_formatting_mode')",type:"select",default_option:0,option:0,options:[{name:"".concat((0,o.fU)(11,3),"/").concat((0,o.fU)(61,3),"/").concat((0,o.fU)(3661,3)),value:{type:1,number:3},resourceIntensive:!1,powerSavingAlternative:-1},{name:"".concat((0,o.fU)(11,2),"/").concat((0,o.fU)(61,2),"/").concat((0,o.fU)(3661,2)),value:{type:1,number:2},resourceIntensive:!1,powerSavingAlternative:-1},{name:"".concat((0,o.fU)(11,1),"/").concat((0,o.fU)(61,1),"/").concat((0,o.fU)(3661,1)),value:{type:1,number:1},resourceIntensive:!1,powerSavingAlternative:-1},{name:"".concat((0,o.fU)(11,0),"/").concat((0,o.fU)(61,0),"/").concat((0,o.fU)(3661,0)),value:{type:1,number:0},resourceIntensive:!1,powerSavingAlternative:-1}],description:"在首頁、路線頁面、地點頁面上的預估公車到站時間的顯示格式。"},refresh_interval:{key:"refresh_interval",name:"預估時間更新頻率",icon:"pace",status:"",action:"bus.settings.openSettingsOptions('refresh_interval')",type:"select",default_option:3,option:3,options:[{name:"自動",value:{baseInterval:15e3,dynamic:!0,type:3},resourceIntensive:!0,powerSavingAlternative:2},{name:"10秒",value:{baseInterval:1e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:2},{name:"20秒",value:{baseInterval:2e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:3},{name:"30秒",value:{baseInterval:3e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:4},{name:"40秒",value:{baseInterval:4e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:5},{name:"50秒",value:{baseInterval:5e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:6},{name:"60秒",value:{baseInterval:6e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:6}],description:"在首頁、路線頁面、地點頁面上的預估公車到站時間、公車等即時資料更新的頻率。"},display_user_location:{key:"display_user_location",name:"顯示所在位置",icon:"near_me",status:"",action:"bus.settings.openSettingsOptions('display_user_location')",type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"是否在路線頁面上標註目前所在位置。若設為開啟，本應用程式將要求位置存取權限。"},location_labels:{key:"location_labels",name:"站牌位置標籤",icon:"tag",status:"",action:"bus.settings.openSettingsOptions('location_labels')",type:"select",default_option:0,option:0,options:[{name:"行徑方向",value:{type:0,string:"directions"},resourceIntensive:!1,powerSavingAlternative:-1},{name:"地址特徵",value:{type:0,string:"address"},resourceIntensive:!1,powerSavingAlternative:-1},{name:"英文字母",value:{type:0,string:"letters"},resourceIntensive:!1,powerSavingAlternative:-1}],description:"用於區分位於同個地點的不同站牌。行徑方向表示可搭乘路線從本站到下一站的方向；地址特徵表示不同站牌的地址差異處；英文字母表示按照順序以字母編號。"},proxy:{key:"proxy",name:"網路代理",icon:"router",status:"",action:"bus.settings.openSettingsOptions('proxy')",type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!1,powerSavingAlternative:-1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"使用網路代理來擷取資料。"},folder:{key:"folder",name:"資料夾",icon:"folder",status:"",type:"page",action:"bus.folder.openFolderManager()",description:""},personal_schedule:{key:"personal_schedule",name:"個人化行程",icon:"calendar_view_day",status:"",action:"bus.personalSchedule.openPersonalScheduleManager()",type:"page",description:""},notification:{key:"notification",name:"通知",icon:"notifications",status:"",action:"bus.notification.openNotificationScheduleManager()",type:"page",description:""},playing_animation:{key:"playing_animation",name:"動畫",icon:"animation",description:"是否在介面中播放動畫。",status:"",type:"select",action:"bus.settings.openSettingsOptions('playing_animation')",default_option:0,option:0,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}]},power_saving:{key:"power_saving",name:"省電模式",icon:"battery_low",description:"暫停使用耗電功能來節省電力。",status:"",type:"select",action:"bus.settings.openSettingsOptions('power_saving')",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!1,powerSavingAlternative:-1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}]},data_usage:{key:"data_usage",name:"網路使用量",icon:"bigtop_updates",status:"",type:"page",action:"bus.dataUsage.openDataUsage()",description:""},storage:{key:"storage",name:"儲存空間",icon:"database",status:"",type:"page",action:"bus.storage.openStorage()",description:""},persistent_storage:{key:"persistent_storage",name:"永久儲存",icon:"storage",status:"",action:"bus.settings.showPromptToAskForPersistentStorage()",type:"action",description:"開啟此選項以避免瀏覽器自動刪除重要資料。"},export:{key:"export",name:"匯出資料",icon:"upload",status:"",type:"action",action:"bus.settings.downloadExportFile()",description:""},import:{key:"import",name:"匯入資料",icon:"download",status:"",type:"action",action:"bus.settings.openFileToImportData()",description:""},version:{key:"version",name:"版本",icon:"commit",status:"",type:"info",action:"bus.settings.viewCommitOfCurrentVersion()",description:""},branch:{key:"branch",name:"分支",icon:"rebase",status:"",type:"info",action:"",description:""},last_update_date:{key:"last_update_date",name:"更新時間",icon:"update",status:"",type:"info",action:"",description:""},github:{key:"github",name:"GitHub",icon:"book_2",status:"@EricHsia7/bus",type:"info",action:"",description:""}};function v(){return d.apply(this,arguments)}function d(){return(d=l((function*(){var e,t=s(yield(0,r.Su)(1));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(p.indexOf(n)>-1){var o=yield(0,r.Ct)(1,n);if(null!==o){if("select"===f[n].type){var a=parseInt(o);f[n].option=a}}else"select"===f[n].type&&(f[n].option=f[n].default_option)}}}catch(e){t.e(e)}finally{t.f()}return!0}))).apply(this,arguments)}function y(){return h.apply(this,arguments)}function h(){return(h=l((function*(){var e=[];for(var t in f){var n=f[t];switch(n.type){case"select":n.status=n.options[n.option].name;break;case"page":if("notification"===t)n.status=(0,i.hc)()?"已註冊":"未註冊";else n.status="";break;case"action":n.status="","persistent_storage"===t&&(n.status=(yield(0,r.tH)())?"開啟":"關閉");break;case"info":if("version"===t&&(n.status=(0,a.kE)()),"branch"===t&&(n.status=(0,a.HL)()),"last_update_date"===t){var s=new Date((0,a.iJ)());n.status=(0,o.HN)(s)}}e.push(n)}return e}))).apply(this,arguments)}function m(){var e=[];for(var t in f)if(p.indexOf(t)>-1&&f.hasOwnProperty(t)&&"select"===f[t].type){var n={key:t,option:f[t].option};e.push(n)}return e}function g(e,t){return b.apply(this,arguments)}function b(){return(b=l((function*(e,t){return!!(p.indexOf(e)>-1&&f.hasOwnProperty(e)&&"select"===f[e].type&&void 0!==f[e].options[t]&&null!==f[e].options[t])&&(yield(0,r.mL)(1,e,t),f[e].option=t,!0)}))).apply(this,arguments)}function w(e){if(p.indexOf(e)>-1&&f.hasOwnProperty(e))return f[e]}function S(e){if(p.indexOf(e)>-1&&f.hasOwnProperty(e)){var t=f.power_saving,n=t.options[t.option].value.boolean,r=f[e],o=r.options[r.option];n&&o.resourceIntensive&&(o=r.options[o.powerSavingAlternative]);var a=o.value;switch(a.type){case 0:return a.string;case 1:return a.number;case 2:return a.boolean;case 3:return a;default:return""}}return""}},4311:(e,t,n)=>{function r(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,u,"next",e)}function u(e){r(i,o,a,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Ct:()=>l,Su:()=>d,VC:()=>w,iQ:()=>f,le:()=>m,mL:()=>u,pD:()=>h,tH:()=>g});var a=n(3790),i={cacheStore:!1,settingsStore:!1,dataUsageRecordsStore:!1,updateRateDataStore:!1,updateRateDataWriteAheadLogStore:!1,busArrivalTimeDataWriteAheadLogStore:!1,busArrivalTimeDataStore:!1,personalScheduleStore:!1,recentViewsStore:!1,notificationStore:!1,notificationScheduleStore:!1,folderListStore:!1,folderContentIndexStore:!1,folderContentStore:!1},s=["cacheStore","settingsStore","dataUsageRecordsStore","updateRateDataStore","updateRateDataWriteAheadLogStore","busArrivalTimeDataWriteAheadLogStore","busArrivalTimeDataStore","personalScheduleStore","recentViewsStore","notificationStore","notificationScheduleStore","folderListStore","folderContentIndexStore","folderContentStore"];function u(e,t,n){return c.apply(this,arguments)}function c(){return(c=o((function*(e,t,n){try{var r=s[e];return!1===i[r]&&(i[r]=yield a.createInstance({name:r})),yield i[r].setItem(t,n)}catch(e){return console.error(e),null}}))).apply(this,arguments)}function l(e,t){return p.apply(this,arguments)}function p(){return(p=o((function*(e,t){try{var n=s[e];return!1===i[n]&&(i[n]=yield a.createInstance({name:n})),yield i[n].getItem(t)}catch(e){return console.error(e),null}}))).apply(this,arguments)}function f(e,t){return v.apply(this,arguments)}function v(){return(v=o((function*(e,t){try{var n=s[e];return!1===i[n]&&(i[n]=yield a.createInstance({name:n})),yield i[n].removeItem(t)}catch(e){return console.error(e),null}}))).apply(this,arguments)}function d(e){return y.apply(this,arguments)}function y(){return(y=o((function*(e){try{var t=s[e];return!1===i[t]&&(i[t]=yield a.createInstance({name:t})),yield i[t].keys()}catch(e){return console.error(e),[]}}))).apply(this,arguments)}function h(e){return s[e]}function m(){return s.length}function g(){return b.apply(this,arguments)}function b(){return(b=o((function*(){if(navigator.storage&&navigator.storage.persist)return yield navigator.storage.persisted();return!1}))).apply(this,arguments)}function w(){return S.apply(this,arguments)}function S(){return(S=o((function*(){if(navigator.storage&&navigator.storage.persist)return(yield navigator.storage.persist())?"granted":"denied";return"unsupported"}))).apply(this,arguments)}},7599:(e,t,n)=>{n.d(t,{P:()=>s});var r=n(4311);function o(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}var a=[{timestamp:"2025-02-08T00:00:00.000Z",script:null},{timestamp:"2025-02-09T00:00:00.000Z",script:null}],i=a.length;function s(){return u.apply(this,arguments)}function u(){var e;return e=function*(){var e=new Date,t=e.getTime(),n="".concat("compatibility","_timestamp"),o=yield(0,r.Ct)(1,n);if(o){for(var s=new Date(o).getTime(),u=-1,c=i-1;c>=0;c--)if(s>new Date(a[c].timestamp).getTime()){u=c+1;break}if(-1!==u)for(var l=u;l<i;l++){var p=a[l],f=p.timestamp,v=new Date(f).getTime(),d=p.script;if(v>t)break;"function"==typeof d&&("AsyncFunction"===d.constructor.name?yield d():d())}return yield(0,r.mL)(1,n,e.toISOString()),!0}return yield(0,r.mL)(1,n,e.toISOString()),!0},u=function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,u,"next",e)}function u(e){o(i,r,a,s,u,"throw",e)}s(void 0)}))},u.apply(this,arguments)}},8134:(e,t,n)=>{n.d(t,{F6:()=>g,GU:()=>O,Rk:()=>h,dD:()=>A,k9:()=>d});var r=n(4293),o=n(8011),a=n(8024),i=n(2129),s=n(4781),u=n(9734),c=n(6788);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,s,"next",e)}function s(e){f(a,r,o,i,s,"throw",e)}i(void 0)}))}}function d(e){return y.apply(this,arguments)}function y(){return(y=v((function*(e){var t=(0,a.zx)("r"),n=yield(0,r.a)(t,!0),o=[];for(var i in n){var s=n[i];String(s.n).indexOf(e)>-1&&o.push(s)}return(0,c.LQ)(t),(0,c.gC)(t),o}))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=v((function*(e){var t=(0,a.zx)("r"),n=yield(0,r.a)(t,!0),o=!1,i={},s="r_".concat(e);return n.hasOwnProperty(s)&&(i=n[s],o=!0),(0,c.LQ)(t),(0,c.gC)(t),!!o&&i}))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=v((function*(e){var t=(0,a.zx)("r"),n=yield(0,r.a)(t,!0),o=[];for(var i in n){var s=n[i];String(s.pid).indexOf(e)>-1&&o.push(s)}return(0,c.LQ)(t),(0,c.gC)(t),o}))).apply(this,arguments)}var w={},S=[],_=!1;function A(){return I.apply(this,arguments)}function I(){return(I=v((function*(){var e=(0,a.zx)("r"),t=yield(0,r.a)(e,!0),n=yield(0,o.g)(e,!0),i=yield(0,u.j)(e,!0),p={},f=[],v=0;for(var d in t){var y=t[d],h={id:y.id,pid:y.pid,dep:y.dep,des:y.des,n:y.n,hash:"",lo:"",la:"",r:"",s:"",type:0};f.push(h);var m,g=l((0,s.B5)("".concat(h.n).concat(h.dep).concat(h.des),!0));try{for(g.s();!(m=g.n()).done;){var b=m.value,A="u_".concat(b);p.hasOwnProperty(A)||(p[A]=[]),p[A].push(v)}}catch(e){g.e(e)}finally{g.f()}v+=1}for(var I in n){var k=n[I],O={id:k.id,n:k.n,lo:k.lo,la:k.la,r:k.r,s:k.s,hash:k.hash,dep:"",des:"",pid:[],type:1};f.push(O);var x,P=l((0,s.B5)(O.n,!0));try{for(P.s();!(x=P.n()).done;){var T=x.value,U="u_".concat(T);p.hasOwnProperty(U)||(p[U]=[]),p[U].push(v)}}catch(e){P.e(e)}finally{P.f()}v+=1}for(var C in i){var L=i[C],D={id:L.BusId,pid:[],dep:"",des:"",n:L.CarNum,hash:"",lo:"",la:"",r:"",s:"",type:2};f.push(D);var E,N=l((0,s.B5)(D.n,!0));try{for(N.s();!(E=N.n()).done;){var B=E.value,M="u_".concat(B);p.hasOwnProperty(M)||(p[M]=[]),p[M].push(v)}}catch(e){N.e(e)}finally{N.f()}v+=1}w=p,S=f,_=!0,(0,c.LQ)(e),(0,c.gC)(e)}))).apply(this,arguments)}function k(e,t){var n,r=0,o=0,a=l(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;r+=e.indexOf(i,o)-o,o+=1}}catch(e){a.e(e)}finally{a.f()}return e===t&&(r=10*Math.abs(r)),r}function O(e,t){if(!_)return[];var n,r=(0,s.B5)(e,!0),o=(0,s.B5)(e,!1),a=[],u=l(r);try{for(u.s();!(n=u.n()).done;){var c=n.value,p="u_".concat(c);w.hasOwnProperty(p)&&a.push(w[p])}}catch(e){u.e(e)}finally{u.f()}a.sort((function(e,t){return e.length-t.length}));var f=a.length-1,v=[];if(0===f&&(v=a[0]),f>0)for(var d=0;d<f;d++){var y=a[d],h=a[d+1];v=0===d?(0,i._N)(y,h):(0,i._N)(v,h)}var m,g=[],b=0,A=S.filter((function(t){return t.n===e&&2===t.type})),I=new Set,O=l(A);try{for(O.s();!(m=O.n()).done;){var x=m.value;if(g.push({item:x,score:1/0}),I.add(x.id),(b+=1)>=t)break}}catch(e){O.e(e)}finally{O.f()}if(b<t){var P,T=l(v);try{for(T.s();!(P=T.n()).done;){var U=P.value,C=S[U];if(!I.has(C.id)){var L=k(o,(0,s.B5)(C.n,!1));if(!(b<t))break;g.push({item:C,score:L}),b+=1}}}catch(e){T.e(e)}finally{T.f()}}return g.sort((function(e,t){return t.score-e.score})),g}}}]);
//# sourceMappingURL=829eac188745d133f778.js.map