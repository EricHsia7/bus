"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{313(e,t,r){r.d(t,{s:()=>c});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,l={};function c(e){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,9],[1,9]].map(function(e){return{url:(0,a.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var i=t.value,f=yield(0,o.Fd)(i.url,e,`getProvider_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(e,f.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_provider_cache",c=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===c){var y=yield t();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(y)),s||(s=!0,l=y),y}if((new Date).getTime()-parseInt(c)>5184e6){var p=yield t();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(p)),p}if(!s){var d=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(d)}return(0,o.Mf)(e,"getProvider_0",0,!0),(0,o.Mf)(e,"getProvider_1",0,!0),(0,o.ZL)(e,-1),l}),y.apply(this,arguments)}},424(e,t,r){r.d(t,{T:()=>p});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,l={};function c(e){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(132),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return d=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,11],[1,11]].map(function(e){return{url:(0,a.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var i=t.value,f=yield(0,o.Fd)(i.url,e,`getStop_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(e,f.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_stop_cache",y=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===y){var p=yield t(),d=yield c(p);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(d)),s||(s=!0,l=d),d}if((new Date).getTime()-parseInt(y)>3888e6){var m=yield t(),v=yield c(m);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(v)),v}if(!s){var h=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(h)}return(0,o.Mf)(e,"getStop_0",0,!0),(0,o.Mf)(e,"getStop_1",0,!0),(0,o.ZL)(e,-1),l}),d.apply(this,arguments)}},1932(e,t,r){r.d(t,{L:()=>m});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,l={};function c(e){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(332),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(892),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return v=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r="",n=u([[0,15],[1,15]].map(function(e){return{url:(0,a.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var i=t.value;r+=(yield(0,o.Fd)(i.url,e,`getSegmentBuffers_${i.e[0]}`,"xml")),(0,o.ZL)(e,-1)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_segment_buffers_cache",y=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===y){var d=yield t(),m=yield c(d),v=yield p(m);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(v)),s||(s=!0,l=v),v}if((new Date).getTime()-parseInt(y)>2592e6){var h=yield t(),g=yield c(h),b=yield p(g);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(b)),b}if(!s){var w=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(w)}return(0,o.Mf)(e,"getSegmentBuffers_0",0,!0),(0,o.Mf)(e,"getSegmentBuffers_1",0,!0),(0,o.ZL)(e,-1),l}),v.apply(this,arguments)}},2303(e,t,r){r.d(t,{$Q:()=>o,AS:()=>s,Ov:()=>l,aU:()=>u,eu:()=>y,s$:()=>p,w_:()=>f,zi:()=>c});var n=r(5579);function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){f=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(f)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if("string"==typeof e){var r=parseInt(e);if(-3===r)return{code:6,text:"末班駛離",time:r};if(-4===r)return{code:5,text:"今日停駛",time:r};if(-2===r)return{code:4,text:"交通管制",time:r};if(-1===r)return{code:3,text:"未發車",time:r};if(0<=r&&r<=10)return{code:2,text:"進站中",time:r};if(10<r&&r<=180)return{code:1,text:(0,n.fU)(r,t),time:r};if(180<r&&r<=250)return{code:.5,text:(0,n.fU)(r,t),time:r};if(250<r)return{code:0,text:(0,n.fU)(r,t),time:r}}return{code:7,text:"發生錯誤",time:-5}}function u(e,t){var r=e.length;if(0===t){var n=0,i=0;return 4===r&&(n=parseInt(e.substring(0,2)),i=parseInt(e.substring(2,4))),2===r&&(i=parseInt(e)),{type:"moment",hours:n,minutes:i}}if(1===t){var a=0,o=0;if(4===r){var u=parseInt(e.substring(0,2)),f=parseInt(e.substring(2,4));a=Math.min(u,f),o=Math.max(u,f)}if(2===r){var s=parseInt(e);a=s,o=s}return{type:"range",min:a,max:o}}}function f(e,t,r,n,a){var o,u={},f={},s=i(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;f[l.BusID]=l}}catch(e){s.e(e)}finally{s.f()}var c,y=i(e);try{for(y.s();!(c=y.n()).done;){var p=c.value,d={};d.CarType=p.CarType,d.BusStatus=p.BusStatus,d.BusID=p.BusID,d.CarOnStop=p.CarOnStop;var m=parseInt(p.RouteID),v=String(p.BusID),h=!1,g=0;m===n||a.indexOf(m)>-1||m===10*n?(h=!0,g=v.charCodeAt(0)*Math.pow(10,-5)):(h=!1,g=v.charCodeAt(0)),d.onThisRoute=h,d.index=g;var b={};if(f.hasOwnProperty(v)){b=f[v],d.position={latitude:parseFloat(b.Latitude),longitude:parseFloat(b.Longitude)};var w={},S=!1;for(var A in r){var I=r[A];if(I.pid.indexOf(m)>-1){w=I,S=!0;break}}d.RouteName=S?w.n:"未知路線",d.RouteID=S?w.id:null;var _=`s_${p.StopID}`;u.hasOwnProperty(_)||(u[_]=[]),u[_].push(d)}}}catch(e){y.e(e)}finally{y.f()}return u}function s(e,t,r,n){var a,o={},u={},f=i(t);try{for(f.s();!(a=f.n()).done;){var s=a.value;u[s.BusID]=s}}catch(e){f.e(e)}finally{f.f()}var l,c=i(e);try{for(c.s();!(l=c.n()).done;){var y=l.value,p={},d=parseInt(y.StopID),m=parseInt(y.RouteID),v=String(y.BusID);if(!(n.indexOf(d)<0)){p.index=v.charCodeAt(0),p.onThisRoute=!0,p.CarType=y.CarType,p.BusStatus=y.BusStatus,p.BusID=y.BusID,p.CarOnStop=y.CarOnStop;var h={};if(u.hasOwnProperty(v)){h=u[v],p.position={latitude:parseFloat(h.Latitude),longitude:parseFloat(h.Longitude)};var g={},b=!1;for(var w in r){var S=r[w];if(S.pid.indexOf(m)>-1){g=S,b=!0;break}}p.RouteName=b?g.n:"未知路線",p.RouteID=b?g.id:null;var A=`s_${d}`;o.hasOwnProperty(A)||(o[A]=[]),o[A].push(p)}}}}catch(e){c.e(e)}finally{c.f()}return o}function l(e){var t="";switch(e){case"0":t="一般";break;case"1":t="低底盤";break;case"2":t="大復康巴士";break;case"3":t="狗狗友善專車";break;default:t="未知類型"}return t}function c(e){var t="";switch(e){case"0":t="離站";break;case"1":t="進站";break;default:t="未知狀態"}return t}function y(e){var t="";switch(e){case"0":t="正常";break;case"1":t="車禍";break;case"2":t="故障";break;case"3":t="塞車";break;case"4":t="緊急求援";break;case"5":t="加油";break;case"99":t="非營運狀態";break;default:t="未知狀態"}return t}function p(e){var t={},r=l(e.CarType);t.type=r;var n=c(e.CarOnStop),i=y(e.BusStatus);return t.carNumber=e.BusID,t.status={onStop:n,situation:i,text:`${n} | ${i}`},t.RouteName=e.RouteName,t.onThisRoute=e.onThisRoute,t.index=e.index,t.position=e.position,t}},4293(e,t,r){r.d(t,{a:()=>p});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,l={};function c(e){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(e){var t=new Worker(new URL(r.p+r.u(148),r.b));return yield new Promise(function(r,n){t.onmessage=function(e){r(e.data),t.terminate()},t.onerror=function(e){n(e.message),t.terminate()},t.postMessage(e)})})).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return d=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,10],[1,10]].map(function(e){return{url:(0,a.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var i=t.value,f=yield(0,o.Fd)(i.url,e,`getRoute_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(e,f.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return yield t();var f="bus_route_cache",y=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===y){var p=yield t(),d=yield c(p);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(d)),s||(s=!0,l=d),d}if((new Date).getTime()-parseInt(y)>864e5){var m=yield t(),v=yield c(m);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(v)),s||(s=!0,l=v),v}if(!s){var h=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(h)}return(0,o.Mf)(e,"getRoute_0",0,!0),(0,o.Mf)(e,"getRoute_1",0,!0),(0,o.ZL)(e,-1),l}),d.apply(this,arguments)}},6788(e,t,r){r.d(t,{Fd:()=>s,LQ:()=>d,Mf:()=>y,ZL:()=>h,Zt:()=>g,_M:()=>p,gC:()=>b});var n=r(2284),i=r(467),a=r(4750),o=r(5579),u=r(8925),f={};function s(e,t,r,n){return l.apply(this,arguments)}function l(){return(l=(0,i.A)(function*(e,t,r,n){var i=new Error("FetchError"),o=new Date;if(f.hasOwnProperty(e)){if(f[e].processing)return yield new Promise(function(t,r){f[e].resolves.push(t),f[e].rejects.push(r)})}else f[e]={processing:!0,resolves:[],rejects:[]};var l=yield fetch(e);if(!l.ok)throw y(t,r,0,!0),new Error(`HTTP error! status: ${l.status}`);for(var c=parseInt(String(l.headers.get("content-length"))),p=l.body.getReader(),d=[],m=0;;){var v=yield p.read(),h=v.done,g=v.value;if(h)break;d.push(g),y(t,r,(m+=g.length)/c,!1)}for(var b=new Uint8Array(m),w=0,S=0,A=d;S<A.length;S++){var I=A[S];b.set(I,w),w+=I.length}var _,T=new Blob([b],{type:"application/gzip"}),O=yield T.arrayBuffer(),L=yield(0,a.h)(O);switch(n){case"json":_=/^<!doctype html>/.test(L)?yield s(e.replace("https://tcgbusfs.blob.core.windows.net/","https://erichsia7.github.io/bus-alternative-static-apis/"),t,r,n):JSON.parse(L);break;case"xml":_=L}if(yield(0,u.N$)(c,o),_){if(f.hasOwnProperty(e)){for(var $=f[e].resolves.shift();$;)$(_),$=f[e].resolves.shift();delete f[e]}return _}if(f.hasOwnProperty(e)){for(var C=f[e].rejects.shift();C;)C(i),C=f[e].rejects.shift();delete f[e]}throw i})).apply(this,arguments)}var c={};function y(e,t,r,n){c.hasOwnProperty(e)||(c[e]={});var i=`t_${t}`;c[e].hasOwnProperty(i)?(n?c[e][i].expel=!0:(c[e][i].expel=!1,c[e][i].progress=r),m(e,"run")):(c[e][i]={expel:!1,progress:r,total:1},m(e,"start"))}function p(e){if(c.hasOwnProperty(e)&&"object"===(0,n.A)(c[e])){var t=0,r=0;for(var i in c[e])c[e][i].expel||(t+=c[e][i].total,r+=c[e][i].progress);var a=Math.min(Math.max(r/t,0),1);return a===1/0||isNaN(a)?1:a}return 1}function d(e){c.hasOwnProperty(e)&&(delete c[e],m(e,"end"))}function m(e,t){var r={target:e,stage:t,progress:p(e)},n=new CustomEvent(e,{detail:r});document.dispatchEvent(n)}var v={};function h(e,t){v.hasOwnProperty(e)||(v[e]=0);var r=0;"string"==typeof t&&(r=(0,o.Zn)(t)),r>v[e]&&(v[e]=r)}function g(e){return v.hasOwnProperty(e)?1*v[e]:0}function b(e){v.hasOwnProperty(e)&&delete v[e]}},8201(e,t,r){r.d(t,{Y:()=>c});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,l={};function c(e){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,12],[1,12]].map(function(e){return{url:(0,a.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var i=t.value,f=yield(0,o.Fd)(i.url,e,`getSemiTimeTable_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(e,f.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_semi_timetable_cache",c=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===c){var y=yield t();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(y)),s||(s=!0,l=y),y}if((new Date).getTime()-parseInt(c)>12096e5){var p=yield t();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(p)),p}if(!s){var d=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(d)}return(0,o.Mf)(e,"getSemiTimeTable_0",0,!0),(0,o.Mf)(e,"getSemiTimeTable_1",0,!0),(0,o.ZL)(e,-1),l}),y.apply(this,arguments)}},8671(e,t,r){r.d(t,{s:()=>c});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=!1,l={};function c(e){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(e){function t(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var t,r=[],n=u([[0,14],[1,14]].map(function(e){return{url:(0,a.y)(e[0],e[1]),e}}));try{for(n.s();!(t=n.n()).done;){var i=t.value,f=yield(0,o.Fd)(i.url,e,`getTimeTable_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(e,f.EssentialInfo.UpdateTime)}}catch(e){n.e(e)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_timetable_cache",c=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===c){var y=yield t();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(y)),s||(s=!0,l=y),y}if((new Date).getTime()-parseInt(c)>12096e5){var p=yield t();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(p)),p}if(!s){var d=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(d)}return(0,o.Mf)(e,"getTimeTable_0",0,!0),(0,o.Mf)(e,"getTimeTable_1",0,!0),(0,o.ZL)(e,-1),l}),y.apply(this,arguments)}}}]);
//# sourceMappingURL=ed094c9edc132279e8fe.js.map