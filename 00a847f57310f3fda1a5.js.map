{"version":3,"file":"00a847f57310f3fda1a5.js","mappings":"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","sources":["webpack://bus/./src/interface/storage/index.ts","webpack://bus/./src/interface/search/index.ts","webpack://bus/./src/interface/settings/index.ts","webpack://bus/./src/interface/settings/options.ts","webpack://bus/./src/interface/sizes.ts"],"sourcesContent":["import { getStoresSizeStatistics, StoreSize, StoreSizeStatistics } from '../../data/analytics/storage-size';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getSize } from '../sizes';\n\nlet previousCategories: Array<StoreSize> = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst StorageField = documentQuerySelector('.css_storage_field');\nconst StorageBodyElement = elementQuerySelector(StorageField, '.css_storage_body');\nconst StatisticsElement = elementQuerySelector(StorageBodyElement, '.css_storage_statistics');\n\nfunction generateElementOfItem(): HTMLElement {\n  // Create root element\n  const statisticsItemElement = document.createElement('div');\n  statisticsItemElement.classList.add('css_storage_statistics_item');\n\n  // Create name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_storage_statistics_item_name');\n\n  // Create value element\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_storage_statistics_item_value');\n\n  // Append children\n  statisticsItemElement.appendChild(nameElement);\n  statisticsItemElement.appendChild(valueElement);\n\n  return statisticsItemElement;\n}\n\nfunction updateStorageField(statistics: StoreSizeStatistics, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(element: HTMLElement, currentItem: StoreSize, previousItem: StoreSize | null): void {\n    function updateValue(element: HTMLElement, item: StoreSize): void {\n      const typeElement = elementQuerySelector(element, '.css_storage_statistics_item_value');\n      typeElement.innerText = item.size;\n    }\n\n    function updateName(element: HTMLElement, item: StoreSize): void {\n      const nameElement = elementQuerySelector(element, '.css_storage_statistics_item_name');\n      nameElement.innerText = item.category.name;\n    }\n\n    function updateAnimation(element: HTMLElement, animation: boolean): void {\n      element.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(element: HTMLElement, skeletonScreen: boolean): void {\n      element.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.category.key !== previousItem.category.key) {\n        updateName(element, currentItem);\n        updateValue(element, currentItem);\n      }\n\n      if (currentItem.size !== previousItem.size) {\n        updateValue(element, currentItem);\n      }\n\n      if (previousAnimation !== animation) {\n        updateAnimation(element, animation);\n      }\n\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(element, skeletonScreen);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateValue(element, currentItem);\n      updateName(element, currentItem);\n      updateAnimation(element, animation);\n      updateSkeletonScreen(element, skeletonScreen);\n    }\n  }\n\n  const categories = [];\n  for (const key in statistics.categorizedSizes) {\n    const item = statistics.categorizedSizes[key];\n    categories.push(item);\n  }\n\n  const categoriesQuantity = categories.length;\n  const currentItemCapacity = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item').length;\n  if (categoriesQuantity !== currentItemCapacity) {\n    const difference = currentItemCapacity - categoriesQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newElement = generateElementOfItem();\n        fragment.appendChild(newElement);\n      }\n      StatisticsElement.appendChild(fragment);\n    } else {\n      const statisticsItemElements2 = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const itemIndex = currentItemCapacity - 1 - o;\n        statisticsItemElements2[itemIndex].remove();\n      }\n    }\n  }\n\n  const statisticsItemElements = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item');\n  for (let i = 0; i < categoriesQuantity; i++) {\n    const previousItem = previousCategories[i];\n    const currentItem = categories[i];\n    const thisItemElement = statisticsItemElements[i];\n    if (previousItem) {\n      updateItem(thisItemElement, currentItem, previousItem);\n    } else {\n      updateItem(thisItemElement, currentItem, null);\n    }\n  }\n\n  previousCategories = categories;\n  previousSkeletonScreen = skeletonScreen;\n  previousAnimation = animation;\n}\n\nfunction setUpStorageFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultCategoriesQuantity = Math.min(7, Math.floor(getSize('window')[1] / 55) + 2);\n  const statistics: StoreSizeStatistics = {\n    categorizedSizes: {},\n    totalSize: 0\n  };\n  for (let i = 0; i < defaultCategoriesQuantity; i++) {\n    const categoryKey = `store-${i}`;\n    statistics.categorizedSizes[categoryKey] = {\n      category: {\n        name: '',\n        key: categoryKey\n      },\n      size: `size-${i}`\n    };\n  }\n  updateStorageField(statistics, true, playing_animation);\n}\n\nasync function refreshStorageStatistics() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  setUpStorageFieldSkeletonScreen();\n  const statistics = await getStoresSizeStatistics();\n  updateStorageField(statistics, false, playing_animation);\n}\n\nexport function openStorage(): void {\n  StorageField.setAttribute('displayed', 'true');\n  refreshStorageStatistics();\n}\n\nexport function closeStorage(): void {\n  StorageField.setAttribute('displayed', 'false');\n}\n","import { prepareForSearch, searchFor, SearchItem, SearchResult } from '../../data/search/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { drawRoundedRect } from '../../tools/graphic';\nimport { supportTouch } from '../../tools/index';\nimport { getCSSVariableValue } from '../../tools/style';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { openBus } from '../bus/index';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getBlankIconElement, getIconElement, setIcon } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { pushPageHistory, revokePageHistory, scrollDocumentToTop } from '../index';\nimport { openLocation } from '../location/index';\nimport { promptMessage } from '../prompt/index';\nimport { openRoute } from '../route/index';\nimport { getSize } from '../sizes';\n\nlet previousSearchResults: Array<SearchResult> = [];\n\nconst searchField = documentQuerySelector('.css_search_field');\nconst searchHeadElement = elementQuerySelector(searchField, '.css_search_head');\nconst searchBodyElement = elementQuerySelector(searchField, '.css_search_body');\nconst searchInputElement = elementQuerySelector(searchHeadElement, '.css_search_search_input #search_input') as HTMLInputElement;\nconst searchInputCanvasElement = elementQuerySelector(searchHeadElement, '.css_search_search_input canvas') as HTMLCanvasElement;\nconst searchTypeFilterButtonElement = elementQuerySelector(searchHeadElement, '.css_search_button_right');\nconst searchResultsElement = elementQuerySelector(searchBodyElement, '.css_search_results');\nconst searchKeyboardElement = elementQuerySelector(searchBodyElement, '.css_search_keyboard');\n\nconst searchInputCanvasContext = searchInputCanvasElement.getContext('2d');\nconst searchInputPlaceholder = '搜尋路線、地點、公車';\nconst searchInputCanvasScale = window.devicePixelRatio;\n\nconst padding: number = 15 * searchInputCanvasScale;\nconst cursorWidth: number = 1.8 * searchInputCanvasScale;\nconst cursorBorderRadius: number = 0.9 * searchInputCanvasScale;\nconst selectionHighlightBorderRadius: number = 4 * searchInputCanvasScale;\nconst lineHeight: number = 25 * searchInputCanvasScale;\nconst fontWeight: string = '400';\nconst fontSize: number = 20 * searchInputCanvasScale;\nconst fontFamily: string = '\"Noto Sans TC\", sans-serif';\n\nconst keyboardRows: Array<[string, string, string, string, string]> = [\n  ['紅', '藍', '1', '2', '3'],\n  ['綠', '棕', '4', '5', '6'],\n  ['橘', '小', '7', '8', '9'],\n  ['鍵盤', '幹線', '清空', '0', '刪除']\n];\n\nlet textColor: string = getCSSVariableValue('--b-cssvar-333333');\nlet placeholderTextColor: string = getCSSVariableValue('--b-cssvar-aeaeb2');\nlet cursorColor: string = getCSSVariableValue('--b-cssvar-main-color');\nlet textWidth: number = 0;\nlet textWidthToCursorStart: number = 0;\nlet selectedTextWidth: number = 0;\nlet selection: boolean = false;\nlet cursorOffset: number = 0;\nlet size = getSize('head_two_button');\nlet width = size[0] * searchInputCanvasScale;\nlet height = size[1] * searchInputCanvasScale;\nlet playingCursorAnimation: boolean = false;\nlet keyboardInitialized = false;\n\nexport function typeTextIntoInput(value): void {\n  const currentValue = getSearchInputValue();\n  const newValue = `${currentValue}${value}`;\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function deleteCharFromInput(): void {\n  const currentValue = getSearchInputValue();\n  const newValue = currentValue.substring(0, currentValue.length - 1);\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function emptyInput(): void {\n  searchInputElement.value = '';\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function openSystemKeyboard(event: Event): void {\n  event.preventDefault();\n  searchInputElement.focus();\n  scrollDocumentToTop();\n}\n\nfunction initializeKeyboard(): void {\n  if (!keyboardInitialized) {\n    keyboardInitialized = true;\n    const fragment = new DocumentFragment();\n    for (const row of keyboardRows) {\n      for (const item of row) {\n        const newButtonElement = document.createElement('button');\n        newButtonElement.classList.add('css_search_keyboard_key');\n        const eventName = supportTouch() ? 'touchstart' : 'mousedown';\n        switch (item) {\n          case '刪除':\n            newButtonElement.addEventListener(eventName, deleteCharFromInput);\n            newButtonElement.appendChild(getIconElement('backspace'));\n            break;\n          case '清空':\n            newButtonElement.addEventListener(eventName, emptyInput);\n            newButtonElement.innerText = item;\n            break;\n          case '鍵盤':\n            newButtonElement.addEventListener(eventName, openSystemKeyboard);\n            newButtonElement.appendChild(getIconElement('keyboard'));\n            break;\n          default:\n            // Use an IIFE (Immediately Invoked Function Expression) to create a new scope for each item value. This ensures that the item variable is captured by value rather than by reference.\n            newButtonElement.addEventListener(\n              eventName,\n              (function (currentItem) {\n                return function () {\n                  typeTextIntoInput(currentItem);\n                };\n              })(item)\n            );\n            newButtonElement.innerText = item;\n            break;\n        }\n\n        fragment.appendChild(newButtonElement);\n      }\n    }\n    searchKeyboardElement.append(fragment);\n  }\n}\n\nexport function openKeyboard(): void {\n  initializeKeyboard();\n  searchKeyboardElement.setAttribute('displayed', 'true');\n  playingCursorAnimation = true;\n  animateCursor();\n  updateSearchInput(-1, -1);\n}\n\nexport function closeKeyboard(): void {\n  searchKeyboardElement.setAttribute('displayed', 'false');\n  playingCursorAnimation = false;\n}\n\nexport function getSearchTypeFilterValue(): SearchItem['type'] | -1 {\n  return parseInt(searchTypeFilterButtonElement.getAttribute('type'));\n}\n\nexport function getSearchInputValue(): string {\n  return String(searchInputElement.value);\n}\n\nexport function updateSearchInput(cursorStart: number, cursorEnd: number): void {\n  let value = getSearchInputValue();\n  let empty = false;\n  if (value.length === 0) {\n    value = searchInputPlaceholder;\n    empty = true;\n    cursorStart = 0;\n    cursorEnd = 0;\n  } else {\n    if (cursorStart === -1 && cursorEnd === -1) {\n      cursorStart = value.length;\n      cursorEnd = cursorStart * 1;\n    }\n  }\n\n  size = getSize('head_two_button');\n  width = size[0] * searchInputCanvasScale;\n  height = size[1] * searchInputCanvasScale;\n  textColor = getCSSVariableValue('--b-cssvar-333333');\n  placeholderTextColor = getCSSVariableValue('--b-cssvar-aeaeb2');\n  cursorColor = getCSSVariableValue('--b-cssvar-main-color');\n\n  searchInputCanvasContext.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n  searchInputCanvasContext.textAlign = 'center';\n  searchInputCanvasContext.textBaseline = 'middle';\n\n  textWidth = searchInputCanvasContext.measureText(value).width;\n  textWidthToCursorStart = searchInputCanvasContext.measureText(value.substring(0, cursorStart)).width;\n  selectedTextWidth = searchInputCanvasContext.measureText(value.substring(cursorStart, cursorEnd)).width;\n  cursorOffset = empty ? 1 : Math.max(1, textWidthToCursorStart);\n\n  searchInputCanvasContext.clearRect(0, 0, width, height);\n\n  if (cursorStart === cursorEnd) {\n    selection = true;\n    searchInputCanvasContext.globalAlpha = 1;\n    searchInputCanvasContext.fillStyle = empty ? placeholderTextColor : textColor;\n    searchInputCanvasContext.fillText(value, textWidth / 2 + (Math.min(cursorOffset, width - padding) - cursorOffset), height / 2);\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, cursorWidth, lineHeight, cursorBorderRadius, cursorColor);\n  } else {\n    selection = false;\n    searchInputCanvasContext.globalAlpha = 0.27;\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, selectedTextWidth, lineHeight, selectionHighlightBorderRadius, cursorColor);\n    searchInputCanvasContext.globalAlpha = 1;\n    searchInputCanvasContext.fillStyle = empty ? placeholderTextColor : textColor;\n    searchInputCanvasContext.fillText(value, textWidth / 2 + (Math.min(cursorOffset, width - padding) - cursorOffset), height / 2);\n    searchInputCanvasContext.globalAlpha = 0.08;\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, selectedTextWidth, lineHeight, selectionHighlightBorderRadius, cursorColor);\n  }\n}\n\nexport function resizeSearchInputCanvas(): void {\n  size = getSize('head_two_button');\n  width = size[0] * searchInputCanvasScale;\n  height = size[1] * searchInputCanvasScale;\n  searchInputCanvasElement.width = width;\n  searchInputCanvasElement.height = height;\n  updateSearchInput(-1, -1);\n}\n\nfunction animateCursor(): void {\n  const x = performance.now();\n  const alpha = 1 - Math.pow(Math.sin((Math.PI * x) / 960), 4);\n  if (selection) {\n    searchInputCanvasContext.globalAlpha = alpha;\n    searchInputCanvasContext.clearRect(Math.min(cursorOffset, width - padding) - 1, 0, cursorWidth + 2, height);\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, cursorWidth, lineHeight, cursorBorderRadius, cursorColor);\n  }\n  if (playingCursorAnimation) {\n    window.requestAnimationFrame(animateCursor);\n  }\n}\n\nfunction generateElementOfSearchResultItem(): HTMLElement {\n  const searchResultItemElement = document.createElement('div');\n  searchResultItemElement.classList.add('css_search_search_result');\n\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_search_search_result_name');\n\n  const typeElement = document.createElement('div');\n  typeElement.classList.add('css_search_search_result_type');\n  typeElement.appendChild(getBlankIconElement());\n\n  searchResultItemElement.appendChild(typeElement);\n  searchResultItemElement.appendChild(nameElement);\n  return searchResultItemElement;\n}\n\nexport function updateSearchResult(): void {\n  const typeToIcon: Array<MaterialSymbols> = ['route', 'location_on', 'directions_bus'];\n\n  function updateItem(element: HTMLElement, currentItem: SearchResult, previousItem: SearchResult | null): void {\n    function updateTypeIcon(item: SearchResult, element: HTMLElement): void {\n      const thisSearchResultTypeElement = elementQuerySelector(element, '.css_search_search_result_type');\n      setIcon(thisSearchResultTypeElement, typeToIcon[item.item.type]);\n    }\n\n    function updateName(item: SearchResult, element: HTMLElement): void {\n      const nameElement = elementQuerySelector(element, '.css_search_search_result_name');\n      nameElement.innerText = item.item.n;\n    }\n\n    function updateClickHandler(item: SearchResult, element: HTMLElement): void {\n      switch (item.item.type) {\n        case 0:\n          element.onclick = function () {\n            openRoute(item.item.id as number, item.item.pid);\n          };\n          break;\n        case 1:\n          element.onclick = function () {\n            openLocation(item.item.hash);\n          };\n          break;\n        case 2:\n          element.onclick = function () {\n            openBus(item.item.id as number);\n          };\n          break;\n        default:\n          break;\n      }\n    }\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.item.type !== previousItem.item.type) {\n        updateTypeIcon(currentItem, element);\n      }\n      if (currentItem.item.id !== previousItem.item.id) {\n        updateName(currentItem, element);\n        updateClickHandler(currentItem, element);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateTypeIcon(currentItem, element);\n      updateName(currentItem, element);\n      updateClickHandler(currentItem, element);\n    }\n  }\n\n  const currentType = getSearchTypeFilterValue();\n  const currentValue = getSearchInputValue();\n  if (!containPhoneticSymbols(currentValue)) {\n    const searchResults = searchFor(currentValue, currentType, 30);\n    const searchResultLength = searchResults.length;\n    const currentItemCapacity = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result').length;\n    if (searchResultLength !== currentItemCapacity) {\n      const difference = currentItemCapacity - searchResultLength;\n      if (difference < 0) {\n        const fragment = new DocumentFragment();\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const newElement = generateElementOfSearchResultItem();\n          fragment.appendChild(newElement);\n        }\n        searchResultsElement.appendChild(fragment);\n      } else {\n        const searchResultElements2 = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const itemIndex = currentItemCapacity - 1 - o;\n          searchResultElements2[itemIndex].remove();\n        }\n      }\n    }\n\n    const searchResultElements = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result');\n    for (let i = 0; i < searchResultLength; i++) {\n      const previousItem = previousSearchResults[i];\n      const currentItem = searchResults[i];\n      const thisItemElement = searchResultElements[i];\n      if (previousItem) {\n        updateItem(thisItemElement, currentItem, previousItem);\n      } else {\n        updateItem(thisItemElement, currentItem, null);\n      }\n    }\n    previousSearchResults = searchResults;\n  }\n}\n\nexport function switchSearchTypeFilter(): void {\n  const currentType = getSearchTypeFilterValue();\n  let newType: number = -1;\n  if (currentType >= -1 && currentType < 2) {\n    newType = currentType + 1;\n  } else {\n    newType = -1;\n  }\n  const icons: Array<MaterialSymbols> = ['filter_list', 'route', 'location_on', 'directions_bus'];\n  setIcon(searchTypeFilterButtonElement, icons[newType + 1]);\n  searchTypeFilterButtonElement.setAttribute('type', newType.toString());\n  updateSearchResult();\n}\n\nexport function openSearch(): void {\n  if (dataDownloadCompleted) {\n    pushPageHistory('Search');\n    searchField.setAttribute('displayed', 'true');\n    openKeyboard();\n    prepareForSearch();\n  } else {\n    promptMessage('download_for_offline', '資料還在下載中');\n  }\n}\n\nexport function closeSearch(): void {\n  revokePageHistory('Search');\n  closeKeyboard();\n  searchField.setAttribute('displayed', 'false');\n}\n","import { exportData } from '../../data/export/index';\nimport { importData } from '../../data/import/index';\nimport { listSettings, Setting } from '../../data/settings/index';\nimport { getTreeURLOfCurrentVersion } from '../../data/settings/version';\nimport { askForPersistentStorage } from '../../data/storage/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier, releaseFile } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst SettingsField = documentQuerySelector('.css_settings_field');\nconst SettingsBodyElement = elementQuerySelector(SettingsField, '.css_settings_body');\nconst SettingsElement = elementQuerySelector(SettingsBodyElement, '.css_settings');\n\nfunction generateElementOfItem(item: Setting): HTMLElement {\n  const settingElement = document.createElement('div');\n  settingElement.classList.add('css_setting');\n  settingElement.setAttribute('type', item.type);\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_setting_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_setting_name');\n  nameElement.innerText = item.name;\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_setting_status');\n  statusElement.innerText = item.status;\n\n  // Arrow\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_setting_arrow');\n  const arrowSpanElement = document.createElement('span');\n  arrowSpanElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(arrowSpanElement);\n\n  // Event handler (lambda)\n  if (typeof item.action === 'function') {\n    settingElement.onclick = function () {\n      item.action();\n    };\n  } else if (typeof item.action === 'string') {\n    settingElement.setAttribute('onclick', item.action);\n  }\n\n  // Assemble\n  settingElement.appendChild(iconElement);\n  settingElement.appendChild(nameElement);\n  settingElement.appendChild(statusElement);\n  settingElement.appendChild(arrowElement);\n\n  return settingElement;\n}\n\nasync function initializeSettingsField() {\n  const list = await listSettings();\n  SettingsElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of list) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement);\n  }\n  SettingsElement.append(fragment);\n}\n\nexport function openSettings(): void {\n  pushPageHistory('Settings');\n  SettingsField.setAttribute('displayed', 'true');\n  initializeSettingsField();\n}\n\nexport function closeSettings(): void {\n  revokePageHistory('Settings');\n  SettingsField.setAttribute('displayed', 'false');\n}\n\nexport async function downloadExportFile() {\n  promptMessage('manufacturing', '資料匯出中');\n  const content = await exportData();\n  releaseFile(content, 'application/json', 'bus-export.json');\n}\n\nexport function openFileToImportData(): void {\n  const identifier = generateIdentifier();\n  const fileInput = document.createElement('input');\n  fileInput.setAttribute('type', 'file');\n  fileInput.setAttribute('accept', 'application/json');\n  fileInput.setAttribute('name', identifier);\n  fileInput.id = identifier;\n  fileInput.classList.add('css_import_file_input');\n  fileInput.addEventListener(\n    'change',\n    function (event) {\n      // Check if a file is selected\n      if (event.target.files.length === 0) {\n        documentQuerySelector(`body #${identifier}`).remove();\n      } else {\n        // Get the first file selected by the user\n        const file = event.target.files[0];\n        const reader = new FileReader();\n\n        // When the file is successfully read\n        reader.onload = function (e) {\n          // Get the file content as text\n          const fileTextContent = e.target.result;\n\n          // Import the data\n          importData(fileTextContent).then((f) => {\n            if (f) {\n              promptMessage('check_circle', '已匯入資料');\n            } else {\n              promptMessage('error', '無法匯入資料');\n            }\n            documentQuerySelector(`body #${identifier}`).remove();\n          });\n        };\n\n        // Read the file as text\n        reader.readAsText(file);\n      }\n    },\n    { once: true }\n  );\n  fileInput.addEventListener(\n    'cancel',\n    function () {\n      documentQuerySelector(`body #${identifier}`).remove();\n    },\n    { once: true }\n  );\n\n  document.body.append(fileInput);\n  documentQuerySelector(`body #${identifier}`).click();\n}\n\nexport function viewSourceCodeOfCurrentVersion(): void {\n  const url = getTreeURLOfCurrentVersion();\n  window.open(url);\n}\n\nexport function viewGitHubRepository(): void {\n  const url = 'https://github.com/EricHsia7/bus';\n  window.open(url);\n}\n\nexport function showPromptToAskForPersistentStorage(): void {\n  askForPersistentStorage().then((e) => {\n    switch (e) {\n      case 'granted':\n        promptMessage('check_circle', '已開啟永久儲存');\n        break;\n      case 'denied':\n        promptMessage('cancel', '永久儲存權限已被拒絕');\n        break;\n      case 'unsupported':\n        promptMessage('warning', '此瀏覽器不支援永久儲存');\n        break;\n      default:\n        promptMessage('error', '發生錯誤');\n        break;\n    }\n  });\n}\n","import { changeSettingOption, getSetting, SettingSelect, SettingSelectOption } from '../../data/settings/index';\nimport { documentQuerySelector, documentQuerySelectorAll, elementQuerySelector } from '../../tools/elements';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\n\nconst SettingsOptionsField = documentQuerySelector('.css_settings_options_field');\nconst SettingsOptionsBodyElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_body');\nconst SettingsOptionsOptionsElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_settings_options');\nconst SettingsOptionsDescriptionElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_options_description');\nconst SettingsOptionsHeadElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_head');\nconst SettingsOptionsTitleElement = elementQuerySelector(SettingsOptionsHeadElement, '.css_settings_options_title');\n\nfunction generateElementOfItem(setting: SettingSelect, item: SettingSelectOption, index: number): HTMLElement {\n  const optionElement = document.createElement('div');\n  optionElement.classList.add('css_option');\n\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_option_name');\n  nameElement.innerText = item.name;\n\n  const checkboxContainerElement = document.createElement('div');\n  checkboxContainerElement.classList.add('css_option_checkbox');\n\n  const checkboxElement = document.createElement('input');\n  checkboxElement.type = 'checkbox';\n  checkboxElement.checked = setting.option === index;\n  checkboxElement.onclick = (event) => {\n    settingsOptionsHandler(event, setting.key, index);\n  };\n\n  checkboxContainerElement.appendChild(checkboxElement);\n  optionElement.appendChild(nameElement);\n  optionElement.appendChild(checkboxContainerElement);\n\n  return optionElement;\n}\n\nfunction initializeSettingsOptionsField(settingKey: string): void {\n  const setting = getSetting(settingKey) as SettingSelect;\n  SettingsOptionsTitleElement.innerText = setting.name;\n  SettingsOptionsDescriptionElement.innerText = setting.description;\n  SettingsOptionsOptionsElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  let index: number = 0;\n  for (const item of setting.options) {\n    const thisElement = generateElementOfItem(setting, item, index);\n    fragment.appendChild(thisElement);\n    index += 1;\n  }\n  SettingsOptionsOptionsElement.append(fragment);\n}\n\nexport function openSettingsOptions(settingKey: string): void {\n  pushPageHistory('SettingsOptions');\n  SettingsOptionsField.setAttribute('displayed', 'true');\n  initializeSettingsOptionsField(settingKey);\n  closePreviousPage();\n}\n\nexport function closeSettingsOptions(): void {\n  // revokePageHistory('SettingsOptions');\n  SettingsOptionsField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function settingsOptionsHandler(event: Event, settingKey: string, index: number): void {\n  const checkboxes = documentQuerySelectorAll('.css_settings_options_field .css_settings_options_body .css_settings_options .css_option .css_option_checkbox input[type=\"checkbox\"]') as NodeListOf<HTMLInputElement>;\n  for (const checkbox of checkboxes) {\n    checkbox.checked = false;\n  }\n  const target = event.target as HTMLInputElement;\n  target.checked = true;\n  changeSettingOption(settingKey, index);\n}\n","export let Sizes: SizesMap = {\n  window: [0, 0],\n  head: [0, 0],\n  head_one_button: [0, 0],\n  head_two_button: [0, 0],\n  route_details_canvas: [0, 0],\n  route_bus_arrival_time_chart: [0, 0],\n  location_bus_arrival_time_chart: [0, 0]\n};\n\nexport type SizeType = 'window' | 'head' | 'head_one_button' | 'head_two_button' | 'route_details_canvas' | 'route_bus_arrival_time_chart' | 'location_bus_arrival_time_chart';\n\nexport type Size = [width: number, height: number];\n\nexport type SizesMap = {\n  [sizeType: string]: Size;\n};\n\nexport function getSize(sizeType: SizeType): Size {\n  return Sizes[sizeType];\n}\n\nexport function updateSizes(): void {\n  const w = window.innerWidth;\n  const h = window.innerHeight;\n  Sizes.window = [w, h];\n  Sizes.head = [w, 55];\n  Sizes.head_one_button = [w - 55, 55];\n  Sizes.head_two_button = [w - 55 * 2, 55];\n  Sizes.route_details_canvas = [w - 10 * 2 - 10 * 2, 24 * 70];\n  Sizes.route_bus_arrival_time_chart = [w - 45 - 15 - 20, 75];\n  Sizes.location_bus_arrival_time_chart = [w - 30 - 20, 75];\n}\n"],"names":["previousCategories","previousAnimation","previousSkeletonScreen","StorageField","documentQuerySelector","StorageBodyElement","elementQuerySelector","StatisticsElement","generateElementOfItem","statisticsItemElement","document","createElement","classList","add","nameElement","valueElement","appendChild","updateStorageField","statistics","skeletonScreen","animation","updateItem","element","currentItem","previousItem","updateValue","item","innerText","size","updateName","category","name","updateAnimation","setAttribute","booleanToString","updateSkeletonScreen","key","categories","categorizedSizes","push","categoriesQuantity","length","currentItemCapacity","elementQuerySelectorAll","difference","fragment","DocumentFragment","o","d","Math","abs","newElement","statisticsItemElements2","remove","statisticsItemElements","i","thisItemElement","_refreshStorageStatistics","_asyncToGenerator","playing_animation","getSettingOptionValue","defaultCategoriesQuantity","min","floor","getSize","totalSize","categoryKey","setUpStorageFieldSkeletonScreen","getStoresSizeStatistics","apply","arguments","openStorage","refreshStorageStatistics","closeStorage","previousSearchResults","searchField","searchHeadElement","searchBodyElement","searchInputElement","searchInputCanvasElement","searchTypeFilterButtonElement","searchResultsElement","searchKeyboardElement","searchInputCanvasContext","getContext","searchInputCanvasScale","window","devicePixelRatio","padding","cursorWidth","cursorBorderRadius","selectionHighlightBorderRadius","lineHeight","fontSize","keyboardRows","textColor","getCSSVariableValue","placeholderTextColor","cursorColor","textWidth","textWidthToCursorStart","selectedTextWidth","selection","cursorOffset","width","height","playingCursorAnimation","keyboardInitialized","deleteCharFromInput","currentValue","getSearchInputValue","newValue","substring","value","updateSearchResult","updateSearchInput","scrollDocumentToTop","emptyInput","openSystemKeyboard","event","preventDefault","focus","openKeyboard","_step","_iterator","_createForOfIteratorHelper","s","n","done","_step2","_iterator2","newButtonElement","eventName","supportTouch","addEventListener","getIconElement","err","e","f","append","initializeKeyboard","animateCursor","getSearchTypeFilterValue","parseInt","getAttribute","String","cursorStart","cursorEnd","empty","font","textAlign","textBaseline","measureText","max","clearRect","globalAlpha","fillStyle","fillText","drawRoundedRect","resizeSearchInputCanvas","x","performance","now","alpha","pow","sin","PI","requestAnimationFrame","generateElementOfSearchResultItem","searchResultItemElement","typeElement","getBlankIconElement","typeToIcon","updateTypeIcon","thisSearchResultTypeElement","setIcon","type","updateClickHandler","onclick","openRoute","id","pid","openLocation","hash","openBus","currentType","containPhoneticSymbols","searchResults","searchFor","searchResultLength","searchResultElements2","searchResultElements","switchSearchTypeFilter","newType","toString","openSearch","dataDownloadCompleted","pushPageHistory","prepareForSearch","promptMessage","closeSearch","revokePageHistory","SettingsField","SettingsBodyElement","SettingsElement","settingElement","iconElement","iconSpanElement","icon","statusElement","status","arrowElement","arrowSpanElement","action","_initializeSettingsField","list","listSettings","innerHTML","thisElement","openSettings","initializeSettingsField","closeSettings","downloadExportFile","_downloadExportFile","content","exportData","releaseFile","openFileToImportData","identifier","generateIdentifier","fileInput","target","files","file","reader","FileReader","onload","fileTextContent","result","importData","then","readAsText","once","body","click","viewSourceCodeOfCurrentVersion","url","getTreeURLOfCurrentVersion","open","viewGitHubRepository","showPromptToAskForPersistentStorage","askForPersistentStorage","SettingsOptionsField","SettingsOptionsBodyElement","SettingsOptionsOptionsElement","SettingsOptionsDescriptionElement","SettingsOptionsHeadElement","SettingsOptionsTitleElement","setting","index","optionElement","checkboxContainerElement","checkboxElement","checked","option","settingKey","documentQuerySelectorAll","changeSettingOption","settingsOptionsHandler","openSettingsOptions","getSetting","description","options","initializeSettingsOptionsField","closePreviousPage","closeSettingsOptions","openPreviousPage","Sizes","head","head_one_button","head_two_button","route_details_canvas","route_bus_arrival_time_chart","location_bus_arrival_time_chart","sizeType","updateSizes","w","innerWidth","h","innerHeight"],"ignoreList":[],"sourceRoot":""}