"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[607],{972(e,t,n){n.d(t,{a:()=>c,b:()=>u});var a=n(2129),i=n(8024),r=n(9519),o={},s=!1;function c(e){if(!s){var t=e.dictionary.split(","),n=e.symbols,a=[],r={},c=0;for(var u in n){for(var p of(a.push(u),n[u])){var l=`w${p}`;(0,i.f)(r,l)||(r[l]=[]),r[l].push(c)}c++}o={dictionary:t,names:a,wordToSymbols:r},s=!0}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3;if(!s)return[];for(var c=o,u=c.dictionary,p=c.names,l=c.wordToSymbols,d=Math.round(p.length*i),v=Array.from(new Set(e.trim().toLowerCase().split(/[\s_-]+/))),f=v.length,y=new Uint8Array(f),m=new Int16Array(f).fill(-1),g=t;g<f;g++){y[g]=v[g].length;for(var h=0,b=u.length;h<b;h++){var _=(0,r.a)(v[g],u[h]);_<=y[g]&&(y[g]=_,m[g]=h)}}for(var S=[],w=f-1;w>=0;w--)if(!(m[w]<0)){var I=l[`w${m[w]}`]||[];n&&I.length>d||S.push(I)}var k=S.length;if(0===k)return[];S.sort(function(e,t){return e.length-t.length});for(var A=S[0],x=1;x<k;x++)A=(0,a.b)(A,S[x]);for(var $=[],D=0,E=A.length;D<E;D++){for(var O=0,C=f-1;C>=0;C--){if(!(m[C]<0))(l[`w${m[C]}`]||[]).indexOf(A[D])>-1&&(O-=C)}$.push({item:p[A[D]],score:O})}return $.sort(function(e,t){return t.score-e.score}),$}},1238(e,t,n){n.d(t,{a:()=>o,b:()=>s});var a=n(574),i=n(3459),r={current:-1,permission:{gained:!1,asked:!1},id:0};function o(){!1===r.permission.asked&&!0===(0,i.b)("display_user_orientation")&&(r.permission.asked=!0,"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(e){"granted"===e&&window.addEventListener("deviceorientation",function(e){e.absolute?r.current=(null==e?void 0:e.alpha)||-1:e.webkitCompassHeading?r.current=e.webkitCompassHeading||-1:r.current=(null==e?void 0:e.alpha)||-1},!0)}).catch(function(e){}):console.log("DeviceOrientation isn't supported."))}function s(){var e=r.current;if(-1===e)return{degree:-1,cardinalDirection:a.a};var t=e+90;t>360&&(t-=360),t*=Math.PI/180;var n=[Math.cos(t),Math.sin(t)];return{degree:e,cardinalDirection:(0,a.b)(n)}}},1531(e,t,n){n.d(t,{a:()=>o,b:()=>c});var a=n(7183),i=n(3459),r={current:{latitude:0,longitude:0},permission:{gained:!1,asked:!1},id:0};function o(){!1===r.permission.asked&&(0,i.b)("display_user_location")&&(r.permission.asked=!0,r.id=navigator.geolocation.watchPosition(function(e){r.permission.gained=!0,r.current.latitude=e.coords.latitude,r.current.longitude=e.coords.longitude},function(e){},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0}))}function s(){return r.permission.asked&&r.permission.gained?r.current:r.permission.asked||r.permission.gained?r.permission.asked&&!r.permission.gained?r.current:void 0:(o(),r.current)}function c(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:450,n=s(),i=1/0,r=-1,o=e.length-1;o>0;o--){var c=e[o],u=(0,a.c)(n.latitude,n.longitude,c.latitude,c.longitude);u<=t&&u<i&&(r=o,i=u)}return r>0?e[r]:null}},3251(e,t,n){n.d(t,{a:()=>l,b:()=>c,c:()=>s,d:()=>p,e:()=>u});var a=n(467),i=n(8179);function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new URLSearchParams(window.location.search);n.set("v",e);var a=window.location.pathname+"?"+n.toString();t?window.location.replace(a):history.replaceState(null,"",a)}function o(){return(o=(0,a.a)(function*(){try{var e=yield fetch(`./version.json?_=${(new Date).getTime()}`,{cache:"no-store"});if(!e.ok)throw new Error("E25");return e.json()}catch(e){return!1}})).apply(this,arguments)}function s(){return(0,i.c)('head meta[name="version-hash"]').getAttribute("content")}function c(){return(0,i.c)('head meta[name="version-branch-name"]').getAttribute("content")}function u(){return`https://github.com/EricHsia7/bus/tree/${(0,i.c)('head meta[name="version-full-hash"]').getAttribute("content")}`}function p(){return(0,i.c)('head meta[name="version-time-stamp"]').getAttribute("content")}function l(){return d.apply(this,arguments)}function d(){return d=(0,a.a)(function*(){var e=yield function(){return o.apply(this,arguments)}();return"boolean"==typeof e?!1===e?"fetchError":"unknownError":s()!==e.hash?(r(e.hash,!0),"refreshing"):(r(e.hash,!1),"ok")}),d.apply(this,arguments)}},3459(e,t,n){n.d(t,{a:()=>I,b:()=>x,c:()=>A,d:()=>h,e:()=>w,f:()=>_});var a=n(467),i=n(9499),r=n(8379),o=n(2174),s=n(7891),c=n(6104),u=n(6166),p=n(2994),l=n(8024),d=n(5579),v=n(3422),f=n(4311),y=n(3251),m=["time_formatting_mode","refresh_interval","display_user_location","display_user_orientation","location_labels","proxy","folder","personal_schedule","notification","playing_animation","power_saving","data_usage","storage","persistent_storage","export","import","version","branch","last_update_date","github"],g={time_formatting_mode:{key:"time_formatting_mode",name:"預估時間格式",icon:"glyphs",status:"",action:function(){(0,u.c)("time_formatting_mode")},type:"select",default_option:0,option:0,options:[{name:`${(0,d.e)(11,3)}/${(0,d.e)(61,3)}/${(0,d.e)(3661,3)}`,value:{type:1,number:3},resourceIntensive:!1,powerSavingAlternative:-1},{name:`${(0,d.e)(11,2)}/${(0,d.e)(61,2)}/${(0,d.e)(3661,2)}`,value:{type:1,number:2},resourceIntensive:!1,powerSavingAlternative:-1},{name:`${(0,d.e)(11,1)}/${(0,d.e)(61,1)}/${(0,d.e)(3661,1)}`,value:{type:1,number:1},resourceIntensive:!1,powerSavingAlternative:-1},{name:`${(0,d.e)(11,0)}/${(0,d.e)(61,0)}/${(0,d.e)(3661,0)}`,value:{type:1,number:0},resourceIntensive:!1,powerSavingAlternative:-1}],description:"在首頁、路線頁面、地點頁面上的預估公車到站時間的顯示格式。"},refresh_interval:{key:"refresh_interval",name:"預估時間更新頻率",icon:"pace",status:"",action:function(){(0,u.c)("refresh_interval")},type:"select",default_option:0,option:0,options:[{name:"自動",value:{baseInterval:15e3,dynamic:!0,type:3},resourceIntensive:!0,powerSavingAlternative:2},{name:"10秒",value:{baseInterval:1e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:2},{name:"20秒",value:{baseInterval:2e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:3},{name:"30秒",value:{baseInterval:3e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:4},{name:"40秒",value:{baseInterval:4e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:5},{name:"50秒",value:{baseInterval:5e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:6},{name:"60秒",value:{baseInterval:6e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:6}],description:"在首頁、路線頁面、地點頁面上的預估公車到站時間、公車等即時資料更新的頻率。"},display_user_location:{key:"display_user_location",name:"顯示所在位置",icon:"near_me",status:"",action:function(){(0,u.c)("display_user_location")},type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"是否在路線頁面上標註目前所在位置。若設為開啟，本應用程式將要求位置存取權限。"},display_user_orientation:{key:"display_user_orientation",name:"顯示裝置指向",icon:"explore",status:"",action:function(){(0,u.c)("display_user_orientation")},type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"是否在地點頁面上顯示裝置所指方向。若設為開啟，本應用程式將要求動作與方向存取權限。"},location_labels:{key:"location_labels",name:"站牌位置標籤",icon:"tag",status:"",action:function(){(0,u.c)("location_labels")},type:"select",default_option:0,option:0,options:[{name:"行徑方向",value:{type:0,string:"directions"},resourceIntensive:!1,powerSavingAlternative:-1},{name:"地址特徵",value:{type:0,string:"address"},resourceIntensive:!1,powerSavingAlternative:-1},{name:"英文字母",value:{type:0,string:"letters"},resourceIntensive:!1,powerSavingAlternative:-1}],description:"用於區分位於同個地點的不同站牌。行徑方向表示可搭乘路線從本站到下一站的方向（與車流同向）；地址特徵表示不同站牌的地址差異處；英文字母表示按照順序以字母編號。"},proxy:{key:"proxy",name:"網路代理",icon:"router",status:"",action:function(){(0,u.c)("proxy")},type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!1,powerSavingAlternative:-1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"使用網路代理來擷取資料。"},folder:{key:"folder",name:"資料夾",icon:"folder",status:"",type:"page",action:r.c,description:""},personal_schedule:{key:"personal_schedule",name:"個人化行程",icon:"calendar_view_day",status:"",action:s.d,type:"page",description:""},notification:{key:"notification",name:"通知",icon:"notifications",status:"",action:o.c,type:"page",description:""},playing_animation:{key:"playing_animation",name:"動畫",icon:"animation",description:"是否在介面中播放動畫。",status:"",type:"select",action:function(){(0,u.c)("playing_animation")},default_option:0,option:0,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}]},power_saving:{key:"power_saving",name:"省電模式",icon:"battery_low",description:"暫停使用耗電功能來節省電力。",status:"",type:"select",action:function(){(0,u.c)("power_saving")},default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!1,powerSavingAlternative:-1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}]},data_usage:{key:"data_usage",name:"網路使用量",icon:"bigtop_updates",status:"",type:"page",action:i.c,description:""},storage:{key:"storage",name:"儲存空間",icon:"database",status:"",type:"page",action:p.c,description:""},persistent_storage:{key:"persistent_storage",name:"永久儲存",icon:"storage",status:"",action:c.g,type:"action",description:"開啟此選項以避免瀏覽器自動刪除重要資料。"},export:{key:"export",name:"匯出資料",icon:"upload",status:"",type:"action",action:c.b,description:""},import:{key:"import",name:"匯入資料",icon:"download",status:"",type:"action",action:c.e,description:""},version:{key:"version",name:"版本",icon:"commit",status:"",type:"info",action:c.j,description:""},branch:{key:"branch",name:"分支",icon:"rebase",status:"",type:"info",action:function(){},description:""},last_update_date:{key:"last_update_date",name:"更新時間",icon:"update",status:"",type:"info",action:function(){},description:""},github:{key:"github",name:"GitHub",icon:"book_2",status:"@EricHsia7/bus",type:"info",action:c.i,description:""}};function h(){return b.apply(this,arguments)}function b(){return(b=(0,a.a)(function*(){var e=yield(0,f.e)(1);for(var t of e)if(m.indexOf(t)>-1){var n=yield(0,f.d)(1,t);if(null!==n){if("select"===g[t].type){var a=parseInt(n);g[t].option=a}}else"select"===g[t].type&&(g[t].option=g[t].default_option)}return!0})).apply(this,arguments)}function _(){return S.apply(this,arguments)}function S(){return(S=(0,a.a)(function*(){var e=[];for(var t in g){var n=g[t];switch(n.type){case"select":n.status=n.options[n.option].name;break;case"page":if("notification"===t)n.status=(0,v.e)()?"已註冊":"未註冊";else n.status="";break;case"action":n.status="","persistent_storage"===t&&(n.status=(yield(0,f.c)())?"開啟":"關閉");break;case"info":if("version"===t&&(n.status=(0,y.c)()),"branch"===t&&(n.status=(0,y.b)()),"last_update_date"===t){var a=new Date((0,y.d)());n.status=(0,d.b)(a)}}e.push(n)}return e})).apply(this,arguments)}function w(){var e=[];for(var t in g)if(m.indexOf(t)>-1&&(0,l.f)(g,t)&&"select"===g[t].type){var n={key:t,option:g[t].option};e.push(n)}return e}function I(e,t){return k.apply(this,arguments)}function k(){return(k=(0,a.a)(function*(e,t){return!!(m.indexOf(e)>-1&&(0,l.f)(g,e)&&"select"===g[e].type&&void 0!==g[e].options[t]&&null!==g[e].options[t])&&(yield(0,f.g)(1,e,t),g[e].option=t,!0)})).apply(this,arguments)}function A(e){if(m.indexOf(e)>-1&&(0,l.f)(g,e))return g[e]}function x(e){if(m.indexOf(e)>-1&&(0,l.f)(g,e)){var t=g.power_saving,n=t.options[t.option].value.boolean,a=g[e],i=a.options[a.option];n&&i.resourceIntensive&&(i=a.options[i.powerSavingAlternative]);var r=i.value;switch(r.type){case 0:return r.string;case 1:return r.number;case 2:return r.boolean;case 3:return r;default:return""}}return""}},4311(e,t,n){n.d(t,{a:()=>_,b:()=>g,c:()=>h,d:()=>l,e:()=>y,f:()=>v,g:()=>u});var a=n(467),i=n(3790),r={cacheStore:!1,settingsStore:!1,dataUsageStatsStore:!1,updateRateDataStore:!1,updateRateDataWriteAheadLogStore:!1,busArrivalTimeDataWriteAheadLogStore:!1,busArrivalTimeDataStore:!1,personalScheduleStore:!1,recentViewsStore:!1,notificationStore:!1,notificationScheduleStore:!1,folderListStore:!1,folderContentIndexStore:!1,folderContentStore:!1},o=["cacheStore","settingsStore","dataUsageStatsStore","updateRateDataStore","updateRateDataWriteAheadLogStore","busArrivalTimeDataWriteAheadLogStore","busArrivalTimeDataStore","personalScheduleStore","recentViewsStore","notificationStore","notificationScheduleStore","folderListStore","folderContentIndexStore","folderContentStore"],s=!1;function c(){return(c=(0,a.a)(function*(){!1===s&&(s=yield i.createInstance({name:"dummyStorage"})),yield s.dropInstance(),s=!1})).apply(this,arguments)}function u(e,t,n){return p.apply(this,arguments)}function p(){return p=(0,a.a)(function*(e,t,n){try{var a=o[e];return!1===r[a]&&(r[a]=yield i.createInstance({name:a})),yield r[a].setItem(t,n)}catch(e){return function(){c.apply(this,arguments)}(),null}}),p.apply(this,arguments)}function l(e,t){return d.apply(this,arguments)}function d(){return(d=(0,a.a)(function*(e,t){try{var n=o[e];return!1===r[n]&&(r[n]=yield i.createInstance({name:n})),yield r[n].getItem(t)}catch(e){return null}})).apply(this,arguments)}function v(e,t){return f.apply(this,arguments)}function f(){return(f=(0,a.a)(function*(e,t){try{var n=o[e];return!1===r[n]&&(r[n]=yield i.createInstance({name:n})),yield r[n].removeItem(t)}catch(e){return null}})).apply(this,arguments)}function y(e){return m.apply(this,arguments)}function m(){return(m=(0,a.a)(function*(e){try{var t=o[e];return!1===r[t]&&(r[t]=yield i.createInstance({name:t})),yield r[t].keys()}catch(e){return[]}})).apply(this,arguments)}function g(){return o.length}function h(){return b.apply(this,arguments)}function b(){return(b=(0,a.a)(function*(){if(navigator.storage&&navigator.storage.persist)return yield navigator.storage.persisted();return!1})).apply(this,arguments)}function _(){return S.apply(this,arguments)}function S(){return(S=(0,a.a)(function*(){if(navigator.storage&&navigator.storage.persist)return(yield navigator.storage.persist())?"granted":"denied";return"unsupported"})).apply(this,arguments)}}}]);
//# sourceMappingURL=15bcfe768b6e8bd49734.js.map