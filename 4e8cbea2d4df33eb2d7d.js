"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[6230],{2174(t,e,n){n.d(e,{Sv:()=>z,m_:()=>J});var i=n(467),a=n(5767),r=n(365),u=n(77),o=n(3459),s=n(8179),c=n(8024),l=n(4537),d=n(904),f=n(9119),p=(0,s.bv)(".fb"),h=(0,s.aI)(p,".gb"),v=(0,s.aI)(h,".hb"),b=(0,s.aI)(v,".ib"),m=(0,s.aI)(p,".jb"),g=(0,s.aI)(m,".kb"),y={},I=!1,A=15e3,_=5e3,k=15e3,w=!0,x=0,C=0,S="",j=!1,L=!1,Z=!1;function E(t){var e=t;if(j){var n=e.detail.progress-1;b.style.setProperty("--nb",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,E)}function T(){var t=(0,c.zx)(),e=document.createElement("div");e.classList.add("ob"),e.id=t;var n=document.createElement("div");n.classList.add("pb"),e.appendChild(n);var i=document.createElement("div");i.classList.add("qb");var a=document.createElement("div");a.classList.add("rb"),i.appendChild(a);var r=document.createElement("div");r.classList.add("sb"),i.appendChild(r);var u=document.createElement("div");u.classList.add("tb"),i.appendChild(u);var o=document.createElement("div");o.classList.add("ub");var s=document.createElement("span");return s.appendChild((0,l.YC)("close")),o.appendChild(s),i.appendChild(o),e.appendChild(i),{element:e,id:t}}function $(t,e,n){function i(t,i,a){function r(t,e){(0,s.aI)(t,".pb").innerText=e.hours}function u(t,e){var n=(0,s.aI)(t,".qb");(0,s.aI)(n,".rb").innerText=e.minutes}function o(t,e){var n=(0,s.aI)(t,".qb");(0,s.aI)(n,".tb").innerText=e.name}function l(t,e){var n=(0,s.aI)(t,".qb");(0,s.aI)(n,".sb").innerText=`${e.route.name} - 往${e.route.direction}`}function d(t,e){var n=(0,s.aI)(t,".qb");(0,s.aI)(n,".ub").onclick=function(){!function(t,e){P.apply(this,arguments)}(t.id,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,c.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,c.xZ)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,c.xZ)(e))}null==a?(r(t,i),u(t,i),o(t,i),l(t,i),d(t,i),f(t,i),p(t,n),h(t,e)):(i.hours!==a.hours&&r(t,i),i.minutes!==a.minutes&&u(t,i),(0,c.hw)(a.schedule_id,i.schedule_id)||(o(t,i),l(t,i),d(t,i)),a.is_first!==i.is_first&&f(t,i),false!==n&&p(t,n),I!==e&&h(t,e))}var a=t.itemQuantity,r=t.items,u=(0,s.jg)(g,".ob").length;if(a!==u){var o=u-a;if(o<0){for(var l=new DocumentFragment,d=0,f=Math.abs(o);d<f;d++){var p=T();l.appendChild(p.element)}g.append(l)}else for(var h=(0,s.jg)(g,".ob"),v=0,b=Math.abs(o);v<b;v++){h[u-1-v].remove()}}for(var m=(0,s.jg)(g,".ob"),A=0;A<a;A++){var _=m[A],k=r[A];if(y.hasOwnProperty("items"))if(y.items[A])i(_,k,y.items[A]);else i(_,k,null);else i(_,k,null)}y=t,I=e}function R(){return M.apply(this,arguments)}function M(){return(M=(0,i.A)(function*(){var t=(0,o.Js)("playing_animation"),e=(0,o.Js)("refresh_interval");w=e.dynamic,A=e.baseInterval,j=!0,S=(0,c.zx)(),b.setAttribute("refreshing","true"),b.classList.remove("mb"),document.addEventListener(S,E);var n=yield(0,u.e3)(S);$(n,!1,t);var i=0;w&&(i=yield(0,a.wz)()),x=(new Date).getTime(),C=w?Math.max(x+_,n.dataUpdateTime+A/i):x+A,k=Math.max(_,C-x),j=!1,b.setAttribute("refreshing","false"),b.style.setProperty("--lb",`${k}ms`),b.classList.add("mb")})).apply(this,arguments)}function q(){return D.apply(this,arguments)}function D(){return(D=(0,i.A)(function*(){R().then(function(){L?setTimeout(function(){q()},Math.max(_,C-(new Date).getTime())):Z=!1}).catch(function(t){L?setTimeout(function(){q()},1e4):Z=!1})})).apply(this,arguments)}function z(){(0,d.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var t=(0,o.Js)("playing_animation"),e=(0,d.gO)("window"),n=(e.width,e.height),i=Math.floor(n/50)+5,a=[],r=0;r<i;r++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});$({items:a,itemQuantity:i,dataUpdateTime:0},!0,t)}(),L||(L=!0,Z?R():(Z=!0,q())),(0,d.Z_)()}function J(){p.setAttribute("displayed","false"),L=!1,(0,d.l$)()}function P(){return(P=(0,i.A)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,r.G)(e)){if((0,s.aI)(g,`.ob#${t}`).remove(),(0,f.a)("check_circle","已取消通知"),!j){var n=(0,o.Js)("playing_animation");$(yield(0,u.e3)(S),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},5693(t,e,n){n.d(e,{Dn:()=>w,Xy:()=>k,bF:()=>_,gv:()=>y});var i=n(3453),a=n(467),r=n(5352),u=n(8179),o=n(5579),s=n(904),c=(0,u.bv)(".vb"),l=(0,u.aI)(c,".wb"),d=(0,u.aI)(c,".xb"),f=(0,u.aI)(d,".yb"),p=(0,u.aI)(l,".zb"),h=(0,u.aI)(p,'._b[group="schedule-name"] .ac input'),v=(0,u.aI)(p,'._b[group="schedule-start-time"] .ac input'),b=(0,u.aI)(p,'._b[group="schedule-end-time"] .ac input'),m=(0,u.aI)(p,'._b[group="schedule-days"] .ac'),g=(0,u.jg)(m,".bc");function y(t){return I.apply(this,arguments)}function I(){return(I=(0,a.A)(function*(t){for(var e=h.value,n=v.value,a=b.value,u=String(n).split(":").map(function(t){return parseInt(t)}),o=(0,i.A)(u,2),s=o[0],c=o[1],l=String(a).split(":").map(function(t){return parseInt(t)}),d=(0,i.A)(l,2),f=d[0],p=d[1],m=[],y=0;y<7;y++){var I=g[y],A=I.getAttribute("highlighted"),_=parseInt(I.getAttribute("day"));"true"===A&&m.push(_)}var w=yield(0,r.qZ)(t);w.name=e,w.days=m,w.period.start.hours=s,w.period.start.minutes=c,w.period.end.hours=f,w.period.end.minutes=p,yield(0,r.nL)(w),k()})).apply(this,arguments)}function A(){return(A=(0,a.A)(function*(t){var e=yield(0,r.qZ)(t);h.value=e.name,v.value=(0,o.pn)(e.period.start),b.value=(0,o.pn)(e.period.end);for(var n=0;n<7;n++){var i=g[n];e.days.indexOf(n)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}f.onclick=function(){y(t)}})).apply(this,arguments)}function _(t){(0,s.WR)("PersonalScheduleEditor"),c.setAttribute("displayed","true"),function(t){A.apply(this,arguments)}(t),(0,s.Z_)()}function k(){c.setAttribute("displayed","false"),(0,s.l$)()}function w(t){var e=(0,u.aI)(m,`.bc[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6443(t,e,n){n.d(e,{GS:()=>Z,GZ:()=>E,VY:()=>j,b7:()=>S,kP:()=>A,zk:()=>_});var i=n(467),a=n(9566),r=n(8621),u=n(3459),o=n(8179),s=n(8024),c=n(904),l=n(3041),d=n(8332),f=n(9009),p=n(2530);function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return v(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,u=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){o=!0,r=t},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw r}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var b=(0,o.bv)(".cc"),m=(0,o.aI)(b,".dc"),g=(0,o.aI)(m,".ec"),y=(0,o.aI)(g,'.fc[group="calendar"]'),I=(0,o.aI)(y,".gc"),A=(0,o.aI)(I,".hc"),_=(0,o.aI)(I,".ic"),k=(0,o.aI)(b,'.dc .ec .fc[group="actions"]'),w=(0,o.aI)(k,'.gc .jc[action="save-to-folder"]'),x=(0,o.aI)(k,'.gc .jc[action="get-permalink"]'),C=(0,o.aI)(k,'.gc .jc[action="show-permalink-qrcode"]'),S=(0,o.aI)(g,'.fc[group="properties"]'),j=(0,o.aI)(S,".gc");function L(){return(L=(0,i.A)(function*(t,e){var n=(0,u.Js)("playing_animation"),i=yield(0,a.LH)("route",t);w.setAttribute("animation",(0,s.xZ)(n)),w.setAttribute("highlighted",(0,s.xZ)(i)),w.onclick=function(){(0,l.B)("route",[t])},x.setAttribute("animation",(0,s.xZ)(n)),x.onclick=function(){(0,d.w)(t)},C.setAttribute("animation",(0,s.xZ)(n)),C.onclick=function(){(0,d.e)(t)},(0,p.h)(S),(0,f.OS)();var o=(0,s.zx)(),c=yield(0,r.p)(t,e,o);(0,p.D)(c.properties,!1,n),(0,f.fB)(c.calendar,!1,n)})).apply(this,arguments)}function Z(t,e){(0,c.WR)("RouteDetails"),b.setAttribute("displayed","true"),function(t,e){L.apply(this,arguments)}(t,e)}function E(){(0,c.kr)("RouteDetails"),b.setAttribute("displayed","false");var t,e=h((0,o.jg)(_,".ga"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,i=h((0,o.jg)(A,".fa"));try{for(i.s();!(n=i.n()).done;){n.value.remove()}}catch(t){i.e(t)}finally{i.f()}}},7908(t,e,n){n.d(e,{NW:()=>m,XG:()=>v,hy:()=>b});var i=n(467),a=n(3937),r=n(77),u=n(8179),o=n(8024),s=n(904),c=n(9119),l=(0,u.bv)(".kc"),d=(0,u.aI)(l,".lc"),f=(0,u.aI)(d,".mc"),p=(0,u.aI)(f,'.nc[group="provider"] .oc input'),h=(0,u.aI)(f,'.nc[group="registration-key"] .oc input');function v(){(0,s.WR)("RegisterNotification"),l.setAttribute("displayed","true"),p.value=(0,r.D7)(),h.value="",(0,s.Z_)()}function b(){l.setAttribute("displayed","false"),(0,s.l$)()}function m(){return g.apply(this,arguments)}function g(){return(g=(0,i.A)(function*(){(0,c.a)("manufacturing","處理中");var t=p.value,e=h.value;if((0,o.Gz)(t))return(0,r.Je)(t),(yield(0,a.e)(e))?void(0,c.a)("check_circle","註冊成功"):void(0,c.a)("error","註冊失敗");(0,c.a)("error","無效的提供者")})).apply(this,arguments)}},8279(t,e,n){n.d(e,{Vc:()=>c,X8:()=>s});var i=n(8179),a=n(2648),r=n(904),u=(0,i.bv)(".pc"),o=(0,i.aI)(u,".qc");function s(t){(0,r.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,a.$)(t,"M",.5,.3,1,"var(--j)",4);o.innerHTML=e}(t)}function c(){(0,r.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>g,I1:()=>m,Ps:()=>b,om:()=>y});var i=n(3453),a=n(5352),r=n(8179),u=n(904),o=n(9119),s=(0,r.bv)(".rc"),c=(0,r.aI)(s,".sc"),l=(0,r.aI)(c,".tc"),d=(0,r.aI)(l,'.uc[group="schedule-name"] .vc input'),f=(0,r.aI)(l,'.uc[group="schedule-start-time"] .vc input'),p=(0,r.aI)(l,'.uc[group="schedule-end-time"] .vc input'),h=(0,r.aI)(l,'.uc[group="schedule-days"] .vc'),v=(0,r.jg)(h,".wc");function b(){for(var t=d.value,e=f.value,n=p.value,r=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,i.A)(r,2),s=u[0],c=u[1],l=String(n).split(":").map(function(t){return parseInt(t)}),h=(0,i.A)(l,2),b=h[0],m=h[1],y=[],I=0;I<7;I++){var A=v[I],_=A.getAttribute("highlighted"),k=parseInt(A.getAttribute("day"));"true"===_&&y.push(k)}(0,a.Qh)(t,s,c,b,m,y).then(function(t){t?(g(),(0,o.a)("calendar_view_day","已建立個人化行程")):(0,o.a)("error","無法建立個人化行程")})}function m(){(0,u.WR)("PersonalScheduleCreator"),s.setAttribute("displayed","true"),(0,u.Z_)()}function g(){s.setAttribute("displayed","false"),(0,u.l$)()}function y(t){var e=(0,r.aI)(h,`.wc[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}}}]);
//# sourceMappingURL=4e8cbea2d4df33eb2d7d.js.map