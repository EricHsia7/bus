"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(t,e,a){a.d(e,{a:()=>bt,b:()=>Z,c:()=>ft});var s=a(467),i=a(5767),r=a(9566),d=a(3422),n=a(5314),l=a(7123),u=a(3459),o=a(8179),p=a(7968),c=a(8024),h=a(5579),f=a(4537),b=a(904),v=a(3030),m=a(9119),A=a(3041),g=a(752),y=a(5286),C=(0,o.c)(".ek"),L=(0,o.e)(C,".ok"),k=(0,o.e)(L,".rk"),w=(0,o.e)(k,"span"),x=(0,o.e)(L,".qk"),T=(0,o.e)(L,".xk .yk"),_=(0,o.e)(L,".sk"),R=(0,o.e)(_,".tk"),P=(0,o.e)(L,".vk"),$=(0,o.e)(P,".wk"),S=(0,o.e)(C,"._k"),D={},I=!1,E=!1,N=0,z=0,B=0,M={},F=0,j=!1,Q=15e3,q=5e3,H=15e3,U=!0,W=0,G=0,J="",K=!1,O=!1,V=!1,X=0,Y=[];function Z(){S.addEventListener("touchstart",function(){N=Math.round(S.scrollLeft/F)},{passive:!0}),S.addEventListener("scroll",function(t){j=!0;var e=t.target.scrollLeft/F;z=e>N?N+1:N-1;var a=e-N,s=Math.abs(a);s>1&&(a>0?(N=Math.floor(e),z=N+1):(N=Math.ceil(e),z=N-1),s=Math.abs(e-N));var i=M[`g_${N}`]||{width:0,offset:0},r=M[`g_${z}`]||{width:0,offset:0},d=i.width+(r.width-i.width)*s,n=-1*(i.offset+(r.offset-i.offset)*s)+.5*F-.5*d;tt(B,n,d-20,e)},{passive:!0}),S.addEventListener("scrollend",function(t){var e=t.target.scrollLeft/F;N=Math.round(e),j=!1},{passive:!0})}function tt(t,e,a,s){S.style.setProperty("--dk",t.toString()),$.style.setProperty("--ik",a.toString()),R.style.setProperty("--jk",`${e.toString()}px`),R.style.setProperty("--lk",s.toString())}function et(t){var e=t;if(K){var a=e.detail.progress-1;T.style.setProperty("--mk",a.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,et)}function at(){var t=(0,o.a)();t.classList.add("il"),t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var e=(0,o.a)();e.classList.add("jl");var a=(0,o.a)();a.classList.add("tl"),a.setAttribute("displayed","false"),e.appendChild(a);var s=(0,o.a)();s.classList.add("kl");var i=(0,o.a)();i.classList.add("tb"),i.setAttribute("code","0"),i.setAttribute("displayed","false"),s.appendChild(i);var r=(0,o.a)();return r.classList.add("ub"),r.setAttribute("code","0"),r.setAttribute("displayed","true"),s.appendChild(r),t.appendChild(e),t.appendChild(s),t}function st(t){var e=(0,o.a)();e.classList.add("el"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var a=(0,o.a)();a.classList.add("fl");var s=(0,o.a)();s.classList.add("gl"),a.appendChild(s);var i=(0,o.a)();i.classList.add("hl");var r=(0,o.a)();r.classList.add("ul");var d=(0,o.a)();d.classList.add("tb"),d.setAttribute("code","0"),d.setAttribute("displayed","false"),r.appendChild(d);var n=(0,o.a)();n.classList.add("ub"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),r.appendChild(n),i.appendChild(r);var l=(0,o.a)();l.classList.add("vl"),l.appendChild((0,f.b)("keyboard_arrow_down")),l.onclick=function(){!function(t,e){var a=(0,o.e)(t,".xl"),s=t.parentElement,i=e.parentElement,r=(0,o.f)(e,"il"),d=(0,o.f)(t,"el"),n=d.length,l=s.getBoundingClientRect(),u=t.getBoundingClientRect(),p=i.getBoundingClientRect(),c=e.getBoundingClientRect(),h=c.top-p.top,f=u.top-l.top,b="true"===t.getAttribute("stretched"),v="true"===t.getAttribute("animation");if(v){var m=b?"2":"1";e.setAttribute("stretching","true"),e.style.setProperty("--jn",`${h}px`),t.setAttribute("stretching","true"),t.style.setProperty("--ln",`${f}px`);for(var A=0;A<n;A++){var g=d[A],y=r[A];y.style.setProperty("--mn",(-1*A-1).toString()),y.setAttribute("push-direction",m),y.setAttribute("push-state","1"),g.setAttribute("push-direction",m),g.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var a=0;a<n;a++){var s=d[a],i=r[a];i.setAttribute("push-direction","0"),i.setAttribute("push-state","0"),s.setAttribute("push-direction","0"),s.setAttribute("push-state","0")}e.setAttribute("stretching","false"),t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var t=0;t<n;t++){var e=d[t];r[t].setAttribute("push-state","2"),e.setAttribute("push-state","2")}},{once:!0})}b?(v?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"),e.setAttribute("stretched","true"))}(e,t)},i.appendChild(l);var u=(0,o.a)();u.classList.add("wl"),i.appendChild(u),a.appendChild(i);var p=(0,o.a)();p.classList.add("xl"),p.setAttribute("displayed","false");var c=(0,o.a)();c.classList.add("yl");var h=(0,o.a)();h.classList.add("zl"),h.setAttribute("highlighted","true"),h.setAttribute("type","tab"),h.setAttribute("code","0"),h.onclick=function(){mt(e,0)};var b=(0,o.a)();b.classList.add("_l"),b.appendChild((0,f.b)("directions_bus")),h.appendChild(b),h.appendChild(document.createTextNode("公車")),c.appendChild(h);var v=(0,o.a)();v.classList.add("zl"),v.setAttribute("highlighted","false"),v.setAttribute("type","tab"),v.setAttribute("code","1"),v.onclick=function(){mt(e,1)};var m=(0,o.a)();m.classList.add("_l"),m.appendChild((0,f.b)("departure_board")),v.appendChild(m),v.appendChild(document.createTextNode("抵達時間")),c.appendChild(v);var A=(0,o.a)();A.classList.add("zl"),A.setAttribute("highlighted","false"),A.setAttribute("type","tab"),A.setAttribute("code","2"),A.onclick=function(){mt(e,2)};var g=(0,o.a)();g.classList.add("_l"),g.appendChild((0,f.b)("route")),A.appendChild(g),A.appendChild(document.createTextNode("路線")),c.appendChild(A);var y=(0,o.a)();y.classList.add("zl"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){mt(e,3)};var C=(0,o.a)();C.classList.add("_l"),C.appendChild((0,f.b)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),c.appendChild(y);var L=(0,o.a)();L.classList.add("zl"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var k=(0,o.a)();k.classList.add("_l"),k.appendChild((0,f.b)("folder")),L.appendChild(k),L.appendChild(document.createTextNode("儲存")),c.appendChild(L);var w=(0,o.a)();w.classList.add("zl"),w.setAttribute("highlighted","false"),w.setAttribute("type","schedule-notification"),w.setAttribute("enabled","true");var x=(0,o.a)();x.classList.add("_l"),x.appendChild((0,f.b)("notifications")),w.appendChild(x),w.appendChild(document.createTextNode("通知")),c.appendChild(w),p.appendChild(c);var T=(0,o.a)();T.classList.add("am"),T.setAttribute("displayed","true"),p.appendChild(T);var _=(0,o.a)();_.classList.add("bm"),_.setAttribute("displayed","false"),p.appendChild(_);var R=(0,o.a)();R.classList.add("cm"),R.setAttribute("displayed","false"),p.appendChild(R);var P=(0,o.a)();return P.classList.add("dm"),P.setAttribute("displayed","false"),p.appendChild(P),e.appendChild(a),e.appendChild(p),e}function it(){var t=(0,o.a)();t.classList.add("al");var e=(0,o.a)();e.classList.add("bl");var a=(0,o.a)();a.classList.add("cl");var s=(0,o.a)();s.classList.add("em");var i=(0,o.a)();i.classList.add("dl");var r=(0,o.a)();return r.classList.add("fm"),i.appendChild(r),a.appendChild(s),e.appendChild(a),e.appendChild(i),t.appendChild(e),t}function rt(){var t=(0,o.a)();t.classList.add("uk");var e=document.createElement("span");return t.appendChild(e),t}function dt(){var t=(0,o.a)();t.classList.add("gm"),t.setAttribute("on-this-route","false");var e=(0,o.a)();e.classList.add("hm");var a=(0,o.a)();a.classList.add("im"),a.appendChild((0,f.b)("directions_bus"));var s=(0,o.a)();s.classList.add("jm");var i=(0,o.a)();i.classList.add("km");var r=(0,o.a)();r.classList.add("lm");var d=(0,o.a)();d.classList.add("mm");var n=(0,o.a)();return n.classList.add("nm"),e.appendChild(a),e.appendChild(s),t.appendChild(e),i.appendChild(r),i.appendChild(d),i.appendChild(n),t.appendChild(i),t}function nt(){var t=(0,o.a)();t.classList.add("om");var e=(0,o.a)();e.classList.add("pm");var a=(0,o.a)();a.classList.add("qm"),a.appendChild((0,f.b)("route"));var s=(0,o.a)();s.classList.add("rm");var i=(0,o.a)();i.classList.add("sm");var r=(0,o.a)();r.classList.add("tm");var d=(0,o.a)();d.classList.add("um"),d.setAttribute("type","view-route"),d.innerText="查看路線";var n=(0,o.a)();return n.classList.add("um"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存路線",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function lt(){var t=(0,o.a)();t.classList.add("vm");var e=(0,o.a)();e.classList.add("wm");var a=(0,o.a)();a.classList.add("xm"),a.appendChild((0,f.b)("calendar_view_day"));var s=(0,o.a)();s.classList.add("ym");var i=(0,o.a)();i.classList.add("zm");var r=(0,o.a)();return r.classList.add("_m"),e.appendChild(a),e.appendChild(s),e.appendChild(i),t.appendChild(e),t.appendChild(r),t}function ut(){var t=(0,o.a)();t.classList.add("an");var e=(0,o.a)();e.classList.add("bn");var a=(0,o.a)();a.classList.add("cn"),a.appendChild((0,f.b)("location_on"));var s=(0,o.a)();s.classList.add("dn");var i=(0,o.a)();i.classList.add("en");var r=(0,o.a)();r.classList.add("fn");var d=(0,o.a)();d.classList.add("gn"),d.setAttribute("type","view-location"),d.innerText="查看地點";var n=(0,o.a)();return n.classList.add("gn"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存地點",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function ot(t,e,a){var s,i;function n(e,a,s,i,n,l){function u(t,e,a,s,i){var r=(0,o.e)(e,".kl"),d=(0,o.e)(r,".ub"),n=(0,o.e)(r,".tb"),l=(0,o.e)(t,".ul"),u=(0,o.e)(l,".ub"),p=(0,o.e)(l,".tb");if(n.setAttribute("code",a.status.code.toString()),p.setAttribute("code",a.status.code.toString()),p.innerText=a.status.text,!s&&i){var c=t.getBoundingClientRect(),h=c.top,f=c.left,b=c.bottom,v=c.right,m=window.innerWidth,A=window.innerHeight;if(b>0&&h<A&&v>0&&f<m)return d.addEventListener("animationend",function(){d.setAttribute("code",a.status.code.toString()),d.classList.remove("wb"),n.setAttribute("displayed","false")},{once:!0}),u.addEventListener("animationend",function(){u.setAttribute("code",a.status.code.toString()),u.innerText=a.status.text,u.classList.remove("wb"),p.setAttribute("displayed","false")},{once:!0}),p.setAttribute("displayed","true"),n.setAttribute("displayed","true"),d.classList.add("wb"),void u.classList.add("wb")}d.setAttribute("code",a.status.code.toString()),u.setAttribute("code",a.status.code.toString()),u.innerText=a.status.text}function p(t,e,a){t.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer)),e.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer))}function f(t,e){(0,o.e)(t,".gl").innerText=e.name}function b(t,e){var a=(0,o.e)(t,".am"),s=Array.from((0,o.d)(a,".gm")),i=s.length,r=e.buses.length,d=i-r;if(d<0){for(var n=new DocumentFragment,l=0;l>d;l--){var u=dt();n.appendChild(u),s.push(u)}a.append(n)}else if(d>0)for(var p=i-1,h=i-d-1;p>h;p--)s[p].remove(),s.splice(p,1);for(var f=0;f<r;f++){var b=e.buses[f],v=s[f],m=(0,o.e)(v,".hm"),A=(0,o.e)(m,".jm"),g=(0,o.e)(v,".km"),y=(0,o.e)(g,".lm"),C=(0,o.e)(g,".mm"),L=(0,o.e)(g,".nm");v.setAttribute("on-this-route",(0,c.a)(b.onThisRoute)),A.innerText=b.carNumber,y.innerText=`路線：${b.RouteName}`,C.innerText=`狀態：${b.status.text}`,L.innerText=`類型：${b.type}`}a.setAttribute("empty",(0,c.a)(0===r))}function m(t,e){var a=(0,o.e)(t,".bm"),s=Array.from((0,o.d)(a,".om")),i=s.length,d=e.overlappingRoutes.length,n=i-d;if(n<0){for(var l=new DocumentFragment,u=0;u>n;u--){var p=nt();l.appendChild(p),s.push(p)}a.append(l)}else if(n>0)for(var h=i-1,f=i-n-1;h>f;h--)s[h].remove(),s.splice(h,1);for(var b=0;b<d;b++){var v=e.overlappingRoutes[b],m=s[b],g=(0,o.e)(m,".pm"),y=(0,o.e)(g,".rm"),C=(0,o.e)(m,".sm"),L=(0,o.e)(m,".tm"),k=(0,o.e)(L,'.um[type="view-route"]'),w=(0,o.e)(L,'.um[type="save-to-folder"]');y.innerText=v.name,C.innerText=v.RouteEndPoints.text,function(t,e,a){t.onclick=function(){vt(e,a)}}(k,v.RouteID,v.PathAttributeId),function(t,e){t.onclick=function(){(0,A.b)("route",[e],t)},(0,r.e)("route",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(w,v.RouteID)}a.setAttribute("empty",(0,c.a)(0===d))}function y(t,e){var a=(0,o.e)(t,".cm"),s=Array.from((0,o.d)(a,".vm")),i=s.length,r=e.busArrivalTimes.length,d=i-r;if(d<0){for(var n=new DocumentFragment,l=0;l>d;l--){var u=lt();n.appendChild(u),s.push(u)}a.append(n)}else if(d>0)for(var p=i-1,f=i-d-1;p>f;p--)s[p].remove(),s.splice(p,1);for(var b=0;b<r;b++){var v=e.busArrivalTimes[b],m=s[b],A=(0,o.e)(m,".wm"),g=(0,o.e)(A,".ym"),y=(0,o.e)(A,".zm"),C=(0,o.e)(m,"._m");g.innerText=v.personalSchedule.name,y.innerText=`週${(0,h.g)(v.day).name} ${(0,h.i)(v.personalSchedule.period.start)} - ${(0,h.i)(v.personalSchedule.period.end)}`,C.innerHTML=v.chart}a.setAttribute("empty",(0,c.a)(0===r))}function C(t,e){var a=(0,o.e)(t,".dm"),s=Array.from((0,o.d)(a,".an")),i=s.length,d=e.nearbyLocations.length,n=i-d;if(n<0){for(var l=new DocumentFragment,u=0;u>n;u--){var p=ut();l.appendChild(p),s.push(p)}a.append(l)}else if(n>0)for(var h=i-1,f=i-n-1;h>f;h--)s[h].remove(),s.splice(h,1);for(var b=0;b<d;b++){var m=e.nearbyLocations[b],g=s[b],y=(0,o.e)(g,".bn"),C=(0,o.e)(y,".dn"),L=(0,o.e)(g,".en"),k=(0,o.e)(g,".fn"),w=(0,o.e)(k,'.gn[type="view-location"]'),x=(0,o.e)(k,'.gn[type="save-to-folder"]');C.innerText=m.name,L.innerText=`${m.distance}公尺`,function(t,e){t.onclick=function(){(0,v.c)(e)}}(w,m.hash),function(t,e){t.onclick=function(){(0,A.b)("location",[e],t)},(0,r.e)("location",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(x,m.hash)}a.setAttribute("empty",(0,c.a)(0===d))}function L(t,e,a){t.setAttribute("nearest",(0,c.a)(a.nearest)),e.setAttribute("nearest",(0,c.a)(a.nearest))}function k(t,e,a,s,i){var r=(null==a?void 0:a.progress)||0,d=(null==e?void 0:e.progress)||0,n=(0,o.e)(t,".jl .tl");if(!s&&i&&0!==r&&0===d&&Math.abs(d-r)>0)return n.style.setProperty("--hn","100%"),void n.addEventListener("transitionend",function(){n.setAttribute("displayed","false"),n.style.setProperty("--hn","-100%")},{once:!0});d>0?(n.setAttribute("displayed","true"),n.style.setProperty("--hn",100*(d-1)+"%")):n.setAttribute("displayed","false")}function w(t,e,a){a&&((0,o.e)(t,".xl").setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false"))}function x(t,e,a){t.setAttribute("animation",(0,c.a)(a)),e.setAttribute("animation",(0,c.a)(a))}function T(t,e,a){t.setAttribute("skeleton-screen",(0,c.a)(a)),e.setAttribute("skeleton-screen",(0,c.a)(a))}function _(e,a){var s=(0,o.e)(e,'.xl .yl .zl[type="save-to-folder"]');s.onclick=function(){(0,A.b)("stop",[a.id,t.RouteID],s)},(0,r.e)("stop",a.id).then(function(t){s.setAttribute("highlighted",(0,c.a)(t))})}function R(e,a){var s=(0,o.e)(e,'.xl .yl .zl[type="schedule-notification"]');s.onclick=function(){(0,g.b)(s,a.id,t.RouteID,a.status.time)};var i=(0,d.r)(a.id);s.setAttribute("highlighted",(0,c.a)(i))}null===i?(u(e,a,s,n,l),f(e,s),b(e,s),m(e,s),y(e,s),C(e,s),p(e,a,s),L(e,a,s),k(a,s,i,n,l),w(e,a,n),x(e,a,l),T(e,a,n),_(e,s),R(e,s)):(s.status.time!==i.status.time&&(u(e,a,s,n,l),R(e,s)),(0,c.b)(i.buses,s.buses)||b(e,s),(0,c.b)(i.busArrivalTimes,s.busArrivalTimes)||y(e,s),i.nearest!==s.nearest&&L(e,a,s),i.progress!==s.progress&&k(a,s,i,n,l),i.id!==s.id&&(f(e,s),p(e,a,s),m(e,s),C(e,s),_(e,s),R(e,s)),I!==l&&x(e,a,l),E!==n&&(w(e,a,n),T(e,a,n)))}var l=(0,b.e)("window"),u=l.width,f=l.height,m=t.groupQuantity,C=t.itemQuantity,L=t.groupedItems,T=t.groupNames;B=m,F=u;for(var $=0,z=0;z<m;z++){var Q=`g_${z}`,q=(0,p.d)(T[z],500,"17px",'"Noto Sans TC", sans-serif')+20;M[Q]={width:q,offset:$},$+=q}if(M[`g_${m}`]={width:0,offset:$},!j){var H=M[`g_${N}`],U=-1*H.offset+.5*F-.5*H.width,W=H.width-20;tt(B,U,W,N)}E!==e&&(k.setAttribute("skeleton-screen",(0,c.a)(e)),_.setAttribute("skeleton-screen",(0,c.a)(e)),P.setAttribute("skeleton-screen",(0,c.a)(e))),I!==a&&(k.setAttribute("animation",(0,c.a)(a)),_.setAttribute("animation",(0,c.a)(a)),P.setAttribute("animation",(0,c.a)(a))),(null===(s=D)||void 0===s?void 0:s.RouteID)!==t.RouteID&&(x.onclick=function(){(0,y.f)(t.RouteID,t.PathAttributeId)}),(null===(i=D)||void 0===i?void 0:i.RouteName)!==t.RouteName&&(w.innerText=t.RouteName);var G=Array.from((0,o.d)(S,".al")),J=Array.from((0,o.d)(R,".uk")),K=G.length;if(m!==K){var O=K-m;if(O<0){for(var V=new DocumentFragment,X=new DocumentFragment,Y=0;Y>O;Y--){var Z=it();V.appendChild(Z),G.push(Z);var et=rt();X.appendChild(et),J.push(et)}S.append(V),R.append(X)}else if(O>0)for(var ot=K-1,pt=K-O-1;ot>pt;ot--)G[ot].remove(),G.splice(ot,1),J[ot].remove(),J.splice(ot,1)}for(var ct=0;ct<m;ct++){var ht=`g_${ct}`,ft=G[ct],bt=(0,o.e)(ft,".dl"),mt=(0,o.e)(ft,".cl"),At=Array.from((0,o.d)(bt,".el")),gt=Array.from((0,o.d)(mt,".il")),yt=At.length;if(C[ht]!==yt){var Ct=yt-C[ht];if(Ct<0){for(var Lt=new DocumentFragment,kt=new DocumentFragment,wt=0;wt>Ct;wt--){var xt=at(),Tt=st(xt);Lt.appendChild(Tt),At.push(Tt),kt.appendChild(xt),gt.push(xt)}bt.append(Lt),mt.append(kt)}else if(Ct>0)for(var _t=yt-1,Rt=yt-Ct-1;_t>Rt;_t--)At[_t].remove(),At.splice(_t,1),gt[_t].remove(),gt.splice(_t,1)}var Pt=J[ct];(0,o.e)(Pt,"span").innerText=T[ct],Pt.style.setProperty("--fk",`${M[ht].offset}px`),Pt.style.setProperty("--gk",`${M[ht].width}px`),Pt.style.setProperty("--hk",ct.toString()),e&&(ft.scrollTop=0);for(var $t=0;$t<C[ht];$t++){var St=At[$t],Dt=gt[$t],It=L[ht][$t];if((0,c.e)(D,"groupedItems"))if((0,c.e)(D.groupedItems,ht))if(D.groupedItems[ht][$t])n(St,Dt,It,D.groupedItems[ht][$t],e,a);else n(St,Dt,It,null,e,a);else n(St,Dt,It,null,e,a);else n(St,Dt,It,null,e,a)}}R.style.setProperty("--kk",`${$}px`),D=t,I=a,E=e}function pt(){return ct.apply(this,arguments)}function ct(){return(ct=(0,s.a)(function*(){var t=(0,u.b)("playing_animation"),e=(0,u.b)("refresh_interval"),a=(0,b.e)("route-bus-arrival-time-chart");U=e.dynamic,Q=e.baseInterval,K=!0,J=(0,c.c)(),T.setAttribute("refreshing","true"),T.classList.remove("zk"),document.addEventListener(J,et);var s=yield(0,l.a)(X,Y,a.width,a.height,J);ot(s,!1,t);var r=0;U&&(r=yield(0,i.c)()),W=(new Date).getTime(),G=U?Math.max(W+q,s.dataUpdateTime+Q/r):W+Q,H=Math.max(q,G-W),K=!1,T.setAttribute("refreshing","false"),T.style.setProperty("--nk",`${H}ms`),T.classList.add("zk")})).apply(this,arguments)}function ht(){pt().then(function(){O?setTimeout(function(){ht()},Math.max(q,G-(new Date).getTime())):V=!1}).catch(function(t){O?((0,m.a)("error","路線網路連線中斷，將在10秒後重試。"),setTimeout(function(){ht()},1e4)):V=!1})}function ft(t,e){(0,b.d)("Route"),(0,n.e)("route",t),X=t,Y=e,N=0,M={},C.setAttribute("displayed","true"),S.scrollLeft=0,S.focus(),function(t,e){for(var a=(0,u.b)("playing_animation"),s=(0,b.e)("window"),i=(s.width,s.height),r=Math.floor(i/50)+5,d={},n=0;n<2;n++){var l=`g_${n}`;d[l]=[];for(var o=0;o<r;o++)d[l].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:o,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}ot({groupNames:["往載入中","往載入中"],groupedItems:d,groupQuantity:2,itemQuantity:{g_0:r,g_1:r},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:t,PathAttributeId:e,dataUpdateTime:0},!0,a)}(t,e),O||(O=!0,V?pt():(V=!0,ht())),(0,b.a)()}function bt(){C.setAttribute("displayed","false"),O=!1,(0,b.c)()}function vt(t,e){O=!1,ft(t,e)}function mt(t,e){var a=(0,o.e)(t,".yl"),s=(0,o.d)(a,'.zl[highlighted="true"][type="tab"]');for(var i of s)i.setAttribute("highlighted","false");switch((0,o.e)(a,`.zl[code="${e}"]`).setAttribute("highlighted","true"),e){case 0:(0,o.e)(t,".am").setAttribute("displayed","true"),(0,o.e)(t,".cm").setAttribute("displayed","false"),(0,o.e)(t,".bm").setAttribute("displayed","false"),(0,o.e)(t,".dm").setAttribute("displayed","false");break;case 1:(0,o.e)(t,".am").setAttribute("displayed","false"),(0,o.e)(t,".cm").setAttribute("displayed","true"),(0,o.e)(t,".bm").setAttribute("displayed","false"),(0,o.e)(t,".dm").setAttribute("displayed","false");break;case 2:(0,o.e)(t,".am").setAttribute("displayed","false"),(0,o.e)(t,".cm").setAttribute("displayed","false"),(0,o.e)(t,".bm").setAttribute("displayed","true"),(0,o.e)(t,".dm").setAttribute("displayed","false");break;case 3:(0,o.e)(t,".am").setAttribute("displayed","false"),(0,o.e)(t,".cm").setAttribute("displayed","false"),(0,o.e)(t,".bm").setAttribute("displayed","false"),(0,o.e)(t,".dm").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=d79e2aa8b7de365cec83.js.map