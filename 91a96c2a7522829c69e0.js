"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[557],{8557:(t,n,r)=>{function e(t,n,r){var e=r.x-n.x,a=r.y-n.y,o=e*e+a*a,c=((t.x-n.x)*e+(t.y-n.y)*a)/o;if(c<0)e=t.x-n.x,a=t.y-n.y;else if(c>1)e=t.x-r.x,a=t.y-r.y;else{var i={x:n.x+c*e,y:n.y+c*a};e=t.x-i.x,a=t.y-i.y}return Math.sqrt(e*e+a*a)}function a(t,n){if(t.length<3)return t;for(var r=0,o=0,c=1;c<t.length-1;c++){var i=e(t[c],t[0],t[t.length-1]);i>r&&(o=c,r=i)}if(r>n){var s=t.slice(0,o+1),l=t.slice(o),u=a(s,n),f=a(l,n);return u.slice(0,u.length-1).concat(f)}return[t[0],t[t.length-1]]}function o(t,n,r){var e=new Date;return e.setDate(1),e.setMonth(0),e.setFullYear(t),e.setMonth(n-1),e.setDate(r),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}r(3503),r(9083);r(3790);function c(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,a,o,c,i=[],s=!0,l=!1;try{if(o=(r=r.call(t)).next,0===n){if(Object(r)!==r)return;s=!1}else for(;!(s=(e=o.call(r)).done)&&(i.push(e.value),i.length!==n);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw a}}return i}}(t,n)||i(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,n){if(t){if("string"==typeof t)return s(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,n):void 0}}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);r<n;r++)e[r]=t[r];return e}var l,u={};if("undefined"!=typeof SharedWorker){var f=new SharedWorker(new URL(r.p+r.u(63),r.b));(l=f.port).start()}else{var d=new Worker(new URL(r.p+r.u(444),r.b));l=d}function h(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,a,o,c,i=[],s=!0,l=!1;try{if(o=(r=r.call(t)).next,0===n){if(Object(r)!==r)return;s=!1}else for(;!(s=(e=o.call(r)).done)&&(i.push(e.value),i.length!==n);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw a}}return i}}(t,n)||y(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,n){if(t){if("string"==typeof t)return v(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,n):void 0}}function v(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);r<n;r++)e[r]=t[r];return e}l.onmessage=function(t){if(1!==t.data.length){var n=c(t.data,2),r=n[0],e=n[1];u[e]&&(u[e](r),delete u[e])}else console.log(t.data[0])},l.onerror=function(t){console.error(t.message)};var p=[],g=!1;if("onconnect"in self)self.onconnect=function(t){var n=t.ports[0];n.onmessage=function(t){n.postMessage([-1]);var r=h(t.data,5),e=r[0],a=r[1],o=r[2],c=r[3],i=r[4];p.push({dataUsageStatsChunks:e,width:a,height:o,padding:c,taskID:i,port:n}),b()}};else{var m=self;self.onmessage=function(t){m.postMessage([-1]);var n=h(t.data,5),r=n[0],e=n[1],a=n[2],o=n[3],c=n[4];p.push({dataUsageStatsChunks:r,width:e,height:a,padding:o,taskID:c,port:m}),b()}}var x=1440;function b(){if(!g&&0!==p.length){g=!0;var t,n=p.shift(),r=n.dataUsageStatsChunks,e=n.width,c=n.height,i=n.padding,s=n.taskID,l=n.port,u=r.length,f=[],d=0,h=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=y(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){i=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw o}}}}(r);try{for(h.s();!(t=h.n()).done;){var v=t.value;f.push(v.stats.max),f.push(v.stats.min),d+=v.stats.sum}}catch(t){h.e(t)}finally{h.f()}for(var m=function(t){var n=t.length;if(0===n)return[0,0];for(var r=1/0,e=-1/0,a=n-1;a>=0;a--){var o=t[a];o>e&&(e=o),o<r&&(r=o)}return[r,e]}(f),w=0===m[1]?1:m[1],k=0===m[0]?1:m[0],S=r[0].date,A=r[u-1].date,M=o(S[0],S[1],S[2]),I=o(A[0],A[1],A[2]),j=[],C=0;C<u;C++)for(var U=r[C].data,D=0;D<x;D++){var O=i+(C/7+D/x)*e,L=i+(1-U[D]/w)*c;j.push({x:O,y:L})}var E='<line x1="'.concat(i,'" y1="').concat(c+i,'" x2="').concat(i+e,'" y2="').concat(c+i,'" stroke="var(--a)" stroke-width="1" />'),T='<line x1="'.concat(i,'" y1="').concat(i,'" x2="').concat(i,'" y2="').concat(c+i,'" stroke="var(--a)" stroke-width="1" />'),W='<text x="'.concat(i+e/2,'" y="').concat(i+c+i,'" text-anchor="middle" font-size="12" fill="var(--a)">時間</text>'),z='<text x="'.concat(i/2,'" y="').concat(i+c/2,'" text-anchor="middle" font-size="12" fill="var(--a)" transform="rotate(-90, ').concat(.7*i,", ").concat(i+c/2,')">傳輸量</text>'),G=function(t,n){if(t.length<1)return"";for(var r="M".concat(t[0].x*n,",").concat(t[0].y*n),e=1;e<t.length-1;e++){var a=t[e],o=t[e+1]||a;r+="Q".concat(a.x*n,",").concat(a.y*n,",").concat((a.x*n+o.x*n)/2,",").concat((a.y*n+o.y*n)/2)}var c=t[t.length-1];return r+"L".concat(c.x*n,",").concat(c.y*n)}(a(j,1.1),1),R="M".concat(i,",").concat(c+i).concat(G,"L").concat(i+e,",").concat(c+i,"L").concat(i,",").concat(c+i),$='<path d="'.concat(G,'" fill="none" stroke="var(--b)" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" opacity="1"></path>'),q='<path d="'.concat(R,'" stroke="none" stroke-width="0" fill="url(#grad1)"></path>'),B={stats:{max:w,min:k,sum:d},period:{start:M,end:I},chart:'<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(e+2*i,'px" height="').concat(c+2*i,'px" viewBox="0 0 ').concat(e+2*i," ").concat(c+2*i,'"><defs>').concat('<linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.3);" /><stop offset="73%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.09);" /><stop offset="100%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0);" /></linearGradient>',"</defs>").concat(q).concat($).concat(E).concat(T).concat(W).concat(z,"</svg>")};l.postMessage([B,s]),g=!1,b()}}}}]);
//# sourceMappingURL=91a96c2a7522829c69e0.js.map