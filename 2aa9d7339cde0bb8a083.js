!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("bus",[],t):"object"==typeof exports?exports.bus=t():e.bus=t()}(self,()=>(()=>{"use strict";var e,t={4750(e,t,n){n.d(t,{a:()=>c});var i,a=n(467),r=n(3453),s=n(8024),o={};if("undefined"!=typeof SharedWorker){var u=new SharedWorker(new URL(n.p+n.u(82),n.b));(i=u.port).start()}else{var d=new Worker(new URL(n.p+n.u(82),n.b));i=d}function c(e){return l.apply(this,arguments)}function l(){return(l=(0,a.a)(function*(e){var t=(0,s.c)();return yield new Promise(function(n,a){o[t]=n,i.onerror=function(e){a(e.message)},i.postMessage([e,t])})})).apply(this,arguments)}i.onmessage=function(e){var t=(0,r.a)(e.data,2),n=t[0],i=t[1];o[i]&&(o[i](n),delete o[i])},i.onerror=function(e){}},9469(e,t,n){n.d(t,{a:()=>o,b:()=>s});var i=n(8134),a=n(3030),r=n(4690);function s(){var e=new URL(location.href).searchParams.get("permalink");if(null!==e){var t=String(e);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(t)){var n=t.split(/[\@\~]/);switch(parseInt(n[0])){case 0:(0,i.e)(parseInt(n[1],16)).then(function(e){!1!==e?(0,r.d)(e.id,e.pid):(0,i.c)(n[2]).then(function(e){e.length>0&&(0,r.d)(e[0].id,e[0].pid)})});break;case 1:(0,a.d)(n[1])}}}}function o(e,t){var n=new URL("https://erichsia7.github.io/bus/");switch(e){case 0:n.searchParams.set("permalink",`0@${parseInt(t.id).toString(16)}~${t.name}`);break;case 1:n.searchParams.set("permalink",`1@${t.hash}`)}return decodeURIComponent(n.toString())}},2648(e,t,n){n.d(t,{a:()=>r});var i=n(3453),a=n(157);function r(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,o=[[[-1,0],[0,-1]],[[0,-1],[1,0]],[[1,0],[0,1]],[[0,1],[-1,0]]],u=[[[-1,0],[-1,-1],[0,-1]],[[0,-1],[1,-1],[1,0]],[[1,0],[1,1],[0,1]],[[0,1],[-1,1],[-1,0]]],d=function(e,t){for(var n=a.create(e,{errorCorrectionLevel:t}),i=n.modules.size,r=[],s=0;s<i;s++){for(var o=[],u=0;u<i;u++){var d=n.modules.get(u,s);o.push(d)}r.push(o)}return r}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"L"),c=d.length,l=new Map;function h(e,t,n,i,a){var r=`${e},${t}:${n},${i}`,s=`${n},${i}:${e},${t}`;l.has(s)?l.delete(s):l.set(r,{x1:e,y1:t,x2:n,y2:i,command:a})}for(var f=0;f<c;f++)for(var v=0;v<c;v++){var p=(v+r)*s,g=(f+r)*s,m=s,$=s,y=new Uint8Array(4);if(1===d[f][v]){for(var b=0;b<4;b++){var w=o[b],k=1;for(var M of w){var S;1===(null===(S=d[f+M[1]])||void 0===S?void 0:S[v+M[0]])&&(k*=0)}y[b]=k}var x=y[0]*t*s,T=y[1]*t*s,D=y[2]*t*s,L=y[3]*t*s;x>0?h(p,g+x,p+x,g,`Q${p} ${g} ${p+x} ${g}`):h(p,g,p,g,""),h(p+x,g,p+m-T,g,`L${p+m-T} ${g}`),T>0&&h(p+m-T,g,p+m,g+T,`Q${p+m} ${g} ${p+m} ${g+T}`),h(p+m,g+T,p+m,g+$-D,`L${p+m} ${g+$-D}`),D>0&&h(p+m,g+$-D,p+m-D,g+$,`Q${p+m} ${g+$} ${p+m-D} ${g+$}`),h(p+m-D,g+$,p+L,g+$,`L${p+L} ${g+$}`),L>0&&h(p+L,g+$,p,g+$-L,`Q${p} ${g+$} ${p} ${g+$-L}`),h(p,g+$-L,p,g+x,`L${p} ${g+x}`)}else{for(var C=0;C<4;C++){var I=u[C],P=1;for(var A of I){var O;null!==(O=d[f+A[1]])&&void 0!==O&&O[v+A[0]]||(P*=0)}y[C]=P}var R=n*s;y[0]&&(h(p,g+R,p,g,`L${p} ${g}`),h(p,g,p+R,g,`L${p+R} ${g}`),h(p+R,g,p,g+R,`Q${p} ${g} ${p} ${g+R}`)),y[1]&&(h(p+m-R,g,p+m,g,`L${p+m} ${g}`),h(p+m,g,p+m,g+R,`L${p+m} ${g+R}`),h(p+m,g+R,p+m-R,g,`Q${p+m} ${g} ${p+m-R} ${g}`)),y[2]&&(h(p+m,g+$-R,p+m,g+$,`L${p+m} ${g+$}`),h(p+m,g+$,p+m-R,g+$,`L${p+m-R} ${g+$}`),h(p+m-R,g+$,p+m,g+$-R,`Q${p+m} ${g+$} ${p+m} ${g+$-R}`)),y[3]&&(h(p+R,g+$,p,g+$,`L${p} ${g+$}`),h(p,g+$,p,g+$-R,`L${p} ${g+$-R}`),h(p,g+$-R,p+R,g+$,`Q${p} ${g+$} ${p+R} ${g+$}`))}}var j=new Map;for(var U of l){var F=(0,i.a)(U,2),Y=(F[0],F[1]),Q=`${Math.round(Y.x1)},${Math.round(Y.y1)}`;j.has(Q)||j.set(Q,[]),j.get(Q).push(Y)}for(var _=[];j.size>0;){var E=j.keys().next().value,V=E,z=j.get(E)[0];for(_.push(`M${z.x1} ${z.y1}`);;){var H=j.get(V);if(!H||0===H.length)break;var N=H.shift();if(0===H.length&&j.delete(V),_.push(N.command),(V=`${Math.round(N.x2)},${Math.round(N.y2)}`)===E&&(!j.has(E)||0===j.get(E).length)){_.push("Z");break}}}return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${(c+2*r)*s} ${(c+2*r)*s}"><path d="${_.join("")}" fill-rule="nonzero" stroke="none" /></svg>`}},251(e,t,n){n.d(t,{a:()=>s,b:()=>l});var i=n(467),a=n(9119);function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32e3,i=URL.createObjectURL(e),a=document.createElement("a");return a.href=i,a.download=t,document.body.appendChild(a),a.click(),a.remove(),setTimeout(function(){URL.revokeObjectURL(i)},n),i}function s(e){return o.apply(this,arguments)}function o(){return o=(0,i.a)(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n=arguments.length>2?arguments[2]:void 0,i=new Blob([e],{type:t}),s=new File([i],n,{type:t});if(navigator.canShare&&navigator.canShare({files:[s]}))try{yield navigator.share({files:[s]})}catch(e){(0,a.a)("download","下載資料",{text:"下載",action:function(){r(i,n)}})}else r(i,n)}),o.apply(this,arguments)}function u(){return(u=(0,i.a)(function*(e){if(navigator.clipboard&&navigator.clipboard.writeText)try{return yield navigator.clipboard.writeText(e),!0}catch(e){}try{var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly","readonly"),document.body.appendChild(t),t.select();var n=document.execCommand("copy");return document.body.removeChild(t),n}catch(e){return!1}})).apply(this,arguments)}function d(e){return c.apply(this,arguments)}function c(){return c=(0,i.a)(function*(e){var t;(0,a.a)("link","複製連結",{text:"複製",action:(t=(0,i.a)(function*(){var t=yield function(e){return u.apply(this,arguments)}(e);t?(0,a.a)("check_circle","已複製連結"):(0,a.a)("cancel","無法複製連結")}),function(){return t.apply(this,arguments)})})}),c.apply(this,arguments)}function l(e,t){return h.apply(this,arguments)}function h(){return(h=(0,i.a)(function*(e,t){if(navigator.canShare&&navigator.canShare({title:e,url:t}))try{yield navigator.share({title:e,url:t})}catch(e){d(t)}else d(t)})).apply(this,arguments)}},4781(e,t,n){function i(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];if("string"==typeof e)for(var i=e.length,a=0;a<i;a++){var r=e.charCodeAt(a);(n.indexOf(r)<0||!t)&&n.push(r)}return n}function a(e){return/[\u3100-\u312Fˇˋˊ˙]/gm.test(e)}n.d(t,{a:()=>a,b:()=>i})},9915(e,t,n){n.d(t,{a:()=>s});var i=n(467),a=n(3029),r=n(3785),s=function(){return(0,r.a)(function e(t,n){(0,a.a)(this,e),this.pivot=(new Date).getTime(),this.interval=n,this.lastTickCount=-1,this.isRunning=!1,this.isPaused=!1,this.isAutoPaused=!1,this.timerId=null,this.callback=t,this.handleVisibilityChange=this.handleVisibilityChange.bind(this),"document"in self&&document.addEventListener("visibilitychange",this.handleVisibilityChange)},[{key:"tick",value:(e=(0,i.a)(function*(){var e=this;if(!(this.isPaused||this.isAutoPaused||this.isRunning)){var t=(new Date).getTime(),n=Math.floor((t-this.pivot)/this.interval);if(n<=this.lastTickCount)this.timerId=setTimeout(function(){return e.tick()},10);else{var i;this.isRunning=!0,this.lastTickCount=n;try{i=yield this.callback()}catch(e){}if(this.isRunning=!1,!this.isPaused&&!this.isAutoPaused){var a=(new Date).getTime();"number"==typeof i&&i>0&&i!==this.interval&&(this.interval=i,this.pivot=a,this.lastTickCount=0),this.scheduleNext()}}}}),function(){return e.apply(this,arguments)})},{key:"scheduleNext",value:function(){var e=this;this.timerId&&clearTimeout(this.timerId);var t=this.lastTickCount+1,n=this.pivot+t*this.interval-(new Date).getTime();this.timerId=setTimeout(function(){return e.tick()},Math.max(0,n))}},{key:"handleVisibilityChange",value:function(){this.lastTickCount<0||(document.hidden?this.isPaused||(this.isAutoPaused=!0,this.timerId&&clearTimeout(this.timerId)):this.isAutoPaused&&(this.isAutoPaused=!1,this.isRunning||this.scheduleNext()))}},{key:"pause",value:function(){this.isPaused||(this.isPaused=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null))}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isPaused&&(this.isPaused=!1,"document"in self&&document.hidden?this.isAutoPaused=!0:this.isRunning||(e&&(this.pivot=(new Date).getTime(),this.lastTickCount=-1),this.scheduleNext()))}},{key:"destroy",value:function(){this.pause(),"document"in self&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}]);var e}()},5579(e,t,n){function i(e,t,n,i){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(n),a.setMinutes(i),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(e.getFullYear()),a.setMonth(e.getMonth()),a.setDate(e.getDate()),a.setDate(a.getDate()+t),a}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.match(/[0-9\.]*/gm);if(n){var i=(new Date).getTimezoneOffset(),a=parseInt(n[0]),r=parseInt(n[2]),s=parseInt(n[4]),o=parseInt(n[6]),u=parseInt(n[8]),d=parseInt(n[10]),c=new Date;return c.setDate(1),c.setMonth(0),c.setFullYear(a),c.setMonth(r-1),c.setDate(s),c.setHours(o),c.setMinutes(u+t-i),c.setSeconds(d),c.getTime()}return 0}function r(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,e.getFullYear()).replaceAll(/M{2,2}/g,String(e.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(e.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(e.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(e.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(e.getSeconds()).padStart(2,"0")).replaceAll(/W{2,2}/g,`週${["日","一","二","三","四","五","六"][e.getDay()]}`)}function s(e){var t=e.getTime(),n=Math.floor(((new Date).getTime()-t)/1e3),i=Math.floor(n/31536e3);return i>=1?`${i}年前`:(i=Math.floor(n/2592e3))>=1?`${i}個月前`:(i=Math.floor(n/86400))>=1?`${i}天前`:(i=Math.floor(n/3600))>=1?`${i}小時前`:(i=Math.floor(n/60))>=1?`${i}分鐘前`:n>0?`${n}秒前`:"現在"}function o(e,t){var n=0|e;switch(t){case 0:return`${n}秒`;case 1:return[String((n-n%60)/60),String(n%60)].map(function(e){return e.padStart(2,"0")}).join(":");case 2:return`${n/60|0}分`;case 3:if(n>=3600)return`${parseFloat((n/3600).toFixed(1))}時`;if(60<=n&&n<3600)return`${n/60|0}分`;if(n<60)return`${n}秒`;break;default:return"--"}}function u(e){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][e]}function d(e){return`${String(e.hours).padStart(2,"0")}:${String(e.minutes).padStart(2,"0")}`}function c(e,t,n){var i=new Date;return i.setDate(1),i.setMonth(0),i.setFullYear(e),i.setMonth(t-1),i.setDate(n),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i}n.d(t,{a:()=>c,b:()=>s,c:()=>r,d:()=>o,e:()=>u,f:()=>i,g:()=>d,h:()=>a})}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,i.amdO={},e=[],i.O=(t,n,a,r)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){for(var[n,a,r]=e[c],o=!0,u=0;u<n.length;u++)(!1&r||s>=r)&&Object.keys(i.O).every(e=>i.O[e](n[u]))?n.splice(u--,1):(o=!1,r<s&&(s=r));if(o){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,a,r]},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.u=e=>({82:"a4b12bb4477939f0a5fe",132:"82a2e0280e7aaf91e0be",234:"9d82df78cf2afdbced30",319:"a3d5d1075761c814d460",327:"853d41b3f5273378f0bf",355:"16c776ce6840220d4d67",367:"5fd822ec4315af836b22",525:"02d5585677dd9fd81462",611:"83f997a8d3646a9f19be",625:"77d6e45ceead72483d62",660:"a9e099856c32f811a5ab",662:"7f51e29313726ccf3722",778:"a00a0ff18bd3c309cfc8"}[e]+".js"),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.p="./",(()=>{i.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={986:0,437:0,851:0,226:0,225:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[s,o,u]=n,d=0;if(s.some(t=>0!==e[t])){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(u)var c=u(i)}for(t&&t(n);d<s.length;d++)r=s[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},n=self.webpackChunkbus=self.webpackChunkbus||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=i.O(void 0,[35,512,790,157,374,680,470,496,852,480,537,607,299,437,601,851,821,226,474,225,155,289],()=>i(4244));return a=(a=i.O(a)).default})());
//# sourceMappingURL=2aa9d7339cde0bb8a083.js.map