"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[155],{5009(e,t,n){n.d(t,{a:()=>Y,b:()=>W,c:()=>I,d:()=>X,e:()=>K,f:()=>V,g:()=>U});var a=n(8134),i=n(8179),r=n(7968),o=n(8024),c=n(5428),s=n(4781),d=n(4884),u=n(6082),l=n(4537),f=n(904),p=n(3030),v=n(9119),h=n(4690),b=[],m=(0,i.c)(".on"),g=(0,i.e)(m,".pn"),y=(0,i.e)(m,".tn"),k=(0,i.e)(g,".qn #search_input"),L=(0,i.e)(g,".qn svg"),w=(0,i.e)(L,'text[component="text"]'),A=(0,i.e)(L,'path[component="cursor"]'),C=(0,i.e)(g,".sn"),x=(0,i.e)(y,".un"),E=(0,i.e)(y,".yn"),S="400",z="20px",T='"Noto Sans TC", sans-serif',_=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],$=(0,f.d)("head-two-button"),j=$.width,D=$.height,F=!1,q="",H=0;function M(){var e=k.value,t=e.substring(0,e.length-1);k.value=t,Q(),J(),G(),(0,f.f)()}function O(){k.value="",Q(),J(),G(),(0,f.f)()}function R(e){e.preventDefault(),k.focus(),(0,f.f)()}function B(){!function(){if(!F){F=!0;var e=new DocumentFragment;for(var t of _)for(var n of t){var a=document.createElement("button");a.classList.add("zn");var i=(0,o.j)()?"touchstart":"mousedown";switch(n){case"刪除":a.addEventListener(i,M),a.appendChild((0,l.b)("backspace"));break;case"清空":a.addEventListener(i,O),a.innerText=n;break;case"鍵盤":a.addEventListener(i,R),a.appendChild((0,l.b)("keyboard"));break;default:a.addEventListener(i,function(e){return function(){var t,n;t=e,n=`${k.value}${t}`,k.value=n,Q(),J(),G(),(0,f.f)()}}(n)),a.innerText=n}e.appendChild(a)}E.append(e)}}(),E.setAttribute("displayed","true"),J()}function I(){k.addEventListener("paste",function(){G(),Q()}),k.addEventListener("cut",function(){G(),Q()}),k.addEventListener("selectionchange",function(){G(),Q()}),document.addEventListener("selectionchange",function(){G(),Q()}),k.addEventListener("keyup",function(){G(),Q()}),k.addEventListener("scroll",function(){G()})}function N(){return parseInt(C.getAttribute("type"))}function G(){var e=k.scrollLeft,t=k.value,n=k.selectionStart,a=k.selectionEnd,i=0===t.length,s=i?"搜尋路線、地點、公車":t,d=i?0:n,u=d!==(i?0:a),l=(0,r.b)(s,S,z,T),f=(0,r.b)(s.substring(0,d),S,z,T),p=-1*e,v=l[0]+(D-l[2])/2;w.textContent=s,w.setAttribute("transform",`translate(${p} ${v})`),A.setAttribute("transform",`translate(${i?1:(0,c.a)(f[1]+p,1,j-1)} 0)`),w.setAttribute("empty",(0,o.a)(i)),A.setAttribute("selection",(0,o.a)(u)),k.setAttribute("selection",(0,o.a)(u))}function J(){var e=k.value,t=e.length,n=(0,r.b)(e,S,z,T);k.setSelectionRange(t,t),k.scrollTo({left:n[1]-j})}function K(){$=(0,f.d)("head-two-button"),j=$.width,D=$.height,L.setAttribute("viewBox",`0 0 ${j} ${D}`),J(),G()}function P(){var e=(0,i.a)();e.classList.add("vn");var t=(0,i.a)();t.classList.add("xn");var n=(0,i.a)();return n.classList.add("wn"),n.appendChild((0,l.a)()),e.appendChild(n),e.appendChild(t),e}function Q(){var e=["route","location_on","directions_bus"];function t(t,n,a){function r(t,n){var a=(0,i.e)(n,".wn");(0,l.c)(a,e[t.item.type])}function o(e,t){(0,i.e)(t,".xn").innerText=e.item.n}function c(e,t){switch(e.item.type){case 0:t.onclick=function(){(0,h.d)(e.item.id,e.item.pid)};break;case 1:t.onclick=function(){(0,p.d)(e.item.hash)};break;case 2:t.onclick=function(){(0,d.d)(e.item.id)}}}a?(n.item.type!==a.item.type&&r(n,t),n.item.id!==a.item.id&&(o(n,t),c(n,t))):(r(n,t),o(n,t),c(n,t))}var n=N(),r=k.value;if(!(0,s.a)(r)&&(r!==q||n!==H)){var o=(0,a.b)(r,n,30),c=o.length,u=Array.from((0,i.d)(x,".vn")),f=u.length;if(c!==f){var v=f-c;if(v<0){for(var m=new DocumentFragment,g=0;g>v;g--){var y=P();m.appendChild(y),u.push(y)}x.appendChild(m)}else if(v>0)for(var L=f-1,w=f-v-1;L>w;L--)u[L].remove(),u.splice(L,1)}for(var A=0;A<c;A++){var C=b[A],E=o[A],S=u[A];t(S,E,C||null)}b=o}q=r,H=n}function U(){var e=N(),t=-1;t=e>=-1&&e<2?e+1:-1;(0,l.c)(C,["filter_list","route","location_on","directions_bus"][t+1]),C.setAttribute("type",t.toString()),Q()}function V(){m.setAttribute("displayed","true")}function W(){m.setAttribute("displayed","false")}function X(){u.a?((0,f.c)("Search"),V(),B(),(0,a.a)(),(0,f.b)()):(0,v.a)("download_for_offline","資料還在下載中")}function Y(){E.setAttribute("displayed","false"),W(),(0,f.h)(),(0,f.e)("Search")}},6104(e,t,n){n.d(t,{a:()=>C,b:()=>x,c:()=>w,d:()=>y,e:()=>S,f:()=>A,g:()=>_,h:()=>L,i:()=>T,j:()=>z});var a=n(467),i=n(5976),r=n(5427),o=n(3459),c=n(3251),s=n(4311),d=n(8179),u=n(8024),l=n(251),f=n(4537),p=n(904),v=n(9119),h=(0,d.c)("._n"),b=(0,d.e)(h,".jo"),m=(0,d.e)(b,".lo");function g(e){var t=(0,d.a)();t.classList.add("no"),t.setAttribute("type",e.type);var n=(0,d.a)();n.classList.add("po"),n.appendChild((0,f.b)(e.icon));var a=(0,d.a)();a.classList.add("qo"),a.innerText=e.name;var i=(0,d.a)();i.classList.add("so"),i.innerText=e.status;var r=(0,d.a)();r.classList.add("to");var o=document.createElement("span");return o.appendChild((0,f.b)("arrow_forward_ios")),r.appendChild(o),"function"==typeof e.action?t.onclick=function(){e.action()}:"string"==typeof e.action&&t.setAttribute("onclick",e.action),t.appendChild(n),t.appendChild(a),t.appendChild(i),t.appendChild(r),t}function y(){return k.apply(this,arguments)}function k(){return(k=(0,a.a)(function*(){var e=yield(0,o.f)();m.innerHTML="";var t=new DocumentFragment;for(var n of e){var a=g(n);t.appendChild(a)}m.append(t)})).apply(this,arguments)}function L(){h.setAttribute("displayed","true")}function w(){h.setAttribute("displayed","false")}function A(){(0,p.c)("Settings"),L(),y(),(0,p.b)()}function C(){w(),(0,p.h)(),(0,p.e)("Settings")}function x(){return E.apply(this,arguments)}function E(){return(E=(0,a.a)(function*(){(0,v.a)("manufacturing","資料匯出中");var e=yield(0,i.a)();(0,l.a)(e,"application/json","bus-export.json")})).apply(this,arguments)}function S(){var e=(0,u.c)(),t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.setAttribute("name",e),t.id=e,t.classList.add("yo"),t.addEventListener("change",function(t){if(0===t.target.files.length)(0,d.c)(`body #${e}`).remove();else{var n=t.target.files[0],a=new FileReader;a.onload=function(t){var n=t.target.result;(0,r.a)(n).then(function(t){t?(0,v.a)("check_circle","已匯入資料"):(0,v.a)("error","無法匯入資料"),(0,d.c)(`body #${e}`).remove()})},a.readAsText(n)}},{once:!0}),t.addEventListener("cancel",function(){(0,d.c)(`body #${e}`).remove()},{once:!0}),document.body.append(t),(0,d.c)(`body #${e}`).click()}function z(){var e=(0,c.e)();window.open(e)}function T(){window.open("https://github.com/EricHsia7/bus")}function _(){(0,s.a)().then(function(e){switch(e){case"granted":(0,v.a)("check_circle","已開啟永久儲存");break;case"denied":(0,v.a)("cancel","永久儲存權限已被拒絕");break;case"unsupported":(0,v.a)("warning","此瀏覽器不支援永久儲存");break;default:(0,v.a)("error","發生錯誤")}})}},6166(e,t,n){n.d(t,{a:()=>g,b:()=>b,c:()=>m,d:()=>h});var a=n(3459),i=n(8179),r=n(904),o=n(6104),c=(0,i.c)(".ao"),s=(0,i.e)(c,".ko"),d=(0,i.e)(s,".mo"),u=(0,i.e)(s,".xo"),l=(0,i.e)(c,".co"),f=(0,i.e)(l,".io"),p=(0,i.e)(l,".fo");function v(e,t,n){var r=(0,i.a)();r.classList.add("oo");var o=(0,i.a)();o.classList.add("ro"),o.innerText=t.name;var c=(0,i.a)();c.classList.add("uo");var s=document.createElement("input");return s.type="checkbox",s.checked=e.option===n,s.onclick=function(t){!function(e,t,n){var r=(0,i.b)('.ao .ko .mo .oo .uo input[type="checkbox"]');for(var o of r)o.checked=!1;var c=e.target;c.checked=!0,(0,a.a)(t,n)}(t,e.key,n)},c.appendChild(s),r.appendChild(o),r.appendChild(c),r}function h(){c.setAttribute("displayed","true")}function b(){c.setAttribute("displayed","false")}function m(e){(0,r.c)("SettingsOptions"),h(),function(e){var t=(0,a.c)(e);p.onclick=function(){g(),(0,o.d)()},f.innerText=t.name,u.innerText=t.description,d.innerHTML="";var n=new DocumentFragment,i=0;for(var r of t.options){var c=v(t,r,i);n.appendChild(c),i+=1}d.append(n)}(e),(0,r.b)()}function g(){b(),(0,r.h)(),(0,r.e)("SettingsOptions")}},2994(e,t,n){n.d(t,{a:()=>w,b:()=>k,c:()=>L,d:()=>y});var a=n(467),i=n(4225),r=n(3459),o=n(8179),c=n(8024),s=n(5428),d=n(904),u=[],l=!1,f=!1,p=(0,o.c)(".zo"),v=(0,o.e)(p,".cp"),h=(0,o.e)(v,".dp");function b(){var e=(0,o.a)();e.classList.add("ep");var t=(0,o.a)();t.classList.add("fp");var n=(0,o.a)();return n.classList.add("gp"),e.appendChild(t),e.appendChild(n),e}function m(e,t,n){function a(e,a,i){function r(e,t){(0,o.e)(e,".gp").innerText=t.size}function s(e,t){(0,o.e)(e,".fp").innerText=t.category.name}function d(e,t){e.setAttribute("animation",(0,c.a)(t))}function u(e,t){e.setAttribute("skeleton-screen",(0,c.a)(t))}i?(a.category.key!==i.category.key&&(s(e,a),r(e,a)),a.size!==i.size&&r(e,a),l!==n&&d(e,n),f!==t&&u(e,t)):(r(e,a),s(e,a),d(e,n),u(e,t))}var i=[];for(var r in e.categorizedSizes){var s=e.categorizedSizes[r];i.push(s)}var d=i.length,p=Array.from((0,o.d)(h,".ep")),v=p.length;if(d!==v){var m=v-d;if(m<0){for(var g=new DocumentFragment,y=0;y>m;y--){var k=b();g.appendChild(k),p.push(k)}h.appendChild(g)}else if(m>0)for(var L=v-1,w=v-m-1;L>w;L--)p[L].remove(),p.splice(L,1)}for(var A=0;A<d;A++){var C=u[A],x=i[A],E=p[A];a(E,x,C||null)}u=i,f=t,l=n}function g(){return(g=(0,a.a)(function*(){var e=(0,r.b)("playing_animation");!function(){for(var e=(0,r.b)("playing_animation"),t=(0,d.d)("window").height,n=(0,s.a)(Math.floor(t/55)+2,0,7),a={categorizedSizes:{},totalSize:0},i=0;i<n;i++){var o=`store-${i}`;a.categorizedSizes[o]={category:{name:"",key:o},size:`size-${i}`}}m(a,!0,e)}(),m(yield(0,i.a)(),!1,e)})).apply(this,arguments)}function y(){p.setAttribute("displayed","true")}function k(){p.setAttribute("displayed","false")}function L(){(0,d.c)("Storage"),y(),function(){g.apply(this,arguments)}(),(0,d.b)()}function w(){k(),(0,d.h)(),(0,d.e)("Storage")}},1844(){},1818(){},9590(){},2239(){},1077(){},3381(){},9351(){},9205(){},7037(){},8073(){},3425(){},6171(){},7113(){},928(){},4800(){}}]);
//# sourceMappingURL=d329844d367d2ba88d6b.js.map