"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[214],{1078(){},1102(){},1306(){},1511(){},1743(){},2421(){},2696(){},3058(){},3127(){},3777(){},4305(){},5228(){},5286(e,t,a){a.d(t,{a:()=>N,b:()=>P,c:()=>O,d:()=>K,e:()=>W,f:()=>V});var n=a(467),i=a(9566),r=a(8621),o=a(3459),d=a(8179),s=a(8024),u=a(904),l=a(3041),c=a(8134),f=a(9469),v=a(251),p=a(8279);function h(){return(h=(0,n.a)(function*(e){var t=yield(0,c.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,v.b)(t.n,a)}})).apply(this,arguments)}function m(){return(m=(0,n.a)(function*(e){var t=yield(0,c.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,p.b)(a)}})).apply(this,arguments)}var g=a(7968),y=a(6141),b='"Noto Sans TC", sans-serif',k=(0,u.e)("route-details-canvas"),A=k.width,D=k.height,_=Math.min(window.devicePixelRatio,1.875)||1,w={};function x(){var e=(0,d.a)();return e.classList.add("kn"),e}function C(){var e=(0,d.a)();e.classList.add("mn");var t=document.createElement("canvas");return t.classList.add("nn"),e.appendChild(t),e}function S(e,t,a,n,i,r){e.innerText=t.name,e.setAttribute("day",r.toString()),e.onclick=function(){!function(e){for(var t=(0,o.b)("playing_animation"),a=(0,d.d)(N,".kn"),n=(0,d.d)(P,".mn"),i=0;i<7;i++){var r,s,u=a[i],l=n[i],c=`d_${i}`,f=null===(r=w)||void 0===r?void 0:r.calendarEventGroups[c],v=null===(s=w)||void 0===s?void 0:s.calendarDays[c];if(f&&v){var p=(0,y.a)("--c"),h=(0,y.a)("--d"),m=(0,y.a)("--e"),g=(0,y.a)("--qc"),b=(0,y.a)("--b"),k=(0,y.a)("--sa");S(u,v,e,!1,t,i),T(l,f,e,b,p,h,m,g,k,i)}}}(r)},e.setAttribute("highlighted",a===r?"true":"false"),e.setAttribute("animation",(0,s.a)(i)),e.setAttribute("skeleton-screen",(0,s.a)(n))}function T(e,t,a,n,i,r,o,l,c,f){function v(e,t,a){var n=70*t;e.fillStyle=a,e.fillRect(45,n+5,A-45,1.2),e.font=`400 12px ${b}`,e.textBaseline="top";var i=`${String(t).padStart(2,"0")}:00`,r=e.measureText(i),o=r.width,d=r.actualBoundingBoxDescent;e.fillText(i,(45-o)/2,n+(10-d)/2,o)}function p(e,t,a,n,i,r,o){var d=new Date;d.setDate(1),d.setMonth(0),d.setFullYear(t.date.getFullYear()),d.setMonth(t.date.getMonth()),d.setDate(t.date.getDate()),d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);var s=(t.date.getTime()-d.getTime())/864e5*24*70,u=A-45,l=60*t.duration*1e3/864e5*24*70;(0,g.a)(e,45,s,u,l,3,`rgba(${n}, ${i}, ${r}, ${o})`),(0,g.a)(e,45,s,3,l,{tl:3,tr:0,bl:3,br:0},a),e.font=`400 14px ${b}`,e.textBaseline="top",e.fillStyle=a;var c=t.dateString,f=e.measureText(c),v=f.width,p=f.actualBoundingBoxDescent;e.fillText(c,53,s+(l-p)/2,v)}var h=(0,d.e)(e,".nn"),m=h.getContext("2d");if(function(e,t,a){var n=t===a;e.setAttribute("displayed",(0,s.a)(n))}(e,a,f),function(e){k=(0,u.e)("route-details-canvas"),A=k.width,D=k.height,_=Math.min(window.devicePixelRatio,1.875)||1,e.width=A*_,e.height=D*_;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(_,_)}(h),a===f){m.clearRect(0,0,A,D);for(var y=0;y<24;y++)v(m,y,c);for(var w of t)p(m,w,n,i,r,o,l)}else m.clearRect(0,0,A,D)}function $(e,t,a){var n=(new Date).getDay(),i=(0,y.a)("--c"),r=(0,y.a)("--d"),o=(0,y.a)("--e"),s=(0,y.a)("--qc"),u=(0,y.a)("--b"),l=(0,y.a)("--sa"),c=e.calendarDays,f=e.calendarDayQuantity,v=e.calendarEventGroups,p=(e.calendarEventQuantity,Array.from((0,d.d)(P,".mn"))),h=Array.from((0,d.d)(N,".kn")),m=p.length;if(f!==m){var g=m-f;if(g<0){for(var b=new DocumentFragment,k=new DocumentFragment,A=0;A>g;A--){var D=x();b.appendChild(D),h.push(D);var _=C();k.appendChild(_),p.push(_)}N.append(b),P.append(k)}else if(g>0)for(var $=m-1,M=m-g-1;$>M;$--)h[$].remove(),h.splice($,1),p[$].remove(),p.splice($,1)}for(var R=0;R<f;R++){var B=`d_${R}`,E=c[B],L=v[B],F=h[R],z=p[R];S(F,E,n,t,a,R),T(z,L,n,u,i,r,o,s,l,R)}w=e}var M=a(4537),R=[],B=!1,E=!1;function L(){var e=(0,d.a)();e.classList.add("fn");var t=(0,d.a)();t.classList.add("gn"),t.appendChild((0,M.a)()),e.appendChild(t);var a=(0,d.a)();return a.classList.add("hn"),e.appendChild(a),e}function F(e,t,a){function n(e,n,i){function r(e,t){var a=(0,d.e)(e,".gn");(0,M.c)(a,t.icon)}function o(e,t){(0,d.e)(e,".hn").innerText=t.value}function u(e,t){e.setAttribute("animation",(0,s.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,s.a)(t))}null==i?(r(e,n),o(e,n),u(e,a),l(e,t)):((0,s.b)(i,n)||r(e,n),(0,s.b)(i,n)||o(e,n),B!==a&&u(e,a),E!==t&&l(e,t))}var i=e.length;t!==E&&K.setAttribute("skeleton-screen",(0,s.a)(t));var r=Array.from((0,d.d)(O,".fn")),o=r.length;if(i!==o){var u=o-i;if(u<0){for(var l=new DocumentFragment,c=0;c>u;c--){var f=L();l.appendChild(f),r.push(f)}O.append(l)}else if(u>0)for(var v=o-1,p=o-u-1;v>p;v--)r[v].remove(),r.splice(v,1)}for(var h=0;h<i;h++){var m=r[h],g=e[h];0===R.length?n(m,g,null):n(m,g,R[h])}R=e,B=a,E=t}var z=(0,d.c)(".tm"),Q=(0,d.e)(z,".ym"),q=(0,d.e)(Q,".zm"),G=(0,d.e)(q,'._m[group="calendar"]'),H=(0,d.e)(G,".dn"),N=(0,d.e)(H,".jn"),P=(0,d.e)(H,".ln"),Y=(0,d.e)(z,'.ym .zm ._m[group="actions"]'),j=(0,d.e)(Y,'.dn .en[action="save-to-folder"]'),I=(0,d.e)(Y,'.dn .en[action="get-permalink"]'),J=(0,d.e)(Y,'.dn .en[action="show-permalink-qrcode"]'),K=(0,d.e)(q,'._m[group="properties"]'),O=(0,d.e)(K,".dn");function U(){return U=(0,n.a)(function*(e,t){var a=(0,o.b)("playing_animation"),n=yield(0,i.e)("route",e);j.setAttribute("animation",(0,s.a)(a)),j.setAttribute("highlighted",(0,s.a)(n)),j.onclick=function(){(0,l.b)("route",[e],j)},I.setAttribute("animation",(0,s.a)(a)),I.onclick=function(){!function(e){h.apply(this,arguments)}(e)},J.setAttribute("animation",(0,s.a)(a)),J.onclick=function(){!function(e){m.apply(this,arguments)}(e)},function(){for(var e=(0,o.b)("playing_animation"),t=[],a=0;a<5;a++)t.push({key:a,icon:"none",value:""});F(t,!0,e)}(),function(){for(var e=(0,o.b)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},a={},n={},i=0;i<7;i++){var r=`d_${i}`;a[r]=[],n[r]={day:i,code:"d_{i}",name:""};for(var d=0;d<t[r];d++){var s=new Date;s.setHours(0),s.setMinutes(30*d),s.setSeconds(0),s.setMilliseconds(0),a[r].push({date:s,dateString:"",duration:15})}}$({calendarEventGroups:a,calendarDays:n,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var d=(0,s.c)(),u=yield(0,r.a)(e,t,d);F(u.properties,!1,a),$(u.calendar,!1,a)}),U.apply(this,arguments)}function V(e,t){(0,u.d)("RouteDetails"),z.setAttribute("displayed","true"),function(e,t){U.apply(this,arguments)}(e,t)}function W(){(0,u.f)("RouteDetails"),z.setAttribute("displayed","false");var e=(0,d.d)(P,".mn");for(var t of e)t.remove();var a=(0,d.d)(N,".kn");for(var n of a)n.remove()}},5461(){},5995(){},6388(){},6597(){},7868(){},7908(e,t,a){a.d(t,{a:()=>m,b:()=>h,c:()=>g});var n=a(467),i=a(3937),r=a(3422),o=a(8179),d=a(8024),s=a(904),u=a(9119),l=(0,o.c)(".on"),c=(0,o.e)(l,".tn"),f=(0,o.e)(c,".un"),v=(0,o.e)(f,'.vn[group="provider"] .zn input'),p=(0,o.e)(f,'.vn[group="registration-key"] .zn input');function h(){(0,s.d)("RegisterNotification"),l.setAttribute("displayed","true"),v.value=(0,r.f)(),p.value="",(0,s.a)()}function m(){l.setAttribute("displayed","false"),(0,s.c)()}function g(){return y.apply(this,arguments)}function y(){return(y=(0,n.a)(function*(){(0,u.a)("manufacturing","處理中");var e=v.value,t=p.value;if((0,d.g)(e))return(0,r.p)(e),(yield(0,i.a)(t))?void(0,u.a)("check_circle","註冊成功"):void(0,u.a)("error","註冊失敗");(0,u.a)("error","無效的提供者")})).apply(this,arguments)}},8983(){},9991(){}}]);
//# sourceMappingURL=3d382e756edbee28ed8e.js.map