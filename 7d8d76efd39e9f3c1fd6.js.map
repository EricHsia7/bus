{"version":3,"file":"7d8d76efd39e9f3c1fd6.js","mappings":"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","sources":["webpack://bus/./src/interface/search/index.ts","webpack://bus/./src/interface/settings/index.ts","webpack://bus/./src/interface/settings/options.ts","webpack://bus/./src/interface/storage/index.ts"],"sourcesContent":["import { prepareForSearch, searchFor, SearchItem, SearchResult } from '../../data/search/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { getTextBoundingBox } from '../../tools/graphic';\nimport { booleanToString, supportTouch } from '../../tools/index';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { openBus } from '../bus/index';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getBlankIconElement, getIconElement, setIcon } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { hidePreviousPage, pushPageHistory, querySize, revokePageHistory, scrollDocumentToTop, showPreviousPage } from '../index';\nimport { openLocation } from '../location/index';\nimport { promptMessage } from '../prompt/index';\nimport { openRoute } from '../route/index';\n\nlet previousSearchResults: Array<SearchResult> = [];\n\nconst searchField = documentQuerySelector('.css_search_field');\nconst searchHeadElement = elementQuerySelector(searchField, '.css_search_head');\nconst searchBodyElement = elementQuerySelector(searchField, '.css_search_body');\nconst searchInputElement = elementQuerySelector(searchHeadElement, '.css_search_search_input #search_input') as HTMLInputElement;\n\nconst searchInputSVGElement = elementQuerySelector(searchHeadElement, '.css_search_search_input svg') as SVGElement;\nconst searchInputSVGTextElement = elementQuerySelector(searchInputSVGElement, 'text[component=\"text\"]') as SVGTextElement;\nconst searchInputSVGCursorElement = elementQuerySelector(searchInputSVGElement, 'path[component=\"cursor\"]') as SVGPathElement;\n\nconst searchTypeFilterButtonElement = elementQuerySelector(searchHeadElement, '.css_search_button_right');\nconst searchResultsElement = elementQuerySelector(searchBodyElement, '.css_search_results');\nconst searchKeyboardElement = elementQuerySelector(searchBodyElement, '.css_search_keyboard');\n\nconst fontWeight = '400';\nconst fontSize = '20px';\nconst fontFamily = '\"Noto Sans TC\", sans-serif';\nconst searchInputPlaceholder = '搜尋路線、地點、公車';\n\nconst keyboardRows: Array<[string, string, string, string, string]> = [\n  ['紅', '藍', '1', '2', '3'],\n  ['綠', '棕', '4', '5', '6'],\n  ['橘', '小', '7', '8', '9'],\n  ['鍵盤', '幹線', '清空', '0', '刪除']\n];\n\nlet size = querySize('head-two-button');\nlet width = size.width;\nlet height = size.height;\nlet keyboardInitialized = false;\nlet previousValue: string = '';\nlet previousType = 0;\n\nexport function typeTextIntoInput(value): void {\n  const currentValue = searchInputElement.value;\n  const newValue = `${currentValue}${value}`;\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  bringToEnd();\n  updateSearchInput();\n  scrollDocumentToTop();\n}\n\nexport function deleteCharFromInput(): void {\n  const currentValue = searchInputElement.value;\n  const newValue = currentValue.substring(0, currentValue.length - 1);\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  bringToEnd();\n  updateSearchInput();\n  scrollDocumentToTop();\n}\n\nexport function emptyInput(): void {\n  searchInputElement.value = '';\n  updateSearchResult();\n  bringToEnd();\n  updateSearchInput();\n  scrollDocumentToTop();\n}\n\nexport function openSystemKeyboard(event: Event): void {\n  event.preventDefault();\n  searchInputElement.focus();\n  scrollDocumentToTop();\n}\n\nfunction initializeKeyboard(): void {\n  if (!keyboardInitialized) {\n    keyboardInitialized = true;\n    const fragment = new DocumentFragment();\n    for (const row of keyboardRows) {\n      for (const item of row) {\n        const newButtonElement = document.createElement('button');\n        newButtonElement.classList.add('css_search_keyboard_key');\n        const eventName = supportTouch() ? 'touchstart' : 'mousedown';\n        switch (item) {\n          case '刪除':\n            newButtonElement.addEventListener(eventName, deleteCharFromInput);\n            newButtonElement.appendChild(getIconElement('backspace'));\n            break;\n          case '清空':\n            newButtonElement.addEventListener(eventName, emptyInput);\n            newButtonElement.innerText = item;\n            break;\n          case '鍵盤':\n            newButtonElement.addEventListener(eventName, openSystemKeyboard);\n            newButtonElement.appendChild(getIconElement('keyboard'));\n            break;\n          default:\n            // Use an IIFE (Immediately Invoked Function Expression) to create a new scope for each item value. This ensures that the item variable is captured by value rather than by reference.\n            newButtonElement.addEventListener(\n              eventName,\n              (function (currentItem) {\n                return function () {\n                  typeTextIntoInput(currentItem);\n                };\n              })(item)\n            );\n            newButtonElement.innerText = item;\n            break;\n        }\n\n        fragment.appendChild(newButtonElement);\n      }\n    }\n    searchKeyboardElement.append(fragment);\n  }\n}\n\nexport function openKeyboard(): void {\n  initializeKeyboard();\n  searchKeyboardElement.setAttribute('displayed', 'true');\n  bringToEnd();\n}\n\nexport function closeKeyboard(): void {\n  searchKeyboardElement.setAttribute('displayed', 'false');\n}\n\nexport function initializeSearchInput(): void {\n  searchInputElement.addEventListener('paste', function () {\n    updateSearchInput();\n    updateSearchResult();\n  });\n  searchInputElement.addEventListener('cut', function () {\n    updateSearchInput();\n    updateSearchResult();\n  });\n  searchInputElement.addEventListener('selectionchange', function () {\n    updateSearchInput();\n    updateSearchResult();\n  });\n  document.addEventListener('selectionchange', function () {\n    updateSearchInput();\n    updateSearchResult();\n  });\n  searchInputElement.addEventListener('keyup', function () {\n    updateSearchInput();\n    updateSearchResult();\n  });\n  searchInputElement.addEventListener('scroll', function () {\n    updateSearchInput();\n  });\n}\n\nfunction getSearchTypeFilterValue(): SearchItem['type'] | -1 {\n  return parseInt(searchTypeFilterButtonElement.getAttribute('type'));\n}\n\nfunction updateSearchInput(): void {\n  const scrollLeft = searchInputElement.scrollLeft;\n  const currentValue = searchInputElement.value;\n  const selectionStart = searchInputElement.selectionStart;\n  const selectionEnd = searchInputElement.selectionEnd;\n\n  const empty = currentValue.length === 0;\n  const text = empty ? searchInputPlaceholder : currentValue;\n  const cursorStart = empty ? 0 : selectionStart;\n  const cursorEnd = empty ? 0 : selectionEnd;\n  const selection = cursorStart !== cursorEnd;\n\n  const m = getTextBoundingBox(text, fontWeight, fontSize, fontFamily);\n  const m1 = getTextBoundingBox(text.substring(0, cursorStart), fontWeight, fontSize, fontFamily);\n  const x = scrollLeft * -1;\n  const y = m[0] + (height - m[2]) / 2;\n\n  searchInputSVGTextElement.textContent = text;\n  searchInputSVGTextElement.setAttribute('transform', `translate(${x} ${y})`);\n  searchInputSVGCursorElement.setAttribute('transform', `translate(${empty ? 1 : Math.max(Math.min(m1[1] + x, width - 1), 1)} 0)`);\n\n  searchInputSVGTextElement.setAttribute('empty', booleanToString(empty));\n  searchInputSVGCursorElement.setAttribute('selection', booleanToString(selection));\n  searchInputElement.setAttribute('selection', booleanToString(selection));\n}\n\nfunction bringToEnd(): void {\n  const currentValue = searchInputElement.value;\n  const length = currentValue.length;\n  const m = getTextBoundingBox(currentValue, fontWeight, fontSize, fontFamily);\n  searchInputElement.setSelectionRange(length, length);\n  searchInputElement.scrollTo({ left: m[1] - width });\n}\n\nexport function resizeSearchInputSVG(): void {\n  size = querySize('head-two-button');\n  width = size.width;\n  height = size.height;\n  searchInputSVGElement.setAttribute('viewBox', `0 0 ${width} ${height}`);\n  bringToEnd();\n  updateSearchInput();\n}\n\nfunction generateElementOfSearchResultItem(): HTMLElement {\n  const searchResultItemElement = documentCreateDivElement();\n  searchResultItemElement.classList.add('css_search_search_result');\n\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_search_search_result_name');\n\n  const typeElement = documentCreateDivElement();\n  typeElement.classList.add('css_search_search_result_type');\n  typeElement.appendChild(getBlankIconElement());\n\n  searchResultItemElement.appendChild(typeElement);\n  searchResultItemElement.appendChild(nameElement);\n  return searchResultItemElement;\n}\n\nexport function updateSearchResult(): void {\n  const typeToIcon: Array<MaterialSymbols> = ['route', 'location_on', 'directions_bus'];\n\n  function updateItem(element: HTMLElement, currentItem: SearchResult, previousItem: SearchResult | null): void {\n    function updateTypeIcon(item: SearchResult, element: HTMLElement): void {\n      const thisSearchResultTypeElement = elementQuerySelector(element, '.css_search_search_result_type');\n      setIcon(thisSearchResultTypeElement, typeToIcon[item.item.type]);\n    }\n\n    function updateName(item: SearchResult, element: HTMLElement): void {\n      const nameElement = elementQuerySelector(element, '.css_search_search_result_name');\n      nameElement.innerText = item.item.n;\n    }\n\n    function updateClickHandler(item: SearchResult, element: HTMLElement): void {\n      switch (item.item.type) {\n        case 0:\n          element.onclick = function () {\n            openRoute(item.item.id as number, item.item.pid);\n          };\n          break;\n        case 1:\n          element.onclick = function () {\n            openLocation(item.item.hash);\n          };\n          break;\n        case 2:\n          element.onclick = function () {\n            openBus(item.item.id as number);\n          };\n          break;\n        default:\n          break;\n      }\n    }\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.item.type !== previousItem.item.type) {\n        updateTypeIcon(currentItem, element);\n      }\n      if (currentItem.item.id !== previousItem.item.id) {\n        updateName(currentItem, element);\n        updateClickHandler(currentItem, element);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateTypeIcon(currentItem, element);\n      updateName(currentItem, element);\n      updateClickHandler(currentItem, element);\n    }\n  }\n\n  const currentType = getSearchTypeFilterValue();\n  const currentValue = searchInputElement.value;\n  if (!containPhoneticSymbols(currentValue) && (currentValue !== previousValue || currentType !== previousType)) {\n    const searchResults = searchFor(currentValue, currentType, 30);\n    const searchResultLength = searchResults.length;\n    const searchResultElements = Array.from(elementQuerySelectorAll(searchResultsElement, '.css_search_search_result'));\n    const currentSearchResultElementsLength = searchResultElements.length;\n    if (searchResultLength !== currentSearchResultElementsLength) {\n      const difference = currentSearchResultElementsLength - searchResultLength;\n      if (difference < 0) {\n        const fragment = new DocumentFragment();\n        for (let o = 0; o > difference; o--) {\n          const newSearchResultElement = generateElementOfSearchResultItem();\n          fragment.appendChild(newSearchResultElement);\n          searchResultElements.push(newSearchResultElement);\n        }\n        searchResultsElement.appendChild(fragment);\n      } else if (difference > 0) {\n        for (let p = currentSearchResultElementsLength - 1, q = currentSearchResultElementsLength - difference - 1; p > q; p--) {\n          searchResultElements[p].remove();\n          searchResultElements.splice(p, 1);\n        }\n      }\n    }\n\n    for (let i = 0; i < searchResultLength; i++) {\n      const previousItem = previousSearchResults[i];\n      const currentItem = searchResults[i];\n      const thisItemElement = searchResultElements[i];\n      if (previousItem) {\n        updateItem(thisItemElement, currentItem, previousItem);\n      } else {\n        updateItem(thisItemElement, currentItem, null);\n      }\n    }\n    previousSearchResults = searchResults;\n  }\n\n  previousValue = currentValue;\n  previousType = currentType;\n}\n\nexport function switchSearchTypeFilter(): void {\n  const currentType = getSearchTypeFilterValue();\n  let newType: number = -1;\n  if (currentType >= -1 && currentType < 2) {\n    newType = currentType + 1;\n  } else {\n    newType = -1;\n  }\n  const icons: Array<MaterialSymbols> = ['filter_list', 'route', 'location_on', 'directions_bus'];\n  setIcon(searchTypeFilterButtonElement, icons[newType + 1]);\n  searchTypeFilterButtonElement.setAttribute('type', newType.toString());\n  updateSearchResult();\n}\n\nexport function showSearch(): void {\n  searchField.setAttribute('displayed', 'true');\n}\n\nexport function hideSearch(): void {\n  searchField.setAttribute('displayed', 'false');\n}\n\nexport function openSearch(): void {\n  if (dataDownloadCompleted) {\n    pushPageHistory('Search');\n    showSearch();\n\n    openKeyboard();\n    prepareForSearch();\n\n    hidePreviousPage();\n  } else {\n    promptMessage('download_for_offline', '資料還在下載中');\n  }\n}\n\nexport function closeSearch(): void {\n  closeKeyboard();\n  hideSearch();\n  showPreviousPage();\n  revokePageHistory('Search');\n}\n","import { exportData } from '../../data/export/index';\nimport { importData } from '../../data/import/index';\nimport { listSettings, Setting } from '../../data/settings/index';\nimport { getTreeURLOfCurrentVersion } from '../../data/settings/version';\nimport { askForPersistentStorage } from '../../data/storage/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { shareFile } from '../../tools/share';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst SettingsField = documentQuerySelector('.css_settings_field');\nconst SettingsBodyElement = elementQuerySelector(SettingsField, '.css_settings_body');\nconst SettingsElement = elementQuerySelector(SettingsBodyElement, '.css_settings');\n\nfunction generateElementOfItem(item: Setting): HTMLElement {\n  const settingElement = documentCreateDivElement();\n  settingElement.classList.add('css_setting');\n  settingElement.setAttribute('type', item.type);\n\n  // Icon\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_setting_icon');\n  iconElement.appendChild(getIconElement(item.icon));\n\n  // Name\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_setting_name');\n  nameElement.innerText = item.name;\n\n  // Status\n  const statusElement = documentCreateDivElement();\n  statusElement.classList.add('css_setting_status');\n  statusElement.innerText = item.status;\n\n  // Arrow\n  const arrowElement = documentCreateDivElement();\n  arrowElement.classList.add('css_setting_arrow');\n  const arrowSpanElement = document.createElement('span');\n  arrowSpanElement.appendChild(getIconElement('arrow_forward_ios'));\n  arrowElement.appendChild(arrowSpanElement);\n\n  // Event handler (lambda)\n  if (typeof item.action === 'function') {\n    settingElement.onclick = function () {\n      item.action();\n    };\n  } else if (typeof item.action === 'string') {\n    settingElement.setAttribute('onclick', item.action);\n  }\n\n  // Assemble\n  settingElement.appendChild(iconElement);\n  settingElement.appendChild(nameElement);\n  settingElement.appendChild(statusElement);\n  settingElement.appendChild(arrowElement);\n\n  return settingElement;\n}\n\nexport async function initializeSettingsField() {\n  const list = await listSettings();\n  SettingsElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of list) {\n    const thisElement = generateElementOfItem(item);\n    fragment.appendChild(thisElement);\n  }\n  SettingsElement.append(fragment);\n}\n\nexport function shwoSettings(): void {\n  SettingsField.setAttribute('displayed', 'true');\n}\n\nexport function hideSettings(): void {\n  SettingsField.setAttribute('displayed', 'false');\n}\n\nexport function openSettings(): void {\n  pushPageHistory('Settings');\n  shwoSettings();\n  initializeSettingsField();\n  hidePreviousPage();\n}\n\nexport function closeSettings(): void {\n  hideSettings();\n  showPreviousPage();\n  revokePageHistory('Settings');\n}\n\nexport async function downloadExportFile() {\n  promptMessage('manufacturing', '資料匯出中');\n  const content = await exportData();\n  shareFile(content, 'application/json', 'bus-export.json');\n}\n\nexport function openFileToImportData(): void {\n  const identifier = generateIdentifier();\n  const fileInput = document.createElement('input');\n  fileInput.setAttribute('type', 'file');\n  fileInput.setAttribute('accept', 'application/json');\n  fileInput.setAttribute('name', identifier);\n  fileInput.id = identifier;\n  fileInput.classList.add('css_import_file_input');\n  fileInput.addEventListener(\n    'change',\n    function (event) {\n      // Check if a file is selected\n      if (event.target.files.length === 0) {\n        documentQuerySelector(`body #${identifier}`).remove();\n      } else {\n        // Get the first file selected by the user\n        const file = event.target.files[0];\n        const reader = new FileReader();\n\n        // When the file is successfully read\n        reader.onload = function (e) {\n          // Get the file content as text\n          const fileTextContent = e.target.result;\n\n          // Import the data\n          importData(fileTextContent).then((f) => {\n            if (f) {\n              promptMessage('check_circle', '已匯入資料');\n            } else {\n              promptMessage('error', '無法匯入資料');\n            }\n            documentQuerySelector(`body #${identifier}`).remove();\n          });\n        };\n\n        // Read the file as text\n        reader.readAsText(file);\n      }\n    },\n    { once: true }\n  );\n  fileInput.addEventListener(\n    'cancel',\n    function () {\n      documentQuerySelector(`body #${identifier}`).remove();\n    },\n    { once: true }\n  );\n\n  document.body.append(fileInput);\n  documentQuerySelector(`body #${identifier}`).click();\n}\n\nexport function viewSourceCodeOfCurrentVersion(): void {\n  const url = getTreeURLOfCurrentVersion();\n  window.open(url);\n}\n\nexport function viewGitHubRepository(): void {\n  const url = 'https://github.com/EricHsia7/bus';\n  window.open(url);\n}\n\nexport function showPromptToAskForPersistentStorage(): void {\n  askForPersistentStorage().then((e) => {\n    switch (e) {\n      case 'granted':\n        promptMessage('check_circle', '已開啟永久儲存');\n        break;\n      case 'denied':\n        promptMessage('cancel', '永久儲存權限已被拒絕');\n        break;\n      case 'unsupported':\n        promptMessage('warning', '此瀏覽器不支援永久儲存');\n        break;\n      default:\n        promptMessage('error', '發生錯誤');\n        break;\n    }\n  });\n}\n","import { changeSettingOption, getSetting, SettingSelect, SettingSelectOption } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, documentQuerySelectorAll, elementQuerySelector } from '../../tools/elements';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { initializeSettingsField } from './index';\n\nconst SettingsOptionsField = documentQuerySelector('.css_settings_options_field');\nconst SettingsOptionsBodyElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_body');\nconst SettingsOptionsOptionsElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_settings_options');\nconst SettingsOptionsDescriptionElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_options_description');\nconst SettingsOptionsHeadElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_head');\nconst SettingsOptionsTitleElement = elementQuerySelector(SettingsOptionsHeadElement, '.css_settings_options_title');\nconst SettingsOptionsLeftButtonElement = elementQuerySelector(SettingsOptionsHeadElement, '.css_settings_options_button_left');\n\nfunction generateElementOfItem(setting: SettingSelect, item: SettingSelectOption, index: number): HTMLElement {\n  const optionElement = documentCreateDivElement();\n  optionElement.classList.add('css_option');\n\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_option_name');\n  nameElement.innerText = item.name;\n\n  const checkboxContainerElement = documentCreateDivElement();\n  checkboxContainerElement.classList.add('css_option_checkbox');\n\n  const checkboxElement = document.createElement('input');\n  checkboxElement.type = 'checkbox';\n  checkboxElement.checked = setting.option === index;\n  checkboxElement.onclick = (event) => {\n    settingsOptionsHandler(event, setting.key, index);\n  };\n\n  checkboxContainerElement.appendChild(checkboxElement);\n  optionElement.appendChild(nameElement);\n  optionElement.appendChild(checkboxContainerElement);\n\n  return optionElement;\n}\n\nfunction initializeSettingsOptionsField(settingKey: string): void {\n  const setting = getSetting(settingKey) as SettingSelect;\n  SettingsOptionsLeftButtonElement.onclick = function () {\n    closeSettingsOptions();\n    // callback\n    initializeSettingsField();\n  };\n  SettingsOptionsTitleElement.innerText = setting.name;\n  SettingsOptionsDescriptionElement.innerText = setting.description;\n  SettingsOptionsOptionsElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  let index: number = 0;\n  for (const item of setting.options) {\n    const thisElement = generateElementOfItem(setting, item, index);\n    fragment.appendChild(thisElement);\n    index += 1;\n  }\n  SettingsOptionsOptionsElement.append(fragment);\n}\n\nexport function showSettingsOptions(): void {\n  SettingsOptionsField.setAttribute('displayed', 'true');\n}\n\nexport function hideSettingsOptions(): void {\n  SettingsOptionsField.setAttribute('displayed', 'false');\n}\n\nexport function openSettingsOptions(settingKey: string): void {\n  pushPageHistory('SettingsOptions');\n  showSettingsOptions();\n  initializeSettingsOptionsField(settingKey);\n  hidePreviousPage();\n}\n\nexport function closeSettingsOptions(): void {\n  hideSettingsOptions();\n  showPreviousPage();\n  revokePageHistory('SettingsOptions');\n}\n\nexport function settingsOptionsHandler(event: Event, settingKey: string, index: number): void {\n  const checkboxes = documentQuerySelectorAll('.css_settings_options_field .css_settings_options_body .css_settings_options .css_option .css_option_checkbox input[type=\"checkbox\"]') as NodeListOf<HTMLInputElement>;\n  for (const checkbox of checkboxes) {\n    checkbox.checked = false;\n  }\n  const target = event.target as HTMLInputElement;\n  target.checked = true;\n  changeSettingOption(settingKey, index);\n}\n","import { getStoresSizeStatistics, StoreSize, StoreSizeStatistics } from '../../data/analytics/storage-size';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { hidePreviousPage, pushPageHistory, querySize, revokePageHistory, showPreviousPage } from '../index';\n\nlet previousCategories: Array<StoreSize> = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst StorageField = documentQuerySelector('.css_storage_field');\nconst StorageBodyElement = elementQuerySelector(StorageField, '.css_storage_body');\nconst StatisticsElement = elementQuerySelector(StorageBodyElement, '.css_storage_statistics');\n\nfunction generateElementOfItem(): HTMLElement {\n  // Create root element\n  const statisticsItemElement = documentCreateDivElement();\n  statisticsItemElement.classList.add('css_storage_statistics_item');\n\n  // Create name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_storage_statistics_item_name');\n\n  // Create value element\n  const valueElement = documentCreateDivElement();\n  valueElement.classList.add('css_storage_statistics_item_value');\n\n  // Append children\n  statisticsItemElement.appendChild(nameElement);\n  statisticsItemElement.appendChild(valueElement);\n\n  return statisticsItemElement;\n}\n\nfunction updateStorageField(statistics: StoreSizeStatistics, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(element: HTMLElement, currentItem: StoreSize, previousItem: StoreSize | null): void {\n    function updateValue(element: HTMLElement, item: StoreSize): void {\n      const typeElement = elementQuerySelector(element, '.css_storage_statistics_item_value');\n      typeElement.innerText = item.size;\n    }\n\n    function updateName(element: HTMLElement, item: StoreSize): void {\n      const nameElement = elementQuerySelector(element, '.css_storage_statistics_item_name');\n      nameElement.innerText = item.category.name;\n    }\n\n    function updateAnimation(element: HTMLElement, animation: boolean): void {\n      element.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(element: HTMLElement, skeletonScreen: boolean): void {\n      element.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.category.key !== previousItem.category.key) {\n        updateName(element, currentItem);\n        updateValue(element, currentItem);\n      }\n\n      if (currentItem.size !== previousItem.size) {\n        updateValue(element, currentItem);\n      }\n\n      if (previousAnimation !== animation) {\n        updateAnimation(element, animation);\n      }\n\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(element, skeletonScreen);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateValue(element, currentItem);\n      updateName(element, currentItem);\n      updateAnimation(element, animation);\n      updateSkeletonScreen(element, skeletonScreen);\n    }\n  }\n\n  const categories = [];\n  for (const key in statistics.categorizedSizes) {\n    const item = statistics.categorizedSizes[key];\n    categories.push(item);\n  }\n\n  const categoriesQuantity = categories.length;\n  const itemElements = Array.from(elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item'));\n  const currentItemElementsLength = itemElements.length;\n  if (categoriesQuantity !== currentItemElementsLength) {\n    const difference = currentItemElementsLength - categoriesQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement);\n        itemElements.push(newItemElement);\n      }\n      StatisticsElement.appendChild(fragment);\n    } else if (difference > 0) {\n      for (let p = currentItemElementsLength - 1, q = currentItemElementsLength - difference - 1; p > q; p--) {\n        itemElements[p].remove();\n        itemElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < categoriesQuantity; i++) {\n    const previousItem = previousCategories[i];\n    const currentItem = categories[i];\n    const thisItemElement = itemElements[i];\n    if (previousItem) {\n      updateItem(thisItemElement, currentItem, previousItem);\n    } else {\n      updateItem(thisItemElement, currentItem, null);\n    }\n  }\n\n  previousCategories = categories;\n  previousSkeletonScreen = skeletonScreen;\n  previousAnimation = animation;\n}\n\nfunction setupStorageFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const FieldSize = querySize('window');\n  // const FieldWidth = FieldSize.width;\n  const FieldHeight = FieldSize.height;\n  const defaultCategoriesQuantity = Math.min(7, Math.floor(FieldHeight / 55) + 2);\n  const statistics: StoreSizeStatistics = {\n    categorizedSizes: {},\n    totalSize: 0\n  };\n  for (let i = 0; i < defaultCategoriesQuantity; i++) {\n    const categoryKey = `store-${i}`;\n    statistics.categorizedSizes[categoryKey] = {\n      category: {\n        name: '',\n        key: categoryKey\n      },\n      size: `size-${i}`\n    };\n  }\n  updateStorageField(statistics, true, playing_animation);\n}\n\nasync function initializeStorageStatistics() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  setupStorageFieldSkeletonScreen();\n  const statistics = await getStoresSizeStatistics();\n  updateStorageField(statistics, false, playing_animation);\n}\n\nexport function showStorage(): void {\n  StorageField.setAttribute('displayed', 'true');\n}\n\nexport function hideStorage(): void {\n  StorageField.setAttribute('displayed', 'false');\n}\n\nexport function openStorage(): void {\n  pushPageHistory('Storage');\n  showStorage();\n  initializeStorageStatistics();\n  hidePreviousPage();\n}\n\nexport function closeStorage(): void {\n  hideStorage();\n  showPreviousPage();\n  revokePageHistory('Storage');\n}\n"],"names":["previousSearchResults","searchField","documentQuerySelector","searchHeadElement","elementQuerySelector","searchBodyElement","searchInputElement","searchInputSVGElement","searchInputSVGTextElement","searchInputSVGCursorElement","searchTypeFilterButtonElement","searchResultsElement","searchKeyboardElement","fontWeight","fontSize","fontFamily","keyboardRows","size","querySize","width","height","keyboardInitialized","previousValue","previousType","deleteCharFromInput","currentValue","value","newValue","substring","length","updateSearchResult","bringToEnd","updateSearchInput","scrollDocumentToTop","emptyInput","openSystemKeyboard","event","preventDefault","focus","openKeyboard","fragment","DocumentFragment","row","item","newButtonElement","document","createElement","classList","add","eventName","supportTouch","addEventListener","appendChild","getIconElement","innerText","currentItem","append","initializeKeyboard","setAttribute","initializeSearchInput","getSearchTypeFilterValue","parseInt","getAttribute","scrollLeft","selectionStart","selectionEnd","empty","text","cursorStart","selection","m","getTextBoundingBox","m1","x","y","textContent","Math","max","min","booleanToString","setSelectionRange","scrollTo","left","resizeSearchInputSVG","generateElementOfSearchResultItem","searchResultItemElement","documentCreateDivElement","nameElement","typeElement","getBlankIconElement","typeToIcon","updateItem","element","previousItem","updateTypeIcon","thisSearchResultTypeElement","setIcon","type","updateName","n","updateClickHandler","onclick","openRoute","id","pid","openLocation","hash","openBus","currentType","containPhoneticSymbols","searchResults","searchFor","searchResultLength","searchResultElements","Array","from","elementQuerySelectorAll","currentSearchResultElementsLength","difference","o","newSearchResultElement","push","p","q","remove","splice","i","thisItemElement","switchSearchTypeFilter","newType","toString","showSearch","hideSearch","openSearch","dataDownloadCompleted","pushPageHistory","prepareForSearch","hidePreviousPage","promptMessage","closeSearch","showPreviousPage","revokePageHistory","SettingsField","SettingsBodyElement","SettingsElement","generateElementOfItem","settingElement","iconElement","icon","name","statusElement","status","arrowElement","arrowSpanElement","action","initializeSettingsField","_initializeSettingsField","apply","arguments","_asyncToGenerator","list","listSettings","innerHTML","thisElement","shwoSettings","hideSettings","openSettings","closeSettings","downloadExportFile","_downloadExportFile","content","exportData","shareFile","openFileToImportData","identifier","generateIdentifier","fileInput","target","files","file","reader","FileReader","onload","e","fileTextContent","result","importData","then","f","readAsText","once","body","click","viewSourceCodeOfCurrentVersion","url","getTreeURLOfCurrentVersion","window","open","viewGitHubRepository","showPromptToAskForPersistentStorage","askForPersistentStorage","SettingsOptionsField","SettingsOptionsBodyElement","SettingsOptionsOptionsElement","SettingsOptionsDescriptionElement","SettingsOptionsHeadElement","SettingsOptionsTitleElement","SettingsOptionsLeftButtonElement","setting","index","optionElement","checkboxContainerElement","checkboxElement","checked","option","settingKey","checkboxes","documentQuerySelectorAll","checkbox","changeSettingOption","settingsOptionsHandler","key","showSettingsOptions","hideSettingsOptions","openSettingsOptions","getSetting","closeSettingsOptions","description","options","initializeSettingsOptionsField","previousCategories","previousAnimation","previousSkeletonScreen","StorageField","StorageBodyElement","StatisticsElement","statisticsItemElement","valueElement","updateStorageField","statistics","skeletonScreen","animation","updateValue","category","updateAnimation","updateSkeletonScreen","categories","categorizedSizes","categoriesQuantity","itemElements","currentItemElementsLength","newItemElement","_initializeStorageStatistics","playing_animation","getSettingOptionValue","FieldHeight","defaultCategoriesQuantity","floor","totalSize","categoryKey","setupStorageFieldSkeletonScreen","getStoresSizeStatistics","showStorage","hideStorage","openStorage","initializeStorageStatistics","closeStorage"],"sourceRoot":""}