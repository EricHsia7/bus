{"version":3,"file":"3420e03d29c3ac520131.js","mappings":"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","sources":["webpack://bus/./src/interface/route-calendar/index.ts","webpack://bus/./src/interface/route/details/actions.ts","webpack://bus/./src/interface/route/details/calendar.ts","webpack://bus/./src/interface/route/details/properties.ts","webpack://bus/./src/interface/route/details/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/schedule-notification/index.ts"],"sourcesContent":["import { SimplifiedRouteItem } from '../../data/apis/getRoute/index';\nimport { integratedRouteCalendar, integrateRouteCalendar } from '../../data/route/calendar';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { generateRoundedRectPath } from '../../tools/graphic';\nimport { generateIdentifier } from '../../tools/index';\nimport { dateToString, offsetDate } from '../../tools/time';\nimport { hidePreviousPage, pushPageHistory, querySize, revokePageHistory, showPreviousPage } from '../index';\n\nconst routeCalendarField = documentQuerySelector('.css_route_calendar_field');\nconst headElement = elementQuerySelector(routeCalendarField, '.css_route_calendar_head');\nconst titleElement = elementQuerySelector(headElement, '.css_route_calendar_title');\nconst timelinesElement = elementQuerySelector(routeCalendarField, '.css_route_calendar_timelines');\nconst timelineElements = Array.from(elementQuerySelectorAll(timelinesElement, '.css_route_calendar_timeline'));\n\nlet currentDate = new Date();\nlet currentIntegration = {} as integratedRouteCalendar;\nconst currentTimelineSVGs = ['', '', ''];\n\nlet routeCalendarSliding_fieldWidth: number = 0;\nlet routeCalendarSliding_initialized: boolean = false;\n\nfunction generateRouteCalendarSVG(integration: integratedRouteCalendar, date: Date, width: number): string {\n  const verticalPadding = 10;\n  const fontFamily = \"'Noto Sans TC', sans-serif\";\n\n  const gridLabelWidth = 35;\n  const gridHeight = 70;\n  const gridLineLabelFontWeight = 400;\n  const gridLineLabelFontSize = 10;\n\n  const borderRadius = 5;\n  const decorationWidth = 3;\n  const eventBoxPadding = 3;\n  const eventBoxFontWeight = 500;\n  const eventBoxFontSize = 15;\n\n  const gridLinePathCommands = [];\n  const gridLineLabels = [];\n  for (let i = 0; i < 24; i++) {\n    const text = `${i.toString().padStart(2, '0')}:00`;\n    const textWidth = 30;\n    const textHeight = 12;\n    // TODO: measure text width and height\n    const y = i * gridHeight + verticalPadding;\n    gridLinePathCommands.push(`M${gridLabelWidth} ${y}`, `h${width - gridLabelWidth}`);\n    gridLineLabels.push(`<text x=\"${gridLabelWidth - textWidth}\" y=\"${y + 3}\" font-weight=\"${gridLineLabelFontWeight}\" font-size=\"${gridLineLabelFontSize}\" font-family=\"${fontFamily}\" component=\"gridline-label\">${text}</text>`);\n  }\n\n  const gridLine = `<path d=\"${gridLinePathCommands.join(' ')}\" fill=\"none\" stroke-width=\"0.35\" component=\"gridline\"/>`;\n  const height = gridHeight * 24 + verticalPadding * 2;\n\n  const day = date.getDay();\n  const index = day < 1 ? 6 : day - 1;\n  const events = integration.repeated[index];\n  const scheduledEvents = integration.scheduled;\n  const date2 = offsetDate(date, 0, 0, integration.timeZoneOffset - date.getTimezoneOffset());\n  const eventDate = [date2.getFullYear(), date2.getMonth() + 1, date2.getDate()];\n  for (let i = scheduledEvents.length - 1; i >= 0; i--) {\n    if (eventDate[0] === scheduledEvents[i].date[0] && eventDate[1] === scheduledEvents[i].date[1] && eventDate[2] === scheduledEvents[i].date[2]) {\n      events.push({\n        type: 'repeated',\n        time: scheduledEvents[i].time,\n        interval: scheduledEvents[i].interval,\n        count: scheduledEvents[i].count,\n        day: day\n      });\n    }\n  }\n\n  const eventBoxPathCommands = [];\n  const eventBoxDecorationPathCommands = [];\n  const eventBoxTexts = [];\n  const minutesPerDay = 24 * 60;\n  for (let i = events.length - 1; i >= 0; i--) {\n    const x = gridLabelWidth;\n    const y = (events[i].time[0] / minutesPerDay) * height;\n    const boxWidth = width - gridLabelWidth;\n    const boxHeight = ((events[i].time[1] - events[i].time[0]) / minutesPerDay) * height;\n    const startMinutes = events[i].time[0] % 60;\n    const startHours = (events[i].time[0] - startMinutes) / 60;\n    const endMinutes = events[i].time[1] % 60;\n    const endHours = (events[i].time[1] - endMinutes) / 60;\n    const title = `${startHours.toString().padStart(2, '0')}:${startMinutes.toString().padStart(2, '0')} - ${endHours.toString().padStart(2, '0')}:${endMinutes.toString().padStart(2, '0')}`;\n    const titleWidth = 30;\n    const titleHeight = 17;\n    const description = `每${events[i].interval[0] === events[i].interval[1] ? events[i].interval[0] : events[i].interval.join(' - ')}分鐘一班 | ${events[i].count[0] === events[i].count[1] ? events[i].count[0] : events[i].count.join(' - ')}班`;\n    const descriptionWidth = 30;\n    const descriptionHeight = 17;\n    Array.prototype.push.apply(eventBoxPathCommands, generateRoundedRectPath(x, y, boxWidth, boxHeight, borderRadius, false));\n    eventBoxDecorationPathCommands.push(`M${x + eventBoxPadding} ${y + eventBoxPadding}`, `v${boxHeight - eventBoxPadding * 2}`);\n    eventBoxTexts.push(`<text x=\"${x + eventBoxPadding + decorationWidth + eventBoxPadding}\" y=\"${y + eventBoxPadding + titleHeight}\" font-weight=\"${eventBoxFontWeight}\" font-size=\"${eventBoxFontSize}\" font-family=\"${fontFamily}\" component=\"event-title\">${title}</text>`, `<text x=\"${x + eventBoxPadding + decorationWidth + eventBoxPadding}\" y=\"${y + eventBoxPadding + titleHeight + descriptionHeight}\" font-weight=\"${eventBoxFontWeight}\" font-size=\"${eventBoxFontSize}\" font-family=\"${fontFamily}\" component=\"event-description\">${description}</text>`);\n  }\n\n  const eventBoxes = `<path d=\"${eventBoxPathCommands.join(' ')}\" stroke=\"none\" component=\"event-box\"/>`;\n  const eventBoxDecorations = `<path d=\"${eventBoxDecorationPathCommands.join(' ')}\" fill=\"none\" stroke-width=\"${decorationWidth}\" stroke-linecap=\"round\" stroke-linejoin=\"round\" component=\"event-decoration\"/>`;\n  const svg = `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" xmlns=\"http://www.w3.org/2000/svg\">${gridLine}${gridLineLabels.join('')}${eventBoxes}${eventBoxDecorations}${eventBoxTexts.join('')}</svg>`;\n  return svg;\n}\n\nfunction initializeRouteCalendarSliding(): void {\n  if (routeCalendarSliding_initialized) return;\n  routeCalendarSliding_initialized = true;\n\n  timelinesElement.addEventListener('scrollend', function () {\n    const scrollLeft = timelinesElement.scrollLeft;\n    const idx = Math.round(scrollLeft / routeCalendarSliding_fieldWidth);\n    if (idx === 0) {\n      currentDate = offsetDate(currentDate, -1, 0, 0);\n      const yesterday = offsetDate(currentDate, -1, 0, 0);\n      timelineElements[0].before(timelineElements[2]);\n      timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n      [timelineElements[0], timelineElements[1], timelineElements[2]] = [timelineElements[2], timelineElements[0], timelineElements[1]];\n      [currentTimelineSVGs[0], currentTimelineSVGs[1], currentTimelineSVGs[2]] = [generateRouteCalendarSVG(currentIntegration, yesterday, routeCalendarSliding_fieldWidth), currentTimelineSVGs[0], currentTimelineSVGs[1]];\n      timelineElements[0].innerHTML = currentTimelineSVGs[0];\n      titleElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n    } else if (idx === 2) {\n      currentDate = offsetDate(currentDate, 1, 0, 0);\n      const tomorrow = offsetDate(currentDate, 1, 0, 0);\n      timelineElements[2].after(timelineElements[0]);\n      timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n      [timelineElements[0], timelineElements[1], timelineElements[2]] = [timelineElements[1], timelineElements[2], timelineElements[0]];\n      [currentTimelineSVGs[0], currentTimelineSVGs[1], currentTimelineSVGs[2]] = [currentTimelineSVGs[1], currentTimelineSVGs[2], generateRouteCalendarSVG(currentIntegration, tomorrow, routeCalendarSliding_fieldWidth)];\n      timelineElements[2].innerHTML = currentTimelineSVGs[2];\n      titleElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n    }\n  });\n\n  timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n}\n\nasync function initializeRouteCalendar(PathAttributeId: SimplifiedRouteItem['pid']) {\n  const FieldSize = querySize('window');\n  routeCalendarSliding_fieldWidth = FieldSize.width;\n  currentDate = new Date();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteCalendar(PathAttributeId, requestID);\n  currentIntegration = integration;\n  for (let i = 0; i < 3; i++) {\n    const date = offsetDate(currentDate, i - 1, 0, 0);\n    currentTimelineSVGs[i] = generateRouteCalendarSVG(integration, date, routeCalendarSliding_fieldWidth);\n    timelineElements[i].innerHTML = currentTimelineSVGs[i];\n  }\n  titleElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n  initializeRouteCalendarSliding();\n}\n\nexport function showRouteCalendar(): void {\n  routeCalendarField.setAttribute('displayed', 'true');\n}\n\nexport function hideRouteCalendar(): void {\n  routeCalendarField.setAttribute('displayed', 'false');\n}\n\nexport function openRouteCalendar(PathAttributeId: SimplifiedRouteItem['pid']): void {\n  pushPageHistory('RouteCalendar');\n  showRouteCalendar();\n  initializeRouteCalendar(PathAttributeId);\n  hidePreviousPage();\n}\n\nexport function closeRouteCalendar(): void {\n  hideRouteCalendar();\n  showPreviousPage();\n  revokePageHistory('RouteCalendar');\n}\n","import { searchRouteByRouteID } from '../../../data/search/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { shareLink } from '../../../tools/share';\nimport { openQRCode } from '../../qrcode/index';\n\nexport async function shareRoutePermalink(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    shareLink(thisRoute.n, link);\n  }\n}\n\nexport async function showRoutePermalinkQRCode(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    openQRCode(link);\n  }\n}\n","import { Calendar, CalendarDay, CalendarEvent, CalendarEventGroup } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentCreateDivElement, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { drawRoundedRect } from '../../../tools/graphic';\nimport { booleanToString } from '../../../tools/index';\nimport { getCSSVariableValue } from '../../../tools/style';\nimport { querySize } from '../../index';\nimport { CalendarDaysElement, CalendarEventGroupsElement } from './index';\n\nconst calendarRatio = 70;\nconst scaleLimit = 3150 / (calendarRatio * 24);\nconst gridlineBoxHeight = 10;\nconst gridlineWidth = 1.2;\nconst gridlineLabelWidthLimit = 45;\nconst fontFamily: string = '\"Noto Sans TC\", sans-serif';\n\nlet canvasSize = querySize('route-details-canvas');\nlet canvasWidth = canvasSize.width;\nlet canvasHeight = canvasSize.height;\nlet canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\nlet previousCalendar = {} as Calendar;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction resizeRouteDetailsCalendarCanvas(canvas: HTMLCanvasElement): void {\n  canvasSize = querySize('route-details-canvas');\n  canvasWidth = canvasSize.width;\n  canvasHeight = canvasSize.height;\n  canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\n  // Set the new size\n  canvas.width = canvasWidth * canvasScale;\n  canvas.height = canvasHeight * canvasScale;\n\n  // Reset transformations before scaling\n  const context = canvas.getContext('2d');\n  context.setTransform(1, 0, 0, 1, 0, 0);\n  context.scale(canvasScale, canvasScale);\n}\n\nfunction generateElementOfDay(): HTMLElement {\n  const element = documentCreateDivElement();\n  element.classList.add('css_route_details_calendar_day');\n\n  return element;\n}\n\nfunction generateElementOfEventGroup(): HTMLElement {\n  // Main event group element\n  const eventGroupElement = documentCreateDivElement();\n  eventGroupElement.classList.add('css_route_details_calendar_event_group');\n\n  // Canvas element\n  const canvasElement = document.createElement('canvas');\n  canvasElement.classList.add('css_route_details_calendar_event_group_canvas');\n  eventGroupElement.appendChild(canvasElement);\n\n  return eventGroupElement;\n}\n\nexport function setupCalendarGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultEventQuantity = {\n    d_0: 47,\n    d_1: 47,\n    d_2: 47,\n    d_3: 47,\n    d_4: 47,\n    d_5: 47,\n    d_6: 47\n  };\n  const defaultDayQuantity = 7;\n  let calendarEventGroups = {};\n  let calendarDays = {};\n  for (let i = 0; i < defaultDayQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    calendarEventGroups[eventGroupKey] = [];\n    calendarDays[eventGroupKey] = {\n      day: i,\n      code: `d_{i}`,\n      name: ''\n    };\n    for (let j = 0; j < defaultEventQuantity[eventGroupKey]; j++) {\n      const date = new Date();\n      date.setHours(0);\n      date.setMinutes(j * 30);\n      date.setSeconds(0);\n      date.setMilliseconds(0);\n      calendarEventGroups[eventGroupKey].push({\n        date: date,\n        dateString: '',\n        duration: 15\n      });\n    }\n  }\n  updateCalendarGroup(\n    {\n      calendarEventGroups: calendarEventGroups,\n      calendarDays: calendarDays,\n      calendarDayQuantity: defaultDayQuantity,\n      calendarEventQuantity: defaultEventQuantity\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateDay(thisDayElement: HTMLElement, thisDay: CalendarDay, currentDay: number, skeletonScreen: boolean, animation: boolean, index: number): void {\n  thisDayElement.innerText = thisDay.name;\n  thisDayElement.setAttribute('day', index.toString());\n  thisDayElement.onclick = function () {\n    switchCalendarDay(index);\n  };\n  thisDayElement.setAttribute('highlighted', currentDay === index ? 'true' : 'false');\n  thisDayElement.setAttribute('animation', booleanToString(animation));\n  thisDayElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n}\n\nfunction updateEventGroup(thisCalendarEventGroupElement: HTMLElement, thisCalendarEventGroup: CalendarEventGroup, currentDay: number, mainColor: string, mainColor11Flatten: string, gridColor: string, index: number): void {\n  function drawGridline(thisContext: CanvasRenderingContext2D, hours: number, gridColor: string): void {\n    const boxX = 0;\n    const boxY = hours * calendarRatio;\n\n    // Cache the color value once\n    thisContext.fillStyle = gridColor;\n\n    // Draw line\n    thisContext.fillRect(boxX + gridlineLabelWidthLimit, boxY + 5, canvasWidth - gridlineLabelWidthLimit, gridlineWidth);\n\n    // Draw label\n    thisContext.font = `400 ${12}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    const labelText = `${String(hours).padStart(2, '0')}:00`;\n    const labelMeasurement = thisContext.measureText(labelText);\n    const labelWidth = labelMeasurement.width;\n    const labelHeight = labelMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(labelText, (gridlineLabelWidthLimit - labelWidth) / 2, boxY + (gridlineBoxHeight - labelHeight) / 2, labelWidth);\n  }\n\n  function drawEvent(thisContext: CanvasRenderingContext2D, thisCalendarEvent: CalendarEvent, mainColor: string, mainColor11Flatten: string): void {\n    // Calculate the start of the day for this event only once.\n    const thisDayStart = new Date();\n    thisDayStart.setDate(1);\n    thisDayStart.setMonth(0);\n    thisDayStart.setFullYear(thisCalendarEvent.date.getFullYear());\n    thisDayStart.setMonth(thisCalendarEvent.date.getMonth());\n    thisDayStart.setDate(thisCalendarEvent.date.getDate());\n    thisDayStart.setHours(0);\n    thisDayStart.setMinutes(0);\n    thisDayStart.setSeconds(0);\n    thisDayStart.setMilliseconds(0);\n\n    const boxX = gridlineLabelWidthLimit;\n    const boxY = ((thisCalendarEvent.date.getTime() - thisDayStart.getTime()) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n    const boxWidth = canvasWidth - gridlineLabelWidthLimit;\n    const boxHeight = ((thisCalendarEvent.duration * 60 * 1000) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n\n    // Draw background with rounded rectangle\n    drawRoundedRect(thisContext, boxX, boxY, boxWidth, boxHeight, 3, mainColor11Flatten);\n\n    // Draw decoration (a thin rounded rectangle)\n    drawRoundedRect(thisContext, boxX, boxY, 3, boxHeight, { tl: 3, tr: 0, bl: 3, br: 0 }, mainColor);\n\n    // Draw event text\n    thisContext.font = `400 ${14}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    thisContext.fillStyle = mainColor;\n    const text = thisCalendarEvent.dateString;\n    const textMeasurement = thisContext.measureText(text);\n    const textWidth = textMeasurement.width;\n    const textHeight = textMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(text, boxX + 8, boxY + (boxHeight - textHeight) / 2, textWidth);\n  }\n\n  function updateDisplayed(thisCalendarEventGroupElement: HTMLElement, currentDay: number, index: number): void {\n    // Set the displayed attribute based on whether it is the current day.\n    const isDisplayed = currentDay === index;\n    thisCalendarEventGroupElement.setAttribute('displayed', booleanToString(isDisplayed));\n  }\n\n  // Get the canvas and its 2D context.\n  const thisCalendarEventGroupCanvas = elementQuerySelector(thisCalendarEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n  const thisCalendarEventGroupCanvasContext = thisCalendarEventGroupCanvas.getContext('2d');\n\n  // Update the displayed attribute\n  updateDisplayed(thisCalendarEventGroupElement, currentDay, index);\n\n  // Always resize the canvas to ensure proper dimensions.\n  resizeRouteDetailsCalendarCanvas(thisCalendarEventGroupCanvas);\n\n  const isDisplayed = currentDay === index;\n  if (isDisplayed) {\n    // Clear the canvas and redraw the content when displayed.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    // Draw the gridlines.\n    for (let hours = 0; hours < 24; hours++) {\n      drawGridline(thisCalendarEventGroupCanvasContext, hours, gridColor);\n    }\n\n    // Draw all events for this group.\n    for (const thisCalendarEvent of thisCalendarEventGroup) {\n      drawEvent(thisCalendarEventGroupCanvasContext, thisCalendarEvent, mainColor, mainColor11Flatten);\n    }\n  } else {\n    // When not displayed, clear the canvas.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n  }\n}\n\nexport function updateCalendarGroup(calendar: Calendar, skeletonScreen: boolean, animation: boolean): void {\n  // The default day to display.\n  const currentDay = new Date().getDay();\n\n  // Retrieve the CSS variable values just once\n  const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n  const mainColor11Flattened = getCSSVariableValue('--b-cssvar-main-color-11-flattened');\n  const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n  const eventGroups = calendar.calendarDays;\n  const eventGroupQuantity = calendar.calendarDayQuantity;\n  const calendarEventGroups = calendar.calendarEventGroups;\n  const eventQuantity = calendar.calendarEventQuantity;\n\n  const eventGroupElements = Array.from(elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group'));\n  const dayElements = Array.from(elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day'));\n\n  const currentEventGroupElementsLength = eventGroupElements.length;\n  if (eventGroupQuantity !== currentEventGroupElementsLength) {\n    const difference = currentEventGroupElementsLength - eventGroupQuantity;\n    if (difference < 0) {\n      // Add missing elements\n      const calendarDaysFragment = new DocumentFragment();\n      const calendarEventGroupsFragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newDayElement = generateElementOfDay();\n        calendarDaysFragment.appendChild(newDayElement);\n        dayElements.push(newDayElement);\n        const newEventGroupElement = generateElementOfEventGroup();\n        calendarEventGroupsFragment.appendChild(newEventGroupElement);\n        eventGroupElements.push(newEventGroupElement);\n      }\n      CalendarDaysElement.append(calendarDaysFragment);\n      CalendarEventGroupsElement.append(calendarEventGroupsFragment);\n    } else if (difference > 0) {\n      // Remove extra elements\n      for (let p = currentEventGroupElementsLength - 1, q = currentEventGroupElementsLength - difference - 1; p > q; p--) {\n        dayElements[p].remove();\n        dayElements.splice(p, 1);\n        eventGroupElements[p].remove();\n        eventGroupElements.splice(p, 1);\n      }\n    }\n    // Do nothing if difference is zero\n  }\n\n  // Update each day and its corresponding event group.\n  for (let i = 0; i < eventGroupQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    const thisDay = eventGroups[eventGroupKey];\n    const thisEventGroup = calendarEventGroups[eventGroupKey];\n\n    const thisDayElement = dayElements[i];\n    const thisEventGroupElement = eventGroupElements[i];\n\n    updateDay(thisDayElement, thisDay, currentDay, skeletonScreen, animation, i);\n    updateEventGroup(thisEventGroupElement, thisEventGroup, currentDay, mainColor, mainColor11Flattened, gridColor, i);\n  }\n\n  previousCalendar = calendar;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nexport function switchCalendarDay(day: number): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const calendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (let i = 0; i < 7; i++) {\n    const thisCalendarDayElement = calendarDayElements[i];\n    // const thisCalendarDayElementDay = parseInt(thisCalendarDayElement.getAttribute('day'));\n    const thisEventGroupElement = CalendarEventGroupElements[i];\n    // if (thisCalendarDayElementDay === day) {\n    /*\n      thisCalendarDayElement.setAttribute('highlighted', 'true');\n      thisEventGroupElement.setAttribute('displayed', 'true');\n      */\n    const eventGroupKey = `d_${i}`;\n    const calendarEventGroup = previousCalendar?.calendarEventGroups[eventGroupKey];\n    const calendarDay = previousCalendar?.calendarDays[eventGroupKey];\n    if (calendarEventGroup && calendarDay) {\n      // Retrieve the CSS variable values just once\n      const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n      const mainColor11Flatten = getCSSVariableValue('--b-cssvar-main-color-11-flattened');\n      const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n      // Reuse the drawing logic from updateEventGroup and updateDay for the visible event group.\n      updateDay(thisCalendarDayElement, calendarDay, day, false, playing_animation, i);\n      updateEventGroup(thisEventGroupElement, calendarEventGroup, day, mainColor, mainColor11Flatten, gridColor, i);\n    }\n    /*} else {\n      thisCalendarDayElement.setAttribute('highlighted', 'false');\n      thisEventGroupElement.setAttribute('displayed', 'false');\n\n      // Clear the canvas for non-displayed elements.\n      const canvas = elementQuerySelector(thisEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    }*/\n  }\n}\n","import { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentCreateDivElement, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings } from '../../../tools/index';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { PropertiesGroupBodyElement, PropertiesGroupElement } from './index';\n\nlet previousProperties = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction generateElementOfProperty(): HTMLElement {\n  const propertyElement = documentCreateDivElement();\n  propertyElement.classList.add('css_route_details_property');\n\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_route_details_property_icon');\n  iconElement.appendChild(getBlankIconElement());\n  propertyElement.appendChild(iconElement);\n\n  const valueElement = documentCreateDivElement();\n  valueElement.classList.add('css_route_details_property_value');\n  propertyElement.appendChild(valueElement);\n\n  return propertyElement;\n}\n\nexport function setuppropertiesGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultPropertyQuantity = 5;\n  const properties = [];\n  for (let i = 0; i < defaultPropertyQuantity; i++) {\n    properties.push({\n      key: i,\n      icon: 'none',\n      value: ''\n    });\n  }\n  updatePropertiesField(properties, true, playing_animation);\n}\n\nexport function updatePropertiesField(properties: Array, skeletonScreen: boolean, animation: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisProperty: object, previousProperty: object): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: object): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_route_details_property_icon');\n      setIcon(thisIconElement, thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: object): void {\n      elementQuerySelector(thisElement, '.css_route_details_property_value').innerText = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousProperty === null || previousProperty === undefined) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const propertyQuantity = properties.length;\n\n  if (skeletonScreen !== previousSkeletonScreen) {\n    PropertiesGroupElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  }\n\n  const propertyElements = Array.from(elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property'));\n  const currentPropertyElementsLength = propertyElements.length;\n  if (propertyQuantity !== currentPropertyElementsLength) {\n    const difference = currentPropertyElementsLength - propertyQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newPropertyElement = generateElementOfProperty();\n        fragment.appendChild(newPropertyElement);\n        propertyElements.push(newPropertyElement);\n      }\n      PropertiesGroupBodyElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentPropertyElementsLength - 1, q = currentPropertyElementsLength - difference - 1; p > q; p--) {\n        propertyElements[p].remove();\n        propertyElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < propertyQuantity; i++) {\n    const thisPropertyElement = propertyElements[i];\n    const thisProperty = properties[i];\n    if (previousProperties.length === 0) {\n      updateProperty(thisPropertyElement, thisProperty, null);\n    } else {\n      updateProperty(thisPropertyElement, thisProperty, previousProperties[i]);\n    }\n  }\n\n  previousProperties = properties;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n","import { isFolderContentSaved } from '../../../data/folder/index';\nimport { integrateRouteDetails } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../../tools/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../../index';\nimport { openSaveToFolder } from '../../save-to-folder/index';\nimport { shareRoutePermalink, showRoutePermalinkQRCode } from './actions';\nimport { setupCalendarGroupSkeletonScreen, updateCalendarGroup } from './calendar';\nimport { setuppropertiesGroupSkeletonScreen, updatePropertiesField } from './properties';\n\nexport const RouteDetailsField = documentQuerySelector('.css_route_details_field');\nexport const RouteDetailsBodyElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body');\nexport const RouteDetailsGroupsElement = elementQuerySelector(RouteDetailsBodyElement, '.css_route_details_groups');\n\nexport const CalendarGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"calendar\"]');\nexport const CalendarGroupBodyElement = elementQuerySelector(CalendarGroupElement, '.css_route_details_group_body');\nexport const CalendarDaysElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_days');\nexport const CalendarEventGroupsElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_event_groups');\n\nexport const ActionsGroupElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"]');\nexport const svaeToFolderActionButtonElement = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\nexport const getPermalinkActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"get-permalink\"]');\nexport const showPermalinkQRCodeActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"show-permalink-qrcode\"]');\n\nexport const PropertiesGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"properties\"]');\nexport const PropertiesGroupBodyElement = elementQuerySelector(PropertiesGroupElement, '.css_route_details_group_body');\n\nasync function initializeRouteDetailsField(RouteID: number, PathAttributeId: Array<number>) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const existence = await isFolderContentSaved('route', RouteID);\n  svaeToFolderActionButtonElement.setAttribute('animation', booleanToString(playing_animation));\n  svaeToFolderActionButtonElement.setAttribute('highlighted', booleanToString(existence));\n  svaeToFolderActionButtonElement.onclick = function () {\n    openSaveToFolder('route', [RouteID], svaeToFolderActionButtonElement);\n  };\n  getPermalinkActionButton.setAttribute('animation', booleanToString(playing_animation));\n  getPermalinkActionButton.onclick = function () {\n    shareRoutePermalink(RouteID);\n  };\n  showPermalinkQRCodeActionButton.setAttribute('animation', booleanToString(playing_animation));\n  showPermalinkQRCodeActionButton.onclick = function () {\n    showRoutePermalinkQRCode(RouteID);\n  };\n  setuppropertiesGroupSkeletonScreen(PropertiesGroupElement);\n  setupCalendarGroupSkeletonScreen();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteDetails(RouteID, PathAttributeId, requestID);\n  updatePropertiesField(integration.properties, false, playing_animation);\n  updateCalendarGroup(integration.calendar, false, playing_animation);\n}\n\nexport function showRouteDetails(): void {\n  RouteDetailsField.setAttribute('displayed', 'true');\n}\n\nexport function hideRouteDetails(): void {\n  RouteDetailsField.setAttribute('displayed', 'false');\n}\n\nexport function openRouteDetails(RouteID: number, PathAttributeId: Array<number>): void {\n  pushPageHistory('RouteDetails');\n  showRouteDetails();\n  initializeRouteDetailsField(RouteID, PathAttributeId);\n  hidePreviousPage();\n}\n\nexport function closeRouteDetails(): void {\n  hideRouteDetails();\n  showPreviousPage();\n  revokePageHistory('RouteDetails');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (const CalendarEventGroupElement of CalendarEventGroupElements) {\n    CalendarEventGroupElement.remove();\n  }\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  for (const CalendarDayElement of CalendarDayElements) {\n    CalendarDayElement.remove();\n  }\n}\n","import { Folder, FolderContent, isFolderContentSaved, listFolders, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { openFolderCreator } from '../folder-creator/index';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst SaveToFolderField = documentQuerySelector('.css_save_to_folder_field');\nconst bodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst listElement = elementQuerySelector(bodyElement, '.css_save_to_folder_list');\nconst headElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_head');\nconst rightButtonElement = elementQuerySelector(headElement, '.css_save_to_folder_button_right');\n\nconst successfulSaveMessage = '已儲存至資料夾';\nconst failedSaveMessage = '無法儲存';\n\nfunction generateElementOfItem(item: Folder, type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined): HTMLElement {\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.innerText = item.name;\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  // Event handler\n  switch (type) {\n    case 'stop': {\n      itemElement.onclick = function () {\n        saveStop(item.id, parameters[0], parameters[1]).then((e) => {\n          if (e) {\n            isFolderContentSaved('stop', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n\n    case 'route': {\n      itemElement.onclick = function () {\n        saveRoute(item.id, parameters[0]).then((e) => {\n          if (e) {\n            isFolderContentSaved('route', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n\n    case 'location': {\n      itemElement.onclick = function () {\n        saveLocation(item.id, parameters[0]).then((e) => {\n          if (e) {\n            isFolderContentSaved('location', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n    case 'bus':\n      break;\n    case 'empty':\n      break;\n    default:\n      break;\n  }\n\n  return itemElement;\n}\n\nfunction initializeSaveToFolderField(type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined) {\n  rightButtonElement.onclick = function () {\n    openFolderCreator(function () {\n      initializeSaveToFolderField(type, parameters, saveToFolderButtonElement);\n    });\n  };\n  const folders = listFolders();\n  listElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of folders) {\n    const newItemElement = generateElementOfItem(item, type, parameters, saveToFolderButtonElement);\n    fragment.appendChild(newItemElement);\n  }\n  listElement.append(fragment);\n}\n\nexport function showSaveToFolder(): void {\n  SaveToFolderField.setAttribute('displayed', 'true');\n}\n\nexport function hideSaveToFolder(): void {\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nexport function openSaveToFolder(type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined): void {\n  pushPageHistory('SaveToFolder');\n  showSaveToFolder();\n  initializeSaveToFolderField(type, parameters, saveToFolderButtonElement);\n  hidePreviousPage();\n}\n\nexport function closeSaveToFolder(): void {\n  hideSaveToFolder();\n  showPreviousPage();\n  revokePageHistory('SaveToFolder');\n}\n","import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = documentQuerySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): HTMLElement {\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.innerText = item.name;\n\n  // Event handler\n  const index = item.index;\n  itemElement.onclick = function () {\n    scheduleNotificationForStopItem(thisButtonElement, StopID, RouteID, EstimateTime, index);\n  };\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return itemElement;\n}\n\nfunction initializeScheduleNotificationField(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, thisButtonElement, StopID, RouteID, EstimateTime);\n    fragment.appendChild(newElement);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function showScheduleNotification(): void {\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n}\n\nexport function hideScheduleNotification(): void {\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function openScheduleNotification(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): void {\n  pushPageHistory('ScheduleNotification');\n  showScheduleNotification();\n  initializeScheduleNotificationField(thisButtonElement, StopID, RouteID, EstimateTime);\n  hidePreviousPage();\n}\n\nexport function closeScheduleNotification(): void {\n  hideScheduleNotification();\n  showPreviousPage();\n  revokePageHistory('ScheduleNotification');\n}\n\nexport function scheduleNotificationForStopItem(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  promptMessage('manufacturing', '處理中');\n  thisButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        thisButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        thisButtonElement.setAttribute('enabled', 'true');\n        thisButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        thisButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n"],"names":["routeCalendarField","documentQuerySelector","headElement","elementQuerySelector","titleElement","timelinesElement","timelineElements","Array","from","elementQuerySelectorAll","currentDate","Date","currentIntegration","currentTimelineSVGs","routeCalendarSliding_fieldWidth","routeCalendarSliding_initialized","generateRouteCalendarSVG","integration","date","width","fontFamily","gridLinePathCommands","gridLineLabels","i","text","toString","padStart","y","push","gridLine","join","height","gridHeight","day","getDay","index","events","repeated","scheduledEvents","scheduled","date2","offsetDate","timeZoneOffset","getTimezoneOffset","eventDate","getFullYear","getMonth","getDate","length","type","time","interval","count","eventBoxPathCommands","eventBoxDecorationPathCommands","eventBoxTexts","boxWidth","boxHeight","startMinutes","startHours","endMinutes","endHours","title","description","prototype","apply","generateRoundedRectPath","eventBoxPadding","eventBoxes","eventBoxDecorations","_initializeRouteCalendar","_asyncToGenerator","PathAttributeId","FieldSize","querySize","requestID","generateIdentifier","integrateRouteCalendar","innerHTML","innerText","dateToString","addEventListener","scrollLeft","idx","Math","round","yesterday","before","scrollTo","left","_ref","_ref2","tomorrow","after","_ref3","_ref4","arguments","showRouteCalendar","setAttribute","hideRouteCalendar","openRouteCalendar","pushPageHistory","_x","initializeRouteCalendar","hidePreviousPage","_shareRoutePermalink","RouteID","thisRoute","searchRouteByRouteID","link","getPermalink","id","name","n","shareLink","_showRoutePermalinkQRCode","openQRCode","canvasSize","canvasWidth","canvasHeight","canvasScale","min","window","devicePixelRatio","previousCalendar","generateElementOfDay","element","documentCreateDivElement","classList","add","generateElementOfEventGroup","eventGroupElement","canvasElement","document","createElement","appendChild","updateDay","thisDayElement","thisDay","currentDay","skeletonScreen","animation","onclick","playing_animation","getSettingOptionValue","calendarDayElements","CalendarDaysElement","CalendarEventGroupElements","CalendarEventGroupsElement","_previousCalendar","_previousCalendar2","thisCalendarDayElement","thisEventGroupElement","eventGroupKey","calendarEventGroup","calendarEventGroups","calendarDay","calendarDays","mainColor","getCSSVariableValue","mainColor11Flatten","gridColor","updateEventGroup","switchCalendarDay","booleanToString","thisCalendarEventGroupElement","thisCalendarEventGroup","drawGridline","thisContext","hours","boxY","fillStyle","fillRect","boxX","font","textBaseline","labelText","String","labelMeasurement","measureText","labelWidth","labelHeight","actualBoundingBoxDescent","fillText","drawEvent","thisCalendarEvent","thisDayStart","setDate","setMonth","setFullYear","setHours","setMinutes","setSeconds","setMilliseconds","getTime","duration","drawRoundedRect","tl","tr","bl","br","dateString","textMeasurement","textWidth","textHeight","thisCalendarEventGroupCanvas","thisCalendarEventGroupCanvasContext","getContext","isDisplayed","updateDisplayed","canvas","context","setTransform","scale","resizeRouteDetailsCalendarCanvas","clearRect","updateCalendarGroup","calendar","mainColor11Flattened","eventGroups","eventGroupQuantity","calendarDayQuantity","eventGroupElements","calendarEventQuantity","dayElements","currentEventGroupElementsLength","difference","calendarDaysFragment","DocumentFragment","calendarEventGroupsFragment","o","newDayElement","newEventGroupElement","append","p","q","remove","splice","thisEventGroup","previousProperties","previousAnimation","previousSkeletonScreen","generateElementOfProperty","propertyElement","iconElement","getBlankIconElement","valueElement","updatePropertiesField","properties","updateProperty","thisElement","thisProperty","previousProperty","updateIcon","thisIconElement","setIcon","icon","updateValue","value","updateAnimation","updateSkeletonScreen","compareThings","propertyQuantity","PropertiesGroupElement","propertyElements","PropertiesGroupBodyElement","currentPropertyElementsLength","fragment","newPropertyElement","thisPropertyElement","RouteDetailsField","RouteDetailsBodyElement","RouteDetailsGroupsElement","CalendarGroupElement","CalendarGroupBodyElement","ActionsGroupElement","svaeToFolderActionButtonElement","getPermalinkActionButton","showPermalinkQRCodeActionButton","_initializeRouteDetailsField","existence","isFolderContentSaved","openSaveToFolder","shareRoutePermalink","_x2","showRoutePermalinkQRCode","key","setuppropertiesGroupSkeletonScreen","defaultEventQuantity","d_0","d_1","d_2","d_3","d_4","d_5","d_6","code","j","setupCalendarGroupSkeletonScreen","integrateRouteDetails","showRouteDetails","hideRouteDetails","openRouteDetails","initializeRouteDetailsField","closeRouteDetails","showPreviousPage","revokePageHistory","CalendarEventGroupElement","CalendarDayElements","CalendarDayElement","SaveToFolderField","bodyElement","listElement","rightButtonElement","successfulSaveMessage","failedSaveMessage","generateElementOfItem","item","parameters","saveToFolderButtonElement","itemElement","iconSpanElement","getIconElement","nameElement","saveStop","then","e","k","promptMessage","closeSaveToFolder","saveRoute","saveLocation","initializeSaveToFolderField","openFolderCreator","folders","listFolders","newItemElement","showSaveToFolder","hideSaveToFolder","ScheduleNotificationField","ScheduleNotificationBodyElement","ScheduleNotificationListElement","thisButtonElement","StopID","EstimateTime","closeScheduleNotification","scheduleNotificationForStop","result","scheduleNotificationForStopItem","showScheduleNotification","hideScheduleNotification","openScheduleNotification","scheduleNotificationOptions","newElement","initializeScheduleNotificationField"],"sourceRoot":""}