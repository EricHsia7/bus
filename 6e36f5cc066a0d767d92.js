"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[133],{365:(t,e,n)=>{n.d(e,{G:()=>c});var r=n(4636),i=n(4778),o=n(7528),a=n(1172);function u(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function c(t){return s.apply(this,arguments)}function s(){var t;return t=function*(t){if(""===r.M3||""===r.se||void 0===t)return!1;var e=(0,i.F)("cancel",[t]),n=(0,o.b)("cancel",[t]),u=yield(0,a.R)("cancel",e,n);return!1!==u&&200===u.code&&"cancel"===u.method&&(yield(0,r.VJ)(t),!0)},s=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,c,"next",t)}function c(t){u(o,r,i,a,c,"throw",t)}a(void 0)}))},s.apply(this,arguments)}},1172:(t,e,n)=>{function r(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function i(t,e,n){return o.apply(this,arguments)}function o(){var t;return t=function*(t,e,n){try{if(!1===e||!1===n)return!1;var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},i=yield fetch(e,r);if(!i.ok){var o=yield i.text();return console.error("API request failed",{status:i.status,statusText:i.statusText,body:o}),!1}try{var a=yield i.text(),u=JSON.parse(a);switch(t){case"cancel":case"register":case"schedule":case"rotate":case"reschedule":return u;default:return!1}}catch(t){throw console.error("Failed to parse JSON response",t),new Error("Invalid JSON response from server")}}catch(t){return console.error("Error making request:",t),!1}},o=function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function u(t){r(a,i,o,u,c,"next",t)}function c(t){r(a,i,o,u,c,"throw",t)}u(void 0)}))},o.apply(this,arguments)}n.d(e,{R:()=>i})},3937:(t,e,n)=>{n.d(e,{e:()=>c});var r=n(4636),i=n(4778),o=n(7528),a=n(1172);function u(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function c(t){return s.apply(this,arguments)}function s(){var t;return t=function*(t){if(!t)return!1;var e=(0,i.F)("register"),n=(0,o.b)("register",[t]),u=yield(0,a.R)("register",e,n);return!1!==u&&200===u.code&&"register"===u.method&&((0,r.gc)(u.client_id),(0,r.uQ)(u.secret),yield(0,r.ms)(),!0)},s=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,c,"next",t)}function c(t){u(o,r,i,a,c,"throw",t)}a(void 0)}))},s.apply(this,arguments)}},4636:(t,e,n)=>{n.d(e,{M3:()=>O,ph:()=>S,se:()=>N,z9:()=>$,hc:()=>A,D7:()=>M,cS:()=>j,e3:()=>G,Db:()=>k,VJ:()=>E,ms:()=>T,G7:()=>U,mD:()=>X,FX:()=>V,gc:()=>L,Je:()=>C,uQ:()=>Q,Zc:()=>z});var r=n(8024),i=n(8011),o=n(4293),a=n(424),u=n(6788),c=n(3459),s=n(4311),l=n(4778),f=n(7528),d=n(1172);function p(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function y(){var t;return t=function*(){if(""===O||""===N)return!1;var t=(0,l.F)("rotate"),e=(0,f.b)("rotate",[]),n=yield(0,d.R)("rotate",t,e);return!1!==n&&200===n.code&&"rotate"===n.method&&(Q(n.secret),yield T(),!0)},y=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){p(o,r,i,a,u,"next",t)}function u(t){p(o,r,i,a,u,"throw",t)}a(void 0)}))},y.apply(this,arguments)}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function v(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function m(){var t;return t=function*(t,e,n,r,i,o,a,u,c){if(""===O||""===N||void 0===t||void 0===e||void 0===n||void 0===r||void 0===i||void 0===o||"number"!=typeof a||void 0===c)return!1;var s=new Date;switch(h(c)){case"string":case"number":s=new Date(c);break;default:if(!(c instanceof Date))return!1;s=c}var p=(0,l.F)("schedule"),v=(0,f.b)("schedule",[t,e,n,r,i,o,a,u,s.toISOString()]),m=yield(0,d.R)("schedule",p,v);return!1!==m&&200===m.code&&"schedule"===m.method&&(Math.random()>.8&&(yield function(){return y.apply(this,arguments)}()),yield U(m.schedule_id,t,e,n,r,i,o,a,u,s.getTime()),m.schedule_id)},m=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){v(o,r,i,a,u,"next",t)}function u(t){v(o,r,i,a,u,"throw",t)}a(void 0)}))},m.apply(this,arguments)}function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){w(o,r,i,a,u,"next",t)}function u(t){w(o,r,i,a,u,"throw",t)}a(void 0)}))}}var S="",O="",N="",P=[],x={},J={};function T(){return D.apply(this,arguments)}function D(){return(D=b((function*(){var t={provider:S,client_id:O,secret:N};yield(0,s.mL)(9,"n_client",JSON.stringify(t))}))).apply(this,arguments)}function k(){return I.apply(this,arguments)}function I(){return(I=b((function*(){var t=yield(0,s.Ct)(9,"n_client");if(t){var e=JSON.parse(t);S=e.provider,O=e.client_id,N=e.secret}}))).apply(this,arguments)}function A(){return""!==O&&""!==N}function C(t){if(!(0,r.Gz)(t))throw new Error("The provider is not valid.");var e=new URL(t);S="".concat(e.protocol,"//").concat(e.hostname)}function M(){return String(S)}function L(t){void 0!==t&&(O=String(t))}function Q(t){void 0!==t&&(N=String(t))}function j(){return F.apply(this,arguments)}function F(){return(F=b((function*(){var t,e=(new Date).getTime(),n=0,r=g(yield(0,s.Su)(10));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=yield(0,s.Ct)(10,i),a=JSON.parse(o);if(a.scheduled_time>e){var u=a.schedule_id,c=a.stop_id,l="s_".concat(c);P.push(a),x[u]=n,J.hasOwnProperty(l)||(J[l]=[]),J[l].push(n),n+=1}}}catch(t){r.e(t)}finally{r.f()}}))).apply(this,arguments)}function U(t,e,n,r,i,o,a,u,c,s){return R.apply(this,arguments)}function R(){return(R=b((function*(t,e,n,r,i,o,a,u,c,l){var f={schedule_id:t,stop_id:e,location_name:n,route_id:r,route_name:i,direction:o,estimate_time:a,time_formatting_mode:u,time_offset:c,scheduled_time:l},d="s_".concat(e),p=P.length;P.push(f),x[t]=p,J.hasOwnProperty(d)||(J[d]=[]),J[d].push(p),yield(0,s.mL)(10,t,JSON.stringify(f))}))).apply(this,arguments)}function E(t){return H.apply(this,arguments)}function H(){return(H=b((function*(t){if(x.hasOwnProperty(t)){var e=x[t],n=P[e].stop_id,r="s_".concat(n);P.splice(e,1,null),J[r].splice(J[r].indexOf(e),1),delete x[t],yield(0,s.iQ)(10,t)}}))).apply(this,arguments)}function z(t){var e=(new Date).getTime(),n="s_".concat(t);if(J.hasOwnProperty(n)){var r,i=g(J[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=P[o];if(null!==a)if(a.scheduled_time>e)return!0}}catch(t){i.e(t)}finally{i.f()}}return!1}function $(){return q.apply(this,arguments)}function q(){return(q=b((function*(){var t=(new Date).getTime();for(var e in x){var n=x[e],r=P[n];if(r.scheduled_time<=t){var i=r.stop_id,o="s_".concat(i);P.splice(n,1,null),J[o].splice(J[o].indexOf(n),1),delete x[e],yield(0,s.iQ)(10,e)}}}))).apply(this,arguments)}function G(t){return Z.apply(this,arguments)}function Z(){return(Z=b((function*(t){var e,n=yield(0,o.a)(t,!0),r=function(){var t,e=(new Date).getTime(),n=[],r=g(P);try{for(r.s();!(t=r.n()).done;){var i=t.value;null!==i&&i.scheduled_time>e&&n.push(i)}}catch(t){r.e(t)}finally{r.f()}return n}(),i=(new Date).getTime(),a=[],c=g(r);try{for(c.s();!(e=c.n()).done;){var s=e.value,l={},f=s.location_name;l.name=f;var d=s.stop_id;l.stop_id=d;var p=s.estimate_time;l.estimate_time=p;var y=s.schedule_id;l.schedule_id=y;var h=s.scheduled_time;l.scheduled_time=h;var v=new Date(h),m=v.getDate(),_=v.getHours(),w=v.getMinutes();l.date=String(m).padStart(2,"0"),l.hours=String(_).padStart(2,"0"),l.minutes=String(w).padStart(2,"0"),l.route={};var b=s.route_name;l.route.name=b;var S=s.route_id;l.route.id=S;var O=s.direction;l.route.direction=O;var N=s.route_id,x="r_".concat(N);if(n.hasOwnProperty(x)){var J=n[x].pid;l.route.pathAttributeId=J,a.push(l)}}}catch(t){c.e(t)}finally{c.f()}a.sort((function(t,e){return t.scheduled_time-e.scheduled_time}));for(var T=[],D=0,k={},I=0,A=a;I<A.length;I++){var C=A[I],M="g_".concat(C.date,"_").concat(C.hours);k.hasOwnProperty(M)?C.is_first=!1:(k[M]=!0,C.is_first=!0),T.push(C),D+=1}var L={items:T,itemQuantity:D,dataUpdateTime:Math.max((0,u.Zt)(t),i)};return(0,u.gC)(t),(0,u.LQ)(t),L}))).apply(this,arguments)}var V=[{name:"到站前5分鐘",time_offset:-5,icon:"clock_loader_10",index:0},{name:"到站前10分鐘",time_offset:-10,icon:"clock_loader_20",index:1},{name:"到站前15分鐘",time_offset:-15,icon:"clock_loader_40",index:2},{name:"到站前20分鐘",time_offset:-20,icon:"clock_loader_60",index:3},{name:"到站前25分鐘",time_offset:-25,icon:"clock_loader_80",index:4},{name:"到站前30分鐘",time_offset:-30,icon:"clock_loader_90",index:5}];function X(t,e,n,r){return B.apply(this,arguments)}function B(){return B=b((function*(t,e,n,s){if(A()){var l=(0,c.Js)("time_formatting_mode"),f=(0,r.zx)("r"),d=yield(0,a.T)(f),p=yield(0,i.g)(f,!1),y=yield(0,o.a)(f,!0);(0,u.LQ)(f),(0,u.gC)(f);var h="s_".concat(t),v={};if(!d.hasOwnProperty(h))return 0;var g=(v=d[h]).stopLocationId,_=v.goBack,w="l_".concat(g);if(!p.hasOwnProperty(w))return 0;var b=p[w].n,S="r_".concat(e),O={};if(!y.hasOwnProperty(S))return 0;var N=(O=y[S]).n,P=O.dep,x=[O.des,P,""][_?parseInt(_):0],J=V[s].time_offset,T=(new Date).getTime()+1e3*n+60*J*1e3,D=yield function(t,e,n,r,i,o,a,u,c){return m.apply(this,arguments)}(t,b,e,N,x,n,l,J,T);return!1===D?0:1}return 2})),B.apply(this,arguments)}},4778:(t,e,n)=>{n.d(e,{F:()=>i});var r=n(4636);function i(t){if(""===r.ph)return!1;var e=new URL(r.ph);return["cancel","register","schedule","rotate","reschedule"].indexOf(t)>-1&&(e.searchParams.set("method",t),e.toString())}},5314:(t,e,n)=>{n.d(e,{$i:()=>S,DF:()=>w,FU:()=>v,Qj:()=>y,XK:()=>g});var r=n(8024),i=n(5579),o=n(9734),a=n(8011),u=n(4293),c=n(6788),s=n(4311);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){d(o,r,i,a,u,"next",t)}function u(t){d(o,r,i,a,u,"throw",t)}a(void 0)}))}}function y(){return h.apply(this,arguments)}function h(){return(h=p((function*(){var t,e=[],n=(new Date).getTime(),r=l(yield(0,s.Su)(8));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=yield(0,s.Ct)(8,i),a=JSON.parse(o);n-new Date(a.time).getTime()<=12096e5&&e.push(a)}}catch(t){r.e(t)}finally{r.f()}return 0===e.length&&e.push({type:"empty",time:(new Date).toISOString(),name:"沒有內容",id:0}),e}))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=p((function*(){var t,e=(new Date).getTime(),n=l(yield(0,s.Su)(8));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=yield(0,s.Ct)(8,r),o=JSON.parse(i);e-new Date(o.time).getTime()>12096e5&&(yield(0,s.iQ)(8,r))}}catch(t){n.e(t)}finally{n.f()}}))).apply(this,arguments)}function g(t,e){return _.apply(this,arguments)}function _(){return(_=p((function*(t,e){var n=(0,r.zx)("r"),i="".concat(t,"_").concat(e),c=(new Date).toISOString();switch(t){case"route":var l=yield(0,s.Ct)(8,i);if(l){var f=JSON.parse(l);f.time=c,yield(0,s.mL)(8,i,JSON.stringify(f))}else{var d=yield(0,u.a)(n,!0),p="r_".concat(e);if(d.hasOwnProperty(p)){var y={type:"route",time:c,name:d[p].n,id:e};yield(0,s.mL)(8,i,JSON.stringify(y))}}break;case"location":var h=yield(0,s.Ct)(8,i);if(h){var v=JSON.parse(h);v.time=c,yield(0,s.mL)(8,i,JSON.stringify(v))}else{var m=yield(0,a.g)(n,!0),g="ml_".concat(e);if(m.hasOwnProperty(g)){var _={type:"location",time:c,name:m[g].n,hash:e};yield(0,s.mL)(8,i,JSON.stringify(_))}}break;case"bus":var w=yield(0,s.Ct)(8,i);if(w){var b=JSON.parse(w);b.time=c,yield(0,s.mL)(8,i,JSON.stringify(b))}else{var S=yield(0,o.j)(n,!0),O="c_".concat(e);if(S.hasOwnProperty(O)){var N={type:"bus",time:c,name:S[O].CarNum,id:e};yield(0,s.mL)(8,i,JSON.stringify(N))}}}}))).apply(this,arguments)}function w(t,e){return b.apply(this,arguments)}function b(){return(b=p((function*(t,e){var n="".concat(t,"_").concat(e),r=yield(0,s.Ct)(8,n);return!!r&&JSON.parse(r)}))).apply(this,arguments)}function S(t){return O.apply(this,arguments)}function O(){return(O=p((function*(t){var e,n=yield y(),r=yield(0,u.a)(t,!0),o=[],a=0,s=l(n);try{for(s.s();!(e=s.n()).done;){var f=e.value,d=f.type,p=new Date(f.time);switch(d){case"route":var h={type:"route"},v=f.name;h.name=v;var m=f.id;h.id=m;var g=r["r_".concat(m)].pid;h.pid=g,h.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(h),a+=1;break;case"location":var _={type:"location"},w=f.hash;_.hash=w;var b=f.name;_.name=b,_.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(_),a+=1;break;case"bus":var S={type:"bus"},O=f.id;S.id=O;var N=f.name;S.name=N,S.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(S),a+=1;break;case"empty":var P={type:"empty"},x=f.id;P.id=x;var J=f.name;P.name=J,P.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(P),a=1}}}catch(t){s.e(t)}finally{s.f()}o.sort((function(t,e){return e.time.absolute-t.time.absolute}));var T={items:o,itemQuantity:a,dataUpdateTime:(new Date).getTime()};return(0,c.LQ)(t),(0,c.gC)(t),T}))).apply(this,arguments)}},5352:(t,e,n)=>{n.d(e,{Qh:()=>s,nL:()=>p,qZ:()=>f,ty:()=>h,vQ:()=>g});var r=n(8024),i=n(4311);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,c,"next",t)}function c(t){u(o,r,i,a,c,"throw",t)}a(void 0)}))}}function s(t,e,n,r,i,o){return l.apply(this,arguments)}function l(){return(l=c((function*(t,e,n,a,u,c){var s=(0,r.zx)("s");if(e<0||e>23||n<0||n>59||a<0||a>23||u<0||u>59)return!1;if(!(Number.isInteger(e)&&Number.isInteger(n)&&Number.isInteger(a)&&Number.isInteger(u)))return!1;if(c.length>7)return!1;var l,f=o(c);try{for(f.s();!(l=f.n()).done;){var d=l.value;if("number"==typeof d&&(d<0||d>6||!Number.isInteger(d)))return!1}}catch(t){f.e(t)}finally{f.f()}var p={name:t,period:{start:{hours:e,minutes:n},end:{hours:a,minutes:u}},days:c,id:s};return yield(0,i.mL)(7,s,JSON.stringify(p)),!0}))).apply(this,arguments)}function f(t){return d.apply(this,arguments)}function d(){return(d=c((function*(t){var e=yield(0,i.Ct)(7,t);if(e)return JSON.parse(e)}))).apply(this,arguments)}function p(t){return y.apply(this,arguments)}function y(){return(y=c((function*(t){(yield f(t.id))&&(yield(0,i.mL)(7,t.id,JSON.stringify(t)))}))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=c((function*(){var t,e=[],n=o(yield(0,i.Su)(7));try{for(n.s();!(t=n.n()).done;){var r=t.value,a=yield(0,i.Ct)(7,r);if(a){var u=JSON.parse(a);e.push(u)}}}catch(t){n.e(t)}finally{n.f()}return e.sort((function(t,e){return 60*t.period.end.hours+t.period.end.minutes-(60*e.period.end.hours+e.period.end.minutes)})),e.sort((function(t,e){return 60*t.period.start.hours+t.period.start.minutes-(60*e.period.start.hours+e.period.start.minutes)})),e}))).apply(this,arguments)}function m(){return(m=c((function*(){var t,e={},n=o(yield h());try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=o(i.days);try{for(a.s();!(r=a.n()).done;){var u=r.value,c="d_".concat(u);e.hasOwnProperty(c)||(e[c]=[]);var s={start:i.period.start,end:i.period.end};e[c].push(s)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}for(var l in e){for(var f=e[l],d=f.length,p=[],y=0;y<d;y++){var v=f[y-1]||f[y],m=f[y];0===p.length?p.push(m):60*m.start.hours+m.start.minutes>=60*v.start.hours+v.start.minutes&&60*m.start.hours+m.start.minutes<=60*v.end.hours+v.end.minutes?(p[p.length-1].end.hours=m.end.hours,p[p.length-1].end.minutes=m.end.minutes):p.push(m)}e[l]=p}return e}))).apply(this,arguments)}function g(t){return _.apply(this,arguments)}function _(){return _=c((function*(t){var e=yield function(){return m.apply(this,arguments)}(),n=t.getDay(),r="d_".concat(n),i=t.getHours(),a=t.getMinutes();if(e.hasOwnProperty(r)){var u,c=o(e[r]);try{for(c.s();!(u=c.n()).done;){var s=u.value;if(60*i+a>=60*s.start.hours+s.start.minutes&&60*i+a<=60*s.end.hours+s.end.minutes)return!0}}catch(t){c.e(t)}finally{c.f()}}return!1})),_.apply(this,arguments)}},7528:(t,e,n)=>{n.d(e,{b:()=>a});var r=n(8024),i=n(7307),o=n(4636);function a(t,e){switch(t){case"cancel":return""!==o.M3&&""!==o.se&&1===e.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se),schedule_id:e[0]};case"register":if(1!==e.length)return!1;var n=new Date;return n.setMilliseconds(0),n.setSeconds(0),{hash:(0,r.sc)("".concat(e[0]).concat(n.getTime()))};case"schedule":return""!==o.M3&&""!==o.se&&9===e.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se),stop_id:e[0],location_name:e[1],route_id:e[2],route_name:e[3],direction:e[4],estimate_time:e[5],time_formatting_mode:e[6],time_offset:e[7],scheduled_time:e[8]};case"rotate":return""!==o.M3&&""!==o.se&&0===e.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se)};case"reschedule":return""!==o.M3&&""!==o.se&&3===e.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se),schedule_id:e[0],estimate_time:e[1],scheduled_time:e[2]};default:return!1}}}}]);
//# sourceMappingURL=6e36f5cc066a0d767d92.js.map