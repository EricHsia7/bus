"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{2174(e,t,i){i.d(t,{a:()=>P,b:()=>M,c:()=>I,d:()=>T});var n=i(467),a=i(5767),r=i(365),u=i(3422),d=i(3459),s=i(8179),o=i(8024),c=i(9915),l=i(4537),p=i(904),h=i(9119),f=(0,s.c)(".qh"),v=(0,s.e)(f,".th"),g=(0,s.e)(v,".xh"),b=(0,s.e)(g,".yh"),m=(0,s.e)(f,"._h"),y=(0,s.e)(m,".ai"),A={},C=!1,_=new c.a(function(){return S.apply(this,arguments)},15e3);function L(e){b.style.setProperty("--sh",`${e}ms`),b.classList.add("zh")}function k(e){var t=e;b.style.setProperty("--rh",t.detail.progress.toString()),"end"===t.detail.stage&&document.removeEventListener(t.detail.target,k)}function x(){var e=(0,s.a)();e.classList.add("bi");var t=(0,s.a)();t.classList.add("ci"),e.appendChild(t);var i=(0,s.a)();i.classList.add("di");var n=(0,s.a)();n.classList.add("ei"),i.appendChild(n);var a=(0,s.a)();a.classList.add("fi"),i.appendChild(a);var r=(0,s.a)();r.classList.add("gi"),i.appendChild(r);var u=(0,s.a)();u.classList.add("hi");var d=document.createElement("span");return d.appendChild((0,l.b)("close")),u.appendChild(d),i.appendChild(u),e.appendChild(i),e}function w(e,t,i){function n(e,n,a){function r(e,t){(0,s.e)(e,".ci").innerText=t.hours}function u(e,t){var i=(0,s.e)(e,".di");(0,s.e)(i,".ei").innerText=t.minutes}function d(e,t){var i=(0,s.e)(e,".di");(0,s.e)(i,".gi").innerText=t.name}function c(e,t){var i=(0,s.e)(e,".di");(0,s.e)(i,".fi").innerText=`${t.route.name} - 往${t.route.direction}`}function l(e,t){var i=(0,s.e)(e,".di");(0,s.e)(i,".hi").onclick=function(){!function(e,t){E.apply(this,arguments)}(e,t.schedule_id)}}function p(e,t){e.setAttribute("first",(0,o.a)(t.is_first))}function h(e,t){e.setAttribute("animation",(0,o.a)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==a?(r(e,n),u(e,n),d(e,n),c(e,n),l(e,n),p(e,n),h(e,i),f(e,t)):(n.hours!==a.hours&&r(e,n),n.minutes!==a.minutes&&u(e,n),(0,o.b)(a.schedule_id,n.schedule_id)||(d(e,n),c(e,n),l(e,n)),a.is_first!==n.is_first&&p(e,n),false!==i&&h(e,i),C!==t&&f(e,t))}var a=e.itemQuantity,r=e.items,u=Array.from((0,s.d)(y,".bi")),d=u.length;if(a!==d){var c=d-a;if(c<0){for(var l=new DocumentFragment,p=0;p>c;p--){var h=x();l.appendChild(h),u.push(h)}y.append(l)}else if(c>0)for(var f=d-1,v=d-c-1;f>v;f--)u[f].remove(),u.splice(f,1)}for(var g=0;g<a;g++){var b=u[g],m=r[g];if((0,o.f)(A,"items"))if(A.items[g])n(b,m,A.items[g]);else n(b,m,null);else n(b,m,null)}A=e,C=t}function S(){return(S=(0,n.a)(function*(){try{var e=(0,d.b)("playing_animation"),t=(0,d.b)("refresh_interval"),i=(0,o.c)();b.setAttribute("refreshing","true"),b.classList.remove("zh"),document.addEventListener(i,k);var n=yield(0,u.h)(i);w(n,!1,e);var r=0;t.dynamic&&(r=yield(0,a.c)());var s=(new Date).getTime(),c=0;c=t.dynamic?Math.max(s+5e3,n.dataUpdateTime+t.baseInterval/r):s+t.baseInterval;var l=Math.max(5e3,c-s);b.setAttribute("refreshing","false"),L(l)}catch(e){var p=1e4;return(0,h.a)("error","通知發生錯誤，將在10秒後重試。"),L(p),p}})).apply(this,arguments)}function T(){f.setAttribute("displayed","true")}function M(){f.setAttribute("displayed","false")}function I(){(0,p.c)("NotificationScheduleManager"),T(),function(){for(var e=(0,d.b)("playing_animation"),t=(0,p.d)("window"),i=(t.width,t.height),n=Math.floor(i/50)+5,a=[],r=0;r<n;r++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});w({items:a,itemQuantity:n,dataUpdateTime:0},!0,e)}(),_.isPaused?_.resume(!0):_.tick(),(0,p.b)()}function P(){M(),_.pause(),(0,p.i)(),(0,p.e)("NotificationScheduleManager")}function E(){return(E=(0,n.a)(function*(e,t){(0,h.a)("manufacturing","處理中"),(yield(0,r.a)(t))?(e.remove(),(0,h.a)("check_circle","已取消通知")):(0,h.a)("error","取消失敗")})).apply(this,arguments)}},8380(e,t,i){i.d(t,{a:()=>L,b:()=>m,c:()=>C,d:()=>_,e:()=>A,f:()=>k});var n=i(3453),a=i(467),r=i(5352),u=i(8179),d=i(904),s=i(7891),o=i(9119),c=(0,u.c)(".rg"),l=(0,u.e)(c,".wg"),p=(0,u.e)(l,".xg"),h=(0,u.e)(p,'.yg[group="schedule-name"] .bh input'),f=(0,u.e)(p,'.yg[group="schedule-start-time"] .bh input'),v=(0,u.e)(p,'.yg[group="schedule-end-time"] .bh input'),g=(0,u.e)(p,'.yg[group="schedule-days"] .bh'),b=(0,u.d)(g,".ch");function m(){return y.apply(this,arguments)}function y(){return(y=(0,a.a)(function*(){for(var e=h.value,t=f.value,i=v.value,a=String(t).split(":").map(function(e){return parseInt(e)}),u=(0,n.a)(a,2),d=u[0],c=u[1],l=String(i).split(":").map(function(e){return parseInt(e)}),p=(0,n.a)(l,2),g=p[0],m=p[1],y=[],A=0;A<7;A++){var C=b[A],_=C.getAttribute("highlighted"),k=parseInt(C.getAttribute("day"));"true"===_&&y.push(k)}(yield(0,r.a)(e,d,c,g,m,y))?(L(),(0,o.a)("calendar_view_day","已建立個人化行程"),(0,s.c)()):(0,o.a)("error","無法建立個人化行程")})).apply(this,arguments)}function A(){c.setAttribute("displayed","true")}function C(){c.setAttribute("displayed","false")}function _(){(0,d.c)("PersonalScheduleCreator"),A(),(0,d.b)()}function L(){C(),(0,d.i)(),(0,d.e)("PersonalScheduleCreator")}function k(e){var t=(0,u.e)(g,`.ch[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},5693(e,t,i){i.d(t,{a:()=>S,b:()=>x,c:()=>w,d:()=>C,e:()=>k,f:()=>T});var n=i(3453),a=i(467),r=i(5352),u=i(8179),d=i(5579),s=i(904),o=i(7891),c=i(9119),l=(0,u.c)(".dh"),p=(0,u.e)(l,".ih"),h=(0,u.e)(l,".eh"),f=(0,u.e)(h,".fh"),v=(0,u.e)(p,".jh"),g=(0,u.e)(v,'.kh[group="schedule-name"] .oh input'),b=(0,u.e)(v,'.kh[group="schedule-start-time"] .oh input'),m=(0,u.e)(v,'.kh[group="schedule-end-time"] .oh input'),y=(0,u.e)(v,'.kh[group="schedule-days"] .oh'),A=(0,u.d)(y,".ph");function C(e){return _.apply(this,arguments)}function _(){return(_=(0,a.a)(function*(e){for(var t=g.value,i=b.value,a=m.value,u=String(i).split(":").map(function(e){return parseInt(e)}),d=(0,n.a)(u,2),s=d[0],l=d[1],p=String(a).split(":").map(function(e){return parseInt(e)}),h=(0,n.a)(p,2),f=h[0],v=h[1],y=[],C=0;C<7;C++){var _=A[C],L=_.getAttribute("highlighted"),k=parseInt(_.getAttribute("day"));"true"===L&&y.push(k)}var x=yield(0,r.b)(e);x.name=t,x.days=y,x.period.start.hours=s,x.period.start.minutes=l,x.period.end.hours=f,x.period.end.minutes=v,(yield(0,r.e)(x))?(S(),(0,o.c)()):(0,c.a)("error","無法儲存變更")})).apply(this,arguments)}function L(){return(L=(0,a.a)(function*(e){var t=yield(0,r.b)(e);g.value=t.name,b.value=(0,d.g)(t.period.start),m.value=(0,d.g)(t.period.end);for(var i=0;i<7;i++){var n=A[i];t.days.indexOf(i)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}f.onclick=function(){C(e)}})).apply(this,arguments)}function k(){l.setAttribute("displayed","true")}function x(){l.setAttribute("displayed","false")}function w(e){(0,s.c)("PersonalScheduleEditor"),k(),function(e){L.apply(this,arguments)}(e),(0,s.b)()}function S(){x(),(0,s.i)(),(0,s.e)("PersonalScheduleEditor")}function T(e){var t=(0,u.e)(y,`.ph[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},7891(e,t,i){i.d(t,{a:()=>m,b:()=>g,c:()=>h,d:()=>b,e:()=>v});var n=i(467),a=i(5352),r=i(8179),u=i(4537),d=i(904),s=i(5693),o=(0,r.c)(".hg"),c=(0,r.e)(o,".mg"),l=(0,r.e)(c,".ng");function p(e){var t=(0,r.a)();t.classList.add("og"),t.onclick=function(){(0,s.c)(e.id)};var i=(0,r.a)();i.classList.add("pg"),i.innerText=e.name,t.appendChild(i);var n=(0,r.a)();n.classList.add("qg");var a=document.createElement("span");return a.appendChild((0,u.b)("arrow_forward_ios")),n.appendChild(a),t.appendChild(n),t}function h(){return f.apply(this,arguments)}function f(){return(f=(0,n.a)(function*(){l.innerHTML="";var e=yield(0,a.d)(),t=new DocumentFragment;for(var i of e){var n=p(i);t.appendChild(n)}l.append(t)})).apply(this,arguments)}function v(){o.setAttribute("displayed","true")}function g(){o.setAttribute("displayed","false")}function b(){(0,d.c)("PersonalScheduleManager"),o.setAttribute("displayed","true"),h(),(0,d.b)()}function m(){o.setAttribute("displayed","false"),(0,d.i)(),(0,d.e)("PersonalScheduleManager")}},9119(e,t,i){i.d(t,{a:()=>s});var n=i(2284),a=i(3459),r=i(8179),u=i(8024),d=i(4537);function s(e,t,i){var s=(0,r.b)("._i");if(null!==s)for(var o of s)o.remove();var c=(0,a.b)("playing_animation"),l=(0,r.a)();l.classList.add("_i"),l.setAttribute("animation",(0,u.a)(c));var p=(0,r.a)();p.classList.add("bj"),p.appendChild((0,d.b)(e)),l.appendChild(p);var h=(0,r.a)();if(h.classList.add("cj"),h.innerText=t,l.appendChild(h),"object"===(0,n.a)(i)&&null!=i&&"function"==typeof(null==i?void 0:i.action)){var f=(0,r.a)();f.classList.add("dj"),f.innerText=i.text,f.addEventListener("click",function(){i.action()},{once:!0}),l.appendChild(f),l.setAttribute("button","true")}l.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(l)}},8279(e,t,i){i.d(t,{a:()=>f,b:()=>p,c:()=>h,d:()=>l});var n=i(8179),a=i(2648),r=i(251),u=i(904),d=(0,n.c)(".ui"),s=(0,n.e)(d,".vi"),o=(0,n.e)(s,".xi"),c=(0,n.e)(d,".zi");function l(){d.setAttribute("displayed","true")}function p(){d.setAttribute("displayed","false")}function h(e){(0,u.c)("QRCode"),l(),function(e){var t=(0,a.a)(e,"M",.5,.3,0,10);c.innerHTML=t,o.onclick=function(){(0,r.a)(t,"image/svg+xml","qrcode.svg")}}(e),(0,u.b)()}function f(){p(),(0,u.i)(),(0,u.e)("QRCode")}},7908(e,t,i){i.d(t,{a:()=>x,b:()=>w,c:()=>k});var n=i(467),a=i(3937),r=i(3422),u=i(8179),d=i(8024),s=i(904),o=i(9119),c=i(6104),l=(0,u.c)(".ii"),p=(0,u.e)(l,".ni"),h=(0,u.e)(p,".oi"),f=(0,u.e)(h,'.pi[group="provider"]'),v=(0,u.e)(f,".ti"),g=(0,u.e)(v,"input"),b=(0,u.e)(h,'.pi[group="registration-key"]'),m=(0,u.e)(b,".ti"),y=(0,u.e)(m,"input"),A=(0,u.e)(l,".ji"),C=(0,u.e)(A,".ki"),_=(0,u.e)(A,".li");function L(){C.onclick=function(){x(),(0,s.i)(),(0,s.e)("RegisterNotification"),(0,c.d)()},_.onclick=function(){!function(){S.apply(this,arguments)}()},g.value=(0,r.f)(),y.value=""}function k(){l.setAttribute("displayed","true")}function x(){l.setAttribute("displayed","false")}function w(){(0,s.c)("RegisterNotification"),k(),L(),(0,s.b)()}function S(){return(S=(0,n.a)(function*(){(0,o.a)("manufacturing","處理中");var e=g.value,t=y.value;if((0,d.h)(e))return(0,r.p)(e),(yield(0,a.a)(t))?void(0,o.a)("check_circle","註冊成功"):void(0,o.a)("error","註冊失敗");(0,o.a)("error","無效的提供者")})).apply(this,arguments)}},3257(){},321(){},6907(){},2503(){},7537(){},4263(){},7943(){},3963(){},4721(){},5374(){},112(){},1542(){},6153(){},1452(){},5666(){},2676(){},8558(){},4935(){},1469(){},1195(){},5068(){},5504(){},9598(){},626(){},969(){},6780(){},1484(){},3382(){},6340(){},6384(){},3011(){},8983(){},1511(){},5995(){},4305(){},5228(){},1078(){}}]);
//# sourceMappingURL=d7b777c5f01f10b29cb8.js.map