!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,(()=>(()=>{"use strict";var t,e={4256:(t,e,n)=>{n.d(e,{_q:()=>l,pD:()=>u});var r=n(8024);function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function c(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function u(t){return"".concat(t.city.join("")).concat(t.district.join("")).concat(t.road.join("、")).concat(t.road_section.sort((function(t,e){return t-e})).length>0?t.road_section.join("、")+"段":"").concat(t.alley.length>0?t.alley.sort((function(t,e){return t-e})).join("、")+"巷":"").concat(t.alley_branch.length>0?t.alley_branch.sort((function(t,e){return t-e})).join("、")+"弄":"").concat(t.doorplate.length>0?t.doorplate.sort((function(t,e){return t-e})).join("、")+"號":"").concat(t.floornumber.length>0?t.floornumber.join("、")+"樓":"").concat(t.direction.length>0?"（朝"+t.direction.join("、")+"）":"")}function l(t){var e,n=[],c={},i=o(t);try{for(i.s();!(e=i.n()).done;){var u=e.value;for(var l in u)c.hasOwnProperty(l)||(c[l]=0),u[l].length>0&&(c[l]=c[l]+1)}}catch(t){i.e(t)}finally{i.f()}var f=Object.entries(c).map((function(t){return{key:t[0],value:t[1]}})).filter((function(e){return e.value===t.length})).sort((function(t,e){return t.value-e.value}));if(f.length>0){var s,h=o(f);try{for(h.s();!(s=h.n()).done;){var d,v=s.value,p=[],y=o(t);try{for(y.s();!(d=y.n()).done;){u=d.value;p.push(u[v.key].join(""))}}catch(t){y.e(t)}finally{y.f()}(0,r.W8)(p)&&n.push({components:p,len:Math.max.apply(Math,a(p.map((function(t){return t.length}))))})}}catch(t){h.e(t)}finally{h.f()}}if(n.length>0)return(n=n.sort((function(t,e){return t.len-e.len})))[0].components;var g=t.length;return(0,r.VO)(g)}},8024:(t,e,n)=>{function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,c=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw c}}}}function a(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{D9:()=>d,FU:()=>M,MR:()=>w,MX:()=>g,QX:()=>h,VO:()=>y,W8:()=>v,e5:()=>I,hw:()=>f,iO:()=>S,p1:()=>A,q_:()=>u,t9:()=>x,tH:()=>s,wg:()=>l,zx:()=>m});var c=n(3503);function u(t,e,n,r){var a=(u.canvas||(u.canvas=document.createElement("canvas"))).getContext("2d"),o="".concat(e," ").concat(n," ").concat(r);return a.font=o,a.measureText(t).width}function l(t,e,n,r,a,o,c){o="number"==typeof o?{tl:o,tr:o,br:o,bl:o}:{tl:o.tl||0,tr:o.tr||0,br:o.br||0,bl:o.bl||0},t.beginPath(),t.moveTo(e+o.tl,n),t.lineTo(e+r-o.tr,n),t.quadraticCurveTo(e+r,n,e+r,n+o.tr),t.lineTo(e+r,n+a-o.br),t.quadraticCurveTo(e+r,n+a,e+r-o.br,n+a),t.lineTo(e+o.bl,n+a),t.quadraticCurveTo(e,n+a,e,n+a-o.bl),t.lineTo(e,n+o.tl),t.quadraticCurveTo(e,n,e+o.tl,n),t.closePath(),t.fillStyle=c,t.fill()}function f(t,e){function n(t){return JSON.stringify({e:t})}var r=n(t),a=n(e),o=r.length,i=a.length;if(o===i){if(o>32||i>32){for(var u=c(r),l=c(a),f=!0,s=0;s<8;s++){if(u.charAt(s)!==l.charAt(s)){f=!1;break}}return f}return r===a}return!1}function s(t){for(var e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=0;t>=1024&&n<e.length-1;)t/=1024,n++;return"".concat(t.toFixed(2)," ").concat(e[n])}function h(t){for(var e=[],n=[],r=0;r<t.length;r++)0===r||t[r][0]-t[r-1][0]>0?(n.length>0&&e.push(n),n=[t[r]]):n.push(t[r]);return n.length>0&&e.push(n),e}function d(t,e){var n=t.length;if(n!==e.length)throw new Error("Arrays must have the same length");for(var r=0,a=0,o=0,c=0,i=0,u=0;u<n;u++)r+=t[u],a+=e[u],o+=t[u]*e[u],c+=Math.pow(t[u],2),i+=Math.pow(e[u],2);var l=n*o-r*a,f=Math.sqrt((n*c-Math.pow(r,2))*(n*i-Math.pow(a,2)));return 0===f?0:l/f}function v(t){for(var e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++)if(t[e]===t[n])return!1;return!0}function p(t){for(var e="";t>0;){var n=(t-1)%26;e=String.fromCharCode(n+65)+e,t=Math.floor((t-1)/26)}return e}function y(t){for(var e=[],n=0;n<t;n++)e.push("地點".concat(p(n+1)));return e}function g(t){var e,n=[],a=[{vector:[0,0],label:"未知"},{vector:[0,1],label:"北"},{vector:[1,0],label:"東"},{vector:[0,-1],label:"南"},{vector:[-1,0],label:"西"},{vector:[Math.sqrt(2)/2,Math.sqrt(2)/2],label:"東北"},{vector:[Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"東南"},{vector:[-Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"西南"},{vector:[-Math.sqrt(2)/2,Math.sqrt(2)/2],label:"西北"}],o=r(t);try{for(o.s();!(e=o.n()).done;){var c,i=e.value,u=0,l=0,f=r(i);try{for(f.s();!(c=f.n()).done;){var s=c.value;u+=s[0],l+=s[1]}}catch(t){f.e(t)}finally{f.f()}var h,d=j([u,l]),v=[],p=r(a);try{for(p.s();!(h=p.n()).done;){var y=h.value,g=y.vector[0]*d[0]+y.vector[1]*d[1];v.push({label:y.label,dotProduct:g})}}catch(t){p.e(t)}finally{p.f()}var b=(v=v.sort((function(t,e){return e.dotProduct-t.dotProduct})))[0];n.push(b.label)}}catch(t){o.e(t)}finally{o.f()}return n}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function m(){for(var t="".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","_"),e=0;e<16;e++){var n=Math.round(Math.random()*b.length);t+=b.substring(n,n+1)}return t}function M(t){return(((new Date).getTime()/t).toFixed(0)*t).toString(36)}function S(t){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(t)}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n=arguments.length>2?arguments[2]:void 0,r=new Blob([t],{type:e}),a=new File([r],n,{type:e});if(navigator.canShare&&navigator.canShare({files:[a]}))navigator.share({files:[a]}).catch((function(t){}));else{var o=URL.createObjectURL(r),c=document.createElement("a");c.href=o,c.download=n,document.body.appendChild(c),c.click(),c.remove(),setTimeout((function(){URL.revokeObjectURL(o)}),1e4)}}function x(){return window.matchMedia("(display-mode: standalone)").matches}function j(t){var e=Math.hypot(t),n=[];if(e>0){var a,o=1/e,c=r(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;n.push(i*o)}}catch(t){c.e(t)}finally{c.f()}return n}return t}function A(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)}function I(t,e){var n=t.length;if(n<3)return t;t.sort((function(t,e){return t-e}));for(var r=0,a=0;a<n;a++)r+=t[a];for(var o=r/n,c=0,u=0;u<n;u++)c+=Math.pow(t[i]-o,2);standardDeviation=Math.sqrt(c/n);for(var l=[],f=0,s=0;s<n;s++)simplifiedArray.push(t[s]/standardDeviation),exponential=Math.exp(t[s]/standardDeviation),f+=exponential,l.push(exponential);for(var h=Math.pow(n,1.4),d={},v=0;v<n;v++){var p="k_".concat(Math.floor(l/f*h));d.hasOwnProperty(p)||(d[p]={sum:0,len:0}),d[p].sum+=t[v],d[p].len+=1}var y=[];for(var g in d){var b=d[g];y.push(Math.floor(b.sum/b.len))}return y}},8141:(t,e,n)=>{function r(t,e,n){var r=n.x-e.x,a=n.y-e.y,o=r*r+a*a,c=((t.x-e.x)*r+(t.y-e.y)*a)/o;if(c<0)r=t.x-e.x,a=t.y-e.y;else if(c>1)r=t.x-n.x,a=t.y-n.y;else{var i={x:e.x+c*r,y:e.y+c*a};r=t.x-i.x,a=t.y-i.y}return Math.sqrt(r*r+a*a)}function a(t,e){if(t.length<3)return t;for(var n=0,o=0,c=1;c<t.length-1;c++){var i=r(t[c],t[0],t[t.length-1]);i>n&&(o=c,n=i)}if(n>e){var u=t.slice(0,o+1),l=t.slice(o),f=a(u,e),s=a(l,e);return f.slice(0,f.length-1).concat(s)}return[t[0],t[t.length-1]]}function o(t,e){if(t.length<1)return"";for(var n="M".concat(t[0].x*e,",").concat(t[0].y*e),r=1;r<t.length-1;r++){var a=t[r],o=t[r+1]||a;n+="Q".concat(a.x*e,",").concat(a.y*e,",").concat((a.x*e+o.x*e)/2,",").concat((a.y*e+o.y*e)/2)}var c=t[t.length-1];return n+="L".concat(c.x*e,",").concat(c.y*e)}n.d(e,{p:()=>o,z:()=>a})},9469:(t,e,n)=>{n.d(e,{_:()=>c,i:()=>i});var r=n(8134),a=n(4690),o=n(3030);function c(){var t=new URL(location.href).searchParams.get("permalink");if(null!==t){var e=String(t);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(e)){var n=e.split(/[\@\~]/);switch(parseInt(n[0])){case 0:(0,r.Rk)(parseInt(n[1],16)).then((function(t){t.length>0?(0,a.SR)(t[0].id,t[0].pid):(0,r.k9)(n[2]).then((function(t){t.length>0&&(0,a.SR)(t[0].id,t[0].pid)}))}));break;case 1:var c=n[1];(0,o.so)(c)}}}}function i(t,e){var n=new URL("https://erichsia7.github.io/bus/");switch(t){case 0:n.searchParams.set("permalink","0@".concat(parseInt(e.id).toString(16),"~").concat(e.name));break;case 1:n.searchParams.set("permalink","1@".concat(e.hash))}return decodeURIComponent(n.toString())}},841:(t,e,n)=>{function r(t,e,n,r){var a=n*Math.PI/180-t*Math.PI/180,o=r*Math.PI/180-e*Math.PI/180,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))))}n.d(e,{b:()=>r})},3648:(t,e,n)=>{function r(t){return document.querySelector(t)}function a(t){return document.querySelectorAll(t)}function o(t,e){return t.querySelector(e)}function c(t,e){return t.querySelectorAll(e)}n.d(e,{aI:()=>o,bv:()=>r,e0:()=>a,jg:()=>c})},5579:(t,e,n)=>{function r(){var t=new Date,e=t.getDay(),n=t.getDate()-e,r=new Date;return r.setDate(n),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),r}function a(t,e,n,r){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(n),a.setMinutes(r),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(t.getFullYear()),a.setMonth(t.getMonth()),a.setDate(t.getDate()),a.setDate(a.getDate()+e),a}function o(t){var e=t.match(/[0-9\.]*/gm);if(e){var n=parseInt(e[0]),r=parseInt(e[2]),a=parseInt(e[4]),o=parseInt(e[6]),c=parseInt(e[8]),i=parseInt(e[10]),u=new Date;return u.setDate(1),u.setMonth(0),u.setFullYear(n),u.setMonth(r-1),u.setDate(a),u.setHours(o),u.setMinutes(c),u.setSeconds(i),u.getTime()}return 0}function c(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,t.getFullYear()).replaceAll(/M{2,2}/g,String(t.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(t.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(t.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(t.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(t.getSeconds()).padStart(2,"0"))}function i(t){var e=t.getTime(),n=Math.floor(((new Date).getTime()-e)/1e3),r=Math.floor(n/31536e3);return r>=1?"".concat(r,"年前"):(r=Math.floor(n/2592e3))>=1?"".concat(r,"個月前"):(r=Math.floor(n/86400))>=1?"".concat(r,"天前"):(r=Math.floor(n/3600))>=1?"".concat(r,"小時前"):(r=Math.floor(n/60))>=1?"".concat(r,"分鐘前"):"".concat(n,"秒前")}function u(t,e){switch(t=Math.round(t),e){case 0:return"".concat(t,"秒");case 1:return[n=String((t-t%60)/60),String(t%60)].map((function(t){return t.padStart(2,"0")})).join(":");case 2:var n=String(Math.floor(t/60));return"".concat(n,"分");case 3:if(t>=3600){var r=String(parseFloat((t/3600).toFixed(1)));return"".concat(r,"時")}if(60<=t&&t<3600){n=String(Math.floor(t/60));return"".concat(n,"分")}if(t<60)return"".concat(t,"秒");break;default:return"--"}}function l(t){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][t]}function f(t){return l(parseInt(t)-1)}function s(t){return"".concat(String(t.hours).padStart(2,"0"),":").concat(String(t.minutes).padStart(2,"0"))}n.d(e,{$T:()=>c,HN:()=>i,P$:()=>r,S1:()=>a,Zn:()=>o,fU:()=>u,kd:()=>l,mr:()=>f,pn:()=>s})}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t](o,o.exports,r),o.loaded=!0,o.exports}r.m=e,t=[],r.O=(e,n,a,o)=>{if(!n){var c=1/0;for(f=0;f<t.length;f++){for(var[n,a,o]=t[f],i=!0,u=0;u<n.length;u++)(!1&o||c>=o)&&Object.keys(r.O).every((t=>r.O[t](n[u])))?n.splice(u--,1):(i=!1,o<c&&(c=o));if(i){t.splice(f--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var f=t.length;f>0&&t[f-1][2]>o;f--)t[f]=t[f-1];t[f]=[n,a,o]},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.u=t=>({132:"1b8b8854ae98108b421e",148:"6263d1cb68695d5439b0",152:"d3d70f08aba9045c7810",332:"d2e5e6feb1651ba6c722",648:"f523bd06cb542838f829",892:"31c74de07a7678303fe2"}[t]+".min.js"),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r.p="./",(()=>{r.b=document.baseURI||self.location.href;var t={687:0,827:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var a,o,[c,i,u]=n,l=0;if(c.some((e=>0!==t[e]))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(u)var f=u(r)}for(e&&e(n);l<c.length;l++)o=c[l],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(f)},n=self.webpackChunkbus=self.webpackChunkbus||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var a=r.O(void 0,[609,331,790,592,765,491,354,350,935,799,802,446,84,777,462,762,853,874,977,680,150,335,827,724,794,238,69,236,960,927],(()=>r(4381)));return a=(a=r.O(a)).default})()));
//# sourceMappingURL=7f60699ac970d9619f24.min.js.map