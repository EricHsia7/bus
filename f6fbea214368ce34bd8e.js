"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[638],{904(e,a,t){t.d(a,{a:()=>y,b:()=>C,c:()=>w,d:()=>k,e:()=>L,f:()=>g,g:()=>M,h:()=>S,i:()=>T});var n=t(8179),i=t(8024),c=t(4884),r=t(6052),s=t(9333),o=t(8379),u=t(5693),l=t(7891),d=t(7908),f=t(5009),b=t(6104),h=(0,n.c)(".g"),p=(0,n.c)(".l"),m=(new Date).getTime(),v=["Home"];function k(e){var a=v.length;v[a-1]!==e&&v.push(e)}function g(e){if(v.indexOf(e)>-1){var a=v.length;v[a-1]===e&&v.pop()}}function y(){var e=v.length;if(e>1)switch(v[e-2]){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,r.a)();break;case"FolderEditor":(0,s.a)();break;case"FolderManager":(0,o.a)();break;case"Search":(0,f.a)();break;case"Settings":(0,b.a)();break;case"PersonalScheduleManager":(0,l.a)();break;case"PersonalScheduleEditor":(0,u.a)();break;case"Bus":(0,c.b)();break;case"RegisterNotification":(0,d.a)()}}function w(){var e=v.length;if(e>1){var a=v[e-2];switch(v.pop(),a){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,r.c)();break;case"FolderEditor":(0,s.b)();break;case"FolderManager":(0,o.b)();break;case"Search":(0,f.c)();break;case"Settings":(0,b.d)();break;case"PersonalScheduleManager":(0,l.b)();break;case"PersonalScheduleEditor":(0,u.b)();break;case"Bus":(0,c.c)();break;case"RegisterNotification":(0,d.b)()}}}function S(){var e=0;(0,i.f)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.c)(".g svg.h").style.setProperty("--i",`${e}px`)}function C(e){function a(){h.classList.add("j"),h.addEventListener("animationend",function(){h.setAttribute("displayed","false"),h.classList.remove("j"),"function"==typeof e&&e()},{once:!0})}var t=(new Date).getTime();t-m<100?setTimeout(a,Math.max(1,t-m)):a()}function T(){p.setAttribute("displayed","true")}function L(e){var a=0,t=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":a=n,t=i;break;case"head":a=n,t=55;break;case"head-one-button":a=n-55,t=55;break;case"head-two-button":a=n-110,t=55;break;case"route-details-canvas":a=n-20-20,t=1680;break;case"route-bus-arrival-time-chart":a=n-45-15-20,t=75;break;case"location-bus-arrival-time-chart":a=n-30-20,t=75;break;default:a=0,t=0}return{width:a,height:t}}function M(){window.scrollTo({top:0,behavior:"instant"})}},4294(e,a,t){t.d(a,{a:()=>L,b:()=>T,c:()=>C});var n,i=t(467),c=t(9218),r=t(6788),s=t(3459),o=t(8179),u=t(8024),l=t(4781),d=t(4537),f=t(904),b=(0,o.c)(".xb"),h=(0,o.e)(b,".ac"),p=(0,o.e)(h,".bc"),m=[],v=[],k=!1,g=!1;function y(){var e=(0,o.a)();return e.classList.add("cc"),e.appendChild((0,d.a)()),e}function w(e,a,t,i){function c(e,c,r){function s(e,a){(0,d.c)(e,a)}function o(e,a,t){e.onclick=function(){!function(e,a){a.value=e,L()}(a,t)}}function l(e,a){e.setAttribute("skeleton-screen",(0,u.a)(a))}function f(e,a){e.setAttribute("animation",(0,u.a)(a))}null==r?(s(e,c),o(e,c,a),l(e,t),f(e,i)):(r!==c?(s(e,c),o(e,c,a)):n!==a&&o(e,c,a),g!==t&&l(e,t),k!==i&&f(e,i))}var r=e.length,s=Array.from((0,o.d)(p,".cc")),l=s.length;if(r!==l){var f=l-r;if(f<0){for(var b=new DocumentFragment,h=0;h>f;h--){var m=y();b.appendChild(m),s.push(m)}p.append(b)}else if(f>0)for(var w=l-1,S=l-f-1;w>S;w--)s[w].remove(),s.splice(w,1)}for(var C=0;C<r;C++){var T=v[C],M=e[C],x=s[C];T?c(x,M,T):updateItem(x,M,null)}v=e,n=a,g=t,k=i}function S(){return(S=(0,i.a)(function*(e){!function(e){for(var a=(0,s.b)("playing_animation"),t=(0,f.e)("window"),n=Math.floor(t.width/50)*(Math.floor(t.height/50)+3),i=[],c=0;c<n;c++)i.push("");w(i,e,!0,a)}(e);var a=(0,s.b)("playing_animation"),t=(0,u.c)(),n=yield(0,c.a)(t);w(n.symbols,e,!1,a),m=n.symbols,(0,r.a)(t)})).apply(this,arguments)}function C(e){if(!(0,l.a)(e)){for(var a=searchForMaterialSymbols(e),t=a.length-1;t>=0;t--){var i=a[t].item,c=m.indexOf(i);if(m[t]&&!(c<0)){var r=[m[c],m[t]];m[t]=r[0],m[c]=r[1]}}w(m,n,g,k)}}function T(e){(0,f.d)("IconSelector"),b.setAttribute("displayed","true"),function(e){S.apply(this,arguments)}(e)}function L(){(0,f.f)("IconSelector"),b.setAttribute("displayed","false")}},4537(e,a,t){t.d(a,{a:()=>c,b:()=>i,c:()=>r});var n=t(8179);function i(e){var a=document.createElement("span");return a.classList.add("r"),a.innerText=e,a}function c(){var e=document.createElement("span");return e.classList.add("r"),e}function r(e,a){(0,n.e)(e,"span.r").innerText=a}},4953(){},5259(){},5297(){},6091(e,a,t){t.d(a,{a:()=>I,b:()=>_});var n=t(467),i=t(5767),c=t(5314),r=t(3459),s=t(8179),o=t(8024),u=t(4884),l=t(4537),d=t(904),f=t(3030),b=t(4690),h=(0,s.c)(".s"),p=(0,s.e)(h,".ia"),m=(0,s.e)(p,".ja"),v=(0,s.e)(m,".oa"),k={},g=!1,y=!1,w=15e3,S=5e3,C=!0,T=!1,L=0,M=0,x="",D=!1;function F(){var e=(0,s.a)();e.classList.add("wa");var a=(0,s.a)();a.classList.add("ya");var t=(0,s.a)();t.classList.add("za"),t.appendChild((0,l.a)());var n=(0,s.a)();n.classList.add("_a");var i=(0,s.a)();i.classList.add("ab"),a.appendChild(t),a.appendChild(n),a.appendChild(i);var c=(0,s.a)();return c.classList.add("bb"),e.appendChild(a),e.appendChild(c),e}function A(e,a,t){function n(e,n,i){function c(e,a){var t=(0,s.e)(e,".ya"),n=(0,s.e)(t,".za"),i="";switch(a.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,l.c)(n,i)}function r(e,a){var t=(0,s.e)(e,".ya"),n=(0,s.e)(t,"._a"),i="";switch(a.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function d(e,a){var t=(0,s.e)(e,".ya");(0,s.e)(t,".ab").innerText=a.time.relative}function h(e,a){(0,s.e)(e,".bb").innerText=a.name}function p(e,a){switch(a.type){case"route":e.onclick=function(){(0,b.c)(a.id,a.pid)};break;case"location":e.onclick=function(){(0,f.c)(a.hash)};break;case"bus":e.onclick=function(){(0,u.c)(a.id)};break;case"empty":e.onclick=null}}function m(e,a){e.setAttribute("animation",(0,o.a)(a))}function v(e,a){e.setAttribute("skeleton-screen",(0,o.a)(a))}if(null==i)c(e,n),r(e,n),d(e,n),h(e,n),p(e,n),m(e,t),v(e,a);else if(n.type!==i.type)c(e,n),r(e,n),d(e,n),h(e,n),p(e,n),m(e,t),v(e,a);else{switch(n.type){case"location":(0,o.b)(i.name,n.name)||h(e,n),i.time!==n.time&&d(e,n),(0,o.b)(i.hash,n.hash)||p(e,n);break;case"route":i.name!==n.name&&h(e,n),i.time!==n.time&&d(e,n),i.id===n.id&&(0,o.b)(i.pid,n.pid)||p(e,n);break;case"bus":i.name!==n.name&&h(e,n),i.time!==n.time&&d(e,n),i.id!==n.id&&p(e,n);break;case"empty":i.time!==n.time&&d(e,n)}g!==t&&m(e,t),y!==a&&v(e,a)}}var i=e.itemQuantity,c=Array.from((0,s.d)(v,".wa")),r=c.length;if(i!==r){var d=r-i;if(d<0){for(var h=new DocumentFragment,p=0;p>d;p--){var m=F();h.appendChild(m),c.push(m)}v.append(h)}else if(d>0)for(var w=r-1,S=r-d-1;w>S;w--)c[w].remove(),c.splice(w,1)}for(var C=0;C<i;C++){var T=c[C],L=e.items[C];if((0,o.e)(k,"items"))if(k.items[C])n(T,L,k.items[C]);else n(T,L,null);else n(T,L,null)}k=e,g=t,y=a}function _(){for(var e=(0,r.b)("playing_animation"),a=(0,d.e)("window"),t=Math.floor(a.height/70/3)+2,n=[],i=0;i<t;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});A({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function R(){return E.apply(this,arguments)}function E(){return(E=(0,n.a)(function*(){var e=(0,r.b)("playing_animation"),a=(0,r.b)("refresh_interval");C=a.dynamic,w=a.baseInterval,x=(0,o.c)();var t=yield(0,c.c)(x);A(t,!1,e);var n=0;C&&(n=yield(0,i.c)()),L=(new Date).getTime(),M=C?Math.max(L+S,t.dataUpdateTime+w/n):L+w,Math.max(S,M-L)})).apply(this,arguments)}function P(){return H.apply(this,arguments)}function H(){return(H=(0,n.a)(function*(){R().then(function(){T?setTimeout(function(){P()},Math.max(S,M-(new Date).getTime())):D=!1}).catch(function(e){T?setTimeout(function(){P()},1e4):D=!1})})).apply(this,arguments)}function I(){_(),T||(T=!0,D?R():(D=!0,P()))}},6561(){},6764(){},7114(){},7336(){},7499(){}}]);
//# sourceMappingURL=f6fbea214368ce34bd8e.js.map