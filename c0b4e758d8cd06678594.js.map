{"version":3,"file":"c0b4e758d8cd06678594.js","mappings":"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","sources":["webpack://bus/./src/interface/home/folders/index.ts","webpack://bus/./src/interface/index.ts","webpack://bus/./src/interface/icon-selector/index.ts","webpack://bus/./src/interface/icons/index.ts","webpack://bus/./src/interface/home/index.ts","webpack://bus/./src/interface/home/recent-views/index.ts"],"sourcesContent":["import { getUpdateRate } from '../../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../../data/apis/loader';\nimport { Folder, integratedFolder, integratedFolderContent, integratedFolders, integrateFolders } from '../../../data/folder/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings, generateIdentifier, hasOwnProperty } from '../../../tools/index';\nimport { Tick } from '../../../tools/tick';\nimport { getBlankIconElement, getIconElement, setIcon } from '../../icons/index';\nimport { MaterialSymbols } from '../../icons/material-symbols-type';\nimport { querySize } from '../../index';\nimport { openLocation } from '../../location/index';\nimport { promptMessage } from '../../prompt/index';\nimport { openRoute } from '../../route/index';\n\nconst HomeField = documentQuerySelector('.css_home_field');\nconst HomeHeadElement = elementQuerySelector(HomeField, '.css_home_head');\nconst HomeBodyElement = elementQuerySelector(HomeField, '.css_home_body');\nconst HomeFoldersElement = elementQuerySelector(HomeBodyElement, '.css_home_folders');\nconst HomeUpdateTimerElement = elementQuerySelector(HomeHeadElement, '.css_home_update_timer_box .css_home_update_timer');\n\nlet previousIntegration = {} as integratedFolders;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst foldersTick = new Tick(refreshFolders, 15 * 1000);\n\nfunction generateElementOfItem(): HTMLElement {\n  // Main container\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_home_folder_item');\n  itemElement.setAttribute('type', 'stop');\n\n  // Icon\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_home_folder_item_icon');\n  iconElement.appendChild(getIconElement('location_on'));\n\n  // Context\n  const contextElement = documentCreateDivElement();\n  contextElement.classList.add('css_home_folder_item_context');\n\n  // Main\n  const mainElement = documentCreateDivElement();\n  mainElement.classList.add('css_home_folder_item_main');\n\n  // Capsule\n  const capsuleElement = documentCreateDivElement();\n  capsuleElement.classList.add('css_home_folder_item_capsule');\n\n  // Status\n  const statusElement = documentCreateDivElement();\n  statusElement.classList.add('css_home_folder_item_status');\n\n  const nextSlideElement = documentCreateDivElement();\n  nextSlideElement.classList.add('css_next_slide');\n  nextSlideElement.setAttribute('code', '0');\n  nextSlideElement.setAttribute('displayed', 'false');\n\n  const currentSlideElement = documentCreateDivElement();\n  currentSlideElement.classList.add('css_current_slide');\n  currentSlideElement.setAttribute('code', '0');\n  currentSlideElement.setAttribute('displayed', 'true');\n\n  statusElement.appendChild(nextSlideElement);\n  statusElement.appendChild(currentSlideElement);\n\n  // Button\n  const buttonElement = documentCreateDivElement();\n  buttonElement.classList.add('css_home_folder_item_button');\n  buttonElement.appendChild(getIconElement('keyboard_arrow_right'));\n\n  // Capsule separator\n  const capsuleSeparatorElement = documentCreateDivElement();\n  capsuleSeparatorElement.classList.add('css_home_folder_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(statusElement);\n  capsuleElement.appendChild(buttonElement);\n  capsuleElement.appendChild(capsuleSeparatorElement);\n\n  // Assemble item\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(contextElement);\n  itemElement.appendChild(mainElement);\n  itemElement.appendChild(capsuleElement);\n\n  return itemElement;\n}\n\nfunction generateElementOfFolder(): HTMLElement {\n  // Main container\n  const folderElement = documentCreateDivElement();\n  folderElement.classList.add('css_home_folder');\n\n  // Head\n  const headElement = documentCreateDivElement();\n  headElement.classList.add('css_home_folder_head');\n\n  // Icon\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_home_folder_icon');\n  iconElement.appendChild(getBlankIconElement());\n\n  // Name\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_home_folder_name');\n\n  // Assemble head\n  headElement.appendChild(iconElement);\n  headElement.appendChild(nameElement);\n\n  // Content\n  const contentElement = documentCreateDivElement();\n  contentElement.classList.add('css_home_folder_content');\n\n  // Assemble folder\n  folderElement.appendChild(headElement);\n  folderElement.appendChild(contentElement);\n\n  return folderElement;\n}\n\nfunction animateUpdateTimer(interval: number): void {\n  HomeUpdateTimerElement.style.setProperty('--b-cssvar-home-update-timer-interval', `${interval}ms`);\n  HomeUpdateTimerElement.classList.add('css_home_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  const offsetRatio = CustomEvent.detail.progress - 1;\n  HomeUpdateTimerElement.style.setProperty('--b-cssvar-home-update-timer-offset-ratio', offsetRatio.toString());\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nexport function setupFolderFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const contentLength = Math.floor(FieldHeight / 50 / 3) + 2;\n  const folderQuantity = 3;\n\n  const folders: integratedFolders['folders'] = [];\n  for (let i = 0; i < folderQuantity; i++) {\n    const folder: integratedFolder = {\n      name: '',\n      icon: '',\n      id: '',\n      timestamp: 0,\n      content: [],\n      contentLength: contentLength\n    };\n\n    for (let j = 0; j < contentLength; j++) {\n      const folderContent: integratedFolderContent = {\n        type: 'stop',\n        id: 0,\n        timestamp: 0,\n        name: '',\n        status: {\n          code: 8,\n          text: '',\n          time: -6\n        },\n        direction: 0,\n        route: {\n          name: '',\n          endPoints: {\n            departure: '',\n            destination: ''\n          },\n          id: 0,\n          pathAttributeId: []\n        }\n      };\n      folder.content.push(folderContent);\n    }\n    folders.push(folder);\n  }\n\n  updateFoldersElement(\n    {\n      folders: folders,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateFoldersElement(integration: integratedFolders, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: integratedFolderContent, previousItem: integratedFolderContent | null) {\n    function updateType(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      thisElement.setAttribute('type', thisItem.type);\n    }\n\n    function updateIcon(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_home_folder_item_icon');\n      let icon = '' as MaterialSymbols;\n      switch (thisItem.type) {\n        case 'stop':\n          icon = 'location_on';\n          break;\n        case 'route':\n          icon = 'route';\n          break;\n        case 'location':\n          icon = 'location_on';\n          break;\n        case 'bus':\n          icon = 'directions_bus';\n          break;\n        case 'empty':\n          icon = 'lightbulb';\n          break;\n        default:\n          icon = '';\n          break;\n      }\n      setIcon(thisIconElement, icon);\n    }\n\n    function updateStatus(thisElement: HTMLElement, thisItem: integratedFolderContent, animation: boolean): void {\n      if (thisItem.type === 'stop') {\n        const thisElementRect = thisElement.getBoundingClientRect();\n        const top = thisElementRect.top;\n        const left = thisElementRect.left;\n        const bottom = thisElementRect.bottom;\n        const right = thisElementRect.right;\n        const windowWidth = window.innerWidth;\n        const windowHeight = window.innerHeight;\n\n        const thisItemStatusElement = elementQuerySelector(thisElement, '.css_home_folder_item_capsule .css_home_folder_item_status');\n        const nextSlideElement = elementQuerySelector(thisItemStatusElement, '.css_next_slide');\n        const currentSlideElement = elementQuerySelector(thisItemStatusElement, '.css_current_slide');\n\n        nextSlideElement.setAttribute('code', thisItem.status.code.toString());\n        nextSlideElement.innerText = thisItem.status.text;\n\n        if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n          currentSlideElement.addEventListener(\n            'animationend',\n            function () {\n              currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n              currentSlideElement.innerText = thisItem.status.text;\n              currentSlideElement.classList.remove('css_slide_fade_out');\n              nextSlideElement.setAttribute('displayed', 'false');\n            },\n            { once: true }\n          );\n          nextSlideElement.setAttribute('displayed', 'true');\n          currentSlideElement.classList.add('css_slide_fade_out');\n        } else {\n          currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n          currentSlideElement.innerText = thisItem.status.text;\n        }\n      }\n    }\n\n    function updateMain(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      let main: string = '';\n      switch (thisItem.type) {\n        case 'stop':\n          main = thisItem.name;\n          break;\n        case 'route':\n          main = thisItem.name;\n          break;\n        case 'location':\n          main = thisItem.name;\n          break;\n        case 'bus':\n          main = thisItem.busID;\n          break;\n        case 'empty':\n          main = '沒有內容';\n          break;\n        default:\n          main = 'null';\n          break;\n      }\n      elementQuerySelector(thisElement, '.css_home_folder_item_main').innerText = main;\n    }\n\n    function updateContext(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      let context: string = '';\n      switch (thisItem.type) {\n        case 'stop':\n          context = `${thisItem.route ? thisItem.route.name : ''} - 往${thisItem.route ? [thisItem.route.endPoints.destination, thisItem.route.endPoints.departure, ''][thisItem.direction ? thisItem.direction : 0] : ''}`;\n          break;\n        case 'route':\n          context = `${thisItem.endPoints.departure} \\u2194 ${thisItem.endPoints.destination}`;\n          break;\n        case 'location':\n          context = '地點';\n          break;\n        case 'bus':\n          // context = thisItem.currentRoute.name; // TODO: integration\n          break;\n        case 'empty':\n          context = '提示';\n          break;\n        default:\n          context = 'null';\n          break;\n      }\n      elementQuerySelector(thisElement, '.css_home_folder_item_context').innerText = context;\n    }\n\n    function updateButton(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      const buttonElement = elementQuerySelector(thisElement, '.css_home_folder_item_capsule .css_home_folder_item_button');\n      switch (thisItem.type) {\n        case 'stop':\n          buttonElement.onclick = function () {\n            openRoute(thisItem.route.id, thisItem.route.pathAttributeId);\n          };\n          break;\n        case 'route':\n          buttonElement.onclick = function () {\n            openRoute(thisItem.id, thisItem.pathAttributeId);\n          };\n          break;\n        case 'location':\n          buttonElement.onclick = function () {\n            openLocation(thisItem.id);\n          };\n          break;\n        case 'bus':\n          break;\n        case 'empty':\n          break;\n        default:\n          break;\n      }\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateType(thisElement, thisItem);\n      updateIcon(thisElement, thisItem);\n      updateStatus(thisElement, thisItem, animation);\n      updateMain(thisElement, thisItem);\n      updateContext(thisElement, thisItem);\n      updateButton(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (thisItem.type !== previousItem.type) {\n        updateType(thisElement, thisItem);\n        updateIcon(thisElement, thisItem);\n        updateStatus(thisElement, thisItem, animation);\n        updateMain(thisElement, thisItem);\n        updateContext(thisElement, thisItem);\n        updateButton(thisElement, thisItem);\n        updateAnimation(thisElement, animation);\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      } else {\n        switch (thisItem.type) {\n          case 'stop':\n            if (!compareThings(previousItem.route, thisItem.route)) {\n              updateContext(thisElement, thisItem);\n              updateButton(thisElement, thisItem);\n            }\n            if (previousItem.name !== thisItem.name) {\n              updateMain(thisElement, thisItem);\n            }\n            if (previousItem.status.time !== thisItem.status.time) {\n              updateStatus(thisElement, thisItem, animation);\n            }\n            break;\n          case 'route':\n            if (previousItem.id !== thisItem.id) {\n              updateButton(thisElement, thisItem);\n            }\n            if (!compareThings(previousItem.endPoints, thisItem.endPoints)) {\n              updateContext(thisElement, thisItem);\n            }\n            if (previousItem.name !== thisItem.name) {\n              updateMain(thisElement, thisItem);\n            }\n            break;\n          case 'location':\n            if (previousItem.id !== thisItem.id) {\n              updateButton(thisElement, thisItem);\n            }\n            if (previousItem.name !== thisItem.name) {\n              updateMain(thisElement, thisItem);\n            }\n            /*\n            if (!compareThings(previousItem.labels, thisItem.labels)) {\n              updateContext(thisElement, thisItem);\n            }\n            */\n            break;\n          case 'bus':\n            /*\n            if (!compareThings(previousItem.currentRoute, thisItem.currentRoute)) {\n              updateContext(thisElement, thisItem);\n            }\n            if (!compareThings(previousItem.busID, thisItem.busID)) {\n              updateMain(thisElement, thisItem);\n            }\n            */\n            break;\n          case 'empty':\n            if (thisItem.type !== previousItem.type) {\n              updateContext(thisElement, thisItem);\n              updateMain(thisElement, thisItem);\n            }\n            break;\n          default:\n            break;\n        }\n        if (skeletonScreen !== previousSkeletonScreen) {\n          updateSkeletonScreen(thisElement, skeletonScreen);\n        }\n        if (animation !== previousAnimation) {\n          updateAnimation(thisElement, animation);\n        }\n      }\n    }\n  }\n\n  function updateFolder(thisElement: HTMLElement, thisFolder: Folder, previousFolder: Folder | null): void {\n    function updateName(thisElement: HTMLElement, thisFolder: Folder): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_folder_head');\n      const thisNameElement = elementQuerySelector(thisHeadElement, '.css_home_folder_name');\n      thisNameElement.innerText = thisFolder.name;\n    }\n\n    function updateIcon(thisElement: HTMLElement, thisFolder: Folder): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_folder_head');\n      const thisIconElement = elementQuerySelector(thisHeadElement, '.css_home_folder_icon');\n      setIcon(thisIconElement, thisFolder.icon);\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousFolder === null || previousFolder === undefined) {\n      updateName(thisElement, thisFolder);\n      updateIcon(thisElement, thisFolder);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (thisFolder.name !== previousFolder.name) {\n        updateName(thisElement, thisFolder);\n      }\n      if (thisFolder.icon !== previousFolder.icon) {\n        updateIcon(thisElement, thisFolder);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const folders = integration.folders;\n  const foldersLength = folders.length;\n\n  const folderElements = Array.from(elementQuerySelectorAll(HomeFoldersElement, '.css_home_folder'));\n  const currentFolderElementsLength = folderElements.length;\n  if (foldersLength !== currentFolderElementsLength) {\n    const difference = currentFolderElementsLength - foldersLength;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newFolderElement = generateElementOfFolder();\n        fragment.appendChild(newFolderElement);\n        folderElements.push(newFolderElement);\n      }\n      HomeFoldersElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentFolderElementsLength - 1, q = currentFolderElementsLength - difference - 1; p > q; p--) {\n        folderElements[p].remove();\n        folderElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < foldersLength; i++) {\n    const thisFolder = folders[i];\n    const thisFolderContent = thisFolder.content;\n    const thisFolderContentLength = thisFolderContent.length;\n\n    const thisFolderElement = folderElements[i];\n    const thisFolderContentElement = elementQuerySelector(thisFolderElement, '.css_home_folder_content');\n    const thisFolderContentItemElements = Array.from(elementQuerySelectorAll(thisFolderContentElement, '.css_home_folder_item'));\n\n    const currentFolderContentItemElementsLength = thisFolderContentItemElements.length;\n    if (thisFolderContentLength !== currentFolderContentItemElementsLength) {\n      const difference = currentFolderContentItemElementsLength - thisFolderContentLength;\n      if (difference < 0) {\n        for (let o = 0; o > difference; o--) {\n          const newItemElement = generateElementOfItem();\n          thisFolderContentElement.appendChild(newItemElement);\n          thisFolderContentItemElements.push(newItemElement);\n        }\n      } else if (difference > 0) {\n        for (let p = currentFolderContentItemElementsLength - 1, q = currentFolderContentItemElementsLength - difference - 1; p > q; p--) {\n          thisFolderContentItemElements[p].remove();\n          thisFolderContentItemElements.splice(p, 1);\n        }\n      }\n    }\n\n    if (hasOwnProperty(previousIntegration, 'folders')) {\n      if (previousIntegration.folders[i]) {\n        const previousFolder = previousIntegration.folders[i];\n        updateFolder(thisFolderElement, thisFolder, previousFolder);\n      } else {\n        updateFolder(thisFolderElement, thisFolder, null);\n      }\n    } else {\n      updateFolder(thisFolderElement, thisFolder, null);\n    }\n\n    for (let j = 0; j < thisFolderContentLength; j++) {\n      const thisElement = thisFolderContentItemElements[j];\n      const thisItem = thisFolderContent[j];\n      if (hasOwnProperty(previousIntegration, 'folders')) {\n        if (previousIntegration.folders[i]) {\n          if (previousIntegration.folders[i].content[j]) {\n            const previousItem = previousIntegration.folders[i].content[j];\n            updateItem(thisElement, thisItem, previousItem);\n          } else {\n            updateItem(thisElement, thisItem, null);\n          }\n        } else {\n          updateItem(thisElement, thisItem, null);\n        }\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nasync function refreshFolders(): Promise<number> {\n  try {\n    const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n    const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n    const requestID = generateIdentifier();\n    HomeUpdateTimerElement.setAttribute('refreshing', 'true');\n    HomeUpdateTimerElement.classList.remove('css_home_update_timer_slide_rtl');\n    document.addEventListener(requestID, handleDataReceivingProgressUpdates);\n    const integration = await integrateFolders(requestID);\n    updateFoldersElement(integration, false, playing_animation);\n    let updateRate = 0;\n    if (refresh_interval_setting.dynamic) {\n      updateRate = await getUpdateRate();\n    }\n    const lastUpdate = new Date().getTime();\n    let nextUpdate = 0;\n    if (refresh_interval_setting.dynamic) {\n      nextUpdate = Math.max(lastUpdate + 5000, integration.dataUpdateTime + refresh_interval_setting.baseInterval / updateRate);\n    } else {\n      nextUpdate = lastUpdate + refresh_interval_setting.baseInterval;\n    }\n    const interval = Math.max(5000, nextUpdate - lastUpdate);\n    HomeUpdateTimerElement.setAttribute('refreshing', 'false');\n    animateUpdateTimer(interval);\n    return interval;\n  } catch (err) {\n    const interval = 10 * 1000;\n    promptMessage('error', `資料夾發生錯誤，將在${interval / 1000}秒後重試。`);\n    animateUpdateTimer(interval);\n    return interval;\n  }\n}\n\nexport function initializeFolders(): void {\n  // setupFolderFieldSkeletonScreen();\n  if (foldersTick.isPaused) {\n    foldersTick.resume(true);\n  } else {\n    foldersTick.tick();\n  }\n}\n","import { documentQuerySelector } from '../tools/elements';\nimport { isRunningStandalone } from '../tools/index';\nimport { hideBus, showBus } from './bus/index';\nimport { hideDataUsage, showDataUsage } from './data-usage/index';\nimport { hideFolderCreator, showFolderCreator } from './folder-creator/index';\nimport { hideFolderEditor, showFolderEditor } from './folder-editor/index';\nimport { hideFolderManager, showFolderManager } from './folder-manager/index';\nimport { hideHome, showHome } from './home/index';\nimport { hideIconSelector, showIconSelector } from './icon-selector/index';\nimport { hideLocationDetails, showLocationDetails } from './location/details/index';\nimport { hideLocation, showLocation } from './location/index';\nimport { hideNotificationScheduleManager, showNotificationScheduleManager } from './notification-schedule-manager/index';\nimport { hidePersonalScheduleCreator, showPersonalScheduleCreator } from './personal-schedule-creator/index';\nimport { hidePersonalScheduleEditor, showPersonalScheduleEditor } from './personal-schedule-editor/index';\nimport { hidePersonalScheduleManager, showPersonalScheduleManager } from './personal-schedule-manager/index';\nimport { hideQRCode, showQRCode } from './qrcode/index';\nimport { hideRegisterNotification, showRegisterNotification } from './register-notification/index';\nimport { hideRouteDetails, showRouteDetails } from './route/details/index';\nimport { hideRoute, showRoute } from './route/index';\nimport { hideSaveToFolder, showSaveToFolder } from './save-to-folder/index';\nimport { hideScheduleNotification, showScheduleNotification } from './schedule-notification/index';\nimport { hideSearch, showSearch } from './search/index';\nimport { hideSettings, shwoSettings } from './settings/index';\nimport { hideSettingsOptions, showSettingsOptions } from './settings/options';\nimport { hideStorage, showStorage } from './storage/index';\n\nconst SplashScreenElement = documentQuerySelector('.css_splash_screen');\nconst ErrorMessageElement = documentQuerySelector('.css_error_message');\n\nconst splashScreenTimer_minimalTimeOut = 100;\nconst splashScreenTimer_openTime = new Date().getTime();\n\ntype Page = 'Home' | 'FolderCreator' | 'FolderEditor' | 'IconSelector' | 'FolderManager' | 'LocationDetails' | 'Location' | 'RouteDetails' | 'Route' | 'SaveToFolder' | 'Search' | 'Settings' | 'SettingsOptions' | 'DataUsage' | 'PersonalScheduleManager' | 'PersonalScheduleCreator' | 'PersonalScheduleEditor' | 'Bus' | 'RegisterNotification' | 'ScheduleNotification' | 'NotificationScheduleManager' | 'QRCode' | 'Storage';\n\nlet pageHistory: Array<Page> = ['Home'];\n\nexport function pushPageHistory(page: Page): void {\n  const pageHistoryLength = pageHistory.length;\n  const lastPage = pageHistory[pageHistoryLength - 1];\n  if (lastPage !== page) {\n    pageHistory.push(page);\n  }\n}\n\nexport function revokePageHistory(page: Page): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    if (pageHistory[pageHistoryLength - 1] === page) {\n      pageHistory.pop();\n    }\n  }\n}\n\nexport function hidePreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    switch (previousPage) {\n      case 'Home':\n        hideHome();\n        break;\n      case 'FolderCreator':\n        hideFolderCreator();\n        break;\n      case 'FolderEditor':\n        hideFolderEditor();\n        break;\n      case 'IconSelector':\n        hideIconSelector();\n        break;\n      case 'FolderManager':\n        hideFolderManager();\n        break;\n      case 'Location':\n        hideLocation();\n        break;\n      case 'LocationDetails':\n        hideLocationDetails();\n        break;\n      case 'Route':\n        hideRoute();\n        break;\n      case 'RouteDetails':\n        hideRouteDetails();\n        break;\n      case 'SaveToFolder':\n        hideSaveToFolder();\n        break;\n      case 'Search':\n        hideSearch();\n        break;\n      case 'Settings':\n        hideSettings();\n        break;\n      case 'SettingsOptions':\n        hideSettingsOptions();\n        break;\n      case 'DataUsage':\n        hideDataUsage();\n        break;\n      case 'PersonalScheduleManager':\n        hidePersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        hidePersonalScheduleCreator();\n        break;\n      case 'PersonalScheduleEditor':\n        hidePersonalScheduleEditor();\n        break;\n      case 'Bus':\n        hideBus();\n        break;\n      case 'RegisterNotification':\n        hideRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        hideScheduleNotification();\n        break;\n      case 'NotificationScheduleManager':\n        hideNotificationScheduleManager();\n        break;\n      case 'QRCode':\n        hideQRCode();\n        break;\n      case 'Storage':\n        hideStorage();\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function showPreviousPage(): void {\n  const pageHistoryLength = pageHistory.length;\n  if (pageHistoryLength > 1) {\n    const previousPage = pageHistory[pageHistoryLength - 2];\n    switch (previousPage) {\n      case 'Home':\n        showHome();\n        break;\n      case 'FolderCreator':\n        showFolderCreator();\n        break;\n      case 'FolderEditor':\n        showFolderEditor();\n        break;\n      case 'IconSelector':\n        showIconSelector();\n        break;\n      case 'FolderManager':\n        showFolderManager();\n        break;\n      case 'Location':\n        showLocation();\n        break;\n      case 'LocationDetails':\n        showLocationDetails();\n        break;\n      case 'Route':\n        showRoute();\n        break;\n      case 'RouteDetails':\n        showRouteDetails();\n        break;\n      case 'SaveToFolder':\n        showSaveToFolder();\n        break;\n      case 'Search':\n        showSearch();\n        break;\n      case 'Settings':\n        shwoSettings();\n        break;\n      case 'SettingsOptions':\n        showSettingsOptions();\n        break;\n      case 'DataUsage':\n        showDataUsage();\n        break;\n      case 'PersonalScheduleManager':\n        showPersonalScheduleManager();\n        break;\n      case 'PersonalScheduleCreator':\n        showPersonalScheduleCreator();\n        break;\n      case 'PersonalScheduleEditor':\n        showPersonalScheduleEditor();\n        break;\n      case 'Bus':\n        showBus();\n        break;\n      case 'RegisterNotification':\n        showRegisterNotification();\n        break;\n      case 'ScheduleNotification':\n        showScheduleNotification();\n        break;\n      case 'NotificationScheduleManager':\n        showNotificationScheduleManager();\n        break;\n      case 'QRCode':\n        showQRCode();\n        break;\n      case 'Storage':\n        showStorage();\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport function setSplashScreenIconOffsetY(): void {\n  let offset = 0;\n  if (isRunningStandalone()) {\n    offset = (-1 * (window.outerHeight - window.innerHeight)) / 2;\n  }\n  documentQuerySelector('.css_splash_screen svg.css_splash_screen_icon').style.setProperty('--b-cssvar-splash-screen-icon-offset-y', `${offset}px`);\n}\n\nexport function fadeOutSplashScreen(callback: Function): void {\n  function fadeOut() {\n    SplashScreenElement.classList.add('css_splash_screen_fade_out');\n    SplashScreenElement.addEventListener(\n      'animationend',\n      function () {\n        SplashScreenElement.setAttribute('displayed', 'false');\n        SplashScreenElement.classList.remove('css_splash_screen_fade_out');\n        if (typeof callback === 'function') {\n          callback();\n        }\n      },\n      { once: true }\n    );\n  }\n  const cureentTime = new Date().getTime();\n  if (cureentTime - splashScreenTimer_openTime < splashScreenTimer_minimalTimeOut) {\n    setTimeout(fadeOut, Math.max(1, cureentTime - splashScreenTimer_openTime));\n  } else {\n    fadeOut();\n  }\n}\n\nexport function showErrorMessage(): void {\n  ErrorMessageElement.setAttribute('displayed', 'true');\n}\n\nexport type GroupStyles = {\n  [groupKey: string]: {\n    width: number;\n    offset: number;\n  };\n};\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\ntype SizeType = 'window' | 'head' | 'head-one-button' | 'head-two-button' | 'route-details-canvas' | 'route-bus-arrival-time-chart' | 'location-bus-arrival-time-chart';\n\nexport function querySize(type: SizeType): Size {\n  let width: number = 0;\n  let height: number = 0;\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n  switch (type) {\n    case 'window':\n      width = windowWidth;\n      height = windowHeight;\n      break;\n    case 'head':\n      width = windowWidth;\n      height = 55;\n      break;\n    case 'head-one-button':\n      width = windowWidth - 55;\n      height = 55;\n      break;\n    case 'head-two-button':\n      width = windowWidth - 55 * 2;\n      height = 55;\n      break;\n    case 'route-details-canvas':\n      width = windowWidth - 10 * 2 - 10 * 2;\n      height = 24 * 70;\n      break;\n    case 'route-bus-arrival-time-chart':\n      width = windowWidth - 45 - 15 - 20;\n      height = 75;\n      break;\n    case 'location-bus-arrival-time-chart':\n      width = windowWidth - 30 - 20;\n      height = 75;\n      break;\n    default:\n      width = 0;\n      height = 0;\n      break;\n  }\n  return {\n    width,\n    height\n  };\n}\n\nexport function scrollDocumentToTop(): void {\n  window.scrollTo({\n    top: 0,\n    behavior: 'instant'\n  });\n}\n","import { getMaterialSymbolsSearchIndex } from '../../data/apis/getMaterialSymbolsSearchIndex/index';\nimport { deleteDataReceivingProgress } from '../../data/apis/loader';\nimport { prepareForMaterialSymbolsSearch, searchForMaterialSymbols } from '../../data/search/searchMaterialSymbols';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../tools/index';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { getBlankIconElement, setIcon } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { hidePreviousPage, pushPageHistory, querySize, revokePageHistory, showPreviousPage } from '../index';\n\nconst iconSelectorField = documentQuerySelector('.css_icon_selector_field');\nconst headElement = elementQuerySelector(iconSelectorField, '.css_icon_selector_head');\nconst searchInputElement = elementQuerySelector(headElement, '#search_material_symbols_input') as HTMLInputElement;\nconst bodyElement = elementQuerySelector(iconSelectorField, '.css_icon_selector_body');\nconst symbolsElement = elementQuerySelector(bodyElement, '.css_icon_selector_material_symbols');\n\nlet currentSymbols: Array<MaterialSymbols> = [];\n\nlet previousSymbols: Array<MaterialSymbols> = [];\nlet previousAnimation: boolean = false;\nlet previosuSkeletonScreen: boolean = false;\nlet previousInputElement;\n\nfunction generateElementOfSymbol(): HTMLElement {\n  const element = documentCreateDivElement();\n  element.classList.add('css_icon_selector_material_symbols_symbol');\n  element.appendChild(getBlankIconElement());\n  return element;\n}\n\nfunction updateIconSelectorField(symbols: Array<MaterialSymbols>, inputElement: HTMLInputElement, skeletonScreen: boolean, animation: boolean): void {\n  function updateSymbol(thisSymbolElement: HTMLElement, thisSymbol: MaterialSymbols, previousSymbol: MaterialSymbols | null): void {\n    function updateIcon(thisSymbolElement: HTMLElement, thisSymbol: MaterialSymbols): void {\n      setIcon(thisSymbolElement, thisSymbol);\n    }\n\n    function updateOnclick(thisSymbolElement: HTMLElement, thisSymbol: MaterialSymbols, inputElement: HTMLInputElement): void {\n      thisSymbolElement.onclick = function () {\n        selectIcon(thisSymbol, inputElement);\n      };\n    }\n\n    function updateSkeletonScreen(thisSymbolElement: HTMLElement, skeletonScreen: boolean): void {\n      thisSymbolElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    function updateAnimation(thisSymbolElement: HTMLElement, animation: boolean): void {\n      thisSymbolElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    if (previousSymbol === null || previousSymbol === undefined) {\n      updateIcon(thisSymbolElement, thisSymbol);\n      updateOnclick(thisSymbolElement, thisSymbol, inputElement);\n      updateSkeletonScreen(thisSymbolElement, skeletonScreen);\n      updateAnimation(thisSymbolElement, animation);\n    } else {\n      if (previousSymbol !== thisSymbol) {\n        updateIcon(thisSymbolElement, thisSymbol);\n        updateOnclick(thisSymbolElement, thisSymbol, inputElement);\n      } else if (previousInputElement !== inputElement) {\n        updateOnclick(thisSymbolElement, thisSymbol, inputElement);\n      }\n\n      if (previosuSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisSymbolElement, skeletonScreen);\n      }\n\n      if (previousAnimation !== animation) {\n        updateAnimation(thisSymbolElement, animation);\n      }\n    }\n  }\n\n  const symbolsLength = symbols.length;\n  const symbolElements = Array.from(elementQuerySelectorAll(symbolsElement, '.css_icon_selector_material_symbols_symbol'));\n  const currentSymbolElementsLength = symbolElements.length;\n  if (symbolsLength !== currentSymbolElementsLength) {\n    const difference = currentSymbolElementsLength - symbolsLength;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newSymbolElement = generateElementOfSymbol();\n        fragment.appendChild(newSymbolElement);\n        symbolElements.push(newSymbolElement);\n      }\n      symbolsElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentSymbolElementsLength - 1, q = currentSymbolElementsLength - difference - 1; p > q; p--) {\n        symbolElements[p].remove();\n        symbolElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < symbolsLength; i++) {\n    const previousSymbol = previousSymbols[i];\n    const currentSymbol = symbols[i];\n    const thisSymbolElement = symbolElements[i];\n    if (previousSymbol) {\n      updateSymbol(thisSymbolElement, currentSymbol, previousSymbol);\n    } else {\n      updateSymbol(thisSymbolElement, currentSymbol, null);\n    }\n  }\n\n  previousSymbols = symbols.slice();\n  previousInputElement = inputElement;\n  previosuSkeletonScreen = skeletonScreen;\n  previousAnimation = animation;\n}\n\nfunction setupIconSelectorFieldSkeleton(inputElement: HTMLInputElement) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const quantity = Math.floor(WindowSize.width / 50) * (Math.floor(WindowSize.height / 50) + 3);\n  const symbols = [];\n  for (let i = 0; i < quantity; i++) {\n    symbols.push('');\n  }\n  updateIconSelectorField(symbols, inputElement, true, playing_animation);\n}\n\nasync function initializeIconSelectorField(inputElement: HTMLInputElement) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  searchInputElement.value = '';\n  setupIconSelectorFieldSkeleton(inputElement);\n  const materialSymbols = await getMaterialSymbolsSearchIndex(requestID);\n  currentSymbols = [];\n  for (const symbol in materialSymbols.symbols) {\n    currentSymbols.push(symbol);\n  }\n  updateIconSelectorField(currentSymbols, inputElement, false, playing_animation);\n  prepareForMaterialSymbolsSearch(materialSymbols);\n  deleteDataReceivingProgress(requestID);\n}\n\nexport function initializeIconSelectorSearchInput(): void {\n  searchInputElement.addEventListener('paste', function () {\n    updateMaterialSymbolsSearchResult();\n  });\n\n  searchInputElement.addEventListener('cut', function () {\n    updateMaterialSymbolsSearchResult();\n  });\n\n  searchInputElement.addEventListener('selectionchange', function () {\n    updateMaterialSymbolsSearchResult();\n  });\n\n  document.addEventListener('selectionchange', function () {\n    updateMaterialSymbolsSearchResult();\n  });\n\n  searchInputElement.addEventListener('keyup', function () {\n    updateMaterialSymbolsSearchResult();\n  });\n}\n\nexport function updateMaterialSymbolsSearchResult(): void {\n  const query = searchInputElement.value;\n  if (!containPhoneticSymbols(query)) {\n    const searchResults = searchForMaterialSymbols(query); // TODO: return name index\n    for (let i = searchResults.length - 1; i >= 0; i--) {\n      const item = searchResults[i].item;\n      const currentIndex = currentSymbols.indexOf(item);\n      if (!currentSymbols[i] || currentIndex < 0) continue;\n      [currentSymbols[i], currentSymbols[currentIndex]] = [currentSymbols[currentIndex], currentSymbols[i]];\n    }\n    updateIconSelectorField(currentSymbols, previousInputElement, false, previousAnimation);\n  }\n}\n\nfunction selectIcon(symbol: string, inputElement: HTMLInputElement): void {\n  inputElement.value = symbol;\n  closeIconSelector();\n}\n\nexport function showIconSelector(): void {\n  iconSelectorField.setAttribute('displayed', 'true');\n}\n\nexport function hideIconSelector(): void {\n  iconSelectorField.setAttribute('displayed', 'false');\n}\n\nexport function openIconSelector(inputElement: HTMLInputElement): void {\n  pushPageHistory('IconSelector');\n  showIconSelector();\n  initializeIconSelectorField(inputElement);\n  hidePreviousPage();\n}\n\nexport function closeIconSelector(): void {\n  hideIconSelector();\n  showPreviousPage();\n  revokePageHistory('IconSelector');\n}\n","import { elementQuerySelector } from '../../tools/elements';\nimport { MaterialSymbols } from './material-symbols-type';\n\nexport function getIconElement(identifier: MaterialSymbols): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  iconElement.innerText = identifier;\n  return iconElement;\n}\n\nexport function getBlankIconElement(): HTMLSpanElement {\n  const iconElement = document.createElement('span');\n  iconElement.classList.add('css_material_symbols_rounded');\n  return iconElement;\n}\n\nexport function setIcon(parentElement: HTMLElement, identifier: MaterialSymbols): void {\n  const thisSpanElement = elementQuerySelector(parentElement, 'span.css_material_symbols_rounded');\n  thisSpanElement.innerText = identifier;\n}\n","import { getCarInfo } from '../../data/apis/getCarInfo/index';\nimport { getLocation } from '../../data/apis/getLocation/index';\nimport { getMaterialSymbolsSearchIndex } from '../../data/apis/getMaterialSymbolsSearchIndex/index';\nimport { getRoute } from '../../data/apis/getRoute/index';\nimport { DataReceivingProgressEvent, deleteDataReceivingProgress, deleteDataUpdateTime, getDataReceivingProgress, setDataReceivingProgress } from '../../data/apis/loader';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\n\nconst dataDownloadRequestID = 'downloadData';\nexport let dataDownloadCompleted = false;\n\nconst HomeField = documentQuerySelector('.css_home_field');\nconst HomeHeadElement = elementQuerySelector(HomeField, '.css_home_head');\nconst homeButtonRightElement = elementQuerySelector(HomeHeadElement, '.css_home_button_right');\nconst progressElement = elementQuerySelector(homeButtonRightElement, 'svg#download-svg path[progress=\"progress\"]');\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  const pixels = (1 - getDataReceivingProgress(dataDownloadRequestID)) * 189;\n  progressElement.style.setProperty('--b-cssvar-stroke-dashoffset', `${pixels}px`);\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n    homeButtonRightElement.setAttribute('complete', 'true');\n    progressElement.style.setProperty('--b-cssvar-stroke-dashoffset', `${0}px`);\n    dataDownloadCompleted = true;\n  }\n}\n\nexport async function downloadData() {\n  setDataReceivingProgress(dataDownloadRequestID, 'getRoute_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getRoute_1', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getLocation_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getLocation_1', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getCarInfo_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getCarInfo_1', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getMaterialSymbolsSearchIndex', 0, false);\n  document.addEventListener(dataDownloadRequestID, handleDataReceivingProgressUpdates);\n  await Promise.all([getRoute(dataDownloadRequestID, true), getLocation(dataDownloadRequestID, 1), getCarInfo(dataDownloadRequestID, true), getMaterialSymbolsSearchIndex(dataDownloadRequestID)]);\n  deleteDataReceivingProgress(dataDownloadRequestID);\n  deleteDataUpdateTime(dataDownloadRequestID);\n}\n\nexport function showHome(): void {\n  HomeField.setAttribute('displayed', 'true');\n}\n\nexport function hideHome(): void {\n  HomeField.setAttribute('displayed', 'false');\n}\n","import { getUpdateRate } from '../../../data/analytics/update-rate/index';\nimport { integratedRecentView, integratedRecentViews, integrateRecentViews } from '../../../data/recent-views/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings, generateIdentifier, hasOwnProperty } from '../../../tools/index';\nimport { openBus } from '../../bus/index';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { querySize } from '../../index';\nimport { openLocation } from '../../location/index';\nimport { openRoute } from '../../route/index';\n\nconst HomeField = documentQuerySelector('.css_home_field');\nconst HomeBodyElement = elementQuerySelector(HomeField, '.css_home_body');\nconst RecentViewsField = elementQuerySelector(HomeBodyElement, '.css_home_recent_views');\nconst RecentViewsContentElement = elementQuerySelector(RecentViewsField, '.css_home_recent_views_content');\n\nlet previousIntegration = {};\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet recentViewsRefreshTimer_retryInterval: number = 10 * 1000;\nlet recentViewsRefreshTimer_baseInterval: number = 15 * 1000;\nlet recentViewsRefreshTimer_minInterval: number = 5 * 1000;\nlet recentViewsRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet recentViewsRefreshTimer_dynamic: boolean = true;\nlet recentViewsRefreshTimer_streaming: boolean = false;\nlet recentViewsRefreshTimer_lastUpdate: number = 0;\nlet recentViewsRefreshTimer_nextUpdate: number = 0;\nlet recentViewsRefreshTimer_refreshing: boolean = false;\nlet recentViewsRefreshTimer_currentRequestID: string = '';\nlet recentViewsRefreshTimer_streamStarted: boolean = false;\nlet recentViewsRefreshTimer_timer: ReturnType<typeof setTimeout>;\n\nfunction generateElementOfRecentViewItem(): HTMLElement {\n  // Main container\n  const recentViewsItemElement = documentCreateDivElement();\n  recentViewsItemElement.classList.add('css_home_recent_views_item');\n\n  // Head\n  const headElement = documentCreateDivElement();\n  headElement.classList.add('css_home_recent_views_item_head');\n\n  // Icon\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_home_recent_views_item_icon');\n  iconElement.appendChild(getBlankIconElement());\n\n  // Title\n  const titleElement = documentCreateDivElement();\n  titleElement.classList.add('css_home_recent_views_item_title');\n\n  // Time\n  const timeElement = documentCreateDivElement();\n  timeElement.classList.add('css_home_recent_views_item_time');\n\n  // Assemble head\n  headElement.appendChild(iconElement);\n  headElement.appendChild(titleElement);\n  headElement.appendChild(timeElement);\n\n  // Name\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_home_recent_views_item_name');\n\n  // Assemble item\n  recentViewsItemElement.appendChild(headElement);\n  recentViewsItemElement.appendChild(nameElement);\n\n  return recentViewsItemElement;\n}\n\nfunction updateRecentViewsField(integration: integratedRecentViews, skeletonScreen: boolean, animation: boolean) {\n  function updateItem(thisElement: HTMLElement, thisItem: integratedRecentView, previousItem: integratedRecentView): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_head');\n      const thisIconElement = elementQuerySelector(thisHeadElement, '.css_home_recent_views_item_icon');\n      let icon = '';\n      switch (thisItem.type) {\n        case 'route':\n          icon = 'route';\n          break;\n        case 'location':\n          icon = 'location_on';\n          break;\n        case 'bus':\n          icon = 'directions_bus';\n          break;\n        case 'empty':\n          icon = 'lightbulb';\n          break;\n        default:\n          break;\n      }\n      setIcon(thisIconElement, icon);\n    }\n\n    function updateTitle(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_head');\n      const thisTitleElement = elementQuerySelector(thisHeadElement, '.css_home_recent_views_item_title');\n      let title = '';\n      switch (thisItem.type) {\n        case 'route':\n          title = '路線';\n          break;\n        case 'location':\n          title = '地點';\n          break;\n        case 'bus':\n          title = '公車';\n          break;\n        case 'empty':\n          title = '提示';\n          break;\n        default:\n          break;\n      }\n      thisTitleElement.innerText = title;\n    }\n\n    function updateTime(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_head');\n      const thisTimeElement = elementQuerySelector(thisHeadElement, '.css_home_recent_views_item_time');\n      thisTimeElement.innerText = thisItem.time.relative;\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisNameElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_name');\n      thisNameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      switch (thisItem.type) {\n        case 'route':\n          thisElement.onclick = function () {\n            openRoute(thisItem.id, thisItem.pid);\n          };\n          break;\n        case 'location':\n          thisElement.onclick = function () {\n            openLocation(thisItem.hash);\n          };\n          break;\n        case 'bus':\n          thisElement.onclick = function () {\n            openBus(thisItem.id);\n          };\n          break;\n        case 'empty':\n          thisElement.onclick = null;\n          break;\n        default:\n          break;\n      }\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateIcon(thisElement, thisItem);\n      updateTitle(thisElement, thisItem);\n      updateTime(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (thisItem.type !== previousItem.type) {\n        updateIcon(thisElement, thisItem);\n        updateTitle(thisElement, thisItem);\n        updateTime(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n        updateAnimation(thisElement, animation);\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      } else {\n        switch (thisItem.type) {\n          case 'location':\n            if (!compareThings(previousItem.name, thisItem.name)) {\n              updateName(thisElement, thisItem);\n            }\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            if (!compareThings(previousItem.hash, thisItem.hash)) {\n              updateOnclick(thisElement, thisItem);\n            }\n            break;\n          case 'route':\n            if (previousItem.name !== thisItem.name) {\n              updateName(thisElement, thisItem);\n            }\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            if (previousItem.id !== thisItem.id || !compareThings(previousItem.pid, thisItem.pid)) {\n              updateOnclick(thisElement, thisItem);\n            }\n            break;\n          case 'bus':\n            if (previousItem.name !== thisItem.name) {\n              updateName(thisElement, thisItem);\n            }\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            if (previousItem.id !== thisItem.id) {\n              updateOnclick(thisElement, thisItem);\n            }\n            break;\n          case 'empty':\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            break;\n          default:\n            break;\n        }\n        if (previousAnimation !== animation) {\n          updateAnimation(thisElement, animation);\n        }\n        if (previousSkeletonScreen !== skeletonScreen) {\n          updateSkeletonScreen(thisElement, skeletonScreen);\n        }\n      }\n    }\n  }\n\n  const itemQuantity = integration.itemQuantity;\n\n  const itemElements = Array.from(elementQuerySelectorAll(RecentViewsContentElement, '.css_home_recent_views_item'));\n  const currentItemElementsLength = itemElements.length;\n  if (itemQuantity !== currentItemElementsLength) {\n    const difference = currentItemElementsLength - itemQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newRecentViewItemElement = generateElementOfRecentViewItem();\n        fragment.appendChild(newRecentViewItemElement);\n        itemElements.push(newRecentViewItemElement);\n      }\n      RecentViewsContentElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentItemElementsLength - 1, q = currentItemElementsLength - difference - 1; p > q; p--) {\n        itemElements[p].remove();\n        itemElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < itemQuantity; i++) {\n    const thisElement = itemElements[i];\n    const thisItem = integration.items[i];\n    if (hasOwnProperty(previousIntegration, 'items')) {\n      if (previousIntegration.items[i]) {\n        const previousItem = previousIntegration.items[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nexport function setupRecentViewsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const defaultItemQuantity = Math.floor(WindowSize.height / 70 / 3) + 2;\n  const items: Array<integratedRecentView> = [];\n  for (let i = 0; i < defaultItemQuantity; i++) {\n    items.push({\n      type: 'route',\n      id: 0,\n      pid: [],\n      time: {\n        absolute: 0,\n        relative: ''\n      },\n      name: ''\n    });\n  }\n  updateRecentViewsField(\n    {\n      items: items,\n      itemQuantity: items.length,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function refreshRecentViews() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  recentViewsRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  recentViewsRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  recentViewsRefreshTimer_refreshing = true;\n  recentViewsRefreshTimer_currentRequestID = generateIdentifier();\n  // documentQuerySelector('.css_home_update_timer').setAttribute('refreshing', 'true');\n  const integration = await integrateRecentViews(recentViewsRefreshTimer_currentRequestID);\n  updateRecentViewsField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (recentViewsRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  recentViewsRefreshTimer_lastUpdate = new Date().getTime();\n  if (recentViewsRefreshTimer_dynamic) {\n    recentViewsRefreshTimer_nextUpdate = Math.max(recentViewsRefreshTimer_lastUpdate + recentViewsRefreshTimer_minInterval, integration.dataUpdateTime + recentViewsRefreshTimer_baseInterval / updateRate);\n  } else {\n    recentViewsRefreshTimer_nextUpdate = recentViewsRefreshTimer_lastUpdate + recentViewsRefreshTimer_baseInterval;\n  }\n  recentViewsRefreshTimer_dynamicInterval = Math.max(recentViewsRefreshTimer_minInterval, recentViewsRefreshTimer_nextUpdate - recentViewsRefreshTimer_lastUpdate);\n  recentViewsRefreshTimer_refreshing = false;\n  // documentQuerySelector('.css_home_update_timer').setAttribute('refreshing', 'false');\n}\n\nasync function streamRecentViews() {\n  refreshRecentViews()\n    .then(function () {\n      if (recentViewsRefreshTimer_streaming) {\n        recentViewsRefreshTimer_timer = setTimeout(\n          function () {\n            streamRecentViews();\n          },\n          Math.max(recentViewsRefreshTimer_minInterval, recentViewsRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        recentViewsRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (recentViewsRefreshTimer_streaming) {\n        recentViewsRefreshTimer_timer = setTimeout(function () {\n          streamRecentViews();\n        }, recentViewsRefreshTimer_retryInterval);\n      } else {\n        recentViewsRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function initializeRecentViews(): void {\n  // setupRecentViewsFieldSkeletonScreen();\n  if (!recentViewsRefreshTimer_streaming) {\n    recentViewsRefreshTimer_streaming = true;\n    if (!recentViewsRefreshTimer_streamStarted) {\n      recentViewsRefreshTimer_streamStarted = true;\n      streamRecentViews();\n    } else {\n      refreshRecentViews();\n    }\n  }\n}\n"],"names":["HomeField","documentQuerySelector","HomeHeadElement","elementQuerySelector","HomeBodyElement","HomeFoldersElement","HomeUpdateTimerElement","previousIntegration","previousAnimation","previousSkeletonScreen","foldersTick","Tick","_refreshFolders","apply","arguments","generateElementOfItem","itemElement","documentCreateDivElement","classList","add","setAttribute","iconElement","appendChild","getIconElement","contextElement","mainElement","capsuleElement","statusElement","nextSlideElement","currentSlideElement","buttonElement","capsuleSeparatorElement","generateElementOfFolder","folderElement","headElement","getBlankIconElement","nameElement","contentElement","animateUpdateTimer","interval","style","setProperty","handleDataReceivingProgressUpdates","event","CustomEvent","offsetRatio","detail","progress","toString","stage","document","removeEventListener","target","setupFolderFieldSkeletonScreen","playing_animation","getSettingOptionValue","WindowSize","querySize","FieldHeight","width","height","contentLength","Math","floor","folders","i","folder","name","icon","id","timestamp","content","j","push","type","status","code","text","time","direction","route","endPoints","departure","destination","pathAttributeId","updateFoldersElement","dataUpdateTime","integration","skeletonScreen","animation","updateItem","thisElement","thisItem","previousItem","updateType","updateIcon","thisIconElement","setIcon","updateStatus","thisElementRect","getBoundingClientRect","top","left","bottom","right","windowWidth","window","innerWidth","windowHeight","innerHeight","thisItemStatusElement","innerText","addEventListener","remove","once","updateMain","main","busID","updateContext","context","updateButton","onclick","openRoute","openLocation","updateAnimation","booleanToString","updateSkeletonScreen","compareThings","updateFolder","thisFolder","previousFolder","updateName","thisHeadElement","foldersLength","length","folderElements","Array","from","elementQuerySelectorAll","currentFolderElementsLength","difference","fragment","DocumentFragment","o","newFolderElement","append","p","q","splice","thisFolderContent","thisFolderContentLength","thisFolderElement","thisFolderContentElement","thisFolderContentItemElements","currentFolderContentItemElementsLength","newItemElement","hasOwnProperty","_asyncToGenerator","refresh_interval_setting","requestID","generateIdentifier","integrateFolders","updateRate","dynamic","getUpdateRate","lastUpdate","Date","getTime","nextUpdate","max","baseInterval","err","promptMessage","initializeFolders","isPaused","resume","tick","SplashScreenElement","ErrorMessageElement","splashScreenTimer_openTime","pageHistory","pushPageHistory","page","pageHistoryLength","revokePageHistory","pop","hidePreviousPage","hideHome","hideFolderCreator","hideFolderEditor","hideIconSelector","hideFolderManager","hideLocation","hideLocationDetails","hideRoute","hideRouteDetails","hideSaveToFolder","hideSearch","hideSettings","hideSettingsOptions","hideDataUsage","hidePersonalScheduleManager","hidePersonalScheduleCreator","hidePersonalScheduleEditor","hideBus","hideRegisterNotification","hideScheduleNotification","hideNotificationScheduleManager","hideQRCode","hideStorage","showPreviousPage","showHome","showFolderCreator","showFolderEditor","showIconSelector","showFolderManager","showLocation","showLocationDetails","showRoute","showRouteDetails","showSaveToFolder","showSearch","shwoSettings","showSettingsOptions","showDataUsage","showPersonalScheduleManager","showPersonalScheduleCreator","showPersonalScheduleEditor","showBus","showRegisterNotification","showScheduleNotification","showNotificationScheduleManager","showQRCode","showStorage","setSplashScreenIconOffsetY","offset","isRunningStandalone","outerHeight","fadeOutSplashScreen","callback","fadeOut","cureentTime","setTimeout","showErrorMessage","scrollDocumentToTop","scrollTo","behavior","previousInputElement","iconSelectorField","searchInputElement","bodyElement","symbolsElement","currentSymbols","previousSymbols","previosuSkeletonScreen","generateElementOfSymbol","element","updateIconSelectorField","symbols","inputElement","updateSymbol","thisSymbolElement","thisSymbol","previousSymbol","updateOnclick","symbol","value","closeIconSelector","selectIcon","symbolsLength","symbolElements","currentSymbolElementsLength","newSymbolElement","currentSymbol","slice","_initializeIconSelectorField","quantity","setupIconSelectorFieldSkeleton","materialSymbols","getMaterialSymbolsSearchIndex","prepareForMaterialSymbolsSearch","deleteDataReceivingProgress","initializeIconSelectorSearchInput","updateMaterialSymbolsSearchResult","query","containPhoneticSymbols","searchResults","searchForMaterialSymbols","item","currentIndex","indexOf","_ref","openIconSelector","_x","initializeIconSelectorField","identifier","createElement","parentElement","dataDownloadRequestID","dataDownloadCompleted","homeButtonRightElement","progressElement","pixels","getDataReceivingProgress","downloadData","_downloadData","setDataReceivingProgress","Promise","all","getRoute","getLocation","getCarInfo","deleteDataUpdateTime","RecentViewsField","RecentViewsContentElement","recentViewsRefreshTimer_baseInterval","recentViewsRefreshTimer_minInterval","recentViewsRefreshTimer_dynamic","recentViewsRefreshTimer_streaming","recentViewsRefreshTimer_lastUpdate","recentViewsRefreshTimer_nextUpdate","recentViewsRefreshTimer_currentRequestID","recentViewsRefreshTimer_streamStarted","generateElementOfRecentViewItem","recentViewsItemElement","titleElement","timeElement","updateRecentViewsField","updateTitle","thisTitleElement","title","updateTime","relative","pid","hash","openBus","itemQuantity","itemElements","currentItemElementsLength","newRecentViewItemElement","items","setupRecentViewsFieldSkeletonScreen","defaultItemQuantity","absolute","refreshRecentViews","_refreshRecentViews","integrateRecentViews","streamRecentViews","_streamRecentViews","then","initializeRecentViews"],"ignoreList":[],"sourceRoot":""}