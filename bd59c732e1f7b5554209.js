"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[133],{365:(e,t,r)=>{r.d(t,{G:()=>s});var n=r(4636),i=r(4778),o=r(7528),a=r(1172);function u(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function s(e){return c.apply(this,arguments)}function c(){var e;return e=function*(e){if(""===n.M3||""===n.se||void 0===e)return!1;var t=(0,i.F)("cancel",[e]),r=(0,o.b)("cancel",[e]),u=yield(0,a.R)("cancel",t,r);return!1!==u&&200===u.code&&"cancel"===u.method&&(yield(0,n.VJ)(e),!0)},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))},c.apply(this,arguments)}},1172:(e,t,r)=>{function n(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function i(e,t,r){return o.apply(this,arguments)}function o(){var e;return e=function*(e,t,r){try{if(!1===t||!1===r)return!1;var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},i=yield fetch(t,n);if(!i.ok){var o=yield i.text();return console.error("API request failed",{status:i.status,statusText:i.statusText,body:o}),!1}try{var a=yield i.text(),u=JSON.parse(a);switch(e){case"cancel":case"register":case"schedule":case"rotate":case"reschedule":return u;default:return!1}}catch(e){throw console.error("Failed to parse JSON response",e),new Error("Invalid JSON response from server")}}catch(e){return console.error("Error making request:",e),!1}},o=function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function u(e){n(a,i,o,u,s,"next",e)}function s(e){n(a,i,o,u,s,"throw",e)}u(void 0)}))},o.apply(this,arguments)}r.d(t,{R:()=>i})},3937:(e,t,r)=>{r.d(t,{e:()=>s});var n=r(4636),i=r(4778),o=r(7528),a=r(1172);function u(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function s(e){return c.apply(this,arguments)}function c(){var e;return e=function*(e){if(!e)return!1;var t=(0,i.F)("register"),r=(0,o.b)("register",[e]),u=yield(0,a.R)("register",t,r);return!1!==u&&200===u.code&&"register"===u.method&&((0,n.gc)(u.client_id),(0,n.uQ)(u.secret),yield(0,n.ms)(),!0)},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))},c.apply(this,arguments)}},4636:(e,t,r)=>{r.d(t,{M3:()=>O,ph:()=>S,se:()=>N,z9:()=>z,hc:()=>I,D7:()=>C,cS:()=>Q,e3:()=>G,Db:()=>D,VJ:()=>R,ms:()=>J,G7:()=>F,mD:()=>X,FX:()=>V,gc:()=>M,Je:()=>A,uQ:()=>L,Zc:()=>H});var n=r(8024),i=r(8011),o=r(4293),a=r(424),u=r(6788),s=r(3459),c=r(4311),l=r(4778),f=r(7528),d=r(1172);function p(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function y(){var e;return e=function*(){if(""===O||""===N)return!1;var e=(0,l.F)("rotate"),t=(0,f.b)("rotate",[]),r=yield(0,d.R)("rotate",e,t);return!1!==r&&200===r.code&&"rotate"===r.method&&(L(r.secret),yield J(),!0)},y=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,u,"next",e)}function u(e){p(o,n,i,a,u,"throw",e)}a(void 0)}))},y.apply(this,arguments)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function m(){var e;return e=function*(e,t,r,n,i,o,a,u,s){if(""===O||""===N||void 0===e||void 0===t||void 0===r||void 0===n||void 0===i||void 0===o||"number"!=typeof a||void 0===s)return!1;var c=new Date;switch(h(s)){case"string":case"number":c=new Date(s);break;default:if(!(s instanceof Date))return!1;c=s}var p=(0,l.F)("schedule"),v=(0,f.b)("schedule",[e,t,r,n,i,o,a,u,c.toISOString()]),m=yield(0,d.R)("schedule",p,v);return!1!==m&&200===m.code&&"schedule"===m.method&&(Math.random()>.8&&(yield function(){return y.apply(this,arguments)}()),yield F(m.schedule_id,e,t,r,n,i,o,a,u,c.getTime()),m.schedule_id)},m=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,u,"next",e)}function u(e){v(o,n,i,a,u,"throw",e)}a(void 0)}))},m.apply(this,arguments)}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return _(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,u,"next",e)}function u(e){w(o,n,i,a,u,"throw",e)}a(void 0)}))}}var S="",O="",N="",P=[],$={},x={};function J(){return T.apply(this,arguments)}function T(){return(T=b((function*(){var e={provider:S,client_id:O,secret:N};yield(0,c.mL)(9,"n_client",JSON.stringify(e))}))).apply(this,arguments)}function D(){return k.apply(this,arguments)}function k(){return(k=b((function*(){var e=yield(0,c.Ct)(9,"n_client");if(e){var t=JSON.parse(e);S=t.provider,O=t.client_id,N=t.secret}}))).apply(this,arguments)}function I(){return""!==O&&""!==N}function A(e){if(!(0,n.Gz)(e))throw new Error("The provider is not valid.");var t=new URL(e);S=`${t.protocol}//${t.hostname}`}function C(){return String(S)}function M(e){void 0!==e&&(O=String(e))}function L(e){void 0!==e&&(N=String(e))}function Q(){return j.apply(this,arguments)}function j(){return(j=b((function*(){(new Date).getTime();var e,t=0,r=g(yield(0,c.Su)(10));try{for(r.s();!(e=r.n()).done;){var n=e.value,i=yield(0,c.Ct)(10,n),o=JSON.parse(i),a=(o.scheduled_time,o.schedule_id),u=`s_${o.stop_id}`;P.push(o),$[a]=t,x.hasOwnProperty(u)||(x[u]=[]),x[u].push(t),t+=1}}catch(e){r.e(e)}finally{r.f()}}))).apply(this,arguments)}function F(e,t,r,n,i,o,a,u,s,c){return U.apply(this,arguments)}function U(){return(U=b((function*(e,t,r,n,i,o,a,u,s,l){var f={schedule_id:e,stop_id:t,location_name:r,route_id:n,route_name:i,direction:o,estimate_time:a,time_formatting_mode:u,time_offset:s,scheduled_time:l},d=`s_${t}`,p=P.length;P.push(f),$[e]=p,x.hasOwnProperty(d)||(x[d]=[]),x[d].push(p),yield(0,c.mL)(10,e,JSON.stringify(f))}))).apply(this,arguments)}function R(e){return E.apply(this,arguments)}function E(){return(E=b((function*(e){if($.hasOwnProperty(e)){var t=$[e],r=`s_${P[t].stop_id}`;P.splice(t,1,null),x[r].splice(x[r].indexOf(t),1),delete $[e],yield(0,c.iQ)(10,e)}}))).apply(this,arguments)}function H(e){var t=(new Date).getTime(),r=`s_${e}`;if(x.hasOwnProperty(r)){var n,i=g(x[r]);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=P[o];if(null!==a)if(a.scheduled_time>t)return!0}}catch(e){i.e(e)}finally{i.f()}}return!1}function z(){return q.apply(this,arguments)}function q(){return(q=b((function*(){var e=(new Date).getTime();for(var t in $){var r=$[t],n=P[r];if(n.scheduled_time<=e){var i=`s_${n.stop_id}`;P.splice(r,1,null),x[i].splice(x[i].indexOf(r),1),delete $[t],yield(0,c.iQ)(10,t)}}}))).apply(this,arguments)}function G(e){return Z.apply(this,arguments)}function Z(){return(Z=b((function*(e){var t,r=yield(0,o.a)(e,!0),n=function(){var e,t=(new Date).getTime(),r=[],n=g(P);try{for(n.s();!(e=n.n()).done;){var i=e.value;null!==i&&i.scheduled_time>t&&r.push(i)}}catch(e){n.e(e)}finally{n.f()}return r}(),i=(new Date).getTime(),a=[],s=g(n);try{for(s.s();!(t=s.n()).done;){var c=t.value,l={},f=c.location_name;l.name=f;var d=c.stop_id;l.stop_id=d;var p=c.estimate_time;l.estimate_time=p;var y=c.schedule_id;l.schedule_id=y;var h=c.scheduled_time;l.scheduled_time=h;var v=new Date(h),m=v.getDate(),_=v.getHours(),w=v.getMinutes();l.date=String(m).padStart(2,"0"),l.hours=String(_).padStart(2,"0"),l.minutes=String(w).padStart(2,"0"),l.route={};var b=c.route_name;l.route.name=b;var S=c.route_id;l.route.id=S;var O=c.direction;l.route.direction=O;var N=`r_${c.route_id}`;if(r.hasOwnProperty(N)){var $=r[N].pid;l.route.pathAttributeId=$,a.push(l)}}}catch(e){s.e(e)}finally{s.f()}a.sort((function(e,t){return e.scheduled_time-t.scheduled_time}));for(var x=[],J=0,T={},D=0,k=a;D<k.length;D++){var I=k[D],A=`g_${I.date}_${I.hours}`;T.hasOwnProperty(A)?I.is_first=!1:(T[A]=!0,I.is_first=!0),x.push(I),J+=1}var C={items:x,itemQuantity:J,dataUpdateTime:Math.max((0,u.Zt)(e),i)};return(0,u.gC)(e),(0,u.LQ)(e),C}))).apply(this,arguments)}var V=[{name:"到站前5分鐘",time_offset:-5,icon:"clock_loader_10",index:0},{name:"到站前10分鐘",time_offset:-10,icon:"clock_loader_20",index:1},{name:"到站前15分鐘",time_offset:-15,icon:"clock_loader_40",index:2},{name:"到站前20分鐘",time_offset:-20,icon:"clock_loader_60",index:3},{name:"到站前25分鐘",time_offset:-25,icon:"clock_loader_80",index:4},{name:"到站前30分鐘",time_offset:-30,icon:"clock_loader_90",index:5}];function X(e,t,r,n){return B.apply(this,arguments)}function B(){return B=b((function*(e,t,r,c){if(I()){var l=(0,s.Js)("time_formatting_mode"),f=(0,n.zx)("r"),d=yield(0,a.T)(f),p=yield(0,i.g)(f,!1),y=yield(0,o.a)(f,!0);(0,u.LQ)(f),(0,u.gC)(f);var h=`s_${e}`,v={};if(!d.hasOwnProperty(h))return 0;var g=(v=d[h]).stopLocationId,_=v.goBack,w=`l_${g}`;if(!p.hasOwnProperty(w))return 0;var b=p[w].n,S=`r_${t}`,O={};if(!y.hasOwnProperty(S))return 0;var N=(O=y[S]).n,P=O.dep,$=[O.des,P,""][_?parseInt(_):0],x=V[c].time_offset,J=(new Date).getTime()+1e3*r+60*x*1e3,T=yield function(e,t,r,n,i,o,a,u,s){return m.apply(this,arguments)}(e,b,t,N,$,r,l,x,J);return!1===T?0:1}return 2})),B.apply(this,arguments)}},4778:(e,t,r)=>{r.d(t,{F:()=>i});var n=r(4636);function i(e){if(""===n.ph)return!1;var t=new URL(n.ph);return["cancel","register","schedule","rotate","reschedule"].indexOf(e)>-1&&(t.searchParams.set("method",e),t.toString())}},5314:(e,t,r)=>{r.d(t,{$i:()=>S,DF:()=>w,FU:()=>v,Qj:()=>y,XK:()=>g});var n=r(8024),i=r(5579),o=r(9734),a=r(8011),u=r(4293),s=r(6788),c=r(4311);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,u,"next",e)}function u(e){d(o,n,i,a,u,"throw",e)}a(void 0)}))}}function y(){return h.apply(this,arguments)}function h(){return(h=p((function*(){var e,t=[],r=(new Date).getTime(),n=l(yield(0,c.Su)(8));try{for(n.s();!(e=n.n()).done;){var i=e.value,o=yield(0,c.Ct)(8,i),a=JSON.parse(o);r-new Date(a.time).getTime()<=12096e5&&t.push(a)}}catch(e){n.e(e)}finally{n.f()}return 0===t.length&&t.push({type:"empty",time:(new Date).toISOString(),name:"沒有內容",id:0}),t}))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=p((function*(){var e,t=(new Date).getTime(),r=l(yield(0,c.Su)(8));try{for(r.s();!(e=r.n()).done;){var n=e.value,i=yield(0,c.Ct)(8,n),o=JSON.parse(i);t-new Date(o.time).getTime()>12096e5&&(yield(0,c.iQ)(8,n))}}catch(e){r.e(e)}finally{r.f()}}))).apply(this,arguments)}function g(e,t){return _.apply(this,arguments)}function _(){return(_=p((function*(e,t){var r=(0,n.zx)("r"),i=`${e}_${t}`,s=(new Date).toISOString();switch(e){case"route":var l=yield(0,c.Ct)(8,i);if(l){var f=JSON.parse(l);f.time=s,yield(0,c.mL)(8,i,JSON.stringify(f))}else{var d=yield(0,u.a)(r,!0),p=`r_${t}`;if(d.hasOwnProperty(p)){var y={type:"route",time:s,name:d[p].n,id:t};yield(0,c.mL)(8,i,JSON.stringify(y))}}break;case"location":var h=yield(0,c.Ct)(8,i);if(h){var v=JSON.parse(h);v.time=s,yield(0,c.mL)(8,i,JSON.stringify(v))}else{var m=yield(0,a.g)(r,!0),g=`ml_${t}`;if(m.hasOwnProperty(g)){var _={type:"location",time:s,name:m[g].n,hash:t};yield(0,c.mL)(8,i,JSON.stringify(_))}}break;case"bus":var w=yield(0,c.Ct)(8,i);if(w){var b=JSON.parse(w);b.time=s,yield(0,c.mL)(8,i,JSON.stringify(b))}else{var S=yield(0,o.j)(r,!0),O=`c_${t}`;if(S.hasOwnProperty(O)){var N={type:"bus",time:s,name:S[O].CarNum,id:t};yield(0,c.mL)(8,i,JSON.stringify(N))}}}}))).apply(this,arguments)}function w(e,t){return b.apply(this,arguments)}function b(){return(b=p((function*(e,t){var r=`${e}_${t}`,n=yield(0,c.Ct)(8,r);return!!n&&JSON.parse(n)}))).apply(this,arguments)}function S(e){return O.apply(this,arguments)}function O(){return(O=p((function*(e){var t,r=yield y(),n=yield(0,u.a)(e,!0),o=[],a=0,c=l(r);try{for(c.s();!(t=c.n()).done;){var f=t.value,d=f.type,p=new Date(f.time);switch(d){case"route":var h={type:"route"},v=f.name;h.name=v;var m=f.id;h.id=m;var g=n[`r_${m}`].pid;h.pid=g,h.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(h),a+=1;break;case"location":var _={type:"location"},w=f.hash;_.hash=w;var b=f.name;_.name=b,_.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(_),a+=1;break;case"bus":var S={type:"bus"},O=f.id;S.id=O;var N=f.name;S.name=N,S.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(S),a+=1;break;case"empty":var P={type:"empty"},$=f.id;P.id=$;var x=f.name;P.name=x,P.time={absolute:p.getTime(),relative:(0,i.HN)(p)},o.push(P),a=1}}}catch(e){c.e(e)}finally{c.f()}o.sort((function(e,t){return t.time.absolute-e.time.absolute}));var J={items:o,itemQuantity:a,dataUpdateTime:(new Date).getTime()};return(0,s.LQ)(e),(0,s.gC)(e),J}))).apply(this,arguments)}},5352:(e,t,r)=>{r.d(t,{Qh:()=>c,nL:()=>p,qZ:()=>f,ty:()=>h,vQ:()=>g});var n=r(8024),i=r(4311);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))}}function c(e,t,r,n,i,o){return l.apply(this,arguments)}function l(){return(l=s((function*(e,t,r,a,u,s){var c=(0,n.zx)("s");if(t<0||t>23||r<0||r>59||a<0||a>23||u<0||u>59)return!1;if(!(Number.isInteger(t)&&Number.isInteger(r)&&Number.isInteger(a)&&Number.isInteger(u)))return!1;if(s.length>7)return!1;var l,f=o(s);try{for(f.s();!(l=f.n()).done;){var d=l.value;if("number"==typeof d&&(d<0||d>6||!Number.isInteger(d)))return!1}}catch(e){f.e(e)}finally{f.f()}var p={name:e,period:{start:{hours:t,minutes:r},end:{hours:a,minutes:u}},days:s,id:c};return yield(0,i.mL)(7,c,JSON.stringify(p)),!0}))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=s((function*(e){var t=yield(0,i.Ct)(7,e);if(t)return JSON.parse(t)}))).apply(this,arguments)}function p(e){return y.apply(this,arguments)}function y(){return(y=s((function*(e){(yield f(e.id))&&(yield(0,i.mL)(7,e.id,JSON.stringify(e)))}))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=s((function*(){var e,t=[],r=o(yield(0,i.Su)(7));try{for(r.s();!(e=r.n()).done;){var n=e.value,a=yield(0,i.Ct)(7,n);if(a){var u=JSON.parse(a);t.push(u)}}}catch(e){r.e(e)}finally{r.f()}return t.sort((function(e,t){return 60*e.period.end.hours+e.period.end.minutes-(60*t.period.end.hours+t.period.end.minutes)})),t.sort((function(e,t){return 60*e.period.start.hours+e.period.start.minutes-(60*t.period.start.hours+t.period.start.minutes)})),t}))).apply(this,arguments)}function m(){return(m=s((function*(){var e,t={},r=o(yield h());try{for(r.s();!(e=r.n()).done;){var n,i=e.value,a=o(i.days);try{for(a.s();!(n=a.n()).done;){var u=`d_${n.value}`;t.hasOwnProperty(u)||(t[u]=[]);var s={start:i.period.start,end:i.period.end};t[u].push(s)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}for(var c in t){for(var l=t[c],f=l.length,d=[],p=0;p<f;p++){var y=l[p-1]||l[p],v=l[p];0===d.length?d.push(v):60*v.start.hours+v.start.minutes>=60*y.start.hours+y.start.minutes&&60*v.start.hours+v.start.minutes<=60*y.end.hours+y.end.minutes?(d[d.length-1].end.hours=v.end.hours,d[d.length-1].end.minutes=v.end.minutes):d.push(v)}t[c]=d}return t}))).apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return _=s((function*(e){var t=yield function(){return m.apply(this,arguments)}(),r=`d_${e.getDay()}`,n=e.getHours(),i=e.getMinutes();if(t.hasOwnProperty(r)){var a,u=o(t[r]);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(60*n+i>=60*s.start.hours+s.start.minutes&&60*n+i<=60*s.end.hours+s.end.minutes)return!0}}catch(e){u.e(e)}finally{u.f()}}return!1})),_.apply(this,arguments)}},7528:(e,t,r)=>{r.d(t,{b:()=>a});var n=r(8024),i=r(7307),o=r(4636);function a(e,t){switch(e){case"cancel":return""!==o.M3&&""!==o.se&&1===t.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se),schedule_id:t[0]};case"register":if(1!==t.length)return!1;var r=new Date;return r.setMilliseconds(0),r.setSeconds(0),{hash:(0,n.sc)(`${t[0]}${r.getTime()}`)};case"schedule":return""!==o.M3&&""!==o.se&&9===t.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se),stop_id:t[0],location_name:t[1],route_id:t[2],route_name:t[3],direction:t[4],estimate_time:t[5],time_formatting_mode:t[6],time_offset:t[7],scheduled_time:t[8]};case"rotate":return""!==o.M3&&""!==o.se&&0===t.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se)};case"reschedule":return""!==o.M3&&""!==o.se&&3===t.length&&{client_id:o.M3,totp_token:(0,i.O)(o.se),schedule_id:t[0],estimate_time:t[1],scheduled_time:t[2]};default:return!1}}}}]);
//# sourceMappingURL=bd59c732e1f7b5554209.js.map