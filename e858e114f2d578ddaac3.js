"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[627],{2174(t,e,n){n.d(e,{Gv:()=>Q,Sv:()=>J,m_:()=>U});var r=n(5767),i=n(365),a=n(77),u=n(3459),o=n(8024),l=n(8179),s=n(4537),d=n(904),c=n(9119);function f(t,e,n,r,i,a,u){try{var o=t[a](u),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,i)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function u(t){f(a,r,i,u,o,"next",t)}function o(t){f(a,r,i,u,o,"throw",t)}u(void 0)})}}var v=(0,l.bv)(".kk"),p=(0,l.aI)(v,".nk"),m=(0,l.aI)(p,".rk"),y=(0,l.aI)(m,".sk"),g=(0,l.aI)(v,".uk"),b=(0,l.aI)(g,".vk"),I={},A=!1,k=15e3,j=5e3,w=15e3,S=!0,x=0,C=0,_="",E=!1,L=!1,T=!1;function M(t){var e=t;if(E){var n=e.detail.progress-1;y.style.setProperty("--lk",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,M)}function P(){var t=(0,o.zx)(),e=document.createElement("div");e.classList.add("wk"),e.id=t;var n=document.createElement("div");n.classList.add("xk"),e.appendChild(n);var r=document.createElement("div");r.classList.add("yk");var i=document.createElement("div");i.classList.add("zk"),r.appendChild(i);var a=document.createElement("div");a.classList.add("_k"),r.appendChild(a);var u=document.createElement("div");u.classList.add("al"),r.appendChild(u);var l=document.createElement("div");l.classList.add("bl");var d=document.createElement("span");return d.appendChild((0,s.Y)("close")),l.appendChild(d),r.appendChild(l),e.appendChild(r),{element:e,id:t}}function $(t,e,n){function r(t,r,i){function a(t,e){(0,l.aI)(t,".xk").innerText=e.hours}function u(t,e){var n=(0,l.aI)(t,".yk");(0,l.aI)(n,".zk").innerText=e.minutes}function s(t,e){var n=(0,l.aI)(t,".yk");(0,l.aI)(n,".al").innerText=e.name}function d(t,e){var n=(0,l.aI)(t,".yk");(0,l.aI)(n,"._k").innerText=`${e.route.name} - 往${e.route.direction}`}function c(t,e){var n=(0,l.aI)(t,".yk");(0,l.aI)(n,".bl").onclick=function(){Q(t.id,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,o.xZ)(e.is_first))}function h(t,e){t.setAttribute("animation",(0,o.xZ)(e))}function v(t,e){t.setAttribute("skeleton-screen",(0,o.xZ)(e))}null===i?(a(t,r),u(t,r),s(t,r),d(t,r),c(t,r),f(t,r),h(t,n),v(t,e)):(r.hours!==i.hours&&a(t,r),r.minutes!==i.minutes&&u(t,r),(0,o.hw)(i.schedule_id,r.schedule_id)||(s(t,r),d(t,r),c(t,r)),i.is_first!==r.is_first&&f(t,r),true!==n&&h(t,n),A!==e&&v(t,e))}var i=t.itemQuantity,a=t.items,u=(0,l.jg)(b,".wk").length;if(i!==u){var s=u-i;if(s<0)for(var d=0;d<Math.abs(s);d++){var c=P();b.appendChild(c.element)}else for(var f=(0,l.jg)(b,".wk"),h=0;h<Math.abs(s);h++){f[u-1-h].remove()}}for(var v=(0,l.jg)(b,".wk"),p=0;p<i;p++){var m=v[p],y=a[p];if(I.hasOwnProperty("items"))if(I.items[p])r(m,y,I.items[p]);else r(m,y,null);else r(m,y,null)}I=t,A=e}function O(){return Z.apply(this,arguments)}function Z(){return(Z=h(function*(){var t=(0,u.Js)("playing_animation"),e=(0,u.Js)("refresh_interval");S=e.dynamic,k=e.baseInterval,E=!0,_=(0,o.zx)(),y.setAttribute("refreshing","true"),y.classList.remove("tk"),document.addEventListener(_,M);var n=yield(0,a.e3)(_);$(n,!1,t);var i=0;S&&(i=yield(0,r.wz)()),x=(new Date).getTime(),C=S?Math.max(x+j,n.dataUpdateTime+k/i):x+k,w=Math.max(j,C-x),E=!1,y.setAttribute("refreshing","false"),y.style.setProperty("--mk",`${w}ms`),y.classList.add("tk")})).apply(this,arguments)}function z(){return R.apply(this,arguments)}function R(){return(R=h(function*(){O().then(function(){L?setTimeout(function(){z()},Math.max(j,C-(new Date).getTime())):T=!1}).catch(function(t){L?setTimeout(function(){z()},1e4):T=!1})})).apply(this,arguments)}function J(){(0,d.WR)("NotificationScheduleManager"),v.setAttribute("displayed","true"),function(){for(var t=(0,u.Js)("playing_animation"),e=(0,d.gO)("window"),n=(e.width,e.height),r=Math.floor(n/50)+5,i=[],a=0;a<r;a++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});$({items:i,itemQuantity:r,dataUpdateTime:0},!0,t)}(),L||(L=!0,T?O():(T=!0,z())),(0,d.Z_)()}function U(){v.setAttribute("displayed","false"),L=!1,(0,d.l$)()}function Q(t,e){return W.apply(this,arguments)}function W(){return(W=h(function*(t,e){if((0,c.a)("處理中","manufacturing"),yield(0,i.G)(e)){if((0,l.aI)(b,`.wk#${t}`).remove(),(0,c.a)("已取消通知","check_circle"),!E){var n=(0,u.Js)("playing_animation");$(yield(0,a.e3)(_),!1,n)}}else(0,c.a)("取消失敗","error")})).apply(this,arguments)}},5693(t,e,n){n.d(e,{Dn:()=>x,Xy:()=>S,bF:()=>w,gv:()=>A});var r=n(5352),i=n(8179),a=n(5579),u=n(904);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,u,o=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(t){s=!0,i=t}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n,r,i,a,u){try{var o=t[a](u),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function u(t){s(a,r,i,u,o,"next",t)}function o(t){s(a,r,i,u,o,"throw",t)}u(void 0)})}}var c=(0,i.bv)(".yj"),f=(0,i.aI)(c,".ck"),h=(0,i.aI)(c,".zj"),v=(0,i.aI)(h,"._j"),p=(0,i.aI)(f,".dk"),m=(0,i.aI)(p,'.ek[group="schedule-name"] .ik input'),y=(0,i.aI)(p,'.ek[group="schedule-start-time"] .ik input'),g=(0,i.aI)(p,'.ek[group="schedule-end-time"] .ik input'),b=(0,i.aI)(p,'.ek[group="schedule-days"] .ik'),I=(0,i.jg)(b,".jk");function A(t){return k.apply(this,arguments)}function k(){return(k=d(function*(t){for(var e=m.value,n=y.value,i=g.value,a=o(String(n).split(":").map(function(t){return parseInt(t)}),2),u=a[0],l=a[1],s=o(String(i).split(":").map(function(t){return parseInt(t)}),2),d=s[0],c=s[1],f=[],h=0;h<7;h++){var v=I[h],p=v.getAttribute("highlighted"),b=parseInt(v.getAttribute("day"));"true"===p&&f.push(b)}var A=yield(0,r.qZ)(t);A.name=e,A.days=f,A.period.start.hours=u,A.period.start.minutes=l,A.period.end.hours=d,A.period.end.minutes=c,yield(0,r.nL)(A),S()})).apply(this,arguments)}function j(){return(j=d(function*(t){var e=yield(0,r.qZ)(t);m.value=e.name,y.value=(0,a.pn)(e.period.start),g.value=(0,a.pn)(e.period.end);for(var n=0;n<7;n++){var i=I[n];e.days.indexOf(n)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}v.onclick=function(){A(t)}})).apply(this,arguments)}function w(t){(0,u.WR)("PersonalScheduleEditor"),c.setAttribute("displayed","true"),function(t){j.apply(this,arguments)}(t),(0,u.Z_)()}function S(){c.setAttribute("displayed","false"),(0,u.l$)()}function x(t){var e=(0,i.aI)(b,`.jk[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},7891(t,e,n){n.d(e,{Z:()=>y,z:()=>m});var r=n(5352),i=n(8179),a=n(4537),u=n(904),o=n(5693);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n,r,i,a,u){try{var o=t[a](u),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(r,i)}var c=(0,i.bv)(".bj"),f=(0,i.aI)(c,".gj"),h=(0,i.aI)(f,".hj");function v(t){var e=document.createElement("div");e.classList.add("ij"),e.onclick=function(){(0,o.bF)(t.id)};var n=document.createElement("div");n.classList.add("jj"),n.appendChild(document.createTextNode(t.name)),e.appendChild(n);var r=document.createElement("div");r.classList.add("kj");var i=document.createElement("span");return i.appendChild((0,a.Y)("arrow_forward_ios")),r.appendChild(i),e.appendChild(r),{element:e,id:""}}function p(){var t;return t=function*(){h.innerHTML="";var t,e=l(yield(0,r.ty)());try{for(e.s();!(t=e.n()).done;){var n=v(t.value);h.appendChild(n.element)}}catch(t){e.e(t)}finally{e.f()}},p=function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function u(t){d(a,r,i,u,o,"next",t)}function o(t){d(a,r,i,u,o,"throw",t)}u(void 0)})},p.apply(this,arguments)}function m(){(0,u.WR)("PersonalScheduleManager"),c.setAttribute("displayed","true"),function(){p.apply(this,arguments)}()}function y(){(0,u.kr)("PersonalScheduleManager"),c.setAttribute("displayed","false")}},8279(t,e,n){n.d(e,{Vc:()=>s,X8:()=>l});var r=n(2648),i=n(8179),a=n(904),u=(0,i.bv)(".cl"),o=(0,i.aI)(u,".hl");function l(t){(0,a.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,r.$)(t,"M",.5,.3,1,"var(--a)",4);o.innerHTML=e}(t)}function s(){(0,a.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>b,I1:()=>g,Ps:()=>y,om:()=>I});var r=n(5352),i=n(8179),a=n(904),u=n(9119);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,u,o=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(t){s=!0,i=t}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s=(0,i.bv)(".lj"),d=(0,i.aI)(s,".qj"),c=(0,i.aI)(d,".rj"),f=(0,i.aI)(c,'.sj[group="schedule-name"] .wj input'),h=(0,i.aI)(c,'.sj[group="schedule-start-time"] .wj input'),v=(0,i.aI)(c,'.sj[group="schedule-end-time"] .wj input'),p=(0,i.aI)(c,'.sj[group="schedule-days"] .wj'),m=(0,i.jg)(p,".xj");function y(){for(var t=f.value,e=h.value,n=v.value,i=o(String(e).split(":").map(function(t){return parseInt(t)}),2),a=i[0],l=i[1],s=o(String(n).split(":").map(function(t){return parseInt(t)}),2),d=s[0],c=s[1],p=[],y=0;y<7;y++){var g=m[y],I=g.getAttribute("highlighted"),A=parseInt(g.getAttribute("day"));"true"===I&&p.push(A)}(0,r.Qh)(t,a,l,d,c,p).then(function(t){t?(b(),(0,u.a)("已建立個人化行程","calendar_view_day")):(0,u.a)("無法建立個人化行程","error")})}function g(){(0,a.WR)("PersonalScheduleCreator"),s.setAttribute("displayed","true"),(0,a.Z_)()}function b(){s.setAttribute("displayed","false"),(0,a.l$)()}function I(t){var e=(0,i.aI)(p,`.xj[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},9119(t,e,n){n.d(e,{a:()=>s});var r=n(3459),i=n(8024),a=n(8179),u=n(4537);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw a}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){var n=(0,a.e0)(".il");if(null!==n){var l,s=o(n);try{for(s.s();!(l=s.n()).done;){l.value.remove()}}catch(t){s.e(t)}finally{s.f()}}var d=(0,r.Js)("playing_animation"),c=(0,i.zx)(),f=document.createElement("div");f.id=c,f.classList.add("il"),f.setAttribute("animation",(0,i.xZ)(d));var h=document.createElement("div");h.classList.add("jl"),h.appendChild((0,u.Y)(e)),f.appendChild(h);var v=document.createElement("div");v.classList.add("kl"),v.innerText=t,f.appendChild(v),document.body.appendChild(f);var p=document.getElementById(c);null!==p&&p.addEventListener("animationend",function(){p.remove()},{once:!0})}}}]);
//# sourceMappingURL=e858e114f2d578ddaac3.js.map