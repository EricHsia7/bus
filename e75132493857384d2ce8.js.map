{"version":3,"file":"e75132493857384d2ce8.js","mappings":"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","sources":["webpack://bus/./src/interface/folder-creator/index.ts","webpack://bus/./src/interface/folder-icon-selector/index.ts","webpack://bus/./src/interface/folder-manager/index.ts","webpack://bus/./src/interface/folder-editor/index.ts","webpack://bus/./src/interface/data-usage/index.ts"],"sourcesContent":["import { createFolder } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst FolderCreatorBodyElement = elementQuerySelector(FolderCreatorField, '.css_folder_creator_body');\nconst FolderCreatorGroupsElement = elementQuerySelector(FolderCreatorBodyElement, '.css_folder_creator_groups');\nconst NameInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-name\"] .css_folder_creator_group_body input');\nconst IconInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\n\nexport function createFormulatedFolder(): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  createFolder(name, icon).then((e) => {\n    if (e) {\n      closeFolderCreator();\n      promptMessage('已建立資料夾', 'folder');\n    } else {\n      promptMessage('無法建立資料夾', 'error');\n    }\n  });\n}\n\nexport function openFolderCreator(): void {\n  pushPageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'true');\n  closePreviousPage();\n}\n\nexport function closeFolderCreator(): void {\n  // revokePageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n","import { getMaterialSymbols } from '../../data/apis/getMaterialSymbols/index';\nimport { deleteDataReceivingProgress } from '../../data/apis/loader';\nimport { prepareForMaterialSymbolsSearch, searchForMaterialSymbols } from '../../data/search/searchMaterialSymbols';\nimport { generateIdentifier } from '../../tools/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getIconHTML } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype Target = 'editor' | 'creator' | '';\n\nlet currentTarget: Target = '';\n\nconst folderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst folderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst folderIconSelectorField = documentQuerySelector('.css_folder_icon_selector_field');\n\nfunction generateElementOfSymbol(symbol: string): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_folder_icon_selector_symbol');\n  element.onclick = function () {\n    selectFolderIcon(symbol, currentTarget);\n  };\n  element.innerHTML = getIconHTML(symbol);\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nasync function initializeFolderIconSelectorField() {\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  materialSymbolsElement.innerHTML = '';\n  const requestID = generateIdentifier();\n  const materialSymbols = await getMaterialSymbols(requestID);\n  deleteDataReceivingProgress(requestID);\n  const fragment = new DocumentFragment();\n  for (const symbol of materialSymbols) {\n    const symbolElement = generateElementOfSymbol(symbol, currentTarget);\n    fragment.appendChild(symbolElement.element);\n  }\n  materialSymbolsElement.append(fragment);\n}\n\nexport function updateMaterialSymbolsSearchResult(query: string): void {\n  const materialSymbolsSearchResultsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols_search_results');\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  if (!containPhoneticSymbols(query)) {\n    const searchResults = searchForMaterialSymbols(query, 100);\n    const fragment = new DocumentFragment();\n    for (const result of searchResults) {\n      const symbolElement = generateElementOfSymbol(result.item, currentTarget);\n      fragment.appendChild(symbolElement.element);\n    }\n    materialSymbolsSearchResultsElement.innerHTML = '';\n    materialSymbolsSearchResultsElement.append(fragment);\n    materialSymbolsSearchResultsElement.setAttribute('displayed', searchResults.length > 0 ? 'true' : 'false');\n    materialSymbolsElement.setAttribute('displayed', searchResults.length > 0 ? 'false' : 'true');\n  }\n}\n\nexport function selectFolderIcon(symbol: string): void {\n  let iconInputElement;\n  switch (currentTarget) {\n    case 'editor':\n      iconInputElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input');\n      break;\n    case 'creator':\n      iconInputElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\n      break;\n    default:\n      break;\n  }\n  iconInputElement.value = symbol;\n  closeFolderIconSelector();\n}\n\nexport function openFolderIconSelector(target: Target): void {\n  pushPageHistory('FolderIconSelector');\n  var openFolderIconSelectorElement;\n  switch (target) {\n    case 'editor':\n      currentTarget = 'editor';\n      openFolderIconSelectorElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\n      break;\n    case 'creator':\n      currentTarget = 'creator';\n      openFolderIconSelectorElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input .css_folder_creator_open_folder_icon_selector');\n      break;\n    default:\n      break;\n  }\n  if (openFolderIconSelectorElement.getAttribute('disabled') === 'false') {\n    if (dataDownloadCompleted) {\n      folderIconSelectorField.setAttribute('displayed', 'true');\n      initializeFolderIconSelectorField(currentTarget);\n      prepareForMaterialSymbolsSearch();\n    } else {\n      promptMessage('資料還在下載中', 'download_for_offline');\n    }\n  }\n}\n\nexport function closeFolderIconSelector(): void {\n  revokePageHistory('FolderIconSelector');\n  folderIconSelectorField.setAttribute('displayed', 'false');\n}\n","import { FolderWithContent, listFoldersWithContent } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { openFolderEditor } from '../folder-editor/index';\nimport { getIconHTML } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\n\nconst FolderManagerField = documentQuerySelector('.css_folder_manager_field');\nconst FolderManagerBodyElement = elementQuerySelector(FolderManagerField, '.css_folder_manager_body');\nconst FolderManagerFolderListElement = elementQuerySelector(FolderManagerBodyElement, '.css_folder_manager_folder_list');\n\nfunction generateElementOfItem(item: FolderWithContent): GeneratedElement {\n  // Main container\n  const folderItemElement = document.createElement('div');\n  folderItemElement.classList.add('css_folder_manager_folder_item');\n  folderItemElement.onclick = () => {\n    openFolderEditor(item.id);\n  };\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_manager_folder_item_icon');\n  iconElement.innerHTML = getIconHTML(item.icon);\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_folder_manager_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_folder_manager_folder_item_status');\n  statusElement.appendChild(document.createTextNode(String(item.contentLength)));\n\n  // Arrow\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_folder_manager_folder_item_arrow');\n  arrowElement.innerHTML = getIconHTML('arrow_forward_ios');\n\n  // Assemble\n  folderItemElement.appendChild(iconElement);\n  folderItemElement.appendChild(nameElement);\n  folderItemElement.appendChild(statusElement);\n  folderItemElement.appendChild(arrowElement);\n\n  return {\n    element: folderItemElement,\n    id: ''\n  };\n}\n\nasync function initializeFolderManagerField() {\n  const foldersWithContent = await listFoldersWithContent();\n  FolderManagerFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item);\n    fragment.appendChild(newItemElement.element);\n  }\n  FolderManagerFolderListElement.append(fragment);\n}\n\nexport function openFolderManager(): void {\n  pushPageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'true');\n  initializeFolderManagerField();\n  // closePreviousPage();\n}\n\nexport function closeFolderManager(): void {\n  revokePageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { Folder, FolderContent, getFolder, listFolderContent, removeFromFolder, updateFolder, updateFolderContentIndex } from '../../data/folder/index';\nimport { generateIdentifier } from '../../tools/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { openFolderIconSelector } from '../folder-icon-selector/index';\nimport { getIconHTML } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst FolderEditorHeadElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_head');\nconst LeftButtonElement = elementQuerySelector(FolderEditorHeadElement, '.css_folder_editor_button_left');\nconst FolderEditorBodyElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_body');\nconst FolderEditorGroupsElement = elementQuerySelector(FolderEditorBodyElement, '.css_folder_editor_groups');\nconst NameInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-name\"] .css_folder_editor_group_body input') as HTMLInputElement;\nconst IconInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input') as HTMLInputElement;\nconst OpenFolderIconSelectorElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\nconst FolderContentElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body');\n\nOpenFolderIconSelectorElement.onclick = function () {\n  openFolderIconSelector('editor');\n};\n\nfunction generateElementOfItem(folder: Folder, item: FolderContent): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.id = identifier;\n  itemElement.classList.add('css_folder_editor_folder_item');\n  itemElement.setAttribute('type', item.type);\n\n  // Icon, context, main text\n  let context = '';\n  let main = '';\n  let icon = '';\n  switch (item.type) {\n    case 'stop':\n      icon = 'location_on';\n      context = `${item.route ? item.route.name : ''} - 往${item.route ? [item.route.endPoints.destination, item.route.endPoints.departure, ''][item.direction ? item.direction : 0] : ''}`;\n      main = item.name;\n      break;\n    case 'route':\n      icon = 'route';\n      context = `${item.endPoints.departure} \\u2194 ${item.endPoints.destination}`;\n      main = item.name;\n      break;\n    case 'bus':\n      context = '';\n      main = item.name;\n      break;\n    case 'empty':\n      icon = 'lightbulb';\n      context = '提示';\n      main = '沒有內容';\n      break;\n    default:\n      icon = '';\n      context = 'null';\n      main = 'null';\n      break;\n  }\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_editor_folder_item_icon');\n  iconElement.innerHTML = getIconHTML(icon);\n\n  // Context element\n  const contextElement = document.createElement('div');\n  contextElement.classList.add('css_folder_editor_folder_item_context');\n  contextElement.appendChild(document.createTextNode(context));\n\n  // Main element\n  const mainElement = document.createElement('div');\n  mainElement.classList.add('css_folder_editor_folder_item_main');\n  mainElement.appendChild(document.createTextNode(main));\n\n  // Capsule element\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_folder_editor_folder_item_capsule');\n\n  // Sort up control\n  const sortUpElement = document.createElement('div');\n  sortUpElement.classList.add('css_folder_editor_folder_item_sort_control_up');\n  sortUpElement.innerHTML = getIconHTML('keyboard_arrow_down');\n  sortUpElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'up');\n  };\n\n  // Sort down control\n  const sortDownElement = document.createElement('div');\n  sortDownElement.classList.add('css_folder_editor_folder_item_sort_control_down');\n  sortDownElement.innerHTML = getIconHTML('keyboard_arrow_down');\n  sortDownElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'down');\n  };\n\n  // Delete control\n  const deleteElement = document.createElement('div');\n  deleteElement.classList.add('css_folder_editor_folder_item_delete');\n  deleteElement.innerHTML = getIconHTML('delete');\n  deleteElement.onclick = () => {\n    removeItemOnFolderEditor(identifier, folder.id, item.type, item.id);\n  };\n\n  // Capsule separators\n  const separator1Element = document.createElement('div');\n  separator1Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n  const separator2Element = document.createElement('div');\n  separator2Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(sortUpElement);\n  capsuleElement.appendChild(sortDownElement);\n  capsuleElement.appendChild(deleteElement);\n  capsuleElement.appendChild(separator1Element);\n  capsuleElement.appendChild(separator2Element);\n\n  // Assemble main item\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(contextElement);\n  itemElement.appendChild(mainElement);\n  itemElement.appendChild(capsuleElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction updateFolderEditorField(folder: Folder, content: Array<FolderContent>): void {\n  NameInputElement.value = folder.name;\n  IconInputElement.value = folder.icon;\n\n  LeftButtonElement.onclick = function () {\n    saveEditedFolder(folder.id);\n  };\n\n  FolderContentElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of content) {\n    const thisItemElement = generateElementOfItem(folder, item);\n    fragment.appendChild(thisItemElement.element);\n  }\n  FolderContentElement.append(fragment);\n}\n\nasync function initializeFolderEditorField(folderID: string) {\n  //TODO: add skeleton screen\n  const folder = await getFolder(folderID);\n  const content = await listFolderContent(folderID);\n  updateFolderEditorField(folder, content);\n}\n\nexport function openFolderEditor(folderID: string): void {\n  pushPageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'true');\n  initializeFolderEditorField(folderID);\n  closePreviousPage();\n}\n\nexport function closeFolderEditor(): void {\n  // revokePageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function removeItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: number): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  removeFromFolder(folderID, type, id).then((e) => {\n    if (e) {\n      itemElement.remove();\n      switch (type) {\n        case 'stop':\n          promptMessage('已移除站牌', 'delete');\n          break;\n        case 'route':\n          promptMessage('已移除路線', 'delete');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('無法移除', 'error');\n    }\n  });\n}\n\nexport function moveItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: FolderContent['id'], direction: 'up' | 'down'): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  updateFolderContentIndex(folderID, type, id, direction).then((e) => {\n    if (e) {\n      switch (direction) {\n        case 'up':\n          const previousSibling = itemElement.previousElementSibling;\n          if (previousSibling) {\n            itemElement.parentNode.insertBefore(itemElement, previousSibling);\n          }\n          promptMessage('已往上移', 'arrow_circle_up');\n          break;\n        case 'down':\n          const nextSibling = itemElement.nextElementSibling;\n          if (nextSibling) {\n            itemElement.parentNode.insertBefore(nextSibling, itemElement);\n          }\n          promptMessage('已往下移', 'arrow_circle_down');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('無法移動', 'error');\n    }\n  });\n}\n\nexport function saveEditedFolder(folderID: string): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  updateFolder(folderID, name, icon);\n  closeFolderEditor();\n}\n","import { getDataUsageStats } from '../../data/analytics/data-usage/index';\nimport { convertBytes } from '../../tools/convert';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { dateToString } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory, querySize } from '../index';\n\nconst dataUsageField = documentQuerySelector('.css_data_usage_field');\nconst dataUsageBodyElement = elementQuerySelector(dataUsageField, '.css_data_usage_body');\nconst chartElement = elementQuerySelector(dataUsageBodyElement, '.css_data_usage_chart');\nconst statisticsElement = elementQuerySelector(dataUsageBodyElement, '.css_data_usage_statistics');\nconst totalDataUsageElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"total-data-usage\"] .css_data_usage_statistics_item_value');\nconst startTimeElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"start-time\"] .css_data_usage_statistics_item_value');\nconst endTimeElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"end-time\"] .css_data_usage_statistics_item_value');\n\nasync function initializeDataUsage() {\n  const WindowSize = querySize('window');\n  const graphWidth = WindowSize.width;\n  const graphHeight = Math.min((5 / 18) * graphWidth, WindowSize.height * 0.33);\n  const stats = await getDataUsageStats(graphWidth, graphHeight, 20);\n  totalDataUsageElement.innerText = convertBytes(stats.stats.sum);\n  startTimeElement.innerText = dateToString(stats.period.start, 'YYYY-MM-DD');\n  endTimeElement.innerText = dateToString(stats.period.end, 'YYYY-MM-DD');\n  chartElement.innerHTML = stats.chart;\n}\n\nexport function openDataUsage(): void {\n  pushPageHistory('DataUsage');\n  dataUsageField.setAttribute('displayed', 'true');\n  initializeDataUsage();\n  closePreviousPage();\n}\n\nexport function closeDataUsage(): void {\n  // revokePageHistory('DataUsage');\n  dataUsageField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n"],"names":["FolderCreatorField","documentQuerySelector","FolderCreatorBodyElement","elementQuerySelector","FolderCreatorGroupsElement","NameInputElement","IconInputElement","createFormulatedFolder","name","value","icon","createFolder","then","e","closeFolderCreator","promptMessage","openFolderCreator","pushPageHistory","setAttribute","closePreviousPage","openPreviousPage","currentTarget","folderEditorField","folderCreatorField","folderIconSelectorField","generateElementOfSymbol","symbol","element","document","createElement","classList","add","onclick","selectFolderIcon","innerHTML","getIconHTML","id","_initializeFolderIconSelectorField","materialSymbolsElement","requestID","generateIdentifier","materialSymbols","getMaterialSymbols","deleteDataReceivingProgress","_step2","fragment","DocumentFragment","_iterator2","_createForOfIteratorHelper","s","n","done","symbolElement","appendChild","err","f","append","apply","arguments","updateMaterialSymbolsSearchResult","query","materialSymbolsSearchResultsElement","containPhoneticSymbols","_step","searchResults","searchForMaterialSymbols","_iterator","item","length","iconInputElement","closeFolderIconSelector","openFolderIconSelector","target","openFolderIconSelectorElement","getAttribute","dataDownloadCompleted","initializeFolderIconSelectorField","prepareForMaterialSymbolsSearch","revokePageHistory","FolderManagerField","FolderManagerBodyElement","FolderManagerFolderListElement","generateElementOfItem","folderItemElement","openFolderEditor","iconElement","nameElement","createTextNode","statusElement","String","contentLength","arrowElement","_initializeFolderManagerField","foldersWithContent","listFoldersWithContent","newItemElement","openFolderManager","initializeFolderManagerField","closeFolderManager","FolderEditorField","FolderEditorHeadElement","LeftButtonElement","FolderEditorBodyElement","FolderEditorGroupsElement","OpenFolderIconSelectorElement","FolderContentElement","folder","identifier","itemElement","type","context","main","route","endPoints","destination","departure","direction","contextElement","mainElement","capsuleElement","sortUpElement","moveItemOnFolderEditor","sortDownElement","deleteElement","removeItemOnFolderEditor","separator1Element","separator2Element","_initializeFolderEditorField","folderID","content","saveEditedFolder","thisItemElement","updateFolderEditorField","getFolder","listFolderContent","_x","initializeFolderEditorField","closeFolderEditor","itemID","removeFromFolder","remove","updateFolderContentIndex","previousSibling","previousElementSibling","parentNode","insertBefore","nextSibling","nextElementSibling","updateFolder","dataUsageField","dataUsageBodyElement","chartElement","statisticsElement","totalDataUsageElement","startTimeElement","endTimeElement","_initializeDataUsage","WindowSize","querySize","graphWidth","width","graphHeight","Math","min","height","stats","getDataUsageStats","innerText","convertBytes","sum","dateToString","period","start","end","chart","openDataUsage","initializeDataUsage","closeDataUsage"],"sourceRoot":""}