{"version":3,"file":"777706ab1fdf0bb4989f.js","mappings":"uIAYO,SAASA,EAAUC,EAAcC,GAA6E,IAAhEC,EAAoBC,UAAAC,OAAC,QAADC,IAAAF,UAAA,IAAAA,UAAA,GAAUG,EAAgBH,UAAAC,OAAC,QAADC,IAAAF,UAAA,GAAAA,UAAA,GAAG,IAC9FI,EAAS,CAAC,UAAW,WAGrBC,EAAU,CAAC,UAAW,WAAY,UAAW,aAAc,eAAgB,QAAS,YAAa,mBAAoB,aAAc,WAAY,QAAS,OAAQ,gBAAiB,eAAgB,YAAa,oBAC9MC,GAAQC,EAAAA,EAAAA,GAAsB,SACpC,OAAIR,EACK,0DAA0DK,EAAOP,SAAYQ,EAAQP,YAAaU,EAAAA,EAAAA,GAAoBL,KAEzHG,EACK,sFAAsFF,EAAOP,SAAYQ,EAAQP,YAAaU,EAAAA,EAAAA,GAAoBL,KAElJ,0CAA0CC,EAAOP,SAAYQ,EAAQP,YAAaU,EAAAA,EAAAA,GAAoBL,IAGnH,CAEO,SAASM,IAA2D,IAAlCN,EAAgBH,UAAAC,OAAC,QAADC,IAAAF,UAAA,GAAAA,UAAA,GAAG,IAC1D,MAAO,wEAAuEQ,EAAAA,EAAAA,GAAoBL,IACpG,C,gECTO,SAAeO,EAAUC,GAAA,OAAAC,EAAAC,MAAC,KAADb,UAAA,CAe/B,SAAAY,IAAA,OAAAA,GAAAE,EAAAA,EAAAA,GAfM,UAA0BC,GAC/B,IAIMC,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,GACJ,CAAC,EAAG,IAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,cAAcjB,EAAI,KAAM,QAC5DsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,IAACH,MAAA,KAAAb,UAAA,C,gECjBM,SAAe2B,EAAWhB,GAAA,OAAAiB,EAAAf,MAAC,KAADb,UAAA,CAehC,SAAA4B,IAAA,OAAAA,GAAAd,EAAAA,EAAAA,GAfM,UAA2BC,GAChC,IAIMC,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,GACJ,CAAC,EAAG,IAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,eAAejB,EAAI,KAAM,QAC7DsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,IAACH,MAAA,KAAAb,UAAA,C,0ECRK6B,EAA0B,CAC9BC,IAAK,CACHZ,KAAM,GACNa,WAAW,GAEbC,WAAY,CACVd,KAAM,CAAC,EACPa,WAAW,IAEb,SAEaE,EAAetB,GAAA,OAAAuB,EAAArB,MAAC,KAADb,UAAA,UAAAkC,IAmB7B,OAnB6BA,GAAApB,EAAAA,EAAAA,GAA9B,UAA+BqB,GAC7B,IAAMC,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAYZ,EACrB,EAGF,IAACtB,MAAA,KAAAb,UAAA,CAEM,SAAegD,EAAUC,GAAA,OAAAC,EAAArC,MAAC,KAADb,UAAA,CA6D/B,SAAAkD,IAAA,OAAAA,GAAApC,EAAAA,EAAAA,GA7DM,UAA0BC,GAAsF,IAAnEiB,EAAmBhC,UAAAC,OAAC,QAADC,IAAAF,UAAA,IAAAA,UAAA,GAAQ,SAC9DmD,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAerB,OAfqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIME,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,GACJ,CAAC,EAAG,IAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,cAAcjB,EAAI,KAAM,QAC5DsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CAED,IAAMqD,EAAYrB,EAAa,aAAe,MACxCsB,EAAW,OAAOD,mBAElBE,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IACIE,EADEzC,QAAemC,IAarB,OAVEM,EADEzB,QACkBC,EAAgBjB,GAEtBA,QAEV0C,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAUL,IACvC5B,EAAwBwB,GAAWtB,YACtCF,EAAwBwB,GAAWtB,WAAY,EAC/CF,EAAwBwB,GAAWnC,KAAOuC,GAErCA,CACT,CACE,IAAI,IAAIE,MAAOC,UAAYG,SAASR,GAlBd,OAkBiD,CACrE,IACIE,EADEzC,QAAemC,IASrB,OANEM,EADEzB,QACkBC,EAAgBjB,GAEtBA,QAEV0C,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAUL,IACrCA,CACT,CACE,IAAK5B,EAAwBwB,GAAWtB,UAAW,CACjD,IAAMiC,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjCzB,EAAwBwB,GAAWtB,WAAY,EAC/CF,EAAwBwB,GAAWnC,KAAO2C,KAAKI,MAAMD,EACvD,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,eAAgB,GAAG,IACvDmD,EAAAA,EAAAA,GAAyBnD,EAAW,eAAgB,GAAG,IACvDS,EAAAA,EAAAA,GAAkBT,GAAY,GACvBc,EAAwBwB,GAAWnC,IAGhD,GAACgC,EAAArC,MAAA,KAAAb,UAAA,C,gEC5GM,SAAemE,EAAexD,GAAA,OAAAyD,EAAAvD,MAAC,KAADb,UAAA,CAepC,SAAAoE,IAAA,OAAAA,GAAAtD,EAAAA,EAAAA,GAfM,UAA+BC,GACpC,IAIMC,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,GACJ,CAAC,EAAG,IAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,mBAAmBjB,EAAI,KAAM,QACjEsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,IAACH,MAAA,KAAAb,UAAA,C,0ECkCKqE,EAA2B,CAC/BrC,WAAY,CACVD,WAAW,EACXb,KAAM,CAAC,GAEToD,OAAQ,CACNvC,WAAW,EACXb,KAAM,CAAC,GAETqD,QAAS,CACPxC,WAAW,EACXb,KAAM,CAAC,IAET,SAEasD,EAAgB7D,GAAA,OAAA8D,EAAA5D,MAAC,KAADb,UAAA,UAAAyE,IAmB9B,OAnB8BA,GAAA3D,EAAAA,EAAAA,GAA/B,UAAgC4D,GAC9B,IAAMtC,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAY2B,EACrB,EAGF,IAAC7D,MAAA,KAAAb,UAAA,UAEc2E,EAAmB1B,GAAA,OAAA2B,EAAA/D,MAAC,KAADb,UAAA,UAAA4E,IAmBjC,OAnBiCA,GAAA9D,EAAAA,EAAAA,GAAlC,UAAmC+D,GACjC,IAAMzC,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAY8B,EACrB,EAGF,IAAChE,MAAA,KAAAb,UAAA,UAEc8E,EAAsBC,GAAA,OAAAC,EAAAnE,MAAC,KAADb,UAAA,CAqBrC,SAAAgF,IAFC,OAEDA,GAAAlE,EAAAA,EAAAA,GArBA,UAAsC+D,GACpC,IAAMzC,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAY8B,EACrB,EAGF,IAAChE,MAAA,KAAAb,UAAA,CASM,SAAeiF,EAAWC,EAAAC,GAAA,OAAAC,EAAAvE,MAAC,KAADb,UAAA,CAmGhC,SAAAoF,IAAA,OAAAA,GAAAtE,EAAAA,EAAAA,GAnGM,UAA2BC,EAAmBsE,GAAiF,SACrHlC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAerB,OAfqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIME,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,IACJ,CAAC,EAAG,KAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,eAAejB,EAAI,KAAM,QAC7DsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,GAAK,GACnDkE,MAAMC,UAAUhE,KAAKV,MAAMG,EAAQE,EAAKI,QAAQkE,MAAMpE,EAAGA,EAAI,MAE/DI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CAED,IACMqD,EAAY,CAAC,aAAc,SAAU,WAAWgC,GAChD/B,EAAW,OAAOD,mBAClBE,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IAAIE,EACJ,OAAQ4B,GACN,KAAK,EACH,IAAMrE,QAAemC,IAErBM,QADgCe,EAAiBxD,GAEjD,MAEF,KAAK,EACH,IAAMyE,QAA0BR,EAAYlE,EAAW,GAEvD0C,QAD4BkB,EAAoBc,GAEhD,MAEF,KAAK,EACH,IAAMC,QAAsBT,EAAYlE,EAAW,GAEnD0C,QAD6BqB,EAAuBY,GAcxD,aANMhC,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAUL,IACvCY,EAAyBhB,GAAWtB,YACvCsC,EAAyBhB,GAAWtB,WAAY,EAChDsC,EAAyBhB,GAAWnC,KAAOuC,GAEtCA,CACT,CACE,IAAI,IAAIE,MAAOC,UAAYG,SAASR,GArCd,OAqCiD,CACrE,IAAIE,EACJ,OAAQ4B,GACN,KAAK,EACH,IAAMrE,QAAemC,IAErBM,QADgCe,EAAiBxD,GAEjD,MAEF,KAAK,EACH,IAAMyE,QAA0BR,EAAYlE,EAAW,GAEvD0C,QAD4BkB,EAAoBc,GAEhD,MAEF,KAAK,EACH,IAAMC,QAAsBT,EAAYlE,EAAW,GAEnD0C,QAD6BqB,EAAuBY,GAcxD,aANMhC,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAUL,IACvCY,EAAyBhB,GAAWtB,YACvCsC,EAAyBhB,GAAWtB,WAAY,EAChDsC,EAAyBhB,GAAWnC,KAAOuC,GAEtCA,CACT,CACE,IAAKY,EAAyBhB,GAAWtB,UAAW,CAClD,IAAMiC,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjCe,EAAyBhB,GAAWtB,WAAY,EAChDsC,EAAyBhB,GAAWnC,KAAO2C,KAAKI,MAAMD,EACxD,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,gBAAiB,GAAG,IACxDmD,EAAAA,EAAAA,GAAyBnD,EAAW,gBAAiB,GAAG,IACxDS,EAAAA,EAAAA,GAAkBT,GAAY,GACvBsD,EAAyBhB,GAAWnC,IAGjD,GAACkE,EAAAvE,MAAA,KAAAb,UAAA,C,0ECtOG2F,GAAqD,EACrDC,EAA2E,GAE/E,SAASC,EAAiC3E,GACxC,IAAM4E,EAAa5E,EAAK4E,WAAWC,MAAM,KACzC,IAAK,IAAMC,KAAa9E,EAAK+E,QAAS,CAEpC,IADA,IAAMC,EAAuBF,EAAUD,MAAM,KACpC3E,EAAI8E,EAAqBjG,OAAS,EAAGmB,GAAK,EAAGA,IACpD8E,EAAqBC,OAAO/E,EAAG,EAAG0E,EAAW/B,SAASmC,EAAqB9E,MAE7EF,EAAK+E,QAAQC,EAAqBE,KAAK,MAAQlF,EAAK+E,QAAQD,UACrD9E,EAAK+E,QAAQD,EACtB,CAEA,OAAO9E,CACT,CAEO,SAAemF,EAA6B1F,GAAA,OAAA2F,EAAAzF,MAAC,KAADb,UAAA,CAyClD,SAAAsG,IAAA,OAAAA,GAAAxF,EAAAA,EAAAA,GAzCM,UAA6CC,GAAgE,SACnGoC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAIrB,OAJqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAAMyF,GAAS9F,EAAAA,EAAAA,KAEf,aADmBU,EAAAA,EAAAA,GAAUoF,EAAQxF,EAAW,gCAAiC,OAEnF,IAACF,MAAA,KAAAb,UAAA,CAED,IACMsD,EAAW,6CACXC,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IACMiD,EAAWX,QADI1C,KAQrB,aANMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU0C,IACvCb,IACHA,GAA4C,EAC5CC,EAAuCY,GAElCA,CACT,CACE,IAAI,IAAI7C,MAAOC,UAAYG,SAASR,GAdd,OAciD,CACrE,IACMiD,EAAWX,QADI1C,KAQrB,aANMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU0C,IACvCb,IACHA,GAA4C,EAC5CC,EAAuCY,GAElCA,CACT,CACE,IAAKb,EAA2C,CAC9C,IAAM3B,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjCqC,GAA4C,EAC5CC,EAAuC/B,KAAKI,MAAMD,EACpD,CAEA,OADAE,EAAAA,EAAAA,GAAyBnD,EAAW,gCAAiC,GAAG,GACjE6E,CAGb,GAACU,EAAAzF,MAAA,KAAAb,UAAA,C,yECvDGyG,GAA8C,EAC9CC,EAAwC,CAAC,EAEtC,SAAeC,EAAWhG,GAAA,OAAAiG,EAAA/F,MAAC,KAADb,UAAA,CAgDhC,SAAA4G,IAAA,OAAAA,GAAA9F,EAAAA,EAAAA,GAhDM,UAA2BC,GAAsC,SACvDoC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAerB,OAfqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIME,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,GACJ,CAAC,EAAG,IAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,eAAejB,EAAI,KAAM,QAC7DsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CAED,IACMsD,EAAW,qBACXC,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IAAMvC,QAAemC,IAOrB,aANMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU9C,IACvCyF,IACHA,GAAqC,EACrCC,EAAgC1F,GAE3BA,CACT,CACE,IAAI,IAAI2C,MAAOC,UAAYG,SAASR,GAbd,OAaiD,CACrE,IAAMvC,QAAemC,IAGrB,aAFMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU9C,IACrCA,CACT,CACE,IAAKyF,EAAoC,CACvC,IAAMzC,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjCmD,GAAqC,EACrCC,EAAgC7C,KAAKI,MAAMD,EAC7C,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,gBAAiB,GAAG,IACxDmD,EAAAA,EAAAA,GAAyBnD,EAAW,gBAAiB,GAAG,IACxDS,EAAAA,EAAAA,GAAkBT,GAAY,GACvB2F,CAGb,GAACE,EAAA/F,MAAA,KAAAb,UAAA,C,0ECRG6G,GAA2C,EAC3CC,EAAqC,CAAC,EAAE,SAE7BC,EAAapG,GAAA,OAAAqG,EAAAnG,MAAC,KAADb,UAAA,UAAAgH,IAmB3B,OAnB2BA,GAAAlG,EAAAA,EAAAA,GAA5B,UAA6BmG,GAC3B,IAAM7E,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAYkE,EACrB,EAGF,IAACpG,MAAA,KAAAb,UAAA,CAEM,SAAekH,EAAQjE,GAAA,OAAAkE,EAAAtG,MAAC,KAADb,UAAA,CAwD7B,SAAAmH,IAAA,OAAAA,GAAArG,EAAAA,EAAAA,GAxDM,UAAwBC,GAA2C,SACzDoC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAerB,OAfqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIME,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,IACJ,CAAC,EAAG,KAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,YAAYjB,EAAI,KAAM,QAC1DsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CACD,IAAiB,OAjBgDA,UAAAC,OAAC,QAADC,IAAAF,UAAA,KAAAA,UAAA,IAkB/D,aAAamD,IAEf,IACMG,EAAW,kBACXC,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IAAMvC,QAAemC,IACfsC,QAA0BsB,EAAc/F,GAO9C,aANM0C,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU2B,IACvCoB,IACHA,GAAkC,EAClCC,EAA6BrB,GAExBA,CACT,CACE,IAAI,IAAI9B,MAAOC,UAAYG,SAASR,GAdd,MAciD,CACrE,IAAMvC,QAAemC,IACfsC,QAA0BsB,EAAc/F,GAO9C,aANM0C,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU2B,IACvCoB,IACHA,GAAkC,EAClCC,EAA6BrB,GAExBA,CACT,CACE,IAAKoB,EAAiC,CACpC,IAAM7C,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjCuD,GAAkC,EAClCC,EAA6BjD,KAAKI,MAAMD,EAC1C,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,aAAc,GAAG,IACrDmD,EAAAA,EAAAA,GAAyBnD,EAAW,aAAc,GAAG,IACrDS,EAAAA,EAAAA,GAAkBT,GAAY,GACvB+F,CAGb,GAACK,EAAAtG,MAAA,KAAAb,UAAA,C,0ECtHGoH,GAAoD,EACpDC,EAA8C,CAAC,EAAE,SAEtCC,EAAqB3G,GAAA,OAAA4G,EAAA1G,MAAC,KAADb,UAAA,UAAAuH,IAmBnC,OAnBmCA,GAAAzG,EAAAA,EAAAA,GAApC,UAAqC0G,GACnC,IAAMpF,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAYyE,EACrB,EAGF,IAAC3G,MAAA,KAAAb,UAAA,UAEcyH,EAAsBxE,GAAA,OAAAyE,EAAA7G,MAAC,KAADb,UAAA,UAAA0H,IAmBpC,OAnBoCA,GAAA5G,EAAAA,EAAAA,GAArC,UAAsC6G,GACpC,IAAMvF,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAY4E,EACrB,EAGF,IAAC9G,MAAA,KAAAb,UAAA,CAEM,SAAe4H,EAAiB7C,GAAA,OAAA8C,EAAAhH,MAAC,KAADb,UAAA,CAkDtC,SAAA6H,IAAA,OAAAA,GAAA/G,EAAAA,EAAAA,GAlDM,UAAiCC,GAAqD,SAC5EoC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAarB,OAbqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIIE,EAAS,GACb,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,IACJ,CAAC,EAAG,KAGkB,CACtB,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAElCkB,UADmBG,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,qBAAqBjB,EAAI,KAAM,SAE5E0B,EAAAA,EAAAA,GAAkBT,GAAY,EAChC,CACA,OAAOC,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CAED,IACMsD,EAAW,4BACXC,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IAAMvC,QAAemC,IACf2E,QAAwBR,EAAsBtG,GAC9C+G,QAAyBN,EAAuBK,GAOtD,aANMpE,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAUiE,IACvCX,IACHA,GAA2C,EAC3CC,EAAsCU,GAEjCA,CACT,CACE,IAAI,IAAIpE,MAAOC,UAAYG,SAASR,GAfd,OAeiD,CACrE,IAAMvC,QAAemC,IACf2E,QAAwBR,EAAsBtG,GAC9C+G,QAAyBN,EAAuBK,GAGtD,aAFMpE,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAUiE,IACrCA,CACT,CACE,IAAKX,EAA0C,CAC7C,IAAMpD,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjC8D,GAA2C,EAC3CC,EAAsCxD,KAAKI,MAAMD,EACnD,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,sBAAuB,GAAG,IAC9DmD,EAAAA,EAAAA,GAAyBnD,EAAW,sBAAuB,GAAG,IAC9DS,EAAAA,EAAAA,GAAkBT,GAAY,GACvBsG,CAGb,GAACQ,EAAAhH,MAAA,KAAAb,UAAA,C,0EClHGgI,GAAmD,EACnDC,EAA6C,CAAC,EAE3C,SAAeC,EAAgBvH,GAAA,OAAAwH,EAAAtH,MAAC,KAADb,UAAA,CAgDrC,SAAAmI,IAAA,OAAAA,GAAArH,EAAAA,EAAAA,GAhDM,UAAgCC,GAAoC,SAC1DoC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAerB,OAfqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIME,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,IACJ,CAAC,EAAG,KAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,oBAAoBjB,EAAI,KAAM,QAClEsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CAED,IACMsD,EAAW,2BACXC,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IAAMvC,QAAemC,IAOrB,aANMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU9C,IACvCgH,IACHA,GAA0C,EAC1CC,EAAqCjH,GAEhCA,CACT,CACE,IAAI,IAAI2C,MAAOC,UAAYG,SAASR,GAbd,QAaiD,CACrE,IAAMvC,QAAemC,IAGrB,aAFMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU9C,IACrCA,CACT,CACE,IAAKgH,EAAyC,CAC5C,IAAMhE,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjC0E,GAA0C,EAC1CC,EAAqCpE,KAAKI,MAAMD,EAClD,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,qBAAsB,GAAG,IAC7DmD,EAAAA,EAAAA,GAAyBnD,EAAW,qBAAsB,GAAG,IAC7DS,EAAAA,EAAAA,GAAkBT,GAAY,GACvBkH,CAGb,GAACE,EAAAtH,MAAA,KAAAb,UAAA,C,yECxBGoI,GAA0C,EAC1CC,EAA4C,CAAC,EAAE,SAEpCC,EAAY3H,GAAA,OAAA4H,EAAA1H,MAAC,KAADb,UAAA,UAAAuI,IAmB1B,OAnB0BA,GAAAzH,EAAAA,EAAAA,GAA3B,UAA4B6G,GAC1B,IAAMvF,EAAS,IAAIC,OAAO,IAAIC,IAAI,mBAiBlC,aAdqB,IAAIC,QAAQ,SAACC,EAASC,GACzCL,EAAOM,UAAY,SAAUC,GAC3BH,EAAQG,EAAEzB,MACVkB,EAAOQ,WACT,EAEAR,EAAOS,QAAU,SAAUF,GACzBF,EAAOE,EAAEG,SACTV,EAAOQ,WACT,EAEAR,EAAOW,YAAY4E,EACrB,EAGF,IAAC9G,MAAA,KAAAb,UAAA,CAEM,SAAewI,EAAOvF,GAAA,OAAAwF,EAAA5H,MAAC,KAADb,UAAA,CAkD5B,SAAAyI,IAAA,OAAAA,GAAA3H,EAAAA,EAAAA,GAlDM,UAAuBC,GAA4C,SACzDoC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAerB,OAfqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIME,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,IACJ,CAAC,EAAG,KAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,WAAWjB,EAAI,KAAM,QACzDsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,GAAK,GACnDkE,MAAMC,UAAUhE,KAAKV,MAAMG,EAAQE,EAAKI,QAAQkE,MAAMpE,EAAGA,EAAI,MAE/DI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CAED,IACMsD,EAAW,iBACXC,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IAAMvC,QAAemC,IACfsC,QAA0B6C,EAAatH,GAO7C,aANM0C,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU2B,IACvC2C,IACHA,GAAiC,EACjCC,EAA4B5C,GAEvBA,CACT,CACE,IAAI,IAAI9B,MAAOC,UAAYG,SAASR,GAdd,OAciD,CACrE,IAAMvC,QAAemC,IACfsC,QAA0B6C,EAAatH,GAG7C,aAFM0C,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU2B,IACrCA,CACT,CACE,IAAK2C,EAAgC,CACnC,IAAMpE,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjC8E,GAAiC,EACjCC,EAA4BxE,KAAKI,MAAMD,EACzC,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,YAAa,GAAG,IACpDmD,EAAAA,EAAAA,GAAyBnD,EAAW,YAAa,GAAG,IACpDS,EAAAA,EAAAA,GAAkBT,GAAY,GACvBsH,CAGb,GAACI,EAAA5H,MAAA,KAAAb,UAAA,C,0ECrGG0I,GAA+C,EAC/CC,EAAyC,CAAC,EAEvC,SAAeC,EAAYjI,GAAA,OAAAkI,EAAAhI,MAAC,KAADb,UAAA,CAgDjC,SAAA6I,IAAA,OAAAA,GAAA/H,EAAAA,EAAAA,GAhDM,UAA4BC,GAAoC,SACtDoC,IAAO,OAAAC,EAAAvC,MAAC,KAADb,UAAA,UAAAoD,IAerB,OAfqBA,GAAAtC,EAAAA,EAAAA,GAAtB,YACE,IAIME,EAAS,GACf,IAAK,IAAMlB,IALE,CACX,CAAC,EAAG,IACJ,CAAC,EAAG,KAGkB,CAGtB,IAFA,IAAMmB,GAAMrB,EAAAA,EAAAA,GAAUE,EAAI,GAAIA,EAAI,IAC5BoB,QAAaC,EAAAA,EAAAA,GAAUF,EAAKF,EAAW,gBAAgBjB,EAAI,KAAM,QAC9DsB,EAAI,EAAGC,EAAIH,EAAKI,QAAQrB,OAAQmB,EAAIC,EAAGD,IAC9CJ,EAAOO,KAAKL,EAAKI,QAAQF,KAE3BI,EAAAA,EAAAA,GAAkBT,EAAWG,EAAKO,cAAcC,YAAa,IAC/D,CACA,OAAOV,CACT,GAACoC,EAAAvC,MAAA,KAAAb,UAAA,CAED,IACMsD,EAAW,sBACXC,QAAuBC,EAAAA,EAAAA,GAAU,EAAG,GAAGF,eAC7C,GAAuB,OAAnBC,EAAyB,CAC3B,IAAMvC,QAAemC,IAOrB,aANMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU9C,IACvC0H,IACHA,GAAsC,EACtCC,EAAiC3H,GAE5BA,CACT,CACE,IAAI,IAAI2C,MAAOC,UAAYG,SAASR,GAbd,QAaiD,CACrE,IAAMvC,QAAemC,IAGrB,aAFMO,EAAAA,EAAAA,GAAU,EAAG,GAAGJ,eAAsB,IAAIK,MAAOC,iBACjDF,EAAAA,EAAAA,GAAU,EAAGJ,EAAUO,KAAKC,UAAU9C,IACrCA,CACT,CACE,IAAK0H,EAAqC,CACxC,IAAM1E,QAAcR,EAAAA,EAAAA,GAAU,EAAGF,GACjCoF,GAAsC,EACtCC,EAAiC9E,KAAKI,MAAMD,EAC9C,CAIA,OAHAE,EAAAA,EAAAA,GAAyBnD,EAAW,iBAAkB,GAAG,IACzDmD,EAAAA,EAAAA,GAAyBnD,EAAW,iBAAkB,GAAG,IACzDS,EAAAA,EAAAA,GAAkBT,GAAY,GACvB4H,CAGb,GAACE,EAAAhI,MAAA,KAAAb,UAAA,C","sources":["webpack://bus/./src/data/apis/getAPIURL/index.ts","webpack://bus/./src/data/apis/getBusData/index.ts","webpack://bus/./src/data/apis/getBusEvent/index.ts","webpack://bus/./src/data/apis/getCarInfo/index.ts","webpack://bus/./src/data/apis/getEstimateTime/index.ts","webpack://bus/./src/data/apis/getLocation/index.ts","webpack://bus/./src/data/apis/getMaterialSymbolsSearchIndex/index.ts","webpack://bus/./src/data/apis/getProvider/index.ts","webpack://bus/./src/data/apis/getRoute/index.ts","webpack://bus/./src/data/apis/getSegmentBuffers/index.ts","webpack://bus/./src/data/apis/getSemiTimeTable/index.ts","webpack://bus/./src/data/apis/getStop/index.ts","webpack://bus/./src/data/apis/getTimeTable/index.ts"],"sourcesContent":["import { getNoCacheParameter } from '../../../tools/index';\nimport { getSettingOptionValue } from '../../settings/index';\n\n/**\n * Get API URL with no cache parameter (query string).\n * @param city - 0: blobbus -> Taipei City, 2: ntpcbus -> New Taipei City\n * @param api - 0: BusData, 1: BusEvent, 2: CarInfo, 3: CarUnusual, 4: EstimateTime, 5: IStop, 6: IStopPath, 7: OrgPathAttribute, 8: PathDetail, 9: Provider, 10: Route, 11: Stop, 12: SemiTimeTable, 13: StopLocation, 14: TimeTable, 15: BusRouteFareList\n * @param alternative - Whether to use alternative resources\n * @param interval - The interval for no cache parameter\n * @returns The direct link to a gzip file.\n */\n\nexport function getAPIURL(city: number, api: number, alternative: boolean = false, interval: number = 10000): string {\n  const cities = ['blobbus', 'ntpcbus'];\n  // blobbus → Taipei City\n  // ntpcbus → New Taipei City\n  const buckets = ['BusData', 'BusEvent', 'CarInfo', 'CarUnusual', 'EstimateTime', 'IStop', 'IStopPath', 'OrgPathAttribute', 'PathDetail', 'Provider', 'Route', 'Stop', 'SemiTimeTable', 'StopLocation', 'TimeTable', 'BusRouteFareList'];\n  const proxy = getSettingOptionValue('proxy');\n  if (alternative) {\n    return `http://erichsia7.github.io/bus-alternative-static-apis/${cities[city]}/Get${buckets[api]}.gz?_=${getNoCacheParameter(interval)}`;\n  } else {\n    if (proxy) {\n      return `https://bus-proxy.erichsia7.workers.dev?url=https://tcgbusfs.blob.core.windows.net/${cities[city]}/Get${buckets[api]}.gz&_=${getNoCacheParameter(interval)}`;\n    } else {\n      return `https://tcgbusfs.blob.core.windows.net/${cities[city]}/Get${buckets[api]}.gz?_=${getNoCacheParameter(interval)}`;\n    }\n  }\n}\n\nexport function getMaterialSymbolsAPIURL(interval: number = 10000): string {\n  return `https://erichsia7.github.io/material-symbols-list/search-index.gz?_=${getNoCacheParameter(interval)}`;\n}\n","import { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataUpdateTime } from '../loader';\n\nexport interface BusDataItem {\n  ProviderID: number;\n  StationID: number;\n  BusID: string; // vehicle registration number\n  CarType: '0' | '1' | '2' | '3'; // 0: normal bus (一般), 1: low-floor bus (低底盤), 2: disability-friendly bus (大復康巴士), 3: dog-friendly bus (狗狗友善專車)\n  CarID: number;\n  DutyStatus: '0' | '1' | '2'; // 0: normal, 1: start, 2: end\n  BusStatus: '0' | '1' | '2' | '3' | '4' | '5' | '99'; // 0: 正常, 1: 車禍, 2: 故障, 3: 塞車, 4: 緊急求援, 5: 加油, 99: 非營運狀態\n  RouteID: string; // number in string\n  GoBack: '0' | '1' | '2'; // 0: go, 1: back, 2: unknown\n  Longitude: string; // number in string\n  Latitude: string; // number in string\n  Speed: string; // number in string\n  Azimuth: string; // number in string\n  DataTime: string; // timestamp\n}\n\nexport type BusData = Array<BusDataItem>;\n\nexport async function getBusData(requestID: string): Promise<BusData> {\n  const apis = [\n    [0, 0],\n    [1, 0]\n  ];\n  const result = [];\n  for (const api of apis) {\n    const url = getAPIURL(api[0], api[1]);\n    const data = await fetchData(url, requestID, `getBusData_${api[0]}`, 'json');\n    for (let i = 0, l = data.BusInfo.length; i < l; i ++) {\n      result.push(data.BusInfo[i]);\n    }\n    setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n  }\n  return result;\n}\n","import { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataUpdateTime } from '../loader';\n\nexport interface BusEventItem {\n  StationID: number;\n  CarType: '0' | '1' | '2' | '3'; // 0: normal bus (一般), 1: low-floor bus (低底盤), 2: disability-friendly bus (大復康巴士), 3: dog-friendly bus (狗狗友善專車)\n  BusID: string; // vehicle registration number\n  ProviderID: number;\n  CarID: number;\n  DutyStatus: '0' | '1' | '2'; // 0: normal, 1: start, 2: end\n  BusStatus: '0' | '1' | '2' | '3' | '4' | '5' | '99'; // 0: 正常, 1: 車禍, 2: 故障, 3: 塞車, 4: 緊急求援, 5: 加油, 99: 非營運狀態\n  RouteID: string; // PathAttributeId (number in string)\n  GoBack: '0' | '1' | '2'; // 0: go, 1: back, 2: unknown\n  StopID: string; // number in string\n  CarOnStop: '0' | '1'; // 0: leaving/left, 1: coming/came\n  DataTime: string; // timestamp\n}\n\nexport type BusEvent = Array<BusEventItem>;\n\nexport async function getBusEvent(requestID: string): Promise<BusEvent> {\n  const apis = [\n    [0, 1],\n    [1, 1]\n  ];\n  const result = [];\n  for (const api of apis) {\n    const url = getAPIURL(api[0], api[1]);\n    const data = await fetchData(url, requestID, `getBusEvent_${api[0]}`, 'json');\n    for (let i = 0, l = data.BusInfo.length; i < l; i++) {\n      result.push(data.BusInfo[i]);\n    }\n    setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n  }\n  return result;\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface CarInfoItem {\n  BusId: number; // BusId ≠ BusID\n  BusNId: string;\n  CarNum: string; // CarNumber = BusID = vehicle registration number\n  CarType: '0' | '1' | '2' | '3'; // 0: normal bus (一般), 1: low-floor bus (低底盤), 2: disability-friendly bus (大復康巴士), 3: dog-friendly bus (狗狗友善專車)\n  IboxId: number;\n  StationId: number;\n  PathAttributeId: number;\n  BuildPeriod: string;\n  Ctime: string;\n}\n\nexport type CarInfo = Array<CarInfoItem>;\n\nexport interface SimplifiedCarInfoItem {\n  BusId: CarInfoItem['BusId'];\n  CarNum: CarInfoItem['CarNum'];\n  CarType: CarInfoItem['CarType'];\n  PathAttributeId: CarInfoItem['PathAttributeId'];\n}\n\nexport type SimplifiedCarInfo = { [key: string]: SimplifiedCarInfoItem };\n\nconst CarInfoAPIVariableCache = {\n  raw: {\n    data: [],\n    available: false\n  },\n  simplified: {\n    data: {},\n    available: false\n  }\n};\n\nasync function simplifyCarInfo(CarInfo: CarInfo): Promise<SimplifiedCarInfo> {\n  const worker = new Worker(new URL('./simplifyCarInfo-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(CarInfo); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getCarInfo(requestID: string, simplified: boolean = false): Promise<CarInfo | SimplifiedCarInfo> {\n  async function getData() {\n    const apis = [\n      [0, 2],\n      [1, 2]\n    ];\n    const result = [];\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getCarInfo_${api[0]}`, 'json');\n      for (let i = 0, l = data.BusInfo.length; i < l; i++) {\n        result.push(data.BusInfo[i]);\n      }\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n    }\n    return result;\n  }\n\n  const cacheType = simplified ? 'simplified' : 'raw';\n  const cacheKey = `bus_${cacheType}_car_info_cache`;\n  const cacheTimeToLive = 60 * 60 * 24 * 30 * 1000;\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    let finalResult;\n    if (simplified) {\n      finalResult = await simplifyCarInfo(result);\n    } else {\n      finalResult = result;\n    }\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n    if (!CarInfoAPIVariableCache[cacheType].available) {\n      CarInfoAPIVariableCache[cacheType].available = true;\n      CarInfoAPIVariableCache[cacheType].data = finalResult;\n    }\n    return finalResult;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      let finalResult;\n      if (simplified) {\n        finalResult = await simplifyCarInfo(result);\n      } else {\n        finalResult = result;\n      }\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n      return finalResult;\n    } else {\n      if (!CarInfoAPIVariableCache[cacheType].available) {\n        const cache = await lfGetItem(0, cacheKey);\n        CarInfoAPIVariableCache[cacheType].available = true;\n        CarInfoAPIVariableCache[cacheType].data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getCarInfo_0', 0, true);\n      setDataReceivingProgress(requestID, 'getCarInfo_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return CarInfoAPIVariableCache[cacheType].data;\n    }\n  }\n}\n","import { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataUpdateTime } from '../loader';\n\nexport interface EstimateTimeItem {\n  RouteID: number;\n  StopID: number;\n  EstimateTime: string | '-1' | '-2' | '-3' | '-4'; // x (>=0): remaining time to wait measured in seconds, -1: no departed bus, -2: skip stopping (due to traffic moderation), -3: the next bus will not come until tomorrow, -4: not in operation\n  GoBack: '0' | '1' | '2'; // 0: go, 1: back, 2: unknown\n}\n\nexport type EstimateTime = Array<EstimateTimeItem>;\n\nexport async function getEstimateTime(requestID: string): Promise<EstimateTime> {\n  const apis = [\n    [0, 4],\n    [1, 4]\n  ];\n  const result = [];\n  for (const api of apis) {\n    const url = getAPIURL(api[0], api[1]);\n    const data = await fetchData(url, requestID, `getEstimateTime_${api[0]}`, 'json');\n    for (let i = 0, l = data.BusInfo.length; i < l; i++) {\n      result.push(data.BusInfo[i]);\n    }\n    setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n  }\n  return result;\n}\n","import { ParsedAddress } from '../../../tools/address';\nimport { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface LocationItem {\n  Id: number; // StopID\n  routeId: number; // RouteID\n  nameZh: string; // name in Chinese\n  nameEn: string; // name in English\n  seqNo: number; // sequence on the route\n  pgp: string; // pgp (-1: get off, 0: get on and off, 1: get on)\n  goBack: '0' | '1' | '2'; // GoBack (0: go, 1: back, 2: unknown)\n  longitude: string; // number in string\n  latitude: string; // number in string\n  address: string;\n  stopLocationId: number; // LocationID\n  showLon: string; // number in string\n  showLat: string; // number in string\n  vector: string;\n}\n\nexport type Location = Array<LocationItem>;\n\nexport interface SimplifiedLocationItem {\n  n: string; // name\n  lo: number; // longitude\n  la: number; // latitude\n  g: string; // geohash\n  r: Array<number>; // RouteIDs\n  s: Array<number>; // StopIDs\n  v: Array<[number, number]>; // a set of vectors\n  a: Array<string>; // addresses\n  id: number; // stopLocationId\n}\n\nexport type SimplifiedLocation = { [l_id: string]: SimplifiedLocationItem };\n\nexport interface MergedLocationItem {\n  n: string; // name\n  lo: Array<number>; // longitude\n  la: Array<number>; // latitude\n  g: Array<string>; // geohash\n  r: Array<Array<number>>; // RouteIDs\n  s: Array<Array<number>>; // StopIDs\n  v: Array<Array<[number, number]>>; // sets of vectors\n  a: Array<ParsedAddress>; // addresses\n  id: Array<number>; // stopLocationIds\n  hash: string;\n}\n\nexport type MergedLocation = { [ml_hash: string]: MergedLocationItem };\n\nexport interface IndexedLocationItem {\n  lo: number; // longitude\n  la: number; // latitude\n  hash: string;\n}\n\nexport type IndexedLocation = { [geohash: string]: Array<IndexedLocationItem> };\n\nconst LocationAPIVariableCache = {\n  simplified: {\n    available: false,\n    data: {}\n  },\n  merged: {\n    available: false,\n    data: {}\n  },\n  indexed: {\n    available: false,\n    data: {}\n  }\n};\n\nasync function simplifyLocation(Location: Location): Promise<SimplifiedLocation> {\n  const worker = new Worker(new URL('./simplifyLocation-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(Location); // Send data to the worker\n  });\n\n  return result;\n}\n\nasync function mergeLocationByName(object: SimplifiedLocation): Promise<MergedLocation> {\n  const worker = new Worker(new URL('./mergeLocationByName-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(object); // Send data to the worker\n  });\n\n  return result;\n}\n\nasync function indexLocationByGeohash(object: MergedLocation): Promise<IndexedLocation> {\n  const worker = new Worker(new URL('./indexLocationByGeohash-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(object); // Send data to the worker\n  });\n\n  return result;\n}\n\n/**\n * getLocation\n * @param requestID\n * @param type 0: simplified, 1: merged, 2: indexed\n * @returns SimplifiedLocation, MergedLocation, or IndexedLocation\n */\n\nexport async function getLocation(requestID: string, type: 0 | 1 | 2): Promise<SimplifiedLocation | MergedLocation | IndexedLocation> {\n  async function getData() {\n    const apis = [\n      [0, 11],\n      [1, 11]\n    ];\n    const result = [];\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getLocation_${api[0]}`, 'json');\n      for (let i = 0, l = data.BusInfo.length; i < l; i += 64) {\n        Array.prototype.push.apply(result, data.BusInfo.slice(i, i + 64));\n      }\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 30 * 1000;\n  const cacheType = ['simplified', 'merged', 'indexed'][type];\n  const cacheKey = `bus_${cacheType}_location_cache`;\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    let finalResult;\n    switch (type) {\n      case 0: {\n        const result = await getData();\n        const simplified_result = await simplifyLocation(result);\n        finalResult = simplified_result;\n        break;\n      }\n      case 1: {\n        const simplified_result = await getLocation(requestID, 0);\n        const merged_result = await mergeLocationByName(simplified_result);\n        finalResult = merged_result;\n        break;\n      }\n      case 2: {\n        const merged_result = await getLocation(requestID, 1);\n        const indexed_result = await indexLocationByGeohash(merged_result);\n        finalResult = indexed_result;\n        break;\n      }\n      default:\n        break;\n    }\n\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n    if (!LocationAPIVariableCache[cacheType].available) {\n      LocationAPIVariableCache[cacheType].available = true;\n      LocationAPIVariableCache[cacheType].data = finalResult;\n    }\n    return finalResult;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      let finalResult;\n      switch (type) {\n        case 0: {\n          const result = await getData();\n          const simplified_result = await simplifyLocation(result);\n          finalResult = simplified_result;\n          break;\n        }\n        case 1: {\n          const simplified_result = await getLocation(requestID, 0);\n          const merged_result = await mergeLocationByName(simplified_result);\n          finalResult = merged_result;\n          break;\n        }\n        case 2: {\n          const merged_result = await getLocation(requestID, 1);\n          const indexed_result = await indexLocationByGeohash(merged_result);\n          finalResult = indexed_result;\n          break;\n        }\n        default:\n          break;\n      }\n\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(finalResult));\n      if (!LocationAPIVariableCache[cacheType].available) {\n        LocationAPIVariableCache[cacheType].available = true;\n        LocationAPIVariableCache[cacheType].data = finalResult;\n      }\n      return finalResult;\n    } else {\n      if (!LocationAPIVariableCache[cacheType].available) {\n        const cache = await lfGetItem(0, cacheKey);\n        LocationAPIVariableCache[cacheType].available = true;\n        LocationAPIVariableCache[cacheType].data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getLocation_0', 0, true);\n      setDataReceivingProgress(requestID, 'getLocation_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return LocationAPIVariableCache[cacheType].data;\n    }\n  }\n}\n","import { MaterialSymbols } from '../../../interface/icons/material-symbols-type';\nimport { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getMaterialSymbolsAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress } from '../loader';\n\ninterface MaterialSymbolsSearchIndex {\n  dictionary: string;\n  symbols: { [symbolKey: string]: Array<number> };\n}\n\nexport interface UnpackedMaterialSymbolsSearchIndex {\n  dictionary: string;\n  symbols: { [symbol: MaterialSymbols]: Array<number> };\n}\n\nlet MaterialSymbolsAPIVariableCache_available: boolean = false;\nlet MaterialSymbolsAPIVariableCache_data: UnpackedMaterialSymbolsSearchIndex = [];\n\nfunction unpackMaterialSymbolsSearchIndex(data: MaterialSymbolsSearchIndex): UnpackedMaterialSymbolsSearchIndex {\n  const dictionary = data.dictionary.split(',');\n  for (const symbolKey in data.symbols) {\n    const symbolNameComponents = symbolKey.split('_');\n    for (let i = symbolNameComponents.length - 1; i >= 0; i--) {\n      symbolNameComponents.splice(i, 1, dictionary[parseInt(symbolNameComponents[i])]);\n    }\n    data.symbols[symbolNameComponents.join('_')] = data.symbols[symbolKey];\n    delete data.symbols[symbolKey];\n  }\n\n  return data as UnpackedMaterialSymbolsSearchIndex;\n}\n\nexport async function getMaterialSymbolsSearchIndex(requestID: string): Promise<UnpackedMaterialSymbolsSearchIndex> {\n  async function getData() {\n    const apiurl = getMaterialSymbolsAPIURL();\n    const data = await fetchData(apiurl, requestID, 'getMaterialSymbolsSearchIndex', 'json');\n    return data;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 7 * 1000;\n  const cacheKey = 'bus_material_symbols_search_index_v4_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    const unpacked = unpackMaterialSymbolsSearchIndex(result);\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(unpacked));\n    if (!MaterialSymbolsAPIVariableCache_available) {\n      MaterialSymbolsAPIVariableCache_available = true;\n      MaterialSymbolsAPIVariableCache_data = unpacked;\n    }\n    return unpacked;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      const unpacked = unpackMaterialSymbolsSearchIndex(result);\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(unpacked));\n      if (!MaterialSymbolsAPIVariableCache_available) {\n        MaterialSymbolsAPIVariableCache_available = true;\n        MaterialSymbolsAPIVariableCache_data = unpacked;\n      }\n      return unpacked;\n    } else {\n      if (!MaterialSymbolsAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        MaterialSymbolsAPIVariableCache_available = true;\n        MaterialSymbolsAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getMaterialSymbolsSearchIndex', 0, true);\n      return MaterialSymbolsAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface ProviderItem {\n  id: number;\n  nameZn: string; // name in Chinese (Zhōngwén)\n  nameEn: string; // name in English\n  email: string;\n  phoneInfo: string;\n  stationId: string;\n  stationNameZn: string;\n  stationNameEn: string;\n  type: '0' | '1' | '2' | '3' | '4' | '5'; // 0: city bus station, 1: coach bus station, 2: MRT station, 3: train station, 4: airport, 5: port\n}\n\nexport type Provider = Array<ProviderItem>;\n\nlet ProviderAPIVariableCache_available: boolean = false;\nlet ProviderAPIVariableCache_data: object = {};\n\nexport async function getProvider(requestID: string): Promise<Provider> {\n  async function getData() {\n    const apis = [\n      [0, 9],\n      [1, 9]\n    ];\n    const result = [];\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getProvider_${api[0]}`, 'json');\n      for (let i = 0, l = data.BusInfo.length; i < l; i++) {\n        result.push(data.BusInfo[i]);\n      }\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 60 * 1000;\n  const cacheKey = 'bus_provider_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(result));\n    if (!ProviderAPIVariableCache_available) {\n      ProviderAPIVariableCache_available = true;\n      ProviderAPIVariableCache_data = result;\n    }\n    return result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(result));\n      return result;\n    } else {\n      if (!ProviderAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        ProviderAPIVariableCache_available = true;\n        ProviderAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getProvider_0', 0, true);\n      setDataReceivingProgress(requestID, 'getProvider_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return ProviderAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface RouteItem {\n  providerId: number;\n  providerName: string;\n  nameZh: string; // name in Chinese\n  nameEn: string; // name in English\n  aliasName: string; // another name in Chinese\n  pathAttributeId: number;\n  pathAttributeNId: string;\n  pathAttributeName: string; // another name in Chinese\n  pathAttributeEname: string; // another name in English\n  buildPeriod: '1' | '2' | '3' | '9' | '10';\n  departureZh: string; // departure stop name in Chinese\n  destinationZh: string; // destination stop name in Chinese\n  departureEn: string; // departure stop name in English\n  destinationEn: string; // destination stop name in English\n  goFirstBusTime: string; // time code (hhmm)\n  goLastBusTime: string;\n  backFirstBusTime: string;\n  backLastBusTime: string;\n  offPeakHeadway: string; // time code (hhmm or mm)\n  busTimeDesc: string;\n  roadMapUrl: string;\n  headwayDesc: string;\n  holidayGoFirstBusTime: string;\n  holidayBackFirstBusTime: string;\n  holidayBackLastBusTime: string;\n  holidayGoLastBusTime: string;\n  holidayBusTimeDesc: string;\n  realSequence: string; // number in string\n  holidayHeadwayDesc: string;\n  holidayOffPeakHeadway: string;\n  holidayPeakHeadway: string;\n  segmentBufferEn: string;\n  ticketPriceDescriptionZh: string;\n  ticketPriceDescriptionEn: string;\n  peakHeadway: string;\n  ttiaPathId: string;\n  segmentBufferZh: string;\n  distance: string;\n  NId: string;\n  Id: number; // RouteID\n  routeType: string;\n}\n\nexport type Route = Array<RouteItem>;\n\nexport interface SimplifiedRouteItem {\n  pd: number;\n  n: string;\n  pid: Array<number>;\n  dep: string;\n  des: string;\n  id: number;\n}\n\nexport type SimplifiedRoute = { [key: string]: SimplifiedRouteItem };\n\nlet RouteAPIVariableCache_available: boolean = false;\nlet RouteAPIVariableCache_data: object = {};\n\nasync function simplifyRoute(Route: Route): Promise<SimplifiedRoute> {\n  const worker = new Worker(new URL('./simplifyRoute-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(Route); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getRoute(requestID: string, simplify: boolean = true): Promise<SimplifiedRoute | Route> {\n  async function getData() {\n    const apis = [\n      [0, 10],\n      [1, 10]\n    ];\n    const result = [];\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getRoute_${api[0]}`, 'json');\n      for (let i = 0, l = data.BusInfo.length; i < l; i++) {\n        result.push(data.BusInfo[i]);\n      }\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n    }\n    return result;\n  }\n  if (simplify === false) {\n    return await getData();\n  }\n  const cacheTimeToLive = 60 * 60 * 24 * 1 * 1000;\n  const cacheKey = 'bus_route_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    const simplified_result = await simplifyRoute(result);\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n    if (!RouteAPIVariableCache_available) {\n      RouteAPIVariableCache_available = true;\n      RouteAPIVariableCache_data = simplified_result;\n    }\n    return simplified_result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      const simplified_result = await simplifyRoute(result);\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n      if (!RouteAPIVariableCache_available) {\n        RouteAPIVariableCache_available = true;\n        RouteAPIVariableCache_data = simplified_result;\n      }\n      return simplified_result;\n    } else {\n      if (!RouteAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        RouteAPIVariableCache_available = true;\n        RouteAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getRoute_0', 0, true);\n      setDataReceivingProgress(requestID, 'getRoute_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return RouteAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface BufferZoneItem {\n  Direction: 0 | 1 | 2; // (goBack/GoBack)\n  OriginStopID: number;\n  DestinationStopID: number;\n}\n\nexport type BufferZones = Array<BufferZoneItem>;\n\nexport interface SegmentBufferItem {\n  RouteID: number;\n  BufferZones: BufferZones;\n}\n\nexport type SegmentBuffers = Array<SegmentBufferItem>;\n\nexport type SimplifiedSegmentBufferItem = { [key: string]: Array<BufferZoneItem> };\n\nexport type SimplifiedSegmentBuffer = { [key: string]: SimplifiedSegmentBufferItem };\n\nlet SegmentBuffersAPIVariableCache_available: boolean = false;\nlet SegmentBuffersAPIVariableCache_data: object = {};\n\nasync function extractSegmentBuffers(xml: string): Promise<SegmentBuffers> {\n  const worker = new Worker(new URL('./extractSegmentBuffers-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(xml); // Send data to the worker\n  });\n\n  return result;\n}\n\nasync function simplifySegmentBuffers(array: SegmentBuffers): Promise<SimplifiedSegmentBuffer> {\n  const worker = new Worker(new URL('./simplifySegmentBuffers-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(array); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getSegmentBuffers(requestID: string): Promise<SimplifiedSegmentBuffer> {\n  async function getData() {\n    const apis = [\n      [0, 15],\n      [1, 15]\n    ];\n    let result = '';\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getSegmentBuffers_${api[0]}`, 'xml');\n      result += data;\n      setDataUpdateTime(requestID, -1);\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 30 * 1000;\n  const cacheKey = 'bus_segment_buffers_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    const extractedResult = await extractSegmentBuffers(result);\n    const simplifiedResult = await simplifySegmentBuffers(extractedResult);\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(simplifiedResult));\n    if (!SegmentBuffersAPIVariableCache_available) {\n      SegmentBuffersAPIVariableCache_available = true;\n      SegmentBuffersAPIVariableCache_data = simplifiedResult;\n    }\n    return simplifiedResult;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      const extractedResult = await extractSegmentBuffers(result);\n      const simplifiedResult = await simplifySegmentBuffers(extractedResult);\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(simplifiedResult));\n      return simplifiedResult;\n    } else {\n      if (!SegmentBuffersAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        SegmentBuffersAPIVariableCache_available = true;\n        SegmentBuffersAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getSegmentBuffers_0', 0, true);\n      setDataReceivingProgress(requestID, 'getSegmentBuffers_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return SegmentBuffersAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nlet SemiTimetableAPIVariableCache_available: boolean = false;\nlet SemiTimetableAPIVariableCache_data: object = {};\n\nexport async function getSemiTimeTable(requestID: string): Promise<object> {\n  async function getData() {\n    const apis = [\n      [0, 12],\n      [1, 12]\n    ];\n    const result = [];\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getSemiTimeTable_${api[0]}`, 'json');\n      for (let i = 0, l = data.BusInfo.length; i < l; i++) {\n        result.push(data.BusInfo[i]);\n      }\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 14 * 1000;\n  const cacheKey = 'bus_semi_timetable_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(result));\n    if (!SemiTimetableAPIVariableCache_available) {\n      SemiTimetableAPIVariableCache_available = true;\n      SemiTimetableAPIVariableCache_data = result;\n    }\n    return result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(result));\n      return result;\n    } else {\n      if (!SemiTimetableAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        SemiTimetableAPIVariableCache_available = true;\n        SemiTimetableAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getSemiTimeTable_0', 0, true);\n      setDataReceivingProgress(requestID, 'getSemiTimeTable_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return SemiTimetableAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nexport interface StopItem {\n  Id: number; // StopID\n  routeId: number; // RouteID\n  nameZh: string; // name in Chinese\n  nameEn: string; // name in English\n  seqNo: number; // sequence on the route\n  pgp: string; // pgp (-1: get off, 0: get on and off, 1: get on)\n  goBack: '0' | '1' | '2'; // GoBack (0: go, 1: back, 2: unknown)\n  longitude: string; // number in string\n  latitude: string; // number in string\n  address: string;\n  stopLocationId: number; // LocationID\n  showLon: string; // number in string\n  showLat: string; // number in string\n  vector: string;\n}\n\nexport type Stop = Array<StopItem>;\n\nexport interface SimplifiedStopItem {\n  seqNo: number;\n  goBack: '0' | '1' | '2'; // GoBack (0: go, 1: back, 2: unknown)\n  stopLocationId: number;\n}\n\nexport type SimplifiedStop = { [key: string]: SimplifiedStopItem };\n\nlet StopAPIVariableCache_available: boolean = false;\nlet StopAPIVariableCache_data: SimplifiedStop = {};\n\nasync function simplifyStop(array: Stop): Promise<SimplifiedStop> {\n  const worker = new Worker(new URL('./simplifyStop-worker.ts', import.meta.url));\n\n  // Wrap worker communication in a promise\n  const result = await new Promise((resolve, reject) => {\n    worker.onmessage = function (e) {\n      resolve(e.data); // Resolve the promise with the worker's result\n      worker.terminate(); // Terminate the worker when done\n    };\n\n    worker.onerror = function (e) {\n      reject(e.message); // Reject the promise on error\n      worker.terminate(); // Terminate the worker if an error occurs\n    };\n\n    worker.postMessage(array); // Send data to the worker\n  });\n\n  return result;\n}\n\nexport async function getStop(requestID: string): Promise<SimplifiedStop> {\n  async function getData() {\n    const apis = [\n      [0, 11],\n      [1, 11]\n    ];\n    const result = [];\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getStop_${api[0]}`, 'json');\n      for (let i = 0, l = data.BusInfo.length; i < l; i += 64) {\n        Array.prototype.push.apply(result, data.BusInfo.slice(i, i + 64));\n      }\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 45 * 1000;\n  const cacheKey = 'bus_stop_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    const simplified_result = await simplifyStop(result);\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n    if (!StopAPIVariableCache_available) {\n      StopAPIVariableCache_available = true;\n      StopAPIVariableCache_data = simplified_result;\n    }\n    return simplified_result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      const simplified_result = await simplifyStop(result);\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(simplified_result));\n      return simplified_result;\n    } else {\n      if (!StopAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        StopAPIVariableCache_available = true;\n        StopAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getStop_0', 0, true);\n      setDataReceivingProgress(requestID, 'getStop_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return StopAPIVariableCache_data;\n    }\n  }\n}\n","import { lfGetItem, lfSetItem } from '../../storage/index';\nimport { getAPIURL } from '../getAPIURL/index';\nimport { fetchData, setDataReceivingProgress, setDataUpdateTime } from '../loader';\n\nlet TimetableAPIVariableCache_available: boolean = false;\nlet TimetableAPIVariableCache_data: object = {};\n\nexport async function getTimeTable(requestID: string): Promise<object> {\n  async function getData() {\n    const apis = [\n      [0, 14],\n      [1, 14]\n    ];\n    const result = [];\n    for (const api of apis) {\n      const url = getAPIURL(api[0], api[1]);\n      const data = await fetchData(url, requestID, `getTimeTable_${api[0]}`, 'json');\n      for (let i = 0, l = data.BusInfo.length; i < l; i++) {\n        result.push(data.BusInfo[i]);\n      }\n      setDataUpdateTime(requestID, data.EssentialInfo.UpdateTime, -480); // UTC+8\n    }\n    return result;\n  }\n\n  const cacheTimeToLive = 60 * 60 * 24 * 14 * 1000;\n  const cacheKey = 'bus_timetable_cache';\n  const cacheTimestamp = await lfGetItem(0, `${cacheKey}_timestamp`);\n  if (cacheTimestamp === null) {\n    const result = await getData();\n    await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n    await lfSetItem(0, cacheKey, JSON.stringify(result));\n    if (!TimetableAPIVariableCache_available) {\n      TimetableAPIVariableCache_available = true;\n      TimetableAPIVariableCache_data = result;\n    }\n    return result;\n  } else {\n    if (new Date().getTime() - parseInt(cacheTimestamp) > cacheTimeToLive) {\n      const result = await getData();\n      await lfSetItem(0, `${cacheKey}_timestamp`, new Date().getTime());\n      await lfSetItem(0, cacheKey, JSON.stringify(result));\n      return result;\n    } else {\n      if (!TimetableAPIVariableCache_available) {\n        const cache = await lfGetItem(0, cacheKey);\n        TimetableAPIVariableCache_available = true;\n        TimetableAPIVariableCache_data = JSON.parse(cache);\n      }\n      setDataReceivingProgress(requestID, 'getTimeTable_0', 0, true);\n      setDataReceivingProgress(requestID, 'getTimeTable_1', 0, true);\n      setDataUpdateTime(requestID, -1);\n      return TimetableAPIVariableCache_data;\n    }\n  }\n}\n"],"names":["getAPIURL","city","api","alternative","arguments","length","undefined","interval","cities","buckets","proxy","getSettingOptionValue","getNoCacheParameter","getMaterialSymbolsAPIURL","getBusData","_x","_getBusData","apply","_asyncToGenerator","requestID","result","url","data","fetchData","i","l","BusInfo","push","setDataUpdateTime","EssentialInfo","UpdateTime","getBusEvent","_getBusEvent","CarInfoAPIVariableCache","raw","available","simplified","simplifyCarInfo","_simplifyCarInfo","CarInfo","worker","Worker","URL","Promise","resolve","reject","onmessage","e","terminate","onerror","message","postMessage","getCarInfo","_x2","_getCarInfo","getData","_getData","cacheType","cacheKey","cacheTimestamp","lfGetItem","finalResult","lfSetItem","Date","getTime","JSON","stringify","parseInt","cache","parse","setDataReceivingProgress","getEstimateTime","_getEstimateTime","LocationAPIVariableCache","merged","indexed","simplifyLocation","_simplifyLocation","Location","mergeLocationByName","_mergeLocationByName","object","indexLocationByGeohash","_x3","_indexLocationByGeohash","getLocation","_x4","_x5","_getLocation","type","Array","prototype","slice","simplified_result","merged_result","MaterialSymbolsAPIVariableCache_available","MaterialSymbolsAPIVariableCache_data","unpackMaterialSymbolsSearchIndex","dictionary","split","symbolKey","symbols","symbolNameComponents","splice","join","getMaterialSymbolsSearchIndex","_getMaterialSymbolsSearchIndex","apiurl","unpacked","ProviderAPIVariableCache_available","ProviderAPIVariableCache_data","getProvider","_getProvider","RouteAPIVariableCache_available","RouteAPIVariableCache_data","simplifyRoute","_simplifyRoute","Route","getRoute","_getRoute","SegmentBuffersAPIVariableCache_available","SegmentBuffersAPIVariableCache_data","extractSegmentBuffers","_extractSegmentBuffers","xml","simplifySegmentBuffers","_simplifySegmentBuffers","array","getSegmentBuffers","_getSegmentBuffers","extractedResult","simplifiedResult","SemiTimetableAPIVariableCache_available","SemiTimetableAPIVariableCache_data","getSemiTimeTable","_getSemiTimeTable","StopAPIVariableCache_available","StopAPIVariableCache_data","simplifyStop","_simplifyStop","getStop","_getStop","TimetableAPIVariableCache_available","TimetableAPIVariableCache_data","getTimeTable","_getTimeTable"],"sourceRoot":""}