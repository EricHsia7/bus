!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,(()=>(()=>{"use strict";var t,e={3648:(t,e,r)=>{function n(t){return document.querySelector(t)}function a(t){return document.querySelectorAll(t)}function o(t,e){return t.querySelector(e)}function c(t,e){return t.querySelectorAll(e)}r.d(e,{aI:()=>o,bv:()=>n,e0:()=>a,jg:()=>c})},4750:(t,e,r)=>{r.d(e,{h:()=>l});var n=r(8024);function a(t,e,r,n,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,a)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],u=!0,s=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);u=!0);}catch(t){s=!0,a=t}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var i,u={};if("undefined"!=typeof SharedWorker){var s=new SharedWorker(new URL(r.p+r.u(82),r.b));(i=s.port).start()}else{var f=new Worker(new URL(r.p+r.u(701),r.b));i=f}function l(t){return d.apply(this,arguments)}function d(){var t;return t=function*(t){var e=(0,n.zx)("t");return yield new Promise((function(r,n){u[e]=r,i.onerror=function(t){n(t.message)},i.postMessage([t,e])}))},d=function(){var e=this,r=arguments;return new Promise((function(n,o){var c=t.apply(e,r);function i(t){a(c,n,o,i,u,"next",t)}function u(t){a(c,n,o,i,u,"throw",t)}i(void 0)}))},d.apply(this,arguments)}i.onmessage=function(t){var e=o(t.data,2),r=e[0],n=e[1];u[n]&&(u[n](r),delete u[n])},i.onerror=function(t){console.error(t.message)}},4781:(t,e,r)=>{function n(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];if("string"==typeof t)for(var n=t.length,a=0;a<n;a++){var o=t.charCodeAt(a);(r.indexOf(o)<0||!e)&&r.push(o)}return r}function a(t){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(t)}r.d(e,{B5:()=>n,iO:()=>a})},5428:(t,e,r)=>{function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,c=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw c}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e,r,n,a,o){var c=r+o,i=(r*t+o*n)/c,u=(r*(Math.pow(e,2)+Math.pow(t,2))+o*(Math.pow(a,2)+Math.pow(n,2)))/c-Math.pow(i,2);return Math.sqrt(u)}function c(t,e,r,n,a,c,i,u,s,f,l,d){var h=a+l;return(a*(r*n*c+t*e)+l*(s*f*d+i*u)-h*((a*t+l*i)/h)*((a*e+l*u)/h))/(h*o(t,r,a,i,s,l)*o(e,n,a,u,f,l))}function i(t){var e=Math.hypot(t),r=[];if(e>0){var a,o=1/e,c=n(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;r.push(i*o)}}catch(t){c.e(t)}finally{c.f()}return r}return t}function u(t){var e=t.length;if(0===e)return[0,0];for(var r=1/0,n=-1/0,a=e-1;a>=0;a--){var o=t[a];o>n&&(n=o),o<r&&(r=o)}return[r,n]}r.d(e,{Ck:()=>i,DJ:()=>u,Hi:()=>c,VY:()=>o})},5579:(t,e,r)=>{function n(){var t=new Date,e=t.getDay(),r=t.getDate()-e,n=new Date;return n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function a(t,e,r,n){var a=new Date;return a.setDate(1),a.setMonth(0),a.setHours(r),a.setMinutes(n),a.setSeconds(0),a.setMilliseconds(0),a.setFullYear(t.getFullYear()),a.setMonth(t.getMonth()),a.setDate(t.getDate()),a.setDate(a.getDate()+e),a}function o(t){var e=t.match(/[0-9\.]*/gm);if(e){var r=parseInt(e[0]),n=parseInt(e[2]),a=parseInt(e[4]),o=parseInt(e[6]),c=parseInt(e[8]),i=parseInt(e[10]),u=new Date;return u.setDate(1),u.setMonth(0),u.setFullYear(r),u.setMonth(n-1),u.setDate(a),u.setHours(o),u.setMinutes(c),u.setSeconds(i),u.getTime()}return 0}function c(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,t.getFullYear()).replaceAll(/M{2,2}/g,String(t.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(t.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(t.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(t.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(t.getSeconds()).padStart(2,"0"))}function i(t){var e=t.getTime(),r=Math.floor(((new Date).getTime()-e)/1e3),n=Math.floor(r/31536e3);return n>=1?"".concat(n,"年前"):(n=Math.floor(r/2592e3))>=1?"".concat(n,"個月前"):(n=Math.floor(r/86400))>=1?"".concat(n,"天前"):(n=Math.floor(r/3600))>=1?"".concat(n,"小時前"):(n=Math.floor(r/60))>=1?"".concat(n,"分鐘前"):r>0?"".concat(r,"秒前"):"現在"}function u(t,e){var r=0|t;switch(e){case 0:return"".concat(r,"秒");case 1:return[String((r-r%60)/60),String(r%60)].map((function(t){return t.padStart(2,"0")})).join(":");case 2:return"".concat(r/60|0,"分");case 3:if(r>=3600){var n=parseFloat((r/3600).toFixed(1));return"".concat(n,"時")}if(60<=r&&r<3600)return"".concat(r/60|0,"分");if(r<60)return"".concat(r,"秒");break;default:return"--"}}function s(t){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][t]}function f(t){return s(parseInt(t)-1)}function l(t){return"".concat(String(t.hours).padStart(2,"0"),":").concat(String(t.minutes).padStart(2,"0"))}r.d(e,{$T:()=>c,HN:()=>i,P$:()=>n,S1:()=>a,Zn:()=>o,fU:()=>u,kd:()=>s,mr:()=>f,pn:()=>l})},6141:(t,e,r)=>{function n(t){return getComputedStyle(document.documentElement).getPropertyValue(t)}r.d(e,{t:()=>n})},7307:(t,e,r)=>{r.d(e,{O:()=>a});var n=r(2754);function a(t){return new n._k({issuer:"Bus",label:"Bus",algorithm:"SHA256",digits:8,period:10,secret:t}).generate()}},8141:(t,e,r)=>{function n(t,e,r){var n=r.x-e.x,a=r.y-e.y,o=n*n+a*a,c=((t.x-e.x)*n+(t.y-e.y)*a)/o;if(c<0)n=t.x-e.x,a=t.y-e.y;else if(c>1)n=t.x-r.x,a=t.y-r.y;else{var i={x:e.x+c*n,y:e.y+c*a};n=t.x-i.x,a=t.y-i.y}return Math.sqrt(n*n+a*a)}function a(t,e){if(t.length<3)return t;for(var r=0,o=0,c=1;c<t.length-1;c++){var i=n(t[c],t[0],t[t.length-1]);i>r&&(o=c,r=i)}if(r>e){var u=t.slice(0,o+1),s=t.slice(o),f=a(u,e),l=a(s,e);return f.slice(0,f.length-1).concat(l)}return[t[0],t[t.length-1]]}function o(t,e){if(t.length<1)return"";for(var r="M".concat(t[0].x*e,",").concat(t[0].y*e),n=1;n<t.length-1;n++){var a=t[n],o=t[n+1]||a;r+="Q".concat(a.x*e,",").concat(a.y*e,",").concat((a.x*e+o.x*e)/2,",").concat((a.y*e+o.y*e)/2)}var c=t[t.length-1];return r+="L".concat(c.x*e,",").concat(c.y*e)}r.d(e,{p:()=>o,z:()=>a})},9469:(t,e,r)=>{r.d(e,{_:()=>c,i:()=>i});var n=r(8134),a=r(4690),o=r(3030);function c(){var t=new URL(location.href).searchParams.get("permalink");if(null!==t){var e=String(t);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(e)){var r=e.split(/[\@\~]/);switch(parseInt(r[0])){case 0:(0,n.Rk)(parseInt(r[1],16)).then((function(t){!1!==t?(0,a.SR)(t.id,t.pid):(0,n.k9)(r[2]).then((function(t){t.length>0&&(0,a.SR)(t[0].id,t[0].pid)}))}));break;case 1:(0,o.so)(r[1])}}}}function i(t,e){var r=new URL("https://erichsia7.github.io/bus/");switch(t){case 0:r.searchParams.set("permalink","0@".concat(parseInt(e.id).toString(16),"~").concat(e.name));break;case 1:r.searchParams.set("permalink","1@".concat(e.hash))}return decodeURIComponent(r.toString())}}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,r,a,o)=>{if(!r){var c=1/0;for(f=0;f<t.length;f++){for(var[r,a,o]=t[f],i=!0,u=0;u<r.length;u++)(!1&o||c>=o)&&Object.keys(n.O).every((t=>n.O[t](r[u])))?r.splice(u--,1):(i=!1,o<c&&(c=o));if(i){t.splice(f--,1);var s=a();void 0!==s&&(e=s)}}return e}o=o||0;for(var f=t.length;f>0&&t[f-1][2]>o;f--)t[f]=t[f-1];t[f]=[r,a,o]},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.u=t=>({82:"2b46b0018b863b906aed",132:"7732f27cfd63d88b5ce2",148:"d1ceb04b8f51a02e6b4b",211:"1cb6e86665319b1cb846",332:"8f123608fa91b51f3b52",551:"7072573beb3c5ab62c2a",592:"1cb6e86665319b1cb846",648:"a69d182a732f0010a0d4",701:"2b46b0018b863b906aed",850:"13108726740f815d3f0e",892:"9e521ee9b22c43e13efb",932:"7072573beb3c5ab62c2a",960:"b5e6c7bd5d14ef076f41"}[t]+".js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="./",(()=>{n.b=document.baseURI||self.location.href;var t={677:0,827:0,238:0,325:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var a,o,[c,i,u]=r,s=0;if(c.some((e=>0!==t[e]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(u)var f=u(n)}for(e&&e(r);s<c.length;s++)o=c[s],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(f)},r=self.webpackChunkbus=self.webpackChunkbus||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var a=n.O(void 0,[281,790,754,343,799,821,327,133,806,150,827,794,238,627,704,466,325,927,687],(()=>n(7084)));return a=(a=n.O(a)).default})()));
//# sourceMappingURL=823f34a4442d7977c593.js.map