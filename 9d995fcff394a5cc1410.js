"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(e,t,a){a.d(t,{S5:()=>V,SR:()=>ve,U7:()=>he});var i=a(467),n=a(5767),d=a(9566),s=a(3422),r=a(5314),o=a(7123),l=a(3459),u=a(8179),c=a(7968),p=a(8024),m=a(5579),v=a(4537),h=a(904),f=a(3030),b=a(9119),g=a(3041),A=a(752),y=a(5286),C=(0,u.bv)(".jm"),L=(0,u.aI)(C,".tm"),E=(0,u.aI)(L,".wm"),I=(0,u.aI)(E,"span"),x=(0,u.aI)(L,".vm"),w=(0,u.aI)(L,".bn .cn"),T=(0,u.aI)(L,".xm"),k=(0,u.aI)(T,".ym"),R=(0,u.aI)(L,"._m"),_=(0,u.aI)(R,".an"),Z=(0,u.aI)(C,".en"),S={},P=!1,$=!1,j=0,D=0,B=0,N={},M=0,Y=!1,z=15e3,F=5e3,q=15e3,H=!0,Q=0,J=0,O="",U=!1,W=!1,G=!1,K=0,X=[];function V(){Z.addEventListener("touchstart",function(){j=Math.round(Z.scrollLeft/M)},{passive:!0}),Z.addEventListener("scroll",function(e){Y=!0;var t=e.target.scrollLeft/M;D=t>j?j+1:j-1;var a=t-j,i=Math.abs(a);i>1&&(a>0?(j=Math.floor(t),D=j+1):(j=Math.ceil(t),D=j-1),i=Math.abs(t-j));var n=N[`g_${j}`]||{width:0,offset:0},d=N[`g_${D}`]||{width:0,offset:0},s=n.width+(d.width-n.width)*i,r=-1*(n.offset+(d.offset-n.offset)*i)+.5*M-.5*s;ee(B,r,s-20,t)},{passive:!0}),Z.addEventListener("scrollend",function(e){var t=e.target.scrollLeft/M;j=Math.round(t),Y=!1},{passive:!0})}function ee(e,t,a,i){Z.style.setProperty("--im",e.toString()),_.style.setProperty("--nm",a.toString()),k.style.setProperty("--om",`${t.toString()}px`),k.style.setProperty("--qm",i.toString())}function te(e){var t=e;if(U){var a=t.detail.progress-1;w.style.setProperty("--rm",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,te)}function ae(){var e=document.createElement("div");e.classList.add("nn"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var t=document.createElement("div");t.classList.add("on");var a=document.createElement("div");a.classList.add("yn"),a.setAttribute("displayed","false"),t.appendChild(a);var i=document.createElement("div");i.classList.add("pn");var n=document.createElement("div");n.classList.add("tf"),n.setAttribute("code","0"),n.setAttribute("displayed","false"),i.appendChild(n);var d=document.createElement("div");return d.classList.add("uf"),d.setAttribute("code","0"),d.setAttribute("displayed","true"),i.appendChild(d),e.appendChild(t),e.appendChild(i),e}function ie(e){var t=document.createElement("div");t.classList.add("jn"),t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var a=document.createElement("div");a.classList.add("kn");var i=document.createElement("div");i.classList.add("ln"),a.appendChild(i);var n=document.createElement("div");n.classList.add("mn");var d=document.createElement("div");d.classList.add("zn");var s=document.createElement("div");s.classList.add("tf"),s.setAttribute("code","0"),s.setAttribute("displayed","false"),d.appendChild(s);var r=document.createElement("div");r.classList.add("uf"),r.setAttribute("code","0"),r.setAttribute("displayed","true"),d.appendChild(r),n.appendChild(d);var o=document.createElement("div");o.classList.add("_n"),o.appendChild((0,v.YC)("keyboard_arrow_down")),o.onclick=function(){!function(e,t){var a=(0,u.aI)(e,".bo"),i=e.parentElement,n=t.parentElement,d=(0,u.ji)(t,"nn"),s=(0,u.ji)(e,"jn"),r=s.length,o=i.getBoundingClientRect(),l=e.getBoundingClientRect(),c=n.getBoundingClientRect(),p=t.getBoundingClientRect(),m=p.top-c.top,v=l.top-o.top,h="true"===e.getAttribute("stretched"),f="true"===e.getAttribute("animation");if(f){var b=h?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--op",`${m}px`),e.setAttribute("stretching","true"),e.style.setProperty("--qp",`${v}px`);for(var g=0;g<r;g++){var A=s[g],y=d[g];y.style.setProperty("--rp",(-1*g-1).toString()),y.setAttribute("push-direction",b),y.setAttribute("push-state","1"),A.setAttribute("push-direction",b),A.setAttribute("push-state","1")}e.addEventListener("transitionend",function(){for(var a=0;a<r;a++){var i=s[a],n=d[a];n.setAttribute("push-direction","0"),n.setAttribute("push-state","0"),i.setAttribute("push-direction","0"),i.setAttribute("push-state","0")}t.setAttribute("stretching","false"),e.setAttribute("stretching","false")},{once:!0}),e.addEventListener("transitionstart",function(){for(var e=0;e<r;e++){var t=s[e];d[e].setAttribute("push-state","2"),t.setAttribute("push-state","2")}},{once:!0})}h?(f?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),e.setAttribute("stretched","false"),t.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),e.setAttribute("stretched","true"),t.setAttribute("stretched","true"))}(t,e)},n.appendChild(o);var l=document.createElement("div");l.classList.add("ao"),n.appendChild(l),a.appendChild(n);var c=document.createElement("div");c.classList.add("bo"),c.setAttribute("displayed","false");var p=document.createElement("div");p.classList.add("co");var m=document.createElement("div");m.classList.add("do"),m.setAttribute("highlighted","true"),m.setAttribute("type","tab"),m.setAttribute("code","0"),m.onclick=function(){be(t,0)};var h=document.createElement("div");h.classList.add("eo"),h.appendChild((0,v.YC)("directions_bus")),m.appendChild(h),m.appendChild(document.createTextNode("公車")),p.appendChild(m);var f=document.createElement("div");f.classList.add("do"),f.setAttribute("highlighted","false"),f.setAttribute("type","tab"),f.setAttribute("code","1"),f.onclick=function(){be(t,1)};var b=document.createElement("div");b.classList.add("eo"),b.appendChild((0,v.YC)("departure_board")),f.appendChild(b),f.appendChild(document.createTextNode("抵達時間")),p.appendChild(f);var g=document.createElement("div");g.classList.add("do"),g.setAttribute("highlighted","false"),g.setAttribute("type","tab"),g.setAttribute("code","2"),g.onclick=function(){be(t,2)};var A=document.createElement("div");A.classList.add("eo"),A.appendChild((0,v.YC)("route")),g.appendChild(A),g.appendChild(document.createTextNode("路線")),p.appendChild(g);var y=document.createElement("div");y.classList.add("do"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){be(t,3)};var C=document.createElement("div");C.classList.add("eo"),C.appendChild((0,v.YC)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),p.appendChild(y);var L=document.createElement("div");L.classList.add("do"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var E=document.createElement("div");E.classList.add("eo"),E.appendChild((0,v.YC)("folder")),L.appendChild(E),L.appendChild(document.createTextNode("儲存")),p.appendChild(L);var I=document.createElement("div");I.classList.add("do"),I.setAttribute("highlighted","false"),I.setAttribute("type","schedule-notification"),I.setAttribute("enabled","true");var x=document.createElement("div");x.classList.add("eo"),x.appendChild((0,v.YC)("notifications")),I.appendChild(x),I.appendChild(document.createTextNode("通知")),p.appendChild(I),c.appendChild(p);var w=document.createElement("div");w.classList.add("fo"),w.setAttribute("displayed","true"),c.appendChild(w);var T=document.createElement("div");T.classList.add("go"),T.setAttribute("displayed","false"),c.appendChild(T);var k=document.createElement("div");k.classList.add("ho"),k.setAttribute("displayed","false"),c.appendChild(k);var R=document.createElement("div");return R.classList.add("io"),R.setAttribute("displayed","false"),c.appendChild(R),t.appendChild(a),t.appendChild(c),t}function ne(){var e=document.createElement("div");e.classList.add("fn");var t=document.createElement("div");t.classList.add("gn");var a=document.createElement("div");a.classList.add("hn");var i=document.createElement("div");i.classList.add("jo");var n=document.createElement("div");n.classList.add("in");var d=document.createElement("div");return d.classList.add("ko"),n.appendChild(d),a.appendChild(i),t.appendChild(a),t.appendChild(n),e.appendChild(t),e}function de(){var e=document.createElement("div");e.classList.add("zm");var t=document.createElement("span");return e.appendChild(t),e}function se(){var e=document.createElement("div");e.classList.add("lo"),e.setAttribute("on-this-route","false");var t=document.createElement("div");t.classList.add("mo");var a=document.createElement("div");a.classList.add("no"),a.appendChild((0,v.YC)("directions_bus"));var i=document.createElement("div");i.classList.add("oo");var n=document.createElement("div");n.classList.add("po");var d=document.createElement("div");d.classList.add("qo");var s=document.createElement("div");s.classList.add("ro");var r=document.createElement("div");return r.classList.add("so"),t.appendChild(a),t.appendChild(i),e.appendChild(t),n.appendChild(d),n.appendChild(s),n.appendChild(r),e.appendChild(n),e}function re(){var e=document.createElement("div");e.classList.add("to");var t=document.createElement("div");t.classList.add("uo");var a=document.createElement("div");a.classList.add("vo"),a.appendChild((0,v.YC)("route"));var i=document.createElement("div");i.classList.add("wo");var n=document.createElement("div");n.classList.add("xo");var d=document.createElement("div");d.classList.add("yo");var s=document.createElement("div");s.classList.add("zo"),s.setAttribute("type","view-route"),s.innerText="查看路線";var r=document.createElement("div");return r.classList.add("zo"),r.setAttribute("type","save-to-folder"),r.setAttribute("highlighted","false"),r.innerText="儲存路線",t.appendChild(a),t.appendChild(i),e.appendChild(t),e.appendChild(n),d.appendChild(s),d.appendChild(r),e.appendChild(d),e}function oe(){var e=document.createElement("div");e.classList.add("_o");var t=document.createElement("div");t.classList.add("ap");var a=document.createElement("div");a.classList.add("bp"),a.appendChild((0,v.YC)("calendar_view_day"));var i=document.createElement("div");i.classList.add("cp");var n=document.createElement("div");n.classList.add("dp");var d=document.createElement("div");return d.classList.add("ep"),t.appendChild(a),t.appendChild(i),t.appendChild(n),e.appendChild(t),e.appendChild(d),e}function le(){var e=document.createElement("div");e.classList.add("fp");var t=document.createElement("div");t.classList.add("gp");var a=document.createElement("div");a.classList.add("hp"),a.appendChild((0,v.YC)("location_on"));var i=document.createElement("div");i.classList.add("ip");var n=document.createElement("div");n.classList.add("jp");var d=document.createElement("div");d.classList.add("kp");var s=document.createElement("div");s.classList.add("lp"),s.setAttribute("type","view-location"),s.innerText="查看地點";var r=document.createElement("div");return r.classList.add("lp"),r.setAttribute("type","save-to-folder"),r.setAttribute("highlighted","false"),r.innerText="儲存地點",t.appendChild(a),t.appendChild(i),e.appendChild(t),e.appendChild(n),d.appendChild(s),d.appendChild(r),e.appendChild(d),e}function ue(e,t,a){var i,n;function r(t,a,i,n,r,o){function l(e,t,a,i,n){var d=(0,u.aI)(t,".pn"),s=(0,u.aI)(d,".uf"),r=(0,u.aI)(d,".tf"),o=(0,u.aI)(e,".zn"),l=(0,u.aI)(o,".uf"),c=(0,u.aI)(o,".tf");if(r.setAttribute("code",a.status.code.toString()),c.setAttribute("code",a.status.code.toString()),c.innerText=a.status.text,!i&&n){var p=e.getBoundingClientRect(),m=p.top,v=p.left,h=p.bottom,f=p.right,b=window.innerWidth,g=window.innerHeight;if(h>0&&m<g&&f>0&&v<b)return s.addEventListener("animationend",function(){s.setAttribute("code",a.status.code.toString()),s.classList.remove("wf"),r.setAttribute("displayed","false")},{once:!0}),l.addEventListener("animationend",function(){l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text,l.classList.remove("wf"),c.setAttribute("displayed","false")},{once:!0}),c.setAttribute("displayed","true"),r.setAttribute("displayed","true"),s.classList.add("wf"),void l.classList.add("wf")}s.setAttribute("code",a.status.code.toString()),l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text}function c(e,t,a){e.setAttribute("segment-buffer",(0,p.xZ)(a.segmentBuffer.isSegmentBuffer)),t.setAttribute("segment-buffer",(0,p.xZ)(a.segmentBuffer.isSegmentBuffer))}function v(e,t){(0,u.aI)(e,".ln").innerText=t.name}function h(e,t){var a=(0,u.aI)(e,".fo"),i=Array.from((0,u.jg)(a,".lo")),n=i.length,d=t.buses.length,s=n-d;if(s<0){for(var r=new DocumentFragment,o=0;o>s;o--){var l=se();r.appendChild(l),i.push(l)}a.append(r)}else if(s>0)for(var c=n-1,m=n-s-1;c>m;c--)i[c].remove(),i.splice(c,1);for(var v=0;v<d;v++){var h=t.buses[v],f=i[v],b=(0,u.aI)(f,".mo"),g=(0,u.aI)(b,".oo"),A=(0,u.aI)(f,".po"),y=(0,u.aI)(A,".qo"),C=(0,u.aI)(A,".ro"),L=(0,u.aI)(A,".so");f.setAttribute("on-this-route",(0,p.xZ)(h.onThisRoute)),g.innerText=h.carNumber,y.innerText=`路線：${h.RouteName}`,C.innerText=`狀態：${h.status.text}`,L.innerText=`類型：${h.type}`}a.setAttribute("empty",(0,p.xZ)(0===d))}function b(e,t){var a=(0,u.aI)(e,".go"),i=Array.from((0,u.jg)(a,".to")),n=i.length,s=t.overlappingRoutes.length,r=n-s;if(r<0){for(var o=new DocumentFragment,l=0;l>r;l--){var c=re();o.appendChild(c),i.push(c)}a.append(o)}else if(r>0)for(var m=n-1,v=n-r-1;m>v;m--)i[m].remove(),i.splice(m,1);for(var h=0;h<s;h++){var f=t.overlappingRoutes[h],b=i[h],A=(0,u.aI)(b,".uo"),y=(0,u.aI)(A,".wo"),C=(0,u.aI)(b,".xo"),L=(0,u.aI)(b,".yo"),E=(0,u.aI)(L,'.zo[type="view-route"]'),I=(0,u.aI)(L,'.zo[type="save-to-folder"]');y.innerText=f.name,C.innerText=f.RouteEndPoints.text,function(e,t,a){e.onclick=function(){fe(t,a)}}(E,f.RouteID,f.PathAttributeId),function(e,t){e.onclick=function(){(0,g.B)("route",[t],e)},(0,d.LH)("route",t).then(function(t){e.setAttribute("highlighted",(0,p.xZ)(t))})}(I,f.RouteID)}a.setAttribute("empty",(0,p.xZ)(0===s))}function y(e,t){var a=(0,u.aI)(e,".ho"),i=Array.from((0,u.jg)(a,"._o")),n=i.length,d=t.busArrivalTimes.length,s=n-d;if(s<0){for(var r=new DocumentFragment,o=0;o>s;o--){var l=oe();r.appendChild(l),i.push(l)}a.append(r)}else if(s>0)for(var c=n-1,v=n-s-1;c>v;c--)i[c].remove(),i.splice(c,1);for(var h=0;h<d;h++){var f=t.busArrivalTimes[h],b=i[h],g=(0,u.aI)(b,".ap"),A=(0,u.aI)(g,".cp"),y=(0,u.aI)(g,".dp"),C=(0,u.aI)(b,".ep");A.innerText=f.personalSchedule.name,y.innerText=`週${(0,m.kd)(f.day).name} ${(0,m.pn)(f.personalSchedule.period.start)} - ${(0,m.pn)(f.personalSchedule.period.end)}`,C.innerHTML=f.chart}a.setAttribute("empty",(0,p.xZ)(0===d))}function C(e,t){var a=(0,u.aI)(e,".io"),i=Array.from((0,u.jg)(a,".fp")),n=i.length,s=t.nearbyLocations.length,r=n-s;if(r<0){for(var o=new DocumentFragment,l=0;l>r;l--){var c=le();o.appendChild(c),i.push(c)}a.append(o)}else if(r>0)for(var m=n-1,v=n-r-1;m>v;m--)i[m].remove(),i.splice(m,1);for(var h=0;h<s;h++){var b=t.nearbyLocations[h],A=i[h],y=(0,u.aI)(A,".gp"),C=(0,u.aI)(y,".ip"),L=(0,u.aI)(A,".jp"),E=(0,u.aI)(A,".kp"),I=(0,u.aI)(E,'.lp[type="view-location"]'),x=(0,u.aI)(E,'.lp[type="save-to-folder"]');C.innerText=b.name,L.innerText=`${b.distance}公尺`,function(e,t){e.onclick=function(){(0,f.so)(t)}}(I,b.hash),function(e,t){e.onclick=function(){(0,g.B)("location",[t],e)},(0,d.LH)("location",t).then(function(t){e.setAttribute("highlighted",(0,p.xZ)(t))})}(x,b.hash)}a.setAttribute("empty",(0,p.xZ)(0===s))}function L(e,t,a){e.setAttribute("nearest",(0,p.xZ)(a.nearest)),t.setAttribute("nearest",(0,p.xZ)(a.nearest))}function E(e,t,a,i,n){var d=(null==a?void 0:a.progress)||0,s=(null==t?void 0:t.progress)||0,r=(0,u.aI)(e,".on .yn");if(!i&&n&&0!==d&&0===s&&Math.abs(s-d)>0)return r.style.setProperty("--mp","100%"),void r.addEventListener("transitionend",function(){r.setAttribute("displayed","false"),r.style.setProperty("--mp","-100%")},{once:!0});s>0?(r.setAttribute("displayed","true"),r.style.setProperty("--mp",100*(s-1)+"%")):r.setAttribute("displayed","false")}function I(e,t,a){a&&((0,u.aI)(e,".bo").setAttribute("displayed","false"),e.setAttribute("stretched","false"),t.setAttribute("stretched","false"))}function x(e,t,a){e.setAttribute("animation",(0,p.xZ)(a)),t.setAttribute("animation",(0,p.xZ)(a))}function w(e,t,a){e.setAttribute("skeleton-screen",(0,p.xZ)(a)),t.setAttribute("skeleton-screen",(0,p.xZ)(a))}function T(t,a){var i=(0,u.aI)(t,'.bo .co .do[type="save-to-folder"]');i.onclick=function(){(0,g.B)("stop",[a.id,e.RouteID],i)},(0,d.LH)("stop",a.id).then(function(e){i.setAttribute("highlighted",(0,p.xZ)(e))})}function k(t,a){var i=(0,u.aI)(t,'.bo .co .do[type="schedule-notification"]');i.onclick=function(){(0,A.Ho)(i,a.id,e.RouteID,a.status.time)};var n=(0,s.Zc)(a.id);i.setAttribute("highlighted",(0,p.xZ)(n))}null===n?(l(t,a,i,r,o),v(t,i),h(t,i),b(t,i),y(t,i),C(t,i),c(t,a,i),L(t,a,i),E(a,i,n,r,o),I(t,a,r),x(t,a,o),w(t,a,r),T(t,i),k(t,i)):(i.status.time!==n.status.time&&(l(t,a,i,r,o),k(t,i)),(0,p.hw)(n.buses,i.buses)||h(t,i),(0,p.hw)(n.busArrivalTimes,i.busArrivalTimes)||y(t,i),n.nearest!==i.nearest&&L(t,a,i),n.progress!==i.progress&&E(a,i,n,r,o),n.id!==i.id&&(v(t,i),c(t,a,i),b(t,i),C(t,i),T(t,i),k(t,i)),P!==o&&x(t,a,o),$!==r&&(I(t,a,r),w(t,a,r)))}var o=(0,h.gO)("window"),l=o.width,v=o.height,b=e.groupQuantity,C=e.itemQuantity,L=e.groupedItems,w=e.groupNames;B=b,M=l;for(var _=0,D=0;D<b;D++){var z=`g_${D}`,F=(0,c.q_)(w[D],500,"17px",'"Noto Sans TC", sans-serif')+20;N[z]={width:F,offset:_},_+=F}if(N[`g_${b}`]={width:0,offset:_},!Y){var q=N[`g_${j}`],H=-1*q.offset+.5*M-.5*q.width,Q=q.width-20;ee(B,H,Q,j)}$!==t&&(E.setAttribute("skeleton-screen",(0,p.xZ)(t)),T.setAttribute("skeleton-screen",(0,p.xZ)(t)),R.setAttribute("skeleton-screen",(0,p.xZ)(t))),P!==a&&(E.setAttribute("animation",(0,p.xZ)(a)),T.setAttribute("animation",(0,p.xZ)(a)),R.setAttribute("animation",(0,p.xZ)(a))),(null===(i=S)||void 0===i?void 0:i.RouteID)!==e.RouteID&&(x.onclick=function(){(0,y.GS)(e.RouteID,e.PathAttributeId)}),(null===(n=S)||void 0===n?void 0:n.RouteName)!==e.RouteName&&(I.innerText=e.RouteName);var J=Array.from((0,u.jg)(Z,".fn")),O=Array.from((0,u.jg)(k,".zm")),U=J.length;if(b!==U){var W=U-b;if(W<0){for(var G=new DocumentFragment,K=new DocumentFragment,X=0;X>W;X--){var V=ne();G.appendChild(V),J.push(V);var te=de();K.appendChild(te),O.push(te)}Z.append(G),k.append(K)}else if(W>0)for(var ue=U-1,ce=U-W-1;ue>ce;ue--)J[ue].remove(),J.splice(ue,1),O[ue].remove(),O.splice(ue,1)}for(var pe=0;pe<b;pe++){var me=`g_${pe}`,ve=J[pe],he=(0,u.aI)(ve,".in"),be=(0,u.aI)(ve,".hn"),ge=Array.from((0,u.jg)(he,".jn")),Ae=Array.from((0,u.jg)(be,".nn")),ye=ge.length;if(C[me]!==ye){var Ce=ye-C[me];if(Ce<0){for(var Le=new DocumentFragment,Ee=new DocumentFragment,Ie=0;Ie>Ce;Ie--){var xe=ae(),we=ie(xe);Le.appendChild(we),ge.push(we),Ee.appendChild(xe),Ae.push(xe)}he.append(Le),be.append(Ee)}else if(Ce>0)for(var Te=ye-1,ke=ye-Ce-1;Te>ke;Te--)ge[Te].remove(),ge.splice(Te,1),Ae[Te].remove(),Ae.splice(Te,1)}var Re=O[pe];(0,u.aI)(Re,"span").innerText=w[pe],Re.style.setProperty("--km",`${N[me].offset}px`),Re.style.setProperty("--lm",`${N[me].width}px`),Re.style.setProperty("--mm",pe.toString()),t&&(ve.scrollTop=0);for(var _e=0;_e<C[me];_e++){var Ze=ge[_e],Se=Ae[_e],Pe=L[me][_e];if((0,p.mQ)(S,"groupedItems"))if((0,p.mQ)(S.groupedItems,me))if(S.groupedItems[me][_e])r(Ze,Se,Pe,S.groupedItems[me][_e],t,a);else r(Ze,Se,Pe,null,t,a);else r(Ze,Se,Pe,null,t,a);else r(Ze,Se,Pe,null,t,a)}}k.style.setProperty("--pm",`${_}px`),S=e,P=a,$=t}function ce(){return pe.apply(this,arguments)}function pe(){return(pe=(0,i.A)(function*(){var e=(0,l.Js)("playing_animation"),t=(0,l.Js)("refresh_interval"),a=(0,h.gO)("route-bus-arrival-time-chart");H=t.dynamic,z=t.baseInterval,U=!0,O=(0,p.zx)(),w.setAttribute("refreshing","true"),w.classList.remove("dn"),document.addEventListener(O,te);var i=yield(0,o.R)(K,X,a.width,a.height,O);ue(i,!1,e);var d=0;H&&(d=yield(0,n.wz)()),Q=(new Date).getTime(),J=H?Math.max(Q+F,i.dataUpdateTime+z/d):Q+z,q=Math.max(F,J-Q),U=!1,w.setAttribute("refreshing","false"),w.style.setProperty("--sm",`${q}ms`),w.classList.add("dn")})).apply(this,arguments)}function me(){ce().then(function(){W?setTimeout(function(){me()},Math.max(F,J-(new Date).getTime())):G=!1}).catch(function(e){W?((0,b.a)("error","路線網路連線中斷，將在10秒後重試。"),setTimeout(function(){me()},1e4)):G=!1})}function ve(e,t){(0,h.WR)("Route"),(0,r.XK)("route",e),K=e,X=t,j=0,N={},C.setAttribute("displayed","true"),Z.scrollLeft=0,Z.focus(),function(e,t){for(var a=(0,l.Js)("playing_animation"),i=(0,h.gO)("window"),n=(i.width,i.height),d=Math.floor(n/50)+5,s={},r=0;r<2;r++){var o=`g_${r}`;s[o]=[];for(var u=0;u<d;u++)s[o].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:u,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}ue({groupNames:["往載入中","往載入中"],groupedItems:s,groupQuantity:2,itemQuantity:{g_0:d,g_1:d},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:e,PathAttributeId:t,dataUpdateTime:0},!0,a)}(e,t),W||(W=!0,G?ce():(G=!0,me())),(0,h.Z_)()}function he(){C.setAttribute("displayed","false"),W=!1,(0,h.l$)()}function fe(e,t){W=!1,ve(e,t)}function be(e,t){var a=(0,u.aI)(e,".co"),i=(0,u.jg)(a,'.do[highlighted="true"][type="tab"]');for(var n of i)n.setAttribute("highlighted","false");switch((0,u.aI)(a,`.do[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,u.aI)(e,".fo").setAttribute("displayed","true"),(0,u.aI)(e,".ho").setAttribute("displayed","false"),(0,u.aI)(e,".go").setAttribute("displayed","false"),(0,u.aI)(e,".io").setAttribute("displayed","false");break;case 1:(0,u.aI)(e,".fo").setAttribute("displayed","false"),(0,u.aI)(e,".ho").setAttribute("displayed","true"),(0,u.aI)(e,".go").setAttribute("displayed","false"),(0,u.aI)(e,".io").setAttribute("displayed","false");break;case 2:(0,u.aI)(e,".fo").setAttribute("displayed","false"),(0,u.aI)(e,".ho").setAttribute("displayed","false"),(0,u.aI)(e,".go").setAttribute("displayed","true"),(0,u.aI)(e,".io").setAttribute("displayed","false");break;case 3:(0,u.aI)(e,".fo").setAttribute("displayed","false"),(0,u.aI)(e,".ho").setAttribute("displayed","false"),(0,u.aI)(e,".go").setAttribute("displayed","false"),(0,u.aI)(e,".io").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=9d995fcff394a5cc1410.js.map