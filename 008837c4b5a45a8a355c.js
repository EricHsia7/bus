"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[8],{4690(e,t,d){d.d(t,{a:()=>he,b:()=>Z,c:()=>ve});var a=d(467),i=d(5767),n=d(9566),s=d(3422),r=d(5314),o=d(7123),l=d(3459),c=d(8179),u=d(7968),p=d(8024),m=d(5579),v=d(4537),h=d(904),f=d(3030),b=d(9119),A=d(3041),g=d(752),y=d(5286),C=(0,c.b)(".jm"),L=(0,c.d)(C,".tm"),E=(0,c.d)(L,".wm"),w=(0,c.d)(E,"span"),x=(0,c.d)(L,".vm"),T=(0,c.d)(L,".bn .cn"),k=(0,c.d)(L,".xm"),R=(0,c.d)(k,".ym"),_=(0,c.d)(L,"._m"),P=(0,c.d)(_,".an"),$=(0,c.d)(C,".en"),S={},D=!1,I=!1,N=0,B=0,M=0,z={},F=0,j=!1,q=15e3,Q=5e3,H=15e3,U=!0,W=0,G=0,J="",K=!1,O=!1,V=!1,X=0,Y=[];function Z(){$.addEventListener("touchstart",function(){N=Math.round($.scrollLeft/F)},{passive:!0}),$.addEventListener("scroll",function(e){j=!0;var t=e.target.scrollLeft/F;B=t>N?N+1:N-1;var d=t-N,a=Math.abs(d);a>1&&(d>0?(N=Math.floor(t),B=N+1):(N=Math.ceil(t),B=N-1),a=Math.abs(t-N));var i=z[`g_${N}`]||{width:0,offset:0},n=z[`g_${B}`]||{width:0,offset:0},s=i.width+(n.width-i.width)*a,r=-1*(i.offset+(n.offset-i.offset)*a)+.5*F-.5*s;ee(M,r,s-20,t)},{passive:!0}),$.addEventListener("scrollend",function(e){var t=e.target.scrollLeft/F;N=Math.round(t),j=!1},{passive:!0})}function ee(e,t,d,a){$.style.setProperty("--im",e.toString()),P.style.setProperty("--nm",d.toString()),R.style.setProperty("--om",`${t.toString()}px`),R.style.setProperty("--qm",a.toString())}function te(e){var t=e;if(K){var d=t.detail.progress-1;T.style.setProperty("--rm",d.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,te)}function de(){var e=document.createElement("div");e.classList.add("nn"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var t=document.createElement("div");t.classList.add("on");var d=document.createElement("div");d.classList.add("yn"),d.setAttribute("displayed","false"),t.appendChild(d);var a=document.createElement("div");a.classList.add("pn");var i=document.createElement("div");i.classList.add("tf"),i.setAttribute("code","0"),i.setAttribute("displayed","false"),a.appendChild(i);var n=document.createElement("div");return n.classList.add("uf"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),a.appendChild(n),e.appendChild(t),e.appendChild(a),e}function ae(e){var t=document.createElement("div");t.classList.add("jn"),t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var d=document.createElement("div");d.classList.add("kn");var a=document.createElement("div");a.classList.add("ln"),d.appendChild(a);var i=document.createElement("div");i.classList.add("mn");var n=document.createElement("div");n.classList.add("zn");var s=document.createElement("div");s.classList.add("tf"),s.setAttribute("code","0"),s.setAttribute("displayed","false"),n.appendChild(s);var r=document.createElement("div");r.classList.add("uf"),r.setAttribute("code","0"),r.setAttribute("displayed","true"),n.appendChild(r),i.appendChild(n);var o=document.createElement("div");o.classList.add("_n"),o.appendChild((0,v.b)("keyboard_arrow_down")),o.onclick=function(){!function(e,t){var d=(0,c.d)(e,".bo"),a=e.parentElement,i=t.parentElement,n=(0,c.e)(t,"nn"),s=(0,c.e)(e,"jn"),r=s.length,o=a.getBoundingClientRect(),l=e.getBoundingClientRect(),u=i.getBoundingClientRect(),p=t.getBoundingClientRect(),m=p.top-u.top,v=l.top-o.top,h="true"===e.getAttribute("stretched"),f="true"===e.getAttribute("animation");if(f){var b=h?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--op",`${m}px`),e.setAttribute("stretching","true"),e.style.setProperty("--qp",`${v}px`);for(var A=0;A<r;A++){var g=s[A],y=n[A];y.style.setProperty("--rp",(-1*A-1).toString()),y.setAttribute("push-direction",b),y.setAttribute("push-state","1"),g.setAttribute("push-direction",b),g.setAttribute("push-state","1")}e.addEventListener("transitionend",function(){for(var d=0;d<r;d++){var a=s[d],i=n[d];i.setAttribute("push-direction","0"),i.setAttribute("push-state","0"),a.setAttribute("push-direction","0"),a.setAttribute("push-state","0")}t.setAttribute("stretching","false"),e.setAttribute("stretching","false")},{once:!0}),e.addEventListener("transitionstart",function(){for(var e=0;e<r;e++){var t=s[e];n[e].setAttribute("push-state","2"),t.setAttribute("push-state","2")}},{once:!0})}h?(f?d.addEventListener("transitionend",function(){d.setAttribute("displayed","false")},{once:!0}):d.setAttribute("displayed","false"),e.setAttribute("stretched","false"),t.setAttribute("stretched","false")):(d.setAttribute("displayed","true"),e.setAttribute("stretched","true"),t.setAttribute("stretched","true"))}(t,e)},i.appendChild(o);var l=document.createElement("div");l.classList.add("ao"),i.appendChild(l),d.appendChild(i);var u=document.createElement("div");u.classList.add("bo"),u.setAttribute("displayed","false");var p=document.createElement("div");p.classList.add("co");var m=document.createElement("div");m.classList.add("do"),m.setAttribute("highlighted","true"),m.setAttribute("type","tab"),m.setAttribute("code","0"),m.onclick=function(){be(t,0)};var h=document.createElement("div");h.classList.add("eo"),h.appendChild((0,v.b)("directions_bus")),m.appendChild(h),m.appendChild(document.createTextNode("公車")),p.appendChild(m);var f=document.createElement("div");f.classList.add("do"),f.setAttribute("highlighted","false"),f.setAttribute("type","tab"),f.setAttribute("code","1"),f.onclick=function(){be(t,1)};var b=document.createElement("div");b.classList.add("eo"),b.appendChild((0,v.b)("departure_board")),f.appendChild(b),f.appendChild(document.createTextNode("抵達時間")),p.appendChild(f);var A=document.createElement("div");A.classList.add("do"),A.setAttribute("highlighted","false"),A.setAttribute("type","tab"),A.setAttribute("code","2"),A.onclick=function(){be(t,2)};var g=document.createElement("div");g.classList.add("eo"),g.appendChild((0,v.b)("route")),A.appendChild(g),A.appendChild(document.createTextNode("路線")),p.appendChild(A);var y=document.createElement("div");y.classList.add("do"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){be(t,3)};var C=document.createElement("div");C.classList.add("eo"),C.appendChild((0,v.b)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),p.appendChild(y);var L=document.createElement("div");L.classList.add("do"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var E=document.createElement("div");E.classList.add("eo"),E.appendChild((0,v.b)("folder")),L.appendChild(E),L.appendChild(document.createTextNode("儲存")),p.appendChild(L);var w=document.createElement("div");w.classList.add("do"),w.setAttribute("highlighted","false"),w.setAttribute("type","schedule-notification"),w.setAttribute("enabled","true");var x=document.createElement("div");x.classList.add("eo"),x.appendChild((0,v.b)("notifications")),w.appendChild(x),w.appendChild(document.createTextNode("通知")),p.appendChild(w),u.appendChild(p);var T=document.createElement("div");T.classList.add("fo"),T.setAttribute("displayed","true"),u.appendChild(T);var k=document.createElement("div");k.classList.add("go"),k.setAttribute("displayed","false"),u.appendChild(k);var R=document.createElement("div");R.classList.add("ho"),R.setAttribute("displayed","false"),u.appendChild(R);var _=document.createElement("div");return _.classList.add("io"),_.setAttribute("displayed","false"),u.appendChild(_),t.appendChild(d),t.appendChild(u),t}function ie(){var e=document.createElement("div");e.classList.add("fn");var t=document.createElement("div");t.classList.add("gn");var d=document.createElement("div");d.classList.add("hn");var a=document.createElement("div");a.classList.add("jo");var i=document.createElement("div");i.classList.add("in");var n=document.createElement("div");return n.classList.add("ko"),i.appendChild(n),d.appendChild(a),t.appendChild(d),t.appendChild(i),e.appendChild(t),e}function ne(){var e=document.createElement("div");e.classList.add("zm");var t=document.createElement("span");return e.appendChild(t),e}function se(){var e=document.createElement("div");e.classList.add("lo"),e.setAttribute("on-this-route","false");var t=document.createElement("div");t.classList.add("mo");var d=document.createElement("div");d.classList.add("no"),d.appendChild((0,v.b)("directions_bus"));var a=document.createElement("div");a.classList.add("oo");var i=document.createElement("div");i.classList.add("po");var n=document.createElement("div");n.classList.add("qo");var s=document.createElement("div");s.classList.add("ro");var r=document.createElement("div");return r.classList.add("so"),t.appendChild(d),t.appendChild(a),e.appendChild(t),i.appendChild(n),i.appendChild(s),i.appendChild(r),e.appendChild(i),e}function re(){var e=document.createElement("div");e.classList.add("to");var t=document.createElement("div");t.classList.add("uo");var d=document.createElement("div");d.classList.add("vo"),d.appendChild((0,v.b)("route"));var a=document.createElement("div");a.classList.add("wo");var i=document.createElement("div");i.classList.add("xo");var n=document.createElement("div");n.classList.add("yo");var s=document.createElement("div");s.classList.add("zo"),s.setAttribute("type","view-route"),s.innerText="查看路線";var r=document.createElement("div");return r.classList.add("zo"),r.setAttribute("type","save-to-folder"),r.setAttribute("highlighted","false"),r.innerText="儲存路線",t.appendChild(d),t.appendChild(a),e.appendChild(t),e.appendChild(i),n.appendChild(s),n.appendChild(r),e.appendChild(n),e}function oe(){var e=document.createElement("div");e.classList.add("_o");var t=document.createElement("div");t.classList.add("ap");var d=document.createElement("div");d.classList.add("bp"),d.appendChild((0,v.b)("calendar_view_day"));var a=document.createElement("div");a.classList.add("cp");var i=document.createElement("div");i.classList.add("dp");var n=document.createElement("div");return n.classList.add("ep"),t.appendChild(d),t.appendChild(a),t.appendChild(i),e.appendChild(t),e.appendChild(n),e}function le(){var e=document.createElement("div");e.classList.add("fp");var t=document.createElement("div");t.classList.add("gp");var d=document.createElement("div");d.classList.add("hp"),d.appendChild((0,v.b)("location_on"));var a=document.createElement("div");a.classList.add("ip");var i=document.createElement("div");i.classList.add("jp");var n=document.createElement("div");n.classList.add("kp");var s=document.createElement("div");s.classList.add("lp"),s.setAttribute("type","view-location"),s.innerText="查看地點";var r=document.createElement("div");return r.classList.add("lp"),r.setAttribute("type","save-to-folder"),r.setAttribute("highlighted","false"),r.innerText="儲存地點",t.appendChild(d),t.appendChild(a),e.appendChild(t),e.appendChild(i),n.appendChild(s),n.appendChild(r),e.appendChild(n),e}function ce(e,t,d){var a,i;function r(t,d,a,i,r,o){function l(e,t,d,a,i){var n=(0,c.d)(t,".pn"),s=(0,c.d)(n,".uf"),r=(0,c.d)(n,".tf"),o=(0,c.d)(e,".zn"),l=(0,c.d)(o,".uf"),u=(0,c.d)(o,".tf");if(r.setAttribute("code",d.status.code.toString()),u.setAttribute("code",d.status.code.toString()),u.innerText=d.status.text,!a&&i){var p=e.getBoundingClientRect(),m=p.top,v=p.left,h=p.bottom,f=p.right,b=window.innerWidth,A=window.innerHeight;if(h>0&&m<A&&f>0&&v<b)return s.addEventListener("animationend",function(){s.setAttribute("code",d.status.code.toString()),s.classList.remove("wf"),r.setAttribute("displayed","false")},{once:!0}),l.addEventListener("animationend",function(){l.setAttribute("code",d.status.code.toString()),l.innerText=d.status.text,l.classList.remove("wf"),u.setAttribute("displayed","false")},{once:!0}),u.setAttribute("displayed","true"),r.setAttribute("displayed","true"),s.classList.add("wf"),void l.classList.add("wf")}s.setAttribute("code",d.status.code.toString()),l.setAttribute("code",d.status.code.toString()),l.innerText=d.status.text}function u(e,t,d){e.setAttribute("segment-buffer",(0,p.a)(d.segmentBuffer.isSegmentBuffer)),t.setAttribute("segment-buffer",(0,p.a)(d.segmentBuffer.isSegmentBuffer))}function v(e,t){(0,c.d)(e,".ln").innerText=t.name}function h(e,t){var d=(0,c.d)(e,".fo"),a=Array.from((0,c.c)(d,".lo")),i=a.length,n=t.buses.length,s=i-n;if(s<0){for(var r=new DocumentFragment,o=0;o>s;o--){var l=se();r.appendChild(l),a.push(l)}d.append(r)}else if(s>0)for(var u=i-1,m=i-s-1;u>m;u--)a[u].remove(),a.splice(u,1);for(var v=0;v<n;v++){var h=t.buses[v],f=a[v],b=(0,c.d)(f,".mo"),A=(0,c.d)(b,".oo"),g=(0,c.d)(f,".po"),y=(0,c.d)(g,".qo"),C=(0,c.d)(g,".ro"),L=(0,c.d)(g,".so");f.setAttribute("on-this-route",(0,p.a)(h.onThisRoute)),A.innerText=h.carNumber,y.innerText=`路線：${h.RouteName}`,C.innerText=`狀態：${h.status.text}`,L.innerText=`類型：${h.type}`}d.setAttribute("empty",(0,p.a)(0===n))}function b(e,t){var d=(0,c.d)(e,".go"),a=Array.from((0,c.c)(d,".to")),i=a.length,s=t.overlappingRoutes.length,r=i-s;if(r<0){for(var o=new DocumentFragment,l=0;l>r;l--){var u=re();o.appendChild(u),a.push(u)}d.append(o)}else if(r>0)for(var m=i-1,v=i-r-1;m>v;m--)a[m].remove(),a.splice(m,1);for(var h=0;h<s;h++){var f=t.overlappingRoutes[h],b=a[h],g=(0,c.d)(b,".uo"),y=(0,c.d)(g,".wo"),C=(0,c.d)(b,".xo"),L=(0,c.d)(b,".yo"),E=(0,c.d)(L,'.zo[type="view-route"]'),w=(0,c.d)(L,'.zo[type="save-to-folder"]');y.innerText=f.name,C.innerText=f.RouteEndPoints.text,function(e,t,d){e.onclick=function(){fe(t,d)}}(E,f.RouteID,f.PathAttributeId),function(e,t){e.onclick=function(){(0,A.b)("route",[t],e)},(0,n.e)("route",t).then(function(t){e.setAttribute("highlighted",(0,p.a)(t))})}(w,f.RouteID)}d.setAttribute("empty",(0,p.a)(0===s))}function y(e,t){var d=(0,c.d)(e,".ho"),a=Array.from((0,c.c)(d,"._o")),i=a.length,n=t.busArrivalTimes.length,s=i-n;if(s<0){for(var r=new DocumentFragment,o=0;o>s;o--){var l=oe();r.appendChild(l),a.push(l)}d.append(r)}else if(s>0)for(var u=i-1,v=i-s-1;u>v;u--)a[u].remove(),a.splice(u,1);for(var h=0;h<n;h++){var f=t.busArrivalTimes[h],b=a[h],A=(0,c.d)(b,".ap"),g=(0,c.d)(A,".cp"),y=(0,c.d)(A,".dp"),C=(0,c.d)(b,".ep");g.innerText=f.personalSchedule.name,y.innerText=`週${(0,m.g)(f.day).name} ${(0,m.i)(f.personalSchedule.period.start)} - ${(0,m.i)(f.personalSchedule.period.end)}`,C.innerHTML=f.chart}d.setAttribute("empty",(0,p.a)(0===n))}function C(e,t){var d=(0,c.d)(e,".io"),a=Array.from((0,c.c)(d,".fp")),i=a.length,s=t.nearbyLocations.length,r=i-s;if(r<0){for(var o=new DocumentFragment,l=0;l>r;l--){var u=le();o.appendChild(u),a.push(u)}d.append(o)}else if(r>0)for(var m=i-1,v=i-r-1;m>v;m--)a[m].remove(),a.splice(m,1);for(var h=0;h<s;h++){var b=t.nearbyLocations[h],g=a[h],y=(0,c.d)(g,".gp"),C=(0,c.d)(y,".ip"),L=(0,c.d)(g,".jp"),E=(0,c.d)(g,".kp"),w=(0,c.d)(E,'.lp[type="view-location"]'),x=(0,c.d)(E,'.lp[type="save-to-folder"]');C.innerText=b.name,L.innerText=`${b.distance}公尺`,function(e,t){e.onclick=function(){(0,f.c)(t)}}(w,b.hash),function(e,t){e.onclick=function(){(0,A.b)("location",[t],e)},(0,n.e)("location",t).then(function(t){e.setAttribute("highlighted",(0,p.a)(t))})}(x,b.hash)}d.setAttribute("empty",(0,p.a)(0===s))}function L(e,t,d){e.setAttribute("nearest",(0,p.a)(d.nearest)),t.setAttribute("nearest",(0,p.a)(d.nearest))}function E(e,t,d,a,i){var n=(null==d?void 0:d.progress)||0,s=(null==t?void 0:t.progress)||0,r=(0,c.d)(e,".on .yn");if(!a&&i&&0!==n&&0===s&&Math.abs(s-n)>0)return r.style.setProperty("--mp","100%"),void r.addEventListener("transitionend",function(){r.setAttribute("displayed","false"),r.style.setProperty("--mp","-100%")},{once:!0});s>0?(r.setAttribute("displayed","true"),r.style.setProperty("--mp",100*(s-1)+"%")):r.setAttribute("displayed","false")}function w(e,t,d){d&&((0,c.d)(e,".bo").setAttribute("displayed","false"),e.setAttribute("stretched","false"),t.setAttribute("stretched","false"))}function x(e,t,d){e.setAttribute("animation",(0,p.a)(d)),t.setAttribute("animation",(0,p.a)(d))}function T(e,t,d){e.setAttribute("skeleton-screen",(0,p.a)(d)),t.setAttribute("skeleton-screen",(0,p.a)(d))}function k(t,d){var a=(0,c.d)(t,'.bo .co .do[type="save-to-folder"]');a.onclick=function(){(0,A.b)("stop",[d.id,e.RouteID],a)},(0,n.e)("stop",d.id).then(function(e){a.setAttribute("highlighted",(0,p.a)(e))})}function R(t,d){var a=(0,c.d)(t,'.bo .co .do[type="schedule-notification"]');a.onclick=function(){(0,g.b)(a,d.id,e.RouteID,d.status.time)};var i=(0,s.r)(d.id);a.setAttribute("highlighted",(0,p.a)(i))}null===i?(l(t,d,a,r,o),v(t,a),h(t,a),b(t,a),y(t,a),C(t,a),u(t,d,a),L(t,d,a),E(d,a,i,r,o),w(t,d,r),x(t,d,o),T(t,d,r),k(t,a),R(t,a)):(a.status.time!==i.status.time&&(l(t,d,a,r,o),R(t,a)),(0,p.b)(i.buses,a.buses)||h(t,a),(0,p.b)(i.busArrivalTimes,a.busArrivalTimes)||y(t,a),i.nearest!==a.nearest&&L(t,d,a),i.progress!==a.progress&&E(d,a,i,r,o),i.id!==a.id&&(v(t,a),u(t,d,a),b(t,a),C(t,a),k(t,a),R(t,a)),D!==o&&x(t,d,o),I!==r&&(w(t,d,r),T(t,d,r)))}var o=(0,h.e)("window"),l=o.width,v=o.height,b=e.groupQuantity,C=e.itemQuantity,L=e.groupedItems,T=e.groupNames;M=b,F=l;for(var P=0,B=0;B<b;B++){var q=`g_${B}`,Q=(0,u.d)(T[B],500,"17px",'"Noto Sans TC", sans-serif')+20;z[q]={width:Q,offset:P},P+=Q}if(z[`g_${b}`]={width:0,offset:P},!j){var H=z[`g_${N}`],U=-1*H.offset+.5*F-.5*H.width,W=H.width-20;ee(M,U,W,N)}I!==t&&(E.setAttribute("skeleton-screen",(0,p.a)(t)),k.setAttribute("skeleton-screen",(0,p.a)(t)),_.setAttribute("skeleton-screen",(0,p.a)(t))),D!==d&&(E.setAttribute("animation",(0,p.a)(d)),k.setAttribute("animation",(0,p.a)(d)),_.setAttribute("animation",(0,p.a)(d))),(null===(a=S)||void 0===a?void 0:a.RouteID)!==e.RouteID&&(x.onclick=function(){(0,y.f)(e.RouteID,e.PathAttributeId)}),(null===(i=S)||void 0===i?void 0:i.RouteName)!==e.RouteName&&(w.innerText=e.RouteName);var G=Array.from((0,c.c)($,".fn")),J=Array.from((0,c.c)(R,".zm")),K=G.length;if(b!==K){var O=K-b;if(O<0){for(var V=new DocumentFragment,X=new DocumentFragment,Y=0;Y>O;Y--){var Z=ie();V.appendChild(Z),G.push(Z);var te=ne();X.appendChild(te),J.push(te)}$.append(V),R.append(X)}else if(O>0)for(var ce=K-1,ue=K-O-1;ce>ue;ce--)G[ce].remove(),G.splice(ce,1),J[ce].remove(),J.splice(ce,1)}for(var pe=0;pe<b;pe++){var me=`g_${pe}`,ve=G[pe],he=(0,c.d)(ve,".in"),be=(0,c.d)(ve,".hn"),Ae=Array.from((0,c.c)(he,".jn")),ge=Array.from((0,c.c)(be,".nn")),ye=Ae.length;if(C[me]!==ye){var Ce=ye-C[me];if(Ce<0){for(var Le=new DocumentFragment,Ee=new DocumentFragment,we=0;we>Ce;we--){var xe=de(),Te=ae(xe);Le.appendChild(Te),Ae.push(Te),Ee.appendChild(xe),ge.push(xe)}he.append(Le),be.append(Ee)}else if(Ce>0)for(var ke=ye-1,Re=ye-Ce-1;ke>Re;ke--)Ae[ke].remove(),Ae.splice(ke,1),ge[ke].remove(),ge.splice(ke,1)}var _e=J[pe];(0,c.d)(_e,"span").innerText=T[pe],_e.style.setProperty("--km",`${z[me].offset}px`),_e.style.setProperty("--lm",`${z[me].width}px`),_e.style.setProperty("--mm",pe.toString()),t&&(ve.scrollTop=0);for(var Pe=0;Pe<C[me];Pe++){var $e=Ae[Pe],Se=ge[Pe],De=L[me][Pe];if((0,p.e)(S,"groupedItems"))if((0,p.e)(S.groupedItems,me))if(S.groupedItems[me][Pe])r($e,Se,De,S.groupedItems[me][Pe],t,d);else r($e,Se,De,null,t,d);else r($e,Se,De,null,t,d);else r($e,Se,De,null,t,d)}}R.style.setProperty("--pm",`${P}px`),S=e,D=d,I=t}function ue(){return pe.apply(this,arguments)}function pe(){return(pe=(0,a.a)(function*(){var e=(0,l.b)("playing_animation"),t=(0,l.b)("refresh_interval"),d=(0,h.e)("route-bus-arrival-time-chart");U=t.dynamic,q=t.baseInterval,K=!0,J=(0,p.c)(),T.setAttribute("refreshing","true"),T.classList.remove("dn"),document.addEventListener(J,te);var a=yield(0,o.a)(X,Y,d.width,d.height,J);ce(a,!1,e);var n=0;U&&(n=yield(0,i.c)()),W=(new Date).getTime(),G=U?Math.max(W+Q,a.dataUpdateTime+q/n):W+q,H=Math.max(Q,G-W),K=!1,T.setAttribute("refreshing","false"),T.style.setProperty("--sm",`${H}ms`),T.classList.add("dn")})).apply(this,arguments)}function me(){ue().then(function(){O?setTimeout(function(){me()},Math.max(Q,G-(new Date).getTime())):V=!1}).catch(function(e){O?((0,b.a)("error","路線網路連線中斷，將在10秒後重試。"),setTimeout(function(){me()},1e4)):V=!1})}function ve(e,t){(0,h.d)("Route"),(0,r.e)("route",e),X=e,Y=t,N=0,z={},C.setAttribute("displayed","true"),$.scrollLeft=0,$.focus(),function(e,t){for(var d=(0,l.b)("playing_animation"),a=(0,h.e)("window"),i=(a.width,a.height),n=Math.floor(i/50)+5,s={},r=0;r<2;r++){var o=`g_${r}`;s[o]=[];for(var c=0;c<n;c++)s[o].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:c,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}ce({groupNames:["往載入中","往載入中"],groupedItems:s,groupQuantity:2,itemQuantity:{g_0:n,g_1:n},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:e,PathAttributeId:t,dataUpdateTime:0},!0,d)}(e,t),O||(O=!0,V?ue():(V=!0,me())),(0,h.a)()}function he(){C.setAttribute("displayed","false"),O=!1,(0,h.c)()}function fe(e,t){O=!1,ve(e,t)}function be(e,t){var d=(0,c.d)(e,".co"),a=(0,c.c)(d,'.do[highlighted="true"][type="tab"]');for(var i of a)i.setAttribute("highlighted","false");switch((0,c.d)(d,`.do[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,c.d)(e,".fo").setAttribute("displayed","true"),(0,c.d)(e,".ho").setAttribute("displayed","false"),(0,c.d)(e,".go").setAttribute("displayed","false"),(0,c.d)(e,".io").setAttribute("displayed","false");break;case 1:(0,c.d)(e,".fo").setAttribute("displayed","false"),(0,c.d)(e,".ho").setAttribute("displayed","true"),(0,c.d)(e,".go").setAttribute("displayed","false"),(0,c.d)(e,".io").setAttribute("displayed","false");break;case 2:(0,c.d)(e,".fo").setAttribute("displayed","false"),(0,c.d)(e,".ho").setAttribute("displayed","false"),(0,c.d)(e,".go").setAttribute("displayed","true"),(0,c.d)(e,".io").setAttribute("displayed","false");break;case 3:(0,c.d)(e,".fo").setAttribute("displayed","false"),(0,c.d)(e,".ho").setAttribute("displayed","false"),(0,c.d)(e,".go").setAttribute("displayed","false"),(0,c.d)(e,".io").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=008837c4b5a45a8a355c.js.map