"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[155],{928(){},1077(){},1818(){},1844(){},2239(){},2994(e,t,n){n.d(t,{a:()=>k,b:()=>g,c:()=>y,d:()=>L});var a=n(467),i=n(4225),r=n(3459),c=n(8179),o=n(8024),s=n(904),d=[],u=!1,l=!1,f=(0,c.c)(".xo"),p=(0,c.e)(f,".ap"),v=(0,c.e)(p,".bp");function h(){var e=(0,c.a)();e.classList.add("cp");var t=(0,c.a)();t.classList.add("dp");var n=(0,c.a)();return n.classList.add("ep"),e.appendChild(t),e.appendChild(n),e}function m(e,t,n){function a(e,a,i){function r(e,t){(0,c.e)(e,".ep").innerText=t.size}function s(e,t){(0,c.e)(e,".dp").innerText=t.category.name}function d(e,t){e.setAttribute("animation",(0,o.a)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}i?(a.category.key!==i.category.key&&(s(e,a),r(e,a)),a.size!==i.size&&r(e,a),u!==n&&d(e,n),l!==t&&f(e,t)):(r(e,a),s(e,a),d(e,n),f(e,t))}var i=[];for(var r in e.categorizedSizes){var s=e.categorizedSizes[r];i.push(s)}var f=i.length,p=Array.from((0,c.d)(v,".cp")),m=p.length;if(f!==m){var b=m-f;if(b<0){for(var L=new DocumentFragment,g=0;g>b;g--){var y=h();L.appendChild(y),p.push(y)}v.appendChild(L)}else if(b>0)for(var k=m-1,w=m-b-1;k>w;k--)p[k].remove(),p.splice(k,1)}for(var C=0;C<f;C++){var E=d[C],A=i[C],x=p[C];a(x,A,E||null)}d=i,l=t,u=n}function b(){return(b=(0,a.a)(function*(){var e=(0,r.b)("playing_animation");!function(){for(var e=(0,r.b)("playing_animation"),t=(0,s.d)("window").height,n=Math.min(7,Math.floor(t/55)+2),a={categorizedSizes:{},totalSize:0},i=0;i<n;i++){var c=`store-${i}`;a.categorizedSizes[c]={category:{name:"",key:c},size:`size-${i}`}}m(a,!0,e)}(),m(yield(0,i.a)(),!1,e)})).apply(this,arguments)}function L(e){var t="ltr"===e?"mc":"nc";f.addEventListener("animationend",function(){f.classList.remove(t)},{once:!0}),f.classList.add(t),f.setAttribute("displayed","true")}function g(e){var t="ltr"===e?"oc":"pc";f.addEventListener("animationend",function(){f.setAttribute("displayed","false"),f.classList.remove(t)},{once:!0}),f.classList.add(t)}function y(){(0,s.c)("Storage"),L("rtl"),function(){b.apply(this,arguments)}(),(0,s.b)()}function k(){g("ltr"),(0,s.i)(),(0,s.e)("Storage")}},3381(){},3425(){},4800(){},5009(e,t,n){n.d(t,{a:()=>W,b:()=>U,c:()=>R,d:()=>V,e:()=>G,f:()=>Q,g:()=>P});var a=n(8134),i=n(8179),r=n(7968),c=n(8024),o=n(4781),s=n(4884),d=n(6082),u=n(4537),l=n(904),f=n(3030),p=n(9119),v=n(4690),h=[],m=(0,i.c)(".mn"),b=(0,i.e)(m,".nn"),L=(0,i.e)(m,".rn"),g=(0,i.e)(b,".on #search_input"),y=(0,i.e)(b,".on svg"),k=(0,i.e)(y,'text[component="text"]'),w=(0,i.e)(y,'path[component="cursor"]'),C=(0,i.e)(b,".qn"),E=(0,i.e)(L,".sn"),A=(0,i.e)(L,".wn"),x="400",S="20px",z='"Noto Sans TC", sans-serif',T=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],_=(0,l.d)("head-two-button"),$=_.width,j=_.height,D=!1,F="",M=0;function H(){var e=g.value,t=e.substring(0,e.length-1);g.value=t,K(),N(),I(),(0,l.f)()}function q(){g.value="",K(),N(),I(),(0,l.f)()}function O(e){e.preventDefault(),g.focus(),(0,l.f)()}function R(){g.addEventListener("paste",function(){I(),K()}),g.addEventListener("cut",function(){I(),K()}),g.addEventListener("selectionchange",function(){I(),K()}),document.addEventListener("selectionchange",function(){I(),K()}),g.addEventListener("keyup",function(){I(),K()}),g.addEventListener("scroll",function(){I()})}function B(){return parseInt(C.getAttribute("type"))}function I(){var e=g.scrollLeft,t=g.value,n=g.selectionStart,a=g.selectionEnd,i=0===t.length,o=i?"搜尋路線、地點、公車":t,s=i?0:n,d=s!==(i?0:a),u=(0,r.c)(o,x,S,z),l=(0,r.c)(o.substring(0,s),x,S,z),f=-1*e,p=u[0]+(j-u[2])/2;k.textContent=o,k.setAttribute("transform",`translate(${f} ${p})`),w.setAttribute("transform",`translate(${i?1:Math.max(Math.min(l[1]+f,$-1),1)} 0)`),k.setAttribute("empty",(0,c.a)(i)),w.setAttribute("selection",(0,c.a)(d)),g.setAttribute("selection",(0,c.a)(d))}function N(){var e=g.value,t=e.length,n=(0,r.c)(e,x,S,z);g.setSelectionRange(t,t),g.scrollTo({left:n[1]-$})}function G(){_=(0,l.d)("head-two-button"),$=_.width,j=_.height,y.setAttribute("viewBox",`0 0 ${$} ${j}`),N(),I()}function J(){var e=(0,i.a)();e.classList.add("tn");var t=(0,i.a)();t.classList.add("vn");var n=(0,i.a)();return n.classList.add("un"),n.appendChild((0,u.a)()),e.appendChild(n),e.appendChild(t),e}function K(){var e=["route","location_on","directions_bus"];function t(t,n,a){function r(t,n){var a=(0,i.e)(n,".un");(0,u.c)(a,e[t.item.type])}function c(e,t){(0,i.e)(t,".vn").innerText=e.item.n}function o(e,t){switch(e.item.type){case 0:t.onclick=function(){(0,v.d)(e.item.id,e.item.pid)};break;case 1:t.onclick=function(){(0,f.d)(e.item.hash)};break;case 2:t.onclick=function(){(0,s.d)(e.item.id)}}}a?(n.item.type!==a.item.type&&r(n,t),n.item.id!==a.item.id&&(c(n,t),o(n,t))):(r(n,t),c(n,t),o(n,t))}var n=B(),r=g.value;if(!(0,o.a)(r)&&(r!==F||n!==M)){var c=(0,a.b)(r,n,30),d=c.length,l=Array.from((0,i.d)(E,".tn")),p=l.length;if(d!==p){var m=p-d;if(m<0){for(var b=new DocumentFragment,L=0;L>m;L--){var y=J();b.appendChild(y),l.push(y)}E.appendChild(b)}else if(m>0)for(var k=p-1,w=p-m-1;k>w;k--)l[k].remove(),l.splice(k,1)}for(var C=0;C<d;C++){var A=h[C],x=c[C],S=l[C];t(S,x,A||null)}h=c}F=r,M=n}function P(){var e=B(),t=-1;t=e>=-1&&e<2?e+1:-1;(0,u.c)(C,["filter_list","route","location_on","directions_bus"][t+1]),C.setAttribute("type",t.toString()),K()}function Q(e){var t="ltr"===e?"mc":"nc";m.addEventListener("animationend",function(){m.classList.remove(t)},{once:!0}),m.classList.add(t),m.setAttribute("displayed","true")}function U(e){var t="ltr"===e?"oc":"pc";m.addEventListener("animationend",function(){m.setAttribute("displayed","false"),m.classList.remove(t)},{once:!0}),m.classList.add(t)}function V(){d.a?((0,l.c)("Search"),Q("rtl"),function(){if(!D){D=!0;var e=new DocumentFragment;for(var t of T)for(var n of t){var a=document.createElement("button");a.classList.add("xn");var i=(0,c.j)()?"touchstart":"mousedown";switch(n){case"刪除":a.addEventListener(i,H),a.appendChild((0,u.b)("backspace"));break;case"清空":a.addEventListener(i,q),a.innerText=n;break;case"鍵盤":a.addEventListener(i,O),a.appendChild((0,u.b)("keyboard"));break;default:a.addEventListener(i,function(e){return function(){var t,n;t=e,n=`${g.value}${t}`,g.value=n,K(),N(),I(),(0,l.f)()}}(n)),a.innerText=n}e.appendChild(a)}A.append(e)}}(),(0,a.a)(),(0,l.b)()):(0,p.a)("download_for_offline","資料還在下載中")}function W(){U("ltr"),(0,l.i)(),(0,l.e)("Search")}},6104(e,t,n){n.d(t,{a:()=>E,b:()=>A,c:()=>w,d:()=>g,e:()=>S,f:()=>C,g:()=>_,h:()=>k,i:()=>T,j:()=>z});var a=n(467),i=n(5976),r=n(5427),c=n(3459),o=n(3251),s=n(4311),d=n(8179),u=n(8024),l=n(251),f=n(4537),p=n(904),v=n(9119),h=(0,d.c)(".yn"),m=(0,d.e)(h,".ho"),b=(0,d.e)(m,".jo");function L(e){var t=(0,d.a)();t.classList.add("lo"),t.setAttribute("type",e.type);var n=(0,d.a)();n.classList.add("no");var a=document.createElement("span");a.appendChild((0,f.b)(e.icon)),n.appendChild(a);var i=(0,d.a)();i.classList.add("oo"),i.innerText=e.name;var r=(0,d.a)();r.classList.add("qo"),r.innerText=e.status;var c=(0,d.a)();c.classList.add("ro");var o=document.createElement("span");return o.appendChild((0,f.b)("arrow_forward_ios")),c.appendChild(o),"function"==typeof e.action?t.onclick=function(){e.action()}:"string"==typeof e.action&&t.setAttribute("onclick",e.action),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(c),t}function g(){return y.apply(this,arguments)}function y(){return(y=(0,a.a)(function*(){var e=yield(0,c.f)();b.innerHTML="";var t=new DocumentFragment;for(var n of e){var a=L(n);t.appendChild(a)}b.append(t)})).apply(this,arguments)}function k(e){var t="ltr"===e?"mc":"nc";h.addEventListener("animationend",function(){h.classList.remove(t)},{once:!0}),h.classList.add(t),h.setAttribute("displayed","true")}function w(e){var t="ltr"===e?"oc":"pc";h.addEventListener("animationend",function(){h.setAttribute("displayed","false"),h.classList.remove(t)},{once:!0}),h.classList.add(t)}function C(){(0,p.c)("Settings"),k("rtl"),g(),(0,p.b)()}function E(){w("ltr"),(0,p.i)(),(0,p.e)("Settings")}function A(){return x.apply(this,arguments)}function x(){return(x=(0,a.a)(function*(){(0,v.a)("manufacturing","資料匯出中");var e=yield(0,i.a)();(0,l.a)(e,"application/json","bus-export.json")})).apply(this,arguments)}function S(){var e=(0,u.c)(),t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.setAttribute("name",e),t.id=e,t.classList.add("wo"),t.addEventListener("change",function(t){if(0===t.target.files.length)(0,d.c)(`body #${e}`).remove();else{var n=t.target.files[0],a=new FileReader;a.onload=function(t){var n=t.target.result;(0,r.a)(n).then(function(t){t?(0,v.a)("check_circle","已匯入資料"):(0,v.a)("error","無法匯入資料"),(0,d.c)(`body #${e}`).remove()})},a.readAsText(n)}},{once:!0}),t.addEventListener("cancel",function(){(0,d.c)(`body #${e}`).remove()},{once:!0}),document.body.append(t),(0,d.c)(`body #${e}`).click()}function z(){var e=(0,o.e)();window.open(e)}function T(){window.open("https://github.com/EricHsia7/bus")}function _(){(0,s.a)().then(function(e){switch(e){case"granted":(0,v.a)("check_circle","已開啟永久儲存");break;case"denied":(0,v.a)("cancel","永久儲存權限已被拒絕");break;case"unsupported":(0,v.a)("warning","此瀏覽器不支援永久儲存");break;default:(0,v.a)("error","發生錯誤")}})}},6166(e,t,n){n.d(t,{a:()=>L,b:()=>m,c:()=>b,d:()=>h});var a=n(3459),i=n(8179),r=n(904),c=n(6104),o=(0,i.c)(".zn"),s=(0,i.e)(o,".io"),d=(0,i.e)(s,".ko"),u=(0,i.e)(s,".vo"),l=(0,i.e)(o,".ao"),f=(0,i.e)(l,".go"),p=(0,i.e)(l,".do");function v(e,t,n){var r=(0,i.a)();r.classList.add("mo");var c=(0,i.a)();c.classList.add("po"),c.innerText=t.name;var o=(0,i.a)();o.classList.add("so");var s=document.createElement("input");return s.type="checkbox",s.checked=e.option===n,s.onclick=function(t){!function(e,t,n){var r=(0,i.b)('.zn .io .ko .mo .so input[type="checkbox"]');for(var c of r)c.checked=!1;var o=e.target;o.checked=!0,(0,a.a)(t,n)}(t,e.key,n)},o.appendChild(s),r.appendChild(c),r.appendChild(o),r}function h(e){var t="ltr"===e?"mc":"nc";o.addEventListener("animationend",function(){o.classList.remove(t)},{once:!0}),o.classList.add(t),o.setAttribute("displayed","true")}function m(e){var t="ltr"===e?"oc":"pc";o.addEventListener("animationend",function(){o.setAttribute("displayed","false"),o.classList.remove(t)},{once:!0}),o.classList.add(t)}function b(e){(0,r.c)("SettingsOptions"),h("rtl"),function(e){var t=(0,a.c)(e);p.onclick=function(){L(),(0,c.d)()},f.innerText=t.name,u.innerText=t.description,d.innerHTML="";var n=new DocumentFragment,i=0;for(var r of t.options){var o=v(t,r,i);n.appendChild(o),i+=1}d.append(n)}(e),(0,r.b)()}function L(){m("ltr"),(0,r.i)(),(0,r.e)("SettingsOptions")}},6171(){},7037(){},7113(){},8073(){},9205(){},9351(){},9590(){}}]);
//# sourceMappingURL=7c5eb06ecd5b658c7205.js.map