"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[9566,9915],{9566(t,n,r){r.d(n,{DW:()=>I,Fq:()=>D,L2:()=>O,LH:()=>L,NC:()=>P,Xi:()=>_,aq:()=>z,bq:()=>q,eD:()=>$,g$:()=>h,vV:()=>m,z$:()=>C});var e=r(8024),i=(r(6483),r(5767),r(2063),r(8011)),a=r(9218),u=r(4293),o=r(424),f=r(6788),l=(r(3459),r(4311));function p(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return s(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw a}}}}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);r<n;r++)e[r]=t[r];return e}function y(t,n,r,e,i,a,u){try{var o=t[a](u),f=o.value}catch(t){return void r(t)}o.done?n(f):Promise.resolve(f).then(e,i)}function c(t){return function(){var n=this,r=arguments;return new Promise(function(e,i){var a=t.apply(n,r);function u(t){y(a,e,i,u,o,"next",t)}function o(t){y(a,e,i,u,o,"throw",t)}u(void 0)})}}var d={};function m(t,n){return v.apply(this,arguments)}function v(){return(v=c(function*(t,n){var r=(0,e.zx)(),i=yield(0,a.l)(r);if((0,f.LQ)(r),!i.symbols.hasOwnProperty(n))return!1;var u=(0,e.zx)(),o=`f_${u}`;if(d.hasOwnProperty(o))return!1;if(yield(0,l.Ct)(11,o))return!1;var p={name:t,icon:n,id:u,timestamp:(new Date).getTime()};return d[o]=p,yield(0,l.mL)(11,o,JSON.stringify(p)),yield(0,l.mL)(12,o,JSON.stringify([])),u})).apply(this,arguments)}function h(t,n,r){return g.apply(this,arguments)}function g(){return(g=c(function*(t,n,r){var i=`f_${t}`,u=yield(0,l.Ct)(11,i);if(!u)return!1;var o=JSON.parse(u),p=(0,e.zx)(),s=yield(0,a.l)(p);if((0,f.LQ)(p),!s.symbols.hasOwnProperty(r))return!1;var y={name:n,icon:r,id:t,timestamp:o.timestamp};return d[i]=y,yield(0,l.mL)(11,i,JSON.stringify(y)),!0})).apply(this,arguments)}function O(t){var n=`f_${t}`;return!!d.hasOwnProperty(n)&&{name:d[n].name,icon:d[n].icon,id:d[n].id,timestamp:d[n].timestamp}}function $(t){return b.apply(this,arguments)}function b(){return(b=c(function*(t){var n=[],r=`f_${t}`,e=O(t);if("boolean"==typeof e&&!1===e)return n;var i=yield(0,l.Ct)(12,r);if(!i)return n;var a=JSON.parse(i);if(0===a.length){return n.push({type:"empty",id:0,index:0}),n}var u,o=p(a);try{for(o.s();!(u=o.n()).done;){var f=u.value,s=yield(0,l.Ct)(13,f);if(s){var y=JSON.parse(s);n.push(y)}}}catch(t){o.e(t)}finally{o.f()}return n})).apply(this,arguments)}function S(t){return w.apply(this,arguments)}function w(){return(w=c(function*(t){var n=`f_${t}`,r=yield(0,l.Ct)(12,n);return r?JSON.parse(r).length:0})).apply(this,arguments)}function _(){return N.apply(this,arguments)}function N(){return(N=c(function*(){var t,n=yield function(){var t=[];for(var n in d){var r={name:d[n].name,icon:d[n].icon,id:d[n].id,timestamp:d[n].timestamp};t.push(r)}return t.sort(function(t,n){return t.timestamp-n.timestamp}),t}(),r=[],e=p(n);try{for(e.s();!(t=e.n()).done;){var i=t.value,a=yield $(i.id),u=yield S(i.id);r.push({name:i.name,icon:i.icon,id:i.id,timestamp:i.timestamp,content:a,contentLength:u})}}catch(t){e.e(t)}finally{e.f()}return r})).apply(this,arguments)}function C(t,n){return J.apply(this,arguments)}function J(){return(J=c(function*(t,n){var r=`f_${t}`,e=`${n.type}_${n.id}`,i=O(t);if("boolean"==typeof i&&!1===i)return!1;var a=yield(0,l.Ct)(12,r);if(!a)return!1;var u=JSON.parse(a);return(0===u.length||u.indexOf(e)<0)&&(yield(0,l.mL)(12,r,JSON.stringify(u.concat(e))),yield(0,l.mL)(13,e,JSON.stringify(n)),!0)})).apply(this,arguments)}function L(t,n){return x.apply(this,arguments)}function x(){return(x=c(function*(t,n){var r,e=`${t}_${n}`,i=p(yield(0,l.Su)(12));try{for(i.s();!(r=i.n()).done;){var a=r.value,u=yield(0,l.Ct)(12,a);if(u)if(JSON.parse(u).indexOf(e)>-1)return!0}}catch(t){i.e(t)}finally{i.f()}return!1})).apply(this,arguments)}function P(t,n,r){return k.apply(this,arguments)}function k(){return(k=c(function*(t,n,r){var e=`f_${t}`,i=`${n}_${r}`,a=O(t);if("boolean"==typeof a&&!1===a)return!1;var u=yield(0,l.Ct)(12,e);if(!u)return!1;var o=JSON.parse(u),f=o.indexOf(i);return f>-1&&o.length>0&&(o.splice(f,1),yield(0,l.mL)(12,e,JSON.stringify(o))),!1===(yield L(n,r))&&(yield(0,l.iQ)(13,i)),!0})).apply(this,arguments)}function z(t,n,r){return A.apply(this,arguments)}function A(){return(A=c(function*(t,n,r){var a=(0,e.zx)(),f=yield(0,o.T)(a),l=yield(0,i.g)(a,0),p=yield(0,u.a)(a,!0),s=f[`s_${n}`],y=parseInt(s.goBack),c=l[`l_${s.stopLocationId}`].n,d=p[`r_${r}`],m=d.n,v=d.dep,h=d.des,g={type:"stop",id:n,timestamp:(new Date).getTime(),name:c,direction:y,route:{name:m,endPoints:{departure:v,destination:h},id:r}};return yield C(t,g)})).apply(this,arguments)}function D(t,n){return T.apply(this,arguments)}function T(){return(T=c(function*(t,n){var r=(0,e.zx)(),i=yield(0,u.a)(r,!0);(0,f.LQ)(r),(0,f.gC)(r);var a=`r_${n}`,o={};if(!i.hasOwnProperty(a))return!1;o=i[a];var l={type:"route",id:n,timestamp:(new Date).getTime(),name:o.n,endPoints:{departure:o.dep,destination:o.des}};return yield C(t,l)})).apply(this,arguments)}function I(t,n){return Q.apply(this,arguments)}function Q(){return(Q=c(function*(t,n){var r=(0,e.zx)(),a=yield(0,i.g)(r,1);(0,f.LQ)(r),(0,f.gC)(r);var u=`ml_${n}`,o={};if(!a.hasOwnProperty(u))return!1;o=a[u];var l={type:"location",id:n,timestamp:(new Date).getTime(),name:o.n};return yield C(t,l)})).apply(this,arguments)}function q(t,n,r,e){return j.apply(this,arguments)}function j(){return(j=c(function*(t,n,r,e){var i=`f_${t}`,a=`${n}_${r}`,u=O(t);if("boolean"==typeof u&&!1===u)return!1;var o=yield(0,l.Ct)(12,i);if(!o)return!1;var f=JSON.parse(o),p=f.indexOf(a);if(p>-1&&f.length>1){var s=0;switch(e){case"up":s=-1;break;case"down":s=1;break;default:s=0}return f.splice(p,1),f.splice(p+s,0,a),yield(0,l.mL)(12,i,JSON.stringify(f)),!0}return!1})).apply(this,arguments)}}}]);
//# sourceMappingURL=85b6f1d08fef86ed281c.js.map