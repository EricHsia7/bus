"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[924],{112(){},124(){},245(){},321(){},626(){},904(e,t,a){a.d(t,{a:()=>k,b:()=>C,c:()=>A,d:()=>m,e:()=>S,f:()=>y,g:()=>_,h:()=>w,i:()=>L});var i=a(8179),n=a(8024),r=a(4884),s=a(6052),c=a(9333),o=a(8379),u=a(5693),d=a(7891),l=a(7908),f=a(5009),h=a(6104),p=(0,i.c)(".kf"),g=(0,i.c)(".lf"),v=(new Date).getTime(),b=["Home"];function m(e){var t=b.length;b[t-1]!==e&&b.push(e)}function y(e){if(b.indexOf(e)>-1){var t=b.length;b[t-1]===e&&b.pop()}}function k(){var e=b.length;if(e>1)switch(b[e-2]){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.a)();break;case"FolderEditor":(0,c.a)();break;case"FolderManager":(0,o.a)();break;case"Search":(0,f.a)();break;case"Settings":(0,h.a)();break;case"PersonalScheduleManager":(0,d.a)();break;case"PersonalScheduleEditor":(0,u.a)();break;case"Bus":(0,r.b)();break;case"RegisterNotification":(0,l.a)()}}function A(){var e=b.length;if(e>1){var t=b[e-2];switch(b.pop(),t){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.c)();break;case"FolderEditor":(0,c.b)();break;case"FolderManager":(0,o.b)();break;case"Search":(0,f.c)();break;case"Settings":(0,h.d)();break;case"PersonalScheduleManager":(0,d.b)();break;case"PersonalScheduleEditor":(0,u.b)();break;case"Bus":(0,r.c)();break;case"RegisterNotification":(0,l.b)()}}}function w(){var e=0;(0,n.f)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,i.c)(".kf svg.mf").style.setProperty("--nf",`${e}px`)}function C(e){function t(){p.classList.add("of"),p.addEventListener("animationend",function(){p.setAttribute("displayed","false"),p.classList.remove("of"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-v<100?setTimeout(t,Math.max(1,a-v)):t()}function L(){g.setAttribute("displayed","true")}function S(e){var t=0,a=0,i=window.innerWidth,n=window.innerHeight;switch(e){case"window":t=i,a=n;break;case"head":t=i,a=55;break;case"head-one-button":t=i-55,a=55;break;case"head-two-button":t=i-110,a=55;break;case"route-details-canvas":t=i-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=i-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=i-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function _(){window.scrollTo({top:0,behavior:"instant"})}},969(){},1003(){},1195(){},1351(e,t,a){a.d(t,{a:()=>S,b:()=>L,c:()=>_,d:()=>x});var i=a(467),n=a(8011),r=a(6788),s=a(6983),c=a(3459),o=a(8179),u=a(8024),d=a(9469),l=a(251),f=a(4537),h=a(904),p=a(8279),g={},v=!1,b=!1,m=(0,o.c)(".pf"),y=(0,o.e)(m,".qf"),k=(0,o.e)(y,".rf");function A(){var e=(0,o.a)();e.classList.add("sf");var t=(0,o.a)();t.classList.add("tf"),t.appendChild((0,f.a)()),e.appendChild(t);var a=(0,o.a)();return a.classList.add("uf"),e.appendChild(a),e}function w(e,t,a){function i(e,i,n){function r(e,t){var a=(0,o.e)(e,".tf");(0,f.c)(a,t.icon)}function s(e,t){(0,o.e)(e,".uf").innerText=t.name}function c(e,t){e.onclick=t.action}function d(e,t){e.setAttribute("animation",(0,u.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,u.a)(t))}null==n?(r(e,i),s(e,i),c(e,i),d(e,a),l(e,t)):(n.key!==i.key&&(r(e,i),s(e,i),c(e,i)),a!==v&&d(e,a),t!==b&&l(e,t))}var n=e.actions,r=e.actionsQuantity,s=Array.from((0,o.d)(k,".sf")),c=s.length;if(r!==c){var d=c-r;if(d<0){for(var l=new DocumentFragment,h=0;h>d;h--){var p=A();l.appendChild(p),s.push(p)}k.append(l)}else if(d>0)for(var m=c-1,y=c-d-1;m>y;m--)s[m].remove(),s.splice(m,1)}for(var w=0;w<r;w++){var C=s[w],L=n[w];if((0,u.e)(g,"actions"))if(g.actions[w])i(C,L,g.actions[w]);else i(C,L,null);else i(C,L,null)}g=e,v=a,b=t}function C(){return(C=(0,i.a)(function*(e){var t=(0,c.b)("playing_animation"),a=(0,u.c)();w(yield(0,s.a)(e,a),!1,t)})).apply(this,arguments)}function L(e){(0,h.d)("LocationDetails"),m.setAttribute("displayed","true"),function(){for(var e=(0,c.b)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});w({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){C.apply(this,arguments)}(e)}function S(){(0,h.f)("LocationDetails"),m.setAttribute("displayed","false")}function _(e){return T.apply(this,arguments)}function T(){return(T=(0,i.a)(function*(e){var t=(0,u.c)(),a=yield(0,n.a)(t,1);(0,r.a)(t),(0,r.b)(t);var i=`ml_${e}`;if((0,u.e)(a,i)){var s=a[i],c=(0,d.a)(1,{hash:e});(0,l.b)(s.n,c)}})).apply(this,arguments)}function x(e){return M.apply(this,arguments)}function M(){return(M=(0,i.a)(function*(e){var t=(0,u.c)(),a=yield(0,n.a)(t,1);(0,r.a)(t),(0,r.b)(t);var i=`ml_${e}`;if((0,u.e)(a,i)){var s=(0,d.a)(1,{hash:e});(0,p.b)(s)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(e,t,a){a.d(t,{a:()=>N,b:()=>Q});var i=a(467),n=a(5767),r=a(365),s=a(3422),c=a(3459),o=a(8179),u=a(8024),d=a(4537),l=a(904),f=a(9119),h=(0,o.c)(".vf"),p=(0,o.e)(h,".wf"),g=(0,o.e)(p,".xf"),v=(0,o.e)(g,".yf"),b=(0,o.e)(h,".zf"),m=(0,o.e)(b,"._f"),y={},k=!1,A=15e3,w=5e3,C=15e3,L=!0,S=0,_=0,T="",x=!1,M=!1,D=!1;function P(e){var t=e;if(x){var a=t.detail.progress-1;v.style.setProperty("--cg",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,P)}function E(){var e=(0,o.a)();e.classList.add("dg");var t=(0,o.a)();t.classList.add("eg"),e.appendChild(t);var a=(0,o.a)();a.classList.add("fg");var i=(0,o.a)();i.classList.add("gg"),a.appendChild(i);var n=(0,o.a)();n.classList.add("hg"),a.appendChild(n);var r=(0,o.a)();r.classList.add("ig"),a.appendChild(r);var s=(0,o.a)();s.classList.add("jg");var c=document.createElement("span");return c.appendChild((0,d.b)("close")),s.appendChild(c),a.appendChild(s),e.appendChild(a),e}function F(e,t,a){function i(e,i,n){function r(e,t){(0,o.e)(e,".eg").innerText=t.hours}function s(e,t){var a=(0,o.e)(e,".fg");(0,o.e)(a,".gg").innerText=t.minutes}function c(e,t){var a=(0,o.e)(e,".fg");(0,o.e)(a,".ig").innerText=t.name}function d(e,t){var a=(0,o.e)(e,".fg");(0,o.e)(a,".hg").innerText=`${t.route.name} - 往${t.route.direction}`}function l(e,t){var a=(0,o.e)(e,".fg");(0,o.e)(a,".jg").onclick=function(){!function(e,t){q.apply(this,arguments)}(e,t.schedule_id)}}function f(e,t){e.setAttribute("first",(0,u.a)(t.is_first))}function h(e,t){e.setAttribute("animation",(0,u.a)(t))}function p(e,t){e.setAttribute("skeleton-screen",(0,u.a)(t))}null==n?(r(e,i),s(e,i),c(e,i),d(e,i),l(e,i),f(e,i),h(e,a),p(e,t)):(i.hours!==n.hours&&r(e,i),i.minutes!==n.minutes&&s(e,i),(0,u.b)(n.schedule_id,i.schedule_id)||(c(e,i),d(e,i),l(e,i)),n.is_first!==i.is_first&&f(e,i),false!==a&&h(e,a),k!==t&&p(e,t))}var n=e.itemQuantity,r=e.items,s=Array.from((0,o.d)(m,".dg")),c=s.length;if(n!==c){var d=c-n;if(d<0){for(var l=new DocumentFragment,f=0;f>d;f--){var h=E();l.appendChild(h),s.push(h)}m.append(l)}else if(d>0)for(var p=c-1,g=c-d-1;p>g;p--)s[p].remove(),s.splice(p,1)}for(var v=0;v<n;v++){var b=s[v],A=r[v];if((0,u.e)(y,"items"))if(y.items[v])i(b,A,y.items[v]);else i(b,A,null);else i(b,A,null)}y=e,k=t}function I(){return R.apply(this,arguments)}function R(){return(R=(0,i.a)(function*(){var e=(0,c.b)("playing_animation"),t=(0,c.b)("refresh_interval");L=t.dynamic,A=t.baseInterval,x=!0,T=(0,u.c)(),v.setAttribute("refreshing","true"),v.classList.remove("bg"),document.addEventListener(T,P);var a=yield(0,s.h)(T);F(a,!1,e);var i=0;L&&(i=yield(0,n.c)()),S=(new Date).getTime(),_=L?Math.max(S+w,a.dataUpdateTime+A/i):S+A,C=Math.max(w,_-S),x=!1,v.setAttribute("refreshing","false"),v.style.setProperty("--ag",`${C}ms`),v.classList.add("bg")})).apply(this,arguments)}function $(){return H.apply(this,arguments)}function H(){return(H=(0,i.a)(function*(){I().then(function(){M?setTimeout(function(){$()},Math.max(w,_-(new Date).getTime())):D=!1}).catch(function(e){M?setTimeout(function(){$()},1e4):D=!1})})).apply(this,arguments)}function Q(){(0,l.d)("NotificationScheduleManager"),h.setAttribute("displayed","true"),function(){for(var e=(0,c.b)("playing_animation"),t=(0,l.e)("window"),a=(t.width,t.height),i=Math.floor(a/50)+5,n=[],r=0;r<i;r++)n.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});F({items:n,itemQuantity:i,dataUpdateTime:0},!0,e)}(),M||(M=!0,D?I():(D=!0,$())),(0,l.a)()}function N(){h.setAttribute("displayed","false"),M=!1,(0,l.c)()}function q(){return(q=(0,i.a)(function*(e,t){if((0,f.a)("manufacturing","處理中"),yield(0,r.a)(t)){if(e.remove(),(0,f.a)("check_circle","已取消通知"),!x){var a=(0,c.b)("playing_animation");F(yield(0,s.h)(T),!1,a)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(e,t,a){a.d(t,{a:()=>L,b:()=>C,c:()=>k,d:()=>S});var i=a(3453),n=a(467),r=a(5352),s=a(8179),c=a(5579),o=a(904),u=a(9119),d=(0,s.c)(".kg"),l=(0,s.e)(d,".lg"),f=(0,s.e)(d,".mg"),h=(0,s.e)(f,".ng"),p=(0,s.e)(l,".og"),g=(0,s.e)(p,'.pg[group="schedule-name"] .qg input'),v=(0,s.e)(p,'.pg[group="schedule-start-time"] .qg input'),b=(0,s.e)(p,'.pg[group="schedule-end-time"] .qg input'),m=(0,s.e)(p,'.pg[group="schedule-days"] .qg'),y=(0,s.d)(m,".rg");function k(e){return A.apply(this,arguments)}function A(){return(A=(0,n.a)(function*(e){for(var t=g.value,a=v.value,n=b.value,s=String(a).split(":").map(function(e){return parseInt(e)}),c=(0,i.a)(s,2),o=c[0],d=c[1],l=String(n).split(":").map(function(e){return parseInt(e)}),f=(0,i.a)(l,2),h=f[0],p=f[1],m=[],k=0;k<7;k++){var A=y[k],w=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===w&&m.push(C)}var S=yield(0,r.b)(e);S.name=t,S.days=m,S.period.start.hours=o,S.period.start.minutes=d,S.period.end.hours=h,S.period.end.minutes=p,yield(0,r.e)(S),(0,u.a)("check_circle","已儲存變更"),L()})).apply(this,arguments)}function w(){return(w=(0,n.a)(function*(e){var t=yield(0,r.b)(e);g.value=t.name,v.value=(0,c.i)(t.period.start),b.value=(0,c.i)(t.period.end);for(var a=0;a<7;a++){var i=y[a];t.days.indexOf(a)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}h.onclick=function(){k(e)}})).apply(this,arguments)}function C(e){(0,o.d)("PersonalScheduleEditor"),d.setAttribute("displayed","true"),function(e){w.apply(this,arguments)}(e),(0,o.a)()}function L(){d.setAttribute("displayed","false"),(0,o.c)()}function S(e){var t=(0,s.e)(m,`.rg[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(e,t,a){a.d(t,{a:()=>g,b:()=>p});var i=a(467),n=a(5352),r=a(8179),s=a(4537),c=a(904),o=a(5693),u=(0,r.c)(".sg"),d=(0,r.e)(u,".tg"),l=(0,r.e)(d,".ug");function f(e){var t=(0,r.a)();t.classList.add("vg"),t.onclick=function(){(0,o.b)(e.id)};var a=(0,r.a)();a.classList.add("wg"),a.innerText=e.name,t.appendChild(a);var i=(0,r.a)();i.classList.add("xg");var n=document.createElement("span");return n.appendChild((0,s.b)("arrow_forward_ios")),i.appendChild(n),t.appendChild(i),t}function h(){return(h=(0,i.a)(function*(){l.innerHTML="";var e=yield(0,n.d)(),t=new DocumentFragment;for(var a of e){var i=f(a);t.appendChild(i)}l.append(t)})).apply(this,arguments)}function p(){(0,c.d)("PersonalScheduleManager"),u.setAttribute("displayed","true"),function(){h.apply(this,arguments)}()}function g(){(0,c.f)("PersonalScheduleManager"),u.setAttribute("displayed","false")}},7943(){},8279(e,t,a){a.d(t,{a:()=>u,b:()=>o});var i=a(8179),n=a(2648),r=a(904),s=(0,i.c)(".yg"),c=(0,i.e)(s,".zg");function o(e){(0,r.d)("QRCode"),s.setAttribute("displayed","true"),function(e){var t=(0,n.a)(e,"M",.5,.3,1,"var(--a)",4);c.innerHTML=t}(e)}function u(){(0,r.f)("QRCode"),s.setAttribute("displayed","false")}},8380(e,t,a){a.d(t,{a:()=>m,b:()=>v,c:()=>b,d:()=>y});var i=a(3453),n=a(5352),r=a(8179),s=a(904),c=a(9119),o=(0,r.c)("._g"),u=(0,r.e)(o,".ah"),d=(0,r.e)(u,".bh"),l=(0,r.e)(d,'.ch[group="schedule-name"] .dh input'),f=(0,r.e)(d,'.ch[group="schedule-start-time"] .dh input'),h=(0,r.e)(d,'.ch[group="schedule-end-time"] .dh input'),p=(0,r.e)(d,'.ch[group="schedule-days"] .dh'),g=(0,r.d)(p,".eh");function v(){for(var e=l.value,t=f.value,a=h.value,r=String(t).split(":").map(function(e){return parseInt(e)}),s=(0,i.a)(r,2),o=s[0],u=s[1],d=String(a).split(":").map(function(e){return parseInt(e)}),p=(0,i.a)(d,2),v=p[0],b=p[1],y=[],k=0;k<7;k++){var A=g[k],w=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===w&&y.push(C)}(0,n.a)(e,o,u,v,b,y).then(function(e){e?(m(),(0,c.a)("calendar_view_day","已建立個人化行程")):(0,c.a)("error","無法建立個人化行程")})}function b(){(0,s.d)("PersonalScheduleCreator"),o.setAttribute("displayed","true"),(0,s.a)()}function m(){o.setAttribute("displayed","false"),(0,s.c)()}function y(e){var t=(0,r.e)(p,`.eh[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8969(){},9119(e,t,a){a.d(t,{a:()=>o});var i=a(2284),n=a(3459),r=a(8179),s=a(8024),c=a(4537);function o(e,t,a){var o=(0,r.b)(".fh");if(null!==o)for(var u of o)u.remove();var d=(0,n.b)("playing_animation"),l=(0,r.a)();l.classList.add("fh"),l.setAttribute("animation",(0,s.a)(d));var f=(0,r.a)();f.classList.add("gh"),f.appendChild((0,c.b)(e)),l.appendChild(f);var h=(0,r.a)();if(h.classList.add("hh"),h.innerText=t,l.appendChild(h),"object"===(0,i.a)(a)&&null!=a&&"function"==typeof(null==a?void 0:a.action)){var p=(0,r.a)();p.classList.add("ih"),p.innerText=a.text,p.addEventListener("click",function(){a.action()},{once:!0}),l.appendChild(p),l.setAttribute("button","true")}l.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(l)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=1f94d8b17853135136f5.js.map