"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[270],{112(){},124(){},245(){},321(){},626(){},969(){},1003(){},1195(){},1351(t,e,n){n.d(e,{ID:()=>x,co:()=>_,k9:()=>w,qp:()=>E});var i=n(467),a=n(8011),r=n(6788),u=n(6983),l=n(3459),o=n(8179),s=n(8024),d=n(9469),c=n(4537),f=n(904),p=n(9119),h=n(8279),v={},m=!1,y=!1,g=(0,o.bv)(".qj"),b=(0,o.aI)(g,".vj"),A=(0,o.aI)(b,".wj");function I(){var t=document.createElement("div");t.classList.add("xj");var e=document.createElement("div");e.classList.add("yj"),e.appendChild((0,c.oC)()),t.appendChild(e);var n=document.createElement("div");return n.classList.add("zj"),t.appendChild(n),{element:t,id:""}}function k(t,e,n){function i(t,i,a){function r(t,e){var n=(0,o.aI)(t,".yj");(0,c.yD)(n,e.icon)}function u(t,e){(0,o.aI)(t,".zj").innerText=e.name}function l(t,e){t.onclick=e.action}function d(t,e){t.setAttribute("animation",(0,s.xZ)(e))}function f(t,e){t.setAttribute("skeleton-screen",(0,s.xZ)(e))}null==a?(r(t,i),u(t,i),l(t,i),d(t,n),f(t,e)):(a.key!==i.key&&(r(t,i),u(t,i),l(t,i)),n!==m&&d(t,n),e!==y&&f(t,e))}var a=t.actions,r=t.actionsQuantity,u=(0,o.jg)(A,".xj").length;if(r!==u){var l=u-r;if(l<0){for(var d=new DocumentFragment,f=0,p=Math.abs(l);f<p;f++){var h=I();d.appendChild(h.element)}A.append(d)}else for(var g=(0,o.jg)(A,".xj"),b=0,k=Math.abs(l);b<k;b++){g[u-1-b].remove()}}for(var C=(0,o.jg)(A,".xj"),x=0;x<r;x++){var _=C[x],w=a[x];if((0,s.mQ)(v,"actions"))if(v.actions[x])i(_,w,v.actions[x]);else i(_,w,null);else i(_,w,null)}v=t,m=n,y=e}function C(){return(C=(0,i.A)(function*(t){var e=(0,l.Js)("playing_animation"),n=(0,s.zx)();k(yield(0,u.v)(t,n),!1,e)})).apply(this,arguments)}function x(t){(0,f.WR)("LocationDetails"),g.setAttribute("displayed","true"),function(){for(var t=(0,l.Js)("playing_animation"),e=[],n=0;n<3;n++)e.push({name:"",icon:"",key:`action-${n}`,action:function(){}});k({actions:e,actionsQuantity:3,hash:""},!0,t)}(),function(t){C.apply(this,arguments)}(t)}function _(){(0,f.kr)("LocationDetails"),g.setAttribute("displayed","false")}function w(t){return L.apply(this,arguments)}function L(){return(L=(0,i.A)(function*(t){var e=(0,s.zx)(),n=yield(0,a.g)(e,1);(0,r.LQ)(e),(0,r.gC)(e);var i=`ml_${t}`;if((0,s.mQ)(n,i)){var u=n[i],l=(0,d.i)(1,{hash:t});navigator.share&&navigator.share({title:u.n,url:l}).then(function(){(0,p.a)("check_circle","已分享地點")}).catch(function(t){(0,p.a)("cancel","已取消分享")})}})).apply(this,arguments)}function E(t){return j.apply(this,arguments)}function j(){return(j=(0,i.A)(function*(t){var e=(0,s.zx)(),n=yield(0,a.g)(e,1);(0,r.LQ)(e),(0,r.gC)(e);var i=`ml_${t}`;if((0,s.mQ)(n,i)){var u=(0,d.i)(1,{hash:t});(0,h.X8)(u)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(t,e,n){n.d(e,{Sv:()=>D,m_:()=>J});var i=n(467),a=n(5767),r=n(365),u=n(3422),l=n(3459),o=n(8179),s=n(8024),d=n(4537),c=n(904),f=n(9119),p=(0,o.bv)(".il"),h=(0,o.aI)(p,".ll"),v=(0,o.aI)(h,".pl"),m=(0,o.aI)(v,".ql"),y=(0,o.aI)(p,".sl"),g=(0,o.aI)(y,".tl"),b={},A=!1,I=15e3,k=5e3,C=15e3,x=!0,_=0,w=0,L="",E=!1,j=!1,S=!1;function T(t){var e=t;if(E){var n=e.detail.progress-1;m.style.setProperty("--jl",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,T)}function M(){var t=(0,s.zx)(),e=document.createElement("div");e.classList.add("ul"),e.id=t;var n=document.createElement("div");n.classList.add("vl"),e.appendChild(n);var i=document.createElement("div");i.classList.add("wl");var a=document.createElement("div");a.classList.add("xl"),i.appendChild(a);var r=document.createElement("div");r.classList.add("yl"),i.appendChild(r);var u=document.createElement("div");u.classList.add("zl"),i.appendChild(u);var l=document.createElement("div");l.classList.add("_l");var o=document.createElement("span");return o.appendChild((0,d.YC)("close")),l.appendChild(o),i.appendChild(l),e.appendChild(i),{element:e,id:t}}function $(t,e,n){function i(t,i,a){function r(t,e){(0,o.aI)(t,".vl").innerText=e.hours}function u(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,".xl").innerText=e.minutes}function l(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,".zl").innerText=e.name}function d(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,".yl").innerText=`${e.route.name} - 往${e.route.direction}`}function c(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,"._l").onclick=function(){!function(t,e){R.apply(this,arguments)}(t,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,s.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,s.xZ)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,s.xZ)(e))}null==a?(r(t,i),u(t,i),l(t,i),d(t,i),c(t,i),f(t,i),p(t,n),h(t,e)):(i.hours!==a.hours&&r(t,i),i.minutes!==a.minutes&&u(t,i),(0,s.hw)(a.schedule_id,i.schedule_id)||(l(t,i),d(t,i),c(t,i)),a.is_first!==i.is_first&&f(t,i),false!==n&&p(t,n),A!==e&&h(t,e))}var a=t.itemQuantity,r=t.items,u=(0,o.jg)(g,".ul").length;if(a!==u){var l=u-a;if(l<0){for(var d=new DocumentFragment,c=0,f=Math.abs(l);c<f;c++){var p=M();d.appendChild(p.element)}g.append(d)}else for(var h=(0,o.jg)(g,".ul"),v=0,m=Math.abs(l);v<m;v++){h[u-1-v].remove()}}for(var y=(0,o.jg)(g,".ul"),I=0;I<a;I++){var k=y[I],C=r[I];if((0,s.mQ)(b,"items"))if(b.items[I])i(k,C,b.items[I]);else i(k,C,null);else i(k,C,null)}b=t,A=e}function Q(){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.A)(function*(){var t=(0,l.Js)("playing_animation"),e=(0,l.Js)("refresh_interval");x=e.dynamic,I=e.baseInterval,E=!0,L=(0,s.zx)(),m.setAttribute("refreshing","true"),m.classList.remove("rl"),document.addEventListener(L,T);var n=yield(0,u.e3)(L);$(n,!1,t);var i=0;x&&(i=yield(0,a.wz)()),_=(new Date).getTime(),w=x?Math.max(_+k,n.dataUpdateTime+I/i):_+I,C=Math.max(k,w-_),E=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--kl",`${C}ms`),m.classList.add("rl")})).apply(this,arguments)}function z(){return q.apply(this,arguments)}function q(){return(q=(0,i.A)(function*(){Q().then(function(){j?setTimeout(function(){z()},Math.max(k,w-(new Date).getTime())):S=!1}).catch(function(t){j?setTimeout(function(){z()},1e4):S=!1})})).apply(this,arguments)}function D(){(0,c.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var t=(0,l.Js)("playing_animation"),e=(0,c.gO)("window"),n=(e.width,e.height),i=Math.floor(n/50)+5,a=[],r=0;r<i;r++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});$({items:a,itemQuantity:i,dataUpdateTime:0},!0,t)}(),j||(j=!0,S?Q():(S=!0,z())),(0,c.Z_)()}function J(){p.setAttribute("displayed","false"),j=!1,(0,c.l$)()}function R(){return(R=(0,i.A)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,r.G)(e)){if(t.remove(),(0,f.a)("check_circle","已取消通知"),!E){var n=(0,l.Js)("playing_animation");$(yield(0,u.e3)(L),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(t,e,n){n.d(e,{Dn:()=>x,Xy:()=>C,bF:()=>k,gv:()=>b});var i=n(3453),a=n(467),r=n(5352),u=n(8179),l=n(5579),o=n(904),s=(0,u.bv)(".wk"),d=(0,u.aI)(s,".al"),c=(0,u.aI)(s,".xk"),f=(0,u.aI)(c,".yk"),p=(0,u.aI)(d,".bl"),h=(0,u.aI)(p,'.cl[group="schedule-name"] .gl input'),v=(0,u.aI)(p,'.cl[group="schedule-start-time"] .gl input'),m=(0,u.aI)(p,'.cl[group="schedule-end-time"] .gl input'),y=(0,u.aI)(p,'.cl[group="schedule-days"] .gl'),g=(0,u.jg)(y,".hl");function b(t){return A.apply(this,arguments)}function A(){return(A=(0,a.A)(function*(t){for(var e=h.value,n=v.value,a=m.value,u=String(n).split(":").map(function(t){return parseInt(t)}),l=(0,i.A)(u,2),o=l[0],s=l[1],d=String(a).split(":").map(function(t){return parseInt(t)}),c=(0,i.A)(d,2),f=c[0],p=c[1],y=[],b=0;b<7;b++){var A=g[b],I=A.getAttribute("highlighted"),k=parseInt(A.getAttribute("day"));"true"===I&&y.push(k)}var x=yield(0,r.qZ)(t);x.name=e,x.days=y,x.period.start.hours=o,x.period.start.minutes=s,x.period.end.hours=f,x.period.end.minutes=p,yield(0,r.nL)(x),C()})).apply(this,arguments)}function I(){return(I=(0,a.A)(function*(t){var e=yield(0,r.qZ)(t);h.value=e.name,v.value=(0,l.pn)(e.period.start),m.value=(0,l.pn)(e.period.end);for(var n=0;n<7;n++){var i=g[n];e.days.indexOf(n)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}f.onclick=function(){b(t)}})).apply(this,arguments)}function k(t){(0,o.WR)("PersonalScheduleEditor"),s.setAttribute("displayed","true"),function(t){I.apply(this,arguments)}(t),(0,o.Z_)()}function C(){s.setAttribute("displayed","false"),(0,o.l$)()}function x(t){var e=(0,u.aI)(y,`.hl[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(t,e,n){n.d(e,{Z:()=>y,z:()=>m});var i=n(467),a=n(5352),r=n(8179),u=n(4537),l=n(904),o=n(5693);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var r,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,r=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw r}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var c=(0,r.bv)("._j"),f=(0,r.aI)(c,".ek"),p=(0,r.aI)(f,".fk");function h(t){var e=document.createElement("div");e.classList.add("gk"),e.onclick=function(){(0,o.bF)(t.id)};var n=document.createElement("div");n.classList.add("hk"),n.appendChild(document.createTextNode(t.name)),e.appendChild(n);var i=document.createElement("div");i.classList.add("ik");var a=document.createElement("span");return a.appendChild((0,u.YC)("arrow_forward_ios")),i.appendChild(a),e.appendChild(i),{element:e,id:""}}function v(){return(v=(0,i.A)(function*(){p.innerHTML="";var t,e=yield(0,a.ty)(),n=new DocumentFragment,i=s(e);try{for(i.s();!(t=i.n()).done;){var r=h(t.value);n.appendChild(r.element)}}catch(t){i.e(t)}finally{i.f()}p.append(n)})).apply(this,arguments)}function m(){(0,l.WR)("PersonalScheduleManager"),c.setAttribute("displayed","true"),function(){v.apply(this,arguments)}()}function y(){(0,l.kr)("PersonalScheduleManager"),c.setAttribute("displayed","false")}},7943(){},8279(t,e,n){n.d(e,{Vc:()=>s,X8:()=>o});var i=n(8179),a=n(2648),r=n(904),u=(0,i.bv)(".hm"),l=(0,i.aI)(u,".mm");function o(t){(0,r.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,a.$)(t,"M",.5,.3,1,"var(--a)",4);l.innerHTML=e}(t)}function s(){(0,r.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>g,I1:()=>y,Ps:()=>m,om:()=>b});var i=n(3453),a=n(5352),r=n(8179),u=n(904),l=n(9119),o=(0,r.bv)(".jk"),s=(0,r.aI)(o,".ok"),d=(0,r.aI)(s,".pk"),c=(0,r.aI)(d,'.qk[group="schedule-name"] .uk input'),f=(0,r.aI)(d,'.qk[group="schedule-start-time"] .uk input'),p=(0,r.aI)(d,'.qk[group="schedule-end-time"] .uk input'),h=(0,r.aI)(d,'.qk[group="schedule-days"] .uk'),v=(0,r.jg)(h,".vk");function m(){for(var t=c.value,e=f.value,n=p.value,r=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,i.A)(r,2),o=u[0],s=u[1],d=String(n).split(":").map(function(t){return parseInt(t)}),h=(0,i.A)(d,2),m=h[0],y=h[1],b=[],A=0;A<7;A++){var I=v[A],k=I.getAttribute("highlighted"),C=parseInt(I.getAttribute("day"));"true"===k&&b.push(C)}(0,a.Qh)(t,o,s,m,y,b).then(function(t){t?(g(),(0,l.a)("calendar_view_day","已建立個人化行程")):(0,l.a)("error","無法建立個人化行程")})}function y(){(0,u.WR)("PersonalScheduleCreator"),o.setAttribute("displayed","true"),(0,u.Z_)()}function g(){o.setAttribute("displayed","false"),(0,u.l$)()}function b(t){var e=(0,r.aI)(h,`.vk[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},8558(){},8969(){},9119(t,e,n){n.d(e,{a:()=>d});var i=n(2284),a=n(3459),r=n(8179),u=n(8024),l=n(4537);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var r,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,r=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw r}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function d(t,e,n){var s=(0,r.e0)(".nm");if(null!==s){var d,c=o(s);try{for(c.s();!(d=c.n()).done;){d.value.remove()}}catch(t){c.e(t)}finally{c.f()}}var f=(0,a.Js)("playing_animation"),p=document.createElement("div");p.classList.add("nm"),p.setAttribute("animation",(0,u.xZ)(f));var h=document.createElement("div");h.classList.add("om"),h.appendChild((0,l.YC)(t)),p.appendChild(h);var v=document.createElement("div");if(v.classList.add("pm"),v.innerText=e,p.appendChild(v),"object"===(0,i.A)(n)&&null!=n&&"function"==typeof(null==n?void 0:n.action)){var m=document.createElement("div");m.classList.add("qm"),m.innerText=n.text,m.addEventListener("click",function(){n.action()},{once:!0}),p.appendChild(m)}p.addEventListener("animationend",function(t){null!=t&&t.target&&t.target.remove()},{once:!0}),document.body.appendChild(p)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=7c191071ac5cc07f6bae.js.map