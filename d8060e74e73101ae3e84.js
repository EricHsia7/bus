"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[155],{928(){},1077(){},1818(){},1844(){},2239(){},2994(e,t,n){n.d(t,{G:()=>y,Q:()=>g});var a=n(467),i=n(4225),r=n(3459),s=n(8179),c=n(8024),o=n(904),d=[],u=!1,l=!1,p=(0,s.bv)(".et"),f=(0,s.aI)(p,".it"),v=(0,s.aI)(f,".jt");function m(){var e=document.createElement("div");e.classList.add("kt");var t=document.createElement("div");t.classList.add("lt");var n=document.createElement("div");return n.classList.add("mt"),e.appendChild(t),e.appendChild(n),e}function h(e,t,n){function a(e,a,i){function r(e,t){(0,s.aI)(e,".mt").innerText=t.size}function o(e,t){(0,s.aI)(e,".lt").innerText=t.category.name}function d(e,t){e.setAttribute("animation",(0,c.xZ)(t))}function p(e,t){e.setAttribute("skeleton-screen",(0,c.xZ)(t))}i?(a.category.key!==i.category.key&&(o(e,a),r(e,a)),a.size!==i.size&&r(e,a),u!==n&&d(e,n),l!==t&&p(e,t)):(r(e,a),o(e,a),d(e,n),p(e,t))}var i=[];for(var r in e.categorizedSizes){var o=e.categorizedSizes[r];i.push(o)}var p=i.length,f=Array.from((0,s.jg)(v,".kt")),h=f.length;if(p!==h){var b=h-p;if(b<0){for(var y=new DocumentFragment,g=0;g>b;g--){var k=m();y.appendChild(k),f.push(k)}v.appendChild(y)}else if(b>0)for(var C=h-1,E=h-b-1;C>E;C--)f[C].remove(),f.splice(C,1)}for(var w=0;w<p;w++){var L=d[w],A=i[w],x=f[w];a(x,A,L||null)}d=i,l=t,u=n}function b(){return(b=(0,a.A)(function*(){var e=(0,r.Js)("playing_animation");!function(){for(var e=(0,r.Js)("playing_animation"),t=(0,o.gO)("window").height,n=Math.min(7,Math.floor(t/55)+2),a={categorizedSizes:{},totalSize:0},i=0;i<n;i++){var s=`store-${i}`;a.categorizedSizes[s]={category:{name:"",key:s},size:`size-${i}`}}h(a,!0,e)}(),h(yield(0,i.F)(),!1,e)})).apply(this,arguments)}function y(){p.setAttribute("displayed","true"),function(){b.apply(this,arguments)}()}function g(){p.setAttribute("displayed","false")}},3381(){},3425(){},4800(){},5009(e,t,n){n.d(t,{Bb:()=>Q,H2:()=>N,HI:()=>B,rf:()=>P,x6:()=>Z});var a=n(8134),i=n(8179),r=n(7968),s=n(8024),c=n(4781),o=n(4884),d=n(6082),u=n(4537),l=n(904),p=n(3030),f=n(9119),v=n(4690),m=[],h=(0,i.bv)(".ur"),b=(0,i.aI)(h,".vr"),y=(0,i.aI)(h,".zr"),g=(0,i.aI)(b,".wr #search_input"),k=(0,i.aI)(b,".wr svg"),C=(0,i.aI)(k,'text[component="text"]'),E=(0,i.aI)(k,'path[component="cursor"]'),w=(0,i.aI)(b,".yr"),L=(0,i.aI)(y,"._r"),A=(0,i.aI)(y,".ds"),x="400",I="20px",z='"Noto Sans TC", sans-serif',_=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],S=(0,l.gO)("head-two-button"),T=S.width,$=S.height,D=!1,R="",j=0;function F(){var e=g.value,t=e.substring(0,e.length-1);g.value=t,J(),q(),W(),(0,l.p9)()}function M(){g.value="",J(),q(),W(),(0,l.p9)()}function H(e){e.preventDefault(),g.focus(),(0,l.p9)()}function O(){!function(){if(!D){D=!0;var e=new DocumentFragment;for(var t of _)for(var n of t){var a=document.createElement("button");a.classList.add("es");var i=(0,s.p1)()?"touchstart":"mousedown";switch(n){case"刪除":a.addEventListener(i,F),a.appendChild((0,u.YC)("backspace"));break;case"清空":a.addEventListener(i,M),a.innerText=n;break;case"鍵盤":a.addEventListener(i,H),a.appendChild((0,u.YC)("keyboard"));break;default:a.addEventListener(i,function(e){return function(){var t,n;t=e,n=`${g.value}${t}`,g.value=n,J(),q(),W(),(0,l.p9)()}}(n)),a.innerText=n}e.appendChild(a)}A.append(e)}}(),A.setAttribute("displayed","true"),q()}function Z(){g.addEventListener("paste",function(){W(),J()}),g.addEventListener("cut",function(){W(),J()}),g.addEventListener("selectionchange",function(){W(),J()}),document.addEventListener("selectionchange",function(){W(),J()}),g.addEventListener("keyup",function(){W(),J()}),g.addEventListener("scroll",function(){W()})}function Y(){return parseInt(w.getAttribute("type"))}function W(){var e=g.scrollLeft,t=g.value,n=g.selectionStart,a=g.selectionEnd,i=0===t.length,c=i?"搜尋路線、地點、公車":t,o=i?0:n,d=o!==(i?0:a),u=(0,r.z7)(c,x,I,z),l=(0,r.z7)(c.substring(0,o),x,I,z),p=-1*e,f=u[0]+($-u[2])/2;C.textContent=c,C.setAttribute("transform",`translate(${p} ${f})`),E.setAttribute("transform",`translate(${i?1:Math.max(Math.min(l[1]+p,T-1),1)} 0)`),C.setAttribute("empty",(0,s.xZ)(i)),E.setAttribute("selection",(0,s.xZ)(d)),g.setAttribute("selection",(0,s.xZ)(d))}function q(){var e=g.value,t=e.length,n=(0,r.z7)(e,x,I,z);g.setSelectionRange(t,t),g.scrollTo({left:n[1]-T})}function B(){S=(0,l.gO)("head-two-button"),T=S.width,$=S.height,k.setAttribute("viewBox",`0 0 ${T} ${$}`),q(),W()}function G(){var e=document.createElement("div");e.classList.add("as");var t=document.createElement("div");t.classList.add("cs");var n=document.createElement("div");return n.classList.add("bs"),n.appendChild((0,u.oC)()),e.appendChild(n),e.appendChild(t),e}function J(){var e=["route","location_on","directions_bus"];function t(t,n,a){function r(t,n){var a=(0,i.aI)(n,".bs");(0,u.yD)(a,e[t.item.type])}function s(e,t){(0,i.aI)(t,".cs").innerText=e.item.n}function c(e,t){switch(e.item.type){case 0:t.onclick=function(){(0,v.SR)(e.item.id,e.item.pid)};break;case 1:t.onclick=function(){(0,p.so)(e.item.hash)};break;case 2:t.onclick=function(){(0,o.$l)(e.item.id)}}}a?(n.item.type!==a.item.type&&r(n,t),n.item.id!==a.item.id&&(s(n,t),c(n,t))):(r(n,t),s(n,t),c(n,t))}var n=Y(),r=g.value;if(!(0,c.iO)(r)&&(r!==R||n!==j)){var s=(0,a.GU)(r,n,30),d=s.length,l=Array.from((0,i.jg)(L,".as")),f=l.length;if(d!==f){var h=f-d;if(h<0){for(var b=new DocumentFragment,y=0;y>h;y--){var k=G();b.appendChild(k),l.push(k)}L.appendChild(b)}else if(h>0)for(var C=f-1,E=f-h-1;C>E;C--)l[C].remove(),l.splice(C,1)}for(var w=0;w<d;w++){var A=m[w],x=s[w],I=l[w];t(I,x,A||null)}m=s}R=r,j=n}function N(){var e=Y(),t=-1;t=e>=-1&&e<2?e+1:-1;(0,u.yD)(w,["filter_list","route","location_on","directions_bus"][t+1]),w.setAttribute("type",t.toString()),J()}function P(){d.m?((0,l.WR)("Search"),h.setAttribute("displayed","true"),O(),(0,a.dD)()):(0,f.a)("download_for_offline","資料還在下載中")}function Q(){(0,l.kr)("Search"),A.setAttribute("displayed","false"),h.setAttribute("displayed","false")}},6104(e,t,n){n.d(t,{Ow:()=>g,gE:()=>L,jk:()=>x,os:()=>k,rY:()=>w,vv:()=>C,ze:()=>A});var a=n(467),i=n(5976),r=n(5427),s=n(3459),c=n(3251),o=n(4311),d=n(8179),u=n(8024),l=n(4537),p=n(904),f=n(9119),v=(0,d.bv)(".fs"),m=(0,d.aI)(v,".ps"),h=(0,d.aI)(m,".rs");function b(e){var t=document.createElement("div");t.classList.add("ts"),t.setAttribute("type",e.type);var n=document.createElement("div");n.classList.add("vs");var a=document.createElement("span");a.appendChild((0,l.YC)(e.icon)),n.appendChild(a);var i=document.createElement("div");i.classList.add("ws"),i.innerText=e.name;var r=document.createElement("div");r.classList.add("ys"),r.innerText=e.status;var s=document.createElement("div");s.classList.add("zs");var c=document.createElement("span");return c.appendChild((0,l.YC)("arrow_forward_ios")),s.appendChild(c),"function"==typeof e.action?t.onclick=function(){e.action()}:"string"==typeof e.action&&t.setAttribute("onclick",e.action),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(s),t}function y(){return(y=(0,a.A)(function*(){var e=yield(0,s.cl)();h.innerHTML="";var t=new DocumentFragment;for(var n of e){var a=b(n);t.appendChild(a)}h.append(t)})).apply(this,arguments)}function g(){(0,p.WR)("Settings"),v.setAttribute("displayed","true"),function(){y.apply(this,arguments)}()}function k(){(0,p.kr)("Settings"),v.setAttribute("displayed","false")}function C(){return E.apply(this,arguments)}function E(){return(E=(0,a.A)(function*(){(0,f.a)("manufacturing","資料匯出中");var e=yield(0,i.R)();(0,u.MR)(e,"application/json","bus-export.json")})).apply(this,arguments)}function w(){var e=(0,u.zx)(),t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.setAttribute("name",e),t.id=e,t.classList.add("dt"),t.addEventListener("change",function(t){if(0===t.target.files.length)(0,d.bv)(`body #${e}`).remove();else{var n=t.target.files[0],a=new FileReader;a.onload=function(t){var n=t.target.result;(0,r.Qx)(n).then(function(t){t?(0,f.a)("check_circle","已匯入資料"):(0,f.a)("error","無法匯入資料"),(0,d.bv)(`body #${e}`).remove()})},a.readAsText(n)}},{once:!0}),t.addEventListener("cancel",function(){(0,d.bv)(`body #${e}`).remove()},{once:!0}),document.body.append(t),(0,d.bv)(`body #${e}`).click()}function L(){var e=(0,c._P)();window.open(e)}function A(){window.open("https://github.com/EricHsia7/bus")}function x(){(0,o.VC)().then(function(e){switch(e){case"granted":(0,f.a)("check_circle","已開啟永久儲存");break;case"denied":(0,f.a)("cancel","永久儲存權限已被拒絕");break;case"unsupported":(0,f.a)("warning","此瀏覽器不支援永久儲存");break;default:(0,f.a)("error","發生錯誤")}})}},6166(e,t,n){n.d(t,{wx:()=>v,yH:()=>f});var a=n(3459),i=n(8179),r=n(904),s=(0,i.bv)(".gs"),c=(0,i.aI)(s,".qs"),o=(0,i.aI)(c,".ss"),d=(0,i.aI)(c,".ct"),u=(0,i.aI)(s,".is"),l=(0,i.aI)(u,".os");function p(e,t,n){var r=document.createElement("div");r.classList.add("us");var s=document.createElement("div");s.classList.add("xs"),s.innerText=t.name;var c=document.createElement("div");c.classList.add("_s");var o=document.createElement("input");return o.type="checkbox",o.checked=e.option===n,o.onclick=function(t){!function(e,t,n){var r=(0,i.e0)('.gs .qs .ss .us ._s input[type="checkbox"]');for(var s of r)s.checked=!1;var c=e.target;c.checked=!0,(0,a.aN)(t,n)}(t,e.key,n)},c.appendChild(o),r.appendChild(s),r.appendChild(c),r}function f(e){(0,r.WR)("SettingsOptions"),s.setAttribute("displayed","true"),function(e){var t=(0,a.PL)(e);l.innerText=t.name,d.innerText=t.description,o.innerHTML="";var n=new DocumentFragment,i=0;for(var r of t.options){var s=p(t,r,i);n.appendChild(s),i+=1}o.append(n)}(e),(0,r.Z_)()}function v(){s.setAttribute("displayed","false"),(0,r.l$)()}},6171(){},7037(){},7113(){},8073(){},9205(){},9351(){},9590(){}}]);
//# sourceMappingURL=d8060e74e73101ae3e84.js.map