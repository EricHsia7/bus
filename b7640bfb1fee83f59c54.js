"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{313:(t,e,n)=>{n.d(e,{s:()=>y});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)}))}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return p=l((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l((function*(){var e,n=[],o=a([[0,9],[1,9]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,f=yield(0,i.Fd)(u.url,t,`getProvider_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,i.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_provider_cache",f=yield(0,o.Ct)(0,`${u}_timestamp`);if(null===f){var y=yield e();return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(y)),s||(s=!0,c=y),y}if((new Date).getTime()-parseInt(f)>5184e6){y=yield e();return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(y)),y}if(!s){var p=yield(0,o.Ct)(0,`${u}`);s=!0,c=JSON.parse(p)}return(0,i.Mf)(t,"getProvider_0",0,!0),(0,i.Mf)(t,"getProvider_1",0,!0),(0,i.ZL)(t,-1),c})),p.apply(this,arguments)}},424:(t,e,n)=>{n.d(e,{T:()=>d});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)}))}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return(p=l((function*(t){var e=new Worker(new URL(n.p+n.u(132),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return m=l((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l((function*(){var e,n=[],o=a([[0,11],[1,11]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,f=yield(0,i.Fd)(u.url,t,`getStop_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,i.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_stop_cache",f=yield(0,o.Ct)(0,`${u}_timestamp`);if(null===f){var p=yield e(),d=yield y(p);return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(d)),s||(s=!0,c=d),d}if((new Date).getTime()-parseInt(f)>2592e6){p=yield e(),d=yield y(p);return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(d)),d}if(!s){var m=yield(0,o.Ct)(0,`${u}`);s=!0,c=JSON.parse(m)}return(0,i.Mf)(t,"getStop_0",0,!0),(0,i.Mf)(t,"getStop_1",0,!0),(0,i.ZL)(t,-1),c})),m.apply(this,arguments)}},1932:(t,e,n)=>{n.d(e,{L:()=>v});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)}))}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return(p=l((function*(t){var e=new Worker(new URL(n.p+n.u(332),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return(m=l((function*(t){var e=new Worker(new URL(n.p+n.u(892),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function v(t){return h.apply(this,arguments)}function h(){return h=l((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l((function*(){var e,n="",o=a([[0,15],[1,15]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value;n+=(yield(0,i.Fd)(u.url,t,`getSegmentBuffers_${u.e[0]}`,"xml")),(0,i.ZL)(t,-1)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_segment_buffers_v6_cache",f=yield(0,o.Ct)(0,`${u}_timestamp`);if(null===f){var p=yield e(),m=yield y(p),v=yield d(m);return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(v)),s||(s=!0,c=v),v}if((new Date).getTime()-parseInt(f)>2592e6){p=yield e(),m=yield y(p),v=yield d(m);return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(v)),v}if(!s){var h=yield(0,o.Ct)(0,`${u}`);s=!0,c=JSON.parse(h)}return(0,i.Mf)(t,"getSegmentBuffers_0",0,!0),(0,i.Mf)(t,"getSegmentBuffers_1",0,!0),(0,i.ZL)(t,-1),c})),h.apply(this,arguments)}},2303:(t,e,n)=>{n.d(e,{$Q:()=>a,AS:()=>l,Ov:()=>s,aU:()=>u,eu:()=>y,s$:()=>p,w_:()=>f,zi:()=>c});var r=n(5579);function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){f=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(f)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if("string"==typeof t){var n=parseInt(t);if(-3===n)return{code:6,text:"末班駛離",time:n};if(-4===n)return{code:5,text:"今日停駛",time:n};if(-2===n)return{code:4,text:"交通管制",time:n};if(-1===n)return{code:3,text:"未發車",time:n};if(0<=n&&n<=10)return{code:2,text:"進站中",time:n};if(10<n&&n<=180)return{code:1,text:(0,r.fU)(n,e),time:n};if(180<n&&n<=250)return{code:.5,text:(0,r.fU)(n,e),time:n};if(250<n)return{code:0,text:(0,r.fU)(n,e),time:n}}return{code:7,text:"發生錯誤",time:-5}}function u(t,e){if(0===e){var n=0,r=0;return 4===t.length&&(n=parseInt(t.substring(0,2)),r=parseInt(t.substring(2,4))),2===t.length&&(r=parseInt(t)),{type:"moment",hours:n,minutes:r}}if(1===e){var i=0,o=0;if(4===t.length){var a=parseInt(t.substring(0,2)),u=parseInt(t.substring(2,4));i=Math.min(a,u),o=Math.max(a,u)}if(2===t.length){var f=parseInt(t);i=f,o=f}return{type:"range",min:i,max:o}}}function f(t,e,n,r,o){var a,u={},f={},l=i(e);try{for(l.s();!(a=l.n()).done;){var s=a.value;f[s.BusID]=s}}catch(t){l.e(t)}finally{l.f()}var c,y=i(t);try{for(y.s();!(c=y.n()).done;){var p=c.value,d={};d.CarType=p.CarType,d.BusStatus=p.BusStatus,d.BusID=p.BusID,d.CarOnStop=p.CarOnStop;var m=parseInt(p.RouteID),v=String(p.BusID),h=!1,g=0;m===r||o.indexOf(m)>-1||m===10*r?(h=!0,g=v.charCodeAt(0)*Math.pow(10,-5)):(h=!1,g=v.charCodeAt(0)),d.onThisRoute=h,d.index=g;var b={};if(f.hasOwnProperty(v)){b=f[v],d.position={latitude:parseFloat(b.Latitude),longitude:parseFloat(b.Longitude)};var w={},S=!1;for(var I in n){var $=n[I];if($.pid.indexOf(m)>-1){w=$,S=!0;break}}d.RouteName=S?w.n:"未知路線",d.RouteID=S?w.id:null;var T=`s_${p.StopID}`;u.hasOwnProperty(T)||(u[T]=[]),u[T].push(d)}}}catch(t){y.e(t)}finally{y.f()}return u}function l(t,e,n,r){var o,a={},u={},f=i(e);try{for(f.s();!(o=f.n()).done;){var l=o.value;u[l.BusID]=l}}catch(t){f.e(t)}finally{f.f()}var s,c=i(t);try{for(c.s();!(s=c.n()).done;){var y=s.value,p={},d=parseInt(y.StopID),m=parseInt(y.RouteID),v=String(y.BusID);if(!(r.indexOf(d)<0)){p.index=v.charCodeAt(0),p.onThisRoute=!0,p.CarType=y.CarType,p.BusStatus=y.BusStatus,p.BusID=y.BusID,p.CarOnStop=y.CarOnStop;var h={};if(u.hasOwnProperty(v)){h=u[v],p.position={latitude:parseFloat(h.Latitude),longitude:parseFloat(h.Longitude)};var g={},b=!1;for(var w in n){var S=n[w];if(S.pid.indexOf(m)>-1){g=S,b=!0;break}}p.RouteName=b?g.n:"未知路線",p.RouteID=b?g.id:null;var I=`s_${d}`;a.hasOwnProperty(I)||(a[I]=[]),a[I].push(p)}}}}catch(t){c.e(t)}finally{c.f()}return a}function s(t){var e="";switch(t){case"0":e="一般";break;case"1":e="低底盤";break;case"2":e="大復康巴士";break;case"3":e="狗狗友善專車";break;default:e="未知類型"}return e}function c(t){var e="";switch(t){case"0":e="離站";break;case"1":e="進站";break;default:e="未知狀態"}return e}function y(t){var e="";switch(t){case"0":e="正常";break;case"1":e="車禍";break;case"2":e="故障";break;case"3":e="塞車";break;case"4":e="緊急求援";break;case"5":e="加油";break;case"99":e="非營運狀態";break;default:e="未知狀態"}return e}function p(t){var e={},n=s(t.CarType);e.type=n;var r=c(t.CarOnStop),i=y(t.BusStatus);return e.carNumber=t.BusID,e.status={onStop:r,situation:i,text:`${r} | ${i}`},e.RouteName=t.RouteName,e.onThisRoute=t.onThisRoute,e.index=t.index,e.position=t.position,e}},4293:(t,e,n)=>{n.d(e,{a:()=>d});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)}))}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return(p=l((function*(t){var e=new Worker(new URL(n.p+n.u(148),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return m=l((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l((function*(){var e,n=[],o=a([[0,10],[1,10]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,f=yield(0,i.Fd)(u.url,t,`getRoute_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,i.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return yield e();var u="bus_route_v2_cache",f=yield(0,o.Ct)(0,`${u}_timestamp`);if(null===f){var p=yield e(),d=yield y(p);return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(d)),s||(s=!0,c=d),d}if((new Date).getTime()-parseInt(f)>864e5){var m=yield e(),v=yield y(m);return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(v)),s||(s=!0,c=v),v}if(!s){var h=yield(0,o.Ct)(0,`${u}`);s=!0,c=JSON.parse(h)}return(0,i.Mf)(t,"getRoute_0",0,!0),(0,i.Mf)(t,"getRoute_1",0,!0),(0,i.ZL)(t,-1),c})),m.apply(this,arguments)}},6788:(t,e,n)=>{n.d(e,{Fd:()=>c,LQ:()=>m,Mf:()=>p,ZL:()=>h,Zt:()=>g,_M:()=>d,gC:()=>b});var r=n(4750),i=n(5579),o=n(8925);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,f,"next",t)}function f(t){u(o,r,i,a,f,"throw",t)}a(void 0)}))}}var l={},s={};function c(t,e,n,r){return y.apply(this,arguments)}function y(){return y=f((function*(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:15e3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:6e4,l=new Promise((function(t,e){return setTimeout((function(){return e(new Error("Connection timed out"))}),a)})),s=yield Promise.race([fetch(t),l]).catch((function(t){throw p(e,n,0,!0),t}));if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);for(var y=parseInt(String(s.headers.get("content-length"))),d=0,m=s.body.getReader(),v=[];;){var h=yield new Promise(function(){var t=f((function*(t,e){var n=setTimeout((function(){e(new Error("Loading timed out"))}),u),r=yield m.read(),i=r.done,o=r.value;clearTimeout(n),t(i?{done:i}:{done:i,value:o})}));return function(e,n){return t.apply(this,arguments)}}()).catch((function(t){throw p(e,n,d/y,!0),t})),g=h.done,b=h.value;if(g)break;v.push(b),d+=b.length,p(e,n,d/y,!1)}for(var w=new Uint8Array(d),S=0,I=0,$=v;I<$.length;I++){var T=$[I];w.set(T,S),S+=T.length}var _=new Date;yield(0,o.N$)(y,_);var L=new Blob([w]),A=new Blob([L.slice(0,L.size)],{type:"application/gzip"}),O=yield A.arrayBuffer(),x=yield(0,r.h)(O);return"json"===i?/^\<\!doctype html\>/.test(x)?yield c(t.replace("https://tcgbusfs.blob.core.windows.net/","https://erichsia7.github.io/bus-alternative-static-apis/"),e,n,i,a,u):JSON.parse(x):"xml"===i?x:void 0})),y.apply(this,arguments)}function p(t,e,n,r){l.hasOwnProperty(t)||(l[t]={});var i=`u_${e}`;l[t].hasOwnProperty(i)?(r?l[t][i].expel=!0:(l[t][i].expel=!1,l[t][i].progress=n),v(t,"run")):(l[t][i]={expel:!1,progress:n,total:1},v(t,"start"))}function d(t){if(l.hasOwnProperty(t)&&"object"===a(l[t])){var e=0,n=0;for(var r in l[t])l[t][r].expel||(e+=l[t][r].total,n+=l[t][r].progress);var i=Math.min(Math.max(n/e,0),1);return i===1/0||isNaN(i)?1:i}return 1}function m(t){l.hasOwnProperty(t)&&(delete l[t],v(t,"end"))}function v(t,e){var n={target:t,stage:e,progress:d(t)},r=new CustomEvent(t,n);document.dispatchEvent(r)}function h(t,e){s.hasOwnProperty(t)||(s[t]=0);var n=0;"string"==typeof e&&(n=(0,i.Zn)(e)),n>s[t]&&(s[t]=n)}function g(t){return s.hasOwnProperty(t)?1*s[t]:0}function b(t){s.hasOwnProperty(t)&&delete s[t]}},8201:(t,e,n)=>{n.d(e,{Y:()=>y});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)}))}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return p=l((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l((function*(){var e,n=[],o=a([[0,12],[1,12]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,f=yield(0,i.Fd)(u.url,t,`getSemiTimeTable_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,i.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_semi_timetable_cache",f=yield(0,o.Ct)(0,`${u}_timestamp`);if(null===f){var y=yield e();return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(y)),s||(s=!0,c=y),y}if((new Date).getTime()-parseInt(f)>12096e5){y=yield e();return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(y)),y}if(!s){var p=yield(0,o.Ct)(0,`${u}`);s=!0,c=JSON.parse(p)}return(0,i.Mf)(t,"getSemiTimeTable_0",0,!0),(0,i.Mf)(t,"getSemiTimeTable_1",0,!0),(0,i.ZL)(t,-1),c})),p.apply(this,arguments)}},8671:(t,e,n)=>{n.d(e,{s:()=>y});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){f=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(f)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void n(t)}u.done?e(f):Promise.resolve(f).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)}))}}var s=!1,c={};function y(t){return p.apply(this,arguments)}function p(){return p=l((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=l((function*(){var e,n=[],o=a([[0,14],[1,14]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,f=yield(0,i.Fd)(u.url,t,`getTimeTable_${u.e[0]}`,"json");n=n.concat(f.BusInfo),(0,i.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_timetable_cache",f=yield(0,o.Ct)(0,`${u}_timestamp`);if(null===f){var y=yield e();return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(y)),s||(s=!0,c=y),y}if((new Date).getTime()-parseInt(f)>12096e5){y=yield e();return yield(0,o.mL)(0,`${u}_timestamp`,(new Date).getTime()),yield(0,o.mL)(0,`${u}`,JSON.stringify(y)),y}if(!s){var p=yield(0,o.Ct)(0,`${u}`);s=!0,c=JSON.parse(p)}return(0,i.Mf)(t,"getTimeTable_0",0,!0),(0,i.Mf)(t,"getTimeTable_1",0,!0),(0,i.ZL)(t,-1),c})),p.apply(this,arguments)}}}]);
//# sourceMappingURL=b7640bfb1fee83f59c54.js.map