{"version":3,"file":"c5cd38763a25b9012a06.js","mappings":"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","sources":["webpack://bus/./src/interface/route-calendar/index.ts","webpack://bus/./src/interface/route-details/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/schedule-notification/index.ts"],"sourcesContent":["import { SimplifiedRouteItem } from '../../data/apis/getRoute/index';\nimport { integratedRouteCalendar, integrateRouteCalendar } from '../../data/route/calendar';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { generateRoundedRectPath } from '../../tools/graphic';\nimport { generateIdentifier } from '../../tools/index';\nimport { dateToString, offsetDate } from '../../tools/time';\nimport { hidePreviousPage, pushPageHistory, querySize, revokePageHistory, showPreviousPage } from '../index';\n\nconst routeCalendarField = documentQuerySelector('.css_route_calendar_field');\nconst headElement = elementQuerySelector(routeCalendarField, '.css_route_calendar_head');\nconst dateElement = elementQuerySelector(headElement, '.css_route_calendar_date');\nconst timelinesElement = elementQuerySelector(routeCalendarField, '.css_route_calendar_timelines');\nconst timelineElements = Array.from(elementQuerySelectorAll(timelinesElement, '.css_route_calendar_timeline'));\n\nlet currentDate = new Date();\nlet currentIntegration = {} as integratedRouteCalendar;\nconst currentTimelineSVGs = ['', '', ''];\n\nlet routeCalendarSliding_fieldWidth: number = 0;\nlet routeCalendarSliding_initialized: boolean = false;\n\nfunction generateRouteCalendarSVG(integration: integratedRouteCalendar, date: Date, width: number): string {\n  const verticalPadding = 10;\n  const fontFamily = \"'Noto Sans TC', sans-serif\";\n\n  const gridLabelWidth = 35;\n  const gridHeight = 90;\n  const gridLineLabelFontWeight = 400;\n  const gridLineLabelFontSize = 10;\n\n  const borderRadius = 5;\n  const decorationWidth = 3;\n  const eventBoxPadding = 3;\n  const eventBoxFontWeight = 500;\n  const eventBoxFontSize = 15;\n\n  const gridLinePathCommands = [];\n  const gridLineLabels = [];\n  for (let i = 0; i < 24; i++) {\n    const text = `${i.toString().padStart(2, '0')}:00`;\n    const textWidth = 30;\n    const textHeight = 12;\n    // TODO: measure text width and height\n    const y = i * gridHeight + verticalPadding;\n    gridLinePathCommands.push(`M${gridLabelWidth} ${y}`, `h${width - gridLabelWidth}`);\n    gridLineLabels.push(`<text x=\"${gridLabelWidth - textWidth}\" y=\"${y + 3}\" font-weight=\"${gridLineLabelFontWeight}\" font-size=\"${gridLineLabelFontSize}\" font-family=\"${fontFamily}\" component=\"gridline-label\">${text}</text>`);\n  }\n\n  const gridLine = `<path d=\"${gridLinePathCommands.join(' ')}\" fill=\"none\" stroke-width=\"0.45\" component=\"gridline\"/>`;\n  const height = gridHeight * 24 + verticalPadding * 2;\n\n  const day = date.getDay();\n  const events = integration.repeated[day];\n  const scheduledEvents = integration.scheduled;\n  const date2 = offsetDate(date, 0, 0, integration.timeZoneOffset - date.getTimezoneOffset());\n  const eventDate = [date2.getFullYear(), date2.getMonth() + 1, date2.getDate()];\n  for (let i = scheduledEvents.length - 1; i >= 0; i--) {\n    if (eventDate[0] === scheduledEvents[i].date[0] && eventDate[1] === scheduledEvents[i].date[1] && eventDate[2] === scheduledEvents[i].date[2]) {\n      events.push({\n        type: 'repeated',\n        time: scheduledEvents[i].time,\n        interval: scheduledEvents[i].interval,\n        count: scheduledEvents[i].count,\n        day: day\n      });\n    }\n  }\n\n  const eventBoxPathCommands = [];\n  const eventBoxDecorationPathCommands = [];\n  const eventBoxTexts = [];\n  const minutesPerDay = 24 * 60;\n  for (let i = events.length - 1; i >= 0; i--) {\n    const x = gridLabelWidth;\n    const y = (events[i].time[0] / minutesPerDay) * height;\n    const boxWidth = width - gridLabelWidth;\n    const boxHeight = ((events[i].time[1] - events[i].time[0]) / minutesPerDay) * height;\n    const startMinutes = events[i].time[0] % 60;\n    const startHours = (events[i].time[0] - startMinutes) / 60;\n    const endMinutes = events[i].time[1] % 60;\n    const endHours = (events[i].time[1] - endMinutes) / 60;\n    const title = `${startHours.toString().padStart(2, '0')}:${startMinutes.toString().padStart(2, '0')} - ${endHours.toString().padStart(2, '0')}:${endMinutes.toString().padStart(2, '0')}`;\n    const titleWidth = 30;\n    const titleHeight = 17;\n    const description = `每${events[i].interval[0] === events[i].interval[1] ? events[i].interval[0] : events[i].interval.join(' - ')}分鐘一班 | ${events[i].count[0] === events[i].count[1] ? events[i].count[0] : events[i].count.join(' - ')}班`;\n    const descriptionWidth = 30;\n    const descriptionHeight = 17;\n    Array.prototype.push.apply(eventBoxPathCommands, generateRoundedRectPath(x, y, boxWidth, boxHeight, borderRadius, false));\n    eventBoxDecorationPathCommands.push(`M${x + eventBoxPadding} ${y + eventBoxPadding}`, `v${boxHeight - eventBoxPadding * 2}`);\n    eventBoxTexts.push(`<text x=\"${x + eventBoxPadding + decorationWidth + eventBoxPadding}\" y=\"${y + eventBoxPadding + titleHeight}\" font-weight=\"${eventBoxFontWeight}\" font-size=\"${eventBoxFontSize}\" font-family=\"${fontFamily}\" component=\"event-title\">${title}</text>`, `<text x=\"${x + eventBoxPadding + decorationWidth + eventBoxPadding}\" y=\"${y + eventBoxPadding + titleHeight + descriptionHeight}\" font-weight=\"${eventBoxFontWeight}\" font-size=\"${eventBoxFontSize}\" font-family=\"${fontFamily}\" component=\"event-description\">${description}</text>`);\n  }\n\n  const eventBoxes = `<path d=\"${eventBoxPathCommands.join(' ')}\" stroke=\"none\" component=\"event-box\"/>`;\n  const eventBoxDecorations = `<path d=\"${eventBoxDecorationPathCommands.join(' ')}\" fill=\"none\" stroke-width=\"${decorationWidth}\" stroke-linecap=\"round\" stroke-linejoin=\"round\" component=\"event-decoration\"/>`;\n  const svg = `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" xmlns=\"http://www.w3.org/2000/svg\">${gridLine}${gridLineLabels.join('')}${eventBoxes}${eventBoxDecorations}${eventBoxTexts.join('')}</svg>`;\n  return svg;\n}\n\nfunction initializeRouteCalendarSliding(): void {\n  if (routeCalendarSliding_initialized) return;\n  routeCalendarSliding_initialized = true;\n\n  timelinesElement.addEventListener('scrollend', function () {\n    const scrollLeft = timelinesElement.scrollLeft;\n    const idx = Math.round(scrollLeft / routeCalendarSliding_fieldWidth);\n    if (idx === 0) {\n      currentDate = offsetDate(currentDate, -1, 0, 0);\n      const yesterday = offsetDate(currentDate, -1, 0, 0);\n      timelineElements[0].before(timelineElements[2]);\n      timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n      [timelineElements[0], timelineElements[1], timelineElements[2]] = [timelineElements[2], timelineElements[0], timelineElements[1]];\n      [currentTimelineSVGs[0], currentTimelineSVGs[1], currentTimelineSVGs[2]] = [generateRouteCalendarSVG(currentIntegration, yesterday, routeCalendarSliding_fieldWidth), currentTimelineSVGs[0], currentTimelineSVGs[1]];\n      timelineElements[0].innerHTML = currentTimelineSVGs[0];\n      dateElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n    } else if (idx === 2) {\n      currentDate = offsetDate(currentDate, 1, 0, 0);\n      const tomorrow = offsetDate(currentDate, 1, 0, 0);\n      timelineElements[2].after(timelineElements[0]);\n      timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n      [timelineElements[0], timelineElements[1], timelineElements[2]] = [timelineElements[1], timelineElements[2], timelineElements[0]];\n      [currentTimelineSVGs[0], currentTimelineSVGs[1], currentTimelineSVGs[2]] = [currentTimelineSVGs[1], currentTimelineSVGs[2], generateRouteCalendarSVG(currentIntegration, tomorrow, routeCalendarSliding_fieldWidth)];\n      timelineElements[2].innerHTML = currentTimelineSVGs[2];\n      dateElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n    }\n  });\n\n  timelinesElement.scrollTo({ left: routeCalendarSliding_fieldWidth });\n}\n\nasync function initializeRouteCalendar(PathAttributeId: SimplifiedRouteItem['pid']) {\n  const FieldSize = querySize('window');\n  routeCalendarSliding_fieldWidth = FieldSize.width;\n  currentDate = new Date();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteCalendar(PathAttributeId, requestID);\n  currentIntegration = integration;\n  for (let i = 0; i < 3; i++) {\n    const date = offsetDate(currentDate, i - 1, 0, 0);\n    currentTimelineSVGs[i] = generateRouteCalendarSVG(integration, date, routeCalendarSliding_fieldWidth);\n    timelineElements[i].innerHTML = currentTimelineSVGs[i];\n  }\n  dateElement.innerText = dateToString(currentDate, 'YYYY-MM-DD WW');\n  initializeRouteCalendarSliding();\n}\n\nexport function showRouteCalendar(): void {\n  routeCalendarField.setAttribute('displayed', 'true');\n}\n\nexport function hideRouteCalendar(): void {\n  routeCalendarField.setAttribute('displayed', 'false');\n}\n\nexport function openRouteCalendar(PathAttributeId: SimplifiedRouteItem['pid']): void {\n  pushPageHistory('RouteCalendar');\n  showRouteCalendar();\n  initializeRouteCalendar(PathAttributeId);\n  hidePreviousPage();\n}\n\nexport function closeRouteCalendar(): void {\n  hideRouteCalendar();\n  showPreviousPage();\n  revokePageHistory('RouteCalendar');\n}\n","import { getRoute, SimplifiedRoute, SimplifiedRouteItem } from '../../data/apis/getRoute/index';\nimport { deleteDataReceivingProgress, deleteDataUpdateTime } from '../../data/apis/loader';\nimport { IntegratedRouteDetails, IntegratedRouteDetailsAction, integrateRouteDetails } from '../../data/route/details';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString, generateIdentifier, hasOwnProperty } from '../../tools/index';\nimport { getPermalink } from '../../tools/permalink';\nimport { shareLink } from '../../tools/share';\nimport { getBlankIconElement, setIcon } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { openQRCode } from '../qrcode/index';\n\nlet previousIntegration = {} as IntegratedRouteDetails;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst RouteDetailsField = documentQuerySelector('.css_route_details_field');\nconst RouteDetailsBodyElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body');\nconst RouteDetailsActionsElement = elementQuerySelector(RouteDetailsBodyElement, '.css_route_details_actions');\n\nfunction generateElementOfItem(): HTMLElement {\n  const element = documentCreateDivElement();\n  element.classList.add('css_route_details_action');\n\n  // Icon\n  const icon = documentCreateDivElement();\n  icon.classList.add('css_route_details_action_icon');\n  icon.appendChild(getBlankIconElement());\n  element.appendChild(icon);\n\n  // Name\n  const name = documentCreateDivElement();\n  name.classList.add('css_route_details_action_name');\n  element.appendChild(name);\n\n  return element;\n}\n\nfunction updateRouteDetailsField(integration: IntegratedRouteDetails, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction, previousItem: IntegratedRouteDetailsAction | null): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_route_details_action_icon');\n      setIcon(thisIconElement, thisItem.icon);\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction): void {\n      const nameElement = elementQuerySelector(thisElement, '.css_route_details_action_name');\n      nameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: IntegratedRouteDetailsAction): void {\n      thisElement.onclick = thisItem.action;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateIcon(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (previousItem.key !== thisItem.key) {\n        updateIcon(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n      }\n\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const actions = integration.actions;\n  const actionsQuantity = integration.actionsQuantity;\n\n  const actionElements = Array.from(elementQuerySelectorAll(RouteDetailsActionsElement, '.css_route_details_action'));\n  const currentActionElementsLength = actionElements.length;\n  if (actionsQuantity !== currentActionElementsLength) {\n    const difference = currentActionElementsLength - actionsQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newItemElement = generateElementOfItem();\n        fragment.appendChild(newItemElement);\n        actionElements.push(newItemElement);\n      }\n      RouteDetailsActionsElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentActionElementsLength - 1, q = currentActionElementsLength - difference - 1; p > q; p--) {\n        actionElements[p].remove();\n        actionElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < actionsQuantity; i++) {\n    const thisElement = actionElements[i];\n    const thisItem = actions[i];\n    if (hasOwnProperty(previousIntegration, 'actions')) {\n      if (previousIntegration.actions[i]) {\n        const previousItem = previousIntegration.actions[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setupRouteDetailsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const actions: IntegratedRouteDetailsAction[] = [];\n  /*\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  */\n  const defaultActionsQuantity = 4;\n  for (let i = 0; i < defaultActionsQuantity; i++) {\n    actions.push({\n      name: '',\n      icon: '',\n      key: `action-${i}`,\n      action: function () {}\n    });\n  }\n\n  updateRouteDetailsField(\n    {\n      actions: actions,\n      actionsQuantity: defaultActionsQuantity,\n      RouteID: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function initializeRouteDetailsField(RouteID: SimplifiedRouteItem['id'], PathAttributeId: SimplifiedRouteItem['pid']) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  setupRouteDetailsFieldSkeletonScreen();\n  const integration = await integrateRouteDetails(RouteID, PathAttributeId, requestID);\n  updateRouteDetailsField(integration, false, playing_animation);\n}\n\nexport function showRouteDetails(): void {\n  RouteDetailsField.setAttribute('displayed', 'true');\n}\n\nexport function hideRouteDetails(): void {\n  RouteDetailsField.setAttribute('displayed', 'false');\n}\n\nexport function openRouteDetails(RouteID: SimplifiedRouteItem['id'], PathAttributeId: SimplifiedRouteItem['pid']): void {\n  pushPageHistory('RouteDetails');\n  showRouteDetails();\n  initializeRouteDetailsField(RouteID, PathAttributeId);\n  hidePreviousPage();\n}\n\nexport function closeRouteDetails(): void {\n  hideRouteDetails();\n  showPreviousPage();\n  revokePageHistory('RouteDetails');\n}\n\nexport async function shareRoutePermalink(RouteID: SimplifiedRouteItem['id']) {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisRouteKey = `r_${RouteID}`;\n  if (hasOwnProperty(Route, thisRouteKey)) {\n    const thisRoute = Route[thisRouteKey] as SimplifiedRouteItem;\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    shareLink(thisRoute.n, link);\n  }\n}\n\nexport async function showRoutePermalinkQRCode(RouteID: SimplifiedRouteItem['id']) {\n  const requestID = generateIdentifier();\n  const Route = (await getRoute(requestID, true)) as SimplifiedRoute;\n  deleteDataReceivingProgress(requestID);\n  deleteDataUpdateTime(requestID);\n  const thisRouteKey = `r_${RouteID}`;\n  if (hasOwnProperty(Route, thisRouteKey)) {\n    const thisRoute = Route[thisRouteKey] as SimplifiedRouteItem;\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    openQRCode(link);\n  }\n}\n","import { Folder, FolderContent, isFolderContentSaved, listFolders, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { openFolderCreator } from '../folder-creator/index';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst SaveToFolderField = documentQuerySelector('.css_save_to_folder_field');\nconst bodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst listElement = elementQuerySelector(bodyElement, '.css_save_to_folder_list');\nconst headElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_head');\nconst rightButtonElement = elementQuerySelector(headElement, '.css_save_to_folder_button_right');\n\nconst successfulSaveMessage = '已儲存至資料夾';\nconst failedSaveMessage = '無法儲存';\n\nfunction generateElementOfItem(item: Folder, type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined): HTMLElement {\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.innerText = item.name;\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  // Event handler\n  switch (type) {\n    case 'stop': {\n      itemElement.onclick = function () {\n        saveStop(item.id, parameters[0], parameters[1]).then((e) => {\n          if (e) {\n            isFolderContentSaved('stop', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n\n    case 'route': {\n      itemElement.onclick = function () {\n        saveRoute(item.id, parameters[0]).then((e) => {\n          if (e) {\n            isFolderContentSaved('route', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n\n    case 'location': {\n      itemElement.onclick = function () {\n        saveLocation(item.id, parameters[0]).then((e) => {\n          if (e) {\n            isFolderContentSaved('location', parameters[0]).then((k) => {\n              if (k) {\n                if (saveToFolderButtonElement !== null && saveToFolderButtonElement !== undefined) {\n                  saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n                }\n                promptMessage('folder', successfulSaveMessage);\n                closeSaveToFolder();\n              }\n            });\n          } else {\n            promptMessage('warning', failedSaveMessage);\n          }\n        });\n      };\n      break;\n    }\n    case 'bus':\n      break;\n    case 'empty':\n      break;\n    default:\n      break;\n  }\n\n  return itemElement;\n}\n\nfunction initializeSaveToFolderField(type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined) {\n  rightButtonElement.onclick = function () {\n    openFolderCreator(function () {\n      initializeSaveToFolderField(type, parameters, saveToFolderButtonElement);\n    });\n  };\n  const folders = listFolders();\n  listElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of folders) {\n    const newItemElement = generateElementOfItem(item, type, parameters, saveToFolderButtonElement);\n    fragment.appendChild(newItemElement);\n  }\n  listElement.append(fragment);\n}\n\nexport function showSaveToFolder(): void {\n  SaveToFolderField.setAttribute('displayed', 'true');\n}\n\nexport function hideSaveToFolder(): void {\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nexport function openSaveToFolder(type: FolderContent['type'], parameters: Array<any>, saveToFolderButtonElement?: HTMLElement | null | undefined): void {\n  pushPageHistory('SaveToFolder');\n  showSaveToFolder();\n  initializeSaveToFolderField(type, parameters, saveToFolderButtonElement);\n  hidePreviousPage();\n}\n\nexport function closeSaveToFolder(): void {\n  hideSaveToFolder();\n  showPreviousPage();\n  revokePageHistory('SaveToFolder');\n}\n","import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { hidePreviousPage, pushPageHistory, revokePageHistory, showPreviousPage } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = documentQuerySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): HTMLElement {\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.innerText = item.name;\n\n  // Event handler\n  const index = item.index;\n  itemElement.onclick = function () {\n    scheduleNotificationForStopItem(thisButtonElement, StopID, RouteID, EstimateTime, index);\n  };\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return itemElement;\n}\n\nfunction initializeScheduleNotificationField(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, thisButtonElement, StopID, RouteID, EstimateTime);\n    fragment.appendChild(newElement);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function showScheduleNotification(): void {\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n}\n\nexport function hideScheduleNotification(): void {\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function openScheduleNotification(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number): void {\n  pushPageHistory('ScheduleNotification');\n  showScheduleNotification();\n  initializeScheduleNotificationField(thisButtonElement, StopID, RouteID, EstimateTime);\n  hidePreviousPage();\n}\n\nexport function closeScheduleNotification(): void {\n  hideScheduleNotification();\n  showPreviousPage();\n  revokePageHistory('ScheduleNotification');\n}\n\nexport function scheduleNotificationForStopItem(thisButtonElement: HTMLElement, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  promptMessage('manufacturing', '處理中');\n  thisButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        thisButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        thisButtonElement.setAttribute('enabled', 'true');\n        thisButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        thisButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n"],"names":["routeCalendarField","documentQuerySelector","headElement","elementQuerySelector","dateElement","timelinesElement","timelineElements","Array","from","elementQuerySelectorAll","currentDate","Date","currentIntegration","currentTimelineSVGs","routeCalendarSliding_fieldWidth","routeCalendarSliding_initialized","generateRouteCalendarSVG","integration","date","width","fontFamily","gridLinePathCommands","gridLineLabels","i","text","toString","padStart","y","push","gridLine","join","height","gridHeight","day","getDay","events","repeated","scheduledEvents","scheduled","date2","offsetDate","timeZoneOffset","getTimezoneOffset","eventDate","getFullYear","getMonth","getDate","length","type","time","interval","count","eventBoxPathCommands","eventBoxDecorationPathCommands","eventBoxTexts","boxWidth","boxHeight","startMinutes","startHours","endMinutes","endHours","title","description","prototype","apply","generateRoundedRectPath","eventBoxPadding","eventBoxes","eventBoxDecorations","_initializeRouteCalendar","_asyncToGenerator","PathAttributeId","FieldSize","querySize","requestID","generateIdentifier","integrateRouteCalendar","innerHTML","innerText","dateToString","addEventListener","scrollLeft","idx","Math","round","yesterday","before","scrollTo","left","_ref","_ref2","tomorrow","after","_ref3","_ref4","arguments","showRouteCalendar","setAttribute","hideRouteCalendar","openRouteCalendar","pushPageHistory","_x","initializeRouteCalendar","hidePreviousPage","closeRouteCalendar","showPreviousPage","revokePageHistory","previousIntegration","previousAnimation","previousSkeletonScreen","RouteDetailsField","RouteDetailsBodyElement","RouteDetailsActionsElement","generateElementOfItem","element","documentCreateDivElement","classList","add","icon","appendChild","getBlankIconElement","name","updateRouteDetailsField","skeletonScreen","animation","updateItem","thisElement","thisItem","previousItem","updateIcon","thisIconElement","setIcon","updateName","updateOnclick","onclick","action","updateAnimation","booleanToString","updateSkeletonScreen","key","actions","actionsQuantity","actionElements","currentActionElementsLength","difference","fragment","DocumentFragment","o","newItemElement","append","p","q","remove","splice","hasOwnProperty","_initializeRouteDetailsField","RouteID","playing_animation","getSettingOptionValue","setupRouteDetailsFieldSkeletonScreen","integrateRouteDetails","showRouteDetails","hideRouteDetails","openRouteDetails","_x2","initializeRouteDetailsField","closeRouteDetails","shareRoutePermalink","_x3","_shareRoutePermalink","Route","getRoute","deleteDataReceivingProgress","deleteDataUpdateTime","thisRouteKey","thisRoute","link","getPermalink","id","n","shareLink","showRoutePermalinkQRCode","_x4","_showRoutePermalinkQRCode","openQRCode","SaveToFolderField","bodyElement","listElement","rightButtonElement","successfulSaveMessage","failedSaveMessage","item","parameters","saveToFolderButtonElement","itemElement","iconElement","iconSpanElement","document","createElement","getIconElement","nameElement","saveStop","then","e","isFolderContentSaved","k","promptMessage","closeSaveToFolder","saveRoute","saveLocation","initializeSaveToFolderField","openFolderCreator","folders","listFolders","showSaveToFolder","hideSaveToFolder","openSaveToFolder","ScheduleNotificationField","ScheduleNotificationBodyElement","ScheduleNotificationListElement","thisButtonElement","StopID","EstimateTime","index","closeScheduleNotification","scheduleNotificationForStop","result","scheduleNotificationForStopItem","showScheduleNotification","hideScheduleNotification","openScheduleNotification","scheduleNotificationOptions","newElement","initializeScheduleNotificationField"],"sourceRoot":""}