"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[537],{4131(t,n,e){e.d(n,{a:()=>C,b:()=>A,c:()=>x,d:()=>k});var a=e(467),i=e(2937),o=e(8179),r=e(7968),c=e(8024),l=e(5579),u=e(904),d=(0,o.c)(".f"),s=(0,o.e)(d,".g"),f=(0,o.e)(s,".h"),p=(0,o.e)(d,".i"),h=Array.from((0,o.d)(p,".j")),v=new Date,b={},m=["","",""],g=0,y=!1;function $(t,n,e){for(var a="'Noto Sans TC', sans-serif",i=[],o=[],c=0;c<24;c++){var u=`${c.toString().padStart(2,"0")}:00`,d=70*c+10;i.push(`M35 ${d}`,"h"+(e-35)),o.push(`<text x="5" y="${d+3}" font-weight="400" font-size="10" font-family="${a}" component="gridline-label">${u}</text>`)}for(var s=`<path d="${i.join(" ")}" fill="none" stroke-width="0.35" component="gridline"/>`,f=1700,p=n.getDay(),h=p<1?6:p-1,v=t.repeated[h],b=t.scheduled,m=(0,l.f)(n,0,0,t.timeZoneOffset-n.getTimezoneOffset()),g=[m.getFullYear(),m.getMonth()+1,m.getDate()],y=b.length-1;y>=0;y--)g[0]===b[y].date[0]&&g[1]===b[y].date[1]&&g[2]===b[y].date[2]&&v.push({type:"repeated",time:b[y].time,interval:b[y].interval,count:b[y].count,day:p});for(var $=[],w=[],k=[],A=v.length-1;A>=0;A--){var x=v[A].time[0]/1440*f,C=e-35,T=(v[A].time[1]-v[A].time[0])/1440*f,D=v[A].time[0]%60,L=(v[A].time[0]-D)/60,M=v[A].time[1]%60,S=(v[A].time[1]-M)/60,Y=`${L.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")} - ${S.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`,j=`每${v[A].interval[0]===v[A].interval[1]?v[A].interval[0]:v[A].interval.join(" - ")}分鐘一班 | ${v[A].count[0]===v[A].count[1]?v[A].count[0]:v[A].count.join(" - ")}班`;Array.prototype.push.apply($,(0,r.a)(35,x,C,T,5,!1)),w.push(`M38 ${x+3}`,"v"+(T-6)),k.push(`<text x="44" y="${x+3+17}" font-weight="500" font-size="15" font-family="${a}" component="event-title">${Y}</text>`,`<text x="44" y="${x+3+17+17}" font-weight="500" font-size="15" font-family="${a}" component="event-description">${j}</text>`)}var F=`<path d="${$.join(" ")}" stroke="none" component="event-box"/>`,W=`<path d="${w.join(" ")}" fill="none" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" component="event-decoration"/>`;return`<svg width="${e}" height="1700" viewBox="0 0 ${e} 1700" xmlns="http://www.w3.org/2000/svg">${s}${o.join("")}${F}${W}${k.join("")}</svg>`}function w(){return(w=(0,a.a)(function*(t){var n=(0,u.d)("window");g=n.width,v=new Date;var e=(0,c.c)(),a=yield(0,i.a)(t,e);b=a;for(var o=0;o<3;o++){var r=(0,l.f)(v,o-1,0,0);m[o]=$(a,r,g),h[o].innerHTML=m[o]}f.innerText=(0,l.c)(v,"YYYY-MM-DD WW"),y||(y=!0,p.addEventListener("scrollend",function(){var t=p.scrollLeft,n=Math.round(t/g);if(0===n){v=(0,l.f)(v,-1,0,0);var e=(0,l.f)(v,-1,0,0);h[0].before(h[2]),p.scrollTo({left:g});var a=[h[2],h[0],h[1]];h[0]=a[0],h[1]=a[1],h[2]=a[2];var i=[$(b,e,g),m[0],m[1]];m[0]=i[0],m[1]=i[1],m[2]=i[2],h[0].innerHTML=m[0],f.innerText=(0,l.c)(v,"YYYY-MM-DD WW")}else if(2===n){v=(0,l.f)(v,1,0,0);var o=(0,l.f)(v,1,0,0);h[2].after(h[0]),p.scrollTo({left:g});var r=[h[1],h[2],h[0]];h[0]=r[0],h[1]=r[1],h[2]=r[2];var c=[m[1],m[2],$(b,o,g)];m[0]=c[0],m[1]=c[1],m[2]=c[2],h[2].innerHTML=m[2],f.innerText=(0,l.c)(v,"YYYY-MM-DD WW")}}),p.scrollTo({left:g}))})).apply(this,arguments)}function k(){d.setAttribute("displayed","true")}function A(){d.setAttribute("displayed","false")}function x(t){(0,u.c)("RouteCalendar"),k(),function(t){w.apply(this,arguments)}(t),(0,u.b)()}function C(){A(),(0,u.i)(),(0,u.e)("RouteCalendar")}},4373(t,n,e){e.d(n,{a:()=>T,b:()=>x,c:()=>C,d:()=>D,e:()=>A});var a=e(467),i=e(4293),o=e(6788),r=e(8621),c=e(3459),l=e(8179),u=e(8024),d=e(9469),s=e(251),f=e(4537),p=e(904),h={},v=!1,b=!1,m=(0,l.c)(".k"),g=(0,l.e)(m,".l"),y=(0,l.e)(g,".m");function $(){var t=(0,l.a)();t.classList.add("n");var n=(0,l.a)();n.classList.add("o"),n.appendChild((0,f.a)()),t.appendChild(n);var e=(0,l.a)();return e.classList.add("p"),t.appendChild(e),t}function w(t,n,e){function a(t,a,i){function o(t,n){var e=(0,l.e)(t,".o");(0,f.c)(e,n.icon)}function r(t,n){(0,l.e)(t,".p").innerText=n.name}function c(t,n){t.onclick=n.action}function d(t,n){t.setAttribute("animation",(0,u.a)(n))}function s(t,n){t.setAttribute("skeleton-screen",(0,u.a)(n))}null==i?(o(t,a),r(t,a),c(t,a),d(t,e),s(t,n)):(i.key!==a.key&&(o(t,a),r(t,a),c(t,a)),e!==v&&d(t,e),n!==b&&s(t,n))}var i=t.actions,o=t.actionsQuantity,r=Array.from((0,l.d)(y,".n")),c=r.length;if(o!==c){var d=c-o;if(d<0){for(var s=new DocumentFragment,p=0;p>d;p--){var m=$();s.appendChild(m),r.push(m)}y.append(s)}else if(d>0)for(var g=c-1,w=c-d-1;g>w;g--)r[g].remove(),r.splice(g,1)}for(var k=0;k<o;k++){var A=r[k],x=i[k];if((0,u.f)(h,"actions"))if(h.actions[k])a(A,x,h.actions[k]);else a(A,x,null);else a(A,x,null)}h=t,v=e,b=n}function k(){return(k=(0,a.a)(function*(t,n){var e=(0,c.b)("playing_animation"),a=(0,u.c)();!function(){for(var t=(0,c.b)("playing_animation"),n=[],e=0;e<4;e++)n.push({name:"",icon:"",key:`action-${e}`,action:function(){}});w({actions:n,actionsQuantity:4,RouteID:0},!0,t)}(),w(yield(0,r.a)(t,n,a),!1,e)})).apply(this,arguments)}function A(){m.setAttribute("displayed","true")}function x(){m.setAttribute("displayed","false")}function C(t,n){(0,p.c)("RouteDetails"),A(),function(t,n){k.apply(this,arguments)}(t,n),(0,p.b)()}function T(){x(),(0,p.i)(),(0,p.e)("RouteDetails")}function D(t){return L.apply(this,arguments)}function L(){return(L=(0,a.a)(function*(t){var n=(0,u.c)(),e=yield(0,i.a)(n,!0);(0,o.a)(n),(0,o.b)(n);var a=`r_${t}`;if((0,u.f)(e,a)){var r=e[a],c=(0,d.a)(0,{id:t,name:r.n});(0,s.b)(r.n,c)}})).apply(this,arguments)}},3041(t,n,e){e.d(n,{a:()=>k,b:()=>$,c:()=>w,d:()=>y});var a=e(9566),i=e(8179),o=e(8024),r=e(6052),c=e(4537),l=e(904),u=e(9119),d=(0,i.c)(".q"),s=(0,i.e)(d,".r"),f=(0,i.e)(s,".s"),p=(0,i.e)(d,".t"),h=(0,i.e)(p,".u"),v="已儲存至資料夾",b="無法儲存";function m(t,n,e,r){var l=(0,i.a)();l.classList.add("v");var d=(0,i.a)();d.classList.add("w");var s=document.createElement("span");s.appendChild((0,c.b)(t.icon)),d.appendChild(s);var f=(0,i.a)();switch(f.classList.add("x"),f.innerText=t.name,l.appendChild(d),l.appendChild(f),n){case"stop":l.onclick=function(){(0,a.n)(t.id,e[0],e[1]).then(function(t){t?(0,a.e)("stop",e[0]).then(function(t){t&&(null!=r&&r.setAttribute("highlighted",(0,o.a)(t)),(0,u.a)("folder",v),k())}):(0,u.a)("warning",b)})};break;case"route":l.onclick=function(){(0,a.m)(t.id,e[0]).then(function(t){t?(0,a.e)("route",e[0]).then(function(t){t&&(null!=r&&r.setAttribute("highlighted",(0,o.a)(t)),(0,u.a)("folder",v),k())}):(0,u.a)("warning",b)})};break;case"location":l.onclick=function(){(0,a.l)(t.id,e[0]).then(function(t){t?(0,a.e)("location",e[0]).then(function(t){t&&(null!=r&&r.setAttribute("highlighted",(0,o.a)(t)),(0,u.a)("folder",v),k())}):(0,u.a)("warning",b)})}}return l}function g(t,n,e){h.onclick=function(){(0,r.c)(function(){g(t,n,e)})};var i=(0,a.j)();f.innerHTML="";var o=new DocumentFragment;for(var c of i){var l=m(c,t,n,e);o.appendChild(l)}f.append(o)}function y(){d.setAttribute("displayed","true")}function $(){d.setAttribute("displayed","false")}function w(t,n,e){(0,l.c)("SaveToFolder"),y(),g(t,n,e),(0,l.b)()}function k(){$(),(0,l.i)(),(0,l.e)("SaveToFolder")}},752(t,n,e){e.d(n,{a:()=>v,b:()=>p,c:()=>h,d:()=>f});var a=e(3422),i=e(8179),o=e(4537),r=e(904),c=e(9119),l=(0,i.c)(".y"),u=(0,i.e)(l,".z"),d=(0,i.e)(u,"._");function s(t,n,e,r,l){var u=(0,i.a)();u.classList.add("aa");var d=(0,i.a)();d.classList.add("ba");var s=document.createElement("span");s.appendChild((0,o.b)(t.icon)),d.appendChild(s);var f=(0,i.a)();f.classList.add("ca"),f.innerText=t.name;var p=t.index;return u.onclick=function(){!function(t,n,e,i,o){(0,c.a)("manufacturing","處理中"),t.setAttribute("enabled","false"),v(),(0,a.m)(n,e,i,o).then(function(n){switch(n){case 0:(0,c.a)("error","設定失敗"),t.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),t.setAttribute("enabled","true"),t.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),t.setAttribute("enabled","true")}})}(n,e,r,l,p)},u.appendChild(d),u.appendChild(f),u}function f(){l.setAttribute("displayed","true")}function p(){l.setAttribute("displayed","false")}function h(t,n,e,i){(0,r.c)("ScheduleNotification"),f(),function(t,n,e,i){d.innerHTML="";var o=new DocumentFragment;for(var r of a.n){var c=s(r,t,n,e,i);o.appendChild(c)}d.append(o)}(t,n,e,i),(0,r.b)()}function v(){p(),(0,r.i)(),(0,r.e)("ScheduleNotification")}},4680(){},7820(){},1580(){},3377(){},9354(){},5328(){},3796(){},1828(){},6597(){},3777(){},9991(){},2421(){},2696(){},5461(){},5392(){},3534(){},6018(){},7225(){},1308(){},7723(){},1603(){},3749(){},7217(){},7287(){}}]);
//# sourceMappingURL=7cf685ec9de1239edf90.js.map