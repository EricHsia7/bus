"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[2231,9607],{972(e,n,t){t.d(n,{L:()=>f,U:()=>y});var r=t(2129),i=t(8024),o=t(9519),a=t(9218),s=t(6788);function u(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return c(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function l(e,n,t,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void t(e)}s.done?n(u):Promise.resolve(u).then(r,i)}var p={},v=!1;function f(){return d.apply(this,arguments)}function d(){var e;return e=function*(){if(!v){var e=(0,i.zx)(),n=yield(0,a.l)(e);(0,s.LQ)(e);var t=n.dictionary.split(","),r=n.symbols,o=[],c={},l=0;for(var f in r){o.push(f);var d,y=u(r[f]);try{for(y.s();!(d=y.n()).done;){var m=`w${d.value}`;c.hasOwnProperty(m)||(c[m]=[]),c[m].push(l)}}catch(e){y.e(e)}finally{y.f()}l++}p={dictionary:t,names:o,wordToSymbols:c},v=!0}},d=function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)})},d.apply(this,arguments)}function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3;if(!v)return[];for(var a=p,s=a.dictionary,u=a.names,c=a.wordToSymbols,l=Math.round(u.length*i),f=Array.from(new Set(e.trim().toLowerCase().split(/[\s_-]+/))),d=f.length,y=new Uint8Array(d),m=new Int16Array(d).fill(-1),h=n;h<d;h++){y[h]=f[h].length;for(var g=0,b=s.length;g<b;g++){var w=(0,o.e)(f[h],s[g]);w<=y[h]&&(y[h]=w,m[h]=g)}}for(var _=[],k=d-1;k>=0;k--)if(!(m[k]<0)){var A=c[`w${m[k]}`]||[];t&&A.length>l||_.push(A)}var S=_.length;if(0===S)return[];_.sort(function(e,n){return e.length-n.length});for(var I=_[0],x=1;x<S;x++)I=(0,r._N)(I,_[x]);for(var $=[],H=0,P=I.length;H<P;H++){for(var O=0,U=d-1;U>=0;U--){if(!(m[U]<0))(c[`w${m[U]}`]||[]).indexOf(I[H])>-1&&(O-=U)}$.push({item:u[I[H]],score:O})}return $.sort(function(e,n){return n.score-e.score}),$}},1238(e,n,t){t.d(n,{Y:()=>s,q:()=>a});var r=t(574),i=t(3459),o={current:-1,permission:{gained:!1,asked:!1},id:0};function a(){!1===o.permission.asked&&!0===(0,i.Js)("display_user_orientation")&&(o.permission.asked=!0,"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(e){"granted"===e&&window.addEventListener("deviceorientation",function(e){e.absolute?o.current=(null==e?void 0:e.alpha)||-1:e.webkitCompassHeading?o.current=e.webkitCompassHeading||-1:o.current=(null==e?void 0:e.alpha)||-1},!0)}).catch(function(e){}):console.log("DeviceOrientation isn't supported."))}function s(){var e=o.current;if(-1===e)return{degree:-1,cardinalDirection:r.AE};var n=e+90;n>360&&(n-=360),n*=Math.PI/180;var t=[Math.cos(n),Math.sin(n)];return{degree:e,cardinalDirection:(0,r.DK)(t)}}},1531(e,n,t){t.d(n,{to:()=>a,uQ:()=>u});var r=t(7183),i=t(3459),o={current:{latitude:0,longitude:0},permission:{gained:!1,asked:!1},id:0};function a(){!1===o.permission.asked&&(0,i.Js)("display_user_location")&&(o.permission.asked=!0,o.id=navigator.geolocation.watchPosition(function(e){o.permission.gained=!0,o.current.latitude=e.coords.latitude,o.current.longitude=e.coords.longitude},function(e){},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0}))}function s(){return o.permission.asked&&o.permission.gained?o.current:o.permission.asked||o.permission.gained?o.permission.asked&&!o.permission.gained?o.current:void 0:(a(),o.current)}function u(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:450,t=s(),i=1/0,o=-1,a=e.length-1;a>0;a--){var u=e[a],c=(0,r.aV)(t.latitude,t.longitude,u.latitude,u.longitude);c<=n&&c<i&&(o=a,i=c)}return o>0?e[o]:null}},3251(e,n,t){t.d(n,{A:()=>v,HL:()=>c,_P:()=>l,iJ:()=>p,kE:()=>u});var r=t(8179);function i(e,n,t,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void t(e)}s.done?n(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){i(a,r,o,s,u,"next",e)}function u(e){i(a,r,o,s,u,"throw",e)}s(void 0)})}}function a(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=new URLSearchParams(window.location.search);t.set("v",e);var r=window.location.pathname+"?"+t.toString();n?window.location.replace(r):history.replaceState(null,"",r)}function s(){return(s=o(function*(){try{var e=yield fetch(`./version.json?_=${(new Date).getTime()}`,{cache:"no-store"});if(!e.ok)throw new Error("Network response was not ok");return e.json()}catch(e){return!1}})).apply(this,arguments)}function u(){return(0,r.bv)('head meta[name="version-hash"]').getAttribute("content")}function c(){return(0,r.bv)('head meta[name="version-branch-name"]').getAttribute("content")}function l(){return`https://github.com/EricHsia7/bus/tree/${(0,r.bv)('head meta[name="version-full-hash"]').getAttribute("content")}`}function p(){return(0,r.bv)('head meta[name="version-time-stamp"]').getAttribute("content")}function v(){return f.apply(this,arguments)}function f(){return f=o(function*(){var e=yield function(){return s.apply(this,arguments)}();return"boolean"==typeof e?!1===e?"fetchError":"unknownError":u()!==e.hash?(a(e.hash,!0),"refreshing"):(a(e.hash,!1),"ok")}),f.apply(this,arguments)}},3459(e,n,t){t.d(n,{Gn:()=>S,Js:()=>H,PL:()=>$,Yq:()=>w,aN:()=>I,cl:()=>k});var r=t(9499),i=t(8379),o=t(2174),a=t(7891),s=t(6104),u=t(6166),c=t(2994),l=t(5579),p=t(77),v=t(4311),f=t(3251);function d(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return y(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw o}}}}function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function m(e,n,t,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void t(e)}s.done?n(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function a(e){m(o,r,i,a,s,"next",e)}function s(e){m(o,r,i,a,s,"throw",e)}a(void 0)})}}var g=["time_formatting_mode","refresh_interval","display_user_location","display_user_orientation","location_labels","proxy","folder","personal_schedule","notification","playing_animation","power_saving","data_usage","storage","persistent_storage","export","import","version","branch","last_update_date","github"],b={time_formatting_mode:{key:"time_formatting_mode",name:"預估時間格式",icon:"glyphs",status:"",action:function(){(0,u.yH)("time_formatting_mode")},type:"select",default_option:0,option:0,options:[{name:`${(0,l.fU)(11,3)}/${(0,l.fU)(61,3)}/${(0,l.fU)(3661,3)}`,value:{type:1,number:3},resourceIntensive:!1,powerSavingAlternative:-1},{name:`${(0,l.fU)(11,2)}/${(0,l.fU)(61,2)}/${(0,l.fU)(3661,2)}`,value:{type:1,number:2},resourceIntensive:!1,powerSavingAlternative:-1},{name:`${(0,l.fU)(11,1)}/${(0,l.fU)(61,1)}/${(0,l.fU)(3661,1)}`,value:{type:1,number:1},resourceIntensive:!1,powerSavingAlternative:-1},{name:`${(0,l.fU)(11,0)}/${(0,l.fU)(61,0)}/${(0,l.fU)(3661,0)}`,value:{type:1,number:0},resourceIntensive:!1,powerSavingAlternative:-1}],description:"在首頁、路線頁面、地點頁面上的預估公車到站時間的顯示格式。"},refresh_interval:{key:"refresh_interval",name:"預估時間更新頻率",icon:"pace",status:"",action:function(){(0,u.yH)("refresh_interval")},type:"select",default_option:0,option:0,options:[{name:"自動",value:{baseInterval:15e3,dynamic:!0,type:3},resourceIntensive:!0,powerSavingAlternative:2},{name:"10秒",value:{baseInterval:1e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:2},{name:"20秒",value:{baseInterval:2e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:3},{name:"30秒",value:{baseInterval:3e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:4},{name:"40秒",value:{baseInterval:4e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:5},{name:"50秒",value:{baseInterval:5e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:6},{name:"60秒",value:{baseInterval:6e4,dynamic:!1,type:3},resourceIntensive:!0,powerSavingAlternative:6}],description:"在首頁、路線頁面、地點頁面上的預估公車到站時間、公車等即時資料更新的頻率。"},display_user_location:{key:"display_user_location",name:"顯示所在位置",icon:"near_me",status:"",action:function(){(0,u.yH)("display_user_location")},type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"是否在路線頁面上標註目前所在位置。若設為開啟，本應用程式將要求位置存取權限。"},display_user_orientation:{key:"display_user_orientation",name:"顯示裝置指向",icon:"explore",status:"",action:function(){(0,u.yH)("display_user_orientation")},type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"是否在地點頁面上顯示裝置所指方向。若設為開啟，本應用程式將要求動作與方向存取權限。"},location_labels:{key:"location_labels",name:"站牌位置標籤",icon:"tag",status:"",action:function(){(0,u.yH)("location_labels")},type:"select",default_option:0,option:0,options:[{name:"行徑方向",value:{type:0,string:"directions"},resourceIntensive:!1,powerSavingAlternative:-1},{name:"地址特徵",value:{type:0,string:"address"},resourceIntensive:!1,powerSavingAlternative:-1},{name:"英文字母",value:{type:0,string:"letters"},resourceIntensive:!1,powerSavingAlternative:-1}],description:"用於區分位於同個地點的不同站牌。行徑方向表示可搭乘路線從本站到下一站的方向（與車流同向）；地址特徵表示不同站牌的地址差異處；英文字母表示按照順序以字母編號。"},proxy:{key:"proxy",name:"網路代理",icon:"router",status:"",action:function(){(0,u.yH)("proxy")},type:"select",default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!1,powerSavingAlternative:-1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}],description:"使用網路代理來擷取資料。"},folder:{key:"folder",name:"資料夾",icon:"folder",status:"",type:"page",action:i.g,description:""},personal_schedule:{key:"personal_schedule",name:"個人化行程",icon:"calendar_view_day",status:"",action:a.z,type:"page",description:""},notification:{key:"notification",name:"通知",icon:"notifications",status:"",action:o.Sv,type:"page",description:""},playing_animation:{key:"playing_animation",name:"動畫",icon:"animation",description:"是否在介面中播放動畫。",status:"",type:"select",action:function(){(0,u.yH)("playing_animation")},default_option:0,option:0,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!0,powerSavingAlternative:1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}]},power_saving:{key:"power_saving",name:"省電模式",icon:"battery_low",description:"暫停使用耗電功能來節省電力。",status:"",type:"select",action:function(){(0,u.yH)("power_saving")},default_option:1,option:1,options:[{name:"開啟",value:{type:2,boolean:!0},resourceIntensive:!1,powerSavingAlternative:-1},{name:"關閉",value:{type:2,boolean:!1},resourceIntensive:!1,powerSavingAlternative:-1}]},data_usage:{key:"data_usage",name:"網路使用量",icon:"bigtop_updates",status:"",type:"page",action:r.k,description:""},storage:{key:"storage",name:"儲存空間",icon:"database",status:"",type:"page",action:c.G,description:""},persistent_storage:{key:"persistent_storage",name:"永久儲存",icon:"storage",status:"",action:s.jk,type:"action",description:"開啟此選項以避免瀏覽器自動刪除重要資料。"},export:{key:"export",name:"匯出資料",icon:"upload",status:"",type:"action",action:s.vv,description:""},import:{key:"import",name:"匯入資料",icon:"download",status:"",type:"action",action:s.rY,description:""},version:{key:"version",name:"版本",icon:"commit",status:"",type:"info",action:s.gE,description:""},branch:{key:"branch",name:"分支",icon:"rebase",status:"",type:"info",action:function(){},description:""},last_update_date:{key:"last_update_date",name:"更新時間",icon:"update",status:"",type:"info",action:function(){},description:""},github:{key:"github",name:"GitHub",icon:"book_2",status:"@EricHsia7/bus",type:"info",action:s.ze,description:""}};function w(){return _.apply(this,arguments)}function _(){return(_=h(function*(){var e,n=d(yield(0,v.Su)(1));try{for(n.s();!(e=n.n()).done;){var t=e.value;if(g.indexOf(t)>-1){var r=yield(0,v.Ct)(1,t);if(null!==r){if("select"===b[t].type){var i=parseInt(r);b[t].option=i}}else"select"===b[t].type&&(b[t].option=b[t].default_option)}}}catch(e){n.e(e)}finally{n.f()}return!0})).apply(this,arguments)}function k(){return A.apply(this,arguments)}function A(){return(A=h(function*(){var e=[];for(var n in b){var t=b[n];switch(t.type){case"select":t.status=t.options[t.option].name;break;case"page":if("notification"===n)t.status=(0,p.hc)()?"已註冊":"未註冊";else t.status="";break;case"action":t.status="","persistent_storage"===n&&(t.status=(yield(0,v.tH)())?"開啟":"關閉");break;case"info":if("version"===n&&(t.status=(0,f.kE)()),"branch"===n&&(t.status=(0,f.HL)()),"last_update_date"===n){var r=new Date((0,f.iJ)());t.status=(0,l.HN)(r)}}e.push(t)}return e})).apply(this,arguments)}function S(){var e=[];for(var n in b)if(g.indexOf(n)>-1&&b.hasOwnProperty(n)&&"select"===b[n].type){var t={key:n,option:b[n].option};e.push(t)}return e}function I(e,n){return x.apply(this,arguments)}function x(){return(x=h(function*(e,n){return!!(g.indexOf(e)>-1&&b.hasOwnProperty(e)&&"select"===b[e].type&&void 0!==b[e].options[n]&&null!==b[e].options[n])&&(yield(0,v.mL)(1,e,n),b[e].option=n,!0)})).apply(this,arguments)}function $(e){if(g.indexOf(e)>-1&&b.hasOwnProperty(e))return b[e]}function H(e){if(g.indexOf(e)>-1&&b.hasOwnProperty(e)){var n=b.power_saving,t=n.options[n.option].value.boolean,r=b[e],i=r.options[r.option];t&&i.resourceIntensive&&(i=r.options[i.powerSavingAlternative]);var o=i.value;switch(o.type){case 0:return o.string;case 1:return o.number;case 2:return o.boolean;case 3:return o;default:return""}}return""}}}]);
//# sourceMappingURL=4bb1166a19d8fa914ddf.js.map