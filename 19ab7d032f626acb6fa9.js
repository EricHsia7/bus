"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[13],{112(){},124(){},245(){},321(){},626(){},969(){},1003(){},1195(){},1351(t,e,i){i.d(e,{a:()=>k,b:()=>L,c:()=>T,d:()=>x});var a=i(467),n=i(8011),r=i(6788),u=i(6983),s=i(3459),d=i(8179),l=i(8024),c=i(9469),o=i(251),p=i(4537),h=i(904),f=i(8279),v={},m=!1,y=!1,b=(0,d.c)(".ch"),g=(0,d.e)(b,".hh"),A=(0,d.e)(g,".ih");function j(){var t=(0,d.a)();t.classList.add("jh");var e=(0,d.a)();e.classList.add("kh"),e.appendChild((0,p.a)()),t.appendChild(e);var i=(0,d.a)();return i.classList.add("lh"),t.appendChild(i),t}function C(t,e,i){function a(t,a,n){function r(t,e){var i=(0,d.e)(t,".kh");(0,p.c)(i,e.icon)}function u(t,e){(0,d.e)(t,".lh").innerText=e.name}function s(t,e){t.onclick=e.action}function c(t,e){t.setAttribute("animation",(0,l.a)(e))}function o(t,e){t.setAttribute("skeleton-screen",(0,l.a)(e))}null==n?(r(t,a),u(t,a),s(t,a),c(t,i),o(t,e)):(n.key!==a.key&&(r(t,a),u(t,a),s(t,a)),i!==m&&c(t,i),e!==y&&o(t,e))}var n=t.actions,r=t.actionsQuantity,u=Array.from((0,d.d)(A,".jh")),s=u.length;if(r!==s){var c=s-r;if(c<0){for(var o=new DocumentFragment,h=0;h>c;h--){var f=j();o.appendChild(f),u.push(f)}A.append(o)}else if(c>0)for(var b=s-1,g=s-c-1;b>g;b--)u[b].remove(),u.splice(b,1)}for(var C=0;C<r;C++){var _=u[C],L=n[C];if((0,l.e)(v,"actions"))if(v.actions[C])a(_,L,v.actions[C]);else a(_,L,null);else a(_,L,null)}v=t,m=i,y=e}function _(){return(_=(0,a.a)(function*(t){var e=(0,s.b)("playing_animation"),i=(0,l.c)();C(yield(0,u.a)(t,i),!1,e)})).apply(this,arguments)}function L(t){(0,h.d)("LocationDetails"),b.setAttribute("displayed","true"),function(){for(var t=(0,s.b)("playing_animation"),e=[],i=0;i<3;i++)e.push({name:"",icon:"",key:`action-${i}`,action:function(){}});C({actions:e,actionsQuantity:3,hash:""},!0,t)}(),function(t){_.apply(this,arguments)}(t)}function k(){(0,h.f)("LocationDetails"),b.setAttribute("displayed","false")}function T(t){return w.apply(this,arguments)}function w(){return(w=(0,a.a)(function*(t){var e=(0,l.c)(),i=yield(0,n.a)(e,1);(0,r.a)(e),(0,r.b)(e);var a=`ml_${t}`;if((0,l.e)(i,a)){var u=i[a],s=(0,c.a)(1,{hash:t});(0,o.b)(u.n,s)}})).apply(this,arguments)}function x(t){return M.apply(this,arguments)}function M(){return(M=(0,a.a)(function*(t){var e=(0,l.c)(),i=yield(0,n.a)(e,1);(0,r.a)(e),(0,r.b)(e);var a=`ml_${t}`;if((0,l.e)(i,a)){var u=(0,c.a)(1,{hash:t});(0,f.b)(u)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(t,e,i){i.d(e,{a:()=>R,b:()=>H});var a=i(467),n=i(5767),r=i(365),u=i(3422),s=i(3459),d=i(8179),l=i(8024),c=i(4537),o=i(904),p=i(9119),h=(0,d.c)(".vi"),f=(0,d.e)(h,".yi"),v=(0,d.e)(f,".bj"),m=(0,d.e)(v,".cj"),y=(0,d.e)(h,".ej"),b=(0,d.e)(y,".fj"),g={},A=!1,j=15e3,C=5e3,_=15e3,L=!0,k=0,T=0,w="",x=!1,M=!1,S=!1;function I(t){var e=t;if(x){var i=e.detail.progress-1;m.style.setProperty("--wi",i.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,I)}function $(){var t=(0,d.a)();t.classList.add("gj");var e=(0,d.a)();e.classList.add("hj"),t.appendChild(e);var i=(0,d.a)();i.classList.add("ij");var a=(0,d.a)();a.classList.add("jj"),i.appendChild(a);var n=(0,d.a)();n.classList.add("kj"),i.appendChild(n);var r=(0,d.a)();r.classList.add("lj"),i.appendChild(r);var u=(0,d.a)();u.classList.add("mj");var s=document.createElement("span");return s.appendChild((0,c.b)("close")),u.appendChild(s),i.appendChild(u),t.appendChild(i),t}function D(t,e,i){function a(t,a,n){function r(t,e){(0,d.e)(t,".hj").innerText=e.hours}function u(t,e){var i=(0,d.e)(t,".ij");(0,d.e)(i,".jj").innerText=e.minutes}function s(t,e){var i=(0,d.e)(t,".ij");(0,d.e)(i,".lj").innerText=e.name}function c(t,e){var i=(0,d.e)(t,".ij");(0,d.e)(i,".kj").innerText=`${e.route.name} - 往${e.route.direction}`}function o(t,e){var i=(0,d.e)(t,".ij");(0,d.e)(i,".mj").onclick=function(){!function(t,e){U.apply(this,arguments)}(t,e.schedule_id)}}function p(t,e){t.setAttribute("first",(0,l.a)(e.is_first))}function h(t,e){t.setAttribute("animation",(0,l.a)(e))}function f(t,e){t.setAttribute("skeleton-screen",(0,l.a)(e))}null==n?(r(t,a),u(t,a),s(t,a),c(t,a),o(t,a),p(t,a),h(t,i),f(t,e)):(a.hours!==n.hours&&r(t,a),a.minutes!==n.minutes&&u(t,a),(0,l.b)(n.schedule_id,a.schedule_id)||(s(t,a),c(t,a),o(t,a)),n.is_first!==a.is_first&&p(t,a),false!==i&&h(t,i),A!==e&&f(t,e))}var n=t.itemQuantity,r=t.items,u=Array.from((0,d.d)(b,".gj")),s=u.length;if(n!==s){var c=s-n;if(c<0){for(var o=new DocumentFragment,p=0;p>c;p--){var h=$();o.appendChild(h),u.push(h)}b.append(o)}else if(c>0)for(var f=s-1,v=s-c-1;f>v;f--)u[f].remove(),u.splice(f,1)}for(var m=0;m<n;m++){var y=u[m],j=r[m];if((0,l.e)(g,"items"))if(g.items[m])a(y,j,g.items[m]);else a(y,j,null);else a(y,j,null)}g=t,A=e}function E(){return P.apply(this,arguments)}function P(){return(P=(0,a.a)(function*(){var t=(0,s.b)("playing_animation"),e=(0,s.b)("refresh_interval");L=e.dynamic,j=e.baseInterval,x=!0,w=(0,l.c)(),m.setAttribute("refreshing","true"),m.classList.remove("dj"),document.addEventListener(w,I);var i=yield(0,u.h)(w);D(i,!1,t);var a=0;L&&(a=yield(0,n.c)()),k=(new Date).getTime(),T=L?Math.max(k+C,i.dataUpdateTime+j/a):k+j,_=Math.max(C,T-k),x=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--xi",`${_}ms`),m.classList.add("dj")})).apply(this,arguments)}function Q(){return F.apply(this,arguments)}function F(){return(F=(0,a.a)(function*(){E().then(function(){M?setTimeout(function(){Q()},Math.max(C,T-(new Date).getTime())):S=!1}).catch(function(t){M?setTimeout(function(){Q()},1e4):S=!1})})).apply(this,arguments)}function H(){(0,o.d)("NotificationScheduleManager"),h.setAttribute("displayed","true"),function(){for(var t=(0,s.b)("playing_animation"),e=(0,o.e)("window"),i=(e.width,e.height),a=Math.floor(i/50)+5,n=[],r=0;r<a;r++)n.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});D({items:n,itemQuantity:a,dataUpdateTime:0},!0,t)}(),M||(M=!0,S?E():(S=!0,Q())),(0,o.a)()}function R(){h.setAttribute("displayed","false"),M=!1,(0,o.c)()}function U(){return(U=(0,a.a)(function*(t,e){if((0,p.a)("manufacturing","處理中"),yield(0,r.a)(e)){if(t.remove(),(0,p.a)("check_circle","已取消通知"),!x){var i=(0,s.b)("playing_animation");D(yield(0,u.h)(w),!1,i)}}else(0,p.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(t,e,i){i.d(e,{a:()=>L,b:()=>_,c:()=>A,d:()=>k});var a=i(3453),n=i(467),r=i(5352),u=i(8179),s=i(5579),d=i(904),l=i(9119),c=(0,u.c)(".ii"),o=(0,u.e)(c,".ni"),p=(0,u.e)(c,".ji"),h=(0,u.e)(p,".ki"),f=(0,u.e)(o,".oi"),v=(0,u.e)(f,'.pi[group="schedule-name"] .ti input'),m=(0,u.e)(f,'.pi[group="schedule-start-time"] .ti input'),y=(0,u.e)(f,'.pi[group="schedule-end-time"] .ti input'),b=(0,u.e)(f,'.pi[group="schedule-days"] .ti'),g=(0,u.d)(b,".ui");function A(t){return j.apply(this,arguments)}function j(){return(j=(0,n.a)(function*(t){for(var e=v.value,i=m.value,n=y.value,u=String(i).split(":").map(function(t){return parseInt(t)}),s=(0,a.a)(u,2),d=s[0],c=s[1],o=String(n).split(":").map(function(t){return parseInt(t)}),p=(0,a.a)(o,2),h=p[0],f=p[1],b=[],A=0;A<7;A++){var j=g[A],C=j.getAttribute("highlighted"),_=parseInt(j.getAttribute("day"));"true"===C&&b.push(_)}var k=yield(0,r.b)(t);k.name=e,k.days=b,k.period.start.hours=d,k.period.start.minutes=c,k.period.end.hours=h,k.period.end.minutes=f,yield(0,r.e)(k),(0,l.a)("check_circle","已儲存變更"),L()})).apply(this,arguments)}function C(){return(C=(0,n.a)(function*(t){var e=yield(0,r.b)(t);v.value=e.name,m.value=(0,s.i)(e.period.start),y.value=(0,s.i)(e.period.end);for(var i=0;i<7;i++){var a=g[i];e.days.indexOf(i)>-1?a.setAttribute("highlighted","true"):a.setAttribute("highlighted","false")}h.onclick=function(){A(t)}})).apply(this,arguments)}function _(t){(0,d.d)("PersonalScheduleEditor"),c.setAttribute("displayed","true"),function(t){C.apply(this,arguments)}(t),(0,d.a)()}function L(){c.setAttribute("displayed","false"),(0,d.c)()}function k(t){var e=(0,u.e)(b,`.ui[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(t,e,i){i.d(e,{a:()=>v,b:()=>f});var a=i(467),n=i(5352),r=i(8179),u=i(4537),s=i(904),d=i(5693),l=(0,r.c)(".mh"),c=(0,r.e)(l,".rh"),o=(0,r.e)(c,".sh");function p(t){var e=(0,r.a)();e.classList.add("th"),e.onclick=function(){(0,d.b)(t.id)};var i=(0,r.a)();i.classList.add("uh"),i.innerText=t.name,e.appendChild(i);var a=(0,r.a)();a.classList.add("vh");var n=document.createElement("span");return n.appendChild((0,u.b)("arrow_forward_ios")),a.appendChild(n),e.appendChild(a),e}function h(){return(h=(0,a.a)(function*(){o.innerHTML="";var t=yield(0,n.d)(),e=new DocumentFragment;for(var i of t){var a=p(i);e.appendChild(a)}o.append(e)})).apply(this,arguments)}function f(){(0,s.d)("PersonalScheduleManager"),l.setAttribute("displayed","true"),function(){h.apply(this,arguments)}()}function v(){(0,s.f)("PersonalScheduleManager"),l.setAttribute("displayed","false")}},7943(){},8279(t,e,i){i.d(e,{a:()=>l,b:()=>d});var a=i(8179),n=i(2648),r=i(904),u=(0,a.c)(".uj"),s=(0,a.e)(u,".zj");function d(t){(0,r.d)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,n.a)(t,"M",.5,.3,1,"var(--a)",4);s.innerHTML=e}(t)}function l(){(0,r.f)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,i){i.d(e,{a:()=>b,b:()=>m,c:()=>y,d:()=>g});var a=i(3453),n=i(5352),r=i(8179),u=i(904),s=i(9119),d=(0,r.c)(".wh"),l=(0,r.e)(d,".ai"),c=(0,r.e)(l,".bi"),o=(0,r.e)(c,'.ci[group="schedule-name"] .gi input'),p=(0,r.e)(c,'.ci[group="schedule-start-time"] .gi input'),h=(0,r.e)(c,'.ci[group="schedule-end-time"] .gi input'),f=(0,r.e)(c,'.ci[group="schedule-days"] .gi'),v=(0,r.d)(f,".hi");function m(){for(var t=o.value,e=p.value,i=h.value,r=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,a.a)(r,2),d=u[0],l=u[1],c=String(i).split(":").map(function(t){return parseInt(t)}),f=(0,a.a)(c,2),m=f[0],y=f[1],g=[],A=0;A<7;A++){var j=v[A],C=j.getAttribute("highlighted"),_=parseInt(j.getAttribute("day"));"true"===C&&g.push(_)}(0,n.a)(t,d,l,m,y,g).then(function(t){t?(b(),(0,s.a)("calendar_view_day","已建立個人化行程")):(0,s.a)("error","無法建立個人化行程")})}function y(){(0,u.d)("PersonalScheduleCreator"),d.setAttribute("displayed","true"),(0,u.a)()}function b(){d.setAttribute("displayed","false"),(0,u.c)()}function g(t){var e=(0,r.e)(f,`.hi[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},8558(){},8969(){},9119(t,e,i){i.d(e,{a:()=>d});var a=i(2284),n=i(3459),r=i(8179),u=i(8024),s=i(4537);function d(t,e,i){var d=(0,r.b)("._j");if(null!==d)for(var l of d)l.remove();var c=(0,n.b)("playing_animation"),o=(0,r.a)();o.classList.add("_j"),o.setAttribute("animation",(0,u.a)(c));var p=(0,r.a)();p.classList.add("ak"),p.appendChild((0,s.b)(t)),o.appendChild(p);var h=(0,r.a)();if(h.classList.add("bk"),h.innerText=e,o.appendChild(h),"object"===(0,a.a)(i)&&null!=i&&"function"==typeof(null==i?void 0:i.action)){var f=(0,r.a)();f.classList.add("ck"),f.innerText=i.text,f.addEventListener("click",function(){i.action()},{once:!0}),o.appendChild(f),o.setAttribute("button","true")}o.addEventListener("animationend",function(t){null!=t&&t.target&&t.target.remove()},{once:!0}),document.body.appendChild(o)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=19ab7d032f626acb6fa9.js.map