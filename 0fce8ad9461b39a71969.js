"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[7537],{6597(){},11308(){},12421(){},12696(){},15392(){},15995(){},16388(){},17225(){},21102(){},21511(){},25228(){},27908(e,t,a){a.d(t,{a:()=>g,b:()=>h,c:()=>b});var n=a(10467),i=a(23937),r=a(23422),o=a(38179),c=a(98024),d=a(30904),l=a(59119),u=(0,o.c)(".f"),s=(0,o.e)(u,".g"),f=(0,o.e)(s,".h"),p=(0,o.e)(f,'.i[group="provider"] .j input'),v=(0,o.e)(f,'.i[group="registration-key"] .j input');function h(){(0,d.d)("RegisterNotification"),u.setAttribute("displayed","true"),p.value=(0,r.f)(),v.value="",(0,d.a)()}function g(){u.setAttribute("displayed","false"),(0,d.c)()}function b(){return m.apply(this,arguments)}function m(){return(m=(0,n.a)(function*(){(0,l.a)("manufacturing","處理中");var e=p.value,t=v.value;if((0,c.g)(e))return(0,r.p)(e),(yield(0,i.a)(t))?void(0,l.a)("check_circle","註冊成功"):void(0,l.a)("error","註冊失敗");(0,l.a)("error","無效的提供者")})).apply(this,arguments)}},29991(){},31603(){},39598(){},41743(){},43534(){},45286(e,t,a){a.d(t,{a:()=>z,b:()=>G,c:()=>O,d:()=>K,e:()=>W,f:()=>V});var n=a(10467),i=(a(23792),a(47764),a(62953),a(89566)),r=a(28621),o=a(43459),c=a(38179),d=a(98024),l=a(30904),u=a(83041),s=a(88134),f=a(69469),p=a(59119),v=a(28279);function h(){return(h=(0,n.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});navigator.share&&navigator.share({title:t.n,url:a}).then(function(){(0,p.a)("check_circle","已分享路線")}).catch(function(e){(0,p.a)("cancel","已取消分享")})}})).apply(this,arguments)}function g(){return(g=(0,n.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,v.b)(a)}})).apply(this,arguments)}a(76918),a(23418),a(44114),a(54554),a(23288),a(62010),a(26099),a(38781),a(68156);var b=a(47968),m=a(46141),y='"Noto Sans TC", sans-serif',k=(0,l.e)("route-details-canvas"),w=k.width,A=k.height,C=Math.min(window.devicePixelRatio,1.875)||1,D={};function x(){var e=(0,c.a)();return e.classList.add("k"),e}function _(){var e=(0,c.a)();e.classList.add("l");var t=document.createElement("canvas");return t.classList.add("m"),e.appendChild(t),e}function T(e,t,a,n,i,r){e.innerText=t.name,e.setAttribute("day",r.toString()),e.onclick=function(){!function(e){for(var t=(0,o.b)("playing_animation"),a=(0,c.d)(z,".k"),n=(0,c.d)(G,".l"),i=0;i<7;i++){var r,d,l=a[i],u=n[i],s=`d_${i}`,f=null===(r=D)||void 0===r?void 0:r.calendarEventGroups[s],p=null===(d=D)||void 0===d?void 0:d.calendarDays[s];if(f&&p){var v=(0,m.a)("--c"),h=(0,m.a)("--d"),g=(0,m.a)("--e"),b=(0,m.a)("--n"),y=(0,m.a)("--b"),k=(0,m.a)("--o");T(l,p,e,!1,t,i),L(u,f,e,y,v,h,g,b,k,i)}}}(r)},e.setAttribute("highlighted",a===r?"true":"false"),e.setAttribute("animation",(0,d.a)(i)),e.setAttribute("skeleton-screen",(0,d.a)(n))}function L(e,t,a,n,i,r,o,u,s,f){function p(e,t,a){var n=70*t;e.fillStyle=a,e.fillRect(45,n+5,w-45,1.2),e.font=`400 12px ${y}`,e.textBaseline="top";var i=`${String(t).padStart(2,"0")}:00`,r=e.measureText(i),o=r.width,c=r.actualBoundingBoxDescent;e.fillText(i,(45-o)/2,n+(10-c)/2,o)}function v(e,t,a,n,i,r,o){var c=new Date;c.setDate(1),c.setMonth(0),c.setFullYear(t.date.getFullYear()),c.setMonth(t.date.getMonth()),c.setDate(t.date.getDate()),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var d=(t.date.getTime()-c.getTime())/864e5*24*70,l=w-45,u=60*t.duration*1e3/864e5*24*70;(0,b.a)(e,45,d,l,u,3,`rgba(${n}, ${i}, ${r}, ${o})`),(0,b.a)(e,45,d,3,u,{tl:3,tr:0,bl:3,br:0},a),e.font=`400 14px ${y}`,e.textBaseline="top",e.fillStyle=a;var s=t.dateString,f=e.measureText(s),p=f.width,v=f.actualBoundingBoxDescent;e.fillText(s,53,d+(u-v)/2,p)}var h=(0,c.e)(e,".m"),g=h.getContext("2d");if(function(e,t,a){var n=t===a;e.setAttribute("displayed",(0,d.a)(n))}(e,a,f),function(e){k=(0,l.e)("route-details-canvas"),w=k.width,A=k.height,C=Math.min(window.devicePixelRatio,1.875)||1,e.width=w*C,e.height=A*C;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(C,C)}(h),a===f){g.clearRect(0,0,w,A);for(var m=0;m<24;m++)p(g,m,s);for(var D of t)v(g,D,n,i,r,o,u)}else g.clearRect(0,0,w,A)}function S(e,t,a){var n=(new Date).getDay(),i=(0,m.a)("--c"),r=(0,m.a)("--d"),o=(0,m.a)("--e"),d=(0,m.a)("--n"),l=(0,m.a)("--b"),u=(0,m.a)("--o"),s=e.calendarDays,f=e.calendarDayQuantity,p=e.calendarEventGroups,v=(e.calendarEventQuantity,Array.from((0,c.d)(G,".l"))),h=Array.from((0,c.d)(z,".k")),g=v.length;if(f!==g){var b=g-f;if(b<0){for(var y=new DocumentFragment,k=new DocumentFragment,w=0;w>b;w--){var A=x();y.appendChild(A),h.push(A);var C=_();k.appendChild(C),v.push(C)}z.append(y),G.append(k)}else if(b>0)for(var S=g-1,M=g-b-1;S>M;S--)h[S].remove(),h.splice(S,1),v[S].remove(),v.splice(S,1)}for(var $=0;$<f;$++){var F=`d_${$}`,E=s[F],R=p[F],B=h[$],j=v[$];T(B,E,n,t,a,$),L(j,R,n,l,i,r,o,d,u,$)}D=e}var M=a(54537),$=[],F=!1,E=!1;function R(){var e=(0,c.a)();e.classList.add("p");var t=(0,c.a)();t.classList.add("q"),t.appendChild((0,M.a)()),e.appendChild(t);var a=(0,c.a)();return a.classList.add("r"),e.appendChild(a),e}function B(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.e)(e,".q");(0,M.c)(a,t.icon)}function o(e,t){(0,c.e)(e,".r").innerText=t.value}function l(e,t){e.setAttribute("animation",(0,d.a)(t))}function u(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}null==i?(r(e,n),o(e,n),l(e,a),u(e,t)):((0,d.b)(i,n)||r(e,n),(0,d.b)(i,n)||o(e,n),F!==a&&l(e,a),E!==t&&u(e,t))}var i=e.length;t!==E&&K.setAttribute("skeleton-screen",(0,d.a)(t));var r=Array.from((0,c.d)(O,".p")),o=r.length;if(i!==o){var l=o-i;if(l<0){for(var u=new DocumentFragment,s=0;s>l;s--){var f=R();u.appendChild(f),r.push(f)}O.append(u)}else if(l>0)for(var p=o-1,v=o-l-1;p>v;p--)r[p].remove(),r.splice(p,1)}for(var h=0;h<i;h++){var g=r[h],b=e[h];0===$.length?n(g,b,null):n(g,b,$[h])}$=e,F=a,E=t}var j=(0,c.c)(".s"),H=(0,c.e)(j,".t"),N=(0,c.e)(H,".u"),Q=(0,c.e)(N,'.v[group="calendar"]'),q=(0,c.e)(Q,".w"),z=(0,c.e)(q,".x"),G=(0,c.e)(q,".y"),P=(0,c.e)(j,'.t .u .v[group="actions"]'),Y=(0,c.e)(P,'.w .z[action="save-to-folder"]'),I=(0,c.e)(P,'.w .z[action="get-permalink"]'),J=(0,c.e)(P,'.w .z[action="show-permalink-qrcode"]'),K=(0,c.e)(N,'.v[group="properties"]'),O=(0,c.e)(K,".w");function U(){return U=(0,n.a)(function*(e,t){var a=(0,o.b)("playing_animation"),n=yield(0,i.e)("route",e);Y.setAttribute("animation",(0,d.a)(a)),Y.setAttribute("highlighted",(0,d.a)(n)),Y.onclick=function(){(0,u.b)("route",[e],Y)},I.setAttribute("animation",(0,d.a)(a)),I.onclick=function(){!function(e){h.apply(this,arguments)}(e)},J.setAttribute("animation",(0,d.a)(a)),J.onclick=function(){!function(e){g.apply(this,arguments)}(e)},function(){for(var e=(0,o.b)("playing_animation"),t=[],a=0;a<5;a++)t.push({key:a,icon:"none",value:""});B(t,!0,e)}(),function(){for(var e=(0,o.b)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},a={},n={},i=0;i<7;i++){var r=`d_${i}`;a[r]=[],n[r]={day:i,code:"d_{i}",name:""};for(var c=0;c<t[r];c++){var d=new Date;d.setHours(0),d.setMinutes(30*c),d.setSeconds(0),d.setMilliseconds(0),a[r].push({date:d,dateString:"",duration:15})}}S({calendarEventGroups:a,calendarDays:n,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var c=(0,d.c)(),l=yield(0,r.a)(e,t,c);B(l.properties,!1,a),S(l.calendar,!1,a)}),U.apply(this,arguments)}function V(e,t){(0,l.d)("RouteDetails"),j.setAttribute("displayed","true"),function(e,t){U.apply(this,arguments)}(e,t)}function W(){(0,l.f)("RouteDetails"),j.setAttribute("displayed","false");var e=(0,c.d)(G,".l");for(var t of e)t.remove();var a=(0,c.d)(z,".k");for(var n of a)n.remove()}},46018(){},57287(){},64305(){},68983(){},71078(){},81306(){},83041(e,t,a){a.d(t,{a:()=>g,b:()=>h});a(23792),a(62010),a(47764),a(62953);var n=a(89566),i=a(38179),r=a(98024),o=a(54537),c=a(30904),d=a(59119),l=(0,i.c)("._"),u=(0,i.e)(l,".aa"),s=(0,i.e)(u,".ba"),f="已儲存至資料夾",p="無法儲存";function v(e,t,a,c){var l=(0,i.a)();l.classList.add("ca");var u=(0,i.a)();u.classList.add("da");var s=document.createElement("span");s.appendChild((0,o.b)(e.icon)),u.appendChild(s);var v=(0,i.a)();switch(v.classList.add("ea"),v.innerText=e.name,l.appendChild(u),l.appendChild(v),t){case"stop":l.onclick=function(){(0,n.n)(e.id,a[0],a[1]).then(function(e){e?(0,n.e)("stop",a[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,d.a)("folder",f),g())}):(0,d.a)("warning",p)})};break;case"route":l.onclick=function(){(0,n.m)(e.id,a[0]).then(function(e){e?(0,n.e)("route",a[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,d.a)("folder",f),g())}):(0,d.a)("warning",p)})};break;case"location":l.onclick=function(){(0,n.l)(e.id,a[0]).then(function(e){e?(0,n.e)("location",a[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,d.a)("folder",f),g())}):(0,d.a)("warning",p)})}}return l}function h(e,t,a){(0,c.d)("SaveToFolder"),l.setAttribute("displayed","true"),function(e,t,a){var i=(0,n.j)();s.innerHTML="";var r=new DocumentFragment;for(var o of i){var c=v(o,e,t,a);r.appendChild(c)}s.append(r)}(e,t,a)}function g(){(0,c.f)("SaveToFolder"),l.setAttribute("displayed","false")}},83127(){},83749(){},83777(){},85461(){},87723(){},90752(e,t,a){a.d(t,{a:()=>p,b:()=>f});a(23792),a(62010),a(47764),a(62953);var n=a(23422),i=a(38179),r=a(54537),o=a(30904),c=a(59119),d=(0,i.c)(".fa"),l=(0,i.e)(d,".ga"),u=(0,i.e)(l,".ha");function s(e,t,a,o,d){var l=(0,i.a)();l.classList.add("ia");var u=(0,i.a)();u.classList.add("ja");var s=document.createElement("span");s.appendChild((0,r.b)(e.icon)),u.appendChild(s);var f=(0,i.a)();f.classList.add("ka"),f.innerText=e.name;var v=e.index;return l.onclick=function(){!function(e,t,a,i,r){(0,c.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),p(),(0,n.m)(t,a,i,r).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,a,o,d,v)},l.appendChild(u),l.appendChild(f),l}function f(e,t,a,i){(0,o.d)("ScheduleNotification"),d.setAttribute("displayed","true"),function(e,t,a,i){u.innerHTML="";var r=new DocumentFragment;for(var o of n.n){var c=s(o,e,t,a,i);r.appendChild(c)}u.append(r)}(e,t,a,i)}function p(){(0,o.f)("ScheduleNotification"),d.setAttribute("displayed","false")}},93058(){},97868(){}}]);
//# sourceMappingURL=0fce8ad9461b39a71969.js.map