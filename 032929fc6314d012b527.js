!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():e.bus=r()}(self,()=>(()=>{"use strict";var e,r,t={1257(e,r,t){var a=t(3453);t(23792),t(44114),t(47764),t(62953),t(13611),t(16280),t(76918),t(23418),t(62062),t(72712),t(54743),t(11745),t(38309),t(16573),t(78100),t(77936),t(18111),t(61701),t(18237),t(39469),t(26099),t(34594),t(48140),t(81630),t(72170),t(75044),t(69539),t(31694),t(89955),t(21903),t(91134),t(33206),t(44496),t(66651),t(12887),t(19369),t(66812),t(8995),t(31575),t(36072),t(88747),t(28845),t(29423),t(57301),t(373),t(86614),t(41405),t(37467),t(44732),t(33684),t(79577);t(28706),t(48598),t(34782);function n(e,r,t){var a=t[0]-r[0],n=t[1]-r[1],o=a*a+n*n,s=((e[0]-r[0])*a+(e[1]-r[1])*n)/o;if(s<0)a=e[0]-r[0],n=e[1]-r[1];else if(s>1)a=e[0]-t[0],n=e[1]-t[1];else{var i=[r[0]+s*a,r[1]+s*n];a=e[0]-i[0],n=e[1]-i[1]}return Math.sqrt(a*a+n*n)}function o(e,r){var t=e.length-1;if(t<2)return e;for(var a=0,s=0,i=1;i<t;i++){var f=n(e[i],e[0],e[t]);f>a&&(s=i,a=f)}if(a>r){var u=e.slice(0,s+1),l=e.slice(s),c=o(u,r),v=o(l,r);return c.pop(),c.concat(v)}return[e[0],e[t]]}t(26910),t(23288),t(9868),t(78459),t(58940),t(27495),t(71761),t(68156),t(25440),t(79978);function s(e,r,t){var a=new Date;return a.setDate(1),a.setMonth(0),a.setFullYear(e),a.setMonth(r-1),a.setDate(t),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}t(60739),t(33110),t(79432),t(3362),t(61740),t(58335),t(3296),t(27208),t(48408),t(14603),t(47566),t(98721);self.onmessage=function(e){var r=function(e){var r=(0,a.a)(e,4),t=r[0],n=r[1],f=r[2],u=r[3],l=t.length,c=[],v=0;for(var d of t)c.push(d.stats.max,d.stats.min),v+=d.stats.sum;for(var p=function(e){var r=e.length;if(0===r)return[0,0];for(var t=1/0,a=-1/0,n=r-1;n>=0;n--){var o=e[n];o>a&&(a=o),o<t&&(t=o)}return[t,a]}(c),b=p[1],h=p[0],g=t[0].date,y=t[l-1].date,$=s(g[0],g[1],g[2]),x=s(y[0],y[1],y[2]),m=[],w=0,O=0,j=0;j<l;j++){var k=t[j];if(0!==k.stats.sum)for(var D=k.data,F=0;F<i;F++){w+=D[F];var S=u+(j+F/i)/8*n,M=u+(1-w/v)*f;m.push([S,M]),O=S}else{var P=u+j/8*n,C=u+(j+.9993055555555556)/8*n,N=u+f;m.push([P,N]),m.push([C,N]),O=C}}var J=`<line x1="${u}" y1="${f+u}" x2="${u+n}" y2="${f+u}" stroke="var(--a)" stroke-width="1" />`,L=`<line x1="${u}" y1="${u}" x2="${u}" y2="${f+u}" stroke="var(--a)" stroke-width="1" />`,T=`<text x="${u+n/2}" y="${u+f+u}" text-anchor="middle" font-size="12" fill="var(--a)">時間</text>`,z=`<text x="${u/2}" y="${u+f/2}" text-anchor="middle" font-size="12" fill="var(--a)" transform="rotate(-90, ${.7*u}, ${u+f/2})">累計傳輸量</text>`,A=function(e){var r=e.length-1;if(r<0)return"";for(var t=[`M${e[0][0]} ${e[0][1]}`],a=1;a<r;a++){var n=e[a],o=e[a+1]||n;t.push(`Q${n[0]} ${n[1]} ${(n[0]+o[0])/2} ${(n[1]+o[1])/2}`)}var s=e[r];return t.push(`L${s[0]} ${s[1]}`),t.join(" ")}(o(m,1.1)),B={stats:{max:b,min:h,sum:v},period:{start:$,end:x},chart:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${n+2*u} ${f+2*u}"><defs><linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.3);" /><stop offset="73%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.09);" /><stop offset="100%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0);" /></linearGradient></defs><path d="M${u},${f+u} ${A} L${O},${f+u} L${u},${f+u}" stroke="none" stroke-width="0" fill="url(#grad1)"></path><path d="${A}" fill="none" stroke="var(--b)" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" opacity="1"></path>${J}${L}${T}${z}</svg>`};return B}(e.data);self.postMessage(r)};var i=1440},13611(e,r,t){var a=t(46518),n=t(44576),o=t(62106),s=t(43724),i=TypeError,f=Object.defineProperty,u=n.self!==n;try{if(s){var l=Object.getOwnPropertyDescriptor(n,"self");!u&&l&&l.get&&l.enumerable||o(n,"self",{get:function(){return n},set:function(e){if(this!==n)throw new i("Illegal invocation");f(n,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else a({global:!0,simple:!0,forced:u},{self:n})}catch(e){}},33110(e,r,t){var a=t(46518),n=t(97751),o=t(18745),s=t(69565),i=t(79504),f=t(79039),u=t(34376),l=t(94901),c=t(65810),v=t(10757),d=t(22195),p=t(655),b=t(67680),h=t(616),g=t(33392),y=t(4495),$=t(27819),x=String,m=n("JSON","stringify"),w=i(/./.exec),O=i("".charAt),j=i("".charCodeAt),k=i("".replace),D=i("".slice),F=i([].push),S=i(1.1.toString),M=/[\uD800-\uDFFF]/g,P=/^[\uD800-\uDBFF]$/,C=/^[\uDC00-\uDFFF]$/,N=g(),J=N.length,L=!y||f(function(){var e=n("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))}),T=f(function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")}),z=L?function(e,r){var t=b(arguments),a=B(r);if(l(a)||void 0!==e&&!v(e))return t[1]=function(e,r){if(l(a)&&(r=s(a,this,x(e),r)),!v(r))return r},o(m,null,t)}:m,A=function(e,r,t){var a=O(t,r-1),n=O(t,r+1);return w(P,e)&&!w(C,n)||w(C,e)&&!w(P,a)?"\\u"+S(j(e,0),16):e},B=function(e){if(l(e))return e;if(u(e)){for(var r=e.length,t=[],a=0;a<r;a++){var n=e[a];"string"==typeof n?F(t,n):"number"!=typeof n&&"Number"!==d(n)&&"String"!==d(n)||F(t,p(n))}var o=t.length,s=!0;return function(e,r){if(s)return s=!1,r;if(u(this))return r;for(var a=0;a<o;a++)if(t[a]===e)return r}}};m&&a({target:"JSON",stat:!0,arity:3,forced:L||T||!$},{stringify:function(e,r,t){var a=B(r),n=[],o=z(e,function(e,r){var t=l(a)?s(a,this,x(e),r):r;return!$&&c(t)?N+(F(n,t.rawJSON)-1):t},t);if("string"!=typeof o)return o;if(T&&(o=k(o,M,A)),$)return o;for(var i="",f=o.length,u=0;u<f;u++){var v=O(o,u);if('"'===v){var d=h(o,++u).end-1,p=D(o,u,d);i+=D(p,0,J)===N?n[D(p,J)]:'"'+p+'"',u=d}else i+=v}return i}})},48773(e,r){var t={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,n=a&&!t.call({1:2},1);r.f=n?function(e){var r=a(this,e);return!!r&&r.enumerable}:t}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var o=a[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.m=t,n.x=()=>{var e=n.O(void 0,[333,9735,8738,5149,7425,2944,4631,6760,9652,1433],()=>n(1257));return e=n.O(e)},e=[],n.O=(r,t,a,o)=>{if(!t){var s=1/0;for(l=0;l<e.length;l++){for(var[t,a,o]=e[l],i=!0,f=0;f<t.length;f++)(!1&o||s>=o)&&Object.keys(n.O).every(e=>n.O[e](t[f]))?t.splice(f--,1):(i=!1,o<s&&(s=o));if(i){e.splice(l--,1);var u=a();void 0!==u&&(r=u)}}return r}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[t,a,o]},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((r,t)=>(n.f[t](e,r),r),[])),n.u=e=>({333:"dcb7d670eedfad5c7d21",1433:"632ecd0a4852446d1f96",2944:"30bcb0d7a8edc6266700",4631:"4e85a763949280762c8b",5149:"5ce470ce1b767aa6e156",6760:"f71556e14f80bec7e9e0",7425:"511444c4280df75074e2",8738:"4df2b0d53b7e034cce3e",9165:"032929fc6314d012b527",9652:"f18ef6dc7d67e8a9ced1",9735:"849a20607ace6bfeb56a"}[e]+".js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.p="./",(()=>{n.b=self.location+"";var e={9165:1};n.f.i=(r,t)=>{e[r]||importScripts(n.p+n.u(r))};var r=self.webpackChunkbus=self.webpackChunkbus||[],t=r.push.bind(r);r.push=r=>{var[a,o,s]=r;for(var i in o)n.o(o,i)&&(n.m[i]=o[i]);for(s&&s(n);a.length;)e[a.pop()]=1;t(r)}})(),r=n.x,n.x=()=>Promise.all([333,9735,8738,5149,7425,2944,4631,6760,9652,1433].map(n.e,n)).then(r);var o=n.x();return o=o.default})());
//# sourceMappingURL=032929fc6314d012b527.js.map