"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[7425],{7425(t,r,e){var n=e(3453);function a(t,r,e){var n=e[0]-r[0],a=e[1]-r[1],o=n*n+a*a,s=((t[0]-r[0])*n+(t[1]-r[1])*a)/o;if(s<0)n=t[0]-r[0],a=t[1]-r[1];else if(s>1)n=t[0]-e[0],a=t[1]-e[1];else{var i=[r[0]+s*n,r[1]+s*a];n=t[0]-i[0],a=t[1]-i[1]}return Math.sqrt(n*n+a*a)}function o(t,r){var e=t.length-1;if(e<2)return t;for(var n=0,s=0,i=1;i<e;i++){var l=a(t[i],t[0],t[e]);l>n&&(s=i,n=l)}if(n>r){var u=t.slice(0,s+1),f=t.slice(s),v=o(u,r),c=o(f,r);return v.pop(),v.concat(c)}return[t[0],t[e]]}function s(t,r,e){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(r-1),n.setDate(e),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}e(3790);function i(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return l(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==e.return||e.return()}finally{if(i)throw o}}}}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}self.onmessage=function(t){var r=function(t){var r,e=(0,n.A)(t,4),a=e[0],l=e[1],f=e[2],v=e[3],c=a.length,d=[],h=0,$=i(a);try{for($.s();!(r=$.n()).done;){var p=r.value;d.push(p.stats.max,p.stats.min),h+=p.stats.sum}}catch(t){$.e(t)}finally{$.f()}for(var y=function(t){var r=t.length;if(0===r)return[0,0];for(var e=1/0,n=-1/0,a=r-1;a>=0;a--){var o=t[a];o>n&&(n=o),o<e&&(e=o)}return[e,n]}(d),m=y[1],g=y[0],x=a[0].date,b=a[c-1].date,w=s(x[0],x[1],x[2]),k=s(b[0],b[1],b[2]),M=[],A=0,S=0,j=0;j<c;j++){var C=a[j];if(0!==C.stats.sum)for(var D=C.data,I=0;I<u;I++){A+=D[I];var L=v+(j+I/u)/8*l,z=v+(1-A/h)*f;M.push([L,z]),S=L}else{var G=v+j/8*l,q=v+(j+.9993055555555556)/8*l,B=v+f;M.push([G,B]),M.push([q,B]),S=q}}var E=`<line x1="${v}" y1="${f+v}" x2="${v+l}" y2="${f+v}" stroke="var(--a)" stroke-width="1" />`,F=`<line x1="${v}" y1="${v}" x2="${v}" y2="${f+v}" stroke="var(--a)" stroke-width="1" />`,H=`<text x="${v+l/2}" y="${v+f+v}" text-anchor="middle" font-size="12" fill="var(--a)">時間</text>`,O=`<text x="${v/2}" y="${v+f/2}" text-anchor="middle" font-size="12" fill="var(--a)" transform="rotate(-90, ${.7*v}, ${v+f/2})">累計傳輸量</text>`,Q=function(t){var r=t.length-1;if(r<0)return"";for(var e=[`M${t[0][0]} ${t[0][1]}`],n=1;n<r;n++){var a=t[n],o=t[n+1]||a;e.push(`Q${a[0]} ${a[1]} ${(a[0]+o[0])/2} ${(a[1]+o[1])/2}`)}var s=t[r];return e.push(`L${s[0]} ${s[1]}`),e.join(" ")}(o(M,1.1)),T={stats:{max:m,min:g,sum:h},period:{start:w,end:k},chart:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${l+2*v} ${f+2*v}"><defs><linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.3);" /><stop offset="73%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.09);" /><stop offset="100%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0);" /></linearGradient></defs><path d="M${v},${f+v} ${Q} L${S},${f+v} L${v},${f+v}" stroke="none" stroke-width="0" fill="url(#grad1)"></path><path d="${Q}" fill="none" stroke="var(--b)" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" opacity="1"></path>${E}${F}${H}${O}</svg>`};return T}(t.data);self.postMessage(r)};var u=1440}}]);
//# sourceMappingURL=7425.0e42f3df9337d74eab05.js.map