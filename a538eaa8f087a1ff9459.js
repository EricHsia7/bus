"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[3030,7600],{904(e,t,a){a.d(t,{AE:()=>I,BM:()=>j,WR:()=>b,Z_:()=>k,f1:()=>w,gO:()=>L,kr:()=>y,l$:()=>A,p9:()=>C});var i=a(8179),n=a(8024),r=a(4884),s=a(6052),o=a(9333),d=a(8379),c=a(5693),l=a(7891),u=a(7908),h=a(5009),v=a(6104),p=(0,i.bv)(".bh"),f=(0,i.bv)(".fh"),m=(new Date).getTime(),g=["Home"];function b(e){var t=g.length;g[t-1]!==e&&g.push(e)}function y(e){if(g.indexOf(e)>-1){var t=g.length;g[t-1]===e&&g.pop()}}function k(){var e=g.length;if(e>1)switch(g[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.z1)();break;case"FolderEditor":(0,o.I6)();break;case"FolderManager":(0,d.m)();break;case"Search":(0,h.Bb)();break;case"Settings":(0,v.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.FN)();break;case"RegisterNotification":(0,u.hy)()}}function A(){var e=g.length;if(e>1){var t=g[e-2];switch(g.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.pd)();break;case"FolderEditor":(0,o.uy)();break;case"FolderManager":(0,d.g)();break;case"Search":(0,h.rf)();break;case"Settings":(0,v.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$l)();break;case"RegisterNotification":(0,u.XG)()}}}function j(){var e=0;(0,n.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,i.bv)(".bh svg.ch").style.setProperty("--dh",`${e}px`)}function I(e){function t(){p.classList.add("eh"),p.addEventListener("animationend",function(){p.setAttribute("displayed","false"),p.classList.remove("eh"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-m<100?setTimeout(t,Math.max(1,a-m)):t()}function w(){f.setAttribute("displayed","true")}function L(e){var t=0,a=0,i=window.innerWidth,n=window.innerHeight;switch(e){case"window":t=i,a=n;break;case"head":t=i,a=55;break;case"head-one-button":t=i-55,a=55;break;case"head-two-button":t=i-110,a=55;break;case"route-details-canvas":t=i-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=i-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=i-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function C(){window.scrollTo({top:0,behavior:"instant"})}},1351(e,t,a){a.d(t,{ID:()=>L,co:()=>C,k9:()=>x,qp:()=>S});var i=a(8011),n=a(6788),r=a(6983),s=a(3459),o=a(8179),d=a(8024),c=a(9469),l=a(4537),u=a(904),h=a(9119),v=a(8279);function p(e,t,a,i,n,r,s){try{var o=e[r](s),d=o.value}catch(e){return void a(e)}o.done?t(d):Promise.resolve(d).then(i,n)}function f(e){return function(){var t=this,a=arguments;return new Promise(function(i,n){var r=e.apply(t,a);function s(e){p(r,i,n,s,o,"next",e)}function o(e){p(r,i,n,s,o,"throw",e)}s(void 0)})}}var m={},g=!1,b=!1,y=(0,o.bv)(".mk"),k=(0,o.aI)(y,".rk"),A=(0,o.aI)(k,".sk");function j(){var e=document.createElement("div");e.classList.add("tk");var t=document.createElement("div");t.classList.add("uk"),t.appendChild((0,l.oC)()),e.appendChild(t);var a=document.createElement("div");return a.classList.add("vk"),e.appendChild(a),{element:e,id:""}}function I(e,t,a){function i(e,i,n){function r(e,t){var a=(0,o.aI)(e,".uk");(0,l.yD)(a,t.icon)}function s(e,t){(0,o.aI)(e,".vk").innerText=t.name}function c(e,t){e.onclick=t.action}function u(e,t){e.setAttribute("animation",(0,d.xZ)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,d.xZ)(t))}null==n?(r(e,i),s(e,i),c(e,i),u(e,a),h(e,t)):(n.key!==i.key&&(r(e,i),s(e,i),c(e,i)),a!==g&&u(e,a),t!==b&&h(e,t))}var n=e.actions,r=e.actionsQuantity,s=(0,o.jg)(A,".tk").length;if(r!==s){var c=s-r;if(c<0){for(var u=new DocumentFragment,h=0,v=Math.abs(c);h<v;h++){var p=j();u.appendChild(p.element)}A.append(u)}else for(var f=(0,o.jg)(A,".tk"),y=0,k=Math.abs(c);y<k;y++){f[s-1-y].remove()}}for(var I=(0,o.jg)(A,".tk"),w=0;w<r;w++){var L=I[w],C=n[w];if(m.hasOwnProperty("actions"))if(m.actions[w])i(L,C,m.actions[w]);else i(L,C,null);else i(L,C,null)}m=e,g=a,b=t}function w(){return(w=f(function*(e){var t=(0,s.Js)("playing_animation"),a=(0,d.zx)();I(yield(0,r.v)(e,a),!1,t)})).apply(this,arguments)}function L(e){(0,u.WR)("LocationDetails"),y.setAttribute("displayed","true"),function(){for(var e=(0,s.Js)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});I({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){w.apply(this,arguments)}(e)}function C(){(0,u.kr)("LocationDetails"),y.setAttribute("displayed","false")}function x(e){return E.apply(this,arguments)}function E(){return(E=f(function*(e){var t=(0,d.zx)(),a=yield(0,i.g)(t,1);(0,n.LQ)(t),(0,n.gC)(t);var r=`ml_${e}`;if(a.hasOwnProperty(r)){var s=a[r],o=(0,c.i)(1,{hash:e});navigator.share&&navigator.share({title:s.n,url:o}).then(function(){(0,h.a)("check_circle","已分享地點")}).catch(function(e){(0,h.a)("cancel","已取消分享")})}})).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=f(function*(e){var t=(0,d.zx)(),a=yield(0,i.g)(t,1);(0,n.LQ)(t),(0,n.gC)(t);var r=`ml_${e}`;if(a.hasOwnProperty(r)){var s=(0,c.i)(1,{hash:e});(0,v.X8)(s)}})).apply(this,arguments)}},3030(e,t,a){a.d(t,{eS:()=>ue,s_:()=>V,so:()=>le});var i=a(5767),n=a(9566),r=a(2757),s=a(77),o=a(5314),d=a(3459),c=a(8179),l=a(7968),u=a(8024),h=a(5579),v=a(4537),p=a(904),f=a(9119),m=a(3041),g=a(752),b=a(1351);function y(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return k(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}function A(e,t,a,i,n,r,s){try{var o=e[r](s),d=o.value}catch(e){return void a(e)}o.done?t(d):Promise.resolve(d).then(i,n)}var j=(0,c.bv)(".ih"),I=(0,c.aI)(j,".ph"),w=(0,c.aI)(I,".th"),L=(0,c.aI)(w,"span"),C=(0,c.aI)(I,".sh"),x=(0,c.aI)(j,".di"),E=(0,c.aI)(I,".vh"),S=(0,c.aI)(E,".wh"),T=(0,c.aI)(I,".zh"),_=(0,c.aI)(T,"._h"),$=(0,c.aI)(I,".ai .bi"),M={},P=!1,D=!1,Z=0,N=0,R=0,O={},F=0,H=!1,z=15e3,Q=5e3,B=15e3,W=!0,q=0,J=0,U="",Y=!1,X=!1,G=!1,K="";function V(){x.addEventListener("touchstart",function(){Z=Math.round(x.scrollLeft/F)},{passive:!0}),x.addEventListener("scroll",function(e){H=!0;var t=e.target.scrollLeft/F;N=t>Z?Z+1:Z-1;var a=t-Z,i=Math.abs(a);i>1&&(a>0?(Z=Math.floor(t),N=Z+1):(Z=Math.ceil(t),N=Z-1),i=Math.abs(t-Z));var n=O[`g_${Z}`]||{width:0,offset:0},r=O[`g_${N}`]||{width:0,offset:0},s=n.width+(r.width-n.width)*i,o=-1*(n.offset+(r.offset-n.offset)*i)+.5*F-.5*s;ee(R,o,s-20,t),t===N&&(Z=Math.round(x.scrollLeft/F),H=!1)},{passive:!0})}function ee(e,t,a,i){x.style.setProperty("--hh",e.toString()),_.style.setProperty("--kh",a.toString()),S.style.setProperty("--lh",`${t.toString()}px`),S.style.setProperty("--mh",i.toString())}function te(e){var t=e;if(Y){var a=t.detail.progress-1;$.style.setProperty("--nh",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,te)}function ae(){var e=(0,u.zx)(),t=document.createElement("div");t.classList.add("oi"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var a=document.createElement("div");a.classList.add("pi");var i=document.createElement("div");i.classList.add("qi");var n=document.createElement("div");n.classList.add("si"),n.setAttribute("code","-1"),n.setAttribute("displayed","false");var r=document.createElement("div");r.classList.add("ti"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),i.appendChild(n),i.appendChild(r);var s=document.createElement("div");s.classList.add("cj");var o=document.createElement("div");o.classList.add("dj");var d=document.createElement("div");d.classList.add("ej");var l=document.createElement("div");l.classList.add("hj");var h=document.createElement("div");h.classList.add("yg"),h.setAttribute("code","0"),h.setAttribute("displayed","false");var p=document.createElement("div");p.classList.add("zg"),p.setAttribute("code","0"),p.setAttribute("displayed","true"),l.appendChild(h),l.appendChild(p);var f=document.createElement("div");f.classList.add("gj"),f.appendChild((0,v.YC)("keyboard_arrow_down")),f.onclick=function(){!function(e){var t=(0,c.aI)(x,`.ei .ni .oi#${e}`),a=(0,c.aI)(t,".ij"),i=t.parentElement,n=(0,c.ji)(t,"oi"),r=n.length,s=i.getBoundingClientRect(),o=t.getBoundingClientRect(),d=o.top-s.top,l="true"===t.getAttribute("stretched"),u="true"===t.getAttribute("animation");if(u){var h=l?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--mi",`${d}px`);for(var v=0;v<r;v++){var p=n[v];p.setAttribute("push-direction",h),p.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var e=0;e<r;e++){var a=n[e];a.setAttribute("push-direction","0"),a.setAttribute("push-state","0")}t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var e=0;e<r;e++){n[e].setAttribute("push-state","2")}},{once:!0})}l?(u?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}(e)};var m=document.createElement("div");m.classList.add("fj"),d.appendChild(l),d.appendChild(f),d.appendChild(m),a.appendChild(i),a.appendChild(s),a.appendChild(o),a.appendChild(d);var g=document.createElement("div");g.classList.add("ij"),g.setAttribute("displayed","false");var b=document.createElement("div");b.classList.add("jj");var y=document.createElement("div");y.classList.add("kj"),y.setAttribute("highlighted","true"),y.setAttribute("type","tab"),y.setAttribute("code","0");var k=document.createElement("div");k.classList.add("nj"),k.appendChild((0,v.YC)("directions_bus")),y.appendChild(k),y.appendChild(document.createTextNode("公車")),y.onclick=function(){he(e,0)};var A=document.createElement("div");A.classList.add("kj"),A.setAttribute("highlighted","false"),A.setAttribute("type","tab"),A.setAttribute("code","1");var j=document.createElement("div");j.classList.add("nj"),j.appendChild((0,v.YC)("departure_board")),A.appendChild(j),A.appendChild(document.createTextNode("抵達時間")),A.onclick=function(){he(e,1)};var I=document.createElement("div");I.classList.add("kj"),I.setAttribute("highlighted","false"),I.setAttribute("type","save-to-folder");var w=document.createElement("div");w.classList.add("nj"),w.appendChild((0,v.YC)("folder")),I.appendChild(w),I.appendChild(document.createTextNode("儲存"));var L=document.createElement("div");L.classList.add("kj"),L.setAttribute("highlighted","false"),L.setAttribute("type","schedule-notification"),L.setAttribute("enabled","true");var C=document.createElement("div");C.classList.add("nj"),C.appendChild((0,v.YC)("notifications")),L.appendChild(C),L.appendChild(document.createTextNode("通知")),b.appendChild(y),b.appendChild(A),b.appendChild(I),b.appendChild(L);var E=document.createElement("div");E.classList.add("oj"),E.setAttribute("displayed","true");var S=document.createElement("div");return S.classList.add("pj"),S.setAttribute("displayed","false"),g.appendChild(b),g.appendChild(E),g.appendChild(S),t.appendChild(a),t.appendChild(g),{element:t,id:e}}function ie(){var e=document.createElement("div");e.classList.add("ei");var t=document.createElement("div");t.classList.add("fi");var a=document.createElement("div");a.classList.add("gi"),t.appendChild(a);var i=document.createElement("div");return i.classList.add("ni"),e.appendChild(t),e.appendChild(i),{element:e,id:""}}function ne(){var e=document.createElement("div");e.classList.add("xh");var t=document.createElement("span");return e.appendChild(t),{element:e,id:""}}function re(){var e=document.createElement("div");e.classList.add("ii");var t=document.createElement("div");t.classList.add("ji"),t.appendChild((0,v.oC)());var a=document.createElement("div");return a.classList.add("ki"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function se(e,t,a){var i,r;function o(e,i,r){function o(e,t,a){var i=e.getBoundingClientRect(),n=i.top,r=i.left,s=i.bottom,o=i.right,d=window.innerWidth,l=window.innerHeight,u=(0,c.aI)(e,".pi"),h=(0,c.aI)(u,".hj"),v=(0,c.aI)(h,".yg"),p=(0,c.aI)(h,".zg");v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,a&&s>0&&n<l&&o>0&&r<d?(p.addEventListener("animationend",function(){p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text,p.classList.remove("ah"),v.setAttribute("displayed","false")},{once:!0}),v.setAttribute("displayed","true"),p.classList.add("ah")):(p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text)}function d(e,t,a){var i=e.getBoundingClientRect(),n=i.top,r=i.left,s=i.bottom,o=i.right,d=window.innerWidth,l=window.innerHeight,u=(0,c.aI)(e,".pi"),h=(0,c.aI)(u,".qi"),v=(0,c.aI)(h,".si"),p=(0,c.aI)(h,".ti");v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,a&&s>0&&n<l&&o>0&&r<d?(p.addEventListener("animationend",function(){p.setAttribute("code",t.ranking.code.toString()),p.innerText=t.ranking.text,p.classList.remove("bj"),v.setAttribute("displayed","false")},{once:!0}),v.setAttribute("displayed","true"),p.classList.add("bj")):(p.setAttribute("code",t.ranking.code.toString()),p.innerText=t.ranking.text)}function l(e,t){var a=(0,c.aI)(e,".pi");(0,c.aI)(a,".cj").innerText=t.route_direction}function p(e,t){var a=(0,c.aI)(e,".pi");(0,c.aI)(a,".dj").innerText=t.route_name}function f(e,t){var a=(0,c.aI)(e,".ij");(0,c.aI)(a,".oj").innerHTML=0===t.buses.length?'<div class="hk">目前沒有公車可顯示</div>':t.buses.map(function(e){return`<div class="qj" on-this-route="${e.onThisRoute}"><div class="sj"><div class="uj">${(0,v.Zf)("directions_bus")}</div><div class="wj">${e.carNumber}</div></div><div class="zj"><div class="ck">路線：${e.RouteName}</div><div class="dk">狀態：${e.status.text}</div><div class="ek">類型：${e.type}</div></div></div>`}).join("")}function b(e,t){var a=(0,c.aI)(e,".ij");(0,c.aI)(a,".pj").innerHTML=0===t.busArrivalTimes.length?'<div class="ik">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map(function(e){return`<div class="rj"><div class="tj"><div class="vj">${(0,v.Zf)("calendar_view_day")}</div><div class="xj">${e.personalSchedule.name}</div><div class="yj">週${(0,h.kd)(e.day).name} ${(0,h.pn)(e.personalSchedule.period.start)} - ${(0,h.pn)(e.personalSchedule.period.end)}</div></div><div class="_j">${e.chart}</div></div>`}).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function k(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function A(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}function j(e,t){var a=(0,c.aI)(e,".ij"),i=(0,c.aI)(a,".jj"),r=(0,c.aI)(i,'.kj[type="save-to-folder"]');r.onclick=function(){(0,m.B)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,n.LH)("stop",t.stopId).then(function(e){r.setAttribute("highlighted",(0,u.xZ)(e))})}function I(e,t){var a=(0,c.aI)(e,".ij"),i=(0,c.aI)(a,".jj"),n=(0,c.aI)(i,'.kj[type="schedule-notification"]');n.onclick=function(){(0,g.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var r=(0,s.Zc)(t.stopId);n.setAttribute("highlighted",(0,u.xZ)(r))}null==r?(o(e,i,a),d(e,i,a),l(e,i),p(e,i),f(e,i),b(e,i),y(e,t),k(e,a),A(e,t),j(e,i),I(e,i)):(i.status.time!==r.status.time&&(o(e,i,a),I(e,i)),r.ranking.number===i.ranking.number&&r.ranking.code===i.ranking.code||d(e,i,a),r.stopId!==i.stopId&&(l(e,i),p(e,i),j(e,i)),(0,u.hw)(r.buses,i.buses)||f(e,i),(0,u.hw)(r.busArrivalTimes,i.busArrivalTimes)||b(e,i),a!==P&&k(e,a),t!==D&&(y(e,t),A(e,t)))}function d(e,i,n){function r(e,t){var a=(0,c.aI)(e,".ji");(0,v.yD)(a,t.icon)}function s(e,t){(0,c.aI)(e,".ki").innerHTML=t.value}function o(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}null==n?(r(e,i),s(e,i),o(e,a),d(e,t)):((0,u.hw)(n.icon,i.icon)||r(e,i),(0,u.hw)(n.value,i.value)||s(e,i),a!==P&&o(e,a),t!==D&&d(e,t))}var f=(0,p.gO)("window"),y=f.width,k=f.height,A=e.groupQuantity,j=e.itemQuantity,I=e.groupedItems,_=e.groups;R=A,F=y;for(var $=0,N=0;N<A;N++){var z=`g_${N}`,Q=(0,l.q_)(_[z].name,500,"17px",'"Noto Sans TC", sans-serif')+20;O[z]={width:Q,offset:$},$+=Q}if(O[`g_${A}`]={width:0,offset:$},!H){var B=O[`g_${Z}`],W=-1*B.offset+.5*F-.5*B.width,q=B.width-20;ee(R,W,q,Z)}(null===(i=M)||void 0===i?void 0:i.hash)!==e.hash&&(C.onclick=function(){(0,b.ID)(e.hash)}),(null===(r=M)||void 0===r?void 0:r.LocationName)!==e.LocationName&&(L.innerText=e.LocationName),P!==a&&(w.setAttribute("animation",(0,u.xZ)(a)),E.setAttribute("animation",(0,u.xZ)(a))),D!==t&&(w.setAttribute("skeleton-screen",(0,u.xZ)(t)),E.setAttribute("skeleton-screen",(0,u.xZ)(t)),T.setAttribute("skeleton-screen",(0,u.xZ)(t)));var J=(0,c.jg)(x,".ei").length;if(A!==J){var U=J-A;if(U<0){for(var Y=new DocumentFragment,X=new DocumentFragment,G=0,K=Math.abs(U);G<K;G++){var V=ie();Y.appendChild(V.element);var te=ne();X.appendChild(te.element)}x.append(Y),S.append(X)}else for(var se=(0,c.jg)(x,".ei"),oe=(0,c.jg)(S,".xh"),de=0,ce=Math.abs(U);de<ce;de++){var le=J-1-de;se[le].remove(),oe[le].remove()}}for(var ue=(0,c.jg)(x,".ei"),he=0;he<A;he++){var ve=`g_${he}`,pe=ue[he],fe=(0,c.jg)(pe,".ni .oi").length;if(j[ve]!==fe){var me=fe-j[ve];if(me<0)for(var ge=(0,c.aI)(pe,".ni"),be=0,ye=Math.abs(me);be<ye;be++){var ke=ae();ge.appendChild(ke.element)}else for(var Ae=(0,c.jg)(pe,".ni .oi"),je=0,Ie=Math.abs(me);je<Ie;je++){Ae[fe-1-je].remove()}}var we=(0,c.jg)((0,c.jg)(x,".ei")[he],".fi .gi .ii").length,Le=_[ve].properties.length;if(Le!==we){var Ce=we-Le;if(Ce<0)for(var xe=(0,c.aI)(pe,".fi"),Ee=(0,c.aI)(xe,".gi"),Se=0,Te=Math.abs(Ce);Se<Te;Se++){var _e=re();Ee.appendChild(_e.element)}else for(var $e=(0,c.aI)(pe,".fi"),Me=(0,c.aI)($e,".gi"),Pe=(0,c.jg)(Me,".ii"),De=0,Ze=Math.abs(Ce);De<Ze;De++){Pe[we-1-De].remove()}}}for(var Ne=(0,c.jg)(S,".xh"),Re=(0,c.jg)(x,".ei"),Oe=0;Oe<A;Oe++){var Fe=`g_${Oe}`,He=Ne[Oe];(0,c.aI)(He,"span").innerText=_[Fe].name,He.style.setProperty("--jh",`${O[Fe].width}px`),He.style.setProperty("--yh",Oe.toString());for(var ze=Re[Oe],Qe=(0,c.jg)(ze,".fi .gi .ii"),Be=(0,c.jg)(ze,".ni .oi"),We=_[Fe].properties.length,qe=0;qe<We;qe++){var Je=_[Fe].properties[qe],Ue=Qe[qe];if(M.hasOwnProperty("groups"))if(M.groups.hasOwnProperty(Fe))if(M.groups[Fe].properties[qe])d(Ue,Je,M.groups[Fe].properties[qe]);else d(Ue,Je,null);else d(Ue,Je,null);else d(Ue,Je,null)}for(var Ye=0;Ye<j[Fe];Ye++){var Xe=Be[Ye],Ge=I[Fe][Ye];if(M.hasOwnProperty("groupedItems"))if(M.groupedItems.hasOwnProperty(Fe))if(M.groupedItems[Fe][Ye])o(Xe,Ge,M.groupedItems[Fe][Ye]);else o(Xe,Ge,null);else o(Xe,Ge,null);else o(Xe,Ge,null)}}M=e,P=a,D=t}function oe(){return de.apply(this,arguments)}function de(){var e;return e=function*(){var e=(0,d.Js)("playing_animation"),t=(0,d.Js)("refresh_interval"),a=(0,p.gO)("location-bus-arrival-time-chart");W=t.dynamic,z=t.baseInterval,Y=!0,U=(0,u.zx)(),$.setAttribute("refreshing","true"),$.classList.remove("ci"),document.addEventListener(U,te);var n=yield(0,r.R)(K,a.width,a.height,U);se(n,!1,e);var s=0;W&&(s=yield(0,i.wz)()),q=(new Date).getTime(),J=W?Math.max(q+Q,n.dataUpdateTime+z/s):q+z,B=Math.max(Q,J-q),Y=!1,$.setAttribute("refreshing","false"),$.style.setProperty("--oh",`${B}ms`),$.classList.add("ci")},de=function(){var t=this,a=arguments;return new Promise(function(i,n){var r=e.apply(t,a);function s(e){A(r,i,n,s,o,"next",e)}function o(e){A(r,i,n,s,o,"throw",e)}s(void 0)})},de.apply(this,arguments)}function ce(){oe().then(function(){X?setTimeout(function(){ce()},Math.max(Q,J-(new Date).getTime())):G=!1}).catch(function(e){X?((0,f.a)("error","地點網路連線中斷，將在10秒後重試。"),setTimeout(function(){ce()},1e4)):G=!1})}function le(e){(0,p.WR)("Location"),(0,o.XK)("location",e),K=e,Z=0,O={},j.setAttribute("displayed","true"),x.scrollLeft=0,x.focus(),function(e){for(var t=(0,d.Js)("playing_animation"),a=(0,p.gO)("window"),i=(a.width,a.height),n={g_0:Math.floor(i/50)+5,g_1:Math.floor(i/50)+5},r={},s=0;s<2;s++){var o=`g_${s}`;r[o]=[];for(var c=0;c<n[o];c++)r[o].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}se({groupedItems:r,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:n,LocationName:"載入中",hash:e,dataUpdateTime:0},!0,t)}(e),X||(X=!0,G?oe():(G=!0,ce())),(0,p.Z_)()}function ue(){j.setAttribute("displayed","false"),X=!1,(0,p.l$)()}function he(e,t){var a,i=(0,c.aI)(x,`.ei .ni .oi#${e}`),n=(0,c.aI)(i,".ij"),r=(0,c.aI)(n,".jj"),s=y((0,c.jg)(r,'.kj[highlighted="true"][type="tab"]'));try{for(s.s();!(a=s.n()).done;){a.value.setAttribute("highlighted","false")}}catch(e){s.e(e)}finally{s.f()}switch((0,c.aI)(r,`.kj[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,c.aI)(i,".oj").setAttribute("displayed","true"),(0,c.aI)(i,".pj").setAttribute("displayed","false");break;case 1:(0,c.aI)(i,".oj").setAttribute("displayed","false"),(0,c.aI)(i,".pj").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=a538eaa8f087a1ff9459.js.map