"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[601],{540(e,t,a){a.d(t,{a:()=>D,b:()=>T});var n=a(467),i=a(5767),r=a(9566),s=a(3459),c=a(8179),o=a(8024),d=a(9915),l=a(4537),u=a(904),b=a(3030),f=a(9119),p=a(4690),h=(0,c.c)(".ma"),v=(0,c.e)(h,".sa"),m=(0,c.e)(h,".db"),k=(0,c.e)(m,".sb"),y=(0,c.e)(v,".za .ab"),g={},w=!1,L=!1,C=new d.a(function(){return E.apply(this,arguments)},15e3);function A(){var e=(0,c.a)();e.classList.add("zb"),e.setAttribute("type","stop");var t=(0,c.a)();t.classList.add("_b"),t.appendChild((0,l.b)("location_on"));var a=(0,c.a)();a.classList.add("ac");var n=(0,c.a)();n.classList.add("cc");var i=(0,c.a)();i.classList.add("dc");var r=(0,c.a)();r.classList.add("hc");var s=(0,c.a)();s.classList.add("ic"),s.setAttribute("code","0"),s.setAttribute("displayed","false");var o=(0,c.a)();o.classList.add("jc"),o.setAttribute("code","0"),o.setAttribute("displayed","true"),r.appendChild(s),r.appendChild(o);var d=(0,c.a)();d.classList.add("ec"),d.appendChild((0,l.b)("keyboard_arrow_right"));var u=(0,c.a)();return u.classList.add("fc"),i.appendChild(r),i.appendChild(d),i.appendChild(u),e.appendChild(t),e.appendChild(a),e.appendChild(n),e.appendChild(i),e}function S(){var e=(0,c.a)();e.classList.add("tb");var t=(0,c.a)();t.classList.add("vb");var a=(0,c.a)();a.classList.add("wb"),a.appendChild((0,l.a)());var n=(0,c.a)();n.classList.add("xb"),t.appendChild(a),t.appendChild(n);var i=(0,c.a)();return i.classList.add("yb"),e.appendChild(t),e.appendChild(i),e}function _(e){y.style.setProperty("--ra",`${e}ms`),y.classList.add("cb")}function x(e){var t=e;y.style.setProperty("--qa",t.detail.progress.toString()),"end"===t.detail.stage&&document.removeEventListener(t.detail.target,x)}function T(){for(var e=(0,s.b)("playing_animation"),t=(0,u.d)("window"),a=(t.width,t.height),n=Math.floor(a/50/3)+2,i=[],r=0;r<3;r++){for(var c={name:"",icon:"",id:"",timestamp:0,content:[],contentLength:n},o=0;o<n;o++){c.content.push({type:"stop",id:0,timestamp:0,name:"",status:{code:8,text:"",time:-6},direction:0,route:{name:"",endPoints:{departure:"",destination:""},id:0,pathAttributeId:[]}})}i.push(c)}P({folders:i,dataUpdateTime:0},!0,e)}function P(e,t,a){function n(e,n,i){function r(e,t){e.setAttribute("type",t.type)}function s(e,t){var a=(0,c.e)(e,"._b"),n="";switch(t.type){case"stop":case"location":n="location_on";break;case"route":n="route";break;case"bus":n="directions_bus";break;case"empty":n="lightbulb";break;default:n=""}(0,l.c)(a,n)}function d(e,t,a){if("stop"===t.type){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,o=n.right,d=window.innerWidth,l=window.innerHeight,u=(0,c.e)(e,".dc .hc"),b=(0,c.e)(u,".ic"),f=(0,c.e)(u,".jc");b.setAttribute("code",t.status.code.toString()),b.innerText=t.status.text,a&&s>0&&i<l&&o>0&&r<d?(f.addEventListener("animationend",function(){f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,f.classList.remove("lc"),b.setAttribute("displayed","false")},{once:!0}),b.setAttribute("displayed","true"),f.classList.add("lc")):(f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text)}}function u(e,t){var a="";switch(t.type){case"stop":case"route":case"location":a=t.name;break;case"bus":a=t.busID;break;case"empty":a="沒有內容";break;default:a="null"}(0,c.e)(e,".cc").innerText=a}function f(e,t){var a="";switch(t.type){case"stop":a=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`;break;case"route":a=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`;break;case"location":a="地點";break;case"bus":break;case"empty":a="提示";break;default:a="null"}(0,c.e)(e,".ac").innerText=a}function h(e,t){var a=(0,c.e)(e,".dc .ec");switch(t.type){case"stop":a.onclick=function(){(0,p.d)(t.route.id,t.route.pathAttributeId)};break;case"route":a.onclick=function(){(0,p.d)(t.id,t.pathAttributeId)};break;case"location":a.onclick=function(){(0,b.d)(t.id)}}}function v(e,t){e.setAttribute("animation",(0,o.a)(t))}function m(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}if(null==i)r(e,n),s(e,n),d(e,n,a),u(e,n),f(e,n),h(e,n),v(e,a),m(e,t);else if(n.type!==i.type)r(e,n),s(e,n),d(e,n,a),u(e,n),f(e,n),h(e,n),v(e,a),m(e,t);else{switch(n.type){case"stop":(0,o.b)(i.route,n.route)||(f(e,n),h(e,n)),i.name!==n.name&&u(e,n),i.status.time!==n.status.time&&d(e,n,a);break;case"route":i.id!==n.id&&h(e,n),(0,o.b)(i.endPoints,n.endPoints)||f(e,n),i.name!==n.name&&u(e,n);break;case"location":i.id!==n.id&&h(e,n),i.name!==n.name&&u(e,n);break;case"bus":default:break;case"empty":n.type!==i.type&&(f(e,n),u(e,n))}t!==L&&m(e,t),a!==w&&v(e,a)}}function i(e,n,i){function r(e,t){var a=(0,c.e)(e,".vb");(0,c.e)(a,".xb").innerText=t.name}function s(e,t){var a=(0,c.e)(e,".vb"),n=(0,c.e)(a,".wb");(0,l.c)(n,t.icon)}function d(e,t){e.setAttribute("animation",(0,o.a)(t))}function u(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==i?(r(e,n),s(e,n),d(e,a),u(e,t)):(n.name!==i.name&&r(e,n),n.icon!==i.icon&&s(e,n),a!==w&&d(e,a),t!==L&&u(e,t))}var r=e.folders,s=r.length,d=Array.from((0,c.d)(k,".tb")),u=d.length;if(s!==u){var f=u-s;if(f<0){for(var h=new DocumentFragment,v=0;v>f;v--){var m=S();h.appendChild(m),d.push(m)}k.append(h)}else if(f>0)for(var y=u-1,C=u-f-1;y>C;y--)d[y].remove(),d.splice(y,1)}for(var _=0;_<s;_++){var x=r[_],T=x.content,P=T.length,E=d[_],D=(0,c.e)(E,".yb"),M=Array.from((0,c.d)(D,".zb")),I=M.length;if(P!==I){var R=I-P;if(R<0)for(var F=0;F>R;F--){var N=A();D.appendChild(N),M.push(N)}else if(R>0)for(var $=I-1,H=I-R-1;$>H;$--)M[$].remove(),M.splice($,1)}if((0,o.f)(g,"folders"))if(g.folders[_])i(E,x,g.folders[_]);else i(E,x,null);else i(E,x,null);for(var U=0;U<P;U++){var q=M[U],Q=T[U];if((0,o.f)(g,"folders"))if(g.folders[_])if(g.folders[_].content[U])n(q,Q,g.folders[_].content[U]);else n(q,Q,null);else n(q,Q,null);else n(q,Q,null)}}g=e,w=a,L=t}function E(){return(E=(0,n.a)(function*(){try{var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval"),a=(0,o.c)();y.setAttribute("refreshing","true"),y.classList.remove("cb"),document.addEventListener(a,x);var n=yield(0,r.d)(a);P(n,!1,e);var c=0;t.dynamic&&(c=yield(0,i.c)());var d=(new Date).getTime(),l=0;l=t.dynamic?Math.max(d+5e3,n.dataUpdateTime+t.baseInterval/c):d+t.baseInterval;var u=Math.max(5e3,l-d);return y.setAttribute("refreshing","false"),_(u),u}catch(e){var b=1e4;return(0,f.a)("error","資料夾發生錯誤，將在10秒後重試。"),_(b),b}})).apply(this,arguments)}function D(){C.isPaused?C.resume(!0):C.tick()}},6082(e,t,a){a.d(t,{a:()=>u,b:()=>m,c:()=>g,d:()=>y});var n=a(467),i=a(9734),r=a(8011),s=a(9218),c=a(4293),o=a(6788),d=a(8179),l="downloadData",u=!1,b=(0,d.c)(".ma"),f=(0,d.e)(b,".sa"),p=(0,d.e)(f,".ya"),h=(0,d.e)(p,'svg#download-svg path[component="progress"]');function v(e){var t=e,a=189*(1-(0,o.d)(l));h.style.setProperty("--oa",`${a}px`),"end"===t.detail.stage&&(document.removeEventListener(t.detail.target,v),p.setAttribute("complete","true"),h.style.setProperty("--oa","0px"),u=!0)}function m(){return k.apply(this,arguments)}function k(){return(k=(0,n.a)(function*(){(0,o.f)(l,"getRoute_0",0,!1),(0,o.f)(l,"getRoute_1",0,!1),(0,o.f)(l,"getLocation_0",0,!1),(0,o.f)(l,"getLocation_1",0,!1),(0,o.f)(l,"getCarInfo_0",0,!1),(0,o.f)(l,"getCarInfo_1",0,!1),(0,o.f)(l,"getMaterialSymbolsSearchIndex",0,!1),document.addEventListener(l,v),yield Promise.all([(0,c.a)(l,!0),(0,r.a)(l,1),(0,i.a)(l,!0),(0,s.a)(l)]),(0,o.a)(l),(0,o.b)(l)})).apply(this,arguments)}function y(){b.setAttribute("displayed","true")}function g(){b.setAttribute("displayed","false")}},6091(e,t,a){a.d(t,{a:()=>_,b:()=>A});var n=a(467),i=a(5314),r=a(3459),s=a(8179),c=a(8024),o=a(9915),d=a(4884),l=a(4537),u=a(904),b=a(3030),f=a(4690),p=(0,s.c)(".ma"),h=(0,s.e)(p,".db"),v=(0,s.e)(h,".eb"),m=(0,s.e)(v,".jb"),k={},y=!1,g=!1,w=new o.a(function(){return S.apply(this,arguments)},15e3);function L(){var e=(0,s.a)();e.classList.add("mb");var t=(0,s.a)();t.classList.add("nb");var a=(0,s.a)();a.classList.add("ob"),a.appendChild((0,l.a)());var n=(0,s.a)();n.classList.add("pb");var i=(0,s.a)();i.classList.add("qb"),t.appendChild(a),t.appendChild(n),t.appendChild(i);var r=(0,s.a)();return r.classList.add("rb"),e.appendChild(t),e.appendChild(r),e}function C(e,t,a){function n(e,n,i){function r(e,t){var a=(0,s.e)(e,".nb"),n=(0,s.e)(a,".ob"),i="";switch(t.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,l.c)(n,i)}function o(e,t){var a=(0,s.e)(e,".nb"),n=(0,s.e)(a,".pb"),i="";switch(t.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function u(e,t){var a=(0,s.e)(e,".nb");(0,s.e)(a,".qb").innerText=t.time.relative}function p(e,t){(0,s.e)(e,".rb").innerText=t.name}function h(e,t){switch(t.type){case"route":e.onclick=function(){(0,f.d)(t.id,t.pid)};break;case"location":e.onclick=function(){(0,b.d)(t.hash)};break;case"bus":e.onclick=function(){(0,d.d)(t.id)};break;case"empty":e.onclick=null}}function v(e,t){e.setAttribute("animation",(0,c.a)(t))}function m(e,t){e.setAttribute("skeleton-screen",(0,c.a)(t))}if(null==i)r(e,n),o(e,n),u(e,n),p(e,n),h(e,n),v(e,a),m(e,t);else if(n.type!==i.type)r(e,n),o(e,n),u(e,n),p(e,n),h(e,n),v(e,a),m(e,t);else{switch(n.type){case"location":(0,c.b)(i.name,n.name)||p(e,n),i.time!==n.time&&u(e,n),(0,c.b)(i.hash,n.hash)||h(e,n);break;case"route":i.name!==n.name&&p(e,n),i.time!==n.time&&u(e,n),i.id===n.id&&(0,c.b)(i.pid,n.pid)||h(e,n);break;case"bus":i.name!==n.name&&p(e,n),i.time!==n.time&&u(e,n),i.id!==n.id&&h(e,n);break;case"empty":i.time!==n.time&&u(e,n)}y!==a&&v(e,a),g!==t&&m(e,t)}}var i=e.itemQuantity,r=Array.from((0,s.d)(m,".mb")),o=r.length;if(i!==o){var u=o-i;if(u<0){for(var p=new DocumentFragment,h=0;h>u;h--){var v=L();p.appendChild(v),r.push(v)}m.append(p)}else if(u>0)for(var w=o-1,C=o-u-1;w>C;w--)r[w].remove(),r.splice(w,1)}for(var A=0;A<i;A++){var S=r[A],_=e.items[A];if((0,c.f)(k,"items"))if(k.items[A])n(S,_,k.items[A]);else n(S,_,null);else n(S,_,null)}k=e,y=a,g=t}function A(){for(var e=(0,r.b)("playing_animation"),t=(0,u.d)("window"),a=Math.floor(t.height/70/3)+2,n=[],i=0;i<a;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});C({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function S(){return(S=(0,n.a)(function*(){try{var e=(0,r.b)("playing_animation"),t=(0,c.c)();return C(yield(0,i.c)(t),!1,e),15e3}catch(e){return 1e4}})).apply(this,arguments)}function _(){w.isPaused?w.resume(!0):w.tick()}},4294(e,t,a){a.d(t,{a:()=>D,b:()=>P,c:()=>_,d:()=>E,e:()=>T});var n,i=a(467),r=a(9218),s=a(6788),c=a(972),o=a(3459),d=a(8179),l=a(8024),u=a(4781),b=a(4537),f=a(904),p=(0,d.c)(".mc"),h=(0,d.e)(p,".nc"),v=(0,d.e)(h,"#search_material_symbols_input"),m=(0,d.e)(p,".qc"),k=(0,d.e)(m,".rc"),y=[],g=[],w=!1,L=!1;function C(){var e=(0,d.a)();return e.classList.add("sc"),e.appendChild((0,b.a)()),e}function A(e,t,a,i){function r(e,r,s){function c(e,t){(0,b.c)(e,t)}function o(e,t,a){e.onclick=function(){!function(e,t){t.value=e,D()}(t,a)}}function d(e,t){e.setAttribute("skeleton-screen",(0,l.a)(t))}function u(e,t){e.setAttribute("animation",(0,l.a)(t))}null==s?(c(e,r),o(e,r,t),d(e,a),u(e,i)):(s!==r?(c(e,r),o(e,r,t)):n!==t&&o(e,r,t),L!==a&&d(e,a),w!==i&&u(e,i))}var s=e.length,c=Array.from((0,d.d)(k,".sc")),o=c.length;if(s!==o){var u=o-s;if(u<0){for(var f=new DocumentFragment,p=0;p>u;p--){var h=C();f.appendChild(h),c.push(h)}k.append(f)}else if(u>0)for(var v=o-1,m=o-u-1;v>m;v--)c[v].remove(),c.splice(v,1)}for(var y=0;y<s;y++){var A=g[y],S=e[y],_=c[y];r(_,S,A||null)}g=e.slice(),n=t,L=a,w=i}function S(){return(S=(0,i.a)(function*(e){var t=(0,o.b)("playing_animation"),a=(0,l.c)();v.value="",function(e){for(var t=(0,o.b)("playing_animation"),a=(0,f.d)("window"),n=Math.floor(a.width/50)*(Math.floor(a.height/50)+3),i=[],r=0;r<n;r++)i.push("");A(i,e,!0,t)}(e);var n=yield(0,r.a)(a);for(var i in y=[],n.symbols)y.push(i);A(y,e,!1,t),(0,c.a)(n),(0,s.a)(a)})).apply(this,arguments)}function _(){v.addEventListener("paste",function(){x()}),v.addEventListener("cut",function(){x()}),v.addEventListener("selectionchange",function(){x()}),document.addEventListener("selectionchange",function(){x()}),v.addEventListener("keyup",function(){x()})}function x(){var e=v.value;if(!(0,u.a)(e)){for(var t=(0,c.b)(e),a=t.length-1;a>=0;a--){var i=t[a].item,r=y.indexOf(i);if(y[a]&&!(r<0)){var s=[y[r],y[a]];y[a]=s[0],y[r]=s[1]}}A(y,n,!1,w)}}function T(){p.setAttribute("displayed","true")}function P(){p.setAttribute("displayed","false")}function E(e){(0,f.c)("IconSelector"),T(),function(e){S.apply(this,arguments)}(e),(0,f.b)()}function D(){P(),(0,f.h)(),(0,f.e)("IconSelector")}},4537(e,t,a){a.d(t,{a:()=>r,b:()=>i,c:()=>s});var n=a(8179);function i(e){var t=document.createElement("span");return t.classList.add("la"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("la"),e}function s(e,t){(0,n.e)(e,"span.la").innerText=t}},904(e,t,a){a.d(t,{a:()=>N,b:()=>R,c:()=>M,d:()=>H,e:()=>I,f:()=>U,g:()=>$,h:()=>F});var n=a(8179),i=a(4884),r=a(9499),s=a(6052),c=a(9333),o=a(8379),d=a(6082),l=a(4294),u=a(1351),b=a(3030),f=a(2174),p=a(8380),h=a(5693),v=a(7891),m=a(8279),k=a(7908),y=a(4131),g=a(4373),w=a(4690),L=a(3041),C=a(752),A=a(5009),S=a(6104),_=a(6166),x=a(2994),T=(0,n.c)(".ea"),P=(0,n.c)(".ia"),E=(new Date).getTime(),D=["Home"];function M(e){var t=D.length;D[t-1]!==e&&D.push(e)}function I(e){var t=D.length;t>1&&D[t-1]===e&&D.pop()}function R(){var e=D.length;if(e>1)switch(D[e-2]){case"Home":(0,d.c)();break;case"FolderCreator":(0,s.b)();break;case"FolderEditor":(0,c.a)();break;case"IconSelector":(0,l.b)();break;case"FolderManager":(0,o.b)();break;case"Location":(0,b.b)();break;case"LocationDetails":(0,u.b)();break;case"Route":(0,w.b)();break;case"RouteDetails":(0,g.b)();break;case"RouteCalendar":(0,y.b)();break;case"SaveToFolder":(0,L.b)();break;case"Search":(0,A.b)();break;case"Settings":(0,S.c)();break;case"SettingsOptions":(0,_.b)();break;case"DataUsage":(0,r.b)();break;case"PersonalScheduleManager":(0,v.b)();break;case"PersonalScheduleCreator":(0,p.c)();break;case"PersonalScheduleEditor":(0,h.b)();break;case"Bus":(0,i.c)();break;case"RegisterNotification":(0,k.a)();break;case"ScheduleNotification":(0,C.b)();break;case"NotificationScheduleManager":(0,f.b)();break;case"QRCode":(0,m.b)();break;case"Storage":(0,x.b)()}}function F(){var e=D.length;if(e>1)switch(D[e-2]){case"Home":(0,d.d)();break;case"FolderCreator":(0,s.d)();break;case"FolderEditor":(0,c.c)();break;case"IconSelector":(0,l.e)();break;case"FolderManager":(0,o.d)();break;case"Location":(0,b.e)();break;case"LocationDetails":(0,u.e)();break;case"Route":(0,w.e)();break;case"RouteDetails":(0,g.e)();break;case"RouteCalendar":(0,y.d)();break;case"SaveToFolder":(0,L.d)();break;case"Search":(0,A.f)();break;case"Settings":(0,S.h)();break;case"SettingsOptions":(0,_.d)();break;case"DataUsage":(0,r.d)();break;case"PersonalScheduleManager":(0,v.e)();break;case"PersonalScheduleCreator":(0,p.e)();break;case"PersonalScheduleEditor":(0,h.e)();break;case"Bus":(0,i.e)();break;case"RegisterNotification":(0,k.c)();break;case"ScheduleNotification":(0,C.d)();break;case"NotificationScheduleManager":(0,f.d)();break;case"QRCode":(0,m.d)();break;case"Storage":(0,x.d)()}}function N(e){function t(){T.classList.add("ga"),T.addEventListener("animationend",function(){T.setAttribute("displayed","false"),T.classList.remove("ga"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-E<100?setTimeout(t,Math.max(1,a-E)):t()}function $(){P.setAttribute("displayed","true")}function H(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function U(){window.scrollTo({top:0,behavior:"instant"})}},6971(){},2547(){},6110(){},9080(){},8933(){},6561(){},7336(){},4953(){},5297(){},7499(){},9657(){},7114(){},6764(){},5259(){}}]);
//# sourceMappingURL=3d97a8cc4eb894ebed84.js.map