/*! For license information please see 638accc7d967aa4fb271.js.LICENSE.txt */
!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("bus",[],n):"object"==typeof exports?exports.bus=n():r.bus=n()}(self,()=>(()=>{var r={1375(r){!function(n){"use strict";var t={bytesToString:function(r){return r.map(function(r){return String.fromCharCode(r)}).join("")},stringToBytes:function(r){return r.split("").map(function(r){return r.charCodeAt(0)})}};t.UTF8={bytesToString:function(r){return decodeURIComponent(escape(t.bytesToString(r)))},stringToBytes:function(r){return t.stringToBytes(unescape(encodeURIComponent(r)))}},r.exports?r.exports=t:n.convertString=t}(this)},2151(r){var n={utf8:{stringToBytes:function(r){return n.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(n.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var n=[],t=0;t<r.length;t++)n.push(255&r.charCodeAt(t));return n},bytesToString:function(r){for(var n=[],t=0;t<r.length;t++)n.push(String.fromCharCode(r[t]));return n.join("")}}};r.exports=n},2287(r){!function(n){"use strict";var t={bytesToHex:function(r){return function(r){return r.map(function(r){return n=r.toString(16),t=2,n.length>t?n:Array(t-n.length+1).join("0")+n;var n,t}).join("")}(r)},hexToBytes:function(r){if(r.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===r.indexOf("0x")&&(r=r.slice(2)),r.match(/../g).map(function(r){return parseInt(r,16)})}};r.exports?r.exports=t:n.convertHex=t}(this)},3503(r,n,t){var e,o,u,i,s;e=t(3939),o=t(2151).utf8,u=t(7206),i=t(2151).bin,(s=function(r,n){r.constructor==String?r=n&&"binary"===n.encoding?i.stringToBytes(r):o.stringToBytes(r):u(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var t=e.bytesToWords(r),a=8*r.length,c=1732584193,f=-271733879,l=-1732584194,p=271733878,y=0;y<t.length;y++)t[y]=16711935&(t[y]<<8|t[y]>>>24)|4278255360&(t[y]<<24|t[y]>>>8);t[a>>>5]|=128<<a%32,t[14+(a+64>>>9<<4)]=a;var g=s._ff,h=s._gg,v=s._hh,m=s._ii;for(y=0;y<t.length;y+=16){var d=c,x=f,b=l,S=p;c=g(c,f,l,p,t[y+0],7,-680876936),p=g(p,c,f,l,t[y+1],12,-389564586),l=g(l,p,c,f,t[y+2],17,606105819),f=g(f,l,p,c,t[y+3],22,-1044525330),c=g(c,f,l,p,t[y+4],7,-176418897),p=g(p,c,f,l,t[y+5],12,1200080426),l=g(l,p,c,f,t[y+6],17,-1473231341),f=g(f,l,p,c,t[y+7],22,-45705983),c=g(c,f,l,p,t[y+8],7,1770035416),p=g(p,c,f,l,t[y+9],12,-1958414417),l=g(l,p,c,f,t[y+10],17,-42063),f=g(f,l,p,c,t[y+11],22,-1990404162),c=g(c,f,l,p,t[y+12],7,1804603682),p=g(p,c,f,l,t[y+13],12,-40341101),l=g(l,p,c,f,t[y+14],17,-1502002290),c=h(c,f=g(f,l,p,c,t[y+15],22,1236535329),l,p,t[y+1],5,-165796510),p=h(p,c,f,l,t[y+6],9,-1069501632),l=h(l,p,c,f,t[y+11],14,643717713),f=h(f,l,p,c,t[y+0],20,-373897302),c=h(c,f,l,p,t[y+5],5,-701558691),p=h(p,c,f,l,t[y+10],9,38016083),l=h(l,p,c,f,t[y+15],14,-660478335),f=h(f,l,p,c,t[y+4],20,-405537848),c=h(c,f,l,p,t[y+9],5,568446438),p=h(p,c,f,l,t[y+14],9,-1019803690),l=h(l,p,c,f,t[y+3],14,-187363961),f=h(f,l,p,c,t[y+8],20,1163531501),c=h(c,f,l,p,t[y+13],5,-1444681467),p=h(p,c,f,l,t[y+2],9,-51403784),l=h(l,p,c,f,t[y+7],14,1735328473),c=v(c,f=h(f,l,p,c,t[y+12],20,-1926607734),l,p,t[y+5],4,-378558),p=v(p,c,f,l,t[y+8],11,-2022574463),l=v(l,p,c,f,t[y+11],16,1839030562),f=v(f,l,p,c,t[y+14],23,-35309556),c=v(c,f,l,p,t[y+1],4,-1530992060),p=v(p,c,f,l,t[y+4],11,1272893353),l=v(l,p,c,f,t[y+7],16,-155497632),f=v(f,l,p,c,t[y+10],23,-1094730640),c=v(c,f,l,p,t[y+13],4,681279174),p=v(p,c,f,l,t[y+0],11,-358537222),l=v(l,p,c,f,t[y+3],16,-722521979),f=v(f,l,p,c,t[y+6],23,76029189),c=v(c,f,l,p,t[y+9],4,-640364487),p=v(p,c,f,l,t[y+12],11,-421815835),l=v(l,p,c,f,t[y+15],16,530742520),c=m(c,f=v(f,l,p,c,t[y+2],23,-995338651),l,p,t[y+0],6,-198630844),p=m(p,c,f,l,t[y+7],10,1126891415),l=m(l,p,c,f,t[y+14],15,-1416354905),f=m(f,l,p,c,t[y+5],21,-57434055),c=m(c,f,l,p,t[y+12],6,1700485571),p=m(p,c,f,l,t[y+3],10,-1894986606),l=m(l,p,c,f,t[y+10],15,-1051523),f=m(f,l,p,c,t[y+1],21,-2054922799),c=m(c,f,l,p,t[y+8],6,1873313359),p=m(p,c,f,l,t[y+15],10,-30611744),l=m(l,p,c,f,t[y+6],15,-1560198380),f=m(f,l,p,c,t[y+13],21,1309151649),c=m(c,f,l,p,t[y+4],6,-145523070),p=m(p,c,f,l,t[y+11],10,-1120210379),l=m(l,p,c,f,t[y+2],15,718787259),f=m(f,l,p,c,t[y+9],21,-343485551),c=c+d>>>0,f=f+x>>>0,l=l+b>>>0,p=p+S>>>0}return e.endian([c,f,l,p])})._ff=function(r,n,t,e,o,u,i){var s=r+(n&t|~n&e)+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._gg=function(r,n,t,e,o,u,i){var s=r+(n&e|t&~e)+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._hh=function(r,n,t,e,o,u,i){var s=r+(n^t^e)+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._ii=function(r,n,t,e,o,u,i){var s=r+(t^(n|~e))+(o>>>0)+i;return(s<<u|s>>>32-u)+n},s._blocksize=16,s._digestsize=16,r.exports=function(r,n){if(null==r)throw new Error("Illegal argument "+r);var t=e.wordsToBytes(s(r,n));return n&&n.asBytes?t:n&&n.asString?i.bytesToString(t):e.bytesToHex(t)}},3939(r){var n,t;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return 16711935&t.rotl(r,8)|4278255360&t.rotl(r,24);for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(r){for(var n=[],t=0,e=0;t<r.length;t++,e+=8)n[e>>>5]|=r[t]<<24-e%32;return n},wordsToBytes:function(r){for(var n=[],t=0;t<32*r.length;t+=8)n.push(r[t>>>5]>>>24-t%32&255);return n},bytesToHex:function(r){for(var n=[],t=0;t<r.length;t++)n.push((r[t]>>>4).toString(16)),n.push((15&r[t]).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],t=0;t<r.length;t+=2)n.push(parseInt(r.substr(t,2),16));return n},bytesToBase64:function(r){for(var t=[],e=0;e<r.length;e+=3)for(var o=r[e]<<16|r[e+1]<<8|r[e+2],u=0;u<4;u++)8*e+6*u<=8*r.length?t.push(n.charAt(o>>>6*(3-u)&63)):t.push("=");return t.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],e=0,o=0;e<r.length;o=++e%4)0!=o&&t.push((n.indexOf(r.charAt(e-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(r.charAt(e))>>>6-2*o);return t}},r.exports=t},7206(r){function n(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}r.exports=function(r){return null!=r&&(n(r)||function(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&n(r.slice(0,0))}(r)||!!r._isBuffer)}},9083(r,n,t){!function(n){"use strict";var e={};r.exports?(e.bytesToHex=t(2287).bytesToHex,e.convertString=t(1375),r.exports=c):(e.bytesToHex=n.convertHex.bytesToHex,e.convertString=n.convertString,n.sha256=c);var o=[];!function(){function r(r){for(var n=Math.sqrt(r),t=2;t<=n;t++)if(!(r%t))return!1;return!0}function n(r){return 4294967296*(r-(0|r))|0}for(var t=2,e=0;e<64;)r(t)&&(o[e]=n(Math.pow(t,1/3)),e++),t++}();var u=function(r){for(var n=[],t=0,e=0;t<r.length;t++,e+=8)n[e>>>5]|=r[t]<<24-e%32;return n},i=function(r){for(var n=[],t=0;t<32*r.length;t+=8)n.push(r[t>>>5]>>>24-t%32&255);return n},s=[],a=function(r,n,t){for(var e=r[0],u=r[1],i=r[2],a=r[3],c=r[4],f=r[5],l=r[6],p=r[7],y=0;y<64;y++){if(y<16)s[y]=0|n[t+y];else{var g=s[y-15],h=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,v=s[y-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;s[y]=h+s[y-7]+m+s[y-16]}var d=e&u^e&i^u&i,x=(e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22),b=p+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&f^~c&l)+o[y]+s[y];p=l,l=f,f=c,c=a+b|0,a=i,i=u,u=e,e=b+(x+d)|0}r[0]=r[0]+e|0,r[1]=r[1]+u|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0,r[5]=r[5]+f|0,r[6]=r[6]+l|0,r[7]=r[7]+p|0};function c(r,n){r.constructor===String&&(r=e.convertString.UTF8.stringToBytes(r));var t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],o=u(r),s=8*r.length;o[s>>5]|=128<<24-s%32,o[15+(s+64>>9<<4)]=s;for(var c=0;c<o.length;c+=16)a(t,o,c);var f=i(t);return n&&n.asBytes?f:n&&n.asString?e.convertString.bytesToString(f):e.bytesToHex(f)}c.x2=function(r,n){return c(c(r,{asBytes:!0}),n)}}(this)}},n={};function t(e){var o=n[e];if(void 0!==o)return o.exports;var u=n[e]={exports:{}};return r[e].call(u.exports,u,u.exports,t),u.exports}var e={};return(()=>{"use strict";function r(r,t){var e="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=function(r,t){if(r){if("string"==typeof r)return n(r,t);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(r,t):void 0}}(r))||t&&r&&"number"==typeof r.length){e&&(r=e);var o=0,u=function(){};return{s:u,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){e=e.call(r)},n:function(){var r=e.next();return s=r.done,r},e:function(r){a=!0,i=r},f:function(){try{s||null==e.return||e.return()}finally{if(a)throw i}}}}function n(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=Array(n);t<n;t++)e[t]=r[t];return e}function e(n){var t=[{suffixes:"市",key:"city",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"區",key:"district",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"鄉鎮村里",key:"area",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"路街道",key:"road",process:function(r){return null===r?null:r.map(function(r){return r.replaceAll(/[\(\)（）]/gim,"").trim()})},type:0},{suffixes:"段",key:"road_section",process:function(r){for(var n=function(r){switch(r){case"一":return 1;case"二":return 2;case"三":return 3;case"四":return 4;case"五":return 5;case"六":return 6;case"七":return 7;case"八":return 8;case"九":return 9;case"十":return 10}return isNaN(parseInt(r))?0:parseInt(r)},t=String(r).length,e=[],o=0;o<t;o++){var u=n(String(r).charAt(o));10===u?e.length>0&&(e=[10*e.reduce(function(r,n){return r+n},0)]):e=[e.reduce(function(r,n){return r+n},0)+u]}return e},type:0},{suffixes:"巷",key:"alley",process:function(r){return null===r?null:r.map(function(r){return parseInt(r.trim().replaceAll(/[巷]/gim))})},type:0},{suffixes:"弄",key:"alley_branch",process:function(r){return null===r?null:r.map(function(r){return parseInt(r.trim().replaceAll(/[弄]/gim))})},type:0},{suffixes:"號",key:"doorplate",process:function(r){var n,t=String(r).match(/[0-9]+/gim);return t=(null===(n=t)||void 0===n?void 0:n.map(function(r){return null===r?null:parseInt(r)}))||null},type:0},{suffixes:"樓",key:"floornumber",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{key:"exit",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:2},{key:"direction",process:function(r){return null===r?null:r.map(function(r){return r.trim().replace(/[往向]/gim,"")})},type:1}];function e(r){function n(r,n){return 0===n?new RegExp(`([^市區鄉鎮村里路段街道巷弄號樓與]+[${r}])`,"gmi"):1===n?new RegExp("([往向]+[東南西北])","gmi"):2===n?new RegExp("([0-9]+[號]出口)","gmi"):void 0}for(var e={},o=0,u=t;o<u.length;o++){var i,s=u[o],a=n(null===(i=s)||void 0===i?void 0:i.suffixes,s.type);e[s.key]=s.process(String(r).match(a))}return e}return function(n){var o,u={},i=r(n);try{for(i.s();!(o=i.n()).done;)for(var s=e(o.value),a=0,c=t;a<c.length;a++){var f=c[a];u.hasOwnProperty(f.key)||(u[f.key]=[]),u[f.key]=u[f.key].concat(s[f.key])}}catch(r){i.e(r)}finally{i.f()}for(var l in u)u[l]=Array.from(new Set(u[l])).filter(function(r){return!!r}).sort(function(r,n){return"number"==typeof r&&"number"==typeof n?r-n:String(r).charCodeAt(0)-String(n).charCodeAt(0)});return u}(n)}var o=t(3503);t(9083);self.onmessage=function(r){var n=function(r){var n={};for(var t in r){var u=o(String(r[t].n).trim().replaceAll(/[\(（）\)\:：\~～]*/gim,"")),i=`ml_${u}`;n.hasOwnProperty(i)?(n[i].lo.push(r[t].lo),n[i].la.push(r[t].la),n[i].g.indexOf(r[t].g)<0&&n[i].g.push(r[t].g),n[i].r.push(r[t].r),n[i].s.push(r[t].s),n[i].v.push(r[t].v),n[i].a.push(e(r[t].a)),n[i].id.push(r[t].id)):n[i]={n:r[t].n,lo:[r[t].lo],la:[r[t].la],g:[r[t].g],r:[r[t].r],s:[r[t].s],v:[r[t].v],a:[e(r[t].a)],id:[r[t].id],hash:u}}return n}(r.data);self.postMessage(n)}})(),e=e.default})());
//# sourceMappingURL=638accc7d967aa4fb271.js.map