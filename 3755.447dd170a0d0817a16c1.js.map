{"version":3,"file":"3755.447dd170a0d0817a16c1.js","mappings":"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","sources":["webpack://bus/./src/interface/schedule-notification/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/route/details/index.ts","webpack://bus/./src/interface/register-notification/index.ts"],"sourcesContent":["import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = document.querySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\ntype ScheduleNotificationType = 'stop-on-route' | 'stop-on-location';\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, type: ScheduleNotificationType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnRoute(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnLocation(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nfunction initializeScheduleNotificationField(type: ScheduleNotificationType, parameters: Array<any>): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newElement.element);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function openScheduleNotification(type: ScheduleNotificationType, parameters: Array<any>): void {\n  pushPageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n  initializeScheduleNotificationField(type, parameters);\n}\n\nexport function closeScheduleNotification(): void {\n  revokePageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function scheduleNotificationForStopItemOnRoute(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = document.querySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nexport function scheduleNotificationForStopItemOnLocation(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = document.querySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n","import { FolderWithContent, isFolderContentSaved, listFoldersWithContent, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype SaveToFolderType = 'stop-on-route' | 'stop-on-location' | 'route' | 'route-on-route' | 'bus' | 'location' | 'location-on-route';\n\nconst SaveToFolderField = document.querySelector('.css_save_to_folder_field');\nconst SaveToFolderBodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst SaveToFolderListElement = elementQuerySelector(SaveToFolderBodyElement, '.css_save_to_folder_list');\n\nconst successfulSaveMessage = '已儲存至資料夾';\nconst failedSaveMessage = '無法儲存';\n\nfunction generateElementOfItem(item: FolderWithContent, type: SaveToFolderType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        saveStopItemOnRoute(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        saveStopItemOnLocation(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'route':\n      itemElement.onclick = function () {\n        saveRouteOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'route-on-route':\n      itemElement.onclick = function () {\n        saveRouteOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'location':\n      itemElement.onclick = function () {\n        saveLocationOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'location-on-route':\n      itemElement.onclick = function () {\n        saveLocationOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'bus':\n      // No action\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nasync function initializeSaveToFolderField(type: SaveToFolderType, parameters: Array<any>) {\n  const foldersWithContent = await listFoldersWithContent();\n  SaveToFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newItemElement.element);\n  }\n  SaveToFolderListElement.append(fragment);\n}\n\nexport function openSaveToFolder(type: SaveToFolderType, parameters: Array<any>): void {\n  pushPageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'true');\n  initializeSaveToFolderField(type, parameters);\n}\n\nexport function closeSaveToFolder(): void {\n  revokePageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nfunction saveStopItemOnRoute(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = document.querySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveStopItemOnLocation(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = document.querySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnDetailsPage(folderID: string, RouteID: number): void {\n  const actionButtonElement = document.querySelector('.css_route_details_field .css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"] .css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          actionButtonElement.setAttribute('highlighted', 'true');\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnRoute(folderID: string, RouteID: number): void {\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnDetailsPage(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnRoute(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n","import { isFolderContentSaved } from '../../../data/folder/index';\nimport { integrateRouteDetails } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../../tools/index';\nimport { pushPageHistory, revokePageHistory } from '../../index';\nimport { openSaveToFolder } from '../../save-to-folder/index';\nimport { shareRoutePermalink, showRoutePermalinkQRCode } from './actions';\nimport { setUpCalendarGroupSkeletonScreen, updateCalendarGroup } from './calendar';\nimport { setUppropertiesGroupSkeletonScreen, updatePropertiesField } from './properties';\n\nexport const RouteDetailsField = document.querySelector('.css_route_details_field');\nexport const RouteDetailsBodyElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body');\nexport const RouteDetailsGroupsElement = elementQuerySelector(RouteDetailsBodyElement, '.css_route_details_groups');\n\nexport const CalendarGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"calendar\"]');\nexport const CalendarGroupBodyElement = elementQuerySelector(CalendarGroupElement, '.css_route_details_group_body');\nexport const CalendarDaysElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_days');\nexport const CalendarEventGroupsElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_event_groups');\n\nexport const ActionsGroupElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"]');\nexport const svaeToFolderActionButtonElement = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\nexport const getPermalinkActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"get-permalink\"]');\nexport const showPermalinkQRCodeActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"show-permalink-qrcode\"]');\n\nexport const PropertiesGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"properties\"]');\nexport const PropertiesGroupBodyElement = elementQuerySelector(PropertiesGroupElement, '.css_route_details_group_body');\n\nasync function initializeRouteDetailsField(RouteID: number, PathAttributeId: Array<number>) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const existence = await isFolderContentSaved('route', RouteID);\n  svaeToFolderActionButtonElement.setAttribute('animation', booleanToString(playing_animation));\n  svaeToFolderActionButtonElement.setAttribute('highlighted', booleanToString(existence));\n  svaeToFolderActionButtonElement.onclick = function () {\n    openSaveToFolder('route', [RouteID]);\n  };\n  getPermalinkActionButton.setAttribute('animation', booleanToString(playing_animation));\n  getPermalinkActionButton.onclick = function () {\n    shareRoutePermalink(RouteID);\n  };\n  showPermalinkQRCodeActionButton.setAttribute('animation', booleanToString(playing_animation));\n  showPermalinkQRCodeActionButton.onclick = function () {\n    showRoutePermalinkQRCode(RouteID);\n  };\n  setUppropertiesGroupSkeletonScreen(PropertiesGroupElement);\n  setUpCalendarGroupSkeletonScreen();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteDetails(RouteID, PathAttributeId, requestID);\n  updatePropertiesField(integration.properties, false, playing_animation);\n  updateCalendarGroup(integration.calendar, false, playing_animation);\n}\n\nexport function openRouteDetails(RouteID: number, PathAttributeId: Array<number>): void {\n  pushPageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'true');\n  initializeRouteDetailsField(RouteID, PathAttributeId);\n}\n\nexport function closeRouteDetails(): void {\n  revokePageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'false');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (const CalendarEventGroupElement of CalendarEventGroupElements) {\n    CalendarEventGroupElement.remove();\n  }\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  for (const CalendarDayElement of CalendarDayElements) {\n    CalendarDayElement.remove();\n  }\n}\n","import { registerNotificationClient } from '../../data/notification/apis/registerNotificationClient/index';\nimport { getNotificationProvider, setNotificationProvider } from '../../data/notification/index';\nimport { elementQuerySelector } from '../../tools/elements';\nimport { isValidURL } from '../../tools/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst RegisterNotificationField = document.querySelector('.css_register_notification_field');\nconst RegisterNotificationBodyElement = elementQuerySelector(RegisterNotificationField, '.css_register_notification_body');\nconst RegisterNotificationGroupsElement = elementQuerySelector(RegisterNotificationBodyElement, '.css_register_notification_groups');\n\nconst ProviderInputElement = elementQuerySelector(RegisterNotificationGroupsElement, '.css_register_notification_group[group=\"provider\"] .css_register_notification_group_body input');\nconst RgistrationKeyInputElement = elementQuerySelector(RegisterNotificationGroupsElement, '.css_register_notification_group[group=\"registration-key\"] .css_register_notification_group_body input');\n\nfunction initializeRegisterNotificationField() {\n  ProviderInputElement.value = getNotificationProvider();\n  RgistrationKeyInputElement.value = '';\n}\n\nexport function openRegisterNotification(): void {\n  pushPageHistory('RegisterNotification');\n  RegisterNotificationField.setAttribute('displayed', 'true');\n  initializeRegisterNotificationField();\n  closePreviousPage();\n}\n\nexport function closeRegisterNotification(): void {\n  // revokePageHistory('RegisterNotification');\n  RegisterNotificationField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport async function saveFormulatedRegisterNotification() {\n  promptMessage('manufacturing', '處理中');\n  const provider = ProviderInputElement.value;\n  const registrationKey = RgistrationKeyInputElement.value;\n  if (!isValidURL(provider)) {\n    promptMessage('error', '無效的提供者');\n    return;\n  }\n  // register\n  setNotificationProvider(provider);\n  const registering = await registerNotificationClient(registrationKey);\n  if (registering) {\n    promptMessage('check_circle', '註冊成功');\n    return;\n  } else {\n    promptMessage('error', '註冊失敗');\n    return;\n  }\n}\n"],"names":["ScheduleNotificationField","document","querySelector","ScheduleNotificationBodyElement","elementQuerySelector","ScheduleNotificationListElement","generateElementOfItem","item","type","parameters","itemElement","createElement","classList","add","iconElement","iconSpanElement","appendChild","getIconElement","icon","nameElement","createTextNode","name","onclick","itemElementID","StopID","RouteID","EstimateTime","index","scheduleNotificationButtonElement","promptMessage","setAttribute","closeScheduleNotification","scheduleNotificationForStop","then","result","scheduleNotificationForStopItemOnRoute","scheduleNotificationForStopItemOnLocation","element","id","openScheduleNotification","pushPageHistory","innerHTML","_step","fragment","DocumentFragment","_iterator","_createForOfIteratorHelper","scheduleNotificationOptions","s","n","done","newElement","value","err","e","f","append","initializeScheduleNotificationField","revokePageHistory","SaveToFolderField","SaveToFolderBodyElement","SaveToFolderListElement","successfulSaveMessage","failedSaveMessage","folderID","saveToFolderButtonElement","saveStop","isFolderContentSaved","k","booleanToString","closeSaveToFolder","saveStopItemOnRoute","saveStopItemOnLocation","actionButtonElement","saveRoute","hash","saveLocation","_initializeSaveToFolderField","_asyncToGenerator","foldersWithContent","listFoldersWithContent","newItemElement","apply","arguments","openSaveToFolder","_x","_x2","initializeSaveToFolderField","RouteDetailsField","RouteDetailsBodyElement","RouteDetailsGroupsElement","CalendarGroupElement","CalendarGroupBodyElement","CalendarDaysElement","CalendarEventGroupsElement","ActionsGroupElement","svaeToFolderActionButtonElement","getPermalinkActionButton","showPermalinkQRCodeActionButton","PropertiesGroupElement","PropertiesGroupBodyElement","_initializeRouteDetailsField","PathAttributeId","playing_animation","getSettingOptionValue","existence","shareRoutePermalink","showRoutePermalinkQRCode","setUppropertiesGroupSkeletonScreen","setUpCalendarGroupSkeletonScreen","requestID","generateIdentifier","integration","integrateRouteDetails","updatePropertiesField","properties","updateCalendarGroup","calendar","openRouteDetails","initializeRouteDetailsField","RegisterNotificationField","RegisterNotificationBodyElement","RegisterNotificationGroupsElement","ProviderInputElement","RgistrationKeyInputElement","openRegisterNotification","getNotificationProvider","closePreviousPage","closeRegisterNotification","openPreviousPage"],"ignoreList":[],"sourceRoot":""}