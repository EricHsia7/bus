{"version":3,"file":"9ffb78b5631030422916.js","mappings":"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","sources":["webpack://bus/./src/data/apis/index.ts","webpack://bus/./src/data/apis/loader.ts"],"sourcesContent":["import { BusEvent } from './getBusEvent/index';\nimport { BusData } from './getBusData/index';\nimport { SimplifiedRoute } from './getRoute/index';\nimport { formatTime } from '../../tools/time';\n\nexport interface EstimateTimeStatus {\n  code: 0 | 0.5 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\n  text: string;\n  time: number;\n}\n\nexport function parseEstimateTime(EstimateTime: string, mode: number): EstimateTimeStatus {\n  if (typeof EstimateTime === 'string') {\n    const time = parseInt(EstimateTime);\n    if (time === -3) {\n      return { code: 6, text: '末班駛離', time };\n    }\n    if (time === -4) {\n      return { code: 5, text: '今日停駛', time };\n    }\n    if (time === -2) {\n      return { code: 4, text: '交通管制', time };\n    }\n    if (time === -1) {\n      return { code: 3, text: '未發車', time };\n    }\n    if (0 <= time && time <= 10) {\n      return { code: 2, text: '進站中', time };\n    }\n    if (10 < time && time <= 180) {\n      return { code: 1, text: formatTime(time, mode), time };\n    }\n    if (180 < time && time <= 250) {\n      return { code: 0.5, text: formatTime(time, mode), time };\n    }\n    if (250 < time) {\n      return { code: 0, text: formatTime(time, mode), time };\n    }\n  }\n  return { code: 7, text: '發生錯誤', time: -5 };\n}\n\ninterface Moment {\n  type: 'moment';\n  hours: number;\n  minutes: number;\n}\n\ninterface Range {\n  type: 'range';\n  min: number;\n  max: number;\n}\n\nexport function parseTimeCode(code: string, mode: number): Moment | Range {\n  if (mode === 0) {\n    var hours = 0;\n    var minutes = 0;\n    if (code.length === 4) {\n      hours = parseInt(code.substring(0, 2));\n      minutes = parseInt(code.substring(2, 4));\n    }\n    if (code.length === 2) {\n      minutes = parseInt(code);\n    }\n    return {\n      type: 'moment',\n      hours: hours,\n      minutes: minutes\n    };\n  } else {\n    if (mode === 1) {\n      var min = 0;\n      var max = 0;\n      if (code.length === 4) {\n        var number1 = parseInt(code.substring(0, 2));\n        var number2 = parseInt(code.substring(2, 4));\n        min = Math.min(number1, number2);\n        max = Math.max(number1, number2);\n      }\n      if (code.length === 2) {\n        var number = parseInt(code);\n        min = number;\n        max = number;\n      }\n      return {\n        type: 'range',\n        min: min,\n        max: max\n      };\n    }\n  }\n}\n\nexport interface ProcessedBusPosition {\n  longitude: number;\n  latitude: number;\n}\n\nexport interface ProcessedBus {\n  BusID: string;\n  onThisRoute: boolean;\n  position: ProcessedBusPosition;\n  index: number;\n}\n\nexport function processBuses(BusEvent: BusEvent, BusData: BusData, Route: SimplifiedRoute, RouteID: number, PathAttributeId: Array<number>): { [key: string]: Array<ProcessedBus> } {\n  var result = {};\n  var BusDataObj = {};\n  for (const BusDataItem of BusData) {\n    var thisBusID = BusDataItem.BusID;\n    BusDataObj[thisBusID] = BusDataItem;\n  }\n\n  for (let BusEventItem of BusEvent) {\n    let processedItem = {};\n\n    // collect data from 'BusEvent'\n    processedItem.CarType = BusEventItem.CarType;\n    processedItem.BusStatus = BusEventItem.BusStatus;\n    processedItem.BusID = BusEventItem.BusID;\n    processedItem.CarOnStop = BusEventItem.CarOnStop;\n\n    // check whether this bus is on the route\n    const thisRouteID = parseInt(BusEventItem.RouteID);\n    const thisBusID = BusEventItem.BusID;\n    let isOnThisRoute: boolean = false;\n    let index: number = 0;\n    if (thisRouteID === RouteID || PathAttributeId.indexOf(thisRouteID) > -1 || thisRouteID === RouteID * 10) {\n      isOnThisRoute = true;\n      index = String(BusEventItem.BusID).charCodeAt(0) * Math.pow(10, -5);\n    } else {\n      isOnThisRoute = false;\n      index = String(BusEventItem.BusID).charCodeAt(0);\n    }\n    processedItem.onThisRoute = isOnThisRoute;\n    processedItem.index = index;\n\n    // collect data from 'BusData'\n    let thisBusData = {};\n    if (BusDataObj.hasOwnProperty(thisBusID)) {\n      thisBusData = BusDataObj[thisBusID];\n    } else {\n      continue;\n    }\n    processedItem.position = {\n      latitude: parseFloat(thisBusData.Latitude),\n      longitude: parseFloat(thisBusData.Longitude)\n    };\n\n    // search data from 'Route'\n    let searchedRoute = {};\n    let isRouteSearched = false;\n    for (const key in Route) {\n      const thisRouteItem = Route[key];\n      const pid = thisRouteItem.pid;\n      if (pid.indexOf(thisRouteID) > -1) {\n        searchedRoute = thisRouteItem;\n        isRouteSearched = true;\n        break;\n      }\n    }\n    processedItem.RouteName = isRouteSearched ? searchedRoute.n : '未知路線';\n    processedItem.RouteID = isRouteSearched ? searchedRoute.id : null;\n\n    const StopKey = `s_${BusEventItem.StopID}`;\n    if (!result.hasOwnProperty(StopKey)) {\n      result[StopKey] = [];\n    }\n    result[StopKey].push(processedItem);\n  }\n  /*\n  for (var key in result) {\n    result[key] = result[key].sort(function (a, b) {\n      return a.index - b.index;\n    });\n  }\n  */\n  return result;\n}\n\ninterface FormattedBusStatus {\n  onStop: boolean;\n  situation: string;\n  text: string;\n}\n\ninterface FormattedBusPosition {\n  longitude: number;\n  latitude: number;\n}\n\nexport interface FormattedBus {\n  type: '一般' | '低底盤' | '大復康巴士' | '狗狗友善專車' | '未知類型';\n  carNumber: string;\n  status: FormattedBusStatus;\n  RouteName: string;\n  onThisRoute: boolean;\n  index: number;\n  position: FormattedBusPosition;\n}\n\nexport function parseCarType(CarType: '0' | '1' | '2' | '3'): string {\n  let type = '';\n  switch (CarType) {\n    case '0':\n      type = '一般';\n      break;\n    case '1':\n      type = '低底盤';\n      break;\n    case '2':\n      type = '大復康巴士';\n      break;\n    case '3':\n      type = '狗狗友善專車';\n      break;\n    default:\n      type = '未知類型';\n  }\n  return type;\n}\n\nexport function parseCarOnStop(CarOnStop: '0' | '1'): string {\n  let onStop = '';\n  switch (CarOnStop) {\n    case '0':\n      onStop = '離站';\n      break;\n    case '1':\n      onStop = '進站';\n      break;\n    default:\n      onStop = '未知狀態'; // Handle unexpected values if necessary\n  }\n  return onStop;\n}\n\nexport function parseBusStatus(BusStatus: '0' | '1' | '2' | '3' | '4' | '5' | '99'): string {\n  let situation = '';\n  switch (BusStatus) {\n    case '0':\n      situation = '正常';\n      break;\n    case '1':\n      situation = '車禍';\n      break;\n    case '2':\n      situation = '故障';\n      break;\n    case '3':\n      situation = '塞車';\n      break;\n    case '4':\n      situation = '緊急求援';\n      break;\n    case '5':\n      situation = '加油';\n      break;\n    case '99':\n      situation = '非營運狀態';\n      break;\n    default:\n      situation = '未知狀態'; // Handle unexpected values if necessary\n  }\n  return situation;\n}\n\nexport function formatBus(object: ProcessedBus): FormattedBus {\n  let result: FormattedBus = {};\n\n  const CarType = object.CarType;\n  const type = parseCarType(CarType);\n  result.type = type;\n\n  const CarOnStop = object.CarOnStop;\n  const onStop = parseCarOnStop(CarOnStop);\n\n  const BusStatus = object.BusStatus;\n  const situation = parseBusStatus(BusStatus);\n\n  result.carNumber = object.BusID;\n  result.status = {\n    onStop: onStop,\n    situation: situation,\n    text: `${onStop} | ${situation}`\n  };\n  result.RouteName = object.RouteName;\n  result.onThisRoute = object.onThisRoute;\n  result.index = object.index;\n  result.position = object.position;\n  return result;\n}\n\nexport function formatBusEvent(buses: Array<ProcessedBus>): Array<FormattedBus> {\n  let result = [];\n  for (const bus of buses) {\n    result.push(formatBus(bus));\n  }\n  return result;\n}\n","import { pakoInflate } from '../../tools/pako-inflate/index';\nimport { timeStampToNumber } from '../../tools/time';\nimport { recordRequest } from '../analytics/data-usage';\n\nlet dataReceivingProgress = {};\nexport let dataUpdateTime = {};\n\nexport async function fetchData(url: string, requestID: string, tag: string, fileType: 'json' | 'xml', connectionTimeoutDuration: number = 15 * 1000, loadingTimeoutDuration: number = 60 * 1000): Promise<object> {\n  const startTimeStamp = new Date().getTime();\n\n  // Create a connection timeout promise\n  const connectionTimeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error('Connection timed out')), connectionTimeoutDuration));\n\n  // Race between fetch and connection timeout\n  const response = await Promise.race([fetch(url), connectionTimeoutPromise]).catch((error) => {\n    // Handle connection timeout error\n    setDataReceivingProgress(requestID, tag, 0, true);\n    throw error;\n  });\n\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  const contentLength = parseInt(String(response.headers.get('content-length')));\n  let receivedLength = 0;\n  const reader = response.body.getReader();\n  const chunks = [];\n\n  // A utility function to read chunks with loading timeout\n  const readChunk = () => {\n    return new Promise(async (resolve, reject) => {\n      const loadingTimeout = setTimeout(() => {\n        reject(new Error('Loading timed out'));\n      }, loadingTimeoutDuration);\n\n      const { done, value } = await reader.read();\n      clearTimeout(loadingTimeout);\n\n      if (done) {\n        resolve({ done });\n      } else {\n        resolve({ done, value });\n      }\n    });\n  };\n\n  // Loop to read chunks with loading timeout for each chunk\n  while (true) {\n    const { done, value } = await readChunk().catch((error) => {\n      // Handle loading timeout error\n      setDataReceivingProgress(requestID, tag, receivedLength / contentLength, true);\n      throw error;\n    });\n\n    if (done) {\n      break;\n    }\n\n    chunks.push(value);\n    receivedLength += value.length;\n    setDataReceivingProgress(requestID, tag, receivedLength / contentLength, false);\n  }\n\n  // Concatenate all the chunks into a single Uint8Array\n  const uint8Array = new Uint8Array(receivedLength);\n  let position = 0;\n  for (const chunk of chunks) {\n    uint8Array.set(chunk, position);\n    position += chunk.length;\n  }\n\n  const endTimeStamp = new Date().getTime();\n  await recordRequest(requestID, { end_time: endTimeStamp, start_time: startTimeStamp, content_length: contentLength }, receivedLength < contentLength);\n\n  // Create a blob from the concatenated Uint8Array\n  const blob = new Blob([uint8Array]);\n  const gzip_blob = new Blob([blob.slice(0, blob.size)], { type: 'application/gzip' });\n  const buffer = await gzip_blob.arrayBuffer();\n  const inflatedData = await pakoInflate(buffer);\n\n  if (fileType === 'json') {\n    if (/^\\<\\!doctype html\\>/.test(inflatedData)) {\n      const alternativeData = await fetchData(url.replace('https://tcgbusfs.blob.core.windows.net/', 'https://erichsia7.github.io/bus-alternative-static-apis/'), requestID, tag, fileType, connectionTimeoutDuration, loadingTimeoutDuration);\n      return alternativeData;\n    } else {\n      return JSON.parse(inflatedData);\n    }\n  }\n\n  if (fileType === 'xml') {\n    return inflatedData;\n  }\n}\n\nexport function getDataReceivingProgress(requestID: string): number {\n  if (dataReceivingProgress.hasOwnProperty(requestID)) {\n    if (typeof dataReceivingProgress[requestID] === 'object') {\n      var total = 0;\n      var received = 0;\n      for (var key in dataReceivingProgress[requestID]) {\n        if (!dataReceivingProgress[requestID][key].expel) {\n          total += dataReceivingProgress[requestID][key].total;\n          received += dataReceivingProgress[requestID][key].progress;\n        }\n      }\n      var progress = Math.min(Math.max(received / total, 0), 1);\n      return progress === Infinity || isNaN(progress) ? 1 : progress;\n    }\n  }\n  return 1;\n}\n\nexport function setDataReceivingProgress(requestID: string, tag: string, progress: number, expel: boolean): void {\n  if (!dataReceivingProgress.hasOwnProperty(requestID)) {\n    dataReceivingProgress[requestID] = {};\n  }\n  var key = `u_${tag}`;\n  if (dataReceivingProgress[requestID].hasOwnProperty(key)) {\n    if (expel) {\n      dataReceivingProgress[requestID][key].expel = true;\n    } else {\n      dataReceivingProgress[requestID][key].expel = false;\n      dataReceivingProgress[requestID][key].progress = progress;\n    }\n  } else {\n    dataReceivingProgress[requestID][key] = { expel: false, progress: progress, total: 1 };\n  }\n}\n\nexport function deleteDataReceivingProgress(requestID: string): void {\n  if (dataReceivingProgress.hasOwnProperty(requestID)) {\n    delete dataReceivingProgress[requestID];\n  }\n}\n\nexport function setDataUpdateTime(requestID: string, timeStamp: string | number): void {\n  if (!dataUpdateTime.hasOwnProperty(requestID)) {\n    dataUpdateTime[requestID] = 0;\n  }\n  var timeNumber = 0;\n  if (typeof timeStamp === 'string') {\n    timeNumber = timeStampToNumber(timeStamp);\n  }\n  if (timeNumber > dataUpdateTime[requestID]) {\n    dataUpdateTime[requestID] = timeNumber;\n  }\n}\n\nexport function deleteDataUpdateTime(requestID: string): void {\n  if (dataUpdateTime.hasOwnProperty(requestID)) {\n    delete dataUpdateTime[requestID];\n  }\n}\n"],"names":["parseEstimateTime","EstimateTime","mode","time","parseInt","code","text","formatTime","parseTimeCode","hours","minutes","length","substring","type","min","max","number1","number2","Math","number","processBuses","BusEvent","BusData","Route","RouteID","PathAttributeId","_step","result","BusDataObj","_iterator","_createForOfIteratorHelper","s","n","done","BusDataItem","value","BusID","err","e","f","_step2","_iterator2","BusEventItem","processedItem","CarType","BusStatus","CarOnStop","thisRouteID","thisBusID","isOnThisRoute","index","indexOf","String","charCodeAt","pow","onThisRoute","thisBusData","hasOwnProperty","position","latitude","parseFloat","Latitude","longitude","Longitude","searchedRoute","isRouteSearched","key","thisRouteItem","pid","RouteName","id","StopKey","concat","StopID","push","parseCarType","parseCarOnStop","onStop","parseBusStatus","situation","formatBus","object","carNumber","status","formatBusEvent","buses","_step3","_iterator3","bus","_regeneratorRuntime","t","r","Object","prototype","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","arg","call","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","dataReceivingProgress","dataUpdateTime","fetchData","_x","_x2","_x3","_x4","_fetchData","_callee2","url","requestID","tag","fileType","connectionTimeoutDuration","loadingTimeoutDuration","startTimeStamp","connectionTimeoutPromise","response","contentLength","receivedLength","reader","chunks","readChunk","_yield$readChunk$catc","uint8Array","_i","_chunks","chunk","endTimeStamp","blob","gzip_blob","buffer","inflatedData","alternativeData","_args2","_context2","undefined","Date","getTime","_","reject","setTimeout","race","fetch","error","setDataReceivingProgress","ok","headers","get","body","getReader","_ref","_callee","loadingTimeout","_yield$reader$read","_context","read","clearTimeout","_x5","_x6","Uint8Array","set","recordRequest","end_time","start_time","content_length","Blob","size","arrayBuffer","pakoInflate","test","replace","JSON","parse","getDataReceivingProgress","total","received","expel","progress","Infinity","deleteDataReceivingProgress","setDataUpdateTime","timeStamp","timeNumber","timeStampToNumber","deleteDataUpdateTime"],"sourceRoot":""}