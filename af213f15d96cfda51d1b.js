"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[642],{904:(e,t,a)=>{a.d(t,{AE:()=>I,BM:()=>k,WR:()=>y,Z_:()=>L,f1:()=>x,gO:()=>C,kr:()=>A,l$:()=>w,p9:()=>E});var n=a(8024),i=a(3648),r=a(4927),s=a(6052),o=a(9333),d=a(8379),c=a(5693),l=a(7891),u=a(7908),f=a(5009),v=a(6104),p=(0,i.bv)(".rd"),h=(0,i.bv)(".sd"),m=100,g=(new Date).getTime(),b=["Home"];function y(e){var t=b.length;b[t-1]!==e&&b.push(e)}function A(e){if(b.indexOf(e)>-1){var t=b.length;b[t-1]===e&&b.pop()}}function L(){var e=b.length;if(e>1)switch(b[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.z1)();break;case"FolderEditor":(0,o.I6)();break;case"FolderManager":(0,d.m)();break;case"Search":(0,f.Bb)();break;case"Settings":(0,v.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.F)();break;case"RegisterNotification":(0,u.hy)()}}function w(){var e=b.length;if(e>1){var t=b[e-2];switch(b.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.pd)();break;case"FolderEditor":(0,o.uy)();break;case"FolderManager":(0,d.g)();break;case"Search":(0,f.rf)();break;case"Settings":(0,v.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$)();break;case"RegisterNotification":(0,u.XG)()}}}function k(){var e=0;(0,n.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,i.bv)(".rd svg.td").style.setProperty("--ud",`${e}px`)}function I(e){function t(){p.classList.add("vd"),p.addEventListener("animationend",function(){p.setAttribute("displayed","false"),p.classList.remove("vd"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-g<m?setTimeout(t,Math.max(1,a-g)):t()}function x(){h.setAttribute("displayed","true")}function C(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function E(){window.scrollTo({top:0,behavior:"instant"})}},1351:(e,t,a)=>{a.d(t,{ID:()=>x,co:()=>C,k9:()=>E,qp:()=>_});var n=a(8011),i=a(6788),r=a(6983),s=a(3459),o=a(8024),d=a(9469),c=a(3648),l=a(4537),u=a(904),f=a(9119),v=a(8279);function p(e,t,a,n,i,r,s){try{var o=e[r](s),d=o.value}catch(e){return void a(e)}o.done?t(d):Promise.resolve(d).then(n,i)}function h(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){p(r,n,i,s,o,"next",e)}function o(e){p(r,n,i,s,o,"throw",e)}s(void 0)})}}var m={},g=!0,b=!1,y=(0,c.bv)(".wd"),A=(0,c.aI)(y,".xd"),L=(0,c.aI)(A,".yd");function w(){var e=document.createElement("div");e.classList.add("zd");var t=document.createElement("div");t.classList.add("_d"),e.appendChild(t);var a=document.createElement("div");return a.classList.add("ae"),e.appendChild(a),{element:e,id:""}}function k(e,t,a){function n(e,n,i){function r(e,t){(0,c.aI)(e,"._d").innerHTML=(0,l.Z)(t.icon)}function s(e,t){(0,c.aI)(e,".ae").innerText=t.name}function d(e,t){e.onclick=t.action}function u(e,t){e.setAttribute("animation",(0,o.xZ)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,o.xZ)(t))}null===i?(r(e,n),s(e,n),d(e,n),u(e,a),f(e,t)):(i.key!==n.key&&(r(e,n),s(e,n),d(e,n)),a!==g&&u(e,a),t!==b&&f(e,t))}var i=e.actions,r=e.actionsQuantity,s=(0,c.jg)(L,".zd").length;if(r!==s){var d=s-r;if(d<0){for(var u=new DocumentFragment,f=0;f<Math.abs(d);f++){var v=w();u.appendChild(v.element)}L.append(u)}else for(var p=(0,c.jg)(L,".zd"),h=0;h<Math.abs(d);h++){p[s-1-h].remove()}}for(var y=(0,c.jg)(L,".zd"),A=0;A<r;A++){var k=y[A],I=i[A];if(m.hasOwnProperty("actions"))if(m.actions[A])n(k,I,m.actions[A]);else n(k,I,null);else n(k,I,null)}m=e,g=a,b=t}function I(){return(I=h(function*(e){var t=(0,s.Js)("playing_animation"),a=(0,o.zx)();k(yield(0,r.v)(e,a),!1,t)})).apply(this,arguments)}function x(e){(0,u.WR)("LocationDetails"),y.setAttribute("displayed","true"),function(){for(var e=(0,s.Js)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});k({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){I.apply(this,arguments)}(e)}function C(){(0,u.kr)("LocationDetails"),y.setAttribute("displayed","false")}function E(e){return T.apply(this,arguments)}function T(){return(T=h(function*(e){var t=(0,o.zx)(),a=yield(0,n.g)(t,1);(0,i.LQ)(t),(0,i.gC)(t);var r=`ml_${e}`;if(a.hasOwnProperty(r)){var s=a[r],c=(0,d.i)(1,{hash:e});navigator.share&&navigator.share({title:s.n,url:c}).then(function(){(0,f.a)("已分享地點","check_circle")}).catch(function(e){(0,f.a)("已取消分享","cancel")})}})).apply(this,arguments)}function _(e){return S.apply(this,arguments)}function S(){return(S=h(function*(e){var t=(0,o.zx)(),a=yield(0,n.g)(t,1);(0,i.LQ)(t),(0,i.gC)(t);var r=`ml_${e}`;if(a.hasOwnProperty(r)){var s=(0,d.i)(1,{hash:e});(0,v.X8)(s)}})).apply(this,arguments)}},3030:(e,t,a)=>{a.d(t,{eS:()=>fe,s_:()=>ee,so:()=>ue});var n=a(5767),i=a(9566),r=a(2757),s=a(77),o=a(5314),d=a(3459),c=a(7968),l=a(8024),u=a(3648),f=a(5579),v=a(4537),p=a(904),h=a(9119),m=a(3041),g=a(752),b=a(1351);function y(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return A(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function L(e,t,a,n,i,r,s){try{var o=e[r](s),d=o.value}catch(e){return void a(e)}o.done?t(d):Promise.resolve(d).then(n,i)}var w=(0,u.bv)(".be"),k=(0,u.aI)(w,".ce"),I=(0,u.aI)(k,".de"),x=(0,u.aI)(k,".ee"),C=(0,u.aI)(w,".fe"),E=(0,u.aI)(k,".ge"),T=(0,u.aI)(E,".he"),_=(0,u.aI)(k,".ie"),S=(0,u.aI)(_,".je"),$=(0,u.aI)(k,".ke .le"),M={},j=!0,P=!1,Z=0,H=0,R=0,D={},F=0,O=!1,z=1e4,N=15e3,Q=5e3,B=15e3,W=!0,q=0,J=0,U="",X=!1,G=!1,K=!1,V="",Y=20;function ee(){C.addEventListener("touchstart",function(){Z=Math.round(C.scrollLeft/F)},{passive:!0}),C.addEventListener("scroll",function(e){O=!0;var t=e.target.scrollLeft/F;H=t>Z?Z+1:Z-1;var a=D[`g_${Z}`]||{width:0,offset:0},n=D[`g_${H}`]||{width:0,offset:0},i=a.width+(n.width-a.width)*Math.abs(t-Z),r=-1*(a.offset+(n.offset-a.offset)*Math.abs(t-Z))+.5*F-.5*i;te(R,r,i-Y,t),t===H&&(Z=Math.round(C.scrollLeft/F),O=!1)},{passive:!0})}function te(e,t,a,n){C.style.setProperty("--me",e.toString()),S.style.setProperty("--ne",a.toString()),T.style.setProperty("--oe",`${t.toFixed(5)}px`),T.style.setProperty("--pe",n.toFixed(5))}function ae(e){var t=e;if(X){var a=t.detail.progress-1;$.style.setProperty("--se",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,ae)}function ne(){var e=(0,l.zx)(),t=document.createElement("div");t.classList.add("te"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var a=document.createElement("div");a.classList.add("ue");var n=document.createElement("div");n.classList.add("ve");var i=document.createElement("div");i.classList.add("we"),i.setAttribute("code","-1"),i.setAttribute("displayed","false");var r=document.createElement("div");r.classList.add("xe"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),n.appendChild(i),n.appendChild(r);var s=document.createElement("div");s.classList.add("ye");var o=document.createElement("div");o.classList.add("ze");var d=document.createElement("div");d.classList.add("_e");var c=document.createElement("div");c.classList.add("af");var f=document.createElement("div");f.classList.add("_a"),f.setAttribute("code","0"),f.setAttribute("displayed","false");var p=document.createElement("div");p.classList.add("ab"),p.setAttribute("code","0"),p.setAttribute("displayed","true"),c.appendChild(f),c.appendChild(p);var h=document.createElement("div");h.classList.add("bf"),h.innerHTML=(0,v.Z)("keyboard_arrow_down"),h.onclick=function(){!function(e){var t=(0,u.aI)(C,`.jf .mf .te#${e}`),a=(0,u.aI)(t,".df"),n=t.parentElement,i=(0,u.ji)(t,"te"),r=i.length,s=n.getBoundingClientRect(),o=t.getBoundingClientRect(),d=o.top-s.top,c="true"===t.getAttribute("stretched"),l="true"===t.getAttribute("animation");if(l){var f=c?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--kg",`${d}px`);for(var v=0;v<r;v++){var p=i[v];p.setAttribute("push-direction",f),p.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var e=0;e<r;e++){var a=i[e];a.setAttribute("push-direction","0"),a.setAttribute("push-state","0")}t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var e=0;e<r;e++){i[e].setAttribute("push-state","2")}},{once:!0})}c?(l?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}(e)};var m=document.createElement("div");m.classList.add("cf"),d.appendChild(c),d.appendChild(h),d.appendChild(m),a.appendChild(n),a.appendChild(s),a.appendChild(o),a.appendChild(d);var g=document.createElement("div");g.classList.add("df"),g.setAttribute("displayed","false");var b=document.createElement("div");b.classList.add("ef");var y=document.createElement("div");y.classList.add("ff"),y.setAttribute("highlighted","true"),y.setAttribute("type","tab"),y.setAttribute("code","0");var A=document.createElement("div");A.classList.add("gf"),A.innerHTML=(0,v.Z)("directions_bus"),y.appendChild(A),y.appendChild(document.createTextNode("公車")),y.onclick=function(){ve(e,0)};var L=document.createElement("div");L.classList.add("ff"),L.setAttribute("highlighted","false"),L.setAttribute("type","tab"),L.setAttribute("code","1");var w=document.createElement("div");w.classList.add("gf"),w.innerHTML=(0,v.Z)("departure_board"),L.appendChild(w),L.appendChild(document.createTextNode("抵達時間")),L.onclick=function(){ve(e,1)};var k=document.createElement("div");k.classList.add("ff"),k.setAttribute("highlighted","false"),k.setAttribute("type","save-to-folder");var I=document.createElement("div");I.classList.add("gf"),I.innerHTML=(0,v.Z)("folder"),k.appendChild(I),k.appendChild(document.createTextNode("儲存"));var x=document.createElement("div");x.classList.add("ff"),x.setAttribute("highlighted","false"),x.setAttribute("type","schedule-notification"),x.setAttribute("enabled","true");var E=document.createElement("div");E.classList.add("gf"),E.innerHTML=(0,v.Z)("notifications"),x.appendChild(E),x.appendChild(document.createTextNode("到站通知")),b.appendChild(y),b.appendChild(L),b.appendChild(k),b.appendChild(x);var T=document.createElement("div");T.classList.add("hf"),T.setAttribute("displayed","true");var _=document.createElement("div");return _.classList.add("if"),_.setAttribute("displayed","false"),g.appendChild(b),g.appendChild(T),g.appendChild(_),t.appendChild(a),t.appendChild(g),{element:t,id:e}}function ie(){var e=document.createElement("div");e.classList.add("jf");var t=document.createElement("div");t.classList.add("kf");var a=document.createElement("div");a.classList.add("lf"),t.appendChild(a);var n=document.createElement("div");return n.classList.add("mf"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function re(){var e=document.createElement("div");e.classList.add("nf");var t=document.createElement("span");return e.appendChild(t),{element:e,id:""}}function se(){var e=document.createElement("div");e.classList.add("of");var t=document.createElement("div");t.classList.add("pf");var a=document.createElement("div");return a.classList.add("qf"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function oe(e,t,a){function n(e,n,r){function o(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,o=n.right,d=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".af"),f=(0,u.aI)(l,"._a"),v=(0,u.aI)(l,".ab");f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,a&&s>0&&i<c&&o>0&&r<d?(v.addEventListener("animationend",function(){v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,v.classList.remove("kb"),f.setAttribute("displayed","false")},{once:!0}),f.setAttribute("displayed","true"),v.classList.add("kb")):(v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text)}function d(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,o=n.right,d=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".ve"),f=(0,u.aI)(l,".we"),v=(0,u.aI)(l,".xe");f.setAttribute("code",t.ranking.code.toString()),f.innerText=t.ranking.text,a&&s>0&&i<c&&o>0&&r<d?(v.addEventListener("animationend",function(){v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,v.classList.remove("rf"),f.setAttribute("displayed","false")},{once:!0}),f.setAttribute("displayed","true"),v.classList.add("rf")):(v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text)}function c(e,t){(0,u.aI)(e,".ye").innerText=t.route_direction}function p(e,t){(0,u.aI)(e,".ze").innerText=t.route_name}function h(e,t){(0,u.aI)(e,".hf").innerHTML=0===t.buses.length?'<div class="sf">目前沒有公車可顯示</div>':t.buses.map(function(e){return`<div class="tf" on-this-route="${e.onThisRoute}"><div class="uf"><div class="vf">${(0,v.Z)("directions_bus")}</div><div class="wf">${e.carNumber}</div></div><div class="xf"><div class="yf">路線：${e.RouteName}</div><div class="zf">狀態：${e.status.text}</div><div class="_f">類型：${e.type}</div></div></div>`}).join("")}function b(e,t){(0,u.aI)(e,".if").innerHTML=0===t.busArrivalTimes.length?'<div class="ag">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map(function(e){return`<div class="bg"><div class="cg"><div class="dg">${(0,v.Z)("calendar_view_day")}</div><div class="eg">${e.personalSchedule.name}</div><div class="fg">週${(0,f.kd)(e.day).name} ${(0,f.pn)(e.personalSchedule.period.start)} - ${(0,f.pn)(e.personalSchedule.period.end)}</div></div><div class="gg">${e.chart}</div></div>`}).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function A(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function L(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}function w(e,t){var a=(0,u.aI)(e,".df"),n=(0,u.aI)(a,".ef"),r=(0,u.aI)(n,'.ff[type="save-to-folder"]');r.onclick=function(){(0,m.B)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,i.LH)("stop",t.stopId).then(function(e){r.setAttribute("highlighted",(0,l.xZ)(e))})}function k(e,t){var a=(0,u.aI)(e,".df"),n=(0,u.aI)(a,".ef"),i=(0,u.aI)(n,'.ff[type="schedule-notification"]');i.onclick=function(){(0,g.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var r=(0,s.Zc)(t.stopId);i.setAttribute("highlighted",(0,l.xZ)(r))}null===r?(o(e,n,a),d(e,n,a),c(e,n),p(e,n),h(e,n),b(e,n),y(e,t),A(e,a),L(e,t),w(e,n),k(e,n)):(n.status.time!==r.status.time&&(o(e,n,a),k(e,n)),r.ranking.number===n.ranking.number&&r.ranking.code===n.ranking.code||d(e,n,a),r.stopId!==n.stopId&&(c(e,n),p(e,n),w(e,n)),(0,l.hw)(r.buses,n.buses)||h(e,n),(0,l.hw)(r.busArrivalTimes,n.busArrivalTimes)||b(e,n),a!==j&&A(e,a),t!==P&&(y(e,t),L(e,t)))}function r(e,n,i){function r(e,t){(0,u.aI)(e,".pf").innerHTML=(0,v.Z)(t.icon)}function s(e,t){(0,u.aI)(e,".qf").innerHTML=t.value}function o(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}null===i?(r(e,n),s(e,n),o(e,a),d(e,t)):((0,l.hw)(i.icon,n.icon)||r(e,n),(0,l.hw)(i.value,n.value)||s(e,n),a!==j&&o(e,a),t!==P&&d(e,t))}var o=(0,p.gO)("window"),d=o.width,h=o.height,y=e.groupQuantity,A=e.itemQuantity,L=e.groupedItems,w=e.groups;R=y,F=d;for(var k=0,S=0;S<y;S++){var $=(0,c.q_)(w[`g_${S}`].name,500,"17px",'"Noto Sans TC", sans-serif')+Y;D[`g_${S}`]={width:$,offset:k},k+=$}var H=-1*D[`g_${Z}`].offset+.5*F-.5*D[`g_${Z}`].width;O||te(R,H,D[`g_${Z}`].width-Y,Z),I.innerHTML=`<span>${e.LocationName}</span>`,I.setAttribute("animation",(0,l.xZ)(a)),I.setAttribute("skeleton-screen",(0,l.xZ)(t)),x.onclick=function(){(0,b.ID)(e.hash)},E.setAttribute("animation",(0,l.xZ)(a)),E.setAttribute("skeleton-screen",(0,l.xZ)(t)),_.setAttribute("skeleton-screen",(0,l.xZ)(t));var z=(0,u.jg)(C,".jf").length;if(y!==z){var N=z-y;if(N<0){for(var Q=new DocumentFragment,B=new DocumentFragment,W=0;W<Math.abs(N);W++){var q=ie();Q.appendChild(q.element);var J=re();B.appendChild(J.element)}C.append(Q),T.append(B)}else for(var U=(0,u.jg)(C,".jf"),X=(0,u.jg)(T,".nf"),G=0;G<Math.abs(N);G++){var K=z-1-G;U[K].remove(),X[K].remove()}}for(var V=(0,u.jg)(C,".jf"),ee=0;ee<y;ee++){var ae=`g_${ee}`,oe=V[ee],de=(0,u.jg)(oe,".mf .te").length;if(A[ae]!==de){var ce=de-A[ae];if(ce<0)for(var le=(0,u.aI)(oe,".mf"),ue=0;ue<Math.abs(ce);ue++){var fe=ne();le.appendChild(fe.element)}else for(var ve=(0,u.jg)(oe,".mf .te"),pe=0;pe<Math.abs(ce);pe++){ve[de-1-pe].remove()}}var he=(0,u.jg)((0,u.jg)(C,".jf")[ee],".kf .lf .of").length,me=w[ae].properties.length;if(me!==he){var ge=he-me;if(ge<0)for(var be=(0,u.aI)(oe,".kf"),ye=(0,u.aI)(be,".lf"),Ae=0;Ae<Math.abs(ge);Ae++){var Le=se();ye.appendChild(Le.element)}else for(var we=(0,u.aI)(oe,".kf"),ke=(0,u.aI)(we,".lf"),Ie=(0,u.jg)(ke,".of"),xe=0;xe<Math.abs(ge);xe++){Ie[he-1-xe].remove()}}}for(var Ce=(0,u.jg)(T,".nf"),Ee=(0,u.jg)(C,".jf"),Te=0;Te<y;Te++){var _e=`g_${Te}`,Se=Ce[Te];(0,u.aI)(Se,"span").innerText=w[_e].name,Se.style.setProperty("--hg",`${D[_e].width}px`),Se.style.setProperty("--ig",Te.toString());for(var $e=Ee[Te],Me=(0,u.jg)($e,".kf .lf .of"),je=(0,u.jg)($e,".mf .te"),Pe=w[_e].properties.length,Ze=0;Ze<Pe;Ze++){var He=w[_e].properties[Ze],Re=Me[Ze];if(M.hasOwnProperty("groups"))if(M.groups.hasOwnProperty(_e))if(M.groups[_e].properties[Ze])r(Re,He,M.groups[_e].properties[Ze]);else r(Re,He,null);else r(Re,He,null);else r(Re,He,null)}for(var De=0;De<A[_e];De++){var Fe=je[De],Oe=L[_e][De];if(M.hasOwnProperty("groupedItems"))if(M.groupedItems.hasOwnProperty(_e))if(M.groupedItems[_e][De])n(Fe,Oe,M.groupedItems[_e][De]);else n(Fe,Oe,null);else n(Fe,Oe,null);else n(Fe,Oe,null)}}M=e,j=a,P=t}function de(){return ce.apply(this,arguments)}function ce(){var e;return e=function*(){var e=(0,d.Js)("playing_animation"),t=(0,d.Js)("refresh_interval"),a=(0,p.gO)("location-bus-arrival-time-chart");W=t.dynamic,N=t.baseInterval,X=!0,U=(0,l.zx)(),$.setAttribute("refreshing","true"),$.classList.remove("re"),document.addEventListener(U,ae);var i=yield(0,r.R)(V,a.width,a.height,U);oe(i,!1,e);var s=0;W&&(s=yield(0,n.wz)()),q=(new Date).getTime(),J=W?Math.max(q+Q,i.dataUpdateTime+N/s):q+N,B=Math.max(Q,J-q),X=!1,$.setAttribute("refreshing","false"),$.style.setProperty("--qe",`${B}ms`),$.classList.add("re")},ce=function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){L(r,n,i,s,o,"next",e)}function o(e){L(r,n,i,s,o,"throw",e)}s(void 0)})},ce.apply(this,arguments)}function le(){de().then(function(){G?setTimeout(function(){le()},Math.max(Q,J-(new Date).getTime())):K=!1}).catch(function(e){G?((0,h.a)(`地點網路連線中斷，將在${z/1e3}秒後重試。`,"error"),setTimeout(function(){le()},z)):K=!1})}function ue(e){(0,p.WR)("Location"),(0,o.XK)("location",e),V=e,Z=0,w.setAttribute("displayed","true"),C.scrollLeft=0,function(){for(var e=(0,d.Js)("playing_animation"),t=(0,p.gO)("window"),a=(t.width,t.height),n={g_0:Math.floor(a/50)+5,g_1:Math.floor(a/50)+5},i={},r=0;r<2;r++){var s=`g_${r}`;i[s]=[];for(var o=0;o<n[s];o++)i[s].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}oe({groupedItems:i,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:n,LocationName:"載入中",hash:"",dataUpdateTime:0},!0,e)}(),G||(G=!0,K?de():(K=!0,le())),(0,p.Z_)()}function fe(){w.setAttribute("displayed","false"),G=!1,(0,p.l$)()}function ve(e,t){var a,n=(0,u.aI)(C,`.jf .mf .te#${e}`),i=(0,u.aI)(n,".df"),r=(0,u.aI)(i,".ef"),s=y((0,u.jg)(r,'.ff[highlighted="true"][type="tab"]'));try{for(s.s();!(a=s.n()).done;){a.value.setAttribute("highlighted","false")}}catch(e){s.e(e)}finally{s.f()}switch((0,u.aI)(r,`.ff[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,u.aI)(n,".hf").setAttribute("displayed","true"),(0,u.aI)(n,".if").setAttribute("displayed","false");break;case 1:(0,u.aI)(n,".hf").setAttribute("displayed","false"),(0,u.aI)(n,".if").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=af213f15d96cfda51d1b.js.map