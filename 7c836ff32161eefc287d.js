"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[127],{752(e,t,n){n.d(t,{a:()=>f,b:()=>p});var a=n(3422),i=n(8179),r=n(4537),o=n(904),c=n(9119),d=(0,i.c)(".bq"),s=(0,i.e)(d,".fq"),u=(0,i.e)(s,".gq");function l(e,t,n,o,d){var s=(0,i.a)();s.classList.add("hq");var u=(0,i.a)();u.classList.add("iq");var l=document.createElement("span");l.appendChild((0,r.b)(e.icon)),u.appendChild(l);var p=(0,i.a)();p.classList.add("jq"),p.innerText=e.name;var h=e.index;return s.onclick=function(){!function(e,t,n,i,r){(0,c.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),f(),(0,a.m)(t,n,i,r).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,n,o,d,h)},s.appendChild(u),s.appendChild(p),s}function p(e,t,n,i){(0,o.d)("ScheduleNotification"),d.setAttribute("displayed","true"),function(e,t,n,i){u.innerHTML="";var r=new DocumentFragment;for(var o of a.n){var c=l(o,e,t,n,i);r.appendChild(c)}u.append(r)}(e,t,n,i)}function f(){(0,o.f)("ScheduleNotification"),d.setAttribute("displayed","false")}},928(){},1077(){},1308(){},1603(){},1818(){},1844(){},2239(){},2994(e,t,n){n.d(t,{a:()=>y,b:()=>g});var a=n(467),i=n(4225),r=n(3459),o=n(8179),c=n(8024),d=n(904),s=[],u=!1,l=!1,p=(0,o.c)(".kq"),f=(0,o.e)(p,".oq"),h=(0,o.e)(f,".pq");function v(){var e=(0,o.a)();e.classList.add("qq");var t=(0,o.a)();t.classList.add("rq");var n=(0,o.a)();return n.classList.add("sq"),e.appendChild(t),e.appendChild(n),e}function b(e,t,n){function a(e,a,i){function r(e,t){(0,o.e)(e,".sq").innerText=t.size}function d(e,t){(0,o.e)(e,".rq").innerText=t.category.name}function s(e,t){e.setAttribute("animation",(0,c.a)(t))}function p(e,t){e.setAttribute("skeleton-screen",(0,c.a)(t))}i?(a.category.key!==i.category.key&&(d(e,a),r(e,a)),a.size!==i.size&&r(e,a),u!==n&&s(e,n),l!==t&&p(e,t)):(r(e,a),d(e,a),s(e,n),p(e,t))}var i=[];for(var r in e.categorizedSizes){var d=e.categorizedSizes[r];i.push(d)}var p=i.length,f=Array.from((0,o.d)(h,".qq")),b=f.length;if(p!==b){var m=b-p;if(m<0){for(var g=new DocumentFragment,y=0;y>m;y--){var k=v();g.appendChild(k),f.push(k)}h.appendChild(g)}else if(m>0)for(var A=b-1,C=b-m-1;A>C;A--)f[A].remove(),f.splice(A,1)}for(var L=0;L<p;L++){var w=s[L],x=i[L],E=f[L];a(E,x,w||null)}s=i,l=t,u=n}function m(){return(m=(0,a.a)(function*(){var e=(0,r.b)("playing_animation");!function(){for(var e=(0,r.b)("playing_animation"),t=(0,d.e)("window").height,n=Math.min(7,Math.floor(t/55)+2),a={categorizedSizes:{},totalSize:0},i=0;i<n;i++){var o=`store-${i}`;a.categorizedSizes[o]={category:{name:"",key:o},size:`size-${i}`}}b(a,!0,e)}(),b(yield(0,i.a)(),!1,e)})).apply(this,arguments)}function g(){p.setAttribute("displayed","true"),function(){m.apply(this,arguments)}()}function y(){p.setAttribute("displayed","false")}},3041(e,t,n){n.d(t,{a:()=>b,b:()=>v});var a=n(9566),i=n(8179),r=n(8024),o=n(4537),c=n(904),d=n(9119),s=(0,i.c)(".tp"),u=(0,i.e)(s,".xp"),l=(0,i.e)(u,".yp"),p="已儲存至資料夾",f="無法儲存";function h(e,t,n,c){var s=(0,i.a)();s.classList.add("zp");var u=(0,i.a)();u.classList.add("_p");var l=document.createElement("span");l.appendChild((0,o.b)(e.icon)),u.appendChild(l);var h=(0,i.a)();switch(h.classList.add("aq"),h.innerText=e.name,s.appendChild(u),s.appendChild(h),t){case"stop":s.onclick=function(){(0,a.n)(e.id,n[0],n[1]).then(function(e){e?(0,a.e)("stop",n[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,d.a)("folder",p),b())}):(0,d.a)("warning",f)})};break;case"route":s.onclick=function(){(0,a.m)(e.id,n[0]).then(function(e){e?(0,a.e)("route",n[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,d.a)("folder",p),b())}):(0,d.a)("warning",f)})};break;case"location":s.onclick=function(){(0,a.l)(e.id,n[0]).then(function(e){e?(0,a.e)("location",n[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,d.a)("folder",p),b())}):(0,d.a)("warning",f)})}}return s}function v(e,t,n){(0,c.d)("SaveToFolder"),s.setAttribute("displayed","true"),function(e,t,n){var i=(0,a.j)();l.innerHTML="";var r=new DocumentFragment;for(var o of i){var c=h(o,e,t,n);r.appendChild(c)}l.append(r)}(e,t,n)}function b(){(0,c.f)("SaveToFolder"),s.setAttribute("displayed","false")}},3381(){},3425(){},3534(){},3749(){},5009(e,t,n){n.d(t,{a:()=>V,b:()=>B,c:()=>U,d:()=>J,e:()=>Q});var a=n(8134),i=n(8179),r=n(7968),o=n(8024),c=n(4781),d=n(4884),s=n(6082),u=n(4537),l=n(904),p=n(3030),f=n(9119),h=n(4690),v=[],b=(0,i.c)(".fo"),m=(0,i.e)(b,".go"),g=(0,i.e)(b,".no"),y=(0,i.e)(m,".ho #search_input"),k=(0,i.e)(m,".ho svg"),A=(0,i.e)(k,'text[component="text"]'),C=(0,i.e)(k,'path[component="cursor"]'),L=(0,i.e)(m,".mo"),w=(0,i.e)(g,".oo"),x=(0,i.e)(g,".so"),E="400",T="20px",q='"Noto Sans TC", sans-serif',S=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],_=(0,l.e)("head-two-button"),z=_.width,$=_.height,F=!1,D="",M=0;function j(){var e=y.value,t=e.substring(0,e.length-1);y.value=t,P(),G(),O(),(0,l.g)()}function H(){y.value="",P(),G(),O(),(0,l.g)()}function N(e){e.preventDefault(),y.focus(),(0,l.g)()}function R(){!function(){if(!F){F=!0;var e=new DocumentFragment;for(var t of S)for(var n of t){var a=document.createElement("button");a.classList.add("to");var i=(0,o.j)()?"touchstart":"mousedown";switch(n){case"刪除":a.addEventListener(i,j),a.appendChild((0,u.b)("backspace"));break;case"清空":a.addEventListener(i,H),a.innerText=n;break;case"鍵盤":a.addEventListener(i,N),a.appendChild((0,u.b)("keyboard"));break;default:a.addEventListener(i,function(e){return function(){var t,n;t=e,n=`${y.value}${t}`,y.value=n,P(),G(),O(),(0,l.g)()}}(n)),a.innerText=n}e.appendChild(a)}x.append(e)}}(),x.setAttribute("displayed","true"),G()}function B(){y.addEventListener("paste",function(){O(),P()}),y.addEventListener("cut",function(){O(),P()}),y.addEventListener("selectionchange",function(){O(),P()}),document.addEventListener("selectionchange",function(){O(),P()}),y.addEventListener("keyup",function(){O(),P()}),y.addEventListener("scroll",function(){O()})}function I(){return parseInt(L.getAttribute("type"))}function O(){var e=y.scrollLeft,t=y.value,n=y.selectionStart,a=y.selectionEnd,i=0===t.length,c=i?"搜尋路線、地點、公車":t,d=i?0:n,s=d!==(i?0:a),u=(0,r.c)(c,E,T,q),l=(0,r.c)(c.substring(0,d),E,T,q),p=-1*e,f=u[0]+($-u[2])/2;A.textContent=c,A.setAttribute("transform",`translate(${p} ${f})`),C.setAttribute("transform",`translate(${i?1:Math.max(Math.min(l[1]+p,z-1),1)} 0)`),A.setAttribute("empty",(0,o.a)(i)),C.setAttribute("selection",(0,o.a)(s)),y.setAttribute("selection",(0,o.a)(s))}function G(){var e=y.value,t=e.length,n=(0,r.c)(e,E,T,q);y.setSelectionRange(t,t),y.scrollTo({left:n[1]-z})}function J(){_=(0,l.e)("head-two-button"),z=_.width,$=_.height,k.setAttribute("viewBox",`0 0 ${z} ${$}`),G(),O()}function K(){var e=(0,i.a)();e.classList.add("po");var t=(0,i.a)();t.classList.add("ro");var n=(0,i.a)();return n.classList.add("qo"),n.appendChild((0,u.a)()),e.appendChild(n),e.appendChild(t),e}function P(){var e=["route","location_on","directions_bus"];function t(t,n,a){function r(t,n){var a=(0,i.e)(n,".qo");(0,u.c)(a,e[t.item.type])}function o(e,t){(0,i.e)(t,".ro").innerText=e.item.n}function c(e,t){switch(e.item.type){case 0:t.onclick=function(){(0,h.c)(e.item.id,e.item.pid)};break;case 1:t.onclick=function(){(0,p.c)(e.item.hash)};break;case 2:t.onclick=function(){(0,d.c)(e.item.id)}}}a?(n.item.type!==a.item.type&&r(n,t),n.item.id!==a.item.id&&(o(n,t),c(n,t))):(r(n,t),o(n,t),c(n,t))}var n=I(),r=y.value;if(!(0,c.a)(r)&&(r!==D||n!==M)){var o=(0,a.b)(r,n,30),s=o.length,l=Array.from((0,i.d)(w,".po")),f=l.length;if(s!==f){var b=f-s;if(b<0){for(var m=new DocumentFragment,g=0;g>b;g--){var k=K();m.appendChild(k),l.push(k)}w.appendChild(m)}else if(b>0)for(var A=f-1,C=f-b-1;A>C;A--)l[A].remove(),l.splice(A,1)}for(var L=0;L<s;L++){var x=v[L],E=o[L],T=l[L];t(T,E,x||null)}v=o}D=r,M=n}function Q(){var e=I(),t=-1;t=e>=-1&&e<2?e+1:-1;(0,u.c)(L,["filter_list","route","location_on","directions_bus"][t+1]),L.setAttribute("type",t.toString()),P()}function U(){s.a?((0,l.d)("Search"),b.setAttribute("displayed","true"),R(),(0,a.a)()):(0,f.a)("download_for_offline","資料還在下載中")}function V(){(0,l.f)("Search"),x.setAttribute("displayed","false"),b.setAttribute("displayed","false")}},5392(){},6018(){},6104(e,t,n){n.d(t,{a:()=>A,b:()=>C,c:()=>w,d:()=>k,e:()=>T,f:()=>E,g:()=>x});var a=n(467),i=n(5976),r=n(5427),o=n(3459),c=n(3251),d=n(4311),s=n(8179),u=n(8024),l=n(251),p=n(4537),f=n(904),h=n(9119),v=(0,s.c)(".uo"),b=(0,s.e)(v,".dp"),m=(0,s.e)(b,".fp");function g(e){var t=(0,s.a)();t.classList.add("hp"),t.setAttribute("type",e.type);var n=(0,s.a)();n.classList.add("jp");var a=document.createElement("span");a.appendChild((0,p.b)(e.icon)),n.appendChild(a);var i=(0,s.a)();i.classList.add("kp"),i.innerText=e.name;var r=(0,s.a)();r.classList.add("mp"),r.innerText=e.status;var o=(0,s.a)();o.classList.add("np");var c=document.createElement("span");return c.appendChild((0,p.b)("arrow_forward_ios")),o.appendChild(c),"function"==typeof e.action?t.onclick=function(){e.action()}:"string"==typeof e.action&&t.setAttribute("onclick",e.action),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(o),t}function y(){return(y=(0,a.a)(function*(){var e=yield(0,o.f)();m.innerHTML="";var t=new DocumentFragment;for(var n of e){var a=g(n);t.appendChild(a)}m.append(t)})).apply(this,arguments)}function k(){(0,f.d)("Settings"),v.setAttribute("displayed","true"),function(){y.apply(this,arguments)}()}function A(){(0,f.f)("Settings"),v.setAttribute("displayed","false")}function C(){return L.apply(this,arguments)}function L(){return(L=(0,a.a)(function*(){(0,h.a)("manufacturing","資料匯出中");var e=yield(0,i.a)();(0,l.a)(e,"application/json","bus-export.json")})).apply(this,arguments)}function w(){var e=(0,u.c)(),t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.setAttribute("name",e),t.id=e,t.classList.add("sp"),t.addEventListener("change",function(t){if(0===t.target.files.length)(0,s.c)(`body #${e}`).remove();else{var n=t.target.files[0],a=new FileReader;a.onload=function(t){var n=t.target.result;(0,r.a)(n).then(function(t){t?(0,h.a)("check_circle","已匯入資料"):(0,h.a)("error","無法匯入資料"),(0,s.c)(`body #${e}`).remove()})},a.readAsText(n)}},{once:!0}),t.addEventListener("cancel",function(){(0,s.c)(`body #${e}`).remove()},{once:!0}),document.body.append(t),(0,s.c)(`body #${e}`).click()}function x(){var e=(0,c.e)();window.open(e)}function E(){window.open("https://github.com/EricHsia7/bus")}function T(){(0,d.a)().then(function(e){switch(e){case"granted":(0,h.a)("check_circle","已開啟永久儲存");break;case"denied":(0,h.a)("cancel","永久儲存權限已被拒絕");break;case"unsupported":(0,h.a)("warning","此瀏覽器不支援永久儲存");break;default:(0,h.a)("error","發生錯誤")}})}},6166(e,t,n){n.d(t,{a:()=>h,b:()=>f});var a=n(3459),i=n(8179),r=n(904),o=(0,i.c)(".vo"),c=(0,i.e)(o,".ep"),d=(0,i.e)(c,".gp"),s=(0,i.e)(c,".rp"),u=(0,i.e)(o,".xo"),l=(0,i.e)(u,".cp");function p(e,t,n){var r=(0,i.a)();r.classList.add("ip");var o=(0,i.a)();o.classList.add("lp"),o.innerText=t.name;var c=(0,i.a)();c.classList.add("op");var d=document.createElement("input");return d.type="checkbox",d.checked=e.option===n,d.onclick=function(t){!function(e,t,n){var r=(0,i.b)('.vo .ep .gp .ip .op input[type="checkbox"]');for(var o of r)o.checked=!1;var c=e.target;c.checked=!0,(0,a.a)(t,n)}(t,e.key,n)},c.appendChild(d),r.appendChild(o),r.appendChild(c),r}function f(e){(0,r.d)("SettingsOptions"),o.setAttribute("displayed","true"),function(e){var t=(0,a.c)(e);l.innerText=t.name,s.innerText=t.description,d.innerHTML="";var n=new DocumentFragment,i=0;for(var r of t.options){var o=p(t,r,i);n.appendChild(o),i+=1}d.append(n)}(e),(0,r.a)()}function h(){o.setAttribute("displayed","false"),(0,r.c)()}},6171(){},7037(){},7113(){},7217(){},7225(){},7287(){},7723(){},8073(){},9205(){},9351(){},9590(){}}]);
//# sourceMappingURL=7c836ff32161eefc287d.js.map