"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[600],{112(){},124(){},245(){},321(){},626(){},904(e,t,a){a.d(t,{AE:()=>C,BM:()=>I,WR:()=>y,Z_:()=>k,f1:()=>L,gO:()=>w,kr:()=>b,l$:()=>A,p9:()=>_});var n=a(8179),i=a(8024),r=a(4884),s=a(6052),o=a(9333),c=a(8379),u=a(5693),l=a(7891),d=a(7908),p=a(5009),f=a(6104),h=(0,n.bv)(".xf"),v=(0,n.bv)(".ag"),m=(new Date).getTime(),g=["Home"];function y(e){var t=g.length;g[t-1]!==e&&g.push(e)}function b(e){if(g.indexOf(e)>-1){var t=g.length;g[t-1]===e&&g.pop()}}function k(){var e=g.length;if(e>1)switch(g[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.z1)();break;case"FolderEditor":(0,o.I6)();break;case"FolderManager":(0,c.m)();break;case"Search":(0,p.Bb)();break;case"Settings":(0,f.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,u.Xy)();break;case"Bus":(0,r.FN)();break;case"RegisterNotification":(0,d.hy)()}}function A(){var e=g.length;if(e>1){var t=g[e-2];switch(g.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.pd)();break;case"FolderEditor":(0,o.uy)();break;case"FolderManager":(0,c.g)();break;case"Search":(0,p.rf)();break;case"Settings":(0,f.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,u.bF)();break;case"Bus":(0,r.$l)();break;case"RegisterNotification":(0,d.XG)()}}}function I(){var e=0;(0,i.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.bv)(".xf svg.yf").style.setProperty("--zf",`${e}px`)}function C(e){function t(){h.classList.add("_f"),h.addEventListener("animationend",function(){h.setAttribute("displayed","false"),h.classList.remove("_f"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-m<100?setTimeout(t,Math.max(1,a-m)):t()}function L(){v.setAttribute("displayed","true")}function w(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function _(){window.scrollTo({top:0,behavior:"instant"})}},969(){},1003(){},1195(){},1351(e,t,a){a.d(t,{ID:()=>L,co:()=>w,k9:()=>_,qp:()=>x});var n=a(467),i=a(8011),r=a(6788),s=a(6983),o=a(3459),c=a(8179),u=a(8024),l=a(9469),d=a(4537),p=a(904),f=a(9119),h=a(8279),v={},m=!1,g=!1,y=(0,c.bv)(".hj"),b=(0,c.aI)(y,".mj"),k=(0,c.aI)(b,".nj");function A(){var e=document.createElement("div");e.classList.add("oj");var t=document.createElement("div");t.classList.add("pj"),t.appendChild((0,d.oC)()),e.appendChild(t);var a=document.createElement("div");return a.classList.add("qj"),e.appendChild(a),e}function I(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.aI)(e,".pj");(0,d.yD)(a,t.icon)}function s(e,t){(0,c.aI)(e,".qj").innerText=t.name}function o(e,t){e.onclick=t.action}function l(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function p(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}null==i?(r(e,n),s(e,n),o(e,n),l(e,a),p(e,t)):(i.key!==n.key&&(r(e,n),s(e,n),o(e,n)),a!==m&&l(e,a),t!==g&&p(e,t))}var i=e.actions,r=e.actionsQuantity,s=Array.from((0,c.jg)(k,".oj")),o=s.length;if(r!==o){var l=o-r;if(l<0){for(var p=new DocumentFragment,f=0;f>l;f--){var h=A();p.appendChild(h),s.push(h)}k.append(p)}else if(l>0)for(var y=o-1,b=o-l-1;y>b;y--)s[y].remove(),s.splice(y,1)}for(var I=0;I<r;I++){var C=s[I],L=i[I];if((0,u.mQ)(v,"actions"))if(v.actions[I])n(C,L,v.actions[I]);else n(C,L,null);else n(C,L,null)}v=e,m=a,g=t}function C(){return(C=(0,n.A)(function*(e){var t=(0,o.Js)("playing_animation"),a=(0,u.zx)();I(yield(0,s.v)(e,a),!1,t)})).apply(this,arguments)}function L(e){(0,p.WR)("LocationDetails"),y.setAttribute("displayed","true"),function(){for(var e=(0,o.Js)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});I({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){C.apply(this,arguments)}(e)}function w(){(0,p.kr)("LocationDetails"),y.setAttribute("displayed","false")}function _(e){return E.apply(this,arguments)}function E(){return(E=(0,n.A)(function*(e){var t=(0,u.zx)(),a=yield(0,i.g)(t,1);(0,r.LQ)(t),(0,r.gC)(t);var n=`ml_${e}`;if((0,u.mQ)(a,n)){var s=a[n],o=(0,l.i)(1,{hash:e});navigator.share&&navigator.share({title:s.n,url:o}).then(function(){(0,f.a)("check_circle","已分享地點")}).catch(function(e){(0,f.a)("cancel","已取消分享")})}})).apply(this,arguments)}function x(e){return S.apply(this,arguments)}function S(){return(S=(0,n.A)(function*(e){var t=(0,u.zx)(),a=yield(0,i.g)(t,1);(0,r.LQ)(t),(0,r.gC)(t);var n=`ml_${e}`;if((0,u.mQ)(a,n)){var s=(0,l.i)(1,{hash:e});(0,h.X8)(s)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(e,t,a){a.d(t,{Sv:()=>P,m_:()=>Z});var n=a(467),i=a(5767),r=a(365),s=a(3422),o=a(3459),c=a(8179),u=a(8024),l=a(4537),d=a(904),p=a(9119),f=(0,c.bv)("._k"),h=(0,c.aI)(f,".cl"),v=(0,c.aI)(h,".gl"),m=(0,c.aI)(v,".hl"),g=(0,c.aI)(f,".jl"),y=(0,c.aI)(g,".kl"),b={},k=!1,A=15e3,I=5e3,C=15e3,L=!0,w=0,_=0,E="",x=!1,S=!1,T=!1;function j(e){var t=e;if(x){var a=t.detail.progress-1;m.style.setProperty("--al",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,j)}function D(){var e=document.createElement("div");e.classList.add("ll");var t=document.createElement("div");t.classList.add("ml"),e.appendChild(t);var a=document.createElement("div");a.classList.add("nl");var n=document.createElement("div");n.classList.add("ol"),a.appendChild(n);var i=document.createElement("div");i.classList.add("pl"),a.appendChild(i);var r=document.createElement("div");r.classList.add("ql"),a.appendChild(r);var s=document.createElement("div");s.classList.add("rl");var o=document.createElement("span");return o.appendChild((0,l.YC)("close")),s.appendChild(o),a.appendChild(s),e.appendChild(a),e}function M(e,t,a){function n(e,n,i){function r(e,t){(0,c.aI)(e,".ml").innerText=t.hours}function s(e,t){var a=(0,c.aI)(e,".nl");(0,c.aI)(a,".ol").innerText=t.minutes}function o(e,t){var a=(0,c.aI)(e,".nl");(0,c.aI)(a,".ql").innerText=t.name}function l(e,t){var a=(0,c.aI)(e,".nl");(0,c.aI)(a,".pl").innerText=`${t.route.name} - 往${t.route.direction}`}function d(e,t){var a=(0,c.aI)(e,".nl");(0,c.aI)(a,".rl").onclick=function(){!function(e,t){z.apply(this,arguments)}(e,t.schedule_id)}}function p(e,t){e.setAttribute("first",(0,u.xZ)(t.is_first))}function f(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}null==i?(r(e,n),s(e,n),o(e,n),l(e,n),d(e,n),p(e,n),f(e,a),h(e,t)):(n.hours!==i.hours&&r(e,n),n.minutes!==i.minutes&&s(e,n),(0,u.hw)(i.schedule_id,n.schedule_id)||(o(e,n),l(e,n),d(e,n)),i.is_first!==n.is_first&&p(e,n),false!==a&&f(e,a),k!==t&&h(e,t))}var i=e.itemQuantity,r=e.items,s=Array.from((0,c.jg)(y,".ll")),o=s.length;if(i!==o){var l=o-i;if(l<0){for(var d=new DocumentFragment,p=0;p>l;p--){var f=D();d.appendChild(f),s.push(f)}y.append(d)}else if(l>0)for(var h=o-1,v=o-l-1;h>v;h--)s[h].remove(),s.splice(h,1)}for(var m=0;m<i;m++){var g=s[m],A=r[m];if((0,u.mQ)(b,"items"))if(b.items[m])n(g,A,b.items[m]);else n(g,A,null);else n(g,A,null)}b=e,k=t}function F(){return R.apply(this,arguments)}function R(){return(R=(0,n.A)(function*(){var e=(0,o.Js)("playing_animation"),t=(0,o.Js)("refresh_interval");L=t.dynamic,A=t.baseInterval,x=!0,E=(0,u.zx)(),m.setAttribute("refreshing","true"),m.classList.remove("il"),document.addEventListener(E,j);var a=yield(0,s.e3)(E);M(a,!1,e);var n=0;L&&(n=yield(0,i.wz)()),w=(new Date).getTime(),_=L?Math.max(w+I,a.dataUpdateTime+A/n):w+A,C=Math.max(I,_-w),x=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--bl",`${C}ms`),m.classList.add("il")})).apply(this,arguments)}function Q(){return $.apply(this,arguments)}function $(){return($=(0,n.A)(function*(){F().then(function(){S?setTimeout(function(){Q()},Math.max(I,_-(new Date).getTime())):T=!1}).catch(function(e){S?setTimeout(function(){Q()},1e4):T=!1})})).apply(this,arguments)}function P(){(0,d.WR)("NotificationScheduleManager"),f.setAttribute("displayed","true"),function(){for(var e=(0,o.Js)("playing_animation"),t=(0,d.gO)("window"),a=(t.width,t.height),n=Math.floor(a/50)+5,i=[],r=0;r<n;r++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});M({items:i,itemQuantity:n,dataUpdateTime:0},!0,e)}(),S||(S=!0,T?F():(T=!0,Q())),(0,d.Z_)()}function Z(){f.setAttribute("displayed","false"),S=!1,(0,d.l$)()}function z(){return(z=(0,n.A)(function*(e,t){if((0,p.a)("manufacturing","處理中"),yield(0,r.G)(t)){if(e.remove(),(0,p.a)("check_circle","已取消通知"),!x){var a=(0,o.Js)("playing_animation");M(yield(0,s.e3)(E),!1,a)}}else(0,p.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4537(e,t,a){a.d(t,{YC:()=>i,oC:()=>r,yD:()=>s});var n=a(8179);function i(e){var t=document.createElement("span");return t.classList.add("sa"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("sa"),e}function s(e,t){(0,n.aI)(e,"span.sa").innerText=t}},4620(){},4721(){},4935(){},5068(){},5135(){},5259(){},5374(){},5504(){},5666(){},5693(e,t,a){a.d(t,{Dn:()=>w,Xy:()=>L,bF:()=>C,gv:()=>k});var n=a(3453),i=a(467),r=a(5352),s=a(8179),o=a(5579),c=a(904),u=a(9119),l=(0,s.bv)(".nk"),d=(0,s.aI)(l,".sk"),p=(0,s.aI)(l,".ok"),f=(0,s.aI)(p,".pk"),h=(0,s.aI)(d,".tk"),v=(0,s.aI)(h,'.uk[group="schedule-name"] .yk input'),m=(0,s.aI)(h,'.uk[group="schedule-start-time"] .yk input'),g=(0,s.aI)(h,'.uk[group="schedule-end-time"] .yk input'),y=(0,s.aI)(h,'.uk[group="schedule-days"] .yk'),b=(0,s.jg)(y,".zk");function k(e){return A.apply(this,arguments)}function A(){return(A=(0,i.A)(function*(e){for(var t=v.value,a=m.value,i=g.value,s=String(a).split(":").map(function(e){return parseInt(e)}),o=(0,n.A)(s,2),c=o[0],l=o[1],d=String(i).split(":").map(function(e){return parseInt(e)}),p=(0,n.A)(d,2),f=p[0],h=p[1],y=[],k=0;k<7;k++){var A=b[k],I=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===I&&y.push(C)}var w=yield(0,r.qZ)(e);w.name=t,w.days=y,w.period.start.hours=c,w.period.start.minutes=l,w.period.end.hours=f,w.period.end.minutes=h,yield(0,r.nL)(w),(0,u.a)("check_circle","已儲存變更"),L()})).apply(this,arguments)}function I(){return(I=(0,i.A)(function*(e){var t=yield(0,r.qZ)(e);v.value=t.name,m.value=(0,o.pn)(t.period.start),g.value=(0,o.pn)(t.period.end);for(var a=0;a<7;a++){var n=b[a];t.days.indexOf(a)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}f.onclick=function(){k(e)}})).apply(this,arguments)}function C(e){(0,c.WR)("PersonalScheduleEditor"),l.setAttribute("displayed","true"),function(e){I.apply(this,arguments)}(e),(0,c.Z_)()}function L(){l.setAttribute("displayed","false"),(0,c.l$)()}function w(e){var t=(0,s.aI)(y,`.zk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6764(){},6780(){},6907(){},7537(){},7891(e,t,a){a.d(t,{Z:()=>v,z:()=>h});var n=a(467),i=a(5352),r=a(8179),s=a(4537),o=a(904),c=a(5693),u=(0,r.bv)(".rj"),l=(0,r.aI)(u,".wj"),d=(0,r.aI)(l,".xj");function p(e){var t=document.createElement("div");t.classList.add("yj"),t.onclick=function(){(0,c.bF)(e.id)};var a=document.createElement("div");a.classList.add("zj"),a.innerText=e.name,t.appendChild(a);var n=document.createElement("div");n.classList.add("_j");var i=document.createElement("span");return i.appendChild((0,s.YC)("arrow_forward_ios")),n.appendChild(i),t.appendChild(n),t}function f(){return(f=(0,n.A)(function*(){d.innerHTML="";var e=yield(0,i.ty)(),t=new DocumentFragment;for(var a of e){var n=p(a);t.appendChild(n)}d.append(t)})).apply(this,arguments)}function h(){(0,o.WR)("PersonalScheduleManager"),u.setAttribute("displayed","true"),function(){f.apply(this,arguments)}()}function v(){(0,o.kr)("PersonalScheduleManager"),u.setAttribute("displayed","false")}},7943(){},8279(e,t,a){a.d(t,{Vc:()=>u,X8:()=>c});var n=a(8179),i=a(2648),r=a(904),s=(0,n.bv)(".zl"),o=(0,n.aI)(s,".dm");function c(e){(0,r.WR)("QRCode"),s.setAttribute("displayed","true"),function(e){var t=(0,i.$)(e,"M",.5,.3,1,"var(--a)",4);o.innerHTML=t}(e)}function u(){(0,r.kr)("QRCode"),s.setAttribute("displayed","false")}},8380(e,t,a){a.d(t,{GJ:()=>y,I1:()=>g,Ps:()=>m,om:()=>b});var n=a(3453),i=a(5352),r=a(8179),s=a(904),o=a(9119),c=(0,r.bv)(".ak"),u=(0,r.aI)(c,".fk"),l=(0,r.aI)(u,".gk"),d=(0,r.aI)(l,'.hk[group="schedule-name"] .lk input'),p=(0,r.aI)(l,'.hk[group="schedule-start-time"] .lk input'),f=(0,r.aI)(l,'.hk[group="schedule-end-time"] .lk input'),h=(0,r.aI)(l,'.hk[group="schedule-days"] .lk'),v=(0,r.jg)(h,".mk");function m(){for(var e=d.value,t=p.value,a=f.value,r=String(t).split(":").map(function(e){return parseInt(e)}),s=(0,n.A)(r,2),c=s[0],u=s[1],l=String(a).split(":").map(function(e){return parseInt(e)}),h=(0,n.A)(l,2),m=h[0],g=h[1],b=[],k=0;k<7;k++){var A=v[k],I=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===I&&b.push(C)}(0,i.Qh)(e,c,u,m,g,b).then(function(e){e?(y(),(0,o.a)("calendar_view_day","已建立個人化行程")):(0,o.a)("error","無法建立個人化行程")})}function g(){(0,s.WR)("PersonalScheduleCreator"),c.setAttribute("displayed","true"),(0,s.Z_)()}function y(){c.setAttribute("displayed","false"),(0,s.l$)()}function b(e){var t=(0,r.aI)(h,`.mk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8969(){},9119(e,t,a){a.d(t,{a:()=>c});var n=a(2284),i=a(3459),r=a(8179),s=a(8024),o=a(4537);function c(e,t,a){var c=(0,r.e0)(".em");if(null!==c)for(var u of c)u.remove();var l=(0,i.Js)("playing_animation"),d=document.createElement("div");d.classList.add("em"),d.setAttribute("animation",(0,s.xZ)(l));var p=document.createElement("div");p.classList.add("fm"),p.appendChild((0,o.YC)(e)),d.appendChild(p);var f=document.createElement("div");if(f.classList.add("gm"),f.innerText=t,d.appendChild(f),"object"===(0,n.A)(a)&&null!=a&&"function"==typeof(null==a?void 0:a.action)){var h=document.createElement("div");h.classList.add("hm"),h.innerText=a.text,h.addEventListener("click",function(){a.action()},{once:!0}),d.appendChild(h),d.setAttribute("button","true")}d.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(d)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=db84ae4e6fbc7ec17bdf.js.map