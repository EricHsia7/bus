"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{313:(t,n,e)=>{e.d(n,{s:()=>y});var r=e(3153),i=e(6788),o=e(4311);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return p=f((function*(t){function n(){return e.apply(this,arguments)}function e(){return e=f((function*(){var n,e=[],o=a([[0,9],[1,9]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(n=o.n()).done;){var u=n.value,c=yield(0,i.Fd)(u.url,t,"getProvider_".concat(u.e[0]),"json");e=e.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return e})),e.apply(this,arguments)}var u="bus_provider_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var y=yield n();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),l||(l=!0,s=y),y}if((new Date).getTime()-parseInt(c)>5184e6){y=yield n();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),y}if(!l){var p=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(p)}return(0,i.Mf)(t,"getProvider_0",0,!0),(0,i.Mf)(t,"getProvider_1",0,!0),(0,i.ZL)(t,-1),s})),p.apply(this,arguments)}},424:(t,n,e)=>{e.d(n,{T:()=>d});var r=e(3153),i=e(6788),o=e(4311);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return(p=f((function*(t){var n=new Worker(new URL(e.p+e.u(132),e.b));return yield new Promise((function(e,r){n.onmessage=function(t){e(t.data),n.terminate()},n.onerror=function(t){r(t.message),n.terminate()},n.postMessage(t)}))}))).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return m=f((function*(t){function n(){return e.apply(this,arguments)}function e(){return e=f((function*(){var n,e=[],o=a([[0,11],[1,11]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(n=o.n()).done;){var u=n.value,c=yield(0,i.Fd)(u.url,t,"getStop_".concat(u.e[0]),"json");e=e.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return e})),e.apply(this,arguments)}var u="bus_stop_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var p=yield n(),d=yield y(p);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(d)),l||(l=!0,s=d),d}if((new Date).getTime()-parseInt(c)>2592e6){p=yield n(),d=yield y(p);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(d)),d}if(!l){var m=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(m)}return(0,i.Mf)(t,"getStop_0",0,!0),(0,i.Mf)(t,"getStop_1",0,!0),(0,i.ZL)(t,-1),s})),m.apply(this,arguments)}},1932:(t,n,e)=>{e.d(n,{L:()=>v});var r=e(3153),i=e(6788),o=e(4311);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return(p=f((function*(t){var n=new Worker(new URL(e.p+e.u(332),e.b));return yield new Promise((function(e,r){n.onmessage=function(t){e(t.data),n.terminate()},n.onerror=function(t){r(t.message),n.terminate()},n.postMessage(t)}))}))).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return(m=f((function*(t){var n=new Worker(new URL(e.p+e.u(892),e.b));return yield new Promise((function(e,r){n.onmessage=function(t){e(t.data),n.terminate()},n.onerror=function(t){r(t.message),n.terminate()},n.postMessage(t)}))}))).apply(this,arguments)}function v(t){return h.apply(this,arguments)}function h(){return h=f((function*(t){function n(){return e.apply(this,arguments)}function e(){return e=f((function*(){var n,e="",o=a([[0,15],[1,15]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(n=o.n()).done;){var u=n.value;e+=(yield(0,i.Fd)(u.url,t,"getSegmentBuffers_".concat(u.e[0]),"xml")),(0,i.ZL)(t,-1)}}catch(t){o.e(t)}finally{o.f()}return e})),e.apply(this,arguments)}var u="bus_segment_buffers_v6_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var p=yield n(),m=yield y(p),v=yield d(m);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(v)),l||(l=!0,s=v),v}if((new Date).getTime()-parseInt(c)>2592e6){p=yield n(),m=yield y(p),v=yield d(m);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(v)),v}if(!l){var h=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(h)}return(0,i.Mf)(t,"getSegmentBuffers_0",0,!0),(0,i.Mf)(t,"getSegmentBuffers_1",0,!0),(0,i.ZL)(t,-1),s})),h.apply(this,arguments)}},2303:(t,n,e)=>{e.d(n,{$Q:()=>a,AS:()=>f,Ov:()=>l,aU:()=>u,eu:()=>y,s$:()=>p,w_:()=>c,zi:()=>s});var r=e(5579);function i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return o(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw a}}}}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function a(t,n){if("string"==typeof t){var e=parseInt(t);if(-3===e)return{code:6,text:"末班駛離",time:e};if(-4===e)return{code:5,text:"今日停駛",time:e};if(-2===e)return{code:4,text:"交通管制",time:e};if(-1===e)return{code:3,text:"未發車",time:e};if(0<=e&&e<=10)return{code:2,text:"進站中",time:e};if(10<e&&e<=180)return{code:1,text:(0,r.fU)(e,n),time:e};if(180<e&&e<=250)return{code:.5,text:(0,r.fU)(e,n),time:e};if(250<e)return{code:0,text:(0,r.fU)(e,n),time:e}}return{code:7,text:"發生錯誤",time:-5}}function u(t,n){if(0===n){var e=0,r=0;return 4===t.length&&(e=parseInt(t.substring(0,2)),r=parseInt(t.substring(2,4))),2===t.length&&(r=parseInt(t)),{type:"moment",hours:e,minutes:r}}if(1===n){var i=0,o=0;if(4===t.length){var a=parseInt(t.substring(0,2)),u=parseInt(t.substring(2,4));i=Math.min(a,u),o=Math.max(a,u)}if(2===t.length){var c=parseInt(t);i=c,o=c}return{type:"range",min:i,max:o}}}function c(t,n,e,r,o){var a,u={},c={},f=i(n);try{for(f.s();!(a=f.n()).done;){var l=a.value;c[l.BusID]=l}}catch(t){f.e(t)}finally{f.f()}var s,y=i(t);try{for(y.s();!(s=y.n()).done;){var p=s.value,d={};d.CarType=p.CarType,d.BusStatus=p.BusStatus,d.BusID=p.BusID,d.CarOnStop=p.CarOnStop;var m=parseInt(p.RouteID),v=String(p.BusID),h=!1,g=0;m===r||o.indexOf(m)>-1||m===10*r?(h=!0,g=v.charCodeAt(0)*Math.pow(10,-5)):(h=!1,g=v.charCodeAt(0)),d.onThisRoute=h,d.index=g;var b={};if(c.hasOwnProperty(v)){b=c[v],d.position={latitude:parseFloat(b.Latitude),longitude:parseFloat(b.Longitude)};var w={},S=!1;for(var I in e){var T=e[I];if(T.pid.indexOf(m)>-1){w=T,S=!0;break}}d.RouteName=S?w.n:"未知路線",d.RouteID=S?w.id:null;var _="s_".concat(p.StopID);u.hasOwnProperty(_)||(u[_]=[]),u[_].push(d)}}}catch(t){y.e(t)}finally{y.f()}return u}function f(t,n,e,r){var o,a={},u={},c=i(n);try{for(c.s();!(o=c.n()).done;){var f=o.value;u[f.BusID]=f}}catch(t){c.e(t)}finally{c.f()}var l,s=i(t);try{for(s.s();!(l=s.n()).done;){var y=l.value,p={},d=parseInt(y.StopID),m=parseInt(y.RouteID),v=String(y.BusID);if(!(r.indexOf(d)<0)){p.index=v.charCodeAt(0),p.onThisRoute=!0,p.CarType=y.CarType,p.BusStatus=y.BusStatus,p.BusID=y.BusID,p.CarOnStop=y.CarOnStop;var h={};if(u.hasOwnProperty(v)){h=u[v],p.position={latitude:parseFloat(h.Latitude),longitude:parseFloat(h.Longitude)};var g={},b=!1;for(var w in e){var S=e[w];if(S.pid.indexOf(m)>-1){g=S,b=!0;break}}p.RouteName=b?g.n:"未知路線",p.RouteID=b?g.id:null;var I="s_".concat(d);a.hasOwnProperty(I)||(a[I]=[]),a[I].push(p)}}}}catch(t){s.e(t)}finally{s.f()}return a}function l(t){var n="";switch(t){case"0":n="一般";break;case"1":n="低底盤";break;case"2":n="大復康巴士";break;case"3":n="狗狗友善專車";break;default:n="未知類型"}return n}function s(t){var n="";switch(t){case"0":n="離站";break;case"1":n="進站";break;default:n="未知狀態"}return n}function y(t){var n="";switch(t){case"0":n="正常";break;case"1":n="車禍";break;case"2":n="故障";break;case"3":n="塞車";break;case"4":n="緊急求援";break;case"5":n="加油";break;case"99":n="非營運狀態";break;default:n="未知狀態"}return n}function p(t){var n={},e=l(t.CarType);n.type=e;var r=s(t.CarOnStop),i=y(t.BusStatus);return n.carNumber=t.BusID,n.status={onStop:r,situation:i,text:"".concat(r," | ").concat(i)},n.RouteName=t.RouteName,n.onThisRoute=t.onThisRoute,n.index=t.index,n.position=t.position,n}},4293:(t,n,e)=>{e.d(n,{a:()=>d});var r=e(3153),i=e(6788),o=e(4311);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return(p=f((function*(t){var n=new Worker(new URL(e.p+e.u(148),e.b));return yield new Promise((function(e,r){n.onmessage=function(t){e(t.data),n.terminate()},n.onerror=function(t){r(t.message),n.terminate()},n.postMessage(t)}))}))).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return m=f((function*(t){function n(){return e.apply(this,arguments)}function e(){return e=f((function*(){var n,e=[],o=a([[0,10],[1,10]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(n=o.n()).done;){var u=n.value,c=yield(0,i.Fd)(u.url,t,"getRoute_".concat(u.e[0]),"json");e=e.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return e})),e.apply(this,arguments)}if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return yield n();var u="bus_route_v2_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var p=yield n(),d=yield y(p);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(d)),l||(l=!0,s=d),d}if((new Date).getTime()-parseInt(c)>864e5){var m=yield n(),v=yield y(m);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(v)),l||(l=!0,s=v),v}if(!l){var h=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(h)}return(0,i.Mf)(t,"getRoute_0",0,!0),(0,i.Mf)(t,"getRoute_1",0,!0),(0,i.ZL)(t,-1),s})),m.apply(this,arguments)}},6788:(t,n,e)=>{e.d(n,{Fd:()=>s,LQ:()=>m,Mf:()=>d,ZL:()=>v,Zt:()=>h,_M:()=>p,gC:()=>g});var r=e(4750),i=e(5579),o=e(8925);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,i)}function c(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){u(o,r,i,a,c,"next",t)}function c(t){u(o,r,i,a,c,"throw",t)}a(void 0)}))}}var f={},l={};function s(t,n,e,r){return y.apply(this,arguments)}function y(){return y=c((function*(t,n,e,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:15e3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:6e4,f=new Promise((function(t,n){return setTimeout((function(){return n(new Error("Connection timed out"))}),a)})),l=yield Promise.race([fetch(t),f]).catch((function(t){throw d(n,e,0,!0),t}));if(!l.ok)throw new Error("HTTP error! status: ".concat(l.status));for(var y=parseInt(String(l.headers.get("content-length"))),p=0,m=l.body.getReader(),v=[];;){var h=yield new Promise(function(){var t=c((function*(t,n){var e=setTimeout((function(){n(new Error("Loading timed out"))}),u),r=yield m.read(),i=r.done,o=r.value;clearTimeout(e),t(i?{done:i}:{done:i,value:o})}));return function(n,e){return t.apply(this,arguments)}}()).catch((function(t){throw d(n,e,p/y,!0),t})),g=h.done,b=h.value;if(g)break;v.push(b),p+=b.length,d(n,e,p/y,!1)}for(var w=new Uint8Array(p),S=0,I=0,T=v;I<T.length;I++){var _=T[I];w.set(_,S),S+=_.length}var L=new Date;yield(0,o.N$)(y,L);var A=new Blob([w]),O=new Blob([A.slice(0,A.size)],{type:"application/gzip"}),x=yield O.arrayBuffer(),C=yield(0,r.h)(x);return"json"===i?/^\<\!doctype html\>/.test(C)?yield s(t.replace("https://tcgbusfs.blob.core.windows.net/","https://erichsia7.github.io/bus-alternative-static-apis/"),n,e,i,a,u):JSON.parse(C):"xml"===i?C:void 0})),y.apply(this,arguments)}function p(t){if(f.hasOwnProperty(t)&&"object"===a(f[t])){var n=0,e=0;for(var r in f[t])f[t][r].expel||(n+=f[t][r].total,e+=f[t][r].progress);var i=Math.min(Math.max(e/n,0),1);return i===1/0||isNaN(i)?1:i}return 1}function d(t,n,e,r){f.hasOwnProperty(t)||(f[t]={});var i="u_".concat(n);f[t].hasOwnProperty(i)?r?f[t][i].expel=!0:(f[t][i].expel=!1,f[t][i].progress=e):f[t][i]={expel:!1,progress:e,total:1}}function m(t){f.hasOwnProperty(t)&&delete f[t]}function v(t,n){l.hasOwnProperty(t)||(l[t]=0);var e=0;"string"==typeof n&&(e=(0,i.Zn)(n)),e>l[t]&&(l[t]=e)}function h(t){return l.hasOwnProperty(t)?1*l[t]:0}function g(t){l.hasOwnProperty(t)&&delete l[t]}},8201:(t,n,e)=>{e.d(n,{Y:()=>y});var r=e(3153),i=e(6788),o=e(4311);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return p=f((function*(t){function n(){return e.apply(this,arguments)}function e(){return e=f((function*(){var n,e=[],o=a([[0,12],[1,12]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(n=o.n()).done;){var u=n.value,c=yield(0,i.Fd)(u.url,t,"getSemiTimeTable_".concat(u.e[0]),"json");e=e.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return e})),e.apply(this,arguments)}var u="bus_semi_timetable_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var y=yield n();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),l||(l=!0,s=y),y}if((new Date).getTime()-parseInt(c)>12096e5){y=yield n();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),y}if(!l){var p=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(p)}return(0,i.Mf)(t,"getSemiTimeTable_0",0,!0),(0,i.Mf)(t,"getSemiTimeTable_1",0,!0),(0,i.ZL)(t,-1),s})),p.apply(this,arguments)}},8671:(t,n,e)=>{e.d(n,{s:()=>y});var r=e(3153),i=e(6788),o=e(4311);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return p=f((function*(t){function n(){return e.apply(this,arguments)}function e(){return e=f((function*(){var n,e=[],o=a([[0,14],[1,14]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(n=o.n()).done;){var u=n.value,c=yield(0,i.Fd)(u.url,t,"getTimeTable_".concat(u.e[0]),"json");e=e.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return e})),e.apply(this,arguments)}var u="bus_timetable_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var y=yield n();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),l||(l=!0,s=y),y}if((new Date).getTime()-parseInt(c)>12096e5){y=yield n();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),y}if(!l){var p=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(p)}return(0,i.Mf)(t,"getTimeTable_0",0,!0),(0,i.Mf)(t,"getTimeTable_1",0,!0),(0,i.ZL)(t,-1),s})),p.apply(this,arguments)}}}]);
//# sourceMappingURL=265b9fe9284d0c915b61.js.map