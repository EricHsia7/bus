"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[327],{2757:(t,e,n)=>{n.d(e,{R:()=>$});var r=n(4256),i=n(574),a=n(2945),o=n(5428),u=n(6483),l=n(6802),f=n(7810),s=n(2063),c=n(8011),y=n(4293),d=n(424),p=n(2303),v=n(6788),h=n(3459),m=n(1238);function g(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){var n={},r=[];for(var i in t){var a=t[i],o=a.StopID,u=parseInt(a.EstimateTime);u>=0&&e.indexOf(o)>-1&&r.push([o,u])}var l=r.length;r.sort((function(t,e){return t[1]-e[1]}));for(var f=1,s=0,c=r;s<c.length;s++){var y=f/l,d=(y-y%.25)/.25;n[`s_${c[s][0]}`]={number:f,text:f.toString(),code:d},f+=1}return n}function $(t,e,n,r){return w.apply(this,arguments)}function w(){var t;return t=function*(t,e,n,g){(0,v.Mf)(g,"getLocation_0",0,!1),(0,v.Mf)(g,"getLocation_1",0,!1),(0,v.Mf)(g,"getRoute_0",0,!1),(0,v.Mf)(g,"getRoute_1",0,!1),(0,v.Mf)(g,"getStop_0",0,!1),(0,v.Mf)(g,"getStop_1",0,!1),(0,v.Mf)(g,"getEstimateTime_0",0,!1),(0,v.Mf)(g,"getEstimateTime_1",0,!1),(0,v.Mf)(g,"getBusEvent_0",0,!1),(0,v.Mf)(g,"getBusEvent_1",0,!1);for(var _=yield(0,s.K)(g),$=yield(0,c.g)(g,1),w=yield(0,y.a)(g,!0),O=yield(0,d.T)(g),I=yield(0,f.J)(g),x=yield(0,l.d)(g),k=yield(0,u.Io)(e,n),A=(0,h.Js)("time_formatting_mode"),J=(0,h.Js)("location_labels"),P=(0,h.Js)("display_user_orientation"),C={},L={},D={},N=(0,m.Y)(),T=$[`ml_${t}`],M=T.n,Q=T.id,E=T.v,j=[],z=[],F=Q.length,R=0;R<F;R++)j=j.concat(T.s[R]),z=z.concat(T.r[R]);var B,K=function(t,e){var n,r={},i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.indexOf(a.StopID)>-1&&(r[`s_${a.StopID}`]=a)}}catch(t){i.e(t)}finally{i.f()}return r}(_,j),q=(0,p.AS)(I,x,w,j),U=[],V=b(E);try{for(V.s();!(B=V.n()).done;){var X,Z=B.value,G=0,H=0,W=b(Z);try{for(W.s();!(X=W.n()).done;){var Y=X.value;G+=Y[0],H+=Y[1]}}catch(t){W.e(t)}finally{W.f()}var tt=(0,o.hF)([G,H]),et=(0,i.DK)(tt);U.push(et)}}catch(t){V.e(t)}finally{V.f()}var nt=[];switch(J){case"address":nt=(0,r._q)(T.a);break;case"letters":nt=(0,a.V)(F);break;case"directions":nt=(0,a.M)(U)}for(var rt=0;rt<F;rt++){var it=`g_${rt}`;C[it]=[],L[it]=0,D[it]={name:nt[rt],properties:[{key:"address",icon:"personal_places",value:(0,r.pD)(T.a[rt])},{key:"exact_position",icon:"location_on",value:`${T.la[rt].toFixed(5)}, ${T.lo[rt].toFixed(5)}`},{key:"cardinal_direction",icon:U[rt].icon,value:`${U[rt].name}${P&&-1!==N.cardinalDirection.id&&N.cardinalDirection.id===U[rt].id?"（目前指向）":""}`}]};for(var at=T.s[rt],ot=at.length,ut=S(K,at),lt=0;lt<ot;lt++){var ft={},st=T.s[rt][lt],ct=`s_${st}`,yt={};if(O.hasOwnProperty(ct)){yt=O[ct],ft.stopId=st;var dt={number:0,text:"--",code:-1};ut.hasOwnProperty(ct)&&(dt=ut[ct]),ft.ranking=dt;var pt=T.r[rt][lt],vt=`r_${pt}`,ht={};if(w.hasOwnProperty(vt)){ht=w[vt],ft.route_name=ht.n,ft.route_direction=`往${[ht.des,ht.dep,""][parseInt(yt.goBack)]}`,ft.routeId=pt;var mt={};if(K.hasOwnProperty(ct)){mt=K[ct];var gt=(0,p.$Q)(mt.EstimateTime,A);ft.status=gt;var bt=[];q.hasOwnProperty(ct)&&(bt=q[ct].map((function(t){return(0,p.s$)(t)}))),ft.buses=bt;var _t=[];k.hasOwnProperty(ct)&&(_t=k[ct]),ft.busArrivalTimes=_t,C[it].push(ft),L[it]+=1}}}}}for(var St in C)C[St].sort((function(t,e){return t.routeId-e.routeId}));var $t={groupedItems:C,groups:D,groupQuantity:F,itemQuantity:L,LocationName:M,hash:t,dataUpdateTime:(0,v.Zt)(g)};return(0,v.LQ)(g),(0,v.gC)(g),$t},w=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){g(a,r,i,o,u,"next",t)}function u(t){g(a,r,i,o,u,"throw",t)}o(void 0)}))},w.apply(this,arguments)}},5427:(t,e,n)=>{n.d(e,{Qx:()=>b});var r=n(9566),i=n(5352),a=n(5314),o=n(3459),u=n(4311);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){s(a,r,i,o,u,"next",t)}function u(t){s(a,r,i,o,u,"throw",t)}o(void 0)}))}}function y(t){return d.apply(this,arguments)}function d(){return(d=c((function*(t){var e,n=l(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=i,o=!1,f=!1,s=`f_${a.id}`;if((yield(0,u.Ct)(11,s))?o=yield(0,r.g$)(a.id,a.name,a.icon):f=yield(0,r.vV)(a.name,a.icon),o){var c,y=l(i.content);try{for(y.s();!(c=y.n()).done;){var d=c.value;yield(0,r.z$)(i.id,d)}}catch(t){y.e(t)}finally{y.f()}}if(f){var p,v=l(i.content);try{for(v.s();!(p=v.n()).done;){var h=p.value;yield(0,r.z$)(f,h)}}catch(t){v.e(t)}finally{v.f()}}}}catch(t){n.e(t)}finally{n.f()}}))).apply(this,arguments)}function p(t){return v.apply(this,arguments)}function v(){return(v=c((function*(t){var e,n=l(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=(0,o.PL)(r.key);i&&"select"===i.type&&(yield(0,o.aN)(r.key,r.option))}}catch(t){n.e(t)}finally{n.f()}return!0}))).apply(this,arguments)}function h(t){return m.apply(this,arguments)}function m(){return(m=c((function*(t){var e,n=l(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;(yield(0,i.qZ)(r.id))?yield(0,i.nL)(r):yield(0,i.Qh)(r.name,r.period.start.hours,r.period.start.minutes,r.period.end.hours,r.period.end.minutes,r.days)}}catch(t){n.e(t)}finally{n.f()}return!0}))).apply(this,arguments)}function g(){return(g=c((function*(t){var e,n=l(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;switch(r.type){case"route":(yield(0,a.DF)("route",r.id))||(yield(0,a.XK)(r.type,r.id));break;case"location":(yield(0,a.DF)("location",r.hash))||(yield(0,a.XK)(r.type,r.hash));break;case"bus":(yield(0,a.DF)("bus",r.id))||(yield(0,a.XK)(r.type,r.id))}}}catch(t){n.e(t)}finally{n.f()}return!0}))).apply(this,arguments)}function b(t){return _.apply(this,arguments)}function _(){return _=c((function*(t){var e=JSON.parse(t);switch(e.version){case 1:return yield y(e.folders),!0;case 2:return yield y(e.folders),yield p(e.settings),!0;case 3:return yield y(e.folders),yield p(e.settings),yield h(e.personal_schedules),!0;case 4:return yield y(e.folders),yield p(e.settings),yield h(e.personal_schedules),yield function(t){return g.apply(this,arguments)}(e.recent_views),!0;default:return!1}})),_.apply(this,arguments)}},5976:(t,e,n)=>{n.d(e,{R:()=>l});var r=n(9566),i=n(5352),a=n(5314),o=n(3459);function u(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function l(){return f.apply(this,arguments)}function f(){var t;return t=function*(){var t=yield(0,r.Xi)(),e=(0,o.Gn)(),n=yield(0,i.ty)(),u=yield(0,a.Qj)(),l={};return l.time=(new Date).toISOString(),l.version=4,l.folders=t,l.settings=e,l.personal_schedules=n,l.recent_views=u,JSON.stringify(l)},f=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,l,"next",t)}function l(t){u(a,r,i,o,l,"throw",t)}o(void 0)}))},f.apply(this,arguments)}},6160:(t,e,n)=>{n.d(e,{i:()=>p});var r=n(6802),i=n(7810),a=n(9734),o=n(8011),u=n(424),l=n(2303),f=n(6788),s=n(8134);function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return y(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function p(t,e){return v.apply(this,arguments)}function v(){var t;return t=function*(t,e){var n=`c_${t}`,y=yield(0,a.j)(e,!0),d=yield(0,r.d)(e),p=yield(0,i.J)(e),v=yield(0,u.T)(e),h=yield(0,o.g)(e,0),m={properties:[],LocationName:""},g={};if(!y.hasOwnProperty(n))return m;var b=(g=y[n]).CarNum;m.properties.push({key:"car_number",icon:"tag",value:b});var _=g.CarType,S=(0,l.Ov)(_);m.properties.push({key:"car_type",icon:"directions_bus",value:S});var $,w={},O=c(d);try{for(O.s();!($=O.n()).done;){var I=$.value;if(I.BusID===b){w=I;break}}}catch(t){O.e(t)}finally{O.f()}var x,k=parseInt(w.RouteID),A=w.BusStatus,J=(0,l.eu)(A),P=parseInt(w.GoBack),C={},L=c(p);try{for(L.s();!(x=L.n()).done;){var D=x.value;if(D.BusID===b){C=D;break}}}catch(t){L.e(t)}finally{L.f()}var N=C.CarOnStop,T=(0,l.zi)(N);m.properties.push({key:"status",icon:"vital_signs",value:`${T} | ${J}`});var M=C.StopID,Q=yield(0,s.F6)(k),E={};if(!(Q.length>0))return m;var j=(E=Q[0]).id,z=E.pid,F=E.n,R=E.dep,B=[E.des,R,""][P||0];m.properties.push({key:"route",icon:"route",value:`${F} - 往${B}`}),m.RouteID=j,m.FullPathAttributeId=z;var K=`s_${M}`;if(!v.hasOwnProperty(K))return m;var q=h[`l_${v[K].stopLocationId}`].n;return m.properties.push({key:"location_name",icon:"location_on",value:q}),(0,f.LQ)(e),(0,f.gC)(e),m},v=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){d(a,r,i,o,u,"next",t)}function u(t){d(a,r,i,o,u,"throw",t)}o(void 0)}))},v.apply(this,arguments)}},9566:(t,e,n)=>{n.d(e,{$j:()=>E,DW:()=>W,Fq:()=>G,L2:()=>C,LH:()=>K,NC:()=>U,R_:()=>z,Rh:()=>I,Xi:()=>M,aq:()=>X,bq:()=>tt,eD:()=>L,g$:()=>J,vV:()=>k,z$:()=>R});var r=n(4256),i=n(574),a=n(8024),o=n(2945),u=n(5428),l=n(6483),f=n(5767),s=n(2063),c=n(8011),y=n(9930),d=n(4293),p=n(424),v=n(2303),h=n(6788),m=n(3459),g=n(4311);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return S(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){$(a,r,i,o,u,"next",t)}function u(t){$(a,r,i,o,u,"throw",t)}o(void 0)}))}}var O={};function I(){return x.apply(this,arguments)}function x(){return(x=w((function*(){var t,e=_(yield(0,g.Su)(11));try{for(e.s();!(t=e.n()).done;){var n=t.value,r=yield(0,g.Ct)(11,n);if(r){var i=JSON.parse(r);O.hasOwnProperty(n)||(O[n]=i)}}}catch(t){e.e(t)}finally{e.f()}}))).apply(this,arguments)}function k(t,e){return A.apply(this,arguments)}function A(){return(A=w((function*(t,e){var n=(0,a.zx)(),r=yield(0,y.z)(n);if((0,h.LQ)(n),r.indexOf(e)<0)return!1;var i=(0,a.zx)(),o=`f_${i}`;if(O.hasOwnProperty(o))return!1;if(yield(0,g.Ct)(11,o))return!1;var u={name:t,icon:e,id:i,timestamp:(new Date).getTime()};return O[o]=u,yield(0,g.mL)(11,o,JSON.stringify(u)),yield(0,g.mL)(12,o,JSON.stringify([])),i}))).apply(this,arguments)}function J(t,e,n){return P.apply(this,arguments)}function P(){return(P=w((function*(t,e,n){var r=`f_${t}`,i=yield(0,g.Ct)(11,r);if(!i)return!1;var o=JSON.parse(i),u=(0,a.zx)(),l=yield(0,y.z)(u);if((0,h.LQ)(u),l.indexOf(n)<0)return!1;var f={name:e,icon:n,id:t,timestamp:o.timestamp};return O[r]=f,yield(0,g.mL)(11,r,JSON.stringify(f)),!0}))).apply(this,arguments)}function C(t){var e=`f_${t}`;return!!O.hasOwnProperty(e)&&{name:O[e].name,icon:O[e].icon,id:O[e].id,timestamp:O[e].timestamp}}function L(t){return D.apply(this,arguments)}function D(){return(D=w((function*(t){var e=[],n=`f_${t}`,r=C(t);if("boolean"==typeof r&&!1===r)return e;var i=yield(0,g.Ct)(12,n);if(!i)return e;var a=JSON.parse(i);if(0===a.length){return e.push({type:"empty",id:0,index:0}),e}var o,u=_(a);try{for(u.s();!(o=u.n()).done;){var l=o.value,f=yield(0,g.Ct)(13,l);if(f){var s=JSON.parse(f);e.push(s)}}}catch(t){u.e(t)}finally{u.f()}return e}))).apply(this,arguments)}function N(t){return T.apply(this,arguments)}function T(){return(T=w((function*(t){var e=`f_${t}`,n=yield(0,g.Ct)(12,e);return n?JSON.parse(n).length:0}))).apply(this,arguments)}function M(){return Q.apply(this,arguments)}function Q(){return(Q=w((function*(){var t,e=yield function(){var t=[];for(var e in O){var n={name:O[e].name,icon:O[e].icon,id:O[e].id,timestamp:O[e].timestamp};t.push(n)}return t.sort((function(t,e){return t.timestamp-e.timestamp})),t}(),n=[],r=_(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=yield L(i.id),o=yield N(i.id);n.push({name:i.name,icon:i.icon,id:i.id,timestamp:i.timestamp,content:a,contentLength:o})}}catch(t){r.e(t)}finally{r.f()}return n}))).apply(this,arguments)}function E(t){return j.apply(this,arguments)}function j(){return(j=w((function*(t){var e=!0;"object"===b(t)&&Array.isArray(t)||(e=!1);var n,r=[],i=_(yield(0,g.Su)(13));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=yield(0,g.Ct)(13,a);if(o){var u=JSON.parse(o);e?t.indexOf(u.type)>-1&&r.push(u):r.push(u)}}}catch(t){i.e(t)}finally{i.f()}return r}))).apply(this,arguments)}function z(t){return F.apply(this,arguments)}function F(){return(F=w((function*(t){(0,h.Mf)(t,"getEstimateTime_0",0,!1),(0,h.Mf)(t,"getEstimateTime_1",0,!1),(0,h.Mf)(t,"getRoute_0",0,!1),(0,h.Mf)(t,"getRoute_1",0,!1);var e,n=yield(0,s.K)(t),a=yield(0,d.a)(t,!0),y=yield(0,c.g)(t,1),p=yield M(),g=(0,m.Js)("time_formatting_mode"),b=(0,m.Js)("location_labels"),S=(0,m.Js)("power_saving"),$=(0,m.Js)("refresh_interval"),w=[],O=_(p);try{for(O.s();!(e=O.n()).done;){var I=e.value;w=w.concat(I.content.filter((function(t){return"stop"===t.type})).map((function(t){return t.id})))}}catch(t){O.e(t)}finally{O.f()}var x,k={},A=_(n);try{for(A.s();!(x=A.n()).done;){var J=x.value;if(w.indexOf(J.StopID)>-1)k[`s_${J.StopID}`]=J}}catch(t){A.e(t)}finally{A.f()}var P,C=[],L=_(p);try{for(L.s();!(P=L.n()).done;){var D,N=P.value,T={name:N.name,icon:N.icon,id:N.id,timestamp:N.timestamp,content:[],contentLength:N.contentLength},Q=_(N.content);try{for(Q.s();!(D=Q.n()).done;){var E=D.value;switch(E.type){case"stop":var j=`s_${E.id}`,z={};if(!k.hasOwnProperty(j))break;z=k[j],E.status=(0,v.$Q)(z.EstimateTime,g);var F=a[`r_${E.route.id}`];E.route.pathAttributeId=F.pid;break;case"route":var R=a[`r_${E.id}`];E.pathAttributeId=R.pid;break;case"location":var B=y[`ml_${E.id}`],K=[];switch(b){case"address":K=(0,r._q)(B.a);break;case"letters":var q=B.id.length;K=(0,o.V)(q);break;case"directions":var U,V=B.v,X=[],Z=_(V);try{for(Z.s();!(U=Z.n()).done;){var G,H=U.value,W=0,Y=0,tt=_(H);try{for(tt.s();!(G=tt.n()).done;){var et=G.value;W+=et[0],Y+=et[1]}}catch(t){tt.e(t)}finally{tt.f()}var nt=(0,u.hF)([W,Y]),rt=(0,i.DK)(nt);X.push(rt)}}catch(t){Z.e(t)}finally{Z.f()}K=(0,o.M)(X)}E.labels=K.join(" - ")}T.content.push(E)}}catch(t){Q.e(t)}finally{Q.f()}C.push(T)}}catch(t){L.e(t)}finally{L.f()}var it={folders:C,dataUpdateTime:(0,h.Zt)(t)};return(0,h.LQ)(t),(0,h.gC)(t),S||($.dynamic&&(yield(0,f.Eu)(n)),yield(0,l.VZ)(n)),it}))).apply(this,arguments)}function R(t,e){return B.apply(this,arguments)}function B(){return(B=w((function*(t,e){var n=`f_${t}`,r=`${e.type}_${e.id}`,i=C(t);if("boolean"==typeof i&&!1===i)return!1;var a=yield(0,g.Ct)(12,n);if(!a)return!1;var o=JSON.parse(a);return(0===o.length||o.indexOf(r)<0)&&(yield(0,g.mL)(12,n,JSON.stringify(o.concat(r))),yield(0,g.mL)(13,r,JSON.stringify(e)),!0)}))).apply(this,arguments)}function K(t,e){return q.apply(this,arguments)}function q(){return(q=w((function*(t,e){var n,r=`${t}_${e}`,i=_(yield(0,g.Su)(12));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=yield(0,g.Ct)(12,a);if(o)if(JSON.parse(o).indexOf(r)>-1)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}))).apply(this,arguments)}function U(t,e,n){return V.apply(this,arguments)}function V(){return(V=w((function*(t,e,n){var r=`f_${t}`,i=`${e}_${n}`,a=C(t);if("boolean"==typeof a&&!1===a)return!1;var o=yield(0,g.Ct)(12,r);if(!o)return!1;var u=JSON.parse(o),l=u.indexOf(i);return l>-1&&u.length>0&&(u.splice(l,1),yield(0,g.mL)(12,r,JSON.stringify(u))),!1===(yield K(e,n))&&(yield(0,g.iQ)(13,i)),!0}))).apply(this,arguments)}function X(t,e,n){return Z.apply(this,arguments)}function Z(){return(Z=w((function*(t,e,n){var r=(0,a.zx)(),i=yield(0,p.T)(r),o=yield(0,c.g)(r,0),u=yield(0,d.a)(r,!0),l=i[`s_${e}`],f=parseInt(l.goBack),s=o[`l_${l.stopLocationId}`].n,y=u[`r_${n}`],v=y.n,h=y.dep,m=y.des,g={type:"stop",id:e,timestamp:(new Date).getTime(),name:s,direction:f,route:{name:v,endPoints:{departure:h,destination:m},id:n}};return yield R(t,g)}))).apply(this,arguments)}function G(t,e){return H.apply(this,arguments)}function H(){return(H=w((function*(t,e){var n=(0,a.zx)(),r=yield(0,d.a)(n,!0);(0,h.LQ)(n),(0,h.gC)(n);var i=`r_${e}`,o={};if(!r.hasOwnProperty(i))return!1;o=r[i];var u={type:"route",id:e,timestamp:(new Date).getTime(),name:o.n,endPoints:{departure:o.dep,destination:o.des}};return yield R(t,u)}))).apply(this,arguments)}function W(t,e){return Y.apply(this,arguments)}function Y(){return(Y=w((function*(t,e){var n=(0,a.zx)(),r=yield(0,c.g)(n,1);(0,h.LQ)(n),(0,h.gC)(n);var i=`ml_${e}`,o={};if(!r.hasOwnProperty(i))return!1;o=r[i];var u={type:"location",id:e,timestamp:(new Date).getTime(),name:o.n};return yield R(t,u)}))).apply(this,arguments)}function tt(t,e,n,r){return et.apply(this,arguments)}function et(){return(et=w((function*(t,e,n,r){var i=`f_${t}`,a=`${e}_${n}`,o=C(t);if("boolean"==typeof o&&!1===o)return!1;var u=yield(0,g.Ct)(12,i);if(!u)return!1;var l=JSON.parse(u),f=l.indexOf(a);if(f>-1&&l.length>1){var s=0;switch(r){case"up":s=-1;break;case"down":s=1;break;default:s=0}return l.splice(f,1),l.splice(f+s,0,a),yield(0,g.mL)(12,i,JSON.stringify(l)),!0}return!1}))).apply(this,arguments)}}}]);
//# sourceMappingURL=8ee7fbedf893a46d34e8.js.map