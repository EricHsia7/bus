{"version":3,"file":"fcdcc81a.js","mappings":"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","sources":["webpack://bus/./src/interface/schedule-notification/index.ts","webpack://bus/./src/interface/storage/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/search/index.ts","webpack://bus/./src/interface/settings/options.ts"],"sourcesContent":["import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = documentQuerySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\ntype ScheduleNotificationType = 'stop-on-route' | 'stop-on-location';\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, type: ScheduleNotificationType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnRoute(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnLocation(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nfunction initializeScheduleNotificationField(type: ScheduleNotificationType, parameters: Array<any>): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, type, parameters);\n    fragment.append(newElement.element);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function openScheduleNotification(type: ScheduleNotificationType, parameters: Array<any>): void {\n  pushPageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n  initializeScheduleNotificationField(type, parameters);\n}\n\nexport function closeScheduleNotification(): void {\n  revokePageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function scheduleNotificationForStopItemOnRoute(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nexport function scheduleNotificationForStopItemOnLocation(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n","import { getStoresSizeStatistics, StoreSize, StoreSizeStatistics } from '../../data/analytics/storage-size';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { GeneratedElement, querySize } from '../index';\n\nlet previousCategories: Array<StoreSize> = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nconst StorageField = documentQuerySelector('.css_storage_field');\nconst StorageBodyElement = elementQuerySelector(StorageField, '.css_storage_body');\nconst StatisticsElement = elementQuerySelector(StorageBodyElement, '.css_storage_statistics');\n\nfunction generateElementOfItem(): GeneratedElement {\n  // Create root element\n  const statisticsItemElement = document.createElement('div');\n  statisticsItemElement.classList.add('css_storage_statistics_item');\n\n  // Create name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_storage_statistics_item_name');\n\n  // Create value element\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_storage_statistics_item_value');\n\n  // Append children\n  statisticsItemElement.appendChild(nameElement);\n  statisticsItemElement.appendChild(valueElement);\n\n  return {\n    element: statisticsItemElement,\n    id: ''\n  };\n}\n\nfunction updateStorageField(statistics: StoreSizeStatistics, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(element: HTMLElement, currentItem: StoreSize, previousItem: StoreSize | null): void {\n    function updateValue(element: HTMLElement, item: StoreSize): void {\n      const typeElement = elementQuerySelector(element, '.css_storage_statistics_item_value');\n      typeElement.innerText = item.size;\n    }\n\n    function updateName(element: HTMLElement, item: StoreSize): void {\n      const nameElement = elementQuerySelector(element, '.css_storage_statistics_item_name');\n      nameElement.innerText = item.category.name;\n    }\n\n    function updateAnimation(element: HTMLElement, animation: boolean): void {\n      element.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(element: HTMLElement, skeletonScreen: boolean): void {\n      element.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.category.key !== previousItem.category.key) {\n        updateName(element, currentItem);\n        updateValue(element, currentItem);\n      }\n\n      if (currentItem.size !== previousItem.size) {\n        updateValue(element, currentItem);\n      }\n\n      if (previousAnimation !== animation) {\n        updateAnimation(element, animation);\n      }\n\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(element, skeletonScreen);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateValue(element, currentItem);\n      updateName(element, currentItem);\n      updateAnimation(element, animation);\n      updateSkeletonScreen(element, skeletonScreen);\n    }\n  }\n\n  const categories = [];\n  for (const key in statistics.categorizedSizes) {\n    const item = statistics.categorizedSizes[key];\n    categories.push(item);\n  }\n\n  const categoriesQuantity = categories.length;\n  const currentItemCapacity = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item').length;\n  if (categoriesQuantity !== currentItemCapacity) {\n    const difference = currentItemCapacity - categoriesQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newElement = generateElementOfItem();\n        fragment.appendChild(newElement.element);\n      }\n      StatisticsElement.appendChild(fragment);\n    } else {\n      const statisticsItemElements2 = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const itemIndex = currentItemCapacity - 1 - o;\n        statisticsItemElements2[itemIndex].remove();\n      }\n    }\n  }\n\n  const statisticsItemElements = elementQuerySelectorAll(StatisticsElement, '.css_storage_statistics_item');\n  for (let i = 0; i < categoriesQuantity; i++) {\n    const previousItem = previousCategories[i];\n    const currentItem = categories[i];\n    const thisItemElement = statisticsItemElements[i];\n    if (previousItem) {\n      updateItem(thisItemElement, currentItem, previousItem);\n    } else {\n      updateItem(thisItemElement, currentItem, null);\n    }\n  }\n\n  previousCategories = categories;\n  previousSkeletonScreen = skeletonScreen;\n  previousAnimation = animation;\n}\n\nfunction setUpStorageFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const FieldSize = querySize('window');\n  // const FieldWidth = FieldSize.width;\n  const FieldHeight = FieldSize.height;\n  const defaultCategoriesQuantity = Math.min(7, Math.floor(FieldHeight / 55) + 2);\n  const statistics: StoreSizeStatistics = {\n    categorizedSizes: {},\n    totalSize: 0\n  };\n  for (let i = 0; i < defaultCategoriesQuantity; i++) {\n    const categoryKey = `store-${i}`;\n    statistics.categorizedSizes[categoryKey] = {\n      category: {\n        name: '',\n        key: categoryKey\n      },\n      size: `size-${i}`\n    };\n  }\n  updateStorageField(statistics, true, playing_animation);\n}\n\nasync function refreshStorageStatistics() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  setUpStorageFieldSkeletonScreen();\n  const statistics = await getStoresSizeStatistics();\n  updateStorageField(statistics, false, playing_animation);\n}\n\nexport function openStorage(): void {\n  StorageField.setAttribute('displayed', 'true');\n  refreshStorageStatistics();\n}\n\nexport function closeStorage(): void {\n  StorageField.setAttribute('displayed', 'false');\n}\n","import { FolderWithContent, isFolderContentSaved, listFoldersWithContent, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype SaveToFolderType = 'stop-on-route' | 'stop-on-location' | 'route' | 'route-on-route' | 'bus' | 'location' | 'location-on-route';\n\nconst SaveToFolderField = documentQuerySelector('.css_save_to_folder_field');\nconst SaveToFolderBodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst SaveToFolderListElement = elementQuerySelector(SaveToFolderBodyElement, '.css_save_to_folder_list');\n\nconst successfulSaveMessage = '已儲存至資料夾';\nconst failedSaveMessage = '無法儲存';\n\nfunction generateElementOfItem(item: FolderWithContent, type: SaveToFolderType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        saveStopItemOnRoute(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        saveStopItemOnLocation(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'route':\n      itemElement.onclick = function () {\n        saveRouteOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'route-on-route':\n      itemElement.onclick = function () {\n        saveRouteOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'location':\n      itemElement.onclick = function () {\n        saveLocationOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'location-on-route':\n      itemElement.onclick = function () {\n        saveLocationOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'bus':\n      // No action\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nasync function initializeSaveToFolderField(type: SaveToFolderType, parameters: Array<any>) {\n  const foldersWithContent = await listFoldersWithContent();\n  SaveToFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newItemElement.element);\n  }\n  SaveToFolderListElement.append(fragment);\n}\n\nexport function openSaveToFolder(type: SaveToFolderType, parameters: Array<any>): void {\n  pushPageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'true');\n  initializeSaveToFolderField(type, parameters);\n}\n\nexport function closeSaveToFolder(): void {\n  revokePageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nfunction saveStopItemOnRoute(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveStopItemOnLocation(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnDetailsPage(folderID: string, RouteID: number): void {\n  const actionButtonElement = documentQuerySelector('.css_route_details_field .css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"] .css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          actionButtonElement.setAttribute('highlighted', 'true');\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnRoute(folderID: string, RouteID: number): void {\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnDetailsPage(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnRoute(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n","import { prepareForSearch, searchFor, SearchItem, SearchResult } from '../../data/search/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { drawRoundedRect } from '../../tools/graphic';\nimport { supportTouch } from '../../tools/index';\nimport { getCSSVariableValue } from '../../tools/style';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { openBus } from '../bus/index';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getBlankIconElement, getIconElement, setIcon } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { GeneratedElement, pushPageHistory, querySize, revokePageHistory, scrollDocumentToTop } from '../index';\nimport { openLocation } from '../location/index';\nimport { promptMessage } from '../prompt/index';\nimport { openRoute } from '../route/index';\n\nlet previousSearchResults: Array<SearchResult> = [];\n\nconst searchField = documentQuerySelector('.css_search_field');\nconst searchHeadElement = elementQuerySelector(searchField, '.css_search_head');\nconst searchBodyElement = elementQuerySelector(searchField, '.css_search_body');\nconst searchInputElement = elementQuerySelector(searchHeadElement, '.css_search_search_input #search_input') as HTMLInputElement;\nconst searchInputCanvasElement = elementQuerySelector(searchHeadElement, '.css_search_search_input canvas') as HTMLCanvasElement;\nconst searchTypeFilterButtonElement = elementQuerySelector(searchHeadElement, '.css_search_button_right');\nconst searchResultsElement = elementQuerySelector(searchBodyElement, '.css_search_results');\nconst searchKeyboardElement = elementQuerySelector(searchBodyElement, '.css_search_keyboard');\n\nconst searchInputCanvasContext = searchInputCanvasElement.getContext('2d');\nconst searchInputPlaceholder = '搜尋路線、地點、公車';\nconst searchInputCanvasScale = window.devicePixelRatio;\n\nconst padding: number = 15 * searchInputCanvasScale;\nconst cursorWidth: number = 1.8 * searchInputCanvasScale;\nconst cursorBorderRadius: number = 0.9 * searchInputCanvasScale;\nconst selectionHighlightBorderRadius: number = 4 * searchInputCanvasScale;\nconst lineHeight: number = 25 * searchInputCanvasScale;\nconst fontWeight: string = '400';\nconst fontSize: number = 20 * searchInputCanvasScale;\nconst fontFamily: string = '\"Noto Sans TC\", sans-serif';\n\nconst keyboardRows: Array<[string, string, string, string, string]> = [\n  ['紅', '藍', '1', '2', '3'],\n  ['綠', '棕', '4', '5', '6'],\n  ['橘', '小', '7', '8', '9'],\n  ['鍵盤', '幹線', '清空', '0', '刪除']\n];\n\nlet textColor: string = getCSSVariableValue('--b-cssvar-333333');\nlet placeholderTextColor: string = getCSSVariableValue('--b-cssvar-aeaeb2');\nlet cursorColor: string = getCSSVariableValue('--b-cssvar-main-color');\nlet textWidth: number = 0;\nlet textWidthToCursorStart: number = 0;\nlet selectedTextWidth: number = 0;\nlet selection: boolean = false;\nlet cursorOffset: number = 0;\nlet size = querySize('head-two-button');\nlet width = size.width * searchInputCanvasScale;\nlet height = size.height * searchInputCanvasScale;\nlet playingCursorAnimation: boolean = false;\nlet keyboardInitialized = false;\n\nexport function typeTextIntoInput(value): void {\n  const currentValue = getSearchInputValue();\n  const newValue = `${currentValue}${value}`;\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function deleteCharFromInput(): void {\n  const currentValue = getSearchInputValue();\n  const newValue = currentValue.substring(0, currentValue.length - 1);\n  searchInputElement.value = newValue;\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function emptyInput(): void {\n  searchInputElement.value = '';\n  updateSearchResult();\n  updateSearchInput(-1, -1);\n  scrollDocumentToTop();\n}\n\nexport function openSystemKeyboard(event: Event): void {\n  event.preventDefault();\n  searchInputElement.focus();\n  scrollDocumentToTop();\n}\n\nfunction initializeKeyboard(): void {\n  if (!keyboardInitialized) {\n    keyboardInitialized = true;\n    const fragment = new DocumentFragment();\n    for (const row of keyboardRows) {\n      for (const item of row) {\n        const newButtonElement = document.createElement('button');\n        newButtonElement.classList.add('css_search_keyboard_key');\n        const eventName = supportTouch() ? 'touchstart' : 'mousedown';\n        switch (item) {\n          case '刪除':\n            newButtonElement.addEventListener(eventName, deleteCharFromInput);\n            newButtonElement.appendChild(getIconElement('backspace'));\n            break;\n          case '清空':\n            newButtonElement.addEventListener(eventName, emptyInput);\n            newButtonElement.appendChild(document.createTextNode(item));\n            break;\n          case '鍵盤':\n            newButtonElement.addEventListener(eventName, openSystemKeyboard);\n            newButtonElement.appendChild(getIconElement('keyboard'));\n            break;\n          default:\n            // Use an IIFE (Immediately Invoked Function Expression) to create a new scope for each item value. This ensures that the item variable is captured by value rather than by reference.\n            newButtonElement.addEventListener(\n              eventName,\n              (function (currentItem) {\n                return function () {\n                  typeTextIntoInput(currentItem);\n                };\n              })(item)\n            );\n            newButtonElement.appendChild(document.createTextNode(item));\n            break;\n        }\n\n        fragment.appendChild(newButtonElement);\n      }\n    }\n    searchKeyboardElement.append(fragment);\n  }\n}\n\nexport function openKeyboard(): void {\n  initializeKeyboard();\n  searchKeyboardElement.setAttribute('displayed', 'true');\n  playingCursorAnimation = true;\n  animateCursor();\n  updateSearchInput(-1, -1);\n}\n\nexport function closeKeyboard(): void {\n  searchKeyboardElement.setAttribute('displayed', 'false');\n  playingCursorAnimation = false;\n}\n\nexport function getSearchTypeFilterValue(): SearchItem['type'] | -1 {\n  return parseInt(searchTypeFilterButtonElement.getAttribute('type'));\n}\n\nexport function getSearchInputValue(): string {\n  return String(searchInputElement.value);\n}\n\nexport function updateSearchInput(cursorStart: number, cursorEnd: number): void {\n  let value = getSearchInputValue();\n  let empty = false;\n  if (value.length === 0) {\n    value = searchInputPlaceholder;\n    empty = true;\n    cursorStart = 0;\n    cursorEnd = 0;\n  } else {\n    if (cursorStart === -1 && cursorEnd === -1) {\n      cursorStart = value.length;\n      cursorEnd = cursorStart * 1;\n    }\n  }\n\n  size = querySize('head-two-button');\n  width = size.width * searchInputCanvasScale;\n  height = size.height * searchInputCanvasScale;\n  textColor = getCSSVariableValue('--b-cssvar-333333');\n  placeholderTextColor = getCSSVariableValue('--b-cssvar-aeaeb2');\n  cursorColor = getCSSVariableValue('--b-cssvar-main-color');\n\n  searchInputCanvasContext.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n  searchInputCanvasContext.textAlign = 'center';\n  searchInputCanvasContext.textBaseline = 'middle';\n\n  textWidth = searchInputCanvasContext.measureText(value).width;\n  textWidthToCursorStart = searchInputCanvasContext.measureText(value.substring(0, cursorStart)).width;\n  selectedTextWidth = searchInputCanvasContext.measureText(value.substring(cursorStart, cursorEnd)).width;\n  cursorOffset = empty ? 1 : Math.max(1, textWidthToCursorStart);\n\n  searchInputCanvasContext.clearRect(0, 0, width, height);\n\n  if (cursorStart === cursorEnd) {\n    selection = true;\n    searchInputCanvasContext.globalAlpha = 1;\n    searchInputCanvasContext.fillStyle = empty ? placeholderTextColor : textColor;\n    searchInputCanvasContext.fillText(value, textWidth / 2 + (Math.min(cursorOffset, width - padding) - cursorOffset), height / 2);\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, cursorWidth, lineHeight, cursorBorderRadius, cursorColor);\n  } else {\n    selection = false;\n    searchInputCanvasContext.globalAlpha = 0.27;\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, selectedTextWidth, lineHeight, selectionHighlightBorderRadius, cursorColor);\n    searchInputCanvasContext.globalAlpha = 1;\n    searchInputCanvasContext.fillStyle = empty ? placeholderTextColor : textColor;\n    searchInputCanvasContext.fillText(value, textWidth / 2 + (Math.min(cursorOffset, width - padding) - cursorOffset), height / 2);\n    searchInputCanvasContext.globalAlpha = 0.08;\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, selectedTextWidth, lineHeight, selectionHighlightBorderRadius, cursorColor);\n  }\n}\n\nexport function resizeSearchInputCanvas(): void {\n  size = querySize('head-two-button');\n  width = size.width;\n  height = size.height;\n  searchInputCanvasElement.width = width * searchInputCanvasScale;\n  searchInputCanvasElement.height = height * searchInputCanvasScale;\n  updateSearchInput(-1, -1);\n}\n\nfunction animateCursor(): void {\n  const x = performance.now();\n  const alpha = 1 - Math.pow(Math.sin((Math.PI * x) / 960), 4);\n  if (selection) {\n    searchInputCanvasContext.globalAlpha = alpha;\n    searchInputCanvasContext.clearRect(Math.min(cursorOffset, width - padding) - 1, 0, cursorWidth + 2, height);\n    drawRoundedRect(searchInputCanvasContext, Math.min(cursorOffset, width - padding), (height - lineHeight) / 2, cursorWidth, lineHeight, cursorBorderRadius, cursorColor);\n  }\n  if (playingCursorAnimation) {\n    window.requestAnimationFrame(animateCursor);\n  }\n}\n\nfunction generateElementOfSearchResultItem(): GeneratedElement {\n  const searchResultItemElement = document.createElement('div');\n  searchResultItemElement.classList.add('css_search_search_result');\n\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_search_search_result_name');\n\n  const typeElement = document.createElement('div');\n  typeElement.classList.add('css_search_search_result_type');\n  typeElement.appendChild(getBlankIconElement());\n\n  searchResultItemElement.appendChild(typeElement);\n  searchResultItemElement.appendChild(nameElement);\n  return {\n    element: searchResultItemElement,\n    id: ''\n  };\n}\n\nexport function updateSearchResult(): void {\n  const typeToIcon: Array<MaterialSymbols> = ['route', 'location_on', 'directions_bus'];\n\n  function updateItem(element: HTMLElement, currentItem: SearchResult, previousItem: SearchResult | null): void {\n    function updateTypeIcon(item: SearchResult, element: HTMLElement): void {\n      const thisSearchResultTypeElement = elementQuerySelector(element, '.css_search_search_result_type');\n      setIcon(thisSearchResultTypeElement, typeToIcon[item.item.type]);\n    }\n\n    function updateName(item: SearchResult, element: HTMLElement): void {\n      const nameElement = elementQuerySelector(element, '.css_search_search_result_name');\n      nameElement.innerText = item.item.n;\n    }\n\n    function updateClickHandler(item: SearchResult, element: HTMLElement): void {\n      switch (item.item.type) {\n        case 0:\n          element.onclick = function () {\n            openRoute(item.item.id as number, item.item.pid);\n          };\n          break;\n        case 1:\n          element.onclick = function () {\n            openLocation(item.item.hash);\n          };\n          break;\n        case 2:\n          element.onclick = function () {\n            openBus(item.item.id as number);\n          };\n          break;\n        default:\n          break;\n      }\n    }\n    // compare the current item with the previous item\n    if (previousItem) {\n      if (currentItem.item.type !== previousItem.item.type) {\n        updateTypeIcon(currentItem, element);\n      }\n      if (currentItem.item.id !== previousItem.item.id) {\n        updateName(currentItem, element);\n        updateClickHandler(currentItem, element);\n      }\n    }\n    // if the previous item is null, it means this is a new item\n    else {\n      updateTypeIcon(currentItem, element);\n      updateName(currentItem, element);\n      updateClickHandler(currentItem, element);\n    }\n  }\n\n  const currentType = getSearchTypeFilterValue();\n  const currentValue = getSearchInputValue();\n  if (!containPhoneticSymbols(currentValue)) {\n    const searchResults = searchFor(currentValue, currentType, 30);\n    const searchResultLength = searchResults.length;\n    const currentItemCapacity = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result').length;\n    if (searchResultLength !== currentItemCapacity) {\n      const difference = currentItemCapacity - searchResultLength;\n      if (difference < 0) {\n        const fragment = new DocumentFragment();\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const newElement = generateElementOfSearchResultItem();\n          fragment.appendChild(newElement.element);\n        }\n        searchResultsElement.appendChild(fragment);\n      } else {\n        const searchResultElements2 = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result');\n        for (let o = 0, d = Math.abs(difference); o < d; o++) {\n          const itemIndex = currentItemCapacity - 1 - o;\n          searchResultElements2[itemIndex].remove();\n        }\n      }\n    }\n\n    const searchResultElements = elementQuerySelectorAll(searchResultsElement, '.css_search_search_result');\n    for (let i = 0; i < searchResultLength; i++) {\n      const previousItem = previousSearchResults[i];\n      const currentItem = searchResults[i];\n      const thisItemElement = searchResultElements[i];\n      if (previousItem) {\n        updateItem(thisItemElement, currentItem, previousItem);\n      } else {\n        updateItem(thisItemElement, currentItem, null);\n      }\n    }\n    previousSearchResults = searchResults;\n  }\n}\n\nexport function switchSearchTypeFilter(): void {\n  const currentType = getSearchTypeFilterValue();\n  let newType: number = -1;\n  if (currentType >= -1 && currentType < 2) {\n    newType = currentType + 1;\n  } else {\n    newType = -1;\n  }\n  const icons: Array<MaterialSymbols> = ['filter_list', 'route', 'location_on', 'directions_bus'];\n  setIcon(searchTypeFilterButtonElement, icons[newType + 1]);\n  searchTypeFilterButtonElement.setAttribute('type', newType.toString());\n  updateSearchResult();\n}\n\nexport function openSearch(): void {\n  if (dataDownloadCompleted) {\n    pushPageHistory('Search');\n    searchField.setAttribute('displayed', 'true');\n    openKeyboard();\n    prepareForSearch();\n  } else {\n    promptMessage('download_for_offline', '資料還在下載中');\n  }\n}\n\nexport function closeSearch(): void {\n  revokePageHistory('Search');\n  closeKeyboard();\n  searchField.setAttribute('displayed', 'false');\n}\n","import { changeSettingOption, getSetting, SettingSelect, SettingSelectOption } from '../../data/settings/index';\nimport { documentQuerySelector, documentQuerySelectorAll, elementQuerySelector } from '../../tools/elements';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory } from '../index';\n\nconst SettingsOptionsField = documentQuerySelector('.css_settings_options_field');\nconst SettingsOptionsBodyElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_body');\nconst SettingsOptionsOptionsElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_settings_options');\nconst SettingsOptionsDescriptionElement = elementQuerySelector(SettingsOptionsBodyElement, '.css_options_description');\nconst SettingsOptionsHeadElement = elementQuerySelector(SettingsOptionsField, '.css_settings_options_head');\nconst SettingsOptionsTitleElement = elementQuerySelector(SettingsOptionsHeadElement, '.css_settings_options_title');\n\nfunction generateElementOfItem(setting: SettingSelect, item: SettingSelectOption, index: number): GeneratedElement {\n  const optionElement = document.createElement('div');\n  optionElement.classList.add('css_option');\n\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_option_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  const checkboxContainerElement = document.createElement('div');\n  checkboxContainerElement.classList.add('css_option_checkbox');\n\n  const checkboxElement = document.createElement('input');\n  checkboxElement.type = 'checkbox';\n  checkboxElement.checked = setting.option === index;\n  checkboxElement.onclick = (event) => {\n    settingsOptionsHandler(event, setting.key, index);\n  };\n\n  checkboxContainerElement.appendChild(checkboxElement);\n  optionElement.appendChild(nameElement);\n  optionElement.appendChild(checkboxContainerElement);\n\n  return {\n    element: optionElement,\n    id: ''\n  };\n}\n\nfunction initializeSettingsOptionsField(settingKey: string): void {\n  const setting = getSetting(settingKey) as SettingSelect;\n  SettingsOptionsTitleElement.innerText = setting.name;\n  SettingsOptionsDescriptionElement.innerText = setting.description;\n  SettingsOptionsOptionsElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  let index: number = 0;\n  for (const item of setting.options) {\n    const thisElement = generateElementOfItem(setting, item, index);\n    fragment.appendChild(thisElement.element);\n    index += 1;\n  }\n  SettingsOptionsOptionsElement.append(fragment);\n}\n\nexport function openSettingsOptions(settingKey: string): void {\n  pushPageHistory('SettingsOptions');\n  SettingsOptionsField.setAttribute('displayed', 'true');\n  initializeSettingsOptionsField(settingKey);\n  closePreviousPage();\n}\n\nexport function closeSettingsOptions(): void {\n  // revokePageHistory('SettingsOptions');\n  SettingsOptionsField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function settingsOptionsHandler(event: Event, settingKey: string, index: number): void {\n  const checkboxes = documentQuerySelectorAll('.css_settings_options_field .css_settings_options_body .css_settings_options .css_option .css_option_checkbox input[type=\"checkbox\"]') as NodeListOf<HTMLInputElement>;\n  for (const checkbox of checkboxes) {\n    checkbox.checked = false;\n  }\n  const target = event.target as HTMLInputElement;\n  target.checked = true;\n  changeSettingOption(settingKey, index);\n}\n"],"names":["ScheduleNotificationField","documentQuerySelector","ScheduleNotificationBodyElement","elementQuerySelector","ScheduleNotificationListElement","generateElementOfItem","item","type","parameters","itemElement","document","createElement","classList","add","iconElement","iconSpanElement","appendChild","getIconElement","icon","nameElement","createTextNode","name","onclick","itemElementID","StopID","RouteID","EstimateTime","index","scheduleNotificationButtonElement","promptMessage","setAttribute","closeScheduleNotification","scheduleNotificationForStop","then","result","scheduleNotificationForStopItemOnRoute","scheduleNotificationForStopItemOnLocation","element","id","openScheduleNotification","pushPageHistory","innerHTML","_step","fragment","DocumentFragment","_iterator","_createForOfIteratorHelper","scheduleNotificationOptions","s","n","done","newElement","value","append","err","e","f","initializeScheduleNotificationField","revokePageHistory","previousCategories","previousAnimation","previousSkeletonScreen","StorageField","StorageBodyElement","StatisticsElement","statisticsItemElement","valueElement","updateStorageField","statistics","skeletonScreen","animation","updateItem","currentItem","previousItem","updateValue","innerText","size","updateName","category","updateAnimation","booleanToString","updateSkeletonScreen","key","categories","categorizedSizes","push","categoriesQuantity","length","currentItemCapacity","elementQuerySelectorAll","difference","o","d","Math","abs","statisticsItemElements2","remove","statisticsItemElements","i","thisItemElement","_refreshStorageStatistics","_asyncToGenerator","playing_animation","getSettingOptionValue","FieldHeight","querySize","height","defaultCategoriesQuantity","min","floor","totalSize","categoryKey","setUpStorageFieldSkeletonScreen","getStoresSizeStatistics","apply","arguments","openStorage","refreshStorageStatistics","closeStorage","SaveToFolderField","SaveToFolderBodyElement","SaveToFolderListElement","successfulSaveMessage","failedSaveMessage","folderID","saveToFolderButtonElement","saveStop","isFolderContentSaved","k","closeSaveToFolder","saveStopItemOnRoute","saveStopItemOnLocation","actionButtonElement","saveRoute","hash","saveLocation","_initializeSaveToFolderField","foldersWithContent","listFoldersWithContent","newItemElement","openSaveToFolder","_x","_x2","initializeSaveToFolderField","previousSearchResults","searchField","searchHeadElement","searchBodyElement","searchInputElement","searchInputCanvasElement","searchTypeFilterButtonElement","searchResultsElement","searchKeyboardElement","searchInputCanvasContext","getContext","searchInputCanvasScale","window","devicePixelRatio","padding","cursorWidth","cursorBorderRadius","selectionHighlightBorderRadius","lineHeight","fontSize","keyboardRows","textColor","getCSSVariableValue","placeholderTextColor","cursorColor","textWidth","textWidthToCursorStart","selectedTextWidth","selection","cursorOffset","width","playingCursorAnimation","keyboardInitialized","deleteCharFromInput","currentValue","getSearchInputValue","newValue","substring","updateSearchResult","updateSearchInput","scrollDocumentToTop","emptyInput","openSystemKeyboard","event","preventDefault","focus","openKeyboard","_step2","_iterator2","newButtonElement","eventName","supportTouch","addEventListener","initializeKeyboard","animateCursor","getSearchTypeFilterValue","parseInt","getAttribute","String","cursorStart","cursorEnd","empty","font","textAlign","textBaseline","measureText","max","clearRect","globalAlpha","fillStyle","fillText","drawRoundedRect","resizeSearchInputCanvas","x","performance","now","alpha","pow","sin","PI","requestAnimationFrame","generateElementOfSearchResultItem","searchResultItemElement","typeElement","getBlankIconElement","typeToIcon","updateTypeIcon","thisSearchResultTypeElement","setIcon","updateClickHandler","openRoute","pid","openLocation","openBus","currentType","containPhoneticSymbols","searchResults","searchFor","searchResultLength","searchResultElements2","searchResultElements","switchSearchTypeFilter","newType","toString","openSearch","dataDownloadCompleted","prepareForSearch","closeSearch","SettingsOptionsField","SettingsOptionsBodyElement","SettingsOptionsOptionsElement","SettingsOptionsDescriptionElement","SettingsOptionsHeadElement","SettingsOptionsTitleElement","setting","optionElement","checkboxContainerElement","checkboxElement","checked","option","settingKey","documentQuerySelectorAll","target","changeSettingOption","settingsOptionsHandler","openSettingsOptions","getSetting","description","options","thisElement","initializeSettingsOptionsField","closePreviousPage","closeSettingsOptions","openPreviousPage"],"ignoreList":[],"sourceRoot":""}