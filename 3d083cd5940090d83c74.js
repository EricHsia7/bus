"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[704],{4261:(t,e,n)=>{n.d(e,{kP:()=>W,zk:()=>F,GZ:()=>nt,GS:()=>et});var r=n(9566),a=n(8621),i=n(3459),o=n(8024),u=n(3648),c=n(904),l=n(3041),s=n(8134),d=n(9469),f=n(9119),v=n(8279);function m(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){m(i,r,a,o,u,"next",t)}function u(t){m(i,r,a,o,u,"throw",t)}o(void 0)})}}function p(){return(p=h(function*(t){var e=yield(0,s.Rk)(t);if(!1!==e){var n=(0,d.i)(0,{id:t,name:e.n});navigator.share&&navigator.share({title:e.n,url:n}).then(function(){(0,f.a)("已分享路線","check_circle")}).catch(function(t){(0,f.a)("已取消分享","cancel")})}})).apply(this,arguments)}function y(){return(y=h(function*(t){var e=yield(0,s.Rk)(t);if(!1!==e){var n=(0,d.i)(0,{id:t,name:e.n});(0,v.X8)(n)}})).apply(this,arguments)}var g=n(6141),b=n(7968);function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return x(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var A='"Noto Sans TC", sans-serif',I=(0,c.gO)("route-details-canvas"),k=I.width,S=I.height,_=Math.min(window.devicePixelRatio,1.875)||1,D={};function j(){var t=document.createElement("div");return t.classList.add("cn"),{element:t,id:""}}function M(){var t=document.createElement("div");t.classList.add("en");var e=document.createElement("canvas");return e.classList.add("fn"),t.appendChild(e),{element:t,id:""}}function C(t,e,n,r,a,c){t.innerText=e.name,t.setAttribute("day",c.toString()),t.onclick=function(){!function(t){for(var e=(0,i.Js)("playing_animation"),n=(0,u.jg)(W,".cn"),r=(0,u.jg)(F,".en"),a=0;a<7;a++){var o,c,l=n[a],s=r[a],d=`d_${a}`,f=null===(o=D)||void 0===o?void 0:o.calendarEventGroups[d],v=null===(c=D)||void 0===c?void 0:c.calendarDays[d];if(f&&v){var m=(0,g.t)("--c"),h=(0,g.t)("--d"),p=(0,g.t)("--e"),y=(0,g.t)("--nc"),b=(0,g.t)("--b"),w=(0,g.t)("--ra");C(l,v,t,!1,e,a),E(s,f,t,b,m,h,p,y,w,a)}}}(c)},t.setAttribute("highlighted",n===c?"true":"false"),t.setAttribute("animation",(0,o.xZ)(a)),t.setAttribute("skeleton-screen",(0,o.xZ)(r))}function E(t,e,n,r,a,i,l,s,d,f){function v(t,e,n){var r=70*e;t.fillStyle=n,t.fillRect(45,r+5,k-45,1.2),t.font=`400 12px ${A}`,t.textBaseline="top";var a=`${String(e).padStart(2,"0")}:00`,i=t.measureText(a),o=i.width,u=i.actualBoundingBoxDescent;t.fillText(a,(45-o)/2,r+(10-u)/2,o)}function m(t,e,n,r,a,i,o){var u=new Date;u.setDate(1),u.setMonth(0),u.setFullYear(e.date.getFullYear()),u.setMonth(e.date.getMonth()),u.setDate(e.date.getDate()),u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);var c=(e.date.getTime()-u.getTime())/864e5*24*70,l=k-45,s=60*e.duration*1e3/864e5*24*70;(0,b.wg)(t,45,c,l,s,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,b.wg)(t,45,c,3,s,{tl:3,tr:0,bl:3,br:0},n),t.font=`400 14px ${A}`,t.textBaseline="top",t.fillStyle=n;var d=e.dateString,f=t.measureText(d),v=f.width,m=f.actualBoundingBoxDescent;t.fillText(d,53,c+(s-m)/2,v)}var h=(0,u.aI)(t,".fn"),p=h.getContext("2d");if(function(t,e,n){var r=e===n;t.setAttribute("displayed",(0,o.xZ)(r))}(t,n,f),function(t){I=(0,c.gO)("route-details-canvas"),k=I.width,S=I.height,_=Math.min(window.devicePixelRatio,1.875)||1,t.width=k*_,t.height=S*_;var e=t.getContext("2d");e.setTransform(1,0,0,1,0,0),e.scale(_,_)}(h),n===f){p.clearRect(0,0,k,S);for(var y=0;y<24;y++)v(p,y,d);var g,x=w(e);try{for(x.s();!(g=x.n()).done;){m(p,g.value,r,a,i,l,s)}}catch(t){x.e(t)}finally{x.f()}}else p.clearRect(0,0,k,S)}function T(t,e,n){var r=(new Date).getDay(),a=(0,g.t)("--c"),i=(0,g.t)("--d"),o=(0,g.t)("--e"),c=(0,g.t)("--nc"),l=(0,g.t)("--b"),s=(0,g.t)("--ra"),d=t.calendarDays,f=t.calendarDayQuantity,v=t.calendarEventGroups,m=(t.calendarEventQuantity,(0,u.jg)(F,".en").length);if(f!==m){var h=m-f;if(h<0)for(var p=0;p<Math.abs(h);p++){var y=j();W.appendChild(y.element);var b=M();F.appendChild(b.element)}else for(var w=(0,u.jg)(W,".cn"),x=(0,u.jg)(F,".en"),A=0;A<Math.abs(h);A++){var I=m-1-A;w[I].remove(),x[I].remove()}}for(var k=(0,u.jg)(W,".cn"),S=(0,u.jg)(F,".en"),_=0;_<f;_++){var T=`d_${_}`,Z=d[T],$=v[T],R=k[_],P=S[_];C(R,Z,r,e,n,_),E(P,$,r,l,a,i,o,c,s,_)}D=t}var Z=n(4537),$=[],R=!0,P=!1;function L(){var t=document.createElement("div");t.classList.add("ym");var e=document.createElement("div");e.classList.add("zm"),t.appendChild(e);var n=document.createElement("div");return n.classList.add("_m"),t.appendChild(n),{element:t,id:""}}function B(t,e,n,r){function a(t,e,a){function i(t,e){(0,u.aI)(t,".zm").innerHTML=(0,Z.Z)(e.icon)}function c(t,e){(0,u.aI)(t,"._m").innerText=e.value}function l(t,e){t.setAttribute("animation",(0,o.xZ)(e))}function s(t,e){t.setAttribute("skeleton-screen",(0,o.xZ)(e))}null===a?(i(t,e),c(t,e),l(t,r),s(t,n)):((0,o.hw)(a,e)||i(t,e),(0,o.hw)(a,e)||c(t,e),R!==r&&l(t,r),P!==n&&s(t,n))}var i=e.length;t.setAttribute("skeleton-screen",(0,o.xZ)(n));var c=(0,u.jg)(t,".wm .ym").length;if(i!==c){var l=c-i;if(l<0)for(var s=0;s<Math.abs(l);s++){var d=L();(0,u.aI)(t,".wm").appendChild(d.element)}else for(var f=0;f<Math.abs(l);f++){var v=c-1-f;(0,u.jg)(t,".wm .ym")[v].remove()}}for(var m=0;m<i;m++){var h=(0,u.jg)(t,".wm .ym")[m],p=e[m];0===$.length?a(h,p,null):a(h,p,$[m])}$=e,R=r,P=n}function G(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function J(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var q=(0,u.bv)(".lm"),H=(0,u.aI)(q,".qm"),O=(0,u.aI)(H,".rm"),Q=(0,u.aI)(O,'.sm[group="calendar"]'),N=(0,u.aI)(Q,".wm"),W=(0,u.aI)(N,".bn"),F=(0,u.aI)(N,".dn"),U=(0,u.aI)(q,'.qm .rm .sm[group="actions"]'),X=(0,u.aI)(U,'.wm .xm[action="save-to-folder"]'),Y=(0,u.aI)(U,'.wm .xm[action="get-permalink"]'),K=(0,u.aI)(U,'.wm .xm[action="show-permalink-qrcode"]'),V=(0,u.aI)(q,'.qm .rm .sm[group="properties"]');function tt(){var t;return t=function*(t,e){var n=(0,i.Js)("playing_animation"),u=yield(0,r.LH)("route",t);X.setAttribute("animation",(0,o.xZ)(n)),X.setAttribute("highlighted",(0,o.xZ)(u)),X.onclick=function(){(0,l.B)("route",[t])},Y.setAttribute("animation",(0,o.xZ)(n)),Y.onclick=function(){!function(t){p.apply(this,arguments)}(t)},K.setAttribute("animation",(0,o.xZ)(n)),K.onclick=function(){!function(t){y.apply(this,arguments)}(t)},function(t){for(var e=(0,i.Js)("playing_animation"),n=[],r=0;r<5;r++)n.push({key:r,icon:"none",value:""});B(t,n,!0,e)}(V),function(){for(var t=(0,i.Js)("playing_animation"),e={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var o=`d_${a}`;n[o]=[],r[o]={day:a,code:"d_{i}",name:""};for(var u=0;u<e[o];u++){var c=new Date;c.setHours(0),c.setMinutes(30*u),c.setSeconds(0),c.setMilliseconds(0),n[o].push({date:c,dateString:"",duration:15})}}T({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:e},!0,t)}();var c=(0,o.zx)(),s=yield(0,a.p)(t,e,c);B(V,s.properties,!1,n),T(s.calendar,!1,n)},tt=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){J(i,r,a,o,u,"next",t)}function u(t){J(i,r,a,o,u,"throw",t)}o(void 0)})},tt.apply(this,arguments)}function et(t,e){(0,c.WR)("RouteDetails"),q.setAttribute("displayed","true"),function(t,e){tt.apply(this,arguments)}(t,e)}function nt(){(0,c.kr)("RouteDetails"),q.setAttribute("displayed","false");var t,e=G((0,u.jg)(F,".en"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,r=G((0,u.jg)(W,".cn"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(t){r.e(t)}finally{r.f()}}},7908:(t,e,n)=>{n.d(e,{NW:()=>y,XG:()=>h,hy:()=>p});var r=n(3937),a=n(77),i=n(8024),o=n(3648),u=n(904),c=n(9119);function l(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var s=(0,o.bv)(".gn"),d=(0,o.aI)(s,".ln"),f=(0,o.aI)(d,".mn"),v=(0,o.aI)(f,'.nn[group="provider"] .rn input'),m=(0,o.aI)(f,'.nn[group="registration-key"] .rn input');function h(){(0,u.WR)("RegisterNotification"),s.setAttribute("displayed","true"),v.value=(0,a.D7)(),m.value="",(0,u.Z_)()}function p(){s.setAttribute("displayed","false"),(0,u.l$)()}function y(){return g.apply(this,arguments)}function g(){var t;return t=function*(){(0,c.a)("處理中","manufacturing");var t=v.value,e=m.value;if((0,i.Gz)(t))return(0,a.Je)(t),(yield(0,r.e)(e))?void(0,c.a)("註冊成功","check_circle"):void(0,c.a)("註冊失敗","error");(0,c.a)("無效的提供者","error")},g=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){l(i,r,a,o,u,"next",t)}function u(t){l(i,r,a,o,u,"throw",t)}o(void 0)})},g.apply(this,arguments)}}}]);
//# sourceMappingURL=3d083cd5940090d83c74.js.map