!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,()=>(()=>{"use strict";var t,e,r={3525(t,e,r){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,s=[],f=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;f=!1}else for(;!(f=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);f=!0);}catch(t){l=!0,o=t}finally{try{if(!f&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("E1")}()}var a=r(2284);r(3503),r(4462).sha512;function i(t,e){return null!=t&&"object"===(0,a.a)(t)&&!Array.isArray(t)&&Object.prototype.hasOwnProperty.call(t,e)}var s=[],f=!1;if("onconnect"in self)self.onconnect=function(t){var e=t.ports[0];e.onmessage=function(t){var r=o(t.data,5),n=r[0],a=r[1],i=r[2],f=r[3],l=r[4];s.push({personalSchedules:n,busArrivalTimeDataGroups:a,chartWidth:i,chartHeight:f,taskID:l,port:e}),d()}};else{var l=self;self.onmessage=function(t){var e=o(t.data,5),r=e[0],n=e[1],a=e[2],i=e[3],f=e[4];s.push({personalSchedules:r,busArrivalTimeDataGroups:n,chartWidth:a,chartHeight:i,taskID:f,port:l}),d()}}var u,c,p="'Noto Sans TC', sans-serif",h=!1;function d(){if(!f&&0!==s.length){f=!0;var t=s.shift(),e=t.personalSchedules,r=t.busArrivalTimeDataGroups,n=t.chartWidth,o=t.chartHeight,a=t.taskID,l=t.port,u={};for(var v of e){var y=60*v.period.start.hours+v.period.start.minutes,$=60*v.period.end.hours+v.period.end.minutes,b=n/($-y);for(var g of r)if(!(v.days.indexOf(g.day)<0)){var m=g.max,x=g.stats.slice(y,$),w=x.length,O="",j="",S=0;S=w/30<=3?10:30;for(var k=Math.floor(w/S),A=n/k,T=k-1;T>=0;T--){var C=.175+T*A;j+=` M${C} 0`,j+=` L${C} ${o}`;var D=y+T*S,M=D%60,L=`${((D-M)/60).toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`,B=30,I=12;if(h){var P=c.measureText(L);B=P.width,I=P.actualBoundingBoxDescent}var G=(o-I)/2;O+=`<text x="${C+3}" y="${G}" transform="rotate(-90 ${(C+3+C+3+B)/2} ${(G+G+I)/2})" font-weight="400" font-size="10" font-family="${p}" component="label">${L}</text>`}var H=`<path d="${j}" fill="none" stroke-width="0.35" component="vertical-gridline"/>`,W=`<path d="${`M0 ${o} L${n} ${o-.175}`}" fill="none" stroke-width="0.35" component="bottom-line"/>`,E="";if(E+=`M${n} ${o}`,0!==m)for(var z=w-1;z>=0;z--){var F=(z+1)/w*n,N=(1-x[z]/m)*o;E+=` L${F} ${N}`,E+=` L${F-b} ${N}`,E+=` L${F-b} ${o}`}var U=`<svg width="${n}" height="${o}" viewBox="0 0 ${n} ${o}" xmlns="http://www.w3.org/2000/svg">${H}${O}${W}${`<path d="${E+=" Z"}" stroke="none" stroke-width="0" component="bars"/>`}</svg>`,Z=`s_${g.id}`;i(u,Z)||(u[Z]=[]),u[Z].push({personalSchedule:v,chart:U,day:g.day})}}l.postMessage([u,a]),f=!1,d()}}"undefined"!=typeof OffscreenCanvas&&(u=new OffscreenCanvas(64,64),(c=u.getContext("2d")).font=`400 10px ${p}`,c.textBaseline="top",h=!0)}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;var a=n[t]={exports:{}};return r[t](a,a.exports,o),a.exports}o.m=r,o.x=()=>{var t=o.O(void 0,[0],()=>o(3525));return t=o.O(t)},o.amdO={},t=[],o.O=(e,r,n,a)=>{if(!r){var i=1/0;for(u=0;u<t.length;u++){for(var[r,n,a]=t[u],s=!0,f=0;f<r.length;f++)(!1&a||i>=a)&&Object.keys(o.O).every(t=>o.O[t](r[f]))?r.splice(f--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,n,a]},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((e,r)=>(o.f[r](t,e),e),[])),o.u=t=>"8a10acec40d83ac25b73.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.p="./",(()=>{var t={26:1,37:1};o.f.i=(e,r)=>{t[e]||importScripts(o.p+o.u(e))};var e=self.webpackChunkbus=self.webpackChunkbus||[],r=e.push.bind(e);e.push=e=>{var[n,a,i]=e;for(var s in a)o.o(a,s)&&(o.m[s]=a[s]);for(i&&i(o);n.length;)t[n.pop()]=1;r(e)}})(),e=o.x,o.x=()=>o.e(0).then(e);var a=o.x();return a=a.default})());
//# sourceMappingURL=9d12f0b74fe98387012d.js.map