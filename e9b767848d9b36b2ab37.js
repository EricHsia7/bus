"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[226],{752(t,e,n){n.d(e,{Ho:()=>v,b$:()=>p});var r=n(3422),a=n(8179),i=n(4537),o=n(904),c=n(9119);function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var d=(0,a.bv)(".ah"),s=(0,a.aI)(d,".bh"),f=(0,a.aI)(s,".ch");function h(t,e,n){var o=document.createElement("div");o.classList.add("dh");var u=document.createElement("div");u.classList.add("eh");var l=document.createElement("span");l.appendChild((0,i.YC)(t.icon)),u.appendChild(l);var d=document.createElement("div");switch(d.classList.add("fh"),d.appendChild(document.createTextNode(t.name)),e){case"stop-on-route":o.onclick=function(){!function(t,e,n,i,o){var u=(0,a.bv)(`.gh .hh .ih .jh .kh .lh#${t}`),l=(0,a.aI)(u,'.mh .nh .oh[type="schedule-notification"]');(0,c.a)("manufacturing","處理中"),l.setAttribute("enabled","false"),p(),(0,r.mD)(e,n,i,o).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),l.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),l.setAttribute("enabled","true"),l.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),l.setAttribute("enabled","true")}})}(n[0],n[1],n[2],n[3],t.index)};break;case"stop-on-location":o.onclick=function(){!function(t,e,n,i,o){var u=(0,a.bv)(`.cd .gd .ke .ne .ud#${t}`),l=(0,a.aI)(u,'.ee .fe .ge[type="schedule-notification"]');(0,c.a)("manufacturing","處理中"),l.setAttribute("enabled","false"),p(),(0,r.mD)(e,n,i,o).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),l.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),l.setAttribute("enabled","true"),l.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),l.setAttribute("enabled","true")}})}(n[0],n[1],n[2],n[3],t.index)}}return o.appendChild(u),o.appendChild(d),{element:o,id:""}}function v(t,e){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(t,e){f.innerHTML="";var n,a=new DocumentFragment,i=u(r.FX);try{for(i.s();!(n=i.n()).done;){var o=h(n.value,t,e);a.appendChild(o.element)}}catch(t){i.e(t)}finally{i.f()}f.append(a)}(t,e)}function p(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},3041(t,e,n){n.d(e,{B:()=>b,n:()=>A});var r=n(467),a=n(9566),i=n(8179),o=n(8024),c=n(4537),u=n(904),l=n(9119);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var f=(0,i.bv)(".ph"),h=(0,i.aI)(f,".qh"),v=(0,i.aI)(h,".rh"),p="已儲存至資料夾",m="無法儲存";function y(t,e,n){var r=document.createElement("div");r.classList.add("sh");var u=document.createElement("div");u.classList.add("th");var d=document.createElement("span");d.appendChild((0,c.YC)(t.icon)),u.appendChild(d);var s=document.createElement("div");switch(s.classList.add("uh"),s.appendChild(document.createTextNode(t.name)),e){case"stop-on-route":r.onclick=function(){!function(t,e,n,r){var c=(0,i.bv)(`.gh .hh .ih .jh .kh .lh#${t}`),u=(0,i.aI)(c,'.mh .nh .oh[type="save-to-folder"]');(0,a.aq)(e,n,r).then(function(t){t?(0,a.LH)("stop",n).then(function(t){t&&(u.setAttribute("highlighted",(0,o.xZ)(t)),(0,l.a)("folder",p),A())}):(0,l.a)("warning",m)})}(n[0],t.id,n[1],n[2])};break;case"stop-on-location":r.onclick=function(){!function(t,e,n,r){var c=(0,i.bv)(`.cd .gd .ke .ne .ud#${t}`),u=(0,i.aI)(c,'.ee .fe .ge[type="save-to-folder"]');(0,a.aq)(e,n,r).then(function(t){t?(0,a.LH)("stop",n).then(function(t){t&&(u.setAttribute("highlighted",(0,o.xZ)(t)),(0,l.a)("folder",p),A())}):(0,l.a)("warning",m)})}(n[0],t.id,n[1],n[2])};break;case"route":r.onclick=function(){var e,r,o;e=t.id,r=n[0],o=(0,i.bv)('.vh .wh .xh .yh[group="actions"] .zh ._h[action="save-to-folder"]'),(0,a.Fq)(e,r).then(function(t){t?(0,a.LH)("route",r).then(function(t){t&&(o.setAttribute("highlighted","true"),(0,l.a)("folder",p),A())}):(0,l.a)("warning",m)})};break;case"route-on-route":r.onclick=function(){var e,r;e=t.id,r=n[0],(0,a.Fq)(e,r).then(function(t){t?(0,a.LH)("route",r).then(function(t){t&&((0,l.a)("folder",p),A())}):(0,l.a)("warning",m)})};break;case"location":case"location-on-route":r.onclick=function(){var e,r;e=t.id,r=n[0],(0,a.DW)(e,r).then(function(t){t?(0,a.LH)("location",r).then(function(t){t&&((0,l.a)("folder",p),A())}):(0,l.a)("warning",m)})}}return r.appendChild(u),r.appendChild(s),{element:r,id:""}}function g(){return(g=(0,r.A)(function*(t,e){var n=yield(0,a.Xi)();v.innerHTML="";var r,i=new DocumentFragment,o=d(n);try{for(o.s();!(r=o.n()).done;){var c=y(r.value,t,e);i.appendChild(c.element)}}catch(t){o.e(t)}finally{o.f()}v.append(i)})).apply(this,arguments)}function b(t,e){(0,u.WR)("SaveToFolder"),f.setAttribute("displayed","true"),function(t,e){g.apply(this,arguments)}(t,e)}function A(){(0,u.kr)("SaveToFolder"),f.setAttribute("displayed","false")}},5286(t,e,n){n.d(e,{kP:()=>W,zk:()=>J,VY:()=>V,b7:()=>P,GZ:()=>et,GS:()=>tt});var r=n(467),a=n(9566),i=n(8621),o=n(3459),c=n(8179),u=n(8024),l=n(904),d=n(3041),s=n(8134),f=n(9469),h=n(9119),v=n(8279);function p(){return(p=(0,r.A)(function*(t){var e=yield(0,s.Rk)(t);if(!1!==e){var n=(0,f.i)(0,{id:t,name:e.n});navigator.share&&navigator.share({title:e.n,url:n}).then(function(){(0,h.a)("check_circle","已分享路線")}).catch(function(t){(0,h.a)("cancel","已取消分享")})}})).apply(this,arguments)}function m(){return(m=(0,r.A)(function*(t){var e=yield(0,s.Rk)(t);if(!1!==e){var n=(0,f.i)(0,{id:t,name:e.n});(0,v.X8)(n)}})).apply(this,arguments)}var y=n(7968),g=n(6141);function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return A(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var w='"Noto Sans TC", sans-serif',k=(0,l.gO)("route-details-canvas"),x=k.width,I=k.height,S=Math.min(window.devicePixelRatio,1.875)||1,C={};function D(){var t=document.createElement("div");return t.classList.add("ai"),{element:t,id:""}}function _(){var t=document.createElement("div");t.classList.add("bi");var e=document.createElement("canvas");return e.classList.add("ci"),t.appendChild(e),{element:t,id:""}}function j(t,e,n,r,a,i){t.innerText=e.name,t.setAttribute("day",i.toString()),t.onclick=function(){!function(t){for(var e=(0,o.Js)("playing_animation"),n=(0,c.jg)(W,".ai"),r=(0,c.jg)(J,".bi"),a=0;a<7;a++){var i,u,l=n[a],d=r[a],s=`d_${a}`,f=null===(i=C)||void 0===i?void 0:i.calendarEventGroups[s],h=null===(u=C)||void 0===u?void 0:u.calendarDays[s];if(f&&h){var v=(0,g.t)("--c"),p=(0,g.t)("--d"),m=(0,g.t)("--e"),y=(0,g.t)("--di"),b=(0,g.t)("--b"),A=(0,g.t)("--ei");j(l,h,t,!1,e,a),E(d,f,t,b,v,p,m,y,A,a)}}}(i)},t.setAttribute("highlighted",n===i?"true":"false"),t.setAttribute("animation",(0,u.xZ)(a)),t.setAttribute("skeleton-screen",(0,u.xZ)(r))}function E(t,e,n,r,a,i,o,d,s,f){function h(t,e,n){var r=70*e;t.fillStyle=n,t.fillRect(45,r+5,x-45,1.2),t.font=`400 12px ${w}`,t.textBaseline="top";var a=`${String(e).padStart(2,"0")}:00`,i=t.measureText(a),o=i.width,c=i.actualBoundingBoxDescent;t.fillText(a,(45-o)/2,r+(10-c)/2,o)}function v(t,e,n,r,a,i,o){var c=new Date;c.setDate(1),c.setMonth(0),c.setFullYear(e.date.getFullYear()),c.setMonth(e.date.getMonth()),c.setDate(e.date.getDate()),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);var u=(e.date.getTime()-c.getTime())/864e5*24*70,l=x-45,d=60*e.duration*1e3/864e5*24*70;(0,y.wg)(t,45,u,l,d,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,y.wg)(t,45,u,3,d,{tl:3,tr:0,bl:3,br:0},n),t.font=`400 14px ${w}`,t.textBaseline="top",t.fillStyle=n;var s=e.dateString,f=t.measureText(s),h=f.width,v=f.actualBoundingBoxDescent;t.fillText(s,53,u+(d-v)/2,h)}var p=(0,c.aI)(t,".ci"),m=p.getContext("2d");if(function(t,e,n){var r=e===n;t.setAttribute("displayed",(0,u.xZ)(r))}(t,n,f),function(t){k=(0,l.gO)("route-details-canvas"),x=k.width,I=k.height,S=Math.min(window.devicePixelRatio,1.875)||1,t.width=x*S,t.height=I*S;var e=t.getContext("2d");e.setTransform(1,0,0,1,0,0),e.scale(S,S)}(p),n===f){m.clearRect(0,0,x,I);for(var g=0;g<24;g++)h(m,g,s);var A,C=b(e);try{for(C.s();!(A=C.n()).done;){v(m,A.value,r,a,i,o,d)}}catch(t){C.e(t)}finally{C.f()}}else m.clearRect(0,0,x,I)}function L(t,e,n){var r=(new Date).getDay(),a=(0,g.t)("--c"),i=(0,g.t)("--d"),o=(0,g.t)("--e"),u=(0,g.t)("--di"),l=(0,g.t)("--b"),d=(0,g.t)("--ei"),s=t.calendarDays,f=t.calendarDayQuantity,h=t.calendarEventGroups,v=(t.calendarEventQuantity,(0,c.jg)(J,".bi").length);if(f!==v){var p=v-f;if(p<0){for(var m=new DocumentFragment,y=new DocumentFragment,b=0,A=Math.abs(p);b<A;b++){var w=D();m.appendChild(w.element);var k=_();y.appendChild(k.element)}W.append(m),J.append(y)}else for(var x=(0,c.jg)(W,".ai"),I=(0,c.jg)(J,".bi"),S=0,L=Math.abs(p);S<L;S++){var T=v-1-S;x[T].remove(),I[T].remove()}}for(var $=(0,c.jg)(W,".ai"),M=(0,c.jg)(J,".bi"),R=0;R<f;R++){var Z=`d_${R}`,F=s[Z],H=h[Z],z=$[R],B=M[R];j(z,F,r,e,n,R),E(B,H,r,l,a,i,o,u,d,R)}C=t}var T=n(4537),$=[],M=!1,R=!1;function Z(){var t=document.createElement("div");t.classList.add("fi");var e=document.createElement("div");e.classList.add("gi"),e.appendChild((0,T.oC)()),t.appendChild(e);var n=document.createElement("div");return n.classList.add("hi"),t.appendChild(n),{element:t,id:""}}function F(t,e,n){function r(t,r,a){function i(t,e){var n=(0,c.aI)(t,".gi");(0,T.yD)(n,e.icon)}function o(t,e){(0,c.aI)(t,".hi").innerText=e.value}function l(t,e){t.setAttribute("animation",(0,u.xZ)(e))}function d(t,e){t.setAttribute("skeleton-screen",(0,u.xZ)(e))}null==a?(i(t,r),o(t,r),l(t,n),d(t,e)):((0,u.hw)(a,r)||i(t,r),(0,u.hw)(a,r)||o(t,r),M!==n&&l(t,n),R!==e&&d(t,e))}var a=t.length;e!==R&&P.setAttribute("skeleton-screen",(0,u.xZ)(e));var i=(0,c.jg)(V,".fi").length;if(a!==i){var o=i-a;if(o<0){for(var l=new DocumentFragment,d=0,s=Math.abs(o);d<s;d++){var f=Z();l.appendChild(f.element)}V.append(l)}else for(var h=(0,c.jg)(V,".fi"),v=0,p=Math.abs(o);v<p;v++){h[i-1-v].remove()}}for(var m=(0,c.jg)(V,".fi"),y=0;y<a;y++){var g=m[y],b=t[y];0===$.length?r(g,b,null):r(g,b,$[y])}$=t,M=n,R=e}function H(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var B=(0,c.bv)(".vh"),G=(0,c.aI)(B,".wh"),N=(0,c.aI)(G,".xh"),q=(0,c.aI)(N,'.yh[group="calendar"]'),O=(0,c.aI)(q,".zh"),W=(0,c.aI)(O,".ii"),J=(0,c.aI)(O,".ji"),Y=(0,c.aI)(B,'.wh .xh .yh[group="actions"]'),Q=(0,c.aI)(Y,'.zh ._h[action="save-to-folder"]'),U=(0,c.aI)(Y,'.zh ._h[action="get-permalink"]'),X=(0,c.aI)(Y,'.zh ._h[action="show-permalink-qrcode"]'),P=(0,c.aI)(N,'.yh[group="properties"]'),V=(0,c.aI)(P,".zh");function K(){return K=(0,r.A)(function*(t,e){var n=(0,o.Js)("playing_animation"),r=yield(0,a.LH)("route",t);Q.setAttribute("animation",(0,u.xZ)(n)),Q.setAttribute("highlighted",(0,u.xZ)(r)),Q.onclick=function(){(0,d.B)("route",[t])},U.setAttribute("animation",(0,u.xZ)(n)),U.onclick=function(){!function(t){p.apply(this,arguments)}(t)},X.setAttribute("animation",(0,u.xZ)(n)),X.onclick=function(){!function(t){m.apply(this,arguments)}(t)},function(){for(var t=(0,o.Js)("playing_animation"),e=[],n=0;n<5;n++)e.push({key:n,icon:"none",value:""});F(e,!0,t)}(),function(){for(var t=(0,o.Js)("playing_animation"),e={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var i=`d_${a}`;n[i]=[],r[i]={day:a,code:"d_{i}",name:""};for(var c=0;c<e[i];c++){var u=new Date;u.setHours(0),u.setMinutes(30*c),u.setSeconds(0),u.setMilliseconds(0),n[i].push({date:u,dateString:"",duration:15})}}L({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:e},!0,t)}();var c=(0,u.zx)(),l=yield(0,i.p)(t,e,c);F(l.properties,!1,n),L(l.calendar,!1,n)}),K.apply(this,arguments)}function tt(t,e){(0,l.WR)("RouteDetails"),B.setAttribute("displayed","true"),function(t,e){K.apply(this,arguments)}(t,e)}function et(){(0,l.kr)("RouteDetails"),B.setAttribute("displayed","false");var t,e=H((0,c.jg)(J,".bi"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,r=H((0,c.jg)(W,".ai"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(t){r.e(t)}finally{r.f()}}},7908(t,e,n){n.d(e,{NW:()=>y,XG:()=>p,hy:()=>m});var r=n(467),a=n(3937),i=n(3422),o=n(8179),c=n(8024),u=n(904),l=n(9119),d=(0,o.bv)(".ki"),s=(0,o.aI)(d,".li"),f=(0,o.aI)(s,".mi"),h=(0,o.aI)(f,'.ni[group="provider"] .oi input'),v=(0,o.aI)(f,'.ni[group="registration-key"] .oi input');function p(){(0,u.WR)("RegisterNotification"),d.setAttribute("displayed","true"),h.value=(0,i.D7)(),v.value="",(0,u.Z_)()}function m(){d.setAttribute("displayed","false"),(0,u.l$)()}function y(){return g.apply(this,arguments)}function g(){return(g=(0,r.A)(function*(){(0,l.a)("manufacturing","處理中");var t=h.value,e=v.value;if((0,c.Gz)(t))return(0,i.Je)(t),(yield(0,a.e)(e))?void(0,l.a)("check_circle","註冊成功"):void(0,l.a)("error","註冊失敗");(0,l.a)("error","無效的提供者")})).apply(this,arguments)}}}]);
//# sourceMappingURL=e9b767848d9b36b2ab37.js.map