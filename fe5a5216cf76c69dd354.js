"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[638],{904(e,a,t){t.d(a,{a:()=>y,b:()=>C,c:()=>w,d:()=>k,e:()=>L,f:()=>g,g:()=>x,h:()=>S,i:()=>T});var n=t(8179),i=t(8024),c=t(4884),r=t(6052),o=t(9333),s=t(8379),l=t(5693),u=t(7891),d=t(7908),f=t(5009),b=t(6104),h=(0,n.c)(".g"),p=(0,n.c)(".l"),m=(new Date).getTime(),v=["Home"];function k(e){var a=v.length;v[a-1]!==e&&v.push(e)}function g(e){if(v.indexOf(e)>-1){var a=v.length;v[a-1]===e&&v.pop()}}function y(){var e=v.length;if(e>1)switch(v[e-2]){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,r.a)();break;case"FolderEditor":(0,o.a)();break;case"FolderManager":(0,s.a)();break;case"Search":(0,f.a)();break;case"Settings":(0,b.a)();break;case"PersonalScheduleManager":(0,u.a)();break;case"PersonalScheduleEditor":(0,l.a)();break;case"Bus":(0,c.b)();break;case"RegisterNotification":(0,d.a)()}}function w(){var e=v.length;if(e>1){var a=v[e-2];switch(v.pop(),a){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,r.c)();break;case"FolderEditor":(0,o.b)();break;case"FolderManager":(0,s.b)();break;case"Search":(0,f.c)();break;case"Settings":(0,b.d)();break;case"PersonalScheduleManager":(0,u.b)();break;case"PersonalScheduleEditor":(0,l.b)();break;case"Bus":(0,c.c)();break;case"RegisterNotification":(0,d.b)()}}}function S(){var e=0;(0,i.f)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.c)(".g svg.h").style.setProperty("--i",`${e}px`)}function C(e){function a(){h.classList.add("j"),h.addEventListener("animationend",function(){h.setAttribute("displayed","false"),h.classList.remove("j"),"function"==typeof e&&e()},{once:!0})}var t=(new Date).getTime();t-m<100?setTimeout(a,Math.max(1,t-m)):a()}function T(){p.setAttribute("displayed","true")}function L(e){var a=0,t=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":a=n,t=i;break;case"head":a=n,t=55;break;case"head-one-button":a=n-55,t=55;break;case"head-two-button":a=n-110,t=55;break;case"route-details-canvas":a=n-20-20,t=1680;break;case"route-bus-arrival-time-chart":a=n-45-15-20,t=75;break;case"location-bus-arrival-time-chart":a=n-30-20,t=75;break;default:a=0,t=0}return{width:a,height:t}}function x(){window.scrollTo({top:0,behavior:"instant"})}},4294(e,a,t){t.d(a,{a:()=>x,b:()=>L,c:()=>T});var n,i=t(467),c=t(9218),r=t(6788),o=t(972),s=t(3459),l=t(8179),u=t(8024),d=t(4781),f=t(4537),b=t(904),h=(0,l.c)(".xb"),p=(0,l.e)(h,".ac"),m=(0,l.e)(p,".bc"),v=[],k=[],g=!1,y=!1;function w(){var e=(0,l.a)();return e.classList.add("cc"),e.appendChild((0,f.a)()),e}function S(e,a,t,i){function c(e,c,r){function o(e,a){(0,f.c)(e,a)}function s(e,a,t){e.onclick=function(){!function(e,a){a.value=e,x()}(a,t)}}function l(e,a){e.setAttribute("skeleton-screen",(0,u.a)(a))}function d(e,a){e.setAttribute("animation",(0,u.a)(a))}null==r?(o(e,c),s(e,c,a),l(e,t),d(e,i)):(r!==c?(o(e,c),s(e,c,a)):n!==a&&s(e,c,a),y!==t&&l(e,t),g!==i&&d(e,i))}var r=e.length,o=Array.from((0,l.d)(m,".cc")),s=o.length;if(r!==s){var d=s-r;if(d<0){for(var b=new DocumentFragment,h=0;h>d;h--){var p=w();b.appendChild(p),o.push(p)}m.append(b)}else if(d>0)for(var v=s-1,S=s-d-1;v>S;v--)o[v].remove(),o.splice(v,1)}for(var C=0;C<r;C++){var T=k[C],L=e[C],M=o[C];c(M,L,T||null)}k=e,n=a,y=t,g=i}function C(){return(C=(0,i.a)(function*(e){!function(e){for(var a=(0,s.b)("playing_animation"),t=(0,b.e)("window"),n=Math.floor(t.width/50)*(Math.floor(t.height/50)+3),i=[],c=0;c<n;c++)i.push("");S(i,e,!0,a)}(e);var a=(0,s.b)("playing_animation"),t=(0,u.c)(),n=yield(0,c.a)(t);for(var i in v=[],n.symbols)v.push(i);S(v,e,!1,a),(0,o.a)(n),(0,r.a)(t)})).apply(this,arguments)}function T(e){if(!(0,d.a)(e)){for(var a=(0,o.b)(e),t=a.length-1;t>=0;t--){var i=a[t].item,c=v.indexOf(i);if(console.log(0,i,c),v[t]&&!(c<0)){var r=[v[c],v[t]];v[t]=r[0],v[c]=r[1]}}S(v,n,!1,g),console.log(1,k),console.log(2,v)}}function L(e){(0,b.d)("IconSelector"),h.setAttribute("displayed","true"),function(e){C.apply(this,arguments)}(e)}function x(){(0,b.f)("IconSelector"),h.setAttribute("displayed","false")}},4537(e,a,t){t.d(a,{a:()=>c,b:()=>i,c:()=>r});var n=t(8179);function i(e){var a=document.createElement("span");return a.classList.add("r"),a.innerText=e,a}function c(){var e=document.createElement("span");return e.classList.add("r"),e}function r(e,a){(0,n.e)(e,"span.r").innerText=a}},4953(){},5259(){},5297(){},6091(e,a,t){t.d(a,{a:()=>N,b:()=>_});var n=t(467),i=t(5767),c=t(5314),r=t(3459),o=t(8179),s=t(8024),l=t(4884),u=t(4537),d=t(904),f=t(3030),b=t(4690),h=(0,o.c)(".s"),p=(0,o.e)(h,".ia"),m=(0,o.e)(p,".ja"),v=(0,o.e)(m,".oa"),k={},g=!1,y=!1,w=15e3,S=5e3,C=!0,T=!1,L=0,x=0,M="",D=!1;function A(){var e=(0,o.a)();e.classList.add("wa");var a=(0,o.a)();a.classList.add("ya");var t=(0,o.a)();t.classList.add("za"),t.appendChild((0,u.a)());var n=(0,o.a)();n.classList.add("_a");var i=(0,o.a)();i.classList.add("ab"),a.appendChild(t),a.appendChild(n),a.appendChild(i);var c=(0,o.a)();return c.classList.add("bb"),e.appendChild(a),e.appendChild(c),e}function F(e,a,t){function n(e,n,i){function c(e,a){var t=(0,o.e)(e,".ya"),n=(0,o.e)(t,".za"),i="";switch(a.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,u.c)(n,i)}function r(e,a){var t=(0,o.e)(e,".ya"),n=(0,o.e)(t,"._a"),i="";switch(a.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function d(e,a){var t=(0,o.e)(e,".ya");(0,o.e)(t,".ab").innerText=a.time.relative}function h(e,a){(0,o.e)(e,".bb").innerText=a.name}function p(e,a){switch(a.type){case"route":e.onclick=function(){(0,b.c)(a.id,a.pid)};break;case"location":e.onclick=function(){(0,f.c)(a.hash)};break;case"bus":e.onclick=function(){(0,l.c)(a.id)};break;case"empty":e.onclick=null}}function m(e,a){e.setAttribute("animation",(0,s.a)(a))}function v(e,a){e.setAttribute("skeleton-screen",(0,s.a)(a))}if(null==i)c(e,n),r(e,n),d(e,n),h(e,n),p(e,n),m(e,t),v(e,a);else if(n.type!==i.type)c(e,n),r(e,n),d(e,n),h(e,n),p(e,n),m(e,t),v(e,a);else{switch(n.type){case"location":(0,s.b)(i.name,n.name)||h(e,n),i.time!==n.time&&d(e,n),(0,s.b)(i.hash,n.hash)||p(e,n);break;case"route":i.name!==n.name&&h(e,n),i.time!==n.time&&d(e,n),i.id===n.id&&(0,s.b)(i.pid,n.pid)||p(e,n);break;case"bus":i.name!==n.name&&h(e,n),i.time!==n.time&&d(e,n),i.id!==n.id&&p(e,n);break;case"empty":i.time!==n.time&&d(e,n)}g!==t&&m(e,t),y!==a&&v(e,a)}}var i=e.itemQuantity,c=Array.from((0,o.d)(v,".wa")),r=c.length;if(i!==r){var d=r-i;if(d<0){for(var h=new DocumentFragment,p=0;p>d;p--){var m=A();h.appendChild(m),c.push(m)}v.append(h)}else if(d>0)for(var w=r-1,S=r-d-1;w>S;w--)c[w].remove(),c.splice(w,1)}for(var C=0;C<i;C++){var T=c[C],L=e.items[C];if((0,s.e)(k,"items"))if(k.items[C])n(T,L,k.items[C]);else n(T,L,null);else n(T,L,null)}k=e,g=t,y=a}function _(){for(var e=(0,r.b)("playing_animation"),a=(0,d.e)("window"),t=Math.floor(a.height/70/3)+2,n=[],i=0;i<t;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});F({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function R(){return E.apply(this,arguments)}function E(){return(E=(0,n.a)(function*(){var e=(0,r.b)("playing_animation"),a=(0,r.b)("refresh_interval");C=a.dynamic,w=a.baseInterval,M=(0,s.c)();var t=yield(0,c.c)(M);F(t,!1,e);var n=0;C&&(n=yield(0,i.c)()),L=(new Date).getTime(),x=C?Math.max(L+S,t.dataUpdateTime+w/n):L+w,Math.max(S,x-L)})).apply(this,arguments)}function P(){return H.apply(this,arguments)}function H(){return(H=(0,n.a)(function*(){R().then(function(){T?setTimeout(function(){P()},Math.max(S,x-(new Date).getTime())):D=!1}).catch(function(e){T?setTimeout(function(){P()},1e4):D=!1})})).apply(this,arguments)}function N(){_(),T||(T=!0,D?R():(D=!0,P()))}},6561(){},6764(){},7114(){},7336(){},7499(){},9657(){}}]);
//# sourceMappingURL=fe5a5216cf76c69dd354.js.map