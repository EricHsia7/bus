!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,(()=>(()=>{"use strict";var t,e,r={5106:(t,e,r)=>{function n(t,e,r){var n=r.x-e.x,o=r.y-e.y,a=n*n+o*o,i=((t.x-e.x)*n+(t.y-e.y)*o)/a;if(i<0)n=t.x-e.x,o=t.y-e.y;else if(i>1)n=t.x-r.x,o=t.y-r.y;else{var s={x:e.x+i*n,y:e.y+i*o};n=t.x-s.x,o=t.y-s.y}return Math.sqrt(n*n+o*o)}function o(t,e){if(t.length<3)return t;for(var r=0,a=0,i=1;i<t.length-1;i++){var s=n(t[i],t[0],t[t.length-1]);s>r&&(a=i,r=s)}if(r>e){var l=t.slice(0,a+1),u=t.slice(a),f=o(l,e),c=o(u,e);return f.slice(0,f.length-1).concat(c)}return[t[0],t[t.length-1]]}function a(t,e,r){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(e-1),n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}r(3790);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return l(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}self.onmessage=function(t){var e=function(t){var e,r=i(t,4),n=r[0],l=r[1],f=r[2],c=r[3],v=n.length,y=[],d=0,h=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){l=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}(n);try{for(h.s();!(e=h.n()).done;){var p=e.value;y.push(p.stats.max),y.push(p.stats.min),d+=p.stats.sum}}catch(t){h.e(t)}finally{h.f()}for(var x=function(t){var e=t.length;if(0===e)return[0,0];for(var r=1/0,n=-1/0,o=e-1;o>=0;o--){var a=t[o];a>n&&(n=a),a<r&&(r=a)}return[r,n]}(y),b=0===x[1]?1:x[1],m=0===x[0]?1:x[0],$=n[0].date,g=n[v-1].date,w=a($[0],$[1],$[2]),k=a(g[0],g[1],g[2]),j=[],O=0;O<v;O++){var S=n[O];if(0!==S.stats.sum)for(var M=S.data,A=0;A<u;A++){var I=c+(O+A/u)/8*l,C=c+(1-M[A]/b)*f;j.push({x:I,y:C})}else{var T=c+O/8*l,D=c+(O+(u-1)/u)/8*l,F=c+f;j.push({x:T,y:F}),j.push({x:D,y:F})}}var L=`<line x1="${c}" y1="${f+c}" x2="${c+l}" y2="${f+c}" stroke="var(--a)" stroke-width="1" />`,z=`<line x1="${c}" y1="${c}" x2="${c}" y2="${f+c}" stroke="var(--a)" stroke-width="1" />`,E=`<text x="${c+l/2}" y="${c+f+c}" text-anchor="middle" font-size="12" fill="var(--a)">時間</text>`,G=`<text x="${c/2}" y="${c+f/2}" text-anchor="middle" font-size="12" fill="var(--a)" transform="rotate(-90, ${.7*c}, ${c+f/2})">傳輸量</text>`,P=function(t,e){if(t.length<1)return"";for(var r=`M${t[0].x*e},${t[0].y*e}`,n=1;n<t.length-1;n++){var o=t[n],a=t[n+1]||o;r+=`Q${o.x*e},${o.y*e},${(o.x*e+a.x*e)/2},${(o.y*e+a.y*e)/2}`}var i=t[t.length-1];return r+`L${i.x*e},${i.y*e}`}(o(j,1.1),1),q={stats:{max:b,min:m,sum:d},period:{start:w,end:k},chart:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${l+2*c} ${f+2*c}"><defs><linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.3);" /><stop offset="73%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.09);" /><stop offset="100%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0);" /></linearGradient></defs><path d="M${c},${f+c}${P}L${c+l},${f+c}L${c},${f+c}" stroke="none" stroke-width="0" fill="url(#grad1)"></path><path d="${P}" fill="none" stroke="var(--b)" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" opacity="1"></path>${L}${z}${E}${G}</svg>`};return q}(t.data);self.postMessage(e)};var u=1440}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;var a=n[t]={exports:{}};return r[t](a,a.exports,o),a.exports}o.m=r,o.x=()=>{var t=o.O(void 0,[790],(()=>o(5106)));return t=o.O(t)},t=[],o.O=(e,r,n,a)=>{if(!r){var i=1/0;for(f=0;f<t.length;f++){for(var[r,n,a]=t[f],s=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every((t=>o.O[t](r[l])))?r.splice(l--,1):(s=!1,a<i&&(i=a));if(s){t.splice(f--,1);var u=n();void 0!==u&&(e=u)}}return e}a=a||0;for(var f=t.length;f>0&&t[f-1][2]>a;f--)t[f]=t[f-1];t[f]=[r,n,a]},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,r)=>(o.f[r](t,e),e)),[])),o.u=t=>({106:"9a72447041a5d05fe13d",790:"dd282c91b8b9f5ae9ebe"}[t]+".js"),o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.p="./",(()=>{o.b=self.location+"";var t={106:1};o.f.i=(e,r)=>{t[e]||importScripts(o.p+o.u(e))};var e=self.webpackChunkbus=self.webpackChunkbus||[],r=e.push.bind(e);e.push=e=>{var[n,a,i]=e;for(var s in a)o.o(a,s)&&(o.m[s]=a[s]);for(i&&i(o);n.length;)t[n.pop()]=1;r(e)}})(),e=o.x,o.x=()=>o.e(790).then(e);var a=o.x();return a=a.default})()));
//# sourceMappingURL=9a72447041a5d05fe13d.js.map