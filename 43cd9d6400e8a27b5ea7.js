"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[36],{904:(e,t,n)=>{n.d(t,{AE:()=>k,BM:()=>L,WR:()=>y,Z_:()=>A,f1:()=>x,gO:()=>C,kr:()=>w,l$:()=>I,p9:()=>E});var a=n(8024),i=n(3648),r=n(4927),o=n(6052),s=n(9333),d=n(8379),c=n(5693),u=n(7891),l=n(7908),f=n(5009),v=n(6104),h=(0,i.bv)(".ng"),p=(0,i.bv)(".og"),m=100,g=(new Date).getTime(),b=["Home"];function y(e){var t=b.length;b[t-1]!==e&&b.push(e)}function w(e){if(b.indexOf(e)>-1){var t=b.length;b[t-1]===e&&b.pop()}}function A(){var e=b.length;if(e>1)switch(b[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.z1)();break;case"FolderEditor":(0,s.I6)();break;case"FolderManager":(0,d.m)();break;case"Search":(0,f.Bb)();break;case"Settings":(0,v.os)();break;case"PersonalScheduleManager":(0,u.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.F)();break;case"RegisterNotification":(0,l.hy)()}}function I(){var e=b.length;if(e>1){var t=b[e-2];switch(b.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.pd)();break;case"FolderEditor":(0,s.uy)();break;case"FolderManager":(0,d.g)();break;case"Search":(0,f.rf)();break;case"Settings":(0,v.Ow)();break;case"PersonalScheduleManager":(0,u.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$)();break;case"RegisterNotification":(0,l.XG)()}}}function L(){var e=0;(0,a.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,i.bv)(".ng svg.pg").style.setProperty("--qg",`${e}px`)}function k(e){function t(){h.classList.add("rg"),h.addEventListener("animationend",(function(){h.setAttribute("displayed","false"),h.classList.remove("rg"),"function"==typeof e&&e()}),{once:!0})}var n=(new Date).getTime();n-g<m?setTimeout(t,Math.max(1,n-g)):t()}function x(){p.setAttribute("displayed","true")}function C(e){var t=0,n=0,a=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=a,n=i;break;case"head":t=a,n=55;break;case"head-one-button":t=a-55,n=55;break;case"head-two-button":t=a-110,n=55;break;case"route-details-canvas":t=a-20-20,n=1680;break;case"route-bus-arrival-time-chart":t=a-45-15-20,n=75;break;case"location-bus-arrival-time-chart":t=a-30-20,n=75;break;default:t=0,n=0}return{width:t,height:n}}function E(){window.scrollTo({top:0,behavior:"instant"})}},3030:(e,t,n)=>{n.d(t,{eS:()=>le,s_:()=>ee,so:()=>ue});var a=n(5767),i=n(9566),r=n(2757),o=n(4636),s=n(5314),d=n(3459),c=n(7968),u=n(8024),l=n(3648),f=n(5579),v=n(4537),h=n(904),p=n(9119),m=n(3041),g=n(752),b=n(9786);function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function A(e,t,n,a,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,i)}var I=(0,l.bv)(".sg"),L=(0,l.aI)(I,".tg"),k=(0,l.aI)(L,".ug"),x=(0,l.aI)(L,".vg"),C=(0,l.aI)(I,".wg"),E=(0,l.aI)(L,".xg"),_=(0,l.aI)(E,".yg"),T=(0,l.aI)(L,".zg"),S=(0,l.aI)(T,"._g"),M=(0,l.aI)(L,".ah .bh"),$={},j=!0,P=!1,Z=0,H=0,F=0,z={},N=0,R=!1,D=1e4,O=15e3,B=5e3,W=15e3,q=!0,Q=0,U=0,X="",J=!1,G=!1,K=!1,V="",Y=20;function ee(){C.addEventListener("touchstart",(function(){Z=Math.round(C.scrollLeft/N)}),{passive:!0}),C.addEventListener("scroll",(function(e){R=!0;var t=e.target.scrollLeft/N;H=t>Z?Z+1:Z-1;var n=z[`g_${Z}`]||{width:0,offset:0},a=z[`g_${H}`]||{width:0,offset:0},i=n.width+(a.width-n.width)*Math.abs(t-Z),r=-1*(n.offset+(a.offset-n.offset)*Math.abs(t-Z))+.5*N-.5*i;te(F,r,i-Y,t),t===H&&(Z=Math.round(C.scrollLeft/N),R=!1)}),{passive:!0})}function te(e,t,n,a){C.style.setProperty("--ch",e.toString()),S.style.setProperty("--dh",n.toString()),_.style.setProperty("--eh",`${t.toFixed(5)}px`),_.style.setProperty("--fh",a.toFixed(5))}function ne(e){var t=e;if(J){var n=t.detail.progress-1;M.style.setProperty("--ih",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,ne)}function ae(){var e=(0,u.zx)(),t=document.createElement("div");t.classList.add("jh"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var n=document.createElement("div");n.classList.add("kh");var a=document.createElement("div");a.classList.add("lh");var i=document.createElement("div");i.classList.add("mh"),i.setAttribute("code","-1"),i.setAttribute("displayed","false");var r=document.createElement("div");r.classList.add("nh"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),a.appendChild(i),a.appendChild(r);var o=document.createElement("div");o.classList.add("oh");var s=document.createElement("div");s.classList.add("ph");var d=document.createElement("div");d.classList.add("qh");var c=document.createElement("div");c.classList.add("rh");var f=document.createElement("div");f.classList.add("_a"),f.setAttribute("code","0"),f.setAttribute("displayed","false");var h=document.createElement("div");h.classList.add("ab"),h.setAttribute("code","0"),h.setAttribute("displayed","true"),c.appendChild(f),c.appendChild(h);var p=document.createElement("div");p.classList.add("sh"),p.innerHTML=(0,v.Z)("keyboard_arrow_down"),p.onclick=function(){!function(e){var t=(0,l.aI)(C,`._h .ci .jh#${e}`),n=(0,l.aI)(t,".uh"),a=t.parentElement,i=(0,l.ji)(t,"jh"),r=i.length,o=a.getBoundingClientRect(),s=t.getBoundingClientRect(),d=s.top-o.top,c="true"===t.getAttribute("stretched"),u="true"===t.getAttribute("animation");if(u){var f=c?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--aj",`${d}px`);for(var v=0;v<r;v++){var h=i[v];h.setAttribute("push-direction",f),h.setAttribute("push-state","1")}t.addEventListener("transitionend",(function(){for(var e=0;e<r;e++){var n=i[e];n.setAttribute("push-direction","0"),n.setAttribute("push-state","0")}t.setAttribute("stretching","false")}),{once:!0}),t.addEventListener("transitionstart",(function(){for(var e=0;e<r;e++){i[e].setAttribute("push-state","2")}}),{once:!0})}c?(u?n.addEventListener("transitionend",(function(){n.setAttribute("displayed","false")}),{once:!0}):n.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(n.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}(e)};var b=document.createElement("div");b.classList.add("th"),d.appendChild(c),d.appendChild(p),d.appendChild(b),n.appendChild(a),n.appendChild(o),n.appendChild(s),n.appendChild(d);var y=document.createElement("div");y.classList.add("uh"),y.setAttribute("displayed","false");var w=document.createElement("div");w.classList.add("vh");var A=document.createElement("div");A.classList.add("wh"),A.setAttribute("highlighted","true"),A.setAttribute("type","tab"),A.setAttribute("code","0");var I=document.createElement("div");I.classList.add("xh"),I.innerHTML=(0,v.Z)("directions_bus"),A.appendChild(I),A.appendChild(document.createTextNode("公車")),A.onclick=function(){fe(e,0)};var L=document.createElement("div");L.classList.add("wh"),L.setAttribute("highlighted","false"),L.setAttribute("type","tab"),L.setAttribute("code","1");var k=document.createElement("div");k.classList.add("xh"),k.innerHTML=(0,v.Z)("departure_board"),L.appendChild(k),L.appendChild(document.createTextNode("抵達時間")),L.onclick=function(){fe(e,1)};var x=document.createElement("div");x.classList.add("wh"),x.setAttribute("highlighted","false"),x.setAttribute("type","save-to-folder");var E=document.createElement("div");E.classList.add("xh"),E.innerHTML=(0,v.Z)("folder"),x.appendChild(E),x.appendChild(document.createTextNode("儲存")),x.onclick=function(){(0,m.BI)("stop-on-location",[e,null,null])};var _=document.createElement("div");_.classList.add("wh"),_.setAttribute("highlighted","false"),_.setAttribute("type","schedule-notification"),_.setAttribute("enabled","true");var T=document.createElement("div");T.classList.add("xh"),T.innerHTML=(0,v.Z)("notifications"),_.appendChild(T),_.appendChild(document.createTextNode("到站通知")),_.onclick=function(){(0,g.Ho)("stop-on-location",[e,null,null,null])},w.appendChild(A),w.appendChild(L),w.appendChild(x),w.appendChild(_);var S=document.createElement("div");S.classList.add("yh"),S.setAttribute("displayed","true");var M=document.createElement("div");return M.classList.add("zh"),M.setAttribute("displayed","false"),y.appendChild(w),y.appendChild(S),y.appendChild(M),t.appendChild(n),t.appendChild(y),{element:t,id:e}}function ie(){var e=document.createElement("div");e.classList.add("_h");var t=document.createElement("div");t.classList.add("ai");var n=document.createElement("div");n.classList.add("bi"),t.appendChild(n);var a=document.createElement("div");return a.classList.add("ci"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function re(){var e=document.createElement("div");e.classList.add("ei");var t=document.createElement("div");t.classList.add("fi");var n=document.createElement("div");return n.classList.add("gi"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function oe(e,t,n){function a(e,a,r){function s(e,t,n){var a=e.getBoundingClientRect(),i=a.top,r=a.left,o=a.bottom,s=a.right,d=window.innerWidth,c=window.innerHeight,u=(0,l.aI)(e,".rh"),f=(0,l.aI)(u,"._a"),v=(0,l.aI)(u,".ab");f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,n&&o>0&&i<c&&s>0&&r<d?(v.addEventListener("animationend",(function(){v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,v.classList.remove("kb"),f.setAttribute("displayed","false")}),{once:!0}),f.setAttribute("displayed","true"),v.classList.add("kb")):(v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text)}function d(e,t,n){var a=e.getBoundingClientRect(),i=a.top,r=a.left,o=a.bottom,s=a.right,d=window.innerWidth,c=window.innerHeight,u=(0,l.aI)(e,".lh"),f=(0,l.aI)(u,".mh"),v=(0,l.aI)(u,".nh");f.setAttribute("code",t.ranking.code.toString()),f.innerText=t.ranking.text,n&&o>0&&i<c&&s>0&&r<d?(v.addEventListener("animationend",(function(){v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,v.classList.remove("hi"),f.setAttribute("displayed","false")}),{once:!0}),f.setAttribute("displayed","true"),v.classList.add("hi")):(v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text)}function c(e,t){(0,l.aI)(e,".oh").innerText=t.route_direction}function h(e,t){(0,l.aI)(e,".ph").innerText=t.route_name}function p(e,t){(0,l.aI)(e,".yh").innerHTML=0===t.buses.length?'<div class="ii">目前沒有公車可顯示</div>':t.buses.map((function(e){return`<div class="ji" on-this-route="${e.onThisRoute}"><div class="ki"><div class="li">${(0,v.Z)("directions_bus")}</div><div class="mi">${e.carNumber}</div></div><div class="ni"><div class="oi">路線：${e.RouteName}</div><div class="pi">狀態：${e.status.text}</div><div class="qi">類型：${e.type}</div></div></div>`})).join("")}function b(e,t){(0,l.aI)(e,".zh").innerHTML=0===t.busArrivalTimes.length?'<div class="ri">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map((function(e){return`<div class="si"><div class="ti"><div class="ui">${(0,v.Z)("calendar_view_day")}</div><div class="vi">${e.personalSchedule.name}</div><div class="wi">週${(0,f.kd)(e.day).name} ${(0,f.pn)(e.personalSchedule.period.start)} - ${(0,f.pn)(e.personalSchedule.period.end)}</div></div><div class="xi">${e.chart}</div></div>`})).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function w(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function A(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}function I(e,t){var n=(0,l.aI)(e,".uh"),a=(0,l.aI)(n,".vh"),r=(0,l.aI)(a,'.wh[type="save-to-folder"]');r.onclick=function(){(0,m.BI)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,i.LH)("stop",t.stopId).then((function(e){r.setAttribute("highlighted",(0,u.xZ)(e))}))}function L(e,t){var n=(0,l.aI)(e,".uh"),a=(0,l.aI)(n,".vh"),i=(0,l.aI)(a,'.wh[type="schedule-notification"]');i.onclick=function(){(0,g.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var r=(0,o.Zc)(t.stopId);i.setAttribute("highlighted",(0,u.xZ)(r))}null===r?(s(e,a,n),d(e,a,n),c(e,a),h(e,a),p(e,a),b(e,a),y(e,t),w(e,n),A(e,t),I(e,a),L(e,a)):(a.status.time!==r.status.time&&(s(e,a,n),L(e,a)),r.ranking.number===a.ranking.number&&r.ranking.code===a.ranking.code||d(e,a,n),r.stopId!==a.stopId&&(c(e,a),h(e,a),I(e,a)),(0,u.hw)(r.buses,a.buses)||p(e,a),(0,u.hw)(r.busArrivalTimes,a.busArrivalTimes)||b(e,a),n!==j&&w(e,n),t!==P&&(y(e,t),A(e,t)))}function r(e,a,i){function r(e,t){(0,l.aI)(e,".fi").innerHTML=(0,v.Z)(t.icon)}function o(e,t){(0,l.aI)(e,".gi").innerHTML=t.value}function s(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}null===i?(r(e,a),o(e,a),s(e,n),d(e,t)):((0,u.hw)(i.icon,a.icon)||r(e,a),(0,u.hw)(i.value,a.value)||o(e,a),n!==j&&s(e,n),t!==P&&d(e,t))}var s=(0,h.gO)("window"),d=s.width,p=s.height,y=e.groupQuantity,w=e.itemQuantity,A=e.groupedItems,I=e.groups;F=y,N=d;for(var L=0,S=0;S<y;S++){var M=(0,c.q_)(I[`g_${S}`].name,500,"17px",'"Noto Sans TC", sans-serif')+Y;z[`g_${S}`]={width:M,offset:L},L+=M}var H=-1*z[`g_${Z}`].offset+.5*N-.5*z[`g_${Z}`].width;R||te(F,H,z[`g_${Z}`].width-Y,Z),k.innerHTML=`<span>${e.LocationName}</span>`,k.setAttribute("animation",(0,u.xZ)(n)),k.setAttribute("skeleton-screen",(0,u.xZ)(t)),x.onclick=function(){(0,b.ID)(e.hash)},E.setAttribute("animation",(0,u.xZ)(n)),E.setAttribute("skeleton-screen",(0,u.xZ)(t)),T.setAttribute("skeleton-screen",(0,u.xZ)(t));var D,O=(0,l.jg)(C,"._h").length;if(y!==O){var B=O-y;if(B<0)for(var W=0;W<Math.abs(B);W++){var q=ie();C.appendChild(q.element);var Q=(D=void 0,(D=document.createElement("div")).classList.add("di"),{element:D,id:""});_.appendChild(Q.element)}else for(var U=(0,l.jg)(C,"._h"),X=(0,l.jg)(_,".di"),J=0;J<Math.abs(B);J++){var G=O-1-J;U[G].remove(),X[G].remove()}}for(var K=(0,l.jg)(C,"._h"),V=0;V<y;V++){var ee=`g_${V}`,ne=K[V],oe=(0,l.jg)(ne,".ci .jh").length;if(w[ee]!==oe){var se=oe-w[ee];if(se<0)for(var de=(0,l.aI)(ne,".ci"),ce=0;ce<Math.abs(se);ce++){var ue=ae();de.appendChild(ue.element)}else for(var le=(0,l.jg)(ne,".ci .jh"),fe=0;fe<Math.abs(se);fe++){le[oe-1-fe].remove()}}var ve=(0,l.jg)((0,l.jg)(C,"._h")[V],".ai .bi .ei").length,he=I[ee].properties.length;if(he!==ve){var pe=ve-he;if(pe<0)for(var me=(0,l.aI)(ne,".ai"),ge=(0,l.aI)(me,".bi"),be=0;be<Math.abs(pe);be++){var ye=re();ge.appendChild(ye.element)}else for(var we=(0,l.aI)(ne,".ai"),Ae=(0,l.aI)(we,".bi"),Ie=(0,l.jg)(Ae,".ei"),Le=0;Le<Math.abs(pe);Le++){Ie[ve-1-Le].remove()}}}for(var ke=0;ke<y;ke++){var xe=`g_${ke}`,Ce=(0,l.jg)(_,".di")[ke];Ce.innerHTML=`<span>${I[xe].name}</span>`,Ce.style.setProperty("--yi",`${z[xe].width}px`),Ce.style.setProperty("--zi",ke.toString());for(var Ee=(0,l.jg)(C,"._h")[ke],_e=I[xe].properties.length,Te=0;Te<_e;Te++){var Se=I[xe].properties[Te],Me=(0,l.jg)(Ee,".ai .bi .ei")[Te];if($.hasOwnProperty("groups"))if($.groups.hasOwnProperty(xe))if($.groups[xe].properties[Te])r(Me,Se,$.groups[xe].properties[Te]);else r(Me,Se,null);else r(Me,Se,null);else r(Me,Se,null)}for(var $e=0;$e<w[xe];$e++){var je=(0,l.jg)(Ee,".ci .jh")[$e],Pe=A[xe][$e];if($.hasOwnProperty("groupedItems"))if($.groupedItems.hasOwnProperty(xe))if($.groupedItems[xe][$e])a(je,Pe,$.groupedItems[xe][$e]);else a(je,Pe,null);else a(je,Pe,null);else a(je,Pe,null)}}$=e,j=n,P=t}function se(){return de.apply(this,arguments)}function de(){var e;return e=function*(){var e=(0,d.Js)("playing_animation"),t=(0,d.Js)("refresh_interval"),n=(0,h.gO)("location-bus-arrival-time-chart");q=t.dynamic,O=t.baseInterval,J=!0,X=(0,u.zx)(),M.setAttribute("refreshing","true"),M.classList.remove("hh"),document.addEventListener(X,ne);var i=yield(0,r.R)(V,n.width,n.height,X);oe(i,!1,e);var o=0;q&&(o=yield(0,a.wz)()),Q=(new Date).getTime(),U=q?Math.max(Q+B,i.dataUpdateTime+O/o):Q+O,W=Math.max(B,U-Q),J=!1,M.setAttribute("refreshing","false"),M.style.setProperty("--gh",`${W}ms`),M.classList.add("hh")},de=function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){A(r,a,i,o,s,"next",e)}function s(e){A(r,a,i,o,s,"throw",e)}o(void 0)}))},de.apply(this,arguments)}function ce(){se().then((function(){G?setTimeout((function(){ce()}),Math.max(B,U-(new Date).getTime())):K=!1})).catch((function(e){G?((0,p.a)(`地點網路連線中斷，將在${D/1e3}秒後重試。`,"error"),setTimeout((function(){ce()}),D)):K=!1}))}function ue(e){(0,h.WR)("Location"),(0,s.XK)("location",e),V=e,Z=0,I.setAttribute("displayed","true"),C.scrollLeft=0,function(){for(var e=(0,d.Js)("playing_animation"),t=(0,h.gO)("window"),n=(t.width,t.height),a={g_0:Math.floor(n/50)+5,g_1:Math.floor(n/50)+5},i={},r=0;r<2;r++){var o=`g_${r}`;i[o]=[];for(var s=0;s<a[o];s++)i[o].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}oe({groupedItems:i,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:a,LocationName:"載入中",dataUpdateTime:0},!0,e)}(),G||(G=!0,K?se():(K=!0,ce())),(0,h.Z_)()}function le(){I.setAttribute("displayed","false"),G=!1,(0,h.l$)()}function fe(e,t){var n,a=(0,l.aI)(C,`._h .ci .jh#${e}`),i=(0,l.aI)(a,".uh"),r=(0,l.aI)(i,".vh"),o=y((0,l.jg)(r,'.wh[highlighted="true"][type="tab"]'));try{for(o.s();!(n=o.n()).done;){n.value.setAttribute("highlighted","false")}}catch(e){o.e(e)}finally{o.f()}switch((0,l.aI)(r,`.wh[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,l.aI)(a,".yh").setAttribute("displayed","true"),(0,l.aI)(a,".zh").setAttribute("displayed","false");break;case 1:(0,l.aI)(a,".yh").setAttribute("displayed","false"),(0,l.aI)(a,".zh").setAttribute("displayed","true")}}},6052:(e,t,n)=>{n.d(t,{c6:()=>f,pd:()=>v,z1:()=>h});var a=n(9566),i=n(3648),r=n(904),o=n(9119),s=(0,i.bv)(".rf"),d=(0,i.aI)(s,".wf"),c=(0,i.aI)(d,".xf"),u=(0,i.aI)(c,'.yf[group="folder-name"] .bg input'),l=(0,i.aI)(c,'.yf[group="folder-icon"] .bg .cg input');function f(){var e=u.value,t=l.value;(0,a.vV)(e,t).then((function(e){e?(h(),(0,o.a)("已建立資料夾","folder")):(0,o.a)("無法建立資料夾","error")}))}function v(){(0,r.WR)("FolderCreator"),s.setAttribute("displayed","true"),(0,r.Z_)()}function h(){s.setAttribute("displayed","false"),(0,r.l$)()}},6189:(e,t,n)=>{n.d(t,{Pk:()=>I,jW:()=>k,r7:()=>L});var a=n(9930),i=n(6788),r=n(972),o=n(8024),s=n(3648),d=n(4781),c=n(6082),u=n(4537),l=n(904),f=n(9119);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function p(e,t,n,a,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,i)}var m="",g=(0,s.bv)(".ve"),b=(0,s.bv)(".rf"),y=(0,s.bv)(".i");function w(e){var t=document.createElement("div");return t.classList.add("ig"),t.onclick=function(){!function(e){var t;switch(m){case"editor":t=(0,s.aI)(g,'.ze ._e .af[group="folder-icon"] .ef .gf input');break;case"creator":t=(0,s.aI)(b,'.wf .xf .yf[group="folder-icon"] .bg .cg input')}t.value=e,k()}(e)},t.innerHTML=(0,u.Z)(e),{element:t,id:""}}function A(){var e;return e=function*(){var e=(0,s.aI)(y,".fg .gg");e.innerHTML="";var t=(0,o.zx)(),n=yield(0,a.z)(t);(0,i.LQ)(t);var r,d=new DocumentFragment,c=v(n);try{for(c.s();!(r=c.n()).done;){var u=w(r.value);d.appendChild(u.element)}}catch(e){c.e(e)}finally{c.f()}e.append(d)},A=function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){p(r,a,i,o,s,"next",e)}function s(e){p(r,a,i,o,s,"throw",e)}o(void 0)}))},A.apply(this,arguments)}function I(e){var t=(0,s.aI)(y,".fg .hg"),n=(0,s.aI)(y,".fg .gg");if(!(0,d.iO)(e)){var a,i=(0,r.U)(e,100),o=new DocumentFragment,c=v(i);try{for(c.s();!(a=c.n()).done;){var u=w(a.value.item);o.appendChild(u.element)}}catch(e){c.e(e)}finally{c.f()}t.innerHTML="",t.append(o),t.setAttribute("displayed",i.length>0?"true":"false"),n.setAttribute("displayed",i.length>0?"false":"true")}}function L(e){var t;switch((0,l.WR)("FolderIconSelector"),e){case"editor":m="editor",t=(0,s.aI)(g,'.ze ._e .af[group="folder-icon"] .ef .gf .hf');break;case"creator":m="creator",t=(0,s.aI)(b,'.wf .xf .yf[group="folder-icon"] .bg .cg .dg')}"false"===t.getAttribute("disabled")&&(c.m?(y.setAttribute("displayed","true"),function(){A.apply(this,arguments)}(m),(0,r.L)()):(0,f.a)("資料還在下載中","download_for_offline"))}function k(){(0,l.kr)("FolderIconSelector"),y.setAttribute("displayed","false")}},8379:(e,t,n)=>{n.d(t,{g:()=>m,m:()=>g});var a=n(9566),i=n(3648),r=n(9333),o=n(4537),s=n(904);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t,n,a,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,i)}var l=(0,i.bv)(".je"),f=(0,i.aI)(l,".oe"),v=(0,i.aI)(f,".pe");function h(e){var t=document.createElement("div");t.classList.add("qe"),t.onclick=function(){(0,r.uy)(e.id)};var n=document.createElement("div");n.classList.add("re"),n.innerHTML=(0,o.Z)(e.icon);var a=document.createElement("div");a.classList.add("se"),a.appendChild(document.createTextNode(e.name));var i=document.createElement("div");i.classList.add("te"),i.appendChild(document.createTextNode(String(e.contentLength)));var s=document.createElement("div");return s.classList.add("ue"),s.innerHTML=(0,o.Z)("arrow_forward_ios"),t.appendChild(n),t.appendChild(a),t.appendChild(i),t.appendChild(s),{element:t,id:""}}function p(){var e;return e=function*(){var e=yield(0,a.Xi)();v.innerHTML="";var t,n=new DocumentFragment,i=d(e);try{for(i.s();!(t=i.n()).done;){var r=h(t.value);n.appendChild(r.element)}}catch(e){i.e(e)}finally{i.f()}v.append(n)},p=function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){u(r,a,i,o,s,"next",e)}function s(e){u(r,a,i,o,s,"throw",e)}o(void 0)}))},p.apply(this,arguments)}function m(){(0,s.WR)("FolderManager"),l.setAttribute("displayed","true"),function(){p.apply(this,arguments)}()}function g(){(0,s.kr)("FolderManager"),l.setAttribute("displayed","false")}},9333:(e,t,n)=>{n.d(t,{Bo:()=>E,I6:()=>x,uy:()=>k});var a=n(9566),i=n(8024),r=n(3648),o=n(6189),s=n(4537),d=n(904),c=n(9119);function u(e,t,n,a,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,i)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var v=(0,r.bv)(".ve"),h=(0,r.aI)(v,".we"),p=(0,r.aI)(h,".xe"),m=(0,r.aI)(v,".ze"),g=(0,r.aI)(m,"._e"),b=(0,r.aI)(g,'.af[group="folder-name"] .ef input'),y=(0,r.aI)(g,'.af[group="folder-icon"] .ef .gf input'),w=(0,r.aI)(g,'.af[group="folder-icon"] .ef .gf .hf'),A=(0,r.aI)(g,'.af[group="folder-content"] .ef');function I(e,t){var n=(0,i.zx)(),o=document.createElement("div");o.id=n,o.classList.add("if"),o.setAttribute("type",t.type);var d="",u="",l="";switch(t.type){case"stop":l="location_on",d=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`,u=t.name;break;case"route":l="route",d=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`,u=t.name;break;case"bus":d="",u=t.name;break;case"empty":l="lightbulb",d="提示",u="沒有內容";break;default:l="",d="null",u="null"}var f=document.createElement("div");f.classList.add("jf"),f.innerHTML=(0,s.Z)(l);var h=document.createElement("div");h.classList.add("kf"),h.appendChild(document.createTextNode(d));var p=document.createElement("div");p.classList.add("lf"),p.appendChild(document.createTextNode(u));var m=document.createElement("div");m.classList.add("mf");var g=document.createElement("div");g.classList.add("nf"),g.innerHTML=(0,s.Z)("keyboard_arrow_down"),g.onclick=function(){C(n,e.id,t.type,t.id,"up")};var b=document.createElement("div");b.classList.add("of"),b.innerHTML=(0,s.Z)("keyboard_arrow_down"),b.onclick=function(){C(n,e.id,t.type,t.id,"down")};var y=document.createElement("div");y.classList.add("pf"),y.innerHTML=(0,s.Z)("delete"),y.onclick=function(){!function(e,t,n,i){var o=(0,r.aI)(v,`.ze ._e .af[group="folder-content"] .ef .if#${e}`);(0,a.NC)(t,n,i).then((function(e){if(e)switch(o.remove(),n){case"stop":(0,c.a)("已移除站牌","delete");break;case"route":(0,c.a)("已移除路線","delete")}else(0,c.a)("無法移除","error")}))}(n,e.id,t.type,t.id)};var w=document.createElement("div");w.classList.add("qf");var A=document.createElement("div");return A.classList.add("qf"),m.appendChild(g),m.appendChild(b),m.appendChild(y),m.appendChild(w),m.appendChild(A),o.appendChild(f),o.appendChild(h),o.appendChild(p),o.appendChild(m),{element:o,id:n}}function L(){var e;return e=function*(e){!function(e,t){b.value=e.name,y.value=e.icon,p.onclick=function(){E(e.id)},A.innerHTML="";var n,a=new DocumentFragment,i=l(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=I(e,r);a.appendChild(o.element)}}catch(e){i.e(e)}finally{i.f()}A.append(a)}(yield(0,a.L2)(e),yield(0,a.eD)(e))},L=function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){u(r,a,i,o,s,"next",e)}function s(e){u(r,a,i,o,s,"throw",e)}o(void 0)}))},L.apply(this,arguments)}function k(e){(0,d.WR)("FolderEditor"),v.setAttribute("displayed","true"),function(e){L.apply(this,arguments)}(e),(0,d.Z_)()}function x(){v.setAttribute("displayed","false"),(0,d.l$)()}function C(e,t,n,i,o){var s=(0,r.aI)(v,`.ze ._e .af[group="folder-content"] .ef .if#${e}`);(0,a.bq)(t,n,i,o).then((function(e){if(e)switch(o){case"up":var t=s.previousElementSibling;t&&s.parentNode.insertBefore(s,t),(0,c.a)("已往上移","arrow_circle_up");break;case"down":var n=s.nextElementSibling;n&&s.parentNode.insertBefore(n,s),(0,c.a)("已往下移","arrow_circle_down")}else(0,c.a)("無法移動","error")}))}function E(e){var t=b.value,n=y.value;(0,a.g$)(e,t,n),x()}w.onclick=function(){(0,o.r7)("editor")}},9786:(e,t,n)=>{n.d(t,{co:()=>E,ID:()=>C});var a=n(9566),i=n(3459),r=n(8024),o=n(3648),s=n(904),d=n(3041),c=n(8011),u=n(6788),l=n(9469),f=n(9119),v=n(8279);function h(e,t,n,a,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){h(r,a,i,o,s,"next",e)}function s(e){h(r,a,i,o,s,"throw",e)}o(void 0)}))}}function m(){return(m=p((function*(e){var t=(0,r.zx)(),n=yield(0,c.g)(t,1);(0,u.LQ)(t),(0,u.gC)(t);var a=`ml_${e}`;if(n.hasOwnProperty(a)){var i=n[a],o=(0,l.i)(1,{hash:e});navigator.share&&navigator.share({title:i.n,url:o}).then((function(){(0,f.a)("已分享地點連結","link")})).catch((function(e){(0,f.a)("已取消分享連結","cancel")}))}}))).apply(this,arguments)}function g(){return(g=p((function*(e){var t=(0,r.zx)(),n=yield(0,c.g)(t,1);(0,u.LQ)(t),(0,u.gC)(t);var a=`ml_${e}`;if(n.hasOwnProperty(a)){var i=(0,l.i)(1,{hash:e});(0,v.X8)(i)}}))).apply(this,arguments)}function b(e,t,n,a,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,i)}var y=(0,o.bv)(".bj"),w=(0,o.aI)(y,".cj"),A=((0,o.aI)(w,".dj"),(0,o.aI)(y,'.cj .dj .ej[group="actions"]')),I=(0,o.aI)(A,'.fj .gj[action="save-to-folder"]'),L=(0,o.aI)(A,'.fj .gj[action="get-permalink"]'),k=(0,o.aI)(A,'.fj .gj[action="show-permalink-qrcode"]');function x(){var e;return e=function*(e){var t=(0,i.Js)("playing_animation"),n=yield(0,a.LH)("location",e);I.setAttribute("animation",(0,r.xZ)(t)),I.setAttribute("highlighted",(0,r.xZ)(n)),I.onclick=function(){(0,d.BI)("location",[e])},L.setAttribute("animation",(0,r.xZ)(t)),L.onclick=function(){!function(e){m.apply(this,arguments)}(e)},k.setAttribute("animation",(0,r.xZ)(t)),k.onclick=function(){!function(e){g.apply(this,arguments)}(e)}},x=function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){b(r,a,i,o,s,"next",e)}function s(e){b(r,a,i,o,s,"throw",e)}o(void 0)}))},x.apply(this,arguments)}function C(e){(0,s.WR)("LocationDetails"),y.setAttribute("displayed","true"),function(e){x.apply(this,arguments)}(e)}function E(){(0,s.kr)("LocationDetails"),y.setAttribute("displayed","false")}}}]);
//# sourceMappingURL=43cd9d6400e8a27b5ea7.js.map