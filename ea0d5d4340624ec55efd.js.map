{"version":3,"file":"ea0d5d4340624ec55efd.js","mappings":"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","sources":["webpack://bus/./src/interface/notification-schedule-manager/index.ts","webpack://bus/./src/interface/personal-schedule-editor/index.ts","webpack://bus/./src/interface/personal-schedule-manager/index.ts","webpack://bus/./src/interface/personal-schedule-creator/index.ts","webpack://bus/./src/interface/prompt/index.ts"],"sourcesContent":["import { getUpdateRate } from '../../data/analytics/update-rate/index';\nimport { getDataReceivingProgress } from '../../data/apis/loader';\nimport { cancelNotification } from '../../data/notification/apis/cancelNotification/index';\nimport { IntegratedNotificationScheduleItem, IntegratedNotificationSchedules, integrateNotifcationSchedules, NotificationSchedule } from '../../data/notification/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../data/settings/index';\nimport { booleanToString, compareThings, generateIdentifier } from '../../tools/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/query-selector';\nimport { getIconHTML } from '../icons/index';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory, querySize } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst NotificationScheduleManagerField = documentQuerySelector('.css_notification_schedule_manager_field');\nconst NotificationScheduleManagerHeadElement = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_head');\nconst NotificationScheduleManagerUpdateTimerBoxElement = elementQuerySelector(NotificationScheduleManagerHeadElement, '.css_notification_schedule_manager_update_timer_box');\nconst NotificationScheduleManagerUpdateTimerElement = elementQuerySelector(NotificationScheduleManagerUpdateTimerBoxElement, '.css_notification_schedule_manager_update_timer');\nconst NotificationScheduleManagerBody = elementQuerySelector(NotificationScheduleManagerField, '.css_notification_schedule_manager_body');\nconst NotificationScheduleList = elementQuerySelector(NotificationScheduleManagerBody, '.css_notification_schedule_manager_notification_schedule_list');\n\nlet previousIntegration = {} as IntegratedNotificationSchedules;\nlet previousAnimation: boolean = true;\nlet previousSkeletonScreen: boolean = false;\n\nlet notifcationScheduleManagerRefreshTimer_retryInterval: number = 10 * 1000;\nlet notifcationScheduleManagerRefreshTimer_baseInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_minInterval: number = 5 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet notifcationScheduleManagerRefreshTimer_dynamic: boolean = true;\nlet notifcationScheduleManagerRefreshTimer_streaming: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_lastUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_nextUpdate: number = 0;\nlet notifcationScheduleManagerRefreshTimer_refreshing: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_currentRequestID: string = '';\nlet notifcationScheduleManagerRefreshTimer_currentProgress: number = -1;\nlet notifcationScheduleManagerRefreshTimer_streamStarted: boolean = false;\nlet notifcationScheduleManagerRefreshTimer_timer: ReturnType<typeof setTimeout>;\n\nfunction updateUpdateTimer(): void {\n  const time = new Date().getTime();\n  notifcationScheduleManagerRefreshTimer_currentProgress = -1 * Math.min(1, Math.max(0, Math.abs(time - notifcationScheduleManagerRefreshTimer_lastUpdate) / notifcationScheduleManagerRefreshTimer_dynamicInterval));\n  NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-update-timer', notifcationScheduleManagerRefreshTimer_currentProgress.toString());\n  window.requestAnimationFrame(function () {\n    if (notifcationScheduleManagerRefreshTimer_streaming && !notifcationScheduleManagerRefreshTimer_refreshing) {\n      updateUpdateTimer();\n    }\n  });\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (notifcationScheduleManagerRefreshTimer_refreshing) {\n    notifcationScheduleManagerRefreshTimer_currentProgress = -1 + getDataReceivingProgress(notifcationScheduleManagerRefreshTimer_currentRequestID);\n    NotificationScheduleManagerUpdateTimerElement.style.setProperty('--b-cssvar-update-timer', notifcationScheduleManagerRefreshTimer_currentProgress.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nfunction generateElementOfItem(): GeneratedElement {\n  const identifier = generateIdentifier('i');\n  const element = document.createElement('div');\n  element.classList.add('css_notification_schedule_manager_item');\n  element.id = identifier;\n  element.innerHTML = /*html*/ `<div class=\"css_notification_schedule_manager_item_hours\"></div><div class=\"css_notification_schedule_manager_item_notification_schedule\"><div class=\"css_notification_schedule_manager_item_notification_schedule_minutes\"></div><div class=\"css_notification_schedule_manager_item_notification_schedule_context\"></div><div class=\"css_notification_schedule_manager_item_notification_schedule_main\"></div><div class=\"css_notification_schedule_manager_item_notification_schedule_cancel\" onclick=\"bus.notification.cancelNotificationOnNotificationScheduleManager('${identifier}', 'null')\">${getIconHTML('close')}</div></div>`;\n  return {\n    element: element,\n    id: identifier\n  };\n}\n\nfunction updateNotificationScheduleManagerField(integration: IntegratedNotificationSchedules, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem, previousItem: IntegratedNotificationScheduleItem | null): void {\n    function updateHours(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemHoursElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_hours');\n      thisItemHoursElement.innerText = thisItem.hours;\n    }\n\n    function updateMinutes(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMinutesElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_minutes');\n      thisItemMinutesElement.innerText = thisItem.minutes;\n    }\n\n    function updateMain(thisItemElement: HTMLElementm, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemMainElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_main');\n      thisItemMainElement.innerText = thisItem.name;\n    }\n\n    function updateContext(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemContextElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_context');\n      thisItemContextElement.innerText = `${thisItem.route.name} - 往${thisItem.route.direction}`;\n    }\n\n    function updateCancel(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      const thisItemNotificationScheduleElement = elementQuerySelector(thisItemElement, '.css_notification_schedule_manager_item_notification_schedule');\n      const thisItemContextElement = elementQuerySelector(thisItemNotificationScheduleElement, '.css_notification_schedule_manager_item_notification_schedule_cancel');\n      thisItemContextElement.setAttribute('onclick', `bus.notification.cancelNotificationOnNotificationScheduleManager('${thisItemElement.id}', '${thisItem.schedule_id}')`);\n    }\n\n    function updateFirst(thisItemElement: HTMLElement, thisItem: IntegratedNotificationScheduleItem): void {\n      thisItemElement.setAttribute('first', booleanToString(thisItem.is_first));\n    }\n\n    function updateAnimation(thisItemElement: HTMLElement, animation: boolean): void {\n      thisItemElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisItemElement: HTMLElement, skeletonScreen: boolean): void {\n      thisItemElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null) {\n      updateHours(thisItemElement, thisItem);\n      updateMinutes(thisItemElement, thisItem);\n      updateMain(thisItemElement, thisItem);\n      updateContext(thisItemElement, thisItem);\n      updateCancel(thisItemElement, thisItem);\n      updateFirst(thisItemElement, thisItem);\n      updateAnimation(thisItemElement, animation);\n      updateSkeletonScreen(thisItemElement, skeletonScreen);\n    } else {\n      if (!(thisItem.hours === previousItem.hours)) {\n        updateHours(thisItemElement, thisItem);\n      }\n      if (!(thisItem.minutes === previousItem.minutes)) {\n        updateMinutes(thisItemElement, thisItem);\n      }\n      if (!compareThings(previousItem.schedule_id, thisItem.schedule_id)) {\n        updateMain(thisItemElement, thisItem);\n        updateContext(thisItemElement, thisItem);\n        updateCancel(thisItemElement, thisItem);\n      }\n      if (!(previousItem.is_first === thisItem.is_first)) {\n        updateFirst(thisItemElement, thisItem);\n      }\n      if (!(skeletonScreen === previousSkeletonScreen)) {\n        updateSkeletonScreen(thisItemElement, skeletonScreen);\n      }\n      if (!(previousAnimation === animation)) {\n        updateAnimation(thisItemElement, animation);\n      }\n      if (!(previousSkeletonScreen === skeletonScreen)) {\n        updateSkeletonScreen(thisItemElement, skeletonScreen);\n      }\n    }\n  }\n\n  const itemQuantity = integration.itemQuantity;\n  const items = integration.items;\n\n  const currentItemSeatQuantity = elementQuerySelectorAll(NotificationScheduleList, `.css_notification_schedule_manager_item`).length;\n  if (!(itemQuantity === currentItemSeatQuantity)) {\n    const capacity = currentItemSeatQuantity - itemQuantity;\n    if (capacity < 0) {\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const newItemElement = generateElementOfItem();\n        NotificationScheduleList.appendChild(newItemElement.element);\n      }\n    } else {\n      const NotificationScheduleItemElements = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item');\n      for (let o = 0; o < Math.abs(capacity); o++) {\n        const itemIndex = currentItemSeatQuantity - 1 - o;\n        NotificationScheduleItemElements[itemIndex].remove();\n      }\n    }\n  }\n\n  const NotificationScheduleItemElements = elementQuerySelectorAll(NotificationScheduleList, '.css_notification_schedule_manager_item');\n  for (let j = 0; j < itemQuantity; j++) {\n    const thisItemElement = NotificationScheduleItemElements[j];\n    const thisItem = items[j];\n    if (previousIntegration.hasOwnProperty('items')) {\n      if (previousIntegration.items[j]) {\n        const previousItem = previousIntegration.items[j];\n        updateItem(thisItemElement, thisItem, previousItem);\n      } else {\n        updateItem(thisItemElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisItemElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nfunction setUpNotificationScheduleManagerFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const defaultItemQuantity: IntegratedNotificationSchedules['itemQuantity'] = Math.floor(FieldHeight / 50) + 5;\n  let items: IntegratedNotificationSchedules['items'] = [];\n  for (let i = 0; i < defaultItemQuantity; i++) {\n    items.push({\n      name: '',\n      stop_id: 0,\n      estimate_time: 0,\n      schedule_id: 'null',\n      scheduled_time: 0,\n      route: {\n        name: '',\n        direction: '',\n        id: 0,\n        pathAttributeId: []\n      },\n      is_first: true,\n      date: '',\n      hours: '',\n      minutes: ''\n    });\n  }\n  updateNotificationScheduleManagerField(\n    {\n      items: items,\n      itemQuantity: defaultItemQuantity,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function refreshNotificationScheduleManager() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  notifcationScheduleManagerRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  notifcationScheduleManagerRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  notifcationScheduleManagerRefreshTimer_refreshing = true;\n  notifcationScheduleManagerRefreshTimer_currentRequestID = generateIdentifier('r');\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'true');\n  document.addEventListener(notifcationScheduleManagerRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n  updateNotificationScheduleManagerField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  notifcationScheduleManagerRefreshTimer_lastUpdate = new Date().getTime();\n  if (notifcationScheduleManagerRefreshTimer_dynamic) {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = Math.max(notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_minInterval, integration.dataUpdateTime + notifcationScheduleManagerRefreshTimer_baseInterval / updateRate);\n  } else {\n    notifcationScheduleManagerRefreshTimer_nextUpdate = notifcationScheduleManagerRefreshTimer_lastUpdate + notifcationScheduleManagerRefreshTimer_baseInterval;\n  }\n  notifcationScheduleManagerRefreshTimer_dynamicInterval = Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - notifcationScheduleManagerRefreshTimer_lastUpdate);\n  notifcationScheduleManagerRefreshTimer_refreshing = false;\n  NotificationScheduleManagerUpdateTimerElement.setAttribute('refreshing', 'false');\n  updateUpdateTimer();\n}\n\nasync function streamNotificationScheduleManager() {\n  refreshNotificationScheduleManager()\n    .then(function () {\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        notifcationScheduleManagerRefreshTimer_timer = setTimeout(function () {\n          streamNotificationScheduleManager();\n        }, Math.max(notifcationScheduleManagerRefreshTimer_minInterval, notifcationScheduleManagerRefreshTimer_nextUpdate - new Date().getTime()));\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (notifcationScheduleManagerRefreshTimer_streaming) {\n        notifcationScheduleManagerRefreshTimer_timer = setTimeout(function () {\n          streamNotificationScheduleManager();\n        }, notifcationScheduleManagerRefreshTimer_retryInterval);\n      } else {\n        notifcationScheduleManagerRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function openNotificationScheduleManager(): void {\n  pushPageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'true');\n  setUpNotificationScheduleManagerFieldSkeletonScreen();\n  if (!notifcationScheduleManagerRefreshTimer_streaming) {\n    notifcationScheduleManagerRefreshTimer_streaming = true;\n    if (!notifcationScheduleManagerRefreshTimer_streamStarted) {\n      notifcationScheduleManagerRefreshTimer_streamStarted = true;\n      streamNotificationScheduleManager();\n    } else {\n      refreshNotificationScheduleManager();\n    }\n    notifcationScheduleManagerRefreshTimer_currentProgress = -1;\n    updateUpdateTimer();\n  }\n  closePreviousPage();\n}\n\nexport function closeNotificationScheduleManager(): void {\n  // revokePageHistory('NotificationScheduleManager');\n  NotificationScheduleManagerField.setAttribute('displayed', 'false');\n  notifcationScheduleManagerRefreshTimer_streaming = false;\n  notifcationScheduleManagerRefreshTimer_currentProgress = -1;\n  openPreviousPage();\n}\n\nexport async function cancelNotificationOnNotificationScheduleManager(identifier: string, schedule_id: NotificationSchedule['schedule_id']) {\n  promptMessage('處理中', 'manufacturing');\n  const cancellation = await cancelNotification(schedule_id);\n  if (cancellation) {\n    const itemElement = elementQuerySelector(NotificationScheduleList, `.css_notification_schedule_manager_item#${identifier}`);\n    itemElement.remove();\n    promptMessage('已取消通知', 'check_circle');\n    if (!notifcationScheduleManagerRefreshTimer_refreshing) {\n      const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n      const integration = await integrateNotifcationSchedules(notifcationScheduleManagerRefreshTimer_currentRequestID);\n      updateNotificationScheduleManagerField(integration, false, playing_animation);\n    }\n  } else {\n    promptMessage('取消失敗', 'error');\n  }\n}\n","import { getPersonalSchedule, updatePersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/query-selector';\nimport { timeObjectToString, WeekDayIndex } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\n\nconst PersonalScheduleEditorField = documentQuerySelector('.css_personal_schedule_editor_field');\nconst PersonalScheduleEditorBodyElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_body');\nconst PersonalScheduleEditorHeadElement = elementQuerySelector(PersonalScheduleEditorField, '.css_personal_schedule_editor_head');\nconst leftButtonElement = elementQuerySelector(PersonalScheduleEditorHeadElement, '.css_personal_schedule_editor_button_left');\nconst PersonalScheduleEditorGroups = elementQuerySelector(PersonalScheduleEditorBodyElement, '.css_personal_schedule_editor_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-name\"] .css_personal_schedule_editor_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-start-time\"] .css_personal_schedule_editor_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-end-time\"] .css_personal_schedule_editor_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleEditorGroups, '.css_personal_schedule_editor_group[group=\"schedule-days\"] .css_personal_schedule_editor_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_editor_day');\n\nexport async function saveEditedPersonalSchedule(personalScheduleID: string) {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  let personalSchedule = await getPersonalSchedule(personalScheduleID);\n  personalSchedule.name = name;\n  personalSchedule.days = days;\n  personalSchedule.period.start.hours = startHours;\n  personalSchedule.period.start.minutes = startMinutes;\n  personalSchedule.period.end.hours = endHours;\n  personalSchedule.period.end.minutes = endMinutes;\n\n  await updatePersonalSchedule(personalSchedule);\n  closePersonalScheduleEditor();\n}\n\nasync function initializePersonalScheduleEditorField(personalScheduleID: string) {\n  const personalSchedule = await getPersonalSchedule(personalScheduleID);\n  nameInputElement.value = personalSchedule.name;\n  startTimeInputElement.value = timeObjectToString(personalSchedule.period.start);\n  endTimeInputElement.value = timeObjectToString(personalSchedule.period.end);\n\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    if (personalSchedule.days.indexOf(i) > -1) {\n      thisDayElement.setAttribute('highlighted', 'true');\n    } else {\n      thisDayElement.setAttribute('highlighted', 'false');\n    }\n  }\n  leftButtonElement.setAttribute('onclick', `bus.personalSchedule.saveEditedPersonalSchedule('${personalScheduleID}')`);\n}\n\nexport function openPersonalScheduleEditor(personalScheduleID: string): void {\n  pushPageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'true');\n  initializePersonalScheduleEditorField(personalScheduleID);\n  closePreviousPage();\n}\n\nexport function closePersonalScheduleEditor(): void {\n  // revokePageHistory('PersonalScheduleEditor');\n  PersonalScheduleEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function switchPersonalScheduleEditorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_editor_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { listPersonalSchedules, PersonalSchedule } from '../../data/personal-schedule/index';\nimport { generateIdentifier } from '../../tools/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/query-selector';\nimport { getIconHTML } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\n\nconst PersonalScheduleManagerField = documentQuerySelector('.css_personal_schedule_manager_field');\nconst PersonalScheduleManagerBodyElement = elementQuerySelector(PersonalScheduleManagerField, '.css_personal_schedule_manager_body');\nconst ListElement = elementQuerySelector(PersonalScheduleManagerBodyElement, '.css_personal_schedule_manager_list');\n\nfunction generateElementOfItem(item: PersonalSchedule): GeneratedElement {\n  const identifier = generateIdentifier('i');\n  const element = document.createElement('div');\n  element.classList.add('css_personal_schedule_manager_item');\n  element.id = identifier;\n  element.setAttribute('onclick', `bus.personalSchedule.openPersonalScheduleEditor('${item.id}')`);\n  element.innerHTML = /*html*/ `<div class=\"css_personal_schedule_manager_item_name\">${item.name}</div><div class=\"css_personal_schedule_manager_item_arrow\">${getIconHTML('arrow_forward_ios')}</div>`;\n  return {\n    element: element,\n    id: identifier\n  };\n}\n\nasync function initializePersonalScheduleManagerField() {\n  ListElement.innerHTML = '';\n  const personalSchedules = await listPersonalSchedules();\n  for (const item of personalSchedules) {\n    const thisElement = generateElementOfItem(item);\n    ListElement.appendChild(thisElement.element);\n  }\n}\n\nexport function openPersonalScheduleManager(): void {\n  pushPageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'true');\n  initializePersonalScheduleManagerField();\n}\n\nexport function closePersonalScheduleManager(): void {\n  revokePageHistory('PersonalScheduleManager');\n  PersonalScheduleManagerField.setAttribute('displayed', 'false');\n}\n","import { createPersonalSchedule } from '../../data/personal-schedule/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../tools/query-selector';\nimport { WeekDayIndex } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst PersonalScheduleCreatorField = documentQuerySelector('.css_personal_schedule_creator_field');\nconst PersonalScheduleCreatorBodyElement = elementQuerySelector(PersonalScheduleCreatorField, '.css_personal_schedule_creator_body');\nconst PersonalScheduleCreatorGroups = elementQuerySelector(PersonalScheduleCreatorBodyElement, '.css_personal_schedule_creator_groups');\nconst nameInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-name\"] .css_personal_schedule_creator_group_body input');\nconst startTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-start-time\"] .css_personal_schedule_creator_group_body input');\nconst endTimeInputElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-end-time\"] .css_personal_schedule_creator_group_body input');\nconst dayGroupBodyElement = elementQuerySelector(PersonalScheduleCreatorGroups, '.css_personal_schedule_creator_group[group=\"schedule-days\"] .css_personal_schedule_creator_group_body');\nconst dayElements = elementQuerySelectorAll(dayGroupBodyElement, '.css_personal_schedule_creator_day');\n\nexport function createFormulatedPersonalSchedule(): void {\n  const name = nameInputElement.value;\n  const startTime = startTimeInputElement.value;\n  const endTime = endTimeInputElement.value;\n\n  const [startHours, startMinutes] = String(startTime)\n    .split(':')\n    .map((e) => parseInt(e));\n  const [endHours, endMinutes] = String(endTime)\n    .split(':')\n    .map((e) => parseInt(e));\n\n  let days = [];\n  for (let i = 0; i < 7; i++) {\n    const thisDayElement = dayElements[i];\n    const highlighted = thisDayElement.getAttribute('highlighted');\n    const day = parseInt(thisDayElement.getAttribute('day'));\n    if (highlighted === 'true') {\n      days.push(day);\n    }\n  }\n\n  createPersonalSchedule(name, startHours, startMinutes, endHours, endMinutes, days).then(function (e) {\n    if (e) {\n      closePersonalScheduleCreator();\n      promptMessage('已建立個人化行程', 'calendar_view_day');\n    } else {\n      promptMessage('無法建立個人化行程', 'error');\n    }\n  });\n}\n\nexport function openPersonalScheduleCreator(): void {\n  pushPageHistory('PersonalScheduleCreator');\n  PersonalScheduleCreatorField.setAttribute('displayed', 'true');\n  closePreviousPage();\n}\n\nexport function closePersonalScheduleCreator(): void {\n  // revokePageHistory('PersonalScheduleCreator');\n  PersonalScheduleCreatorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function switchPersonalScheduleCreatorDay(day: WeekDayIndex): void {\n  const thisDayElement = elementQuerySelector(dayGroupBodyElement, `.css_personal_schedule_creator_day[day=\"${day}\"]`);\n  const highlighted = thisDayElement.getAttribute('highlighted');\n  if (highlighted === 'true') {\n    thisDayElement.setAttribute('highlighted', 'false');\n  } else {\n    thisDayElement.setAttribute('highlighted', 'true');\n  }\n}\n","import { getSettingOptionValue } from '../../data/settings/index';\nimport { booleanToString, generateIdentifier } from '../../tools/index';\nimport { documentQuerySelectorAll } from '../../tools/query-selector';\nimport { getIconHTML } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\n\nexport function promptMessage(message: string, icon: MaterialSymbols): void {\n  const allPromptElements = documentQuerySelectorAll('.css_prompt');\n  if (!(allPromptElements === null)) {\n    for (const promptElement of allPromptElements) {\n      promptElement.remove();\n    }\n  }\n\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n\n  const promptID: string = generateIdentifier();\n\n  const promptElement = document.createElement('div');\n  promptElement.id = promptID;\n  promptElement.classList.add('css_prompt');\n  promptElement.setAttribute('animation', booleanToString(playing_animation));\n\n  const promptIconElement = document.createElement('div');\n  promptIconElement.classList.add('css_prompt_icon');\n  promptIconElement.innerHTML = getIconHTML(icon);\n  promptElement.appendChild(promptIconElement);\n\n  const promptMessageElement = document.createElement('div');\n  promptMessageElement.classList.add('css_prompt_message');\n  promptMessageElement.innerText = message;\n  promptElement.appendChild(promptMessageElement);\n\n  document.body.appendChild(promptElement);\n\n  const promptElementInstance = document.getElementById(promptID);\n  if (!(promptElementInstance === null)) {\n    promptElementInstance.addEventListener(\n      'animationend',\n      function () {\n        promptElementInstance.remove();\n      },\n      { once: true }\n    );\n  }\n}\n"],"names":["NotificationScheduleManagerField","documentQuerySelector","NotificationScheduleManagerHeadElement","elementQuerySelector","NotificationScheduleManagerUpdateTimerBoxElement","NotificationScheduleManagerUpdateTimerElement","NotificationScheduleManagerBody","NotificationScheduleList","previousIntegration","previousAnimation","previousSkeletonScreen","notifcationScheduleManagerRefreshTimer_baseInterval","notifcationScheduleManagerRefreshTimer_minInterval","notifcationScheduleManagerRefreshTimer_dynamicInterval","notifcationScheduleManagerRefreshTimer_dynamic","notifcationScheduleManagerRefreshTimer_streaming","notifcationScheduleManagerRefreshTimer_lastUpdate","notifcationScheduleManagerRefreshTimer_nextUpdate","notifcationScheduleManagerRefreshTimer_refreshing","notifcationScheduleManagerRefreshTimer_currentRequestID","notifcationScheduleManagerRefreshTimer_currentProgress","notifcationScheduleManagerRefreshTimer_streamStarted","updateUpdateTimer","time","Date","getTime","Math","min","max","abs","style","setProperty","toString","window","requestAnimationFrame","handleDataReceivingProgressUpdates","event","CustomEvent","getDataReceivingProgress","detail","stage","document","removeEventListener","target","updateNotificationScheduleManagerField","integration","skeletonScreen","animation","updateItem","thisItemElement","thisItem","previousItem","updateHours","innerText","hours","updateMinutes","thisItemNotificationScheduleElement","minutes","updateMain","name","updateContext","route","direction","updateCancel","setAttribute","id","schedule_id","updateFirst","booleanToString","is_first","updateAnimation","updateSkeletonScreen","compareThings","identifier","element","itemQuantity","items","currentItemSeatQuantity","elementQuerySelectorAll","length","capacity","o","newItemElement","generateIdentifier","createElement","classList","add","innerHTML","getIconHTML","appendChild","NotificationScheduleItemElements","remove","j","hasOwnProperty","refreshNotificationScheduleManager","_refreshNotificationScheduleManager","apply","arguments","_asyncToGenerator","playing_animation","getSettingOptionValue","refresh_interval_setting","dynamic","baseInterval","addEventListener","integrateNotifcationSchedules","updateRate","getUpdateRate","dataUpdateTime","streamNotificationScheduleManager","_streamNotificationScheduleManager","then","setTimeout","err","console","error","openNotificationScheduleManager","pushPageHistory","WindowSize","querySize","FieldHeight","width","height","defaultItemQuantity","floor","i","push","stop_id","estimate_time","scheduled_time","pathAttributeId","date","setUpNotificationScheduleManagerFieldSkeletonScreen","closePreviousPage","closeNotificationScheduleManager","openPreviousPage","cancelNotificationOnNotificationScheduleManager","_x","_x2","_cancelNotificationOnNotificationScheduleManager","promptMessage","cancelNotification","PersonalScheduleEditorField","PersonalScheduleEditorBodyElement","PersonalScheduleEditorHeadElement","leftButtonElement","PersonalScheduleEditorGroups","nameInputElement","startTimeInputElement","endTimeInputElement","dayGroupBodyElement","dayElements","saveEditedPersonalSchedule","_saveEditedPersonalSchedule","personalScheduleID","value","startTime","endTime","_String$split$map2","_slicedToArray","String","split","map","e","parseInt","startHours","startMinutes","_String$split$map4","endHours","endMinutes","days","thisDayElement","highlighted","getAttribute","day","personalSchedule","getPersonalSchedule","period","start","end","updatePersonalSchedule","closePersonalScheduleEditor","_initializePersonalScheduleEditorField","timeObjectToString","indexOf","openPersonalScheduleEditor","initializePersonalScheduleEditorField","switchPersonalScheduleEditorDay","PersonalScheduleManagerField","PersonalScheduleManagerBodyElement","ListElement","generateElementOfItem","item","_initializePersonalScheduleManagerField","_step","_iterator","_createForOfIteratorHelper","listPersonalSchedules","s","n","done","thisElement","f","openPersonalScheduleManager","initializePersonalScheduleManagerField","closePersonalScheduleManager","revokePageHistory","PersonalScheduleCreatorField","PersonalScheduleCreatorBodyElement","PersonalScheduleCreatorGroups","createFormulatedPersonalSchedule","createPersonalSchedule","closePersonalScheduleCreator","openPersonalScheduleCreator","switchPersonalScheduleCreatorDay","message","icon","allPromptElements","documentQuerySelectorAll","promptID","promptElement","promptIconElement","promptMessageElement","body","promptElementInstance","getElementById","once"],"sourceRoot":""}