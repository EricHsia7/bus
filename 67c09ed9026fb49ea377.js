"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[13],{112(){},124(){},245(){},321(){},626(){},969(){},1003(){},1195(){},1351(e,t,i){i.d(t,{a:()=>k,b:()=>w,c:()=>x,d:()=>M});var a=i(467),n=i(8011),r=i(6788),u=i(6983),s=i(3459),d=i(8179),o=i(8024),l=i(9469),c=i(251),p=i(4537),h=i(904),f=i(8279),v={},m=!1,g=!1,y=(0,d.c)(".og"),b=(0,d.e)(y,".tg"),A=(0,d.e)(b,".ug");function C(){var e=(0,d.a)();e.classList.add("vg");var t=(0,d.a)();t.classList.add("wg"),t.appendChild((0,p.a)()),e.appendChild(t);var i=(0,d.a)();return i.classList.add("xg"),e.appendChild(i),e}function L(e,t,i){function a(e,a,n){function r(e,t){var i=(0,d.e)(e,".wg");(0,p.c)(i,t.icon)}function u(e,t){(0,d.e)(e,".xg").innerText=t.name}function s(e,t){e.onclick=t.action}function l(e,t){e.setAttribute("animation",(0,o.a)(t))}function c(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==n?(r(e,a),u(e,a),s(e,a),l(e,i),c(e,t)):(n.key!==a.key&&(r(e,a),u(e,a),s(e,a)),i!==m&&l(e,i),t!==g&&c(e,t))}var n=e.actions,r=e.actionsQuantity,u=Array.from((0,d.d)(A,".vg")),s=u.length;if(r!==s){var l=s-r;if(l<0){for(var c=new DocumentFragment,h=0;h>l;h--){var f=C();c.appendChild(f),u.push(f)}A.append(c)}else if(l>0)for(var y=s-1,b=s-l-1;y>b;y--)u[y].remove(),u.splice(y,1)}for(var L=0;L<r;L++){var _=u[L],w=n[L];if((0,o.e)(v,"actions"))if(v.actions[L])a(_,w,v.actions[L]);else a(_,w,null);else a(_,w,null)}v=e,m=i,g=t}function _(){return(_=(0,a.a)(function*(e){var t=(0,s.b)("playing_animation"),i=(0,o.c)();!function(){for(var e=(0,s.b)("playing_animation"),t=[],i=0;i<3;i++)t.push({name:"",icon:"",key:`action-${i}`,action:function(){}});L({actions:t,actionsQuantity:3,hash:""},!0,e)}(),L(yield(0,u.a)(e,i),!1,t)})).apply(this,arguments)}function w(e){(0,h.d)("LocationDetails"),y.setAttribute("displayed","true"),function(e){_.apply(this,arguments)}(e)}function k(){(0,h.f)("LocationDetails"),y.setAttribute("displayed","false")}function x(e){return T.apply(this,arguments)}function T(){return(T=(0,a.a)(function*(e){var t=(0,o.c)(),i=yield(0,n.a)(t,1);(0,r.a)(t),(0,r.b)(t);var a=`ml_${e}`;if((0,o.e)(i,a)){var u=i[a],s=(0,l.a)(1,{hash:e});(0,c.b)(u.n,s)}})).apply(this,arguments)}function M(e){return S.apply(this,arguments)}function S(){return(S=(0,a.a)(function*(e){var t=(0,o.c)(),i=yield(0,n.a)(t,1);(0,r.a)(t),(0,r.b)(t);var a=`ml_${e}`;if((0,o.e)(i,a)){var u=(0,l.a)(1,{hash:e});(0,f.b)(u)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(e,t,i){i.d(t,{a:()=>R,b:()=>H});var a=i(467),n=i(5767),r=i(365),u=i(3422),s=i(3459),d=i(8179),o=i(8024),l=i(4537),c=i(904),p=i(9119),h=(0,d.c)(".gi"),f=(0,d.e)(h,".ji"),v=(0,d.e)(f,".ni"),m=(0,d.e)(v,".oi"),g=(0,d.e)(h,".qi"),y=(0,d.e)(g,".ri"),b={},A=!1,C=15e3,L=5e3,_=15e3,w=!0,k=0,x=0,T="",M=!1,S=!1,j=!1;function I(e){var t=e;if(M){var i=t.detail.progress-1;m.style.setProperty("--hi",i.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,I)}function $(){var e=(0,d.a)();e.classList.add("si");var t=(0,d.a)();t.classList.add("ti"),e.appendChild(t);var i=(0,d.a)();i.classList.add("ui");var a=(0,d.a)();a.classList.add("vi"),i.appendChild(a);var n=(0,d.a)();n.classList.add("wi"),i.appendChild(n);var r=(0,d.a)();r.classList.add("xi"),i.appendChild(r);var u=(0,d.a)();u.classList.add("yi");var s=document.createElement("span");return s.appendChild((0,l.b)("close")),u.appendChild(s),i.appendChild(u),e.appendChild(i),e}function D(e,t,i){function a(e,a,n){function r(e,t){(0,d.e)(e,".ti").innerText=t.hours}function u(e,t){var i=(0,d.e)(e,".ui");(0,d.e)(i,".vi").innerText=t.minutes}function s(e,t){var i=(0,d.e)(e,".ui");(0,d.e)(i,".xi").innerText=t.name}function l(e,t){var i=(0,d.e)(e,".ui");(0,d.e)(i,".wi").innerText=`${t.route.name} - 往${t.route.direction}`}function c(e,t){var i=(0,d.e)(e,".ui");(0,d.e)(i,".yi").onclick=function(){!function(e,t){U.apply(this,arguments)}(e,t.schedule_id)}}function p(e,t){e.setAttribute("first",(0,o.a)(t.is_first))}function h(e,t){e.setAttribute("animation",(0,o.a)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==n?(r(e,a),u(e,a),s(e,a),l(e,a),c(e,a),p(e,a),h(e,i),f(e,t)):(a.hours!==n.hours&&r(e,a),a.minutes!==n.minutes&&u(e,a),(0,o.b)(n.schedule_id,a.schedule_id)||(s(e,a),l(e,a),c(e,a)),n.is_first!==a.is_first&&p(e,a),false!==i&&h(e,i),A!==t&&f(e,t))}var n=e.itemQuantity,r=e.items,u=Array.from((0,d.d)(y,".si")),s=u.length;if(n!==s){var l=s-n;if(l<0){for(var c=new DocumentFragment,p=0;p>l;p--){var h=$();c.appendChild(h),u.push(h)}y.append(c)}else if(l>0)for(var f=s-1,v=s-l-1;f>v;f--)u[f].remove(),u.splice(f,1)}for(var m=0;m<n;m++){var g=u[m],C=r[m];if((0,o.e)(b,"items"))if(b.items[m])a(g,C,b.items[m]);else a(g,C,null);else a(g,C,null)}b=e,A=t}function E(){return P.apply(this,arguments)}function P(){return(P=(0,a.a)(function*(){var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval");w=t.dynamic,C=t.baseInterval,M=!0,T=(0,o.c)(),m.setAttribute("refreshing","true"),m.classList.remove("pi"),document.addEventListener(T,I);var i=yield(0,u.h)(T);D(i,!1,e);var a=0;w&&(a=yield(0,n.c)()),k=(new Date).getTime(),x=w?Math.max(k+L,i.dataUpdateTime+C/a):k+C,_=Math.max(L,x-k),M=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--ii",`${_}ms`),m.classList.add("pi")})).apply(this,arguments)}function Q(){return F.apply(this,arguments)}function F(){return(F=(0,a.a)(function*(){E().then(function(){S?setTimeout(function(){Q()},Math.max(L,x-(new Date).getTime())):j=!1}).catch(function(e){S?setTimeout(function(){Q()},1e4):j=!1})})).apply(this,arguments)}function H(){(0,c.d)("NotificationScheduleManager"),h.setAttribute("displayed","true"),function(){for(var e=(0,s.b)("playing_animation"),t=(0,c.e)("window"),i=(t.width,t.height),a=Math.floor(i/50)+5,n=[],r=0;r<a;r++)n.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});D({items:n,itemQuantity:a,dataUpdateTime:0},!0,e)}(),S||(S=!0,j?E():(j=!0,Q())),(0,c.a)()}function R(){h.setAttribute("displayed","false"),S=!1,(0,c.c)()}function U(){return(U=(0,a.a)(function*(e,t){if((0,p.a)("manufacturing","處理中"),yield(0,r.a)(t)){if(e.remove(),(0,p.a)("check_circle","已取消通知"),!M){var i=(0,s.b)("playing_animation");D(yield(0,u.h)(T),!1,i)}}else(0,p.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(e,t,i){i.d(t,{a:()=>w,b:()=>_,c:()=>A,d:()=>k});var a=i(3453),n=i(467),r=i(5352),u=i(8179),s=i(5579),d=i(904),o=i(9119),l=(0,u.c)(".uh"),c=(0,u.e)(l,".zh"),p=(0,u.e)(l,".vh"),h=(0,u.e)(p,".wh"),f=(0,u.e)(c,"._h"),v=(0,u.e)(f,'.ai[group="schedule-name"] .ei input'),m=(0,u.e)(f,'.ai[group="schedule-start-time"] .ei input'),g=(0,u.e)(f,'.ai[group="schedule-end-time"] .ei input'),y=(0,u.e)(f,'.ai[group="schedule-days"] .ei'),b=(0,u.d)(y,".fi");function A(e){return C.apply(this,arguments)}function C(){return(C=(0,n.a)(function*(e){for(var t=v.value,i=m.value,n=g.value,u=String(i).split(":").map(function(e){return parseInt(e)}),s=(0,a.a)(u,2),d=s[0],l=s[1],c=String(n).split(":").map(function(e){return parseInt(e)}),p=(0,a.a)(c,2),h=p[0],f=p[1],y=[],A=0;A<7;A++){var C=b[A],L=C.getAttribute("highlighted"),_=parseInt(C.getAttribute("day"));"true"===L&&y.push(_)}var k=yield(0,r.b)(e);k.name=t,k.days=y,k.period.start.hours=d,k.period.start.minutes=l,k.period.end.hours=h,k.period.end.minutes=f,yield(0,r.e)(k),(0,o.a)("check_circle","已儲存變更"),w()})).apply(this,arguments)}function L(){return(L=(0,n.a)(function*(e){var t=yield(0,r.b)(e);v.value=t.name,m.value=(0,s.i)(t.period.start),g.value=(0,s.i)(t.period.end);for(var i=0;i<7;i++){var a=b[i];t.days.indexOf(i)>-1?a.setAttribute("highlighted","true"):a.setAttribute("highlighted","false")}h.onclick=function(){A(e)}})).apply(this,arguments)}function _(e){(0,d.d)("PersonalScheduleEditor"),l.setAttribute("displayed","true"),function(e){L.apply(this,arguments)}(e),(0,d.a)()}function w(){l.setAttribute("displayed","false"),(0,d.c)()}function k(e){var t=(0,u.e)(y,`.fi[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(e,t,i){i.d(t,{a:()=>v,b:()=>f});var a=i(467),n=i(5352),r=i(8179),u=i(4537),s=i(904),d=i(5693),o=(0,r.c)(".yg"),l=(0,r.e)(o,".ch"),c=(0,r.e)(l,".dh");function p(e){var t=(0,r.a)();t.classList.add("eh"),t.onclick=function(){(0,d.b)(e.id)};var i=(0,r.a)();i.classList.add("fh"),i.innerText=e.name,t.appendChild(i);var a=(0,r.a)();a.classList.add("gh");var n=document.createElement("span");return n.appendChild((0,u.b)("arrow_forward_ios")),a.appendChild(n),t.appendChild(a),t}function h(){return(h=(0,a.a)(function*(){c.innerHTML="";var e=yield(0,n.d)(),t=new DocumentFragment;for(var i of e){var a=p(i);t.appendChild(a)}c.append(t)})).apply(this,arguments)}function f(){(0,s.d)("PersonalScheduleManager"),o.setAttribute("displayed","true"),function(){h.apply(this,arguments)}()}function v(){(0,s.f)("PersonalScheduleManager"),o.setAttribute("displayed","false")}},7943(){},8279(e,t,i){i.d(t,{a:()=>o,b:()=>d});var a=i(8179),n=i(2648),r=i(904),u=(0,a.c)(".fj"),s=(0,a.e)(u,".kj");function d(e){(0,r.d)("QRCode"),u.setAttribute("displayed","true"),function(e){var t=(0,n.a)(e,"M",.5,.3,1,"var(--a)",4);s.innerHTML=t}(e)}function o(){(0,r.f)("QRCode"),u.setAttribute("displayed","false")}},8380(e,t,i){i.d(t,{a:()=>y,b:()=>m,c:()=>g,d:()=>b});var a=i(3453),n=i(5352),r=i(8179),u=i(904),s=i(9119),d=(0,r.c)(".hh"),o=(0,r.e)(d,".mh"),l=(0,r.e)(o,".nh"),c=(0,r.e)(l,'.oh[group="schedule-name"] .sh input'),p=(0,r.e)(l,'.oh[group="schedule-start-time"] .sh input'),h=(0,r.e)(l,'.oh[group="schedule-end-time"] .sh input'),f=(0,r.e)(l,'.oh[group="schedule-days"] .sh'),v=(0,r.d)(f,".th");function m(){for(var e=c.value,t=p.value,i=h.value,r=String(t).split(":").map(function(e){return parseInt(e)}),u=(0,a.a)(r,2),d=u[0],o=u[1],l=String(i).split(":").map(function(e){return parseInt(e)}),f=(0,a.a)(l,2),m=f[0],g=f[1],b=[],A=0;A<7;A++){var C=v[A],L=C.getAttribute("highlighted"),_=parseInt(C.getAttribute("day"));"true"===L&&b.push(_)}(0,n.a)(e,d,o,m,g,b).then(function(e){e?(y(),(0,s.a)("calendar_view_day","已建立個人化行程")):(0,s.a)("error","無法建立個人化行程")})}function g(){(0,u.d)("PersonalScheduleCreator"),d.setAttribute("displayed","true"),(0,u.a)()}function y(){d.setAttribute("displayed","false"),(0,u.c)()}function b(e){var t=(0,r.e)(f,`.th[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8969(){},9119(e,t,i){i.d(t,{a:()=>d});var a=i(2284),n=i(3459),r=i(8179),u=i(8024),s=i(4537);function d(e,t,i){var d=(0,r.b)(".lj");if(null!==d)for(var o of d)o.remove();var l=(0,n.b)("playing_animation"),c=(0,r.a)();c.classList.add("lj"),c.setAttribute("animation",(0,u.a)(l));var p=(0,r.a)();p.classList.add("mj"),p.appendChild((0,s.b)(e)),c.appendChild(p);var h=(0,r.a)();if(h.classList.add("nj"),h.innerText=t,c.appendChild(h),"object"===(0,a.a)(i)&&null!=i&&"function"==typeof(null==i?void 0:i.action)){var f=(0,r.a)();f.classList.add("oj"),f.innerText=i.text,f.addEventListener("click",function(){i.action()},{once:!0}),c.appendChild(f),c.setAttribute("button","true")}c.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(c)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=67c09ed9026fb49ea377.js.map