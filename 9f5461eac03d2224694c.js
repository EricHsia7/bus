"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[627],{2174(t,e,n){n.d(e,{Gv:()=>O,Sv:()=>J,m_:()=>q});var r=n(467),i=n(5767),a=n(365),u=n(77),o=n(3459),d=n(8024),l=n(8179),s=n(4537),c=n(904),f=n(9119),p=(0,l.bv)(".zj"),h=(0,l.aI)(p,".bk"),m=(0,l.aI)(h,".fk"),v=(0,l.aI)(m,".gk"),y=(0,l.aI)(p,".ik"),g=(0,l.aI)(y,".jk"),b={},k=!1,A=15e3,I=5e3,j=15e3,C=!0,_=0,x=0,w="",E=!1,L=!1,S=!1;function T(t){var e=t;if(E){var n=e.detail.progress-1;v.style.setProperty("--_j",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,T)}function M(){var t=(0,d.zx)(),e=document.createElement("div");e.classList.add("kk"),e.id=t;var n=document.createElement("div");n.classList.add("lk"),e.appendChild(n);var r=document.createElement("div");r.classList.add("mk");var i=document.createElement("div");i.classList.add("nk"),r.appendChild(i);var a=document.createElement("div");a.classList.add("ok"),r.appendChild(a);var u=document.createElement("div");u.classList.add("pk"),r.appendChild(u);var o=document.createElement("div");o.classList.add("qk");var l=document.createElement("span");return l.appendChild((0,s.YC)("close")),o.appendChild(l),r.appendChild(o),e.appendChild(r),{element:e,id:t}}function $(t,e,n){function r(t,r,i){function a(t,e){(0,l.aI)(t,".lk").innerText=e.hours}function u(t,e){var n=(0,l.aI)(t,".mk");(0,l.aI)(n,".nk").innerText=e.minutes}function o(t,e){var n=(0,l.aI)(t,".mk");(0,l.aI)(n,".pk").innerText=e.name}function s(t,e){var n=(0,l.aI)(t,".mk");(0,l.aI)(n,".ok").innerText=`${e.route.name} - 往${e.route.direction}`}function c(t,e){var n=(0,l.aI)(t,".mk");(0,l.aI)(n,".qk").onclick=function(){O(t.id,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,d.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,d.xZ)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,d.xZ)(e))}null==i?(a(t,r),u(t,r),o(t,r),s(t,r),c(t,r),f(t,r),p(t,n),h(t,e)):(r.hours!==i.hours&&a(t,r),r.minutes!==i.minutes&&u(t,r),(0,d.hw)(i.schedule_id,r.schedule_id)||(o(t,r),s(t,r),c(t,r)),i.is_first!==r.is_first&&f(t,r),true!==n&&p(t,n),k!==e&&h(t,e))}var i=t.itemQuantity,a=t.items,u=(0,l.jg)(g,".kk").length;if(i!==u){var o=u-i;if(o<0)for(var s=0;s<Math.abs(o);s++){var c=M();g.appendChild(c.element)}else for(var f=(0,l.jg)(g,".kk"),p=0;p<Math.abs(o);p++){f[u-1-p].remove()}}for(var h=(0,l.jg)(g,".kk"),m=0;m<i;m++){var v=h[m],y=a[m];if(b.hasOwnProperty("items"))if(b.items[m])r(v,y,b.items[m]);else r(v,y,null);else r(v,y,null)}b=t,k=e}function Z(){return z.apply(this,arguments)}function z(){return(z=(0,r.A)(function*(){var t=(0,o.Js)("playing_animation"),e=(0,o.Js)("refresh_interval");C=e.dynamic,A=e.baseInterval,E=!0,w=(0,d.zx)(),v.setAttribute("refreshing","true"),v.classList.remove("hk"),document.addEventListener(w,T);var n=yield(0,u.e3)(w);$(n,!1,t);var r=0;C&&(r=yield(0,i.wz)()),_=(new Date).getTime(),x=C?Math.max(_+I,n.dataUpdateTime+A/r):_+A,j=Math.max(I,x-_),E=!1,v.setAttribute("refreshing","false"),v.style.setProperty("--ak",`${j}ms`),v.classList.add("hk")})).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=(0,r.A)(function*(){Z().then(function(){L?setTimeout(function(){P()},Math.max(I,x-(new Date).getTime())):S=!1}).catch(function(t){L?setTimeout(function(){P()},1e4):S=!1})})).apply(this,arguments)}function J(){(0,c.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var t=(0,o.Js)("playing_animation"),e=(0,c.gO)("window"),n=(e.width,e.height),r=Math.floor(n/50)+5,i=[],a=0;a<r;a++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});$({items:i,itemQuantity:r,dataUpdateTime:0},!0,t)}(),L||(L=!0,S?Z():(S=!0,P())),(0,c.Z_)()}function q(){p.setAttribute("displayed","false"),L=!1,(0,c.l$)()}function O(t,e){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.A)(function*(t,e){if((0,f.a)("處理中","manufacturing"),yield(0,a.G)(e)){if((0,l.aI)(g,`.kk#${t}`).remove(),(0,f.a)("已取消通知","check_circle"),!E){var n=(0,o.Js)("playing_animation");$(yield(0,u.e3)(w),!1,n)}}else(0,f.a)("取消失敗","error")})).apply(this,arguments)}},5693(t,e,n){n.d(e,{Dn:()=>C,Xy:()=>j,bF:()=>I,gv:()=>b});var r=n(3453),i=n(467),a=n(5352),u=n(8179),o=n(5579),d=n(904),l=(0,u.bv)(".mj"),s=(0,u.aI)(l,".rj"),c=(0,u.aI)(l,".nj"),f=(0,u.aI)(c,".oj"),p=(0,u.aI)(s,".sj"),h=(0,u.aI)(p,'.tj[group="schedule-name"] .xj input'),m=(0,u.aI)(p,'.tj[group="schedule-start-time"] .xj input'),v=(0,u.aI)(p,'.tj[group="schedule-end-time"] .xj input'),y=(0,u.aI)(p,'.tj[group="schedule-days"] .xj'),g=(0,u.jg)(y,".yj");function b(t){return k.apply(this,arguments)}function k(){return(k=(0,i.A)(function*(t){for(var e=h.value,n=m.value,i=v.value,u=String(n).split(":").map(function(t){return parseInt(t)}),o=(0,r.A)(u,2),d=o[0],l=o[1],s=String(i).split(":").map(function(t){return parseInt(t)}),c=(0,r.A)(s,2),f=c[0],p=c[1],y=[],b=0;b<7;b++){var k=g[b],A=k.getAttribute("highlighted"),I=parseInt(k.getAttribute("day"));"true"===A&&y.push(I)}var C=yield(0,a.qZ)(t);C.name=e,C.days=y,C.period.start.hours=d,C.period.start.minutes=l,C.period.end.hours=f,C.period.end.minutes=p,yield(0,a.nL)(C),j()})).apply(this,arguments)}function A(){return(A=(0,i.A)(function*(t){var e=yield(0,a.qZ)(t);h.value=e.name,m.value=(0,o.pn)(e.period.start),v.value=(0,o.pn)(e.period.end);for(var n=0;n<7;n++){var r=g[n];e.days.indexOf(n)>-1?r.setAttribute("highlighted","true"):r.setAttribute("highlighted","false")}f.onclick=function(){b(t)}})).apply(this,arguments)}function I(t){(0,d.WR)("PersonalScheduleEditor"),l.setAttribute("displayed","true"),function(t){A.apply(this,arguments)}(t),(0,d.Z_)()}function j(){l.setAttribute("displayed","false"),(0,d.l$)()}function C(t){var e=(0,u.aI)(y,`.yj[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},7891(t,e,n){n.d(e,{Z:()=>y,z:()=>v});var r=n(467),i=n(5352),a=n(8179),u=n(4537),o=n(904),d=n(5693);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var c=(0,a.bv)(".qi"),f=(0,a.aI)(c,".vi"),p=(0,a.aI)(f,".wi");function h(t){var e=document.createElement("div");e.classList.add("xi"),e.onclick=function(){(0,d.bF)(t.id)};var n=document.createElement("div");n.classList.add("yi"),n.appendChild(document.createTextNode(t.name)),e.appendChild(n);var r=document.createElement("div");r.classList.add("zi");var i=document.createElement("span");return i.appendChild((0,u.YC)("arrow_forward_ios")),r.appendChild(i),e.appendChild(r),{element:e,id:""}}function m(){return(m=(0,r.A)(function*(){p.innerHTML="";var t,e=l(yield(0,i.ty)());try{for(e.s();!(t=e.n()).done;){var n=h(t.value);p.appendChild(n.element)}}catch(t){e.e(t)}finally{e.f()}})).apply(this,arguments)}function v(){(0,o.WR)("PersonalScheduleManager"),c.setAttribute("displayed","true"),function(){m.apply(this,arguments)}()}function y(){(0,o.kr)("PersonalScheduleManager"),c.setAttribute("displayed","false")}},8279(t,e,n){n.d(e,{Vc:()=>l,X8:()=>d});var r=n(2648),i=n(8179),a=n(904),u=(0,i.bv)(".rk"),o=(0,i.aI)(u,".wk");function d(t){(0,a.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,r.$)(t,"M",.5,.3,1,"var(--a)",4);o.innerHTML=e}(t)}function l(){(0,a.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>g,I1:()=>y,Ps:()=>v,om:()=>b});var r=n(3453),i=n(5352),a=n(8179),u=n(904),o=n(9119),d=(0,a.bv)("._i"),l=(0,a.aI)(d,".ej"),s=(0,a.aI)(l,".fj"),c=(0,a.aI)(s,'.gj[group="schedule-name"] .kj input'),f=(0,a.aI)(s,'.gj[group="schedule-start-time"] .kj input'),p=(0,a.aI)(s,'.gj[group="schedule-end-time"] .kj input'),h=(0,a.aI)(s,'.gj[group="schedule-days"] .kj'),m=(0,a.jg)(h,".lj");function v(){for(var t=c.value,e=f.value,n=p.value,a=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,r.A)(a,2),d=u[0],l=u[1],s=String(n).split(":").map(function(t){return parseInt(t)}),h=(0,r.A)(s,2),v=h[0],y=h[1],b=[],k=0;k<7;k++){var A=m[k],I=A.getAttribute("highlighted"),j=parseInt(A.getAttribute("day"));"true"===I&&b.push(j)}(0,i.Qh)(t,d,l,v,y,b).then(function(t){t?(g(),(0,o.a)("已建立個人化行程","calendar_view_day")):(0,o.a)("無法建立個人化行程","error")})}function y(){(0,u.WR)("PersonalScheduleCreator"),d.setAttribute("displayed","true"),(0,u.Z_)()}function g(){d.setAttribute("displayed","false"),(0,u.l$)()}function b(t){var e=(0,a.aI)(h,`.lj[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},9119(t,e,n){n.d(e,{a:()=>l});var r=n(3459),i=n(8024),a=n(8179),u=n(4537);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=(0,a.e0)(".xk");if(null!==n){var d,l=o(n);try{for(l.s();!(d=l.n()).done;){d.value.remove()}}catch(t){l.e(t)}finally{l.f()}}var s=(0,r.Js)("playing_animation"),c=(0,i.zx)(),f=document.createElement("div");f.id=c,f.classList.add("xk"),f.setAttribute("animation",(0,i.xZ)(s));var p=document.createElement("div");p.classList.add("yk"),p.appendChild((0,u.YC)(e)),f.appendChild(p);var h=document.createElement("div");h.classList.add("zk"),h.innerText=t,f.appendChild(h),document.body.appendChild(f);var m=document.getElementById(c);null!==m&&m.addEventListener("animationend",function(){m.remove()},{once:!0})}}}]);
//# sourceMappingURL=9f5461eac03d2224694c.js.map