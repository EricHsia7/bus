"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[638],{904(e,a,t){t.d(a,{a:()=>I,b:()=>P,c:()=>_,d:()=>U,e:()=>R,f:()=>O,g:()=>N,h:()=>Q,i:()=>H});var n=t(8179),i=t(8024),r=t(4884),c=t(9499),o=t(6052),s=t(9333),u=t(8379),d=t(6082),l=t(4294),b=t(1351),f=t(3030),h=t(2174),p=t(8380),k=t(5693),v=t(7891),m=t(8279),g=t(7908),y=t(5286),w=t(4690),S=t(3041),L=t(752),C=t(5009),T=t(6104),M=t(6166),x=t(2994),D=(0,n.c)(".g"),E=(0,n.c)(".l"),A=(new Date).getTime(),F=["Home"];function _(e){var a=F.length;F[a-1]!==e&&F.push(e)}function R(e){var a=F.length;a>1&&F[a-1]===e&&F.pop()}function P(){var e=F.length;if(e>1)switch(F[e-2]){case"Home":(0,d.c)();break;case"FolderCreator":(0,o.b)();break;case"FolderEditor":(0,s.a)();break;case"IconSelector":(0,l.b)();break;case"FolderManager":(0,u.b)();break;case"Location":(0,f.b)();break;case"LocationDetails":(0,b.b)();break;case"Route":(0,w.b)();break;case"RouteDetails":(0,y.f)();break;case"SaveToFolder":(0,S.b)();break;case"Search":(0,C.b)();break;case"Settings":(0,T.c)();break;case"SettingsOptions":(0,M.b)();break;case"DataUsage":(0,c.b)();break;case"PersonalScheduleManager":(0,v.b)();break;case"PersonalScheduleCreator":(0,p.c)();break;case"PersonalScheduleEditor":(0,k.b)();break;case"Bus":(0,r.c)();break;case"RegisterNotification":(0,g.a)();break;case"ScheduleNotification":(0,L.b)();break;case"NotificationScheduleManager":(0,h.b)();break;case"QRCode":(0,m.b)();break;case"Storage":(0,x.b)()}}function H(){var e=F.length;if(e>1)switch(F[e-2]){case"Home":(0,d.d)();break;case"FolderCreator":(0,o.d)();break;case"FolderEditor":(0,s.c)();break;case"IconSelector":(0,l.e)();break;case"FolderManager":(0,u.d)();break;case"Location":(0,f.e)();break;case"LocationDetails":(0,b.e)();break;case"Route":(0,w.e)();break;case"RouteDetails":(0,y.h)();break;case"SaveToFolder":(0,S.d)();break;case"Search":(0,C.f)();break;case"Settings":(0,T.h)();break;case"SettingsOptions":(0,M.d)();break;case"DataUsage":(0,c.d)();break;case"PersonalScheduleManager":(0,v.e)();break;case"PersonalScheduleCreator":(0,p.e)();break;case"PersonalScheduleEditor":(0,k.e)();break;case"Bus":(0,r.e)();break;case"RegisterNotification":(0,g.c)();break;case"ScheduleNotification":(0,L.d)();break;case"NotificationScheduleManager":(0,h.d)();break;case"QRCode":(0,m.d)();break;case"Storage":(0,x.d)()}}function N(){var e=0;(0,i.g)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.c)(".g svg.h").style.setProperty("--i",`${e}px`)}function I(e){function a(){D.classList.add("j"),D.addEventListener("animationend",function(){D.setAttribute("displayed","false"),D.classList.remove("j"),"function"==typeof e&&e()},{once:!0})}var t=(new Date).getTime();t-A<100?setTimeout(a,Math.max(1,t-A)):a()}function Q(){E.setAttribute("displayed","true")}function U(e){var a=0,t=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":a=n,t=i;break;case"head":a=n,t=55;break;case"head-one-button":a=n-55,t=55;break;case"head-two-button":a=n-110,t=55;break;case"route-details-canvas":a=n-20-20,t=1680;break;case"route-bus-arrival-time-chart":a=n-45-15-20,t=75;break;case"location-bus-arrival-time-chart":a=n-30-20,t=75;break;default:a=0,t=0}return{width:a,height:t}}function O(){window.scrollTo({top:0,behavior:"instant"})}},4294(e,a,t){t.d(a,{a:()=>F,b:()=>E,c:()=>M,d:()=>A,e:()=>D});var n,i=t(467),r=t(9218),c=t(6788),o=t(972),s=t(3459),u=t(8179),d=t(8024),l=t(4781),b=t(4537),f=t(904),h=(0,u.c)(".tb"),p=(0,u.e)(h,".ub"),k=(0,u.e)(p,"#search_material_symbols_input"),v=(0,u.e)(h,".xb"),m=(0,u.e)(v,".yb"),g=[],y=[],w=!1,S=!1;function L(){var e=(0,u.a)();return e.classList.add("zb"),e.appendChild((0,b.a)()),e}function C(e,a,t,i){function r(e,r,c){function o(e,a){(0,b.c)(e,a)}function s(e,a,t){e.onclick=function(){!function(e,a){a.value=e,F()}(a,t)}}function u(e,a){e.setAttribute("skeleton-screen",(0,d.a)(a))}function l(e,a){e.setAttribute("animation",(0,d.a)(a))}null==c?(o(e,r),s(e,r,a),u(e,t),l(e,i)):(c!==r?(o(e,r),s(e,r,a)):n!==a&&s(e,r,a),S!==t&&u(e,t),w!==i&&l(e,i))}var c=e.length,o=Array.from((0,u.d)(m,".zb")),s=o.length;if(c!==s){var l=s-c;if(l<0){for(var f=new DocumentFragment,h=0;h>l;h--){var p=L();f.appendChild(p),o.push(p)}m.append(f)}else if(l>0)for(var k=s-1,v=s-l-1;k>v;k--)o[k].remove(),o.splice(k,1)}for(var g=0;g<c;g++){var C=y[g],T=e[g],M=o[g];r(M,T,C||null)}y=e.slice(),n=a,S=t,w=i}function T(){return(T=(0,i.a)(function*(e){var a=(0,s.b)("playing_animation"),t=(0,d.c)();k.value="",function(e){for(var a=(0,s.b)("playing_animation"),t=(0,f.d)("window"),n=Math.floor(t.width/50)*(Math.floor(t.height/50)+3),i=[],r=0;r<n;r++)i.push("");C(i,e,!0,a)}(e);var n=yield(0,r.a)(t);for(var i in g=[],n.symbols)g.push(i);C(g,e,!1,a),(0,o.a)(n),(0,c.a)(t)})).apply(this,arguments)}function M(){k.addEventListener("paste",function(){x()}),k.addEventListener("cut",function(){x()}),k.addEventListener("selectionchange",function(){x()}),document.addEventListener("selectionchange",function(){x()}),k.addEventListener("keyup",function(){x()})}function x(){var e=k.value;if(!(0,l.a)(e)){for(var a=(0,o.b)(e),t=a.length-1;t>=0;t--){var i=a[t].item,r=g.indexOf(i);if(g[t]&&!(r<0)){var c=[g[r],g[t]];g[t]=c[0],g[r]=c[1]}}C(g,n,!1,w)}}function D(){h.setAttribute("displayed","true")}function E(){h.setAttribute("displayed","false")}function A(e){(0,f.c)("IconSelector"),D(),function(e){T.apply(this,arguments)}(e),(0,f.b)()}function F(){E(),(0,f.i)(),(0,f.e)("IconSelector")}},4537(e,a,t){t.d(a,{a:()=>r,b:()=>i,c:()=>c});var n=t(8179);function i(e){var a=document.createElement("span");return a.classList.add("o"),a.innerText=e,a}function r(){var e=document.createElement("span");return e.classList.add("o"),e}function c(e,a){(0,n.e)(e,"span.o").innerText=a}},4953(){},5259(){},5297(){},6091(e,a,t){t.d(a,{a:()=>N,b:()=>F});var n=t(467),i=t(5767),r=t(5314),c=t(3459),o=t(8179),s=t(8024),u=t(4884),d=t(4537),l=t(904),b=t(3030),f=t(4690),h=(0,o.c)(".p"),p=(0,o.e)(h,".fa"),k=(0,o.e)(p,".ga"),v=(0,o.e)(k,".la"),m={},g=!1,y=!1,w=15e3,S=5e3,L=!0,C=!1,T=0,M=0,x="",D=!1;function E(){var e=(0,o.a)();e.classList.add("ra");var a=(0,o.a)();a.classList.add("ta");var t=(0,o.a)();t.classList.add("ua"),t.appendChild((0,d.a)());var n=(0,o.a)();n.classList.add("va");var i=(0,o.a)();i.classList.add("wa"),a.appendChild(t),a.appendChild(n),a.appendChild(i);var r=(0,o.a)();return r.classList.add("ya"),e.appendChild(a),e.appendChild(r),e}function A(e,a,t){function n(e,n,i){function r(e,a){var t=(0,o.e)(e,".ta"),n=(0,o.e)(t,".ua"),i="";switch(a.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,d.c)(n,i)}function c(e,a){var t=(0,o.e)(e,".ta"),n=(0,o.e)(t,".va"),i="";switch(a.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function l(e,a){var t=(0,o.e)(e,".ta");(0,o.e)(t,".wa").innerText=a.time.relative}function h(e,a){(0,o.e)(e,".ya").innerText=a.name}function p(e,a){switch(a.type){case"route":e.onclick=function(){(0,f.d)(a.id,a.pid)};break;case"location":e.onclick=function(){(0,b.d)(a.hash)};break;case"bus":e.onclick=function(){(0,u.d)(a.id)};break;case"empty":e.onclick=null}}function k(e,a){e.setAttribute("animation",(0,s.a)(a))}function v(e,a){e.setAttribute("skeleton-screen",(0,s.a)(a))}if(null==i)r(e,n),c(e,n),l(e,n),h(e,n),p(e,n),k(e,t),v(e,a);else if(n.type!==i.type)r(e,n),c(e,n),l(e,n),h(e,n),p(e,n),k(e,t),v(e,a);else{switch(n.type){case"location":(0,s.b)(i.name,n.name)||h(e,n),i.time!==n.time&&l(e,n),(0,s.b)(i.hash,n.hash)||p(e,n);break;case"route":i.name!==n.name&&h(e,n),i.time!==n.time&&l(e,n),i.id===n.id&&(0,s.b)(i.pid,n.pid)||p(e,n);break;case"bus":i.name!==n.name&&h(e,n),i.time!==n.time&&l(e,n),i.id!==n.id&&p(e,n);break;case"empty":i.time!==n.time&&l(e,n)}g!==t&&k(e,t),y!==a&&v(e,a)}}var i=e.itemQuantity,r=Array.from((0,o.d)(v,".ra")),c=r.length;if(i!==c){var l=c-i;if(l<0){for(var h=new DocumentFragment,p=0;p>l;p--){var k=E();h.appendChild(k),r.push(k)}v.append(h)}else if(l>0)for(var w=c-1,S=c-l-1;w>S;w--)r[w].remove(),r.splice(w,1)}for(var L=0;L<i;L++){var C=r[L],T=e.items[L];if((0,s.f)(m,"items"))if(m.items[L])n(C,T,m.items[L]);else n(C,T,null);else n(C,T,null)}m=e,g=t,y=a}function F(){for(var e=(0,c.b)("playing_animation"),a=(0,l.d)("window"),t=Math.floor(a.height/70/3)+2,n=[],i=0;i<t;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});A({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function _(){return R.apply(this,arguments)}function R(){return(R=(0,n.a)(function*(){var e=(0,c.b)("playing_animation"),a=(0,c.b)("refresh_interval");L=a.dynamic,w=a.baseInterval,x=(0,s.c)();var t=yield(0,r.c)(x);A(t,!1,e);var n=0;L&&(n=yield(0,i.c)()),T=(new Date).getTime(),M=L?Math.max(T+S,t.dataUpdateTime+w/n):T+w,Math.max(S,M-T)})).apply(this,arguments)}function P(){return H.apply(this,arguments)}function H(){return(H=(0,n.a)(function*(){_().then(function(){C?setTimeout(function(){P()},Math.max(S,M-(new Date).getTime())):D=!1}).catch(function(e){C?setTimeout(function(){P()},1e4):D=!1})})).apply(this,arguments)}function N(){C||(C=!0,D?_():(D=!0,P()))}},6561(){},6764(){},7114(){},7336(){},7499(){},9657(){}}]);
//# sourceMappingURL=6ccb3f147b9fcec2ad1e.js.map