"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{313:(t,e,n)=>{n.d(e,{s:()=>y});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return p=f((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=f((function*(){var e,n=[],o=a([[0,9],[1,9]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,c=yield(0,i.Fd)(u.url,t,"getProvider_".concat(u.e[0]),"json");n=n.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_provider_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var y=yield e();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),l||(l=!0,s=y),y}if((new Date).getTime()-parseInt(c)>5184e6){y=yield e();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),y}if(!l){var p=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(p)}return(0,i.Mf)(t,"getProvider_0",0,!0),(0,i.Mf)(t,"getProvider_1",0,!0),(0,i.ZL)(t,-1),s})),p.apply(this,arguments)}},424:(t,e,n)=>{n.d(e,{T:()=>m});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return(p=f((function*(t){var e=new Worker(new URL(n.p+n.u(132),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function m(t){return d.apply(this,arguments)}function d(){return d=f((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=f((function*(){var e,n=[],o=a([[0,11],[1,11]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,c=yield(0,i.Fd)(u.url,t,"getStop_".concat(u.e[0]),"json");n=n.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_stop_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var p=yield e(),m=yield y(p);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(m)),l||(l=!0,s=m),m}if((new Date).getTime()-parseInt(c)>2592e6){p=yield e(),m=yield y(p);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(m)),m}if(!l){var d=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(d)}return(0,i.Mf)(t,"getStop_0",0,!0),(0,i.Mf)(t,"getStop_1",0,!0),(0,i.ZL)(t,-1),s})),d.apply(this,arguments)}},1932:(t,e,n)=>{n.d(e,{L:()=>v});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return(p=f((function*(t){var e=new Worker(new URL(n.p+n.u(332),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function m(t){return d.apply(this,arguments)}function d(){return(d=f((function*(t){var e=new Worker(new URL(n.p+n.u(892),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function v(t){return h.apply(this,arguments)}function h(){return h=f((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=f((function*(){var e,n="",o=a([[0,15],[1,15]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value;n+=(yield(0,i.Fd)(u.url,t,"getSegmentBuffers_".concat(u.e[0]),"xml")),(0,i.ZL)(t,-1)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_segment_buffers_v6_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var p=yield e(),d=yield y(p),v=yield m(d);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(v)),l||(l=!0,s=v),v}if((new Date).getTime()-parseInt(c)>2592e6){p=yield e(),d=yield y(p),v=yield m(d);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(v)),v}if(!l){var h=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(h)}return(0,i.Mf)(t,"getSegmentBuffers_0",0,!0),(0,i.Mf)(t,"getSegmentBuffers_1",0,!0),(0,i.ZL)(t,-1),s})),h.apply(this,arguments)}},2303:(t,e,n)=>{n.d(e,{$Q:()=>a,AS:()=>f,Ov:()=>l,aU:()=>u,eu:()=>y,s$:()=>p,w_:()=>c,zi:()=>s});var r=n(5579);function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if("string"==typeof t){var n=parseInt(t);if(-3===n)return{code:6,text:"末班駛離",time:n};if(-4===n)return{code:5,text:"今日停駛",time:n};if(-2===n)return{code:4,text:"交通管制",time:n};if(-1===n)return{code:3,text:"未發車",time:n};if(0<=n&&n<=10)return{code:2,text:"進站中",time:n};if(10<n&&n<=180)return{code:1,text:(0,r.fU)(n,e),time:n};if(180<n&&n<=250)return{code:.5,text:(0,r.fU)(n,e),time:n};if(250<n)return{code:0,text:(0,r.fU)(n,e),time:n}}return{code:7,text:"發生錯誤",time:-5}}function u(t,e){if(0===e){var n=0,r=0;return 4===t.length&&(n=parseInt(t.substring(0,2)),r=parseInt(t.substring(2,4))),2===t.length&&(r=parseInt(t)),{type:"moment",hours:n,minutes:r}}if(1===e){var i=0,o=0;if(4===t.length){var a=parseInt(t.substring(0,2)),u=parseInt(t.substring(2,4));i=Math.min(a,u),o=Math.max(a,u)}if(2===t.length){var c=parseInt(t);i=c,o=c}return{type:"range",min:i,max:o}}}function c(t,e,n,r,o){var a,u={},c={},f=i(e);try{for(f.s();!(a=f.n()).done;){var l=a.value;c[l.BusID]=l}}catch(t){f.e(t)}finally{f.f()}var s,y=i(t);try{for(y.s();!(s=y.n()).done;){var p=s.value,m={};m.CarType=p.CarType,m.BusStatus=p.BusStatus,m.BusID=p.BusID,m.CarOnStop=p.CarOnStop;var d=parseInt(p.RouteID),v=String(p.BusID),h=!1,g=0;d===r||o.indexOf(d)>-1||d===10*r?(h=!0,g=v.charCodeAt(0)*Math.pow(10,-5)):(h=!1,g=v.charCodeAt(0)),m.onThisRoute=h,m.index=g;var b={};if(c.hasOwnProperty(v)){b=c[v],m.position={latitude:parseFloat(b.Latitude),longitude:parseFloat(b.Longitude)};var w={},S=!1;for(var I in n){var _=n[I];if(_.pid.indexOf(d)>-1){w=_,S=!0;break}}m.RouteName=S?w.n:"未知路線",m.RouteID=S?w.id:null;var T="s_".concat(p.StopID);u.hasOwnProperty(T)||(u[T]=[]),u[T].push(m)}}}catch(t){y.e(t)}finally{y.f()}return u}function f(t,e,n,r){var o,a={},u={},c=i(e);try{for(c.s();!(o=c.n()).done;){var f=o.value;u[f.BusID]=f}}catch(t){c.e(t)}finally{c.f()}var l,s=i(t);try{for(s.s();!(l=s.n()).done;){var y=l.value,p={},m=parseInt(y.StopID),d=parseInt(y.RouteID),v=String(y.BusID);if(!(r.indexOf(m)<0)){p.index=v.charCodeAt(0),p.onThisRoute=!0,p.CarType=y.CarType,p.BusStatus=y.BusStatus,p.BusID=y.BusID,p.CarOnStop=y.CarOnStop;var h={};if(u.hasOwnProperty(v)){h=u[v],p.position={latitude:parseFloat(h.Latitude),longitude:parseFloat(h.Longitude)};var g={},b=!1;for(var w in n){var S=n[w];if(S.pid.indexOf(d)>-1){g=S,b=!0;break}}p.RouteName=b?g.n:"未知路線",p.RouteID=b?g.id:null;var I="s_".concat(m);a.hasOwnProperty(I)||(a[I]=[]),a[I].push(p)}}}}catch(t){s.e(t)}finally{s.f()}return a}function l(t){var e="";switch(t){case"0":e="一般";break;case"1":e="低底盤";break;case"2":e="大復康巴士";break;case"3":e="狗狗友善專車";break;default:e="未知類型"}return e}function s(t){var e="";switch(t){case"0":e="離站";break;case"1":e="進站";break;default:e="未知狀態"}return e}function y(t){var e="";switch(t){case"0":e="正常";break;case"1":e="車禍";break;case"2":e="故障";break;case"3":e="塞車";break;case"4":e="緊急求援";break;case"5":e="加油";break;case"99":e="非營運狀態";break;default:e="未知狀態"}return e}function p(t){var e={},n=l(t.CarType);e.type=n;var r=s(t.CarOnStop),i=y(t.BusStatus);return e.carNumber=t.BusID,e.status={onStop:r,situation:i,text:"".concat(r," | ").concat(i)},e.RouteName=t.RouteName,e.onThisRoute=t.onThisRoute,e.index=t.index,e.position=t.position,e}},4293:(t,e,n)=>{n.d(e,{a:()=>m});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return(p=f((function*(t){var e=new Worker(new URL(n.p+n.u(148),n.b));return yield new Promise((function(n,r){e.onmessage=function(t){n(t.data),e.terminate()},e.onerror=function(t){r(t.message),e.terminate()},e.postMessage(t)}))}))).apply(this,arguments)}function m(t){return d.apply(this,arguments)}function d(){return d=f((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=f((function*(){var e,n=[],o=a([[0,10],[1,10]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,c=yield(0,i.Fd)(u.url,t,"getRoute_".concat(u.e[0]),"json");n=n.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return yield e();var u="bus_route_v2_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var p=yield e(),m=yield y(p);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(m)),l||(l=!0,s=m),m}if((new Date).getTime()-parseInt(c)>864e5){var d=yield e(),v=yield y(d);return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(v)),l||(l=!0,s=v),v}if(!l){var h=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(h)}return(0,i.Mf)(t,"getRoute_0",0,!0),(0,i.Mf)(t,"getRoute_1",0,!0),(0,i.ZL)(t,-1),s})),d.apply(this,arguments)}},6788:(t,e,n)=>{n.d(e,{Fd:()=>s,LQ:()=>d,Mf:()=>m,ZL:()=>v,Zt:()=>h,_M:()=>p,gC:()=>g});var r=n(4750),i=n(5579),o=n(7910);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,c,"next",t)}function c(t){u(o,r,i,a,c,"throw",t)}a(void 0)}))}}var f={},l={};function s(t,e,n,r){return y.apply(this,arguments)}function y(){return y=c((function*(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:15e3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:6e4,f=(new Date).getTime(),l=new Promise((function(t,e){return setTimeout((function(){return e(new Error("Connection timed out"))}),a)})),y=yield Promise.race([fetch(t),l]).catch((function(t){throw m(e,n,0,!0),t}));if(!y.ok)throw new Error("HTTP error! status: ".concat(y.status));for(var p=parseInt(String(y.headers.get("content-length"))),d=0,v=y.body.getReader(),h=[];;){var g=yield new Promise(function(){var t=c((function*(t,e){var n=setTimeout((function(){e(new Error("Loading timed out"))}),u),r=yield v.read(),i=r.done,o=r.value;clearTimeout(n),t(i?{done:i}:{done:i,value:o})}));return function(e,n){return t.apply(this,arguments)}}()).catch((function(t){throw m(e,n,d/p,!0),t})),b=g.done,w=g.value;if(b)break;h.push(w),d+=w.length,m(e,n,d/p,!1)}for(var S=new Uint8Array(d),I=0,_=0,T=h;_<T.length;_++){var L=T[_];S.set(L,I),I+=L.length}var A=(new Date).getTime();yield(0,o.Vi)(e,{end_time:A,start_time:f,content_length:p},d<p);var O=new Blob([S]),x=new Blob([O.slice(0,O.size)],{type:"application/gzip"}),C=yield x.arrayBuffer(),P=yield(0,r.h)(C);return"json"===i?/^\<\!doctype html\>/.test(P)?yield s(t.replace("https://tcgbusfs.blob.core.windows.net/","https://erichsia7.github.io/bus-alternative-static-apis/"),e,n,i,a,u):JSON.parse(P):"xml"===i?P:void 0})),y.apply(this,arguments)}function p(t){if(f.hasOwnProperty(t)&&"object"===a(f[t])){var e=0,n=0;for(var r in f[t])f[t][r].expel||(e+=f[t][r].total,n+=f[t][r].progress);var i=Math.min(Math.max(n/e,0),1);return i===1/0||isNaN(i)?1:i}return 1}function m(t,e,n,r){f.hasOwnProperty(t)||(f[t]={});var i="u_".concat(e);f[t].hasOwnProperty(i)?r?f[t][i].expel=!0:(f[t][i].expel=!1,f[t][i].progress=n):f[t][i]={expel:!1,progress:n,total:1}}function d(t){f.hasOwnProperty(t)&&delete f[t]}function v(t,e){l.hasOwnProperty(t)||(l[t]=0);var n=0;"string"==typeof e&&(n=(0,i.Zn)(e)),n>l[t]&&(l[t]=n)}function h(t){return l.hasOwnProperty(t)?1*l[t]:0}function g(t){l.hasOwnProperty(t)&&delete l[t]}},8201:(t,e,n)=>{n.d(e,{Y:()=>y});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return p=f((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=f((function*(){var e,n=[],o=a([[0,12],[1,12]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,c=yield(0,i.Fd)(u.url,t,"getSemiTimeTable_".concat(u.e[0]),"json");n=n.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_semi_timetable_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var y=yield e();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),l||(l=!0,s=y),y}if((new Date).getTime()-parseInt(c)>12096e5){y=yield e();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),y}if(!l){var p=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(p)}return(0,i.Mf)(t,"getSemiTimeTable_0",0,!0),(0,i.Mf)(t,"getSemiTimeTable_1",0,!0),(0,i.ZL)(t,-1),s})),p.apply(this,arguments)}},8671:(t,e,n)=>{n.d(e,{s:()=>y});var r=n(3153),i=n(6788),o=n(4311);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var l=!1,s={};function y(t){return p.apply(this,arguments)}function p(){return p=f((function*(t){function e(){return n.apply(this,arguments)}function n(){return n=f((function*(){var e,n=[],o=a([[0,14],[1,14]].map((function(t){return{url:(0,r.y)(t[0],t[1]),e:t}})));try{for(o.s();!(e=o.n()).done;){var u=e.value,c=yield(0,i.Fd)(u.url,t,"getTimeTable_".concat(u.e[0]),"json");n=n.concat(c.BusInfo),(0,i.ZL)(t,c.EssentialInfo.UpdateTime)}}catch(t){o.e(t)}finally{o.f()}return n})),n.apply(this,arguments)}var u="bus_timetable_cache",c=yield(0,o.Ct)(0,"".concat(u,"_timestamp"));if(null===c){var y=yield e();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),l||(l=!0,s=y),y}if((new Date).getTime()-parseInt(c)>12096e5){y=yield e();return yield(0,o.mL)(0,"".concat(u,"_timestamp"),(new Date).getTime()),yield(0,o.mL)(0,"".concat(u),JSON.stringify(y)),y}if(!l){var p=yield(0,o.Ct)(0,"".concat(u));l=!0,s=JSON.parse(p)}return(0,i.Mf)(t,"getTimeTable_0",0,!0),(0,i.Mf)(t,"getTimeTable_1",0,!0),(0,i.ZL)(t,-1),s})),p.apply(this,arguments)}}}]);
//# sourceMappingURL=77f99d1f533a4d29e687.js.map