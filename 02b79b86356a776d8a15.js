!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,(()=>(()=>{"use strict";var t,e={3648:(t,e,r)=>{function n(t){return document.querySelector(t)}function o(t){return document.querySelectorAll(t)}function a(t,e){return t.querySelector(e)}function i(t,e){return t.querySelectorAll(e)}function u(t,e){for(var r=[],n=t.nextElementSibling;n;)n.classList.contains(e)&&r.push(n),n=n.nextElementSibling;return r}r.d(e,{aI:()=>a,bv:()=>n,e0:()=>o,jg:()=>i,ji:()=>u})},4750:(t,e,r)=>{r.d(e,{h:()=>f});var n=r(8024);function o(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var u,c={};if("undefined"!=typeof SharedWorker){var s=new SharedWorker(new URL(r.p+r.u(82),r.b));(u=s.port).start()}else{var l=new Worker(new URL(r.p+r.u(701),r.b));u=l}function f(t){return d.apply(this,arguments)}function d(){var t;return t=function*(t){var e=(0,n.zx)("t");return yield new Promise((function(r,n){c[e]=r,u.onerror=function(t){n(t.message)},u.postMessage([t,e])}))},d=function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function u(t){o(i,n,a,u,c,"next",t)}function c(t){o(i,n,a,u,c,"throw",t)}u(void 0)}))},d.apply(this,arguments)}u.onmessage=function(t){var e=a(t.data,2),r=e[0],n=e[1];c[n]&&(c[n](r),delete c[n])},u.onerror=function(t){console.error(t.message)}},4781:(t,e,r)=>{function n(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];if("string"==typeof t)for(var n=t.length,o=0;o<n;o++){var a=t.charCodeAt(o);(r.indexOf(a)<0||!e)&&r.push(a)}return r}function o(t){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(t)}r.d(e,{B5:()=>n,iO:()=>o})},5428:(t,e,r)=>{function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e,r,n,o,a){var i=r+a,u=(r*t+a*n)/i,c=(r*(Math.pow(e,2)+Math.pow(t,2))+a*(Math.pow(o,2)+Math.pow(n,2)))/i-Math.pow(u,2);return Math.sqrt(c)}function i(t,e,r,n,o,i,u,c,s,l,f,d){var h=o+f;return(o*(r*n*i+t*e)+f*(s*l*d+u*c)-h*((o*t+f*u)/h)*((o*e+f*c)/h))/(h*a(t,r,o,u,s,f)*a(e,n,o,c,l,f))}function u(t){var e=Math.hypot(t),r=[];if(e>0){var o,a=1/e,i=n(t);try{for(i.s();!(o=i.n()).done;){var u=o.value;r.push(u*a)}}catch(t){i.e(t)}finally{i.f()}return r}return t}function c(t){var e=t.length;if(0===e)return[0,0];for(var r=1/0,n=-1/0,o=e-1;o>=0;o--){var a=t[o];a>n&&(n=a),a<r&&(r=a)}return[r,n]}r.d(e,{Ck:()=>u,DJ:()=>c,Hi:()=>i,VY:()=>a})},5579:(t,e,r)=>{function n(){var t=new Date,e=t.getDay(),r=t.getDate()-e,n=new Date;return n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function o(t,e,r,n){var o=new Date;return o.setDate(1),o.setMonth(0),o.setHours(r),o.setMinutes(n),o.setSeconds(0),o.setMilliseconds(0),o.setFullYear(t.getFullYear()),o.setMonth(t.getMonth()),o.setDate(t.getDate()),o.setDate(o.getDate()+e),o}function a(t){var e=t.match(/[0-9\.]*/gm);if(e){var r=parseInt(e[0]),n=parseInt(e[2]),o=parseInt(e[4]),a=parseInt(e[6]),i=parseInt(e[8]),u=parseInt(e[10]),c=new Date;return c.setDate(1),c.setMonth(0),c.setFullYear(r),c.setMonth(n-1),c.setDate(o),c.setHours(a),c.setMinutes(i),c.setSeconds(u),c.getTime()}return 0}function i(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,t.getFullYear()).replaceAll(/M{2,2}/g,String(t.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(t.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(t.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(t.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(t.getSeconds()).padStart(2,"0"))}function u(t){var e=t.getTime(),r=Math.floor(((new Date).getTime()-e)/1e3),n=Math.floor(r/31536e3);return n>=1?`${n}年前`:(n=Math.floor(r/2592e3))>=1?`${n}個月前`:(n=Math.floor(r/86400))>=1?`${n}天前`:(n=Math.floor(r/3600))>=1?`${n}小時前`:(n=Math.floor(r/60))>=1?`${n}分鐘前`:r>0?`${r}秒前`:"現在"}function c(t,e){var r=0|t;switch(e){case 0:return`${r}秒`;case 1:return[String((r-r%60)/60),String(r%60)].map((function(t){return t.padStart(2,"0")})).join(":");case 2:return`${r/60|0}分`;case 3:if(r>=3600)return`${parseFloat((r/3600).toFixed(1))}時`;if(60<=r&&r<3600)return`${r/60|0}分`;if(r<60)return`${r}秒`;break;default:return"--"}}function s(t){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][t]}function l(t){return s(parseInt(t)-1)}function f(t){return`${String(t.hours).padStart(2,"0")}:${String(t.minutes).padStart(2,"0")}`}function d(t,e,r){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(e-1),n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}r.d(e,{$T:()=>i,HN:()=>u,P$:()=>n,S1:()=>o,Zn:()=>a,fU:()=>c,kd:()=>s,mr:()=>l,pn:()=>f,uP:()=>d})},6141:(t,e,r)=>{function n(t){return getComputedStyle(document.documentElement).getPropertyValue(t)}r.d(e,{t:()=>n})},7307:(t,e,r)=>{r.d(e,{O:()=>o});var n=r(2754);function o(t){return new n._k({issuer:"Bus",label:"Bus",algorithm:"SHA256",digits:8,period:10,secret:t}).generate()}},8913:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}r.d(e,{M:()=>i});var i=function(){return t=function t(e,r,n,o){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"number"!=typeof n)throw new Error("Interval must be a number.");if("number"!=typeof o)throw new Error("Retry interval must be a number.");if("function"!=typeof e)throw new Error("Callback must be a function.");if("AsyncFunction"!==e.constructor.name)throw new Error("Callback function must be asynchronous.");if("function"!=typeof r)throw new Error("Error callback must be a function.");this.interval=n,this.retryInterval=o,this.callback=e,this.errorCallback=r,this.started=!1},(e=[{key:"runImmediately",value:function(){this.callback()}},{key:"execute",value:function(){this.started&&setTimeout(function(){this.callback().then(function(){this.started&&this.execute()}.bind(this)).catch(function(){this.errorCallback(),setTimeout(function(){this.started&&this.execute()}.bind(this),Math.max(0,this.retryInterval-this.interval))}.bind(this))}.bind(this),this.interval)}},{key:"start",value:function(){this.started||(this.started=!0,this.execute())}},{key:"stop",value:function(){this.started&&(this.started=!1)}},{key:"updateInterval",value:function(t){if("number"!=typeof t)throw new Error("Interval must be a number.");this.interval=t}},{key:"updateRetryInterval",value:function(t){if("number"!=typeof t)throw new Error("Retry interval must be a number.");this.retryInterval=t}},{key:"updateCallback",value:function(t){if("function"!=typeof t)throw new Error("Callback must be a function.");if("AsyncFunction"!==t.constructor.name)throw new Error("Callback function must be asynchronous.");this.callback=t}},{key:"updateErrorCallback",value:function(t){if("function"!=typeof t)throw new Error("Error callback must be a function.");this.errorCallback=t}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}()},9469:(t,e,r)=>{r.d(e,{_:()=>i,i:()=>u});var n=r(8134),o=r(4690),a=r(3030);function i(){var t=new URL(location.href).searchParams.get("permalink");if(null!==t){var e=String(t);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(e)){var r=e.split(/[\@\~]/);switch(parseInt(r[0])){case 0:(0,n.Rk)(parseInt(r[1],16)).then((function(t){!1!==t?(0,o.SR)(t.id,t.pid):(0,n.k9)(r[2]).then((function(t){t.length>0&&(0,o.SR)(t[0].id,t[0].pid)}))}));break;case 1:(0,a.so)(r[1])}}}}function u(t,e){var r=new URL("https://erichsia7.github.io/bus/");switch(t){case 0:r.searchParams.set("permalink",`0@${parseInt(e.id).toString(16)}~${e.name}`);break;case 1:r.searchParams.set("permalink",`1@${e.hash}`)}return decodeURIComponent(r.toString())}}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var a=r[t]={exports:{}};return e[t].call(a.exports,a,a.exports,n),a.exports}n.m=e,t=[],n.O=(e,r,o,a)=>{if(!r){var i=1/0;for(l=0;l<t.length;l++){for(var[r,o,a]=t[l],u=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((t=>n.O[t](r[c])))?r.splice(c--,1):(u=!1,a<i&&(i=a));if(u){t.splice(l--,1);var s=o();void 0!==s&&(e=s)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[r,o,a]},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.u=t=>({82:"2b46b0018b863b906aed",104:"448934bc5de4e34b1f21",106:"9a72447041a5d05fe13d",132:"9bba1682d701e73df680",148:"34ac83d64c50947d7280",211:"33381ff04f60863536bd",332:"8f123608fa91b51f3b52",551:"66d8e01c6acd3992036d",592:"33381ff04f60863536bd",619:"d7498d8da9dc14901aeb",648:"596ffd3accc98afb306f",701:"2b46b0018b863b906aed",892:"7a660f9bb559c5ef1d84",932:"66d8e01c6acd3992036d",960:"2b36763b5f09cd785bd3"}[t]+".js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="./",(()=>{n.b=document.baseURI||self.location.href;var t={677:0,827:0,238:0,325:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var o,a,[i,u,c]=r,s=0;if(i.some((e=>0!==t[e]))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(c)var l=c(n)}for(e&&e(r);s<i.length;s++)a=i[s],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(l)},r=self.webpackChunkbus=self.webpackChunkbus||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var o=n.O(void 0,[790,281,754,343,799,821,327,133,806,150,827,794,238,627,704,466,325,927,687],(()=>n(7084)));return o=(o=n.O(o)).default})()));
//# sourceMappingURL=02b79b86356a776d8a15.js.map