"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[155],{5009(e,t,n){n.d(t,{a:()=>X,b:()=>V,c:()=>B,d:()=>W,e:()=>J,f:()=>U,g:()=>Q});var a=n(8134),i=n(8179),o=n(7968),r=n(8024),c=n(4781),s=n(4884),d=n(6082),u=n(4537),p=n(904),l=n(3030),f=n(9119),v=n(4690),h=[],b=(0,i.c)(".bo"),m=(0,i.e)(b,".co"),g=(0,i.e)(b,".go"),y=(0,i.e)(m,".do #search_input"),k=(0,i.e)(m,".do svg"),L=(0,i.e)(k,'text[component="text"]'),C=(0,i.e)(k,'path[component="cursor"]'),w=(0,i.e)(m,".fo"),A=(0,i.e)(g,".ho"),x=(0,i.e)(g,".lo"),E="400",S="20px",_='"Noto Sans TC", sans-serif',z=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],T=(0,p.d)("head-two-button"),$=T.width,j=T.height,D=!1,F="",M=0;function H(){var e=y.value,t=e.substring(0,e.length-1);y.value=t,P(),G(),N(),(0,p.f)()}function q(){y.value="",P(),G(),N(),(0,p.f)()}function O(e){e.preventDefault(),y.focus(),(0,p.f)()}function R(){!function(){if(!D){D=!0;var e=new DocumentFragment;for(var t of z)for(var n of t){var a=document.createElement("button");a.classList.add("mo");var i=(0,r.k)()?"touchstart":"mousedown";switch(n){case"刪除":a.addEventListener(i,H),a.appendChild((0,u.b)("backspace"));break;case"清空":a.addEventListener(i,q),a.innerText=n;break;case"鍵盤":a.addEventListener(i,O),a.appendChild((0,u.b)("keyboard"));break;default:a.addEventListener(i,function(e){return function(){var t,n;t=e,n=`${y.value}${t}`,y.value=n,P(),G(),N(),(0,p.f)()}}(n)),a.innerText=n}e.appendChild(a)}x.append(e)}}(),x.setAttribute("displayed","true"),G()}function B(){y.addEventListener("paste",function(){N(),P()}),y.addEventListener("cut",function(){N(),P()}),y.addEventListener("selectionchange",function(){N(),P()}),document.addEventListener("selectionchange",function(){N(),P()}),y.addEventListener("keyup",function(){N(),P()}),y.addEventListener("scroll",function(){N()})}function I(){return parseInt(w.getAttribute("type"))}function N(){var e=y.scrollLeft,t=y.value,n=y.selectionStart,a=y.selectionEnd,i=0===t.length,c=i?"搜尋路線、地點、公車":t,s=i?0:n,d=s!==(i?0:a),u=(0,o.c)(c,E,S,_),p=(0,o.c)(c.substring(0,s),E,S,_),l=-1*e,f=u[0]+(j-u[2])/2;L.textContent=c,L.setAttribute("transform",`translate(${l} ${f})`),C.setAttribute("transform",`translate(${i?1:Math.max(Math.min(p[1]+l,$-1),1)} 0)`),L.setAttribute("empty",(0,r.a)(i)),C.setAttribute("selection",(0,r.a)(d)),y.setAttribute("selection",(0,r.a)(d))}function G(){var e=y.value,t=e.length,n=(0,o.c)(e,E,S,_);y.setSelectionRange(t,t),y.scrollTo({left:n[1]-$})}function J(){T=(0,p.d)("head-two-button"),$=T.width,j=T.height,k.setAttribute("viewBox",`0 0 ${$} ${j}`),G(),N()}function K(){var e=(0,i.a)();e.classList.add("io");var t=(0,i.a)();t.classList.add("ko");var n=(0,i.a)();return n.classList.add("jo"),n.appendChild((0,u.a)()),e.appendChild(n),e.appendChild(t),e}function P(){var e=["route","location_on","directions_bus"];function t(t,n,a){function o(t,n){var a=(0,i.e)(n,".jo");(0,u.c)(a,e[t.item.type])}function r(e,t){(0,i.e)(t,".ko").innerText=e.item.n}function c(e,t){switch(e.item.type){case 0:t.onclick=function(){(0,v.d)(e.item.id,e.item.pid)};break;case 1:t.onclick=function(){(0,l.d)(e.item.hash)};break;case 2:t.onclick=function(){(0,s.d)(e.item.id)}}}a?(n.item.type!==a.item.type&&o(n,t),n.item.id!==a.item.id&&(r(n,t),c(n,t))):(o(n,t),r(n,t),c(n,t))}var n=I(),o=y.value;if(!(0,c.a)(o)&&(o!==F||n!==M)){var r=(0,a.b)(o,n,30),d=r.length,p=Array.from((0,i.d)(A,".io")),f=p.length;if(d!==f){var b=f-d;if(b<0){for(var m=new DocumentFragment,g=0;g>b;g--){var k=K();m.appendChild(k),p.push(k)}A.appendChild(m)}else if(b>0)for(var L=f-1,C=f-b-1;L>C;L--)p[L].remove(),p.splice(L,1)}for(var w=0;w<d;w++){var x=h[w],E=r[w],S=p[w];t(S,E,x||null)}h=r}F=o,M=n}function Q(){var e=I(),t=-1;t=e>=-1&&e<2?e+1:-1;(0,u.c)(w,["filter_list","route","location_on","directions_bus"][t+1]),w.setAttribute("type",t.toString()),P()}function U(){b.setAttribute("displayed","true")}function V(){b.setAttribute("displayed","false")}function W(){d.a?((0,p.c)("Search"),U(),R(),(0,a.a)(),(0,p.b)()):(0,f.a)("download_for_offline","資料還在下載中")}function X(){x.setAttribute("displayed","false"),V(),(0,p.i)(),(0,p.e)("Search")}},6104(e,t,n){n.d(t,{a:()=>A,b:()=>x,c:()=>C,d:()=>y,e:()=>S,f:()=>w,g:()=>T,h:()=>L,i:()=>z,j:()=>_});var a=n(467),i=n(5976),o=n(5427),r=n(3459),c=n(3251),s=n(4311),d=n(8179),u=n(8024),p=n(251),l=n(4537),f=n(904),v=n(9119),h=(0,d.c)(".no"),b=(0,d.e)(h,".xo"),m=(0,d.e)(b,".zo");function g(e){var t=(0,d.a)();t.classList.add("ap"),t.setAttribute("type",e.type);var n=(0,d.a)();n.classList.add("cp");var a=document.createElement("span");a.appendChild((0,l.b)(e.icon)),n.appendChild(a);var i=(0,d.a)();i.classList.add("dp"),i.innerText=e.name;var o=(0,d.a)();o.classList.add("fp"),o.innerText=e.status;var r=(0,d.a)();r.classList.add("gp");var c=document.createElement("span");return c.appendChild((0,l.b)("arrow_forward_ios")),r.appendChild(c),"function"==typeof e.action?t.onclick=function(){e.action()}:"string"==typeof e.action&&t.setAttribute("onclick",e.action),t.appendChild(n),t.appendChild(i),t.appendChild(o),t.appendChild(r),t}function y(){return k.apply(this,arguments)}function k(){return(k=(0,a.a)(function*(){var e=yield(0,r.f)();m.innerHTML="";var t=new DocumentFragment;for(var n of e){var a=g(n);t.appendChild(a)}m.append(t)})).apply(this,arguments)}function L(){h.setAttribute("displayed","true")}function C(){h.setAttribute("displayed","false")}function w(){(0,f.c)("Settings"),L(),y(),(0,f.b)()}function A(){C(),(0,f.i)(),(0,f.e)("Settings")}function x(){return E.apply(this,arguments)}function E(){return(E=(0,a.a)(function*(){(0,v.a)("manufacturing","資料匯出中");var e=yield(0,i.a)();(0,p.a)(e,"application/json","bus-export.json")})).apply(this,arguments)}function S(){var e=(0,u.c)(),t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/json"),t.setAttribute("name",e),t.id=e,t.classList.add("lp"),t.addEventListener("change",function(t){if(0===t.target.files.length)(0,d.c)(`body #${e}`).remove();else{var n=t.target.files[0],a=new FileReader;a.onload=function(t){var n=t.target.result;(0,o.a)(n).then(function(t){t?(0,v.a)("check_circle","已匯入資料"):(0,v.a)("error","無法匯入資料"),(0,d.c)(`body #${e}`).remove()})},a.readAsText(n)}},{once:!0}),t.addEventListener("cancel",function(){(0,d.c)(`body #${e}`).remove()},{once:!0}),document.body.append(t),(0,d.c)(`body #${e}`).click()}function _(){var e=(0,c.e)();window.open(e)}function z(){window.open("https://github.com/EricHsia7/bus")}function T(){(0,s.a)().then(function(e){switch(e){case"granted":(0,v.a)("check_circle","已開啟永久儲存");break;case"denied":(0,v.a)("cancel","永久儲存權限已被拒絕");break;case"unsupported":(0,v.a)("warning","此瀏覽器不支援永久儲存");break;default:(0,v.a)("error","發生錯誤")}})}},6166(e,t,n){n.d(t,{a:()=>g,b:()=>b,c:()=>m,d:()=>h});var a=n(3459),i=n(8179),o=n(904),r=n(6104),c=(0,i.c)(".oo"),s=(0,i.e)(c,".yo"),d=(0,i.e)(s,"._o"),u=(0,i.e)(s,".kp"),p=(0,i.e)(c,".qo"),l=(0,i.e)(p,".wo"),f=(0,i.e)(p,".to");function v(e,t,n){var o=(0,i.a)();o.classList.add("bp");var r=(0,i.a)();r.classList.add("ep"),r.innerText=t.name;var c=(0,i.a)();c.classList.add("hp");var s=document.createElement("input");return s.type="checkbox",s.checked=e.option===n,s.onclick=function(t){!function(e,t,n){var o=(0,i.b)('.oo .yo ._o .bp .hp input[type="checkbox"]');for(var r of o)r.checked=!1;var c=e.target;c.checked=!0,(0,a.a)(t,n)}(t,e.key,n)},c.appendChild(s),o.appendChild(r),o.appendChild(c),o}function h(){c.setAttribute("displayed","true")}function b(){c.setAttribute("displayed","false")}function m(e){(0,o.c)("SettingsOptions"),h(),function(e){var t=(0,a.c)(e);f.onclick=function(){g(),(0,r.d)()},l.innerText=t.name,u.innerText=t.description,d.innerHTML="";var n=new DocumentFragment,i=0;for(var o of t.options){var c=v(t,o,i);n.appendChild(c),i+=1}d.append(n)}(e),(0,o.b)()}function g(){b(),(0,o.i)(),(0,o.e)("SettingsOptions")}},2994(e,t,n){n.d(t,{a:()=>L,b:()=>y,c:()=>k,d:()=>g});var a=n(467),i=n(4225),o=n(3459),r=n(8179),c=n(8024),s=n(904),d=[],u=!1,p=!1,l=(0,r.c)(".mp"),f=(0,r.e)(l,".qp"),v=(0,r.e)(f,".rp");function h(){var e=(0,r.a)();e.classList.add("sp");var t=(0,r.a)();t.classList.add("tp");var n=(0,r.a)();return n.classList.add("up"),e.appendChild(t),e.appendChild(n),e}function b(e,t,n){function a(e,a,i){function o(e,t){(0,r.e)(e,".up").innerText=t.size}function s(e,t){(0,r.e)(e,".tp").innerText=t.category.name}function d(e,t){e.setAttribute("animation",(0,c.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,c.a)(t))}i?(a.category.key!==i.category.key&&(s(e,a),o(e,a)),a.size!==i.size&&o(e,a),u!==n&&d(e,n),p!==t&&l(e,t)):(o(e,a),s(e,a),d(e,n),l(e,t))}var i=[];for(var o in e.categorizedSizes){var s=e.categorizedSizes[o];i.push(s)}var l=i.length,f=Array.from((0,r.d)(v,".sp")),b=f.length;if(l!==b){var m=b-l;if(m<0){for(var g=new DocumentFragment,y=0;y>m;y--){var k=h();g.appendChild(k),f.push(k)}v.appendChild(g)}else if(m>0)for(var L=b-1,C=b-m-1;L>C;L--)f[L].remove(),f.splice(L,1)}for(var w=0;w<l;w++){var A=d[w],x=i[w],E=f[w];a(E,x,A||null)}d=i,p=t,u=n}function m(){return(m=(0,a.a)(function*(){var e=(0,o.b)("playing_animation");!function(){for(var e=(0,o.b)("playing_animation"),t=(0,s.d)("window").height,n=Math.min(7,Math.floor(t/55)+2),a={categorizedSizes:{},totalSize:0},i=0;i<n;i++){var r=`store-${i}`;a.categorizedSizes[r]={category:{name:"",key:r},size:`size-${i}`}}b(a,!0,e)}(),b(yield(0,i.a)(),!1,e)})).apply(this,arguments)}function g(){l.setAttribute("displayed","true")}function y(){l.setAttribute("displayed","false")}function k(){(0,s.c)("Storage"),g(),function(){m.apply(this,arguments)}(),(0,s.b)()}function L(){y(),(0,s.i)(),(0,s.e)("Storage")}},1844(){},1818(){},9590(){},2239(){},1077(){},3381(){},9351(){},9205(){},7037(){},8073(){},3425(){},6171(){},7113(){},928(){},4800(){}}]);
//# sourceMappingURL=d5c7dae35eacdc721367.js.map