"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[36],{904:(e,t,n)=>{n.d(t,{AE:()=>k,BM:()=>I,WR:()=>y,Z_:()=>w,f1:()=>C,gO:()=>E,kr:()=>A,l$:()=>L});var a=n(8024),r=n(3648),i=n(4927),o=n(6052),d=n(9333),s=n(8379),c=n(5693),l=n(7891),u=n(7908),f=n(5009),v=n(6104),h=(0,r.bv)(".ng"),p=(0,r.bv)(".og"),m=100,g=(new Date).getTime(),b=["Home"];function y(e){var t=b.length;b[t-1]!==e&&b.push(e)}function A(e){if(b.indexOf(e)>-1){var t=b.length;b[t-1]===e&&b.pop()}}function w(){var e=b.length;if(e>1)switch(b[e-2]){case"Home":case"FolderIconSelector":case"Location":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.z1)();break;case"FolderEditor":(0,d.I6)();break;case"FolderManager":(0,s.m)();break;case"Search":(0,f.Bb)();break;case"Settings":(0,v.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,i.F)();break;case"RegisterNotification":(0,u.hy)()}}function L(){var e=b.length;if(e>1){var t=b[e-2];switch(b.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.pd)();break;case"FolderEditor":(0,d.uy)();break;case"FolderManager":(0,s.g)();break;case"Search":(0,f.rf)();break;case"Settings":(0,v.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,i.$)();break;case"RegisterNotification":(0,u.XG)()}}}function I(){var e=0;(0,a.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,r.bv)(".ng svg.pg").style.setProperty("--qg",`${e}px`)}function k(e){function t(){h.classList.add("rg"),h.addEventListener("animationend",(function(){h.setAttribute("displayed","false"),h.classList.remove("rg"),"function"==typeof e&&e()}),{once:!0})}var n=(new Date).getTime();n-g<m?setTimeout(t,Math.max(1,n-g)):t()}function C(){p.setAttribute("displayed","true")}function E(e){var t=0,n=0,a=window.innerWidth,r=window.innerHeight;switch(e){case"window":t=a,n=r;break;case"head":t=a,n=55;break;case"head-one-button":t=a-55,n=55;break;case"head-two-button":t=a-110,n=55;break;case"route-details-canvas":t=a-20-20,n=1440;break;case"route-bus-arrival-time-chart":t=a-45-15-20,n=75;break;case"location-bus-arrival-time-chart":t=a-30-20,n=75;break;default:t=0,n=0}return{width:t,height:n}}},3030:(e,t,n)=>{n.d(t,{eS:()=>ce,s_:()=>V,so:()=>se});var a=n(5767),r=n(9566),i=n(2757),o=n(4636),d=n(5314),s=n(3459),c=n(7968),l=n(8024),u=n(3648),f=n(5579),v=n(4537),h=n(904),p=n(9119),m=n(3041),g=n(752);function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function A(e,t,n,a,r,i,o){try{var d=e[i](o),s=d.value}catch(e){return void n(e)}d.done?t(s):Promise.resolve(s).then(a,r)}var w=(0,u.bv)(".sg"),L=(0,u.aI)(w,".tg"),I=(0,u.aI)(L,".ug"),k=(0,u.aI)(w,".vg"),C=(0,u.aI)(L,".wg"),E=(0,u.aI)(C,".xg"),x=(0,u.aI)(L,".yg"),_=(0,u.aI)(x,".zg"),S=(0,u.aI)(L,"._g .ah"),T={},M=!0,$=!1,H=0,P=0,Z=0,j={},F=0,z=!1,N=1e4,R=15e3,O=5e3,B=15e3,D=!0,W=0,q=0,U="",Q=!1,X=!1,J=!1,G="",K=20;function V(){k.addEventListener("touchstart",(function(){H=Math.round(k.scrollLeft/F)}),{passive:!0}),k.addEventListener("scroll",(function(e){z=!0;var t=e.target.scrollLeft/F;P=t>H?H+1:H-1;var n=j[`g_${H}`]||{width:0,offset:0},a=j[`g_${P}`]||{width:0,offset:0},r=n.width+(a.width-n.width)*Math.abs(t-H),i=-1*(n.offset+(a.offset-n.offset)*Math.abs(t-H))+.5*F-.5*r;Y(Z,i,r-K,t),t===P&&(H=Math.round(k.scrollLeft/F),z=!1)}),{passive:!0})}function Y(e,t,n,a){k.style.setProperty("--bh",e.toString()),_.style.setProperty("--ch",n.toString()),E.style.setProperty("--dh",`${t.toFixed(5)}px`),E.style.setProperty("--eh",a.toFixed(5))}function ee(e){var t=e;if(Q){var n=t.detail.progress-1;S.style.setProperty("--hh",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,ee)}function te(){var e=(0,l.zx)(),t=document.createElement("div");t.classList.add("ih"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var n=document.createElement("div");n.classList.add("jh");var a=document.createElement("div");a.classList.add("kh");var r=document.createElement("div");r.classList.add("lh"),r.setAttribute("code","-1"),r.setAttribute("displayed","false");var i=document.createElement("div");i.classList.add("mh"),i.setAttribute("code","-1"),i.setAttribute("displayed","true"),a.appendChild(r),a.appendChild(i);var o=document.createElement("div");o.classList.add("nh");var d=document.createElement("div");d.classList.add("oh");var s=document.createElement("div");s.classList.add("ph");var c=document.createElement("div");c.classList.add("qh");var f=document.createElement("div");f.classList.add("_a"),f.setAttribute("code","0"),f.setAttribute("displayed","false");var h=document.createElement("div");h.classList.add("ab"),h.setAttribute("code","0"),h.setAttribute("displayed","true"),c.appendChild(f),c.appendChild(h);var p=document.createElement("div");p.classList.add("rh"),p.innerHTML=(0,v.Z)("keyboard_arrow_down"),p.onclick=function(){!function(e){var t=(0,u.aI)(k,`.zh .bi .ih#${e}`),n=(0,u.aI)(t,".th"),a=t.parentElement,r=(0,u.ji)(t,"ih"),i=r.length,o=a.getBoundingClientRect(),d=t.getBoundingClientRect(),s=d.top-o.top,c="true"===t.getAttribute("stretched"),l="true"===t.getAttribute("animation");if(l){var f=c?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--_i",`${s}px`);for(var v=0;v<i;v++){var h=r[v];h.setAttribute("push-direction",f),h.setAttribute("push-state","1")}t.addEventListener("transitionend",(function(){for(var e=0;e<i;e++){var n=r[e];n.setAttribute("push-direction","0"),n.setAttribute("push-state","0")}t.setAttribute("stretching","false")}),{once:!0}),t.addEventListener("transitionstart",(function(){for(var e=0;e<i;e++){r[e].setAttribute("push-state","2")}}),{once:!0})}c?(l?n.addEventListener("transitionend",(function(){n.setAttribute("displayed","false")}),{once:!0}):n.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(n.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}(e)};var b=document.createElement("div");b.classList.add("sh"),s.appendChild(c),s.appendChild(p),s.appendChild(b),n.appendChild(a),n.appendChild(o),n.appendChild(d),n.appendChild(s);var y=document.createElement("div");y.classList.add("th"),y.setAttribute("displayed","false");var A=document.createElement("div");A.classList.add("uh");var w=document.createElement("div");w.classList.add("vh"),w.setAttribute("highlighted","true"),w.setAttribute("type","tab"),w.setAttribute("code","0");var L=document.createElement("div");L.classList.add("wh"),L.innerHTML=(0,v.Z)("directions_bus"),w.appendChild(L),w.appendChild(document.createTextNode("公車")),w.onclick=function(){le(e,0)};var I=document.createElement("div");I.classList.add("vh"),I.setAttribute("highlighted","false"),I.setAttribute("type","tab"),I.setAttribute("code","1");var C=document.createElement("div");C.classList.add("wh"),C.innerHTML=(0,v.Z)("departure_board"),I.appendChild(C),I.appendChild(document.createTextNode("抵達時間")),I.onclick=function(){le(e,1)};var E=document.createElement("div");E.classList.add("vh"),E.setAttribute("highlighted","false"),E.setAttribute("type","save-to-folder");var x=document.createElement("div");x.classList.add("wh"),x.innerHTML=(0,v.Z)("folder"),E.appendChild(x),E.appendChild(document.createTextNode("儲存")),E.onclick=function(){(0,m.BI)("stop-on-location",[e,null,null])};var _=document.createElement("div");_.classList.add("vh"),_.setAttribute("highlighted","false"),_.setAttribute("type","schedule-notification"),_.setAttribute("enabled","true");var S=document.createElement("div");S.classList.add("wh"),S.innerHTML=(0,v.Z)("notifications"),_.appendChild(S),_.appendChild(document.createTextNode("到站通知")),_.onclick=function(){(0,g.Ho)("stop-on-location",[e,null,null,null])},A.appendChild(w),A.appendChild(I),A.appendChild(E),A.appendChild(_);var T=document.createElement("div");T.classList.add("xh"),T.setAttribute("displayed","true");var M=document.createElement("div");return M.classList.add("yh"),M.setAttribute("displayed","false"),y.appendChild(A),y.appendChild(T),y.appendChild(M),t.appendChild(n),t.appendChild(y),{element:t,id:e}}function ne(){var e=document.createElement("div");e.classList.add("zh");var t=document.createElement("div");t.classList.add("_h");var n=document.createElement("div");n.classList.add("ai"),t.appendChild(n);var a=document.createElement("div");return a.classList.add("bi"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function ae(){var e=document.createElement("div");e.classList.add("di");var t=document.createElement("div");t.classList.add("ei");var n=document.createElement("div");return n.classList.add("fi"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function re(e,t,n){function a(e,a,i){function d(e,t,n){var a=e.getBoundingClientRect(),r=a.top,i=a.left,o=a.bottom,d=a.right,s=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".qh"),f=(0,u.aI)(l,"._a"),v=(0,u.aI)(l,".ab");f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,n&&o>0&&r<c&&d>0&&i<s?(v.addEventListener("animationend",(function(){v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,v.classList.remove("kb"),f.setAttribute("displayed","false")}),{once:!0}),f.setAttribute("displayed","true"),v.classList.add("kb")):(v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text)}function s(e,t,n){var a=e.getBoundingClientRect(),r=a.top,i=a.left,o=a.bottom,d=a.right,s=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".kh"),f=(0,u.aI)(l,".lh"),v=(0,u.aI)(l,".mh");f.setAttribute("code",t.ranking.code.toString()),f.innerText=t.ranking.text,n&&o>0&&r<c&&d>0&&i<s?(v.addEventListener("animationend",(function(){v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,v.classList.remove("gi"),f.setAttribute("displayed","false")}),{once:!0}),f.setAttribute("displayed","true"),v.classList.add("gi")):(v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text)}function c(e,t){(0,u.aI)(e,".nh").innerText=t.route_direction}function h(e,t){(0,u.aI)(e,".oh").innerText=t.route_name}function p(e,t){(0,u.aI)(e,".xh").innerHTML=0===t.buses.length?'<div class="hi">目前沒有公車可顯示</div>':t.buses.map((function(e){return`<div class="ii" on-this-route="${e.onThisRoute}"><div class="ji"><div class="ki">${(0,v.Z)("directions_bus")}</div><div class="li">${e.carNumber}</div></div><div class="mi"><div class="ni">路線：${e.RouteName}</div><div class="oi">狀態：${e.status.text}</div><div class="pi">類型：${e.type}</div></div></div>`})).join("")}function b(e,t){(0,u.aI)(e,".yh").innerHTML=0===t.busArrivalTimes.length?'<div class="qi">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map((function(e){return`<div class="ri"><div class="si"><div class="ti">${(0,v.Z)("calendar_view_day")}</div><div class="ui">${e.personalSchedule.name}</div><div class="vi">週${(0,f.kd)(e.day).name} ${(0,f.pn)(e.personalSchedule.period.start)} - ${(0,f.pn)(e.personalSchedule.period.end)}</div></div><div class="wi">${e.chart}</div></div>`})).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function A(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function w(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}function L(e,t){var n=(0,u.aI)(e,".th"),a=(0,u.aI)(n,".uh"),i=(0,u.aI)(a,'.vh[type="save-to-folder"]');i.onclick=function(){(0,m.BI)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,r.LH)("stop",t.stopId).then((function(e){i.setAttribute("highlighted",(0,l.xZ)(e))}))}function I(e,t){var n=(0,u.aI)(e,".th"),a=(0,u.aI)(n,".uh"),r=(0,u.aI)(a,'.vh[type="schedule-notification"]');r.onclick=function(){(0,g.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var i=(0,o.Zc)(t.stopId);r.setAttribute("highlighted",(0,l.xZ)(i))}null===i?(d(e,a,n),s(e,a,n),c(e,a),h(e,a),p(e,a),b(e,a),y(e,t),A(e,n),w(e,t),L(e,a),I(e,a)):(a.status.time!==i.status.time&&(d(e,a,n),I(e,a)),i.ranking.number===a.ranking.number&&i.ranking.code===a.ranking.code||s(e,a,n),i.stopId!==a.stopId&&(c(e,a),h(e,a),L(e,a)),(0,l.hw)(i.buses,a.buses)||p(e,a),(0,l.hw)(i.busArrivalTimes,a.busArrivalTimes)||b(e,a),n!==M&&A(e,n),t!==$&&(y(e,t),w(e,t)))}function i(e,a,r){function i(e,t){(0,u.aI)(e,".ei").innerHTML=(0,v.Z)(t.icon)}function o(e,t){(0,u.aI)(e,".fi").innerHTML=t.value}function d(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function s(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}null===r?(i(e,a),o(e,a),d(e,n),s(e,t)):((0,l.hw)(r.icon,a.icon)||i(e,a),(0,l.hw)(r.value,a.value)||o(e,a),n!==M&&d(e,n),t!==$&&s(e,t))}var d=(0,h.gO)("window"),s=d.width,p=d.height,b=e.groupQuantity,y=e.itemQuantity,A=e.groupedItems,w=e.groups;Z=b,F=s;for(var L=0,_=0;_<b;_++){var S=(0,c.q_)(w[`g_${_}`].name,500,"17px",'"Noto Sans TC", sans-serif')+K;j[`g_${_}`]={width:S,offset:L},L+=S}var P=-1*j[`g_${H}`].offset+.5*F-.5*j[`g_${H}`].width;z||Y(Z,P,j[`g_${H}`].width-K,H),I.innerHTML=`<span>${e.LocationName}</span>`,I.setAttribute("animation",(0,l.xZ)(n)),I.setAttribute("skeleton-screen",(0,l.xZ)(t)),C.setAttribute("animation",(0,l.xZ)(n)),C.setAttribute("skeleton-screen",(0,l.xZ)(t)),x.setAttribute("skeleton-screen",(0,l.xZ)(t));var N,R=(0,u.jg)(k,".zh").length;if(b!==R){var O=R-b;if(O<0)for(var B=0;B<Math.abs(O);B++){var D=ne();k.appendChild(D.element);var W=(N=void 0,(N=document.createElement("div")).classList.add("ci"),{element:N,id:""});E.appendChild(W.element)}else for(var q=(0,u.jg)(k,".zh"),U=(0,u.jg)(E,".ci"),Q=0;Q<Math.abs(O);Q++){var X=R-1-Q;q[X].remove(),U[X].remove()}}for(var J=(0,u.jg)(k,".zh"),G=0;G<b;G++){var V=`g_${G}`,ee=J[G],re=(0,u.jg)(ee,".bi .ih").length;if(y[V]!==re){var ie=re-y[V];if(ie<0)for(var oe=(0,u.aI)(ee,".bi"),de=0;de<Math.abs(ie);de++){var se=te();oe.appendChild(se.element)}else for(var ce=(0,u.jg)(ee,".bi .ih"),le=0;le<Math.abs(ie);le++){ce[re-1-le].remove()}}var ue=(0,u.jg)((0,u.jg)(k,".zh")[G],"._h .ai .di").length,fe=w[V].properties.length;if(fe!==ue){var ve=ue-fe;if(ve<0)for(var he=(0,u.aI)(ee,"._h"),pe=(0,u.aI)(he,".ai"),me=0;me<Math.abs(ve);me++){var ge=ae();pe.appendChild(ge.element)}else for(var be=(0,u.aI)(ee,"._h"),ye=(0,u.aI)(be,".ai"),Ae=(0,u.jg)(ye,".di"),we=0;we<Math.abs(ve);we++){Ae[ue-1-we].remove()}}}for(var Le=0;Le<b;Le++){var Ie=`g_${Le}`,ke=(0,u.jg)(E,".ci")[Le];ke.innerHTML=`<span>${w[Ie].name}</span>`,ke.style.setProperty("--xi",`${j[Ie].width}px`),ke.style.setProperty("--yi",Le.toString());for(var Ce=(0,u.jg)(k,".zh")[Le],Ee=w[Ie].properties.length,xe=0;xe<Ee;xe++){var _e=w[Ie].properties[xe],Se=(0,u.jg)(Ce,"._h .ai .di")[xe];if(T.hasOwnProperty("groups"))if(T.groups.hasOwnProperty(Ie))if(T.groups[Ie].properties[xe])i(Se,_e,T.groups[Ie].properties[xe]);else i(Se,_e,null);else i(Se,_e,null);else i(Se,_e,null)}for(var Te=0;Te<y[Ie];Te++){var Me=(0,u.jg)(Ce,".bi .ih")[Te],$e=A[Ie][Te];if(T.hasOwnProperty("groupedItems"))if(T.groupedItems.hasOwnProperty(Ie))if(T.groupedItems[Ie][Te])a(Me,$e,T.groupedItems[Ie][Te]);else a(Me,$e,null);else a(Me,$e,null);else a(Me,$e,null)}}T=e,M=n,$=t}function ie(){return oe.apply(this,arguments)}function oe(){var e;return e=function*(){var e=(0,s.Js)("playing_animation"),t=(0,s.Js)("refresh_interval"),n=(0,h.gO)("location-bus-arrival-time-chart");D=t.dynamic,R=t.baseInterval,Q=!0,U=(0,l.zx)(),S.setAttribute("refreshing","true"),S.classList.remove("gh"),document.addEventListener(U,ee);var r=yield(0,i.R)(G,n.width,n.height,U);re(r,!1,e);var o=0;D&&(o=yield(0,a.wz)()),W=(new Date).getTime(),q=D?Math.max(W+O,r.dataUpdateTime+R/o):W+R,B=Math.max(O,q-W),Q=!1,S.setAttribute("refreshing","false"),S.style.setProperty("--fh",`${B}ms`),S.classList.add("gh")},oe=function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){A(i,a,r,o,d,"next",e)}function d(e){A(i,a,r,o,d,"throw",e)}o(void 0)}))},oe.apply(this,arguments)}function de(){ie().then((function(){X?setTimeout((function(){de()}),Math.max(O,q-(new Date).getTime())):J=!1})).catch((function(e){X?((0,p.a)(`地點網路連線中斷，將在${N/1e3}秒後重試。`,"error"),setTimeout((function(){de()}),N)):J=!1}))}function se(e){(0,h.WR)("Location"),(0,d.XK)("location",e),G=e,H=0,w.setAttribute("displayed","true"),k.scrollLeft=0,function(){for(var e=(0,s.Js)("playing_animation"),t=(0,h.gO)("window"),n=(t.width,t.height),a={g_0:Math.floor(n/50)+5,g_1:Math.floor(n/50)+5},r={},i=0;i<2;i++){var o=`g_${i}`;r[o]=[];for(var d=0;d<a[o];d++)r[o].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}re({groupedItems:r,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:a,LocationName:"載入中",dataUpdateTime:0},!0,e)}(),X||(X=!0,J?ie():(J=!0,de())),(0,h.Z_)()}function ce(){w.setAttribute("displayed","false"),X=!1,(0,h.l$)()}function le(e,t){var n,a=(0,u.aI)(k,`.zh .bi .ih#${e}`),r=(0,u.aI)(a,".th"),i=(0,u.aI)(r,".uh"),o=b((0,u.jg)(i,'.vh[highlighted="true"][type="tab"]'));try{for(o.s();!(n=o.n()).done;){n.value.setAttribute("highlighted","false")}}catch(e){o.e(e)}finally{o.f()}switch((0,u.aI)(i,`.vh[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,u.aI)(a,".xh").setAttribute("displayed","true"),(0,u.aI)(a,".yh").setAttribute("displayed","false");break;case 1:(0,u.aI)(a,".xh").setAttribute("displayed","false"),(0,u.aI)(a,".yh").setAttribute("displayed","true")}}},6052:(e,t,n)=>{n.d(t,{c6:()=>f,pd:()=>v,z1:()=>h});var a=n(9566),r=n(3648),i=n(904),o=n(9119),d=(0,r.bv)(".rf"),s=(0,r.aI)(d,".wf"),c=(0,r.aI)(s,".xf"),l=(0,r.aI)(c,'.yf[group="folder-name"] .bg input'),u=(0,r.aI)(c,'.yf[group="folder-icon"] .bg .cg input');function f(){var e=l.value,t=u.value;(0,a.vV)(e,t).then((function(e){e?(h(),(0,o.a)("已建立資料夾","folder")):(0,o.a)("無法建立資料夾","error")}))}function v(){(0,i.WR)("FolderCreator"),d.setAttribute("displayed","true"),(0,i.Z_)()}function h(){d.setAttribute("displayed","false"),(0,i.l$)()}},6189:(e,t,n)=>{n.d(t,{Pk:()=>L,jW:()=>k,r7:()=>I});var a=n(9930),r=n(6788),i=n(972),o=n(8024),d=n(3648),s=n(4781),c=n(6082),l=n(4537),u=n(904),f=n(9119);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function p(e,t,n,a,r,i,o){try{var d=e[i](o),s=d.value}catch(e){return void n(e)}d.done?t(s):Promise.resolve(s).then(a,r)}var m="",g=(0,d.bv)(".ve"),b=(0,d.bv)(".rf"),y=(0,d.bv)(".i");function A(e){var t=document.createElement("div");return t.classList.add("ig"),t.onclick=function(){!function(e){var t;switch(m){case"editor":t=(0,d.aI)(g,'.ze ._e .af[group="folder-icon"] .ef .gf input');break;case"creator":t=(0,d.aI)(b,'.wf .xf .yf[group="folder-icon"] .bg .cg input')}t.value=e,k()}(e)},t.innerHTML=(0,l.Z)(e),{element:t,id:""}}function w(){var e;return e=function*(){var e=(0,d.aI)(y,".fg .gg");e.innerHTML="";var t=(0,o.zx)(),n=yield(0,a.z)(t);(0,r.LQ)(t);var i,s=new DocumentFragment,c=v(n);try{for(c.s();!(i=c.n()).done;){var l=A(i.value);s.appendChild(l.element)}}catch(e){c.e(e)}finally{c.f()}e.append(s)},w=function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){p(i,a,r,o,d,"next",e)}function d(e){p(i,a,r,o,d,"throw",e)}o(void 0)}))},w.apply(this,arguments)}function L(e){var t=(0,d.aI)(y,".fg .hg"),n=(0,d.aI)(y,".fg .gg");if(!(0,s.iO)(e)){var a,r=(0,i.U)(e,100),o=new DocumentFragment,c=v(r);try{for(c.s();!(a=c.n()).done;){var l=A(a.value.item);o.appendChild(l.element)}}catch(e){c.e(e)}finally{c.f()}t.innerHTML="",t.append(o),t.setAttribute("displayed",r.length>0?"true":"false"),n.setAttribute("displayed",r.length>0?"false":"true")}}function I(e){var t;switch((0,u.WR)("FolderIconSelector"),e){case"editor":m="editor",t=(0,d.aI)(g,'.ze ._e .af[group="folder-icon"] .ef .gf .hf');break;case"creator":m="creator",t=(0,d.aI)(b,'.wf .xf .yf[group="folder-icon"] .bg .cg .dg')}"false"===t.getAttribute("disabled")&&(c.m?(y.setAttribute("displayed","true"),function(){w.apply(this,arguments)}(m),(0,i.L)()):(0,f.a)("資料還在下載中","download_for_offline"))}function k(){(0,u.kr)("FolderIconSelector"),y.setAttribute("displayed","false")}},8379:(e,t,n)=>{n.d(t,{g:()=>m,m:()=>g});var a=n(9566),r=n(3648),i=n(9333),o=n(4537),d=n(904);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,i,o){try{var d=e[i](o),s=d.value}catch(e){return void n(e)}d.done?t(s):Promise.resolve(s).then(a,r)}var u=(0,r.bv)(".je"),f=(0,r.aI)(u,".oe"),v=(0,r.aI)(f,".pe");function h(e){var t=document.createElement("div");t.classList.add("qe"),t.onclick=function(){(0,i.uy)(e.id)};var n=document.createElement("div");n.classList.add("re"),n.innerHTML=(0,o.Z)(e.icon);var a=document.createElement("div");a.classList.add("se"),a.appendChild(document.createTextNode(e.name));var r=document.createElement("div");r.classList.add("te"),r.appendChild(document.createTextNode(String(e.contentLength)));var d=document.createElement("div");return d.classList.add("ue"),d.innerHTML=(0,o.Z)("arrow_forward_ios"),t.appendChild(n),t.appendChild(a),t.appendChild(r),t.appendChild(d),{element:t,id:""}}function p(){var e;return e=function*(){var e=yield(0,a.Xi)();v.innerHTML="";var t,n=new DocumentFragment,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=h(t.value);n.appendChild(i.element)}}catch(e){r.e(e)}finally{r.f()}v.append(n)},p=function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,d,"next",e)}function d(e){l(i,a,r,o,d,"throw",e)}o(void 0)}))},p.apply(this,arguments)}function m(){(0,d.WR)("FolderManager"),u.setAttribute("displayed","true"),function(){p.apply(this,arguments)}()}function g(){(0,d.kr)("FolderManager"),u.setAttribute("displayed","false")}},9333:(e,t,n)=>{n.d(t,{Bo:()=>x,I6:()=>C,uy:()=>k});var a=n(9566),r=n(8024),i=n(3648),o=n(6189),d=n(4537),s=n(904),c=n(9119);function l(e,t,n,a,r,i,o){try{var d=e[i](o),s=d.value}catch(e){return void n(e)}d.done?t(s):Promise.resolve(s).then(a,r)}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var v=(0,i.bv)(".ve"),h=(0,i.aI)(v,".we"),p=(0,i.aI)(h,".xe"),m=(0,i.aI)(v,".ze"),g=(0,i.aI)(m,"._e"),b=(0,i.aI)(g,'.af[group="folder-name"] .ef input'),y=(0,i.aI)(g,'.af[group="folder-icon"] .ef .gf input'),A=(0,i.aI)(g,'.af[group="folder-icon"] .ef .gf .hf'),w=(0,i.aI)(g,'.af[group="folder-content"] .ef');function L(e,t){var n=(0,r.zx)(),o=document.createElement("div");o.id=n,o.classList.add("if"),o.setAttribute("type",t.type);var s="",l="",u="";switch(t.type){case"stop":u="location_on",s=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`,l=t.name;break;case"route":u="route",s=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`,l=t.name;break;case"bus":s="",l=t.name;break;case"empty":u="lightbulb",s="提示",l="沒有內容";break;default:u="",s="null",l="null"}var f=document.createElement("div");f.classList.add("jf"),f.innerHTML=(0,d.Z)(u);var h=document.createElement("div");h.classList.add("kf"),h.appendChild(document.createTextNode(s));var p=document.createElement("div");p.classList.add("lf"),p.appendChild(document.createTextNode(l));var m=document.createElement("div");m.classList.add("mf");var g=document.createElement("div");g.classList.add("nf"),g.innerHTML=(0,d.Z)("keyboard_arrow_down"),g.onclick=function(){E(n,e.id,t.type,t.id,"up")};var b=document.createElement("div");b.classList.add("of"),b.innerHTML=(0,d.Z)("keyboard_arrow_down"),b.onclick=function(){E(n,e.id,t.type,t.id,"down")};var y=document.createElement("div");y.classList.add("pf"),y.innerHTML=(0,d.Z)("delete"),y.onclick=function(){!function(e,t,n,r){var o=(0,i.aI)(v,`.ze ._e .af[group="folder-content"] .ef .if#${e}`);(0,a.NC)(t,n,r).then((function(e){if(e)switch(o.remove(),n){case"stop":(0,c.a)("已移除站牌","delete");break;case"route":(0,c.a)("已移除路線","delete")}else(0,c.a)("無法移除","error")}))}(n,e.id,t.type,t.id)};var A=document.createElement("div");A.classList.add("qf");var w=document.createElement("div");return w.classList.add("qf"),m.appendChild(g),m.appendChild(b),m.appendChild(y),m.appendChild(A),m.appendChild(w),o.appendChild(f),o.appendChild(h),o.appendChild(p),o.appendChild(m),{element:o,id:n}}function I(){var e;return e=function*(e){!function(e,t){b.value=e.name,y.value=e.icon,p.onclick=function(){x(e.id)},w.innerHTML="";var n,a=new DocumentFragment,r=u(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=L(e,i);a.appendChild(o.element)}}catch(e){r.e(e)}finally{r.f()}w.append(a)}(yield(0,a.L2)(e),yield(0,a.eD)(e))},I=function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,d,"next",e)}function d(e){l(i,a,r,o,d,"throw",e)}o(void 0)}))},I.apply(this,arguments)}function k(e){(0,s.WR)("FolderEditor"),v.setAttribute("displayed","true"),function(e){I.apply(this,arguments)}(e),(0,s.Z_)()}function C(){v.setAttribute("displayed","false"),(0,s.l$)()}function E(e,t,n,r,o){var d=(0,i.aI)(v,`.ze ._e .af[group="folder-content"] .ef .if#${e}`);(0,a.bq)(t,n,r,o).then((function(e){if(e)switch(o){case"up":var t=d.previousElementSibling;t&&d.parentNode.insertBefore(d,t),(0,c.a)("已往上移","arrow_circle_up");break;case"down":var n=d.nextElementSibling;n&&d.parentNode.insertBefore(n,d),(0,c.a)("已往下移","arrow_circle_down")}else(0,c.a)("無法移動","error")}))}function x(e){var t=b.value,n=y.value;(0,a.g$)(e,t,n),C()}A.onclick=function(){(0,o.r7)("editor")}}}]);
//# sourceMappingURL=0ded37a26bb9446a32e8.js.map