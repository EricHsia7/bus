"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[270],{112(){},124(){},245(){},321(){},626(){},969(){},1003(){},1195(){},1351(t,e,n){n.d(e,{ID:()=>_,co:()=>x,k9:()=>L,qp:()=>E});var i=n(467),a=n(8011),r=n(6788),u=n(6983),l=n(3459),o=n(8179),s=n(8024),c=n(9469),d=n(4537),f=n(904),p=n(9119),h=n(8279),v={},m=!1,y=!1,g=(0,o.bv)(".qj"),b=(0,o.aI)(g,".vj"),A=(0,o.aI)(b,".wj");function I(){var t=document.createElement("div");t.classList.add("xj");var e=document.createElement("div");e.classList.add("yj"),e.appendChild((0,d.oC)()),t.appendChild(e);var n=document.createElement("div");return n.classList.add("zj"),t.appendChild(n),t}function k(t,e,n){function i(t,i,a){function r(t,e){var n=(0,o.aI)(t,".yj");(0,d.yD)(n,e.icon)}function u(t,e){(0,o.aI)(t,".zj").innerText=e.name}function l(t,e){t.onclick=e.action}function c(t,e){t.setAttribute("animation",(0,s.xZ)(e))}function f(t,e){t.setAttribute("skeleton-screen",(0,s.xZ)(e))}null==a?(r(t,i),u(t,i),l(t,i),c(t,n),f(t,e)):(a.key!==i.key&&(r(t,i),u(t,i),l(t,i)),n!==m&&c(t,n),e!==y&&f(t,e))}var a=t.actions,r=t.actionsQuantity,u=(0,o.jg)(A,".xj").length;if(r!==u){var l=u-r;if(l<0){for(var c=new DocumentFragment,f=0,p=Math.abs(l);f<p;f++){var h=I();c.appendChild(h)}A.append(c)}else for(var g=(0,o.jg)(A,".xj"),b=0,k=Math.abs(l);b<k;b++){g[u-1-b].remove()}}for(var C=(0,o.jg)(A,".xj"),_=0;_<r;_++){var x=C[_],L=a[_];if((0,s.mQ)(v,"actions"))if(v.actions[_])i(x,L,v.actions[_]);else i(x,L,null);else i(x,L,null)}v=t,m=n,y=e}function C(){return(C=(0,i.A)(function*(t){var e=(0,l.Js)("playing_animation"),n=(0,s.zx)();k(yield(0,u.v)(t,n),!1,e)})).apply(this,arguments)}function _(t){(0,f.WR)("LocationDetails"),g.setAttribute("displayed","true"),function(){for(var t=(0,l.Js)("playing_animation"),e=[],n=0;n<3;n++)e.push({name:"",icon:"",key:`action-${n}`,action:function(){}});k({actions:e,actionsQuantity:3,hash:""},!0,t)}(),function(t){C.apply(this,arguments)}(t)}function x(){(0,f.kr)("LocationDetails"),g.setAttribute("displayed","false")}function L(t){return w.apply(this,arguments)}function w(){return(w=(0,i.A)(function*(t){var e=(0,s.zx)(),n=yield(0,a.g)(e,1);(0,r.LQ)(e),(0,r.gC)(e);var i=`ml_${t}`;if((0,s.mQ)(n,i)){var u=n[i],l=(0,c.i)(1,{hash:t});navigator.share&&navigator.share({title:u.n,url:l}).then(function(){(0,p.a)("check_circle","已分享地點")}).catch(function(t){(0,p.a)("cancel","已取消分享")})}})).apply(this,arguments)}function E(t){return j.apply(this,arguments)}function j(){return(j=(0,i.A)(function*(t){var e=(0,s.zx)(),n=yield(0,a.g)(e,1);(0,r.LQ)(e),(0,r.gC)(e);var i=`ml_${t}`;if((0,s.mQ)(n,i)){var u=(0,c.i)(1,{hash:t});(0,h.X8)(u)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(t,e,n){n.d(e,{Sv:()=>D,m_:()=>J});var i=n(467),a=n(5767),r=n(365),u=n(3422),l=n(3459),o=n(8179),s=n(8024),c=n(4537),d=n(904),f=n(9119),p=(0,o.bv)(".il"),h=(0,o.aI)(p,".ll"),v=(0,o.aI)(h,".pl"),m=(0,o.aI)(v,".ql"),y=(0,o.aI)(p,".sl"),g=(0,o.aI)(y,".tl"),b={},A=!1,I=15e3,k=5e3,C=15e3,_=!0,x=0,L=0,w="",E=!1,j=!1,S=!1;function T(t){var e=t;if(E){var n=e.detail.progress-1;m.style.setProperty("--jl",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,T)}function M(){var t=document.createElement("div");t.classList.add("ul");var e=document.createElement("div");e.classList.add("vl"),t.appendChild(e);var n=document.createElement("div");n.classList.add("wl");var i=document.createElement("div");i.classList.add("xl"),n.appendChild(i);var a=document.createElement("div");a.classList.add("yl"),n.appendChild(a);var r=document.createElement("div");r.classList.add("zl"),n.appendChild(r);var u=document.createElement("div");u.classList.add("_l");var l=document.createElement("span");return l.appendChild((0,c.YC)("close")),u.appendChild(l),n.appendChild(u),t.appendChild(n),t}function $(t,e,n){function i(t,i,a){function r(t,e){(0,o.aI)(t,".vl").innerText=e.hours}function u(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,".xl").innerText=e.minutes}function l(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,".zl").innerText=e.name}function c(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,".yl").innerText=`${e.route.name} - 往${e.route.direction}`}function d(t,e){var n=(0,o.aI)(t,".wl");(0,o.aI)(n,"._l").onclick=function(){!function(t,e){R.apply(this,arguments)}(t,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,s.xZ)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,s.xZ)(e))}function h(t,e){t.setAttribute("skeleton-screen",(0,s.xZ)(e))}null==a?(r(t,i),u(t,i),l(t,i),c(t,i),d(t,i),f(t,i),p(t,n),h(t,e)):(i.hours!==a.hours&&r(t,i),i.minutes!==a.minutes&&u(t,i),(0,s.hw)(a.schedule_id,i.schedule_id)||(l(t,i),c(t,i),d(t,i)),a.is_first!==i.is_first&&f(t,i),false!==n&&p(t,n),A!==e&&h(t,e))}var a=t.itemQuantity,r=t.items,u=(0,o.jg)(g,".ul").length;if(a!==u){var l=u-a;if(l<0){for(var c=new DocumentFragment,d=0,f=Math.abs(l);d<f;d++){var p=M();c.appendChild(p)}g.append(c)}else for(var h=(0,o.jg)(g,".ul"),v=0,m=Math.abs(l);v<m;v++){h[u-1-v].remove()}}for(var y=(0,o.jg)(g,".ul"),I=0;I<a;I++){var k=y[I],C=r[I];if((0,s.mQ)(b,"items"))if(b.items[I])i(k,C,b.items[I]);else i(k,C,null);else i(k,C,null)}b=t,A=e}function Q(){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.A)(function*(){var t=(0,l.Js)("playing_animation"),e=(0,l.Js)("refresh_interval");_=e.dynamic,I=e.baseInterval,E=!0,w=(0,s.zx)(),m.setAttribute("refreshing","true"),m.classList.remove("rl"),document.addEventListener(w,T);var n=yield(0,u.e3)(w);$(n,!1,t);var i=0;_&&(i=yield(0,a.wz)()),x=(new Date).getTime(),L=_?Math.max(x+k,n.dataUpdateTime+I/i):x+I,C=Math.max(k,L-x),E=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--kl",`${C}ms`),m.classList.add("rl")})).apply(this,arguments)}function q(){return z.apply(this,arguments)}function z(){return(z=(0,i.A)(function*(){Q().then(function(){j?setTimeout(function(){q()},Math.max(k,L-(new Date).getTime())):S=!1}).catch(function(t){j?setTimeout(function(){q()},1e4):S=!1})})).apply(this,arguments)}function D(){(0,d.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var t=(0,l.Js)("playing_animation"),e=Math.floor((0,d.YC)("window")[1]/50)+5,n=[],i=0;i<e;i++)n.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});$({items:n,itemQuantity:e,dataUpdateTime:0},!0,t)}(),j||(j=!0,S?Q():(S=!0,q())),(0,d.Z_)()}function J(){p.setAttribute("displayed","false"),j=!1,(0,d.l$)()}function R(){return(R=(0,i.A)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,r.G)(e)){if(t.remove(),(0,f.a)("check_circle","已取消通知"),!E){var n=(0,l.Js)("playing_animation");$(yield(0,u.e3)(w),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(t,e,n){n.d(e,{Dn:()=>x,Xy:()=>_,bF:()=>C,gv:()=>A});var i=n(3453),a=n(467),r=n(5352),u=n(8179),l=n(5579),o=n(904),s=n(9119),c=(0,u.bv)(".wk"),d=(0,u.aI)(c,".al"),f=(0,u.aI)(c,".xk"),p=(0,u.aI)(f,".yk"),h=(0,u.aI)(d,".bl"),v=(0,u.aI)(h,'.cl[group="schedule-name"] .gl input'),m=(0,u.aI)(h,'.cl[group="schedule-start-time"] .gl input'),y=(0,u.aI)(h,'.cl[group="schedule-end-time"] .gl input'),g=(0,u.aI)(h,'.cl[group="schedule-days"] .gl'),b=(0,u.jg)(g,".hl");function A(t){return I.apply(this,arguments)}function I(){return(I=(0,a.A)(function*(t){for(var e=v.value,n=m.value,a=y.value,u=String(n).split(":").map(function(t){return parseInt(t)}),l=(0,i.A)(u,2),o=l[0],c=l[1],d=String(a).split(":").map(function(t){return parseInt(t)}),f=(0,i.A)(d,2),p=f[0],h=f[1],g=[],A=0;A<7;A++){var I=b[A],k=I.getAttribute("highlighted"),C=parseInt(I.getAttribute("day"));"true"===k&&g.push(C)}var x=yield(0,r.qZ)(t);x.name=e,x.days=g,x.period.start.hours=o,x.period.start.minutes=c,x.period.end.hours=p,x.period.end.minutes=h,yield(0,r.nL)(x),(0,s.a)("check_circle","已儲存變更"),_()})).apply(this,arguments)}function k(){return(k=(0,a.A)(function*(t){var e=yield(0,r.qZ)(t);v.value=e.name,m.value=(0,l.pn)(e.period.start),y.value=(0,l.pn)(e.period.end);for(var n=0;n<7;n++){var i=b[n];e.days.indexOf(n)>-1?i.setAttribute("highlighted","true"):i.setAttribute("highlighted","false")}p.onclick=function(){A(t)}})).apply(this,arguments)}function C(t){(0,o.WR)("PersonalScheduleEditor"),c.setAttribute("displayed","true"),function(t){k.apply(this,arguments)}(t),(0,o.Z_)()}function _(){c.setAttribute("displayed","false"),(0,o.l$)()}function x(t){var e=(0,u.aI)(g,`.hl[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(t,e,n){n.d(e,{Z:()=>y,z:()=>m});var i=n(467),a=n(5352),r=n(8179),u=n(4537),l=n(904),o=n(5693);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var r,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,r=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw r}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var d=(0,r.bv)("._j"),f=(0,r.aI)(d,".ek"),p=(0,r.aI)(f,".fk");function h(t){var e=document.createElement("div");e.classList.add("gk"),e.onclick=function(){(0,o.bF)(t.id)};var n=document.createElement("div");n.classList.add("hk"),n.innerText=t.name,e.appendChild(n);var i=document.createElement("div");i.classList.add("ik");var a=document.createElement("span");return a.appendChild((0,u.YC)("arrow_forward_ios")),i.appendChild(a),e.appendChild(i),e}function v(){return(v=(0,i.A)(function*(){p.innerHTML="";var t,e=yield(0,a.ty)(),n=new DocumentFragment,i=s(e);try{for(i.s();!(t=i.n()).done;){var r=h(t.value);n.appendChild(r)}}catch(t){i.e(t)}finally{i.f()}p.append(n)})).apply(this,arguments)}function m(){(0,l.WR)("PersonalScheduleManager"),d.setAttribute("displayed","true"),function(){v.apply(this,arguments)}()}function y(){(0,l.kr)("PersonalScheduleManager"),d.setAttribute("displayed","false")}},7943(){},8279(t,e,n){n.d(e,{Vc:()=>s,X8:()=>o});var i=n(8179),a=n(2648),r=n(904),u=(0,i.bv)(".hm"),l=(0,i.aI)(u,".mm");function o(t){(0,r.WR)("QRCode"),u.setAttribute("displayed","true"),function(t){var e=(0,a.$)(t,"M",.5,.3,1,"var(--a)",4);l.innerHTML=e}(t)}function s(){(0,r.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(t,e,n){n.d(e,{GJ:()=>g,I1:()=>y,Ps:()=>m,om:()=>b});var i=n(3453),a=n(5352),r=n(8179),u=n(904),l=n(9119),o=(0,r.bv)(".jk"),s=(0,r.aI)(o,".ok"),c=(0,r.aI)(s,".pk"),d=(0,r.aI)(c,'.qk[group="schedule-name"] .uk input'),f=(0,r.aI)(c,'.qk[group="schedule-start-time"] .uk input'),p=(0,r.aI)(c,'.qk[group="schedule-end-time"] .uk input'),h=(0,r.aI)(c,'.qk[group="schedule-days"] .uk'),v=(0,r.jg)(h,".vk");function m(){for(var t=d.value,e=f.value,n=p.value,r=String(e).split(":").map(function(t){return parseInt(t)}),u=(0,i.A)(r,2),o=u[0],s=u[1],c=String(n).split(":").map(function(t){return parseInt(t)}),h=(0,i.A)(c,2),m=h[0],y=h[1],b=[],A=0;A<7;A++){var I=v[A],k=I.getAttribute("highlighted"),C=parseInt(I.getAttribute("day"));"true"===k&&b.push(C)}(0,a.Qh)(t,o,s,m,y,b).then(function(t){t?(g(),(0,l.a)("calendar_view_day","已建立個人化行程")):(0,l.a)("error","無法建立個人化行程")})}function y(){(0,u.WR)("PersonalScheduleCreator"),o.setAttribute("displayed","true"),(0,u.Z_)()}function g(){o.setAttribute("displayed","false"),(0,u.l$)()}function b(t){var e=(0,r.aI)(h,`.vk[day="${t}"]`);"true"===e.getAttribute("highlighted")?e.setAttribute("highlighted","false"):e.setAttribute("highlighted","true")}},8558(){},8969(){},9119(t,e,n){n.d(e,{a:()=>c});var i=n(2284),a=n(3459),r=n(8179),u=n(8024),l=n(4537);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var r,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,r=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw r}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e,n){var s=(0,r.e0)(".nm");if(null!==s){var c,d=o(s);try{for(d.s();!(c=d.n()).done;){c.value.remove()}}catch(t){d.e(t)}finally{d.f()}}var f=(0,a.Js)("playing_animation"),p=document.createElement("div");p.classList.add("nm"),p.setAttribute("animation",(0,u.xZ)(f));var h=document.createElement("div");h.classList.add("om"),h.appendChild((0,l.YC)(t)),p.appendChild(h);var v=document.createElement("div");if(v.classList.add("pm"),v.innerText=e,p.appendChild(v),"object"===(0,i.A)(n)&&null!=n&&"function"==typeof(null==n?void 0:n.action)){var m=document.createElement("div");m.classList.add("qm"),m.innerText=n.text,m.addEventListener("click",function(){n.action()},{once:!0}),p.appendChild(m),p.setAttribute("button","true")}p.addEventListener("animationend",function(t){null!=t&&t.target&&t.target.remove()},{once:!0}),document.body.appendChild(p)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=b6ec372857e306b641b0.js.map