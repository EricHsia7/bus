{"version":3,"file":"99658fe597c3c4e443db.js","mappings":"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","sources":["webpack://bus/./src/interface/schedule-notification/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/route/details/index.ts","webpack://bus/./src/interface/register-notification/index.ts"],"sourcesContent":["import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = documentQuerySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\ntype ScheduleNotificationType = 'stop-on-route' | 'stop-on-location';\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, type: ScheduleNotificationType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnRoute(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnLocation(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nfunction initializeScheduleNotificationField(type: ScheduleNotificationType, parameters: Array<any>): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newElement.element);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function openScheduleNotification(type: ScheduleNotificationType, parameters: Array<any>): void {\n  pushPageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n  initializeScheduleNotificationField(type, parameters);\n}\n\nexport function closeScheduleNotification(): void {\n  revokePageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function scheduleNotificationForStopItemOnRoute(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nexport function scheduleNotificationForStopItemOnLocation(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n","import { FolderWithContent, isFolderContentSaved, listFoldersWithContent, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype SaveToFolderType = 'stop-on-route' | 'stop-on-location' | 'route' | 'route-on-route' | 'bus' | 'location' | 'location-on-route';\n\nconst SaveToFolderField = documentQuerySelector('.css_save_to_folder_field');\nconst SaveToFolderBodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst SaveToFolderListElement = elementQuerySelector(SaveToFolderBodyElement, '.css_save_to_folder_list');\n\nconst successfulSaveMessage = '已儲存至資料夾';\nconst failedSaveMessage = '無法儲存';\n\nfunction generateElementOfItem(item: FolderWithContent, type: SaveToFolderType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        saveStopItemOnRoute(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        saveStopItemOnLocation(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'route':\n      itemElement.onclick = function () {\n        saveRouteOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'route-on-route':\n      itemElement.onclick = function () {\n        saveRouteOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'location':\n      itemElement.onclick = function () {\n        saveLocationOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'location-on-route':\n      itemElement.onclick = function () {\n        saveLocationOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'bus':\n      // No action\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nasync function initializeSaveToFolderField(type: SaveToFolderType, parameters: Array<any>) {\n  const foldersWithContent = await listFoldersWithContent();\n  SaveToFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newItemElement.element);\n  }\n  SaveToFolderListElement.append(fragment);\n}\n\nexport function openSaveToFolder(type: SaveToFolderType, parameters: Array<any>): void {\n  pushPageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'true');\n  initializeSaveToFolderField(type, parameters);\n}\n\nexport function closeSaveToFolder(): void {\n  revokePageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nfunction saveStopItemOnRoute(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveStopItemOnLocation(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnDetailsPage(folderID: string, RouteID: number): void {\n  const actionButtonElement = documentQuerySelector('.css_route_details_field .css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"] .css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          actionButtonElement.setAttribute('highlighted', 'true');\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnRoute(folderID: string, RouteID: number): void {\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnDetailsPage(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnRoute(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n","import { isFolderContentSaved } from '../../../data/folder/index';\nimport { integrateRouteDetails } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../../tools/index';\nimport { pushPageHistory, revokePageHistory } from '../../index';\nimport { openSaveToFolder } from '../../save-to-folder/index';\nimport { shareRoutePermalink, showRoutePermalinkQRCode } from './actions';\nimport { setUpCalendarGroupSkeletonScreen, updateCalendarGroup } from './calendar';\nimport { setUppropertiesGroupSkeletonScreen, updatePropertiesField } from './properties';\n\nexport const RouteDetailsField = documentQuerySelector('.css_route_details_field');\nexport const RouteDetailsBodyElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body');\nexport const RouteDetailsGroupsElement = elementQuerySelector(RouteDetailsBodyElement, '.css_route_details_groups');\n\nexport const CalendarGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"calendar\"]');\nexport const CalendarGroupBodyElement = elementQuerySelector(CalendarGroupElement, '.css_route_details_group_body');\nexport const CalendarDaysElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_days');\nexport const CalendarEventGroupsElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_event_groups');\n\nexport const ActionsGroupElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"]');\nexport const svaeToFolderActionButtonElement = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\nexport const getPermalinkActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"get-permalink\"]');\nexport const showPermalinkQRCodeActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"show-permalink-qrcode\"]');\n\nexport const PropertiesGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"properties\"]');\nexport const PropertiesGroupBodyElement = elementQuerySelector(PropertiesGroupElement, '.css_route_details_group_body');\n\nasync function initializeRouteDetailsField(RouteID: number, PathAttributeId: Array<number>) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const existence = await isFolderContentSaved('route', RouteID);\n  svaeToFolderActionButtonElement.setAttribute('animation', booleanToString(playing_animation));\n  svaeToFolderActionButtonElement.setAttribute('highlighted', booleanToString(existence));\n  svaeToFolderActionButtonElement.onclick = function () {\n    openSaveToFolder('route', [RouteID]);\n  };\n  getPermalinkActionButton.setAttribute('animation', booleanToString(playing_animation));\n  getPermalinkActionButton.onclick = function () {\n    shareRoutePermalink(RouteID);\n  };\n  showPermalinkQRCodeActionButton.setAttribute('animation', booleanToString(playing_animation));\n  showPermalinkQRCodeActionButton.onclick = function () {\n    showRoutePermalinkQRCode(RouteID);\n  };\n  setUppropertiesGroupSkeletonScreen(PropertiesGroupElement);\n  setUpCalendarGroupSkeletonScreen();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteDetails(RouteID, PathAttributeId, requestID);\n  updatePropertiesField(integration.properties, false, playing_animation);\n  updateCalendarGroup(integration.calendar, false, playing_animation);\n}\n\nexport function openRouteDetails(RouteID: number, PathAttributeId: Array<number>): void {\n  pushPageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'true');\n  initializeRouteDetailsField(RouteID, PathAttributeId);\n}\n\nexport function closeRouteDetails(): void {\n  revokePageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'false');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (const CalendarEventGroupElement of CalendarEventGroupElements) {\n    CalendarEventGroupElement.remove();\n  }\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  for (const CalendarDayElement of CalendarDayElements) {\n    CalendarDayElement.remove();\n  }\n}\n","import { registerNotificationClient } from '../../data/notification/apis/registerNotificationClient/index';\nimport { getNotificationProvider, setNotificationProvider } from '../../data/notification/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { isValidURL } from '../../tools/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst RegisterNotificationField = documentQuerySelector('.css_register_notification_field');\nconst RegisterNotificationBodyElement = elementQuerySelector(RegisterNotificationField, '.css_register_notification_body');\nconst RegisterNotificationGroupsElement = elementQuerySelector(RegisterNotificationBodyElement, '.css_register_notification_groups');\n\nconst ProviderInputElement = elementQuerySelector(RegisterNotificationGroupsElement, '.css_register_notification_group[group=\"provider\"] .css_register_notification_group_body input');\nconst RgistrationKeyInputElement = elementQuerySelector(RegisterNotificationGroupsElement, '.css_register_notification_group[group=\"registration-key\"] .css_register_notification_group_body input');\n\nfunction initializeRegisterNotificationField() {\n  ProviderInputElement.value = getNotificationProvider();\n  RgistrationKeyInputElement.value = '';\n}\n\nexport function openRegisterNotification(): void {\n  pushPageHistory('RegisterNotification');\n  RegisterNotificationField.setAttribute('displayed', 'true');\n  initializeRegisterNotificationField();\n  closePreviousPage();\n}\n\nexport function closeRegisterNotification(): void {\n  // revokePageHistory('RegisterNotification');\n  RegisterNotificationField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport async function saveFormulatedRegisterNotification() {\n  promptMessage('manufacturing', '處理中');\n  const provider = ProviderInputElement.value;\n  const registrationKey = RgistrationKeyInputElement.value;\n  if (!isValidURL(provider)) {\n    promptMessage('error', '無效的提供者');\n    return;\n  }\n  // register\n  setNotificationProvider(provider);\n  const registering = await registerNotificationClient(registrationKey);\n  if (registering) {\n    promptMessage('check_circle', '註冊成功');\n    return;\n  } else {\n    promptMessage('error', '註冊失敗');\n    return;\n  }\n}\n"],"names":["ScheduleNotificationField","documentQuerySelector","ScheduleNotificationBodyElement","elementQuerySelector","ScheduleNotificationListElement","generateElementOfItem","item","type","parameters","itemElement","document","createElement","classList","add","iconElement","iconSpanElement","appendChild","getIconElement","icon","nameElement","createTextNode","name","onclick","itemElementID","StopID","RouteID","EstimateTime","index","scheduleNotificationButtonElement","promptMessage","setAttribute","closeScheduleNotification","scheduleNotificationForStop","then","result","scheduleNotificationForStopItemOnRoute","scheduleNotificationForStopItemOnLocation","element","id","openScheduleNotification","pushPageHistory","innerHTML","_step","fragment","DocumentFragment","_iterator","_createForOfIteratorHelper","scheduleNotificationOptions","s","n","done","newElement","value","err","e","f","append","initializeScheduleNotificationField","revokePageHistory","SaveToFolderField","SaveToFolderBodyElement","SaveToFolderListElement","successfulSaveMessage","failedSaveMessage","folderID","saveToFolderButtonElement","saveStop","isFolderContentSaved","k","booleanToString","closeSaveToFolder","saveStopItemOnRoute","saveStopItemOnLocation","actionButtonElement","saveRoute","hash","saveLocation","_initializeSaveToFolderField","foldersWithContent","listFoldersWithContent","newItemElement","apply","arguments","openSaveToFolder","_x","_x2","initializeSaveToFolderField","RouteDetailsField","RouteDetailsBodyElement","RouteDetailsGroupsElement","CalendarGroupElement","CalendarGroupBodyElement","CalendarDaysElement","CalendarEventGroupsElement","ActionsGroupElement","svaeToFolderActionButtonElement","getPermalinkActionButton","showPermalinkQRCodeActionButton","PropertiesGroupElement","PropertiesGroupBodyElement","_initializeRouteDetailsField","PathAttributeId","playing_animation","getSettingOptionValue","existence","shareRoutePermalink","showRoutePermalinkQRCode","setUppropertiesGroupSkeletonScreen","setUpCalendarGroupSkeletonScreen","requestID","generateIdentifier","integration","integrateRouteDetails","updatePropertiesField","properties","updateCalendarGroup","calendar","openRouteDetails","initializeRouteDetailsField","RegisterNotificationField","RegisterNotificationBodyElement","RegisterNotificationGroupsElement","ProviderInputElement","RgistrationKeyInputElement","openRegisterNotification","getNotificationProvider","closePreviousPage","closeRegisterNotification","openPreviousPage"],"ignoreList":[],"sourceRoot":""}