"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{2174(e,t,i){i.d(t,{a:()=>I,b:()=>T,c:()=>M,d:()=>S});var n=i(467),a=i(5767),r=i(365),u=i(3422),s=i(3459),d=i(8179),l=i(8024),c=i(9915),o=i(4537),p=i(904),f=i(9119),h=(0,d.c)(".ek"),v=(0,d.e)(h,".hk"),m=(0,d.e)(v,".lk"),g=(0,d.e)(m,".mk"),b=(0,d.e)(h,".ok"),y=(0,d.e)(b,".pk"),k={},A=!1,j=new c.a(function(){return x.apply(this,arguments)},15e3);function C(e){g.style.setProperty("--gk",`${e}ms`),g.classList.add("nk")}function L(e){var t=e;g.style.setProperty("--fk",t.detail.progress.toString()),"end"===t.detail.stage&&document.removeEventListener(t.detail.target,L)}function _(){var e=(0,d.a)();e.classList.add("qk");var t=(0,d.a)();t.classList.add("rk"),e.appendChild(t);var i=(0,d.a)();i.classList.add("sk");var n=(0,d.a)();n.classList.add("tk"),i.appendChild(n);var a=(0,d.a)();a.classList.add("uk"),i.appendChild(a);var r=(0,d.a)();r.classList.add("vk"),i.appendChild(r);var u=(0,d.a)();u.classList.add("wk");var s=document.createElement("span");return s.appendChild((0,o.b)("close")),u.appendChild(s),i.appendChild(u),e.appendChild(i),e}function w(e,t,i){function n(e,n,a){function r(e,t){(0,d.e)(e,".rk").innerText=t.hours}function u(e,t){var i=(0,d.e)(e,".sk");(0,d.e)(i,".tk").innerText=t.minutes}function s(e,t){var i=(0,d.e)(e,".sk");(0,d.e)(i,".vk").innerText=t.name}function c(e,t){var i=(0,d.e)(e,".sk");(0,d.e)(i,".uk").innerText=`${t.route.name} - 往${t.route.direction}`}function o(e,t){var i=(0,d.e)(e,".sk");(0,d.e)(i,".wk").onclick=function(){!function(e,t){P.apply(this,arguments)}(e,t.schedule_id)}}function p(e,t){e.setAttribute("first",(0,l.a)(t.is_first))}function f(e,t){e.setAttribute("animation",(0,l.a)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,l.a)(t))}null==a?(r(e,n),u(e,n),s(e,n),c(e,n),o(e,n),p(e,n),f(e,i),h(e,t)):(n.hours!==a.hours&&r(e,n),n.minutes!==a.minutes&&u(e,n),(0,l.b)(a.schedule_id,n.schedule_id)||(s(e,n),c(e,n),o(e,n)),a.is_first!==n.is_first&&p(e,n),false!==i&&f(e,i),A!==t&&h(e,t))}var a=e.itemQuantity,r=e.items,u=Array.from((0,d.d)(y,".qk")),s=u.length;if(a!==s){var c=s-a;if(c<0){for(var o=new DocumentFragment,p=0;p>c;p--){var f=_();o.appendChild(f),u.push(f)}y.append(o)}else if(c>0)for(var h=s-1,v=s-c-1;h>v;h--)u[h].remove(),u.splice(h,1)}for(var m=0;m<a;m++){var g=u[m],b=r[m];if((0,l.f)(k,"items"))if(k.items[m])n(g,b,k.items[m]);else n(g,b,null);else n(g,b,null)}k=e,A=t}function x(){return(x=(0,n.a)(function*(){try{var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval"),i=(0,l.c)();g.setAttribute("refreshing","true"),g.classList.remove("nk"),document.addEventListener(i,L);var n=yield(0,u.h)(i);w(n,!1,e);var r=0;t.dynamic&&(r=yield(0,a.c)());var d=(new Date).getTime(),c=0;c=t.dynamic?Math.max(d+5e3,n.dataUpdateTime+t.baseInterval/r):d+t.baseInterval;var o=Math.max(5e3,c-d);g.setAttribute("refreshing","false"),C(o)}catch(e){var p=1e4;return(0,f.a)("error","通知發生錯誤，將在10秒後重試。"),C(p),p}})).apply(this,arguments)}function S(){h.setAttribute("displayed","true")}function T(){h.setAttribute("displayed","false")}function M(){(0,p.c)("NotificationScheduleManager"),S(),function(){for(var e=(0,s.b)("playing_animation"),t=(0,p.d)("window"),i=(t.width,t.height),n=Math.floor(i/50)+5,a=[],r=0;r<n;r++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});w({items:a,itemQuantity:n,dataUpdateTime:0},!0,e)}(),j.isPaused?j.resume(!0):j.tick(),(0,p.b)()}function I(){T(),j.pause(),(0,p.h)(),(0,p.e)("NotificationScheduleManager")}function P(){return(P=(0,n.a)(function*(e,t){(0,f.a)("manufacturing","處理中"),(yield(0,r.a)(t))?(e.remove(),(0,f.a)("check_circle","已取消通知")):(0,f.a)("error","取消失敗")})).apply(this,arguments)}},8380(e,t,i){i.d(t,{a:()=>C,b:()=>b,c:()=>A,d:()=>j,e:()=>k,f:()=>L});var n=i(3453),a=i(467),r=i(5352),u=i(8179),s=i(904),d=i(7891),l=i(9119),c=(0,u.c)(".fj"),o=(0,u.e)(c,".kj"),p=(0,u.e)(o,".lj"),f=(0,u.e)(p,'.mj[group="schedule-name"] .qj input'),h=(0,u.e)(p,'.mj[group="schedule-start-time"] .qj input'),v=(0,u.e)(p,'.mj[group="schedule-end-time"] .qj input'),m=(0,u.e)(p,'.mj[group="schedule-days"] .qj'),g=(0,u.d)(m,".rj");function b(){return y.apply(this,arguments)}function y(){return(y=(0,a.a)(function*(){for(var e=f.value,t=h.value,i=v.value,a=String(t).split(":").map(function(e){return parseInt(e)}),u=(0,n.a)(a,2),s=u[0],c=u[1],o=String(i).split(":").map(function(e){return parseInt(e)}),p=(0,n.a)(o,2),m=p[0],b=p[1],y=[],k=0;k<7;k++){var A=g[k],j=A.getAttribute("highlighted"),L=parseInt(A.getAttribute("day"));"true"===j&&y.push(L)}(yield(0,r.a)(e,s,c,m,b,y))?(C(),(0,l.a)("calendar_view_day","已建立個人化行程"),(0,d.c)()):(0,l.a)("error","無法建立個人化行程")})).apply(this,arguments)}function k(){c.setAttribute("displayed","true")}function A(){c.setAttribute("displayed","false")}function j(){(0,s.c)("PersonalScheduleCreator"),k(),(0,s.b)()}function C(){A(),(0,s.h)(),(0,s.e)("PersonalScheduleCreator")}function L(e){var t=(0,u.e)(m,`.rj[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},5693(e,t,i){i.d(t,{a:()=>x,b:()=>_,c:()=>w,d:()=>A,e:()=>L,f:()=>S});var n=i(3453),a=i(467),r=i(5352),u=i(8179),s=i(5579),d=i(904),l=i(7891),c=i(9119),o=(0,u.c)(".sj"),p=(0,u.e)(o,".xj"),f=(0,u.e)(o,".tj"),h=(0,u.e)(f,".uj"),v=(0,u.e)(p,".yj"),m=(0,u.e)(v,'.zj[group="schedule-name"] .ck input'),g=(0,u.e)(v,'.zj[group="schedule-start-time"] .ck input'),b=(0,u.e)(v,'.zj[group="schedule-end-time"] .ck input'),y=(0,u.e)(v,'.zj[group="schedule-days"] .ck'),k=(0,u.d)(y,".dk");function A(e){return j.apply(this,arguments)}function j(){return(j=(0,a.a)(function*(e){for(var t=m.value,i=g.value,a=b.value,u=String(i).split(":").map(function(e){return parseInt(e)}),s=(0,n.a)(u,2),d=s[0],o=s[1],p=String(a).split(":").map(function(e){return parseInt(e)}),f=(0,n.a)(p,2),h=f[0],v=f[1],y=[],A=0;A<7;A++){var j=k[A],C=j.getAttribute("highlighted"),L=parseInt(j.getAttribute("day"));"true"===C&&y.push(L)}var _=yield(0,r.b)(e);_.name=t,_.days=y,_.period.start.hours=d,_.period.start.minutes=o,_.period.end.hours=h,_.period.end.minutes=v,(yield(0,r.e)(_))?(x(),(0,l.c)()):(0,c.a)("error","無法儲存變更")})).apply(this,arguments)}function C(){return(C=(0,a.a)(function*(e){var t=yield(0,r.b)(e);m.value=t.name,g.value=(0,s.g)(t.period.start),b.value=(0,s.g)(t.period.end);for(var i=0;i<7;i++){var n=k[i];t.days.indexOf(i)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}h.onclick=function(){A(e)}})).apply(this,arguments)}function L(){o.setAttribute("displayed","true")}function _(){o.setAttribute("displayed","false")}function w(e){(0,d.c)("PersonalScheduleEditor"),L(),function(e){C.apply(this,arguments)}(e),(0,d.b)()}function x(){_(),(0,d.h)(),(0,d.e)("PersonalScheduleEditor")}function S(e){var t=(0,u.e)(y,`.dk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},7891(e,t,i){i.d(t,{a:()=>b,b:()=>m,c:()=>f,d:()=>g,e:()=>v});var n=i(467),a=i(5352),r=i(8179),u=i(4537),s=i(904),d=i(5693),l=(0,r.c)(".wi"),c=(0,r.e)(l,".aj"),o=(0,r.e)(c,".bj");function p(e){var t=(0,r.a)();t.classList.add("cj"),t.onclick=function(){(0,d.c)(e.id)};var i=(0,r.a)();i.classList.add("dj"),i.innerText=e.name,t.appendChild(i);var n=(0,r.a)();n.classList.add("ej");var a=document.createElement("span");return a.appendChild((0,u.b)("arrow_forward_ios")),n.appendChild(a),t.appendChild(n),t}function f(){return h.apply(this,arguments)}function h(){return(h=(0,n.a)(function*(){o.innerHTML="";var e=yield(0,a.d)(),t=new DocumentFragment;for(var i of e){var n=p(i);t.appendChild(n)}o.append(t)})).apply(this,arguments)}function v(){l.setAttribute("displayed","true")}function m(){l.setAttribute("displayed","false")}function g(){(0,s.c)("PersonalScheduleManager"),l.setAttribute("displayed","true"),f(),(0,s.b)()}function b(){l.setAttribute("displayed","false"),(0,s.h)(),(0,s.e)("PersonalScheduleManager")}},9119(e,t,i){i.d(t,{a:()=>d});var n=i(2284),a=i(3459),r=i(8179),u=i(8024),s=i(4537);function d(e,t,i){var d=(0,r.b)(".ol");if(null!==d)for(var l of d)l.remove();var c=(0,a.b)("playing_animation"),o=(0,r.a)();o.classList.add("ol"),o.setAttribute("animation",(0,u.a)(c));var p=(0,r.a)();p.classList.add("ql"),p.appendChild((0,s.b)(e)),o.appendChild(p);var f=(0,r.a)();if(f.classList.add("rl"),f.innerText=t,o.appendChild(f),"object"===(0,n.a)(i)&&null!=i&&"function"==typeof(null==i?void 0:i.action)){var h=(0,r.a)();h.classList.add("sl"),h.innerText=i.text,h.addEventListener("click",function(){i.action()},{once:!0}),o.appendChild(h),o.setAttribute("button","true")}o.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(o)}},8279(e,t,i){i.d(t,{a:()=>h,b:()=>p,c:()=>f,d:()=>o});var n=i(8179),a=i(2648),r=i(251),u=i(904),s=(0,n.c)(".il"),d=(0,n.e)(s,".jl"),l=(0,n.e)(d,".ll"),c=(0,n.e)(s,".nl");function o(){s.setAttribute("displayed","true")}function p(){s.setAttribute("displayed","false")}function f(e){(0,u.c)("QRCode"),o(),function(e){var t=(0,a.a)(e,"M",.5,.3,0,10);c.innerHTML=t,l.onclick=function(){(0,r.a)(t,"image/svg+xml","qrcode.svg")}}(e),(0,u.b)()}function h(){p(),(0,u.h)(),(0,u.e)("QRCode")}},7908(e,t,i){i.d(t,{a:()=>_,b:()=>w,c:()=>L});var n=i(467),a=i(3937),r=i(3422),u=i(8179),s=i(8024),d=i(904),l=i(9119),c=i(6104),o=(0,u.c)(".xk"),p=(0,u.e)(o,".bl"),f=(0,u.e)(p,".cl"),h=(0,u.e)(f,'.dl[group="provider"]'),v=(0,u.e)(h,".hl"),m=(0,u.e)(v,"input"),g=(0,u.e)(f,'.dl[group="registration-key"]'),b=(0,u.e)(g,".hl"),y=(0,u.e)(b,"input"),k=(0,u.e)(o,".yk"),A=(0,u.e)(k,".zk"),j=(0,u.e)(k,"._k");function C(){A.onclick=function(){_(),(0,d.h)(),(0,d.e)("RegisterNotification"),(0,c.d)()},j.onclick=function(){!function(){x.apply(this,arguments)}()},m.value=(0,r.f)(),y.value=""}function L(){o.setAttribute("displayed","true")}function _(){o.setAttribute("displayed","false")}function w(){(0,d.c)("RegisterNotification"),L(),C(),(0,d.b)()}function x(){return(x=(0,n.a)(function*(){(0,l.a)("manufacturing","處理中");var e=m.value,t=y.value;if((0,s.g)(e))return(0,r.p)(e),(yield(0,a.a)(t))?void(0,l.a)("check_circle","註冊成功"):void(0,l.a)("error","註冊失敗");(0,l.a)("error","無效的提供者")})).apply(this,arguments)}},3257(){},321(){},6907(){},2503(){},7537(){},4263(){},7943(){},3963(){},4721(){},5374(){},112(){},1542(){},6153(){},1452(){},5666(){},2676(){},8558(){},4935(){},1469(){},1195(){},5068(){},5504(){},9598(){},626(){},969(){},6780(){},1484(){},3382(){},6340(){},6384(){},3011(){},8983(){},1511(){},5995(){},4305(){},5228(){},1078(){}}]);
//# sourceMappingURL=634e02e5354d4019d141.js.map