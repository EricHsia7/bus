"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[36],{904:(e,t,n)=>{n.d(t,{AE:()=>k,BM:()=>L,WR:()=>y,Z_:()=>A,f1:()=>x,gO:()=>C,kr:()=>w,l$:()=>I,p9:()=>E});var i=n(8024),a=n(3648),r=n(4927),o=n(6052),s=n(9333),d=n(8379),c=n(5693),u=n(7891),l=n(7908),f=n(5009),v=n(6104),p=(0,a.bv)(".ng"),h=(0,a.bv)(".og"),m=100,g=(new Date).getTime(),b=["Home"];function y(e){var t=b.length;b[t-1]!==e&&b.push(e)}function w(e){if(b.indexOf(e)>-1){var t=b.length;b[t-1]===e&&b.pop()}}function A(){var e=b.length;if(e>1)switch(b[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.z1)();break;case"FolderEditor":(0,s.I6)();break;case"FolderManager":(0,d.m)();break;case"Search":(0,f.Bb)();break;case"Settings":(0,v.os)();break;case"PersonalScheduleManager":(0,u.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.F)();break;case"RegisterNotification":(0,l.hy)()}}function I(){var e=b.length;if(e>1){var t=b[e-2];switch(b.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.pd)();break;case"FolderEditor":(0,s.uy)();break;case"FolderManager":(0,d.g)();break;case"Search":(0,f.rf)();break;case"Settings":(0,v.Ow)();break;case"PersonalScheduleManager":(0,u.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$)();break;case"RegisterNotification":(0,l.XG)()}}}function L(){var e=0;(0,i.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,a.bv)(".ng svg.pg").style.setProperty("--qg",`${e}px`)}function k(e){function t(){p.classList.add("rg"),p.addEventListener("animationend",(function(){p.setAttribute("displayed","false"),p.classList.remove("rg"),"function"==typeof e&&e()}),{once:!0})}var n=(new Date).getTime();n-g<m?setTimeout(t,Math.max(1,n-g)):t()}function x(){h.setAttribute("displayed","true")}function C(e){var t=0,n=0,i=window.innerWidth,a=window.innerHeight;switch(e){case"window":t=i,n=a;break;case"head":t=i,n=55;break;case"head-one-button":t=i-55,n=55;break;case"head-two-button":t=i-110,n=55;break;case"route-details-canvas":t=i-20-20,n=1680;break;case"route-bus-arrival-time-chart":t=i-45-15-20,n=75;break;case"location-bus-arrival-time-chart":t=i-30-20,n=75;break;default:t=0,n=0}return{width:t,height:n}}function E(){window.scrollTo({top:0,behavior:"instant"})}},6052:(e,t,n)=>{n.d(t,{c6:()=>f,pd:()=>v,z1:()=>p});var i=n(9566),a=n(3648),r=n(904),o=n(9119),s=(0,a.bv)(".rf"),d=(0,a.aI)(s,".wf"),c=(0,a.aI)(d,".xf"),u=(0,a.aI)(c,'.yf[group="folder-name"] .bg input'),l=(0,a.aI)(c,'.yf[group="folder-icon"] .bg .cg input');function f(){var e=u.value,t=l.value;(0,i.vV)(e,t).then((function(e){e?(p(),(0,o.a)("已建立資料夾","folder")):(0,o.a)("無法建立資料夾","error")}))}function v(){(0,r.WR)("FolderCreator"),s.setAttribute("displayed","true"),(0,r.Z_)()}function p(){s.setAttribute("displayed","false"),(0,r.l$)()}},6189:(e,t,n)=>{n.d(t,{Pk:()=>I,jW:()=>k,r7:()=>L});var i=n(9930),a=n(6788),r=n(972),o=n(8024),s=n(3648),d=n(4781),c=n(6082),u=n(4537),l=n(904),f=n(9119);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}var m="",g=(0,s.bv)(".ve"),b=(0,s.bv)(".rf"),y=(0,s.bv)(".i");function w(e){var t=document.createElement("div");return t.classList.add("ig"),t.onclick=function(){!function(e){var t;switch(m){case"editor":t=(0,s.aI)(g,'.ze ._e .af[group="folder-icon"] .ef .gf input');break;case"creator":t=(0,s.aI)(b,'.wf .xf .yf[group="folder-icon"] .bg .cg input')}t.value=e,k()}(e)},t.innerHTML=(0,u.Z)(e),{element:t,id:""}}function A(){var e;return e=function*(){var e=(0,s.aI)(y,".fg .gg");e.innerHTML="";var t=(0,o.zx)(),n=yield(0,i.z)(t);(0,a.LQ)(t);var r,d=new DocumentFragment,c=v(n);try{for(c.s();!(r=c.n()).done;){var u=w(r.value);d.appendChild(u.element)}}catch(e){c.e(e)}finally{c.f()}e.append(d)},A=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){h(r,i,a,o,s,"next",e)}function s(e){h(r,i,a,o,s,"throw",e)}o(void 0)}))},A.apply(this,arguments)}function I(e){var t=(0,s.aI)(y,".fg .hg"),n=(0,s.aI)(y,".fg .gg");if(!(0,d.iO)(e)){var i,a=(0,r.U)(e,100),o=new DocumentFragment,c=v(a);try{for(c.s();!(i=c.n()).done;){var u=w(i.value.item);o.appendChild(u.element)}}catch(e){c.e(e)}finally{c.f()}t.innerHTML="",t.append(o),t.setAttribute("displayed",a.length>0?"true":"false"),n.setAttribute("displayed",a.length>0?"false":"true")}}function L(e){var t;switch((0,l.WR)("FolderIconSelector"),e){case"editor":m="editor",t=(0,s.aI)(g,'.ze ._e .af[group="folder-icon"] .ef .gf .hf');break;case"creator":m="creator",t=(0,s.aI)(b,'.wf .xf .yf[group="folder-icon"] .bg .cg .dg')}"false"===t.getAttribute("disabled")&&(c.m?(y.setAttribute("displayed","true"),function(){A.apply(this,arguments)}(m),(0,r.L)()):(0,f.a)("資料還在下載中","download_for_offline"))}function k(){(0,l.kr)("FolderIconSelector"),y.setAttribute("displayed","false")}},8379:(e,t,n)=>{n.d(t,{g:()=>m,m:()=>g});var i=n(9566),a=n(3648),r=n(9333),o=n(4537),s=n(904);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}var l=(0,a.bv)(".je"),f=(0,a.aI)(l,".oe"),v=(0,a.aI)(f,".pe");function p(e){var t=document.createElement("div");t.classList.add("qe"),t.onclick=function(){(0,r.uy)(e.id)};var n=document.createElement("div");n.classList.add("re"),n.innerHTML=(0,o.Z)(e.icon);var i=document.createElement("div");i.classList.add("se"),i.appendChild(document.createTextNode(e.name));var a=document.createElement("div");a.classList.add("te"),a.appendChild(document.createTextNode(String(e.contentLength)));var s=document.createElement("div");return s.classList.add("ue"),s.innerHTML=(0,o.Z)("arrow_forward_ios"),t.appendChild(n),t.appendChild(i),t.appendChild(a),t.appendChild(s),{element:t,id:""}}function h(){var e;return e=function*(){var e=yield(0,i.Xi)();v.innerHTML="";var t,n=new DocumentFragment,a=d(e);try{for(a.s();!(t=a.n()).done;){var r=p(t.value);n.appendChild(r.element)}}catch(e){a.e(e)}finally{a.f()}v.append(n)},h=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){u(r,i,a,o,s,"next",e)}function s(e){u(r,i,a,o,s,"throw",e)}o(void 0)}))},h.apply(this,arguments)}function m(){(0,s.WR)("FolderManager"),l.setAttribute("displayed","true"),function(){h.apply(this,arguments)}()}function g(){(0,s.kr)("FolderManager"),l.setAttribute("displayed","false")}},9086:(e,t,n)=>{n.d(t,{eS:()=>Ee,s_:()=>me,so:()=>Ce});var i=n(5767),a=n(9566),r=n(2757),o=n(4636),s=n(5314),d=n(3459),c=n(7968),u=n(8024),l=n(3648),f=n(5579),v=n(4537),p=n(904),h=n(9119),m=n(3041),g=n(752),b=n(8011),y=n(6788),w=n(9469),A=n(8279);function I(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){I(r,i,a,o,s,"next",e)}function s(e){I(r,i,a,o,s,"throw",e)}o(void 0)}))}}function k(){return(k=L((function*(e){var t=(0,u.zx)(),n=yield(0,b.g)(t,1);(0,y.LQ)(t),(0,y.gC)(t);var i=`ml_${e}`;if(n.hasOwnProperty(i)){var a=n[i],r=(0,w.i)(1,{hash:e});navigator.share&&navigator.share({title:a.n,url:r}).then((function(){(0,h.a)("已分享地點連結","link")})).catch((function(e){(0,h.a)("已取消分享連結","cancel")}))}}))).apply(this,arguments)}function x(){return(x=L((function*(e){var t=(0,u.zx)(),n=yield(0,b.g)(t,1);(0,y.LQ)(t),(0,y.gC)(t);var i=`ml_${e}`;if(n.hasOwnProperty(i)){var a=(0,w.i)(1,{hash:e});(0,A.X8)(a)}}))).apply(this,arguments)}function C(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}var E=(0,l.bv)(".sg"),_=(0,l.aI)(E,".tg"),T=((0,l.aI)(_,".ug"),(0,l.aI)(E,'.tg .ug .vg[group="actions"]')),S=(0,l.aI)(T,'.wg .xg[action="save-to-folder"]'),M=(0,l.aI)(T,'.wg .xg[action="get-permalink"]'),$=(0,l.aI)(T,'.wg .xg[action="show-permalink-qrcode"]');function P(){var e;return e=function*(e){var t=(0,d.Js)("playing_animation"),n=yield(0,a.LH)("location",e);S.setAttribute("animation",(0,u.xZ)(t)),S.setAttribute("highlighted",(0,u.xZ)(n)),S.onclick=function(){(0,m.BI)("location",[e])},M.setAttribute("animation",(0,u.xZ)(t)),M.onclick=function(){!function(e){k.apply(this,arguments)}(e)},$.setAttribute("animation",(0,u.xZ)(t)),$.onclick=function(){!function(e){x.apply(this,arguments)}(e)}},P=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){C(r,i,a,o,s,"next",e)}function s(e){C(r,i,a,o,s,"throw",e)}o(void 0)}))},P.apply(this,arguments)}function j(e){(0,p.WR)("LocationDetails"),E.setAttribute("displayed","true"),function(e){P.apply(this,arguments)}(e)}function Z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function F(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}var N=(0,l.bv)(".yg"),R=(0,l.aI)(N,".zg"),z=(0,l.aI)(R,"._g"),O=(0,l.aI)(R,".ah"),D=(0,l.aI)(N,".bh"),B=(0,l.aI)(R,".ch"),W=(0,l.aI)(B,".dh"),q=(0,l.aI)(R,".eh"),Q=(0,l.aI)(q,".fh"),U=(0,l.aI)(R,".gh .hh"),X={},J=!0,G=!1,K=0,V=0,Y=0,ee={},te=0,ne=!1,ie=1e4,ae=15e3,re=5e3,oe=15e3,se=!0,de=0,ce=0,ue="",le=!1,fe=!1,ve=!1,pe="",he=20;function me(){D.addEventListener("touchstart",(function(){K=Math.round(D.scrollLeft/te)}),{passive:!0}),D.addEventListener("scroll",(function(e){ne=!0;var t=e.target.scrollLeft/te;V=t>K?K+1:K-1;var n=ee[`g_${K}`]||{width:0,offset:0},i=ee[`g_${V}`]||{width:0,offset:0},a=n.width+(i.width-n.width)*Math.abs(t-K),r=-1*(n.offset+(i.offset-n.offset)*Math.abs(t-K))+.5*te-.5*a;ge(Y,r,a-he,t),t===V&&(K=Math.round(D.scrollLeft/te),ne=!1)}),{passive:!0})}function ge(e,t,n,i){D.style.setProperty("--ih",e.toString()),Q.style.setProperty("--jh",n.toString()),W.style.setProperty("--kh",`${t.toFixed(5)}px`),W.style.setProperty("--lh",i.toFixed(5))}function be(e){var t=e;if(le){var n=t.detail.progress-1;U.style.setProperty("--oh",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,be)}function ye(){var e=(0,u.zx)(),t=document.createElement("div");t.classList.add("ph"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var n=document.createElement("div");n.classList.add("qh");var i=document.createElement("div");i.classList.add("rh");var a=document.createElement("div");a.classList.add("sh"),a.setAttribute("code","-1"),a.setAttribute("displayed","false");var r=document.createElement("div");r.classList.add("th"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),i.appendChild(a),i.appendChild(r);var o=document.createElement("div");o.classList.add("uh");var s=document.createElement("div");s.classList.add("vh");var d=document.createElement("div");d.classList.add("wh");var c=document.createElement("div");c.classList.add("xh");var f=document.createElement("div");f.classList.add("_a"),f.setAttribute("code","0"),f.setAttribute("displayed","false");var p=document.createElement("div");p.classList.add("ab"),p.setAttribute("code","0"),p.setAttribute("displayed","true"),c.appendChild(f),c.appendChild(p);var h=document.createElement("div");h.classList.add("yh"),h.innerHTML=(0,v.Z)("keyboard_arrow_down"),h.onclick=function(){!function(e){var t=(0,l.aI)(D,`.fi .ii .ph#${e}`),n=(0,l.aI)(t,"._h"),i=t.parentElement,a=(0,l.ji)(t,"ph"),r=a.length,o=i.getBoundingClientRect(),s=t.getBoundingClientRect(),d=s.top-o.top,c="true"===t.getAttribute("stretched"),u="true"===t.getAttribute("animation");if(u){var f=c?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--gj",`${d}px`);for(var v=0;v<r;v++){var p=a[v];p.setAttribute("push-direction",f),p.setAttribute("push-state","1")}t.addEventListener("transitionend",(function(){for(var e=0;e<r;e++){var n=a[e];n.setAttribute("push-direction","0"),n.setAttribute("push-state","0")}t.setAttribute("stretching","false")}),{once:!0}),t.addEventListener("transitionstart",(function(){for(var e=0;e<r;e++){a[e].setAttribute("push-state","2")}}),{once:!0})}c?(u?n.addEventListener("transitionend",(function(){n.setAttribute("displayed","false")}),{once:!0}):n.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(n.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}(e)};var b=document.createElement("div");b.classList.add("zh"),d.appendChild(c),d.appendChild(h),d.appendChild(b),n.appendChild(i),n.appendChild(o),n.appendChild(s),n.appendChild(d);var y=document.createElement("div");y.classList.add("_h"),y.setAttribute("displayed","false");var w=document.createElement("div");w.classList.add("ai");var A=document.createElement("div");A.classList.add("bi"),A.setAttribute("highlighted","true"),A.setAttribute("type","tab"),A.setAttribute("code","0");var I=document.createElement("div");I.classList.add("ci"),I.innerHTML=(0,v.Z)("directions_bus"),A.appendChild(I),A.appendChild(document.createTextNode("公車")),A.onclick=function(){_e(e,0)};var L=document.createElement("div");L.classList.add("bi"),L.setAttribute("highlighted","false"),L.setAttribute("type","tab"),L.setAttribute("code","1");var k=document.createElement("div");k.classList.add("ci"),k.innerHTML=(0,v.Z)("departure_board"),L.appendChild(k),L.appendChild(document.createTextNode("抵達時間")),L.onclick=function(){_e(e,1)};var x=document.createElement("div");x.classList.add("bi"),x.setAttribute("highlighted","false"),x.setAttribute("type","save-to-folder");var C=document.createElement("div");C.classList.add("ci"),C.innerHTML=(0,v.Z)("folder"),x.appendChild(C),x.appendChild(document.createTextNode("儲存")),x.onclick=function(){(0,m.BI)("stop-on-location",[e,null,null])};var E=document.createElement("div");E.classList.add("bi"),E.setAttribute("highlighted","false"),E.setAttribute("type","schedule-notification"),E.setAttribute("enabled","true");var _=document.createElement("div");_.classList.add("ci"),_.innerHTML=(0,v.Z)("notifications"),E.appendChild(_),E.appendChild(document.createTextNode("到站通知")),E.onclick=function(){(0,g.Ho)("stop-on-location",[e,null,null,null])},w.appendChild(A),w.appendChild(L),w.appendChild(x),w.appendChild(E);var T=document.createElement("div");T.classList.add("di"),T.setAttribute("displayed","true");var S=document.createElement("div");return S.classList.add("ei"),S.setAttribute("displayed","false"),y.appendChild(w),y.appendChild(T),y.appendChild(S),t.appendChild(n),t.appendChild(y),{element:t,id:e}}function we(){var e=document.createElement("div");e.classList.add("fi");var t=document.createElement("div");t.classList.add("gi");var n=document.createElement("div");n.classList.add("hi"),t.appendChild(n);var i=document.createElement("div");return i.classList.add("ii"),e.appendChild(t),e.appendChild(i),{element:e,id:""}}function Ae(){var e=document.createElement("div");e.classList.add("ki");var t=document.createElement("div");t.classList.add("li");var n=document.createElement("div");return n.classList.add("mi"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function Ie(e,t,n){function i(e,i,r){function s(e,t,n){var i=e.getBoundingClientRect(),a=i.top,r=i.left,o=i.bottom,s=i.right,d=window.innerWidth,c=window.innerHeight,u=(0,l.aI)(e,".xh"),f=(0,l.aI)(u,"._a"),v=(0,l.aI)(u,".ab");f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,n&&o>0&&a<c&&s>0&&r<d?(v.addEventListener("animationend",(function(){v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,v.classList.remove("kb"),f.setAttribute("displayed","false")}),{once:!0}),f.setAttribute("displayed","true"),v.classList.add("kb")):(v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text)}function d(e,t,n){var i=e.getBoundingClientRect(),a=i.top,r=i.left,o=i.bottom,s=i.right,d=window.innerWidth,c=window.innerHeight,u=(0,l.aI)(e,".rh"),f=(0,l.aI)(u,".sh"),v=(0,l.aI)(u,".th");f.setAttribute("code",t.ranking.code.toString()),f.innerText=t.ranking.text,n&&o>0&&a<c&&s>0&&r<d?(v.addEventListener("animationend",(function(){v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,v.classList.remove("ni"),f.setAttribute("displayed","false")}),{once:!0}),f.setAttribute("displayed","true"),v.classList.add("ni")):(v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text)}function c(e,t){(0,l.aI)(e,".uh").innerText=t.route_direction}function p(e,t){(0,l.aI)(e,".vh").innerText=t.route_name}function h(e,t){(0,l.aI)(e,".di").innerHTML=0===t.buses.length?'<div class="oi">目前沒有公車可顯示</div>':t.buses.map((function(e){return`<div class="pi" on-this-route="${e.onThisRoute}"><div class="qi"><div class="ri">${(0,v.Z)("directions_bus")}</div><div class="si">${e.carNumber}</div></div><div class="ti"><div class="ui">路線：${e.RouteName}</div><div class="vi">狀態：${e.status.text}</div><div class="wi">類型：${e.type}</div></div></div>`})).join("")}function b(e,t){(0,l.aI)(e,".ei").innerHTML=0===t.busArrivalTimes.length?'<div class="xi">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map((function(e){return`<div class="yi"><div class="zi"><div class="_i">${(0,v.Z)("calendar_view_day")}</div><div class="aj">${e.personalSchedule.name}</div><div class="bj">週${(0,f.kd)(e.day).name} ${(0,f.pn)(e.personalSchedule.period.start)} - ${(0,f.pn)(e.personalSchedule.period.end)}</div></div><div class="cj">${e.chart}</div></div>`})).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function w(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function A(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}function I(e,t){var n=(0,l.aI)(e,"._h"),i=(0,l.aI)(n,".ai"),r=(0,l.aI)(i,'.bi[type="save-to-folder"]');r.onclick=function(){(0,m.BI)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,a.LH)("stop",t.stopId).then((function(e){r.setAttribute("highlighted",(0,u.xZ)(e))}))}function L(e,t){var n=(0,l.aI)(e,"._h"),i=(0,l.aI)(n,".ai"),a=(0,l.aI)(i,'.bi[type="schedule-notification"]');a.onclick=function(){(0,g.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var r=(0,o.Zc)(t.stopId);a.setAttribute("highlighted",(0,u.xZ)(r))}null===r?(s(e,i,n),d(e,i,n),c(e,i),p(e,i),h(e,i),b(e,i),y(e,t),w(e,n),A(e,t),I(e,i),L(e,i)):(i.status.time!==r.status.time&&(s(e,i,n),L(e,i)),r.ranking.number===i.ranking.number&&r.ranking.code===i.ranking.code||d(e,i,n),r.stopId!==i.stopId&&(c(e,i),p(e,i),I(e,i)),(0,u.hw)(r.buses,i.buses)||h(e,i),(0,u.hw)(r.busArrivalTimes,i.busArrivalTimes)||b(e,i),n!==J&&w(e,n),t!==G&&(y(e,t),A(e,t)))}function r(e,i,a){function r(e,t){(0,l.aI)(e,".li").innerHTML=(0,v.Z)(t.icon)}function o(e,t){(0,l.aI)(e,".mi").innerHTML=t.value}function s(e,t){e.setAttribute("animation",(0,u.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,u.xZ)(t))}null===a?(r(e,i),o(e,i),s(e,n),d(e,t)):((0,u.hw)(a.icon,i.icon)||r(e,i),(0,u.hw)(a.value,i.value)||o(e,i),n!==J&&s(e,n),t!==G&&d(e,t))}var s=(0,p.gO)("window"),d=s.width,h=s.height,b=e.groupQuantity,y=e.itemQuantity,w=e.groupedItems,A=e.groups;Y=b,te=d;for(var I=0,L=0;L<b;L++){var k=(0,c.q_)(A[`g_${L}`].name,500,"17px",'"Noto Sans TC", sans-serif')+he;ee[`g_${L}`]={width:k,offset:I},I+=k}var x=-1*ee[`g_${K}`].offset+.5*te-.5*ee[`g_${K}`].width;ne||ge(Y,x,ee[`g_${K}`].width-he,K),z.innerHTML=`<span>${e.LocationName}</span>`,z.setAttribute("animation",(0,u.xZ)(n)),z.setAttribute("skeleton-screen",(0,u.xZ)(t)),O.onclick=function(){j(e.hash)},B.setAttribute("animation",(0,u.xZ)(n)),B.setAttribute("skeleton-screen",(0,u.xZ)(t)),q.setAttribute("skeleton-screen",(0,u.xZ)(t));var C,E=(0,l.jg)(D,".fi").length;if(b!==E){var _=E-b;if(_<0)for(var T=0;T<Math.abs(_);T++){var S=we();D.appendChild(S.element);var M=(C=void 0,(C=document.createElement("div")).classList.add("ji"),{element:C,id:""});W.appendChild(M.element)}else for(var $=(0,l.jg)(D,".fi"),P=(0,l.jg)(W,".ji"),Z=0;Z<Math.abs(_);Z++){var H=E-1-Z;$[H].remove(),P[H].remove()}}for(var F=(0,l.jg)(D,".fi"),N=0;N<b;N++){var R=`g_${N}`,Q=F[N],U=(0,l.jg)(Q,".ii .ph").length;if(y[R]!==U){var V=U-y[R];if(V<0)for(var ie=(0,l.aI)(Q,".ii"),ae=0;ae<Math.abs(V);ae++){var re=ye();ie.appendChild(re.element)}else for(var oe=(0,l.jg)(Q,".ii .ph"),se=0;se<Math.abs(V);se++){oe[U-1-se].remove()}}var de=(0,l.jg)((0,l.jg)(D,".fi")[N],".gi .hi .ki").length,ce=A[R].properties.length;if(ce!==de){var ue=de-ce;if(ue<0)for(var le=(0,l.aI)(Q,".gi"),fe=(0,l.aI)(le,".hi"),ve=0;ve<Math.abs(ue);ve++){var pe=Ae();fe.appendChild(pe.element)}else for(var me=(0,l.aI)(Q,".gi"),be=(0,l.aI)(me,".hi"),Ie=(0,l.jg)(be,".ki"),Le=0;Le<Math.abs(ue);Le++){Ie[de-1-Le].remove()}}}for(var ke=0;ke<b;ke++){var xe=`g_${ke}`,Ce=(0,l.jg)(W,".ji")[ke];Ce.innerHTML=`<span>${A[xe].name}</span>`,Ce.style.setProperty("--dj",`${ee[xe].width}px`),Ce.style.setProperty("--ej",ke.toString());for(var Ee=(0,l.jg)(D,".fi")[ke],_e=A[xe].properties.length,Te=0;Te<_e;Te++){var Se=A[xe].properties[Te],Me=(0,l.jg)(Ee,".gi .hi .ki")[Te];if(X.hasOwnProperty("groups"))if(X.groups.hasOwnProperty(xe))if(X.groups[xe].properties[Te])r(Me,Se,X.groups[xe].properties[Te]);else r(Me,Se,null);else r(Me,Se,null);else r(Me,Se,null)}for(var $e=0;$e<y[xe];$e++){var Pe=(0,l.jg)(Ee,".ii .ph")[$e],je=w[xe][$e];if(X.hasOwnProperty("groupedItems"))if(X.groupedItems.hasOwnProperty(xe))if(X.groupedItems[xe][$e])i(Pe,je,X.groupedItems[xe][$e]);else i(Pe,je,null);else i(Pe,je,null);else i(Pe,je,null)}}X=e,J=n,G=t}function Le(){return ke.apply(this,arguments)}function ke(){var e;return e=function*(){var e=(0,d.Js)("playing_animation"),t=(0,d.Js)("refresh_interval"),n=(0,p.gO)("location-bus-arrival-time-chart");se=t.dynamic,ae=t.baseInterval,le=!0,ue=(0,u.zx)(),U.setAttribute("refreshing","true"),U.classList.remove("nh"),document.addEventListener(ue,be);var a=yield(0,r.R)(pe,n.width,n.height,ue);Ie(a,!1,e);var o=0;se&&(o=yield(0,i.wz)()),de=(new Date).getTime(),ce=se?Math.max(de+re,a.dataUpdateTime+ae/o):de+ae,oe=Math.max(re,ce-de),le=!1,U.setAttribute("refreshing","false"),U.style.setProperty("--mh",`${oe}ms`),U.classList.add("nh")},ke=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){F(r,i,a,o,s,"next",e)}function s(e){F(r,i,a,o,s,"throw",e)}o(void 0)}))},ke.apply(this,arguments)}function xe(){Le().then((function(){fe?setTimeout((function(){xe()}),Math.max(re,ce-(new Date).getTime())):ve=!1})).catch((function(e){fe?((0,h.a)(`地點網路連線中斷，將在${ie/1e3}秒後重試。`,"error"),setTimeout((function(){xe()}),ie)):ve=!1}))}function Ce(e){(0,p.WR)("Location"),(0,s.XK)("location",e),pe=e,K=0,N.setAttribute("displayed","true"),D.scrollLeft=0,function(){for(var e=(0,d.Js)("playing_animation"),t=(0,p.gO)("window"),n=(t.width,t.height),i={g_0:Math.floor(n/50)+5,g_1:Math.floor(n/50)+5},a={},r=0;r<2;r++){var o=`g_${r}`;a[o]=[];for(var s=0;s<i[o];s++)a[o].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}Ie({groupedItems:a,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:i,LocationName:"載入中",dataUpdateTime:0},!0,e)}(),fe||(fe=!0,ve?Le():(ve=!0,xe())),(0,p.Z_)()}function Ee(){N.setAttribute("displayed","false"),fe=!1,(0,p.l$)()}function _e(e,t){var n,i=(0,l.aI)(D,`.fi .ii .ph#${e}`),a=(0,l.aI)(i,"._h"),r=(0,l.aI)(a,".ai"),o=Z((0,l.jg)(r,'.bi[highlighted="true"][type="tab"]'));try{for(o.s();!(n=o.n()).done;){n.value.setAttribute("highlighted","false")}}catch(e){o.e(e)}finally{o.f()}switch((0,l.aI)(r,`.bi[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,l.aI)(i,".di").setAttribute("displayed","true"),(0,l.aI)(i,".ei").setAttribute("displayed","false");break;case 1:(0,l.aI)(i,".di").setAttribute("displayed","false"),(0,l.aI)(i,".ei").setAttribute("displayed","true")}}},9333:(e,t,n)=>{n.d(t,{Bo:()=>E,I6:()=>x,uy:()=>k});var i=n(9566),a=n(8024),r=n(3648),o=n(6189),s=n(4537),d=n(904),c=n(9119);function u(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var v=(0,r.bv)(".ve"),p=(0,r.aI)(v,".we"),h=(0,r.aI)(p,".xe"),m=(0,r.aI)(v,".ze"),g=(0,r.aI)(m,"._e"),b=(0,r.aI)(g,'.af[group="folder-name"] .ef input'),y=(0,r.aI)(g,'.af[group="folder-icon"] .ef .gf input'),w=(0,r.aI)(g,'.af[group="folder-icon"] .ef .gf .hf'),A=(0,r.aI)(g,'.af[group="folder-content"] .ef');function I(e,t){var n=(0,a.zx)(),o=document.createElement("div");o.id=n,o.classList.add("if"),o.setAttribute("type",t.type);var d="",u="",l="";switch(t.type){case"stop":l="location_on",d=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`,u=t.name;break;case"route":l="route",d=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`,u=t.name;break;case"bus":d="",u=t.name;break;case"empty":l="lightbulb",d="提示",u="沒有內容";break;default:l="",d="null",u="null"}var f=document.createElement("div");f.classList.add("jf"),f.innerHTML=(0,s.Z)(l);var p=document.createElement("div");p.classList.add("kf"),p.appendChild(document.createTextNode(d));var h=document.createElement("div");h.classList.add("lf"),h.appendChild(document.createTextNode(u));var m=document.createElement("div");m.classList.add("mf");var g=document.createElement("div");g.classList.add("nf"),g.innerHTML=(0,s.Z)("keyboard_arrow_down"),g.onclick=function(){C(n,e.id,t.type,t.id,"up")};var b=document.createElement("div");b.classList.add("of"),b.innerHTML=(0,s.Z)("keyboard_arrow_down"),b.onclick=function(){C(n,e.id,t.type,t.id,"down")};var y=document.createElement("div");y.classList.add("pf"),y.innerHTML=(0,s.Z)("delete"),y.onclick=function(){!function(e,t,n,a){var o=(0,r.aI)(v,`.ze ._e .af[group="folder-content"] .ef .if#${e}`);(0,i.NC)(t,n,a).then((function(e){if(e)switch(o.remove(),n){case"stop":(0,c.a)("已移除站牌","delete");break;case"route":(0,c.a)("已移除路線","delete")}else(0,c.a)("無法移除","error")}))}(n,e.id,t.type,t.id)};var w=document.createElement("div");w.classList.add("qf");var A=document.createElement("div");return A.classList.add("qf"),m.appendChild(g),m.appendChild(b),m.appendChild(y),m.appendChild(w),m.appendChild(A),o.appendChild(f),o.appendChild(p),o.appendChild(h),o.appendChild(m),{element:o,id:n}}function L(){var e;return e=function*(e){!function(e,t){b.value=e.name,y.value=e.icon,h.onclick=function(){E(e.id)},A.innerHTML="";var n,i=new DocumentFragment,a=l(t);try{for(a.s();!(n=a.n()).done;){var r=n.value,o=I(e,r);i.appendChild(o.element)}}catch(e){a.e(e)}finally{a.f()}A.append(i)}(yield(0,i.L2)(e),yield(0,i.eD)(e))},L=function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){u(r,i,a,o,s,"next",e)}function s(e){u(r,i,a,o,s,"throw",e)}o(void 0)}))},L.apply(this,arguments)}function k(e){(0,d.WR)("FolderEditor"),v.setAttribute("displayed","true"),function(e){L.apply(this,arguments)}(e),(0,d.Z_)()}function x(){v.setAttribute("displayed","false"),(0,d.l$)()}function C(e,t,n,a,o){var s=(0,r.aI)(v,`.ze ._e .af[group="folder-content"] .ef .if#${e}`);(0,i.bq)(t,n,a,o).then((function(e){if(e)switch(o){case"up":var t=s.previousElementSibling;t&&s.parentNode.insertBefore(s,t),(0,c.a)("已往上移","arrow_circle_up");break;case"down":var n=s.nextElementSibling;n&&s.parentNode.insertBefore(n,s),(0,c.a)("已往下移","arrow_circle_down")}else(0,c.a)("無法移動","error")}))}function E(e){var t=b.value,n=y.value;(0,i.g$)(e,t,n),x()}w.onclick=function(){(0,o.r7)("editor")}}}]);
//# sourceMappingURL=b4308b671d93ae1241f8.js.map