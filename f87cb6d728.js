"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[600],{112(){},124(){},245(){},321(){},626(){},904(e,t,a){a.d(t,{a:()=>k,b:()=>C,c:()=>A,d:()=>g,e:()=>_,f:()=>y,g:()=>S,h:()=>L,i:()=>w});var n=a(8179),i=a(8024),r=a(4884),s=a(6052),c=a(9333),o=a(8379),u=a(5693),l=a(7891),d=a(7908),f=a(5009),p=a(6104),h=(0,n.c)(".xf"),v=(0,n.c)(".ag"),b=(new Date).getTime(),m=["Home"];function g(e){var t=m.length;m[t-1]!==e&&m.push(e)}function y(e){if(m.indexOf(e)>-1){var t=m.length;m[t-1]===e&&m.pop()}}function k(){var e=m.length;if(e>1)switch(m[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.a)();break;case"FolderEditor":(0,c.a)();break;case"FolderManager":(0,o.a)();break;case"Search":(0,f.a)();break;case"Settings":(0,p.a)();break;case"PersonalScheduleManager":(0,l.a)();break;case"PersonalScheduleEditor":(0,u.a)();break;case"Bus":(0,r.b)();break;case"RegisterNotification":(0,d.a)()}}function A(){var e=m.length;if(e>1){var t=m[e-2];switch(m.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.c)();break;case"FolderEditor":(0,c.b)();break;case"FolderManager":(0,o.b)();break;case"Search":(0,f.c)();break;case"Settings":(0,p.d)();break;case"PersonalScheduleManager":(0,l.b)();break;case"PersonalScheduleEditor":(0,u.b)();break;case"Bus":(0,r.c)();break;case"RegisterNotification":(0,d.b)()}}}function L(){var e=0;(0,i.f)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.c)(".xf svg.yf").style.setProperty("--zf",`${e}px`)}function C(e){function t(){h.classList.add("_f"),h.addEventListener("animationend",function(){h.setAttribute("displayed","false"),h.classList.remove("_f"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-b<100?setTimeout(t,Math.max(1,a-b)):t()}function w(){v.setAttribute("displayed","true")}function _(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function S(){window.scrollTo({top:0,behavior:"instant"})}},969(){},1003(){},1195(){},1351(e,t,a){a.d(t,{a:()=>_,b:()=>w,c:()=>S,d:()=>x});var n=a(467),i=a(8011),r=a(6788),s=a(6983),c=a(3459),o=a(8179),u=a(8024),l=a(9469),d=a(4537),f=a(904),p=a(9119),h=a(8279),v={},b=!1,m=!1,g=(0,o.c)(".hj"),y=(0,o.e)(g,".mj"),k=(0,o.e)(y,".nj");function A(){var e=(0,o.a)();e.classList.add("oj");var t=(0,o.a)();t.classList.add("pj"),t.appendChild((0,d.a)()),e.appendChild(t);var a=(0,o.a)();return a.classList.add("qj"),e.appendChild(a),e}function L(e,t,a){function n(e,n,i){function r(e,t){var a=(0,o.e)(e,".pj");(0,d.c)(a,t.icon)}function s(e,t){(0,o.e)(e,".qj").innerText=t.name}function c(e,t){e.onclick=t.action}function l(e,t){e.setAttribute("animation",(0,u.a)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,u.a)(t))}null==i?(r(e,n),s(e,n),c(e,n),l(e,a),f(e,t)):(i.key!==n.key&&(r(e,n),s(e,n),c(e,n)),a!==b&&l(e,a),t!==m&&f(e,t))}var i=e.actions,r=e.actionsQuantity,s=Array.from((0,o.d)(k,".oj")),c=s.length;if(r!==c){var l=c-r;if(l<0){for(var f=new DocumentFragment,p=0;p>l;p--){var h=A();f.appendChild(h),s.push(h)}k.append(f)}else if(l>0)for(var g=c-1,y=c-l-1;g>y;g--)s[g].remove(),s.splice(g,1)}for(var L=0;L<r;L++){var C=s[L],w=i[L];if((0,u.e)(v,"actions"))if(v.actions[L])n(C,w,v.actions[L]);else n(C,w,null);else n(C,w,null)}v=e,b=a,m=t}function C(){return(C=(0,n.a)(function*(e){var t=(0,c.b)("playing_animation"),a=(0,u.c)();L(yield(0,s.a)(e,a),!1,t)})).apply(this,arguments)}function w(e){(0,f.d)("LocationDetails"),g.setAttribute("displayed","true"),function(){for(var e=(0,c.b)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});L({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){C.apply(this,arguments)}(e)}function _(){(0,f.f)("LocationDetails"),g.setAttribute("displayed","false")}function S(e){return T.apply(this,arguments)}function T(){return(T=(0,n.a)(function*(e){var t=(0,u.c)(),a=yield(0,i.a)(t,1);(0,r.a)(t),(0,r.b)(t);var n=`ml_${e}`;if((0,u.e)(a,n)){var s=a[n],c=(0,l.a)(1,{hash:e});navigator.share&&navigator.share({title:s.n,url:c}).then(function(){(0,p.a)("check_circle","已分享地點")}).catch(function(e){(0,p.a)("cancel","已取消分享")})}})).apply(this,arguments)}function x(e){return j.apply(this,arguments)}function j(){return(j=(0,n.a)(function*(e){var t=(0,u.c)(),a=yield(0,i.a)(t,1);(0,r.a)(t),(0,r.b)(t);var n=`ml_${e}`;if((0,u.e)(a,n)){var s=(0,l.a)(1,{hash:e});(0,h.b)(s)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(e,t,a){a.d(t,{a:()=>Q,b:()=>H});var n=a(467),i=a(5767),r=a(365),s=a(3422),c=a(3459),o=a(8179),u=a(8024),l=a(4537),d=a(904),f=a(9119),p=(0,o.c)("._k"),h=(0,o.e)(p,".cl"),v=(0,o.e)(h,".gl"),b=(0,o.e)(v,".hl"),m=(0,o.e)(p,".jl"),g=(0,o.e)(m,".kl"),y={},k=!1,A=15e3,L=5e3,C=15e3,w=!0,_=0,S=0,T="",x=!1,j=!1,M=!1;function D(e){var t=e;if(x){var a=t.detail.progress-1;b.style.setProperty("--al",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,D)}function E(){var e=(0,o.a)();e.classList.add("ll");var t=(0,o.a)();t.classList.add("ml"),e.appendChild(t);var a=(0,o.a)();a.classList.add("nl");var n=(0,o.a)();n.classList.add("ol"),a.appendChild(n);var i=(0,o.a)();i.classList.add("pl"),a.appendChild(i);var r=(0,o.a)();r.classList.add("ql"),a.appendChild(r);var s=(0,o.a)();s.classList.add("rl");var c=document.createElement("span");return c.appendChild((0,l.b)("close")),s.appendChild(c),a.appendChild(s),e.appendChild(a),e}function F(e,t,a){function n(e,n,i){function r(e,t){(0,o.e)(e,".ml").innerText=t.hours}function s(e,t){var a=(0,o.e)(e,".nl");(0,o.e)(a,".ol").innerText=t.minutes}function c(e,t){var a=(0,o.e)(e,".nl");(0,o.e)(a,".ql").innerText=t.name}function l(e,t){var a=(0,o.e)(e,".nl");(0,o.e)(a,".pl").innerText=`${t.route.name} - 往${t.route.direction}`}function d(e,t){var a=(0,o.e)(e,".nl");(0,o.e)(a,".rl").onclick=function(){!function(e,t){N.apply(this,arguments)}(e,t.schedule_id)}}function f(e,t){e.setAttribute("first",(0,u.a)(t.is_first))}function p(e,t){e.setAttribute("animation",(0,u.a)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,u.a)(t))}null==i?(r(e,n),s(e,n),c(e,n),l(e,n),d(e,n),f(e,n),p(e,a),h(e,t)):(n.hours!==i.hours&&r(e,n),n.minutes!==i.minutes&&s(e,n),(0,u.b)(i.schedule_id,n.schedule_id)||(c(e,n),l(e,n),d(e,n)),i.is_first!==n.is_first&&f(e,n),false!==a&&p(e,a),k!==t&&h(e,t))}var i=e.itemQuantity,r=e.items,s=Array.from((0,o.d)(g,".ll")),c=s.length;if(i!==c){var l=c-i;if(l<0){for(var d=new DocumentFragment,f=0;f>l;f--){var p=E();d.appendChild(p),s.push(p)}g.append(d)}else if(l>0)for(var h=c-1,v=c-l-1;h>v;h--)s[h].remove(),s.splice(h,1)}for(var b=0;b<i;b++){var m=s[b],A=r[b];if((0,u.e)(y,"items"))if(y.items[b])n(m,A,y.items[b]);else n(m,A,null);else n(m,A,null)}y=e,k=t}function P(){return I.apply(this,arguments)}function I(){return(I=(0,n.a)(function*(){var e=(0,c.b)("playing_animation"),t=(0,c.b)("refresh_interval");w=t.dynamic,A=t.baseInterval,x=!0,T=(0,u.c)(),b.setAttribute("refreshing","true"),b.classList.remove("il"),document.addEventListener(T,D);var a=yield(0,s.h)(T);F(a,!1,e);var n=0;w&&(n=yield(0,i.c)()),_=(new Date).getTime(),S=w?Math.max(_+L,a.dataUpdateTime+A/n):_+A,C=Math.max(L,S-_),x=!1,b.setAttribute("refreshing","false"),b.style.setProperty("--bl",`${C}ms`),b.classList.add("il")})).apply(this,arguments)}function R(){return $.apply(this,arguments)}function $(){return($=(0,n.a)(function*(){P().then(function(){j?setTimeout(function(){R()},Math.max(L,S-(new Date).getTime())):M=!1}).catch(function(e){j?setTimeout(function(){R()},1e4):M=!1})})).apply(this,arguments)}function H(){(0,d.d)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var e=(0,c.b)("playing_animation"),t=(0,d.e)("window"),a=(t.width,t.height),n=Math.floor(a/50)+5,i=[],r=0;r<n;r++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});F({items:i,itemQuantity:n,dataUpdateTime:0},!0,e)}(),j||(j=!0,M?P():(M=!0,R())),(0,d.a)()}function Q(){p.setAttribute("displayed","false"),j=!1,(0,d.c)()}function N(){return(N=(0,n.a)(function*(e,t){if((0,f.a)("manufacturing","處理中"),yield(0,r.a)(t)){if(e.remove(),(0,f.a)("check_circle","已取消通知"),!x){var a=(0,c.b)("playing_animation");F(yield(0,s.h)(T),!1,a)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4537(e,t,a){a.d(t,{a:()=>r,b:()=>i,c:()=>s});var n=a(8179);function i(e){var t=document.createElement("span");return t.classList.add("sa"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("sa"),e}function s(e,t){(0,n.e)(e,"span.sa").innerText=t}},4620(){},4721(){},4935(){},5068(){},5135(){},5259(){},5374(){},5504(){},5666(){},5693(e,t,a){a.d(t,{a:()=>w,b:()=>C,c:()=>k,d:()=>_});var n=a(3453),i=a(467),r=a(5352),s=a(8179),c=a(5579),o=a(904),u=a(9119),l=(0,s.c)(".nk"),d=(0,s.e)(l,".sk"),f=(0,s.e)(l,".ok"),p=(0,s.e)(f,".pk"),h=(0,s.e)(d,".tk"),v=(0,s.e)(h,'.uk[group="schedule-name"] .yk input'),b=(0,s.e)(h,'.uk[group="schedule-start-time"] .yk input'),m=(0,s.e)(h,'.uk[group="schedule-end-time"] .yk input'),g=(0,s.e)(h,'.uk[group="schedule-days"] .yk'),y=(0,s.d)(g,".zk");function k(e){return A.apply(this,arguments)}function A(){return(A=(0,i.a)(function*(e){for(var t=v.value,a=b.value,i=m.value,s=String(a).split(":").map(function(e){return parseInt(e)}),c=(0,n.a)(s,2),o=c[0],l=c[1],d=String(i).split(":").map(function(e){return parseInt(e)}),f=(0,n.a)(d,2),p=f[0],h=f[1],g=[],k=0;k<7;k++){var A=y[k],L=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===L&&g.push(C)}var _=yield(0,r.b)(e);_.name=t,_.days=g,_.period.start.hours=o,_.period.start.minutes=l,_.period.end.hours=p,_.period.end.minutes=h,yield(0,r.e)(_),(0,u.a)("check_circle","已儲存變更"),w()})).apply(this,arguments)}function L(){return(L=(0,i.a)(function*(e){var t=yield(0,r.b)(e);v.value=t.name,b.value=(0,c.i)(t.period.start),m.value=(0,c.i)(t.period.end);for(var a=0;a<7;a++){var n=y[a];t.days.indexOf(a)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}p.onclick=function(){k(e)}})).apply(this,arguments)}function C(e){(0,o.d)("PersonalScheduleEditor"),l.setAttribute("displayed","true"),function(e){L.apply(this,arguments)}(e),(0,o.a)()}function w(){l.setAttribute("displayed","false"),(0,o.c)()}function _(e){var t=(0,s.e)(g,`.zk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6764(){},6780(){},6907(){},7537(){},7891(e,t,a){a.d(t,{a:()=>v,b:()=>h});var n=a(467),i=a(5352),r=a(8179),s=a(4537),c=a(904),o=a(5693),u=(0,r.c)(".rj"),l=(0,r.e)(u,".wj"),d=(0,r.e)(l,".xj");function f(e){var t=(0,r.a)();t.classList.add("yj"),t.onclick=function(){(0,o.b)(e.id)};var a=(0,r.a)();a.classList.add("zj"),a.innerText=e.name,t.appendChild(a);var n=(0,r.a)();n.classList.add("_j");var i=document.createElement("span");return i.appendChild((0,s.b)("arrow_forward_ios")),n.appendChild(i),t.appendChild(n),t}function p(){return(p=(0,n.a)(function*(){d.innerHTML="";var e=yield(0,i.d)(),t=new DocumentFragment;for(var a of e){var n=f(a);t.appendChild(n)}d.append(t)})).apply(this,arguments)}function h(){(0,c.d)("PersonalScheduleManager"),u.setAttribute("displayed","true"),function(){p.apply(this,arguments)}()}function v(){(0,c.f)("PersonalScheduleManager"),u.setAttribute("displayed","false")}},7943(){},8279(e,t,a){a.d(t,{a:()=>u,b:()=>o});var n=a(8179),i=a(2648),r=a(904),s=(0,n.c)(".zl"),c=(0,n.e)(s,".dm");function o(e){(0,r.d)("QRCode"),s.setAttribute("displayed","true"),function(e){var t=(0,i.a)(e,"M",.5,.3,1,"var(--a)",4);c.innerHTML=t}(e)}function u(){(0,r.f)("QRCode"),s.setAttribute("displayed","false")}},8380(e,t,a){a.d(t,{a:()=>g,b:()=>b,c:()=>m,d:()=>y});var n=a(3453),i=a(5352),r=a(8179),s=a(904),c=a(9119),o=(0,r.c)(".ak"),u=(0,r.e)(o,".fk"),l=(0,r.e)(u,".gk"),d=(0,r.e)(l,'.hk[group="schedule-name"] .lk input'),f=(0,r.e)(l,'.hk[group="schedule-start-time"] .lk input'),p=(0,r.e)(l,'.hk[group="schedule-end-time"] .lk input'),h=(0,r.e)(l,'.hk[group="schedule-days"] .lk'),v=(0,r.d)(h,".mk");function b(){for(var e=d.value,t=f.value,a=p.value,r=String(t).split(":").map(function(e){return parseInt(e)}),s=(0,n.a)(r,2),o=s[0],u=s[1],l=String(a).split(":").map(function(e){return parseInt(e)}),h=(0,n.a)(l,2),b=h[0],m=h[1],y=[],k=0;k<7;k++){var A=v[k],L=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===L&&y.push(C)}(0,i.a)(e,o,u,b,m,y).then(function(e){e?(g(),(0,c.a)("calendar_view_day","已建立個人化行程")):(0,c.a)("error","無法建立個人化行程")})}function m(){(0,s.d)("PersonalScheduleCreator"),o.setAttribute("displayed","true"),(0,s.a)()}function g(){o.setAttribute("displayed","false"),(0,s.c)()}function y(e){var t=(0,r.e)(h,`.mk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8969(){},9119(e,t,a){a.d(t,{a:()=>o});var n=a(2284),i=a(3459),r=a(8179),s=a(8024),c=a(4537);function o(e,t,a){var o=(0,r.b)(".em");if(null!==o)for(var u of o)u.remove();var l=(0,i.b)("playing_animation"),d=(0,r.a)();d.classList.add("em"),d.setAttribute("animation",(0,s.a)(l));var f=(0,r.a)();f.classList.add("fm"),f.appendChild((0,c.b)(e)),d.appendChild(f);var p=(0,r.a)();if(p.classList.add("gm"),p.innerText=t,d.appendChild(p),"object"===(0,n.a)(a)&&null!=a&&"function"==typeof(null==a?void 0:a.action)){var h=(0,r.a)();h.classList.add("hm"),h.innerText=a.text,h.addEventListener("click",function(){a.action()},{once:!0}),d.appendChild(h),d.setAttribute("button","true")}d.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(d)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=f87cb6d728.js.map