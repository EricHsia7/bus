{"version":3,"file":"6d32d9eb3641f5dc2754.js","mappings":"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","sources":["webpack://bus/./src/index.ts","webpack://bus/./src/interface/bus/properties.ts","webpack://bus/./src/interface/bus/index.ts","webpack://bus/./src/interface/folder-creator/index.ts","webpack://bus/./src/interface/folder-icon-selector/index.ts","webpack://bus/./src/interface/folder-manager/index.ts","webpack://bus/./src/interface/folder-editor/index.ts","webpack://bus/./src/interface/data-usage/index.ts"],"sourcesContent":["import { recoverBusArrivalTimeDataFromWriteAheadLog } from './data/analytics/bus-arrival-time/index';\r\nimport { discardExpiredDataUsageStats } from './data/analytics/data-usage/index';\r\nimport { discardExpiredUpdateRateDataGroups, initializeUpdateRateDataGroups, recoverUpdateRateDataFromWriteAheadLog } from './data/analytics/update-rate/index';\r\nimport { initializeFolderList } from './data/folder/index';\r\nimport { discardExpiredNotificationSchedules, initializeNotificationSchedules, loadNotificationClient } from './data/notification/index';\r\nimport { discardExpiredRecentViews } from './data/recent-views/index';\r\nimport { initializeSettings } from './data/settings/index';\r\nimport { checkAppVersion } from './data/settings/version';\r\nimport { askForCalibratingPermission } from './data/user-orientation/index';\r\nimport { askForPositioningPermission } from './data/user-position/index';\r\nimport { closeBus, openBus } from './interface/bus/index';\r\nimport { closeDataUsage } from './interface/data-usage/index';\r\nimport { closeFolderCreator, createFormulatedFolder, openFolderCreator } from './interface/folder-creator/index';\r\nimport { closeFolderEditor, saveEditedFolder } from './interface/folder-editor/index';\r\nimport { closeFolderIconSelector, openFolderIconSelector, updateMaterialSymbolsSearchResult } from './interface/folder-icon-selector/index';\r\nimport { closeFolderManager } from './interface/folder-manager/index';\r\nimport { initializeFolders, setUpFolderFieldSkeletonScreen } from './interface/home/folders/index';\r\nimport { downloadData } from './interface/home/index';\r\nimport { initializeRecentViews, setUpRecentViewsFieldSkeletonScreen } from './interface/home/recent-views/index';\r\nimport { fadeOutSplashScreen, setSplashScreenIconOffsetY, showErrorMessage } from './interface/index';\r\nimport { closeLocationDetails } from './interface/location/details/index';\r\nimport { closeLocation, initializeLocationSliding, openLocation } from './interface/location/index';\r\nimport { cancelNotificationOnNotificationScheduleManager, closeNotificationScheduleManager, openNotificationScheduleManager } from './interface/notification-schedule-manager/index';\r\nimport { closePersonalScheduleCreator, createFormulatedPersonalSchedule, openPersonalScheduleCreator, switchPersonalScheduleCreatorDay } from './interface/personal-schedule-creator/index';\r\nimport { closePersonalScheduleEditor, openPersonalScheduleEditor, saveEditedPersonalSchedule, switchPersonalScheduleEditorDay } from './interface/personal-schedule-editor/index';\r\nimport { closePersonalScheduleManager } from './interface/personal-schedule-manager/index';\r\nimport { closeQRCode, openQRCode } from './interface/qrcode/index';\r\nimport { closeRegisterNotification, openRegisterNotification, saveFormulatedRegisterNotification } from './interface/register-notification/index';\r\nimport { closeRouteDetails } from './interface/route/details/index';\r\nimport { closeRoute, initializeRouteSliding, switchRoute } from './interface/route/index';\r\nimport { closeSaveToFolder, openSaveToFolder } from './interface/save-to-folder/index';\r\nimport { closeScheduleNotification, openScheduleNotification, scheduleNotificationForStopItemOnLocation, scheduleNotificationForStopItemOnRoute } from './interface/schedule-notification/index';\r\nimport { closeSearch, openSearch, resizeSearchInputCanvas, switchSearchTypeFilter, updateSearchInput, updateSearchResult } from './interface/search/index';\r\nimport { closeSettings, downloadExportFile, openFileToImportData, openSettings, showPromptToAskForPersistentStorage, viewCommitOfCurrentVersion } from './interface/settings/index';\r\nimport { closeSettingsOptions, openSettingsOptions, settingsOptionsHandler } from './interface/settings/options';\r\nimport { closeStorage } from './interface/storage/index';\r\nimport { openPermalink } from './tools/permalink';\r\nimport { documentQuerySelector } from './tools/elements';\r\n\r\nimport './interface/theme.css';\r\n\r\nimport './interface/index.css';\r\n\r\nimport './interface/icons/index.css';\r\n\r\nimport './interface/animation.css';\r\n\r\nimport './interface/home/field.css';\r\nimport './interface/home/head.css';\r\nimport './interface/home/body.css';\r\n\r\nimport './interface/home/recent-views/recent-views.css';\r\nimport './interface/home/recent-views/item.css';\r\n\r\nimport './interface/home/folders/folders.css';\r\nimport './interface/home/folders/item.css';\r\n\r\nimport './interface/search/field.css';\r\nimport './interface/search/head.css';\r\nimport './interface/search/body.css';\r\nimport './interface/search/keyboard.css';\r\n\r\nimport './interface/route/field.css';\r\nimport './interface/route/head.css';\r\nimport './interface/route/groups.css';\r\nimport './interface/route/item.css';\r\nimport './interface/route/thread.css';\r\nimport './interface/route/index.css';\r\n\r\nimport './interface/route/details/field.css';\r\nimport './interface/route/details/head.css';\r\nimport './interface/route/details/body.css';\r\nimport './interface/route/details/groups.css';\r\nimport './interface/route/details/actions.css';\r\nimport './interface/route/details/properties.css';\r\nimport './interface/route/details/calendar.css';\r\n\r\nimport './interface/location/field.css';\r\nimport './interface/location/head.css';\r\nimport './interface/location/groups.css';\r\nimport './interface/location/group-details.css';\r\nimport './interface/location/group-items.css';\r\nimport './interface/location/index.css';\r\n\r\nimport './interface/location/details/field.css';\r\nimport './interface/location/details/head.css';\r\nimport './interface/location/details/body.css';\r\nimport './interface/location/details/actions.css';\r\nimport './interface/location/details/index.css';\r\n\r\nimport './interface/bus/field.css';\r\nimport './interface/bus/head.css';\r\nimport './interface/bus/body.css';\r\nimport './interface/bus/groups.css';\r\nimport './interface/bus/properties.css';\r\n\r\nimport './interface/settings/field.css';\r\nimport './interface/settings/head.css';\r\nimport './interface/settings/body.css';\r\nimport './interface/settings/items.css';\r\nimport './interface/settings/index.css';\r\n\r\nimport './interface/save-to-folder/field.css';\r\nimport './interface/save-to-folder/head.css';\r\nimport './interface/save-to-folder/body.css';\r\nimport './interface/save-to-folder/list.css';\r\nimport './interface/save-to-folder/item.css';\r\n\r\nimport './interface/folder-manager/field.css';\r\nimport './interface/folder-manager/head.css';\r\nimport './interface/folder-manager/body.css';\r\nimport './interface/folder-manager/list.css';\r\nimport './interface/folder-manager/item.css';\r\n\r\nimport './interface/folder-editor/field.css';\r\nimport './interface/folder-editor/head.css';\r\nimport './interface/folder-editor/body.css';\r\nimport './interface/folder-editor/groups.css';\r\nimport './interface/folder-editor/folder-name.css';\r\nimport './interface/folder-editor/folder-icon.css';\r\nimport './interface/folder-editor/folder-content.css';\r\n\r\nimport './interface/folder-creator/field.css';\r\nimport './interface/folder-creator/head.css';\r\nimport './interface/folder-creator/body.css';\r\nimport './interface/folder-creator/groups.css';\r\nimport './interface/folder-creator/folder-name.css';\r\nimport './interface/folder-creator/folder-icon.css';\r\n\r\nimport './interface/folder-icon-selector/field.css';\r\nimport './interface/folder-icon-selector/head.css';\r\nimport './interface/folder-icon-selector/body.css';\r\nimport './interface/folder-icon-selector/symbols.css';\r\n\r\nimport './interface/personal-schedule-manager/field.css';\r\nimport './interface/personal-schedule-manager/head.css';\r\nimport './interface/personal-schedule-manager/body.css';\r\nimport './interface/personal-schedule-manager/list.css';\r\nimport './interface/personal-schedule-manager/item.css';\r\n\r\nimport './interface/personal-schedule-creator/field.css';\r\nimport './interface/personal-schedule-creator/head.css';\r\nimport './interface/personal-schedule-creator/body.css';\r\nimport './interface/personal-schedule-creator/groups.css';\r\nimport './interface/personal-schedule-creator/schedule-name.css';\r\nimport './interface/personal-schedule-creator/schedule-start-time.css';\r\nimport './interface/personal-schedule-creator/schedule-end-time.css';\r\nimport './interface/personal-schedule-creator/schedule-days.css';\r\n\r\nimport './interface/personal-schedule-editor/field.css';\r\nimport './interface/personal-schedule-editor/head.css';\r\nimport './interface/personal-schedule-editor/body.css';\r\nimport './interface/personal-schedule-editor/groups.css';\r\nimport './interface/personal-schedule-editor/schedule-name.css';\r\nimport './interface/personal-schedule-editor/schedule-start-time.css';\r\nimport './interface/personal-schedule-editor/schedule-end-time.css';\r\nimport './interface/personal-schedule-editor/schedule-days.css';\r\n\r\nimport './interface/notification-schedule-manager/field.css';\r\nimport './interface/notification-schedule-manager/head.css';\r\nimport './interface/notification-schedule-manager/body.css';\r\nimport './interface/notification-schedule-manager/list.css';\r\nimport './interface/notification-schedule-manager/item.css';\r\n\r\nimport './interface/register-notification/field.css';\r\nimport './interface/register-notification/head.css';\r\nimport './interface/register-notification/body.css';\r\nimport './interface/register-notification/groups.css';\r\nimport './interface/register-notification/provider.css';\r\nimport './interface/register-notification/registration-key.css';\r\n\r\nimport './interface/schedule-notification/field.css';\r\nimport './interface/schedule-notification/head.css';\r\nimport './interface/schedule-notification/body.css';\r\nimport './interface/schedule-notification/list.css';\r\nimport './interface/schedule-notification/item.css';\r\n\r\nimport './interface/data-usage/field.css';\r\nimport './interface/data-usage/head.css';\r\nimport './interface/data-usage/body.css';\r\nimport './interface/data-usage/chart.css';\r\nimport './interface/data-usage/statistics.css';\r\n\r\nimport './interface/storage/field.css';\r\nimport './interface/storage/head.css';\r\nimport './interface/storage/body.css';\r\nimport './interface/storage/statistics.css';\r\nimport './interface/storage/index.css';\r\n\r\nimport './interface/qrcode/field.css';\r\nimport './interface/qrcode/head.css';\r\nimport './interface/qrcode/body.css';\r\nimport './interface/qrcode/qrcode.css';\r\n\r\nimport './interface/prompt/index.css';\r\n\r\nlet busInitialized = false;\r\nlet busSecondlyInitialized = false;\r\n\r\nwindow.bus = {\r\n  initialize: function () {\r\n    if (busInitialized === false) {\r\n      busInitialized = true;\r\n      setSplashScreenIconOffsetY();\r\n      initializeSettings().then(function () {\r\n        setUpRecentViewsFieldSkeletonScreen();\r\n        setUpFolderFieldSkeletonScreen();\r\n        checkAppVersion()\r\n          .then((status) => {\r\n            if (status === 'ok') {\r\n              initializeRouteSliding();\r\n              initializeLocationSliding();\r\n              resizeSearchInputCanvas();\r\n              window.addEventListener('resize', () => {\r\n                resizeSearchInputCanvas();\r\n              });\r\n              if (screen) {\r\n                if (screen.orientation) {\r\n                  screen.orientation.addEventListener('change', () => {\r\n                    resizeSearchInputCanvas();\r\n                  });\r\n                }\r\n              }\r\n              initializeRecentViews();\r\n              initializeFolderList().then(() => {\r\n                initializeFolders();\r\n              });\r\n              const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n              const searchInputElement = documentQuerySelector('.css_search_field .css_search_head .css_search_search_input #search_input') as HTMLInputElement;\r\n              mediaQuery.addEventListener('change', function () {\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('paste', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('cut', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('selectionchange', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              document.addEventListener('selectionchange', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n              searchInputElement.addEventListener('keyup', function () {\r\n                updateSearchResult();\r\n                updateSearchInput(searchInputElement.selectionStart, searchInputElement.selectionEnd);\r\n              });\r\n\r\n              const searchMaterialSymbolsInputElement = documentQuerySelector('.css_folder_icon_selector_field .css_folder_icon_selector_head .css_folder_icon_selector_search_input #search_material_symbols_input') as HTMLInputElement;\r\n              searchMaterialSymbolsInputElement.addEventListener('paste', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              searchMaterialSymbolsInputElement.addEventListener('cut', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              searchMaterialSymbolsInputElement.addEventListener('selectionchange', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              document.addEventListener('selectionchange', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              searchMaterialSymbolsInputElement.addEventListener('keyup', function () {\r\n                updateMaterialSymbolsSearchResult(searchMaterialSymbolsInputElement.value);\r\n              });\r\n              openPermalink();\r\n              fadeOutSplashScreen(function () {\r\n                loadNotificationClient();\r\n                initializeNotificationSchedules().then(function () {\r\n                  discardExpiredNotificationSchedules();\r\n                });\r\n                document.addEventListener(\r\n                  'click',\r\n                  function () {\r\n                    askForPositioningPermission();\r\n                    askForCalibratingPermission();\r\n                  },\r\n                  { once: true }\r\n                );\r\n              });\r\n            }\r\n            if (status === 'fetchError' || status === 'unknownError') {\r\n              showErrorMessage();\r\n              fadeOutSplashScreen();\r\n            }\r\n          })\r\n          .catch(() => {\r\n            showErrorMessage();\r\n            fadeOutSplashScreen();\r\n          });\r\n      });\r\n    }\r\n  },\r\n  secondlyInitialize: function () {\r\n    if (!busSecondlyInitialized) {\r\n      busSecondlyInitialized = true;\r\n      downloadData();\r\n      discardExpiredUpdateRateDataGroups();\r\n      discardExpiredDataUsageStats();\r\n      recoverBusArrivalTimeDataFromWriteAheadLog();\r\n      discardExpiredRecentViews();\r\n      discardExpiredUpdateRateDataGroups().then(function () {\r\n        initializeUpdateRateDataGroups().then(function () {\r\n          recoverUpdateRateDataFromWriteAheadLog();\r\n        });\r\n      });\r\n    }\r\n  },\r\n  route: {\r\n    closeRoute,\r\n    switchRoute,\r\n    closeRouteDetails\r\n  },\r\n  location: {\r\n    openLocation,\r\n    closeLocation,\r\n    closeLocationDetails\r\n  },\r\n  folder: {\r\n    openSaveToFolder,\r\n    closeSaveToFolder,\r\n    closeFolderManager,\r\n    closeFolderEditor,\r\n    openFolderIconSelector,\r\n    closeFolderIconSelector,\r\n    openFolderCreator,\r\n    closeFolderCreator,\r\n    createFormulatedFolder,\r\n    saveEditedFolder\r\n  },\r\n  search: {\r\n    openSearch,\r\n    closeSearch,\r\n    switchSearchTypeFilter\r\n  },\r\n  storage: {\r\n    closeStorage\r\n  },\r\n  dataUsage: {\r\n    closeDataUsage\r\n  },\r\n  personalSchedule: {\r\n    closePersonalScheduleManager,\r\n    openPersonalScheduleCreator,\r\n    closePersonalScheduleCreator,\r\n    createFormulatedPersonalSchedule,\r\n    switchPersonalScheduleCreatorDay,\r\n    openPersonalScheduleEditor,\r\n    closePersonalScheduleEditor,\r\n    switchPersonalScheduleEditorDay,\r\n    saveEditedPersonalSchedule\r\n  },\r\n  settings: {\r\n    openSettings,\r\n    closeSettings,\r\n    openSettingsOptions,\r\n    closeSettingsOptions,\r\n    settingsOptionsHandler,\r\n    downloadExportFile,\r\n    openFileToImportData,\r\n    viewCommitOfCurrentVersion,\r\n    showPromptToAskForPersistentStorage\r\n  },\r\n  bus: {\r\n    openBus,\r\n    closeBus\r\n  },\r\n  notification: {\r\n    openNotificationScheduleManager,\r\n    closeNotificationScheduleManager,\r\n    openRegisterNotification,\r\n    closeRegisterNotification,\r\n    saveFormulatedRegisterNotification,\r\n    openScheduleNotification,\r\n    closeScheduleNotification,\r\n    scheduleNotificationForStopItemOnRoute,\r\n    scheduleNotificationForStopItemOnLocation,\r\n    cancelNotificationOnNotificationScheduleManager\r\n  },\r\n  qrcode: {\r\n    openQRCode,\r\n    closeQRCode\r\n  }\r\n};\r\n\r\nexport default window.bus;\r\n","import { integratedBus } from '../../data/bus/index';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../tools/elements';\nimport { compareThings } from '../../tools/index';\nimport { getBlankIconElement, setIcon } from '../icons/index';\nimport { GeneratedElement } from '../index';\nimport { BusPropertiesGroupBodyElement } from './index';\n\nlet previousProperties = [];\nlet previousSkeletonScreen: boolean = false;\nlet previousAnimation: boolean = false;\n\nfunction generateElementOfBusProperty(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_bus_property');\n\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_bus_property_icon');\n  iconElement.appendChild(getBlankIconElement());\n\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_bus_property_value');\n\n  element.appendChild(iconElement);\n  element.appendChild(valueElement);\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nexport function setUpBusPropertiesFieldSkeletonScreen() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultPropertyQuantity = 5;\n  let properties = [];\n  for (let i = 0; i < defaultPropertyQuantity; i++) {\n    properties.push({\n      key: i,\n      icon: '',\n      value: ''\n    });\n  }\n  updateBusPropertiesField(properties, true, playing_animation);\n}\n\nexport function updateBusPropertiesField(properties: integratedBus['properties'], skeletonScreen: boolean, animation: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisProperty: object, previousProperty: object): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: object): void {\n      const thisPropertyIconElement = elementQuerySelector(thisElement, '.css_bus_property_icon');\n      setIcon(thisPropertyIconElement, thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: object): void {\n      elementQuerySelector(thisElement, '.css_bus_property_value').innerText = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', animation);\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', skeletonScreen);\n    }\n\n    if (previousProperty === null || previousProperty === undefined) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n      updateAnimation(thisElement, animation);\n    } else {\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n    }\n  }\n\n  const propertyQuantity = properties.length;\n\n  // BusGroupPropertiesElement.setAttribute('skeleton-screen', skeletonScreen);\n\n  const currentPropertyCapacity = elementQuerySelectorAll(BusPropertiesGroupBodyElement, '.css_bus_property').length;\n  if (propertyQuantity !== currentPropertyCapacity) {\n    const difference = currentPropertyCapacity - propertyQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        // const propertyIndex = currentPropertyCapacity + o;\n        const newPropertyElement = generateElementOfBusProperty(skeletonScreen);\n        fragment.appendChild(newPropertyElement.element);\n      }\n      BusPropertiesGroupBodyElement.append(fragment);\n    } else {\n      const propertyElements = elementQuerySelectorAll(BusPropertiesGroupBodyElement, '.css_bus_property');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const propertyIndex = currentPropertyCapacity - 1 - o;\n        propertyElements[propertyIndex].remove();\n      }\n    }\n  }\n\n  const propertyElements = elementQuerySelectorAll(BusPropertiesGroupBodyElement, '.css_bus_property');\n  for (let i = 0; i < propertyQuantity; i++) {\n    const thisPropertyElement = propertyElements[i];\n    const thisProperty = properties[i];\n    if (previousProperties.length === 0) {\n      updateProperty(thisPropertyElement, thisProperty, null);\n    } else {\n      updateProperty(thisPropertyElement, thisProperty, previousProperties[i]);\n    }\n  }\n\n  previousProperties = properties;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n","import { integrateBus } from '../../data/bus/index';\nimport { logRecentView } from '../../data/recent-views/index';\nimport { getSettingOptionValue } from '../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { setUpBusPropertiesFieldSkeletonScreen, updateBusPropertiesField } from './properties';\n\nexport const BusField = documentQuerySelector('.css_bus_field');\nexport const BusHeadElement = elementQuerySelector(BusField, '.css_bus_head');\nexport const BusBodyElement = elementQuerySelector(BusField, '.css_bus_body');\nexport const BusGroupsElement = elementQuerySelector(BusBodyElement, '.css_bus_groups');\nexport const BusPropertiesGroupElement = elementQuerySelector(BusGroupsElement, '.css_bus_group[group=\"properties\"]');\nexport const BusPropertiesGroupBodyElement = elementQuerySelector(BusPropertiesGroupElement, '.css_bus_group_body');\nexport const BusLocationGroupElement = elementQuerySelector(BusGroupsElement, '.css_bus_group[group=\"location\"]');\n\nexport function openBus(id: number): void {\n  pushPageHistory('Bus');\n  logRecentView('bus', id);\n  BusField.setAttribute('displayed', 'true');\n  initializeBusPage(id);\n  closePreviousPage();\n}\n\nexport function closeBus(): void {\n  // revokePageHistory('Bus');\n  BusField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nasync function initializeBusPage(id: number) {\n  setUpBusPropertiesFieldSkeletonScreen();\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const requestID = generateIdentifier();\n  const integration = await integrateBus(id, requestID);\n  updateBusPropertiesField(integration.properties, false, playing_animation);\n}\n\nfunction updateBusField(integration: object, skeletonScreen: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisItem: object): void {}\n  function updateLocation(thisElement: HTMLElement, thisItem: object): void {}\n}\n","import { createFolder } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { openFolderIconSelector } from '../folder-icon-selector/index';\nimport { closePreviousPage, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst FolderCreatorBodyElement = elementQuerySelector(FolderCreatorField, '.css_folder_creator_body');\nconst FolderCreatorGroupsElement = elementQuerySelector(FolderCreatorBodyElement, '.css_folder_creator_groups');\nconst NameInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-name\"] .css_folder_creator_group_body input');\nconst IconInputElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\nconst OpenFolderIconSelectorElement = elementQuerySelector(FolderCreatorGroupsElement, '.css_folder_creator_field .css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input .css_folder_creator_open_folder_icon_selector');\n\nOpenFolderIconSelectorElement.onclick = function () {\n  openFolderIconSelector('creator');\n};\n\nexport function createFormulatedFolder(): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  createFolder(name, icon).then((e) => {\n    if (e) {\n      closeFolderCreator();\n      promptMessage('已建立資料夾', 'folder');\n    } else {\n      promptMessage('無法建立資料夾', 'error');\n    }\n  });\n}\n\nexport function openFolderCreator(): void {\n  pushPageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'true');\n  closePreviousPage();\n}\n\nexport function closeFolderCreator(): void {\n  // revokePageHistory('FolderCreator');\n  FolderCreatorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n","import { getMaterialSymbolsSearchIndex } from '../../data/apis/getMaterialSymbolsSearchIndex/index';\nimport { deleteDataReceivingProgress } from '../../data/apis/loader';\nimport { prepareForMaterialSymbolsSearch, searchForMaterialSymbols } from '../../data/search/searchMaterialSymbols';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { containPhoneticSymbols } from '../../tools/text';\nimport { dataDownloadCompleted } from '../home/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype Target = 'editor' | 'creator' | '';\n\nlet currentTarget: Target = '';\n\nconst folderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst folderCreatorField = documentQuerySelector('.css_folder_creator_field');\nconst folderIconSelectorField = documentQuerySelector('.css_folder_icon_selector_field');\n\nfunction generateElementOfSymbol(symbol: string): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_folder_icon_selector_symbol');\n  element.onclick = function () {\n    selectFolderIcon(symbol, currentTarget);\n  };\n  element.appendChild(getIconElement(symbol));\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nasync function initializeFolderIconSelectorField() {\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  materialSymbolsElement.innerHTML = '';\n  const requestID = generateIdentifier();\n  const materialSymbols = await getMaterialSymbolsSearchIndex(requestID);\n  deleteDataReceivingProgress(requestID);\n  const fragment = new DocumentFragment();\n  for (const symbol in materialSymbols.symbols) {\n    const symbolElement = generateElementOfSymbol(symbol, currentTarget);\n    fragment.appendChild(symbolElement.element);\n  }\n  materialSymbolsElement.append(fragment);\n}\n\nexport function updateMaterialSymbolsSearchResult(query: string): void {\n  const materialSymbolsSearchResultsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols_search_results');\n  const materialSymbolsElement = elementQuerySelector(folderIconSelectorField, '.css_folder_icon_selector_body .css_folder_icon_selector_material_symbols');\n  if (!containPhoneticSymbols(query)) {\n    const searchResults = searchForMaterialSymbols(query);\n    const fragment = new DocumentFragment();\n    for (const result of searchResults) {\n      const symbolElement = generateElementOfSymbol(result.item, currentTarget);\n      fragment.appendChild(symbolElement.element);\n    }\n    materialSymbolsSearchResultsElement.innerHTML = '';\n    materialSymbolsSearchResultsElement.append(fragment);\n    materialSymbolsSearchResultsElement.setAttribute('displayed', searchResults.length > 0 ? 'true' : 'false');\n    materialSymbolsElement.setAttribute('displayed', searchResults.length > 0 ? 'false' : 'true');\n  }\n}\n\nexport function selectFolderIcon(symbol: string): void {\n  let iconInputElement;\n  switch (currentTarget) {\n    case 'editor':\n      iconInputElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input');\n      break;\n    case 'creator':\n      iconInputElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input input');\n      break;\n    default:\n      break;\n  }\n  iconInputElement.value = symbol;\n  closeFolderIconSelector();\n}\n\nexport function openFolderIconSelector(target: Target): void {\n  pushPageHistory('FolderIconSelector');\n  var openFolderIconSelectorElement;\n  switch (target) {\n    case 'editor':\n      currentTarget = 'editor';\n      openFolderIconSelectorElement = elementQuerySelector(folderEditorField, '.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\n      break;\n    case 'creator':\n      currentTarget = 'creator';\n      openFolderIconSelectorElement = elementQuerySelector(folderCreatorField, '.css_folder_creator_body .css_folder_creator_groups .css_folder_creator_group[group=\"folder-icon\"] .css_folder_creator_group_body .css_folder_creator_icon_input .css_folder_creator_open_folder_icon_selector');\n      break;\n    default:\n      break;\n  }\n  if (dataDownloadCompleted) {\n    folderIconSelectorField.setAttribute('displayed', 'true');\n    initializeFolderIconSelectorField(currentTarget);\n    prepareForMaterialSymbolsSearch();\n  } else {\n    promptMessage('資料還在下載中', 'download_for_offline');\n  }\n}\n\nexport function closeFolderIconSelector(): void {\n  revokePageHistory('FolderIconSelector');\n  folderIconSelectorField.setAttribute('displayed', 'false');\n}\n","import { FolderWithContent, listFoldersWithContent } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { openFolderEditor } from '../folder-editor/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\n\nconst FolderManagerField = documentQuerySelector('.css_folder_manager_field');\nconst FolderManagerBodyElement = elementQuerySelector(FolderManagerField, '.css_folder_manager_body');\nconst FolderManagerFolderListElement = elementQuerySelector(FolderManagerBodyElement, '.css_folder_manager_folder_list');\n\nfunction generateElementOfItem(item: FolderWithContent): GeneratedElement {\n  // Main container\n  const folderItemElement = document.createElement('div');\n  folderItemElement.classList.add('css_folder_manager_folder_item');\n  folderItemElement.onclick = () => {\n    openFolderEditor(item.id);\n  };\n\n  // Icon\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_manager_folder_item_icon');\n  iconElement.appendChild(getIconElement(item.icon));\n\n  // Name\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_folder_manager_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Status\n  const statusElement = document.createElement('div');\n  statusElement.classList.add('css_folder_manager_folder_item_status');\n  statusElement.appendChild(document.createTextNode(String(item.contentLength)));\n\n  // Arrow\n  const arrowElement = document.createElement('div');\n  arrowElement.classList.add('css_folder_manager_folder_item_arrow');\n  arrowElement.appendChild(getIconElement('arrow_forward_ios'));\n\n  // Assemble\n  folderItemElement.appendChild(iconElement);\n  folderItemElement.appendChild(nameElement);\n  folderItemElement.appendChild(statusElement);\n  folderItemElement.appendChild(arrowElement);\n\n  return {\n    element: folderItemElement,\n    id: ''\n  };\n}\n\nasync function initializeFolderManagerField() {\n  const foldersWithContent = await listFoldersWithContent();\n  FolderManagerFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item);\n    fragment.appendChild(newItemElement.element);\n  }\n  FolderManagerFolderListElement.append(fragment);\n}\n\nexport function openFolderManager(): void {\n  pushPageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'true');\n  initializeFolderManagerField();\n  // closePreviousPage();\n}\n\nexport function closeFolderManager(): void {\n  revokePageHistory('FolderManager');\n  FolderManagerField.setAttribute('displayed', 'false');\n  // openPreviousPage();\n}\n","import { Folder, FolderContent, getFolder, listFolderContent, removeFromFolder, updateFolder, updateFolderContentIndex } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { generateIdentifier } from '../../tools/index';\nimport { openFolderIconSelector } from '../folder-icon-selector/index';\nimport { getIconElement } from '../icons/index';\nimport { MaterialSymbols } from '../icons/material-symbols-type';\nimport { closePreviousPage, GeneratedElement, openPreviousPage, pushPageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst FolderEditorField = documentQuerySelector('.css_folder_editor_field');\nconst FolderEditorHeadElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_head');\nconst LeftButtonElement = elementQuerySelector(FolderEditorHeadElement, '.css_folder_editor_button_left');\nconst FolderEditorBodyElement = elementQuerySelector(FolderEditorField, '.css_folder_editor_body');\nconst FolderEditorGroupsElement = elementQuerySelector(FolderEditorBodyElement, '.css_folder_editor_groups');\nconst NameInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-name\"] .css_folder_editor_group_body input') as HTMLInputElement;\nconst IconInputElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input input') as HTMLInputElement;\nconst OpenFolderIconSelectorElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-icon\"] .css_folder_editor_group_body .css_folder_editor_icon_input .css_folder_editor_open_folder_icon_selector');\nconst FolderContentElement = elementQuerySelector(FolderEditorGroupsElement, '.css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body');\n\nOpenFolderIconSelectorElement.onclick = function () {\n  openFolderIconSelector('editor');\n};\n\nfunction generateElementOfItem(folder: Folder, item: FolderContent): GeneratedElement {\n  const identifier = generateIdentifier();\n\n  // Main container\n  const itemElement = document.createElement('div');\n  itemElement.id = identifier;\n  itemElement.classList.add('css_folder_editor_folder_item');\n  itemElement.setAttribute('type', item.type);\n\n  // Icon, context, main text\n  let context = '';\n  let main = '';\n  let icon: MaterialSymbols = '';\n  switch (item.type) {\n    case 'stop':\n      icon = 'location_on';\n      context = `${item.route ? item.route.name : ''} - 往${item.route ? [item.route.endPoints.destination, item.route.endPoints.departure, ''][item.direction ? item.direction : 0] : ''}`;\n      main = item.name;\n      break;\n    case 'route':\n      icon = 'route';\n      context = `${item.endPoints.departure} \\u2194 ${item.endPoints.destination}`;\n      main = item.name;\n      break;\n    case 'location':\n      icon = 'location_on';\n      context = '地點';\n      main = item.name;\n      break;\n    case 'bus':\n      context = '';\n      main = item.name;\n      break;\n    case 'empty':\n      icon = 'lightbulb';\n      context = '提示';\n      main = '沒有內容';\n      break;\n    default:\n      icon = '';\n      context = 'null';\n      main = 'null';\n      break;\n  }\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_folder_editor_folder_item_icon');\n  iconElement.appendChild(getIconElement(icon));\n\n  // Context element\n  const contextElement = document.createElement('div');\n  contextElement.classList.add('css_folder_editor_folder_item_context');\n  contextElement.appendChild(document.createTextNode(context));\n\n  // Main element\n  const mainElement = document.createElement('div');\n  mainElement.classList.add('css_folder_editor_folder_item_main');\n  mainElement.appendChild(document.createTextNode(main));\n\n  // Capsule element\n  const capsuleElement = document.createElement('div');\n  capsuleElement.classList.add('css_folder_editor_folder_item_capsule');\n\n  // Sort up control\n  const sortUpElement = document.createElement('div');\n  sortUpElement.classList.add('css_folder_editor_folder_item_sort_control_up');\n  sortUpElement.appendChild(getIconElement('keyboard_arrow_down'));\n  sortUpElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'up');\n  };\n\n  // Sort down control\n  const sortDownElement = document.createElement('div');\n  sortDownElement.classList.add('css_folder_editor_folder_item_sort_control_down');\n  sortDownElement.appendChild(getIconElement('keyboard_arrow_down'));\n  sortDownElement.onclick = () => {\n    moveItemOnFolderEditor(identifier, folder.id, item.type, item.id, 'down');\n  };\n\n  // Delete control\n  const deleteElement = document.createElement('div');\n  deleteElement.classList.add('css_folder_editor_folder_item_delete');\n  deleteElement.appendChild(getIconElement('delete'));\n  deleteElement.onclick = () => {\n    removeItemOnFolderEditor(identifier, folder.id, item.type, item.id);\n  };\n\n  // Capsule separators\n  const separator1Element = document.createElement('div');\n  separator1Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n  const separator2Element = document.createElement('div');\n  separator2Element.classList.add('css_folder_editor_folder_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(sortUpElement);\n  capsuleElement.appendChild(sortDownElement);\n  capsuleElement.appendChild(deleteElement);\n  capsuleElement.appendChild(separator1Element);\n  capsuleElement.appendChild(separator2Element);\n\n  // Assemble main item\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(contextElement);\n  itemElement.appendChild(mainElement);\n  itemElement.appendChild(capsuleElement);\n\n  return {\n    element: itemElement,\n    id: identifier\n  };\n}\n\nfunction updateFolderEditorField(folder: Folder, content: Array<FolderContent>): void {\n  NameInputElement.value = folder.name;\n  IconInputElement.value = folder.icon;\n\n  LeftButtonElement.onclick = function () {\n    saveEditedFolder(folder.id);\n  };\n\n  FolderContentElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of content) {\n    const thisItemElement = generateElementOfItem(folder, item);\n    fragment.appendChild(thisItemElement.element);\n  }\n  FolderContentElement.append(fragment);\n}\n\nasync function initializeFolderEditorField(folderID: string) {\n  // TODO: add skeleton screen\n  const folder = getFolder(folderID);\n  const content = await listFolderContent(folderID);\n  updateFolderEditorField(folder, content);\n}\n\nexport function openFolderEditor(folderID: string): void {\n  pushPageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'true');\n  initializeFolderEditorField(folderID);\n  closePreviousPage();\n}\n\nexport function closeFolderEditor(): void {\n  // revokePageHistory('FolderEditor');\n  FolderEditorField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n\nexport function removeItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: number): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  removeFromFolder(folderID, type, id).then((e) => {\n    if (e) {\n      itemElement.remove();\n      switch (type) {\n        case 'stop':\n          promptMessage('已移除站牌', 'delete');\n          break;\n        case 'route':\n          promptMessage('已移除路線', 'delete');\n          break;\n        case 'location':\n          promptMessage('已移除地點', 'delete');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('無法移除', 'error');\n    }\n  });\n}\n\nexport function moveItemOnFolderEditor(itemID: string, folderID: Folder['id'], type: FolderContent['type'], id: FolderContent['id'], direction: 'up' | 'down'): void {\n  const itemElement = elementQuerySelector(FolderEditorField, `.css_folder_editor_body .css_folder_editor_groups .css_folder_editor_group[group=\"folder-content\"] .css_folder_editor_group_body .css_folder_editor_folder_item#${itemID}`);\n  updateFolderContentIndex(folderID, type, id, direction).then((e) => {\n    if (e) {\n      switch (direction) {\n        case 'up':\n          const previousSibling = itemElement.previousElementSibling;\n          if (previousSibling) {\n            itemElement.parentNode.insertBefore(itemElement, previousSibling);\n          }\n          promptMessage('已往上移', 'arrow_circle_up');\n          break;\n        case 'down':\n          const nextSibling = itemElement.nextElementSibling;\n          if (nextSibling) {\n            itemElement.parentNode.insertBefore(nextSibling, itemElement);\n          }\n          promptMessage('已往下移', 'arrow_circle_down');\n          break;\n        default:\n          break;\n      }\n    } else {\n      promptMessage('無法移動', 'error');\n    }\n  });\n}\n\nexport function saveEditedFolder(folderID: string): void {\n  const name = NameInputElement.value;\n  const icon = IconInputElement.value;\n  updateFolder(folderID, name, icon);\n  closeFolderEditor();\n}\n","import { getDataUsageStats } from '../../data/analytics/data-usage/index';\nimport { convertBytes } from '../../tools/convert';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { dateToString } from '../../tools/time';\nimport { closePreviousPage, openPreviousPage, pushPageHistory, querySize } from '../index';\n\nconst dataUsageField = documentQuerySelector('.css_data_usage_field');\nconst dataUsageBodyElement = elementQuerySelector(dataUsageField, '.css_data_usage_body');\nconst chartElement = elementQuerySelector(dataUsageBodyElement, '.css_data_usage_chart');\nconst statisticsElement = elementQuerySelector(dataUsageBodyElement, '.css_data_usage_statistics');\nconst totalDataUsageElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"total-data-usage\"] .css_data_usage_statistics_item_value');\nconst startTimeElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"start-time\"] .css_data_usage_statistics_item_value');\nconst endTimeElement = elementQuerySelector(statisticsElement, '.css_data_usage_statistics_item[name=\"end-time\"] .css_data_usage_statistics_item_value');\n\nasync function initializeDataUsage() {\n  const WindowSize = querySize('window');\n  const graphWidth = WindowSize.width;\n  const graphHeight = Math.min((5 / 18) * graphWidth, WindowSize.height * 0.33);\n  const stats = await getDataUsageStats(graphWidth, graphHeight, 20);\n  totalDataUsageElement.innerText = convertBytes(stats.stats.sum);\n  startTimeElement.innerText = dateToString(stats.period.start, 'YYYY-MM-DD');\n  endTimeElement.innerText = dateToString(stats.period.end, 'YYYY-MM-DD');\n  chartElement.innerHTML = stats.chart;\n}\n\nexport function openDataUsage(): void {\n  pushPageHistory('DataUsage');\n  dataUsageField.setAttribute('displayed', 'true');\n  initializeDataUsage();\n  closePreviousPage();\n}\n\nexport function closeDataUsage(): void {\n  // revokePageHistory('DataUsage');\n  dataUsageField.setAttribute('displayed', 'false');\n  openPreviousPage();\n}\n"],"names":["busInitialized","busSecondlyInitialized","window","bus","initialize","setSplashScreenIconOffsetY","initializeSettings","then","setUpRecentViewsFieldSkeletonScreen","setUpFolderFieldSkeletonScreen","checkAppVersion","status","initializeRouteSliding","initializeLocationSliding","resizeSearchInputCanvas","addEventListener","screen","orientation","initializeRecentViews","initializeFolderList","initializeFolders","mediaQuery","matchMedia","searchInputElement","documentQuerySelector","updateSearchInput","selectionStart","selectionEnd","updateSearchResult","document","searchMaterialSymbolsInputElement","updateMaterialSymbolsSearchResult","value","openPermalink","fadeOutSplashScreen","loadNotificationClient","initializeNotificationSchedules","discardExpiredNotificationSchedules","askForPositioningPermission","askForCalibratingPermission","once","showErrorMessage","secondlyInitialize","downloadData","discardExpiredUpdateRateDataGroups","discardExpiredDataUsageStats","recoverBusArrivalTimeDataFromWriteAheadLog","discardExpiredRecentViews","initializeUpdateRateDataGroups","recoverUpdateRateDataFromWriteAheadLog","route","closeRoute","switchRoute","closeRouteDetails","location","openLocation","closeLocation","closeLocationDetails","folder","openSaveToFolder","closeSaveToFolder","closeFolderManager","closeFolderEditor","openFolderIconSelector","closeFolderIconSelector","openFolderCreator","closeFolderCreator","createFormulatedFolder","saveEditedFolder","search","openSearch","closeSearch","switchSearchTypeFilter","storage","closeStorage","dataUsage","closeDataUsage","personalSchedule","closePersonalScheduleManager","openPersonalScheduleCreator","closePersonalScheduleCreator","createFormulatedPersonalSchedule","switchPersonalScheduleCreatorDay","openPersonalScheduleEditor","closePersonalScheduleEditor","switchPersonalScheduleEditorDay","saveEditedPersonalSchedule","settings","openSettings","closeSettings","openSettingsOptions","closeSettingsOptions","settingsOptionsHandler","downloadExportFile","openFileToImportData","viewCommitOfCurrentVersion","showPromptToAskForPersistentStorage","openBus","closeBus","notification","openNotificationScheduleManager","closeNotificationScheduleManager","openRegisterNotification","closeRegisterNotification","saveFormulatedRegisterNotification","openScheduleNotification","closeScheduleNotification","scheduleNotificationForStopItemOnRoute","scheduleNotificationForStopItemOnLocation","cancelNotificationOnNotificationScheduleManager","qrcode","openQRCode","closeQRCode","previousProperties","previousSkeletonScreen","previousAnimation","generateElementOfBusProperty","element","createElement","classList","add","iconElement","appendChild","getBlankIconElement","valueElement","id","updateBusPropertiesField","properties","skeletonScreen","animation","updateProperty","thisElement","thisProperty","previousProperty","updateIcon","thisPropertyIconElement","elementQuerySelector","setIcon","icon","updateValue","innerText","updateAnimation","setAttribute","updateSkeletonScreen","compareThings","propertyQuantity","length","currentPropertyCapacity","elementQuerySelectorAll","BusPropertiesGroupBodyElement","difference","fragment","DocumentFragment","o","d","Math","abs","newPropertyElement","append","propertyElements","remove","i","thisPropertyElement","BusField","BusBodyElement","BusGroupsElement","BusPropertiesGroupElement","pushPageHistory","logRecentView","_x","_initializeBusPage","apply","arguments","initializeBusPage","closePreviousPage","openPreviousPage","_asyncToGenerator","playing_animation","getSettingOptionValue","push","key","setUpBusPropertiesFieldSkeletonScreen","requestID","generateIdentifier","integrateBus","FolderCreatorField","FolderCreatorBodyElement","FolderCreatorGroupsElement","NameInputElement","IconInputElement","name","createFolder","e","promptMessage","onclick","currentTarget","folderEditorField","folderCreatorField","folderIconSelectorField","generateElementOfSymbol","symbol","iconInputElement","selectFolderIcon","getIconElement","_initializeFolderIconSelectorField","materialSymbolsElement","innerHTML","materialSymbols","getMaterialSymbolsSearchIndex","deleteDataReceivingProgress","symbols","symbolElement","query","materialSymbolsSearchResultsElement","containPhoneticSymbols","_step","searchResults","searchForMaterialSymbols","_iterator","_createForOfIteratorHelper","s","n","done","item","err","f","target","dataDownloadCompleted","initializeFolderIconSelectorField","prepareForMaterialSymbolsSearch","revokePageHistory","FolderManagerField","FolderManagerBodyElement","FolderManagerFolderListElement","generateElementOfItem","folderItemElement","openFolderEditor","nameElement","createTextNode","statusElement","String","contentLength","arrowElement","_initializeFolderManagerField","foldersWithContent","listFoldersWithContent","newItemElement","openFolderManager","initializeFolderManagerField","FolderEditorField","FolderEditorHeadElement","LeftButtonElement","FolderEditorBodyElement","FolderEditorGroupsElement","OpenFolderIconSelectorElement","FolderContentElement","identifier","itemElement","type","context","main","endPoints","destination","departure","direction","contextElement","mainElement","capsuleElement","sortUpElement","moveItemOnFolderEditor","sortDownElement","deleteElement","itemID","folderID","removeFromFolder","removeItemOnFolderEditor","separator1Element","separator2Element","_initializeFolderEditorField","content","thisItemElement","updateFolderEditorField","getFolder","listFolderContent","initializeFolderEditorField","updateFolderContentIndex","previousSibling","previousElementSibling","parentNode","insertBefore","nextSibling","nextElementSibling","updateFolder","dataUsageField","dataUsageBodyElement","chartElement","statisticsElement","totalDataUsageElement","startTimeElement","endTimeElement","_initializeDataUsage","WindowSize","querySize","graphWidth","width","graphHeight","min","height","stats","getDataUsageStats","convertBytes","sum","dateToString","period","start","end","chart","openDataUsage","initializeDataUsage"],"ignoreList":[],"sourceRoot":""}