"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[374],{4225(t,e,r){r.d(e,{F:()=>y});var n=r(467),a=r(3453),i=r(7183),o=r(8024),s=r(4311);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function l(t){var e=[["快取","cache"],["設定","settings"],["分析","analytics"],["分析","analytics"],["分析","analytics"],["分析","analytics"],["分析","analytics"],["個人化行程","personalSchedule"],["最近檢視","recentViews"],["通知","notification"],["通知","notification"],["資料夾","folders"],["資料夾","folders"],["資料夾","folders"]][t]||["其他","others"],r=(0,a.A)(e,2);return{name:r[0],key:r[1]}}function y(){return c.apply(this,arguments)}function c(){return(c=(0,n.A)(function*(){for(var t=0,e={},r=(0,s.le)(),n=0;n<r;n++){var a,f=0,y=u(yield(0,s.Su)(n));try{for(y.s();!(a=y.n()).done;){var c=a.value,m=yield(0,s.Ct)(n,c),d=String(m).length+c.length;t+=d,f+=d}}catch(t){y.e(t)}finally{y.f()}var p=l(n),v=p.key;(0,o.mQ)(e,v)||(e[v]={category:p,size:0}),e[p.key].size+=f}var h=(0,i.tH)(t),g={};for(var S in e){var w=e[S].category,A=e[S].size;g[S]={category:w,size:(0,i.tH)(A)}}return{totalSize:h,categorizedSizes:g}})).apply(this,arguments)}},5767(t,e,r){r.d(e,{Eu:()=>S,MN:()=>M,cy:()=>A,g4:()=>_,wz:()=>k});var n=r(3453),a=r(467),i=r(8024),o=r(5428),s=r(4311);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var l=[],y="",c=!1,m=0,d={data:{},timestamp:0,id:""},p=[],v={};function h(t){var e,r=0,n=0,a=0,i=0,o=0,s=u(t);try{for(s.s();!(e=s.n()).done;){var f=e.value,l=f[0],y=f[1];o+=1,r+=l,a+=y,n+=Math.pow(l,2),i+=Math.pow(y,2)}}catch(t){s.e(t)}finally{s.f()}var c,m=r/o,d=a/o,p=n/o-Math.pow(m,2),v=i/o-Math.pow(d,2),h=Math.sqrt(p),g=Math.sqrt(v),S=0,w=u(t);try{for(w.s();!(c=w.n()).done;){var A=c.value;S+=(A[0]-m)*(A[1]-d)}}catch(t){w.e(t)}finally{w.f()}return{estimate_time:{average:m,stdev:h},timestamp:{average:d,stdev:g},length:o,correlation:(S/=o)/(h*g)}}function g(t,e){var r=t.length+e.length,n=(t.estimate_time.average*t.length+e.estimate_time.average*e.length)/r,a=(t.timestamp.average*t.length+e.timestamp.average*e.length)/r;return{estimate_time:{average:n,stdev:(0,o.VY)(t.estimate_time.average,t.estimate_time.stdev,t.length,e.estimate_time.average,e.estimate_time.stdev,e.length)},timestamp:{average:a,stdev:(0,o.VY)(t.timestamp.average,t.timestamp.stdev,t.length,e.timestamp.average,e.timestamp.stdev,e.length)},length:r,correlation:(0,o.Hi)(t.estimate_time.average,t.timestamp.average,t.estimate_time.stdev,t.timestamp.stdev,t.length,t.correlation,e.estimate_time.average,e.timestamp.average,e.estimate_time.stdev,e.timestamp.stdev,e.length,e.correlation)}}function S(t){return w.apply(this,arguments)}function w(){return(w=(0,a.A)(function*(t){var e=(new Date).getTime(),r=!1;if(!c){c=!0,l=[],y=(0,i.zx)(),d={data:{},timestamp:e,id:y},m=0;for(var n=t.length-1,a=0;a<32;a++){var o=t[Math.floor(Math.random()*n)];l.push(o.StopID)}}var f,S=u(t);try{for(S.s();!(f=S.n()).done;){var w=f.value,A=w.StopID,b=`s_${A}`;l.indexOf(A)>-1&&((0,i.mQ)(d.data,b)||(d.data[b]=[]),d.data[b].push([parseInt(w.EstimateTime),Math.floor((e-d.timestamp)/1e3)]))}}catch(t){S.e(t)}finally{S.f()}if((m+=1)>45&&(r=!0),m%5==0&&(yield(0,s.mL)(4,y,JSON.stringify(d))),r){var M,O=u(l);try{for(O.s();!(M=O.n()).done;){var _=M.value,N=`s_${_}`,J=d.data[N],x={},C=yield(0,s.Ct)(3,N);if(C){var D=JSON.parse(C);x.stats=g(D.stats,h(J)),x.timestamp=D.timestamp,x.id=_}else x.stats=h(J),x.timestamp=e,x.id=_;if(yield(0,s.mL)(3,N,JSON.stringify(x)),(0,i.mQ)(v,N)){var k=v[N];p.splice(k,1,x)}else p[N]=p.length,p.push(x);yield(0,s.iQ)(4,y)}}catch(t){O.e(t)}finally{O.f()}c=!1}})).apply(this,arguments)}function A(){return b.apply(this,arguments)}function b(){return(b=(0,a.A)(function*(){var t,e=(new Date).getTime()-252e5,r=u(yield(0,s.Su)(4));try{for(r.s();!(t=r.n()).done;){var n=t.value,a=yield(0,s.Ct)(4,n);if(a){var o=JSON.parse(a),f=o.timestamp,l=o.id;if(f>e)for(var y in o.data){var c=o.data[y],m={},d=yield(0,s.Ct)(3,y);if(d){var S=JSON.parse(d);m.stats=g(S.stats,h(c)),m.timestamp=S.timestamp,m.id=S.id}else m.stats=h(c),m.timestamp=f,m.id=parseInt(y.split("_")[1]);if(yield(0,s.mL)(3,y,JSON.stringify(m)),(0,i.mQ)(v,y)){var w=v[y];p.splice(w,1,m)}else p[y]=p.length,p.push(m)}yield(0,s.iQ)(4,l)}}}catch(t){r.e(t)}finally{r.f()}})).apply(this,arguments)}function M(){return O.apply(this,arguments)}function O(){return(O=(0,a.A)(function*(){var t,e=(new Date).getTime()-252e5,r=0,n=u(yield(0,s.Su)(3));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=yield(0,s.Ct)(3,a);if(i){var o=JSON.parse(i);o.timestamp>e&&(p.push(o),v[a]=r,r+=1)}}}catch(t){n.e(t)}finally{n.f()}})).apply(this,arguments)}function _(){return N.apply(this,arguments)}function N(){return(N=(0,a.A)(function*(){var t,e=(new Date).getTime()-252e5,r=u(yield(0,s.Su)(3));try{for(r.s();!(t=r.n()).done;){var n=t.value,a=yield(0,s.Ct)(3,n),i=JSON.parse(a);(i.timestamp<=e||"number"!=typeof i.stats.correlation)&&(yield(0,s.iQ)(3,n))}}catch(t){r.e(t)}finally{r.f()}})).apply(this,arguments)}var J,x={};if("undefined"!=typeof SharedWorker){var C=new SharedWorker(new URL(r.p+r.u(662),r.b));(J=C.port).start()}else{var D=new Worker(new URL(r.p+r.u(281),r.b));J=D}function k(){return $.apply(this,arguments)}function $(){return($=(0,a.A)(function*(){var t=yield function(){var t,e=(new Date).getTime()-252e5,r=[],n=u(p);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.timestamp>e&&"number"==typeof a.stats.correlation&&r.push(a)}}catch(t){n.e(t)}finally{n.f()}return r}(),e=(0,i.zx)();return yield new Promise(function(r,n){x[e]=r,J.onerror=function(t){n(t.message)},J.postMessage([t,e])})})).apply(this,arguments)}J.onmessage=function(t){var e=(0,n.A)(t.data,2),r=e[0],a=e[1];x[a]&&(x[a](r),delete x[a])},J.onerror=function(t){}},6483(t,e,r){r.d(e,{$t:()=>N,Io:()=>L,VZ:()=>O});var n=r(467),a=r(3453),i=r(8024),o=r(5428),s=r(9566),u=r(5352),f=r(4311);function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var c,m="",d=!1,p=[],v={data:{},timestamp:0,id:""},h=0,g={};if("undefined"!=typeof SharedWorker){var S=new SharedWorker(new URL(r.p+r.u(992),r.b));(c=S.port).start()}else{var w=new Worker(new URL(r.p+r.u(611),r.b));c=w}function A(t){return b.apply(this,arguments)}function b(){return(b=(0,n.A)(function*(t){var e=(0,i.zx)();return yield new Promise(function(r,n){g[e]=r,c.onerror=function(t){n(t.message)},c.postMessage([t,e])})})).apply(this,arguments)}function M(t,e){for(var r=new Uint32Array(1440),n=1439;n>=0;n--)r[n]=t[n]+e[n];return Array.from(r)}function O(t){return _.apply(this,arguments)}function _(){return(_=(0,n.A)(function*(t){var e=new Date,r=e.getTime(),n=e.getDay(),a=!1;if(!d){d=!0,m=(0,i.zx)(),v={id:m,timestamp:r,data:{}},h=0;var y=yield(0,s.$j)(["stop"]);p=y.map(function(t){return t.id})}if((0,u.vQ)(e)){var c,g=l(t);try{for(g.s();!(c=g.n()).done;){var S=c.value,w=S.StopID,b=`s_${w}_${n}`;p.indexOf(w)>-1&&((0,i.mQ)(v.data,b)||(v.data[b]=[]),v.data[b].push([parseInt(S.EstimateTime),r]))}}catch(t){g.e(t)}finally{g.f()}if((h+=1)>32&&(a=!0),(a||h%8==0)&&(yield(0,f.mL)(5,m,JSON.stringify(v))),a){var O,_=l(p);try{for(_.s();!(O=_.n()).done;){var N=O.value,J=`s_${N}_${n}`,x=v.data[J],C={},D=yield(0,f.Ct)(6,J);if(D){var k=JSON.parse(D),$=yield A(x),L=M(k.stats,$);C.stats=L;var T=(0,o.no)(L);C.min=T[0],C.max=T[1],C.day=n,C.timestamp=k.timestamp,C.id=N}else{var U=yield A(x);C.stats=U;var I=(0,o.no)(U);C.min=I[0],C.max=I[1],C.day=n,C.timestamp=r,C.id=N}yield(0,f.mL)(6,J,JSON.stringify(C)),yield(0,f.iQ)(5,m)}}catch(t){_.e(t)}finally{_.f()}d=!1}}})).apply(this,arguments)}function N(){return J.apply(this,arguments)}function J(){return(J=(0,n.A)(function*(){var t,e=l(yield(0,f.Su)(5));try{for(e.s();!(t=e.n()).done;){var r=t.value,n=yield(0,f.Ct)(5,r),a=JSON.parse(n),i=a.id;for(var s in a.data){var u=a.data[s],y={},c=yield(0,f.Ct)(6,s),m=s.split("_"),d=parseInt(m[1]),p=parseInt(m[2]);if(c){var v=JSON.parse(c),h=yield A(u),g=M(v.stats,h);y.stats=g;var S=(0,o.no)(g);y.min=S[0],y.max=S[1],y.day=v.day,y.timestamp=v.timestamp,y.id=d}else{var w=yield A(u);y.stats=w;var b=(0,o.no)(w);y.min=b[0],y.max=b[1],y.day=p,y.timestamp=a.timestamp,y.id=d}yield(0,f.mL)(6,s,JSON.stringify(y))}yield(0,f.iQ)(5,i)}}catch(t){e.e(t)}finally{e.f()}})).apply(this,arguments)}function x(){return x=(0,n.A)(function*(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=[],n=l(yield(0,f.Su)(6));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=yield(0,f.Ct)(6,a);if(i){var o=JSON.parse(i);e&&(o.stats=new Uint32Array(o.stats)),r.push(o)}}}catch(t){n.e(t)}finally{n.f()}return r}),x.apply(this,arguments)}c.onmessage=function(t){var e=(0,a.A)(t.data,2),r=e[0],n=e[1];g[n]&&(g[n](r),delete g[n])},c.onerror=function(t){};var C,D={};if("undefined"!=typeof SharedWorker){var k=new SharedWorker(new URL(r.p+r.u(906),r.b));(C=k.port).start()}else{var $=new Worker(new URL(r.p+r.u(525),r.b));C=$}function L(t,e){return T.apply(this,arguments)}function T(){return T=(0,n.A)(function*(t,e){var r=(0,i.zx)(),n=yield(0,u.ty)(),a=yield function(){return x.apply(this,arguments)}(!0);return yield new Promise(function(i,o){D[r]=i,C.onerror=function(t){o(t.message)},C.postMessage([n,a,t,e,r])})}),T.apply(this,arguments)}C.onmessage=function(t){var e=(0,a.A)(t.data,2),r=e[0],n=e[1];D[n]&&(D[n](r),delete D[n])},C.onerror=function(t){}},8925(t,e,r){r.d(e,{Ir:()=>y,LN:()=>m,N$:()=>u});var n=r(467),a=r(5579),i=r(4311);function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return s(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){return f.apply(this,arguments)}function f(){return(f=(0,n.A)(function*(t,e){var r=`d_${(0,a.$T)(e,"YYYY_MM_DD")}`,n=60*e.getHours()+e.getMinutes(),o=yield(0,i.Ct)(2,r);if(o){var s=JSON.parse(o);s.stats.sum+=t,s.data[n]+=t;var u=s.data[n];u>s.stats.max&&(s.stats.max=u),u<s.stats.min&&(s.stats.min=u),yield(0,i.mL)(2,r,JSON.stringify(s))}else{var f={},l=new Uint32Array(1440);l[n]+=t,f.data=Array.from(l),f.stats={sum:t,max:t,min:0},f.date=[e.getFullYear(),e.getMonth()+1,e.getDate()],yield(0,i.mL)(2,r,JSON.stringify(f))}})).apply(this,arguments)}function l(){return(l=(0,n.A)(function*(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);for(var e=(0,a.S1)(t,-7,0,0),r=[],n=1;n<=7;n++){var o=(0,a.S1)(e,n,0,0),s=`d_${(0,a.$T)(o,"YYYY_MM_DD")}`,u=yield(0,i.Ct)(2,s);if(u){var f=JSON.parse(u);r.push(f)}else{var l={},y=new Uint32Array(1440);l.data=Array.from(y),l.stats={sum:0,max:0,min:0},l.date=[o.getFullYear(),o.getMonth()+1,o.getDate()],r.push(l)}}return r})).apply(this,arguments)}function y(){return c.apply(this,arguments)}function c(){return(c=(0,n.A)(function*(){var t,e=(new Date).getTime(),r=o(yield(0,i.Su)(2));try{for(r.s();!(t=r.n()).done;){var n=t.value,s=yield(0,i.Ct)(2,n),u=JSON.parse(s);e-(0,a.uP)(u.date[0],u.date[1],u.date[2]).getTime()>6048e5&&(yield(0,i.iQ)(2,n))}}catch(t){r.e(t)}finally{r.f()}})).apply(this,arguments)}function m(t,e,r){return d.apply(this,arguments)}function d(){return d=(0,n.A)(function*(t,e,n){var a=new Worker(new URL(r.p+r.u(778),r.b)),i=yield function(){return l.apply(this,arguments)}();return yield new Promise(function(r,o){a.onmessage=function(t){r(t.data),a.terminate()},a.onerror=function(t){o(t.message),a.terminate()},a.postMessage([i,t,e,n])})}),d.apply(this,arguments)}}}]);
//# sourceMappingURL=53f18da3e129a1dfba11.js.map