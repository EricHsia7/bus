"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[537],{4131(t,n,e){e.d(n,{a:()=>C,b:()=>A,c:()=>x,d:()=>k});var a=e(467),i=e(2937),r=e(8179),o=e(7968),c=e(8024),u=e(5579),l=e(904),d=(0,r.c)(".f"),s=(0,r.e)(d,".g"),f=(0,r.e)(s,".h"),p=(0,r.e)(d,".i"),h=Array.from((0,r.d)(p,".j")),v=new Date,b={},m=["","",""],g=0,y=!1;function $(t,n,e){for(var a="'Noto Sans TC', sans-serif",i=[],r=[],c=0;c<24;c++){var l=`${c.toString().padStart(2,"0")}:00`,d=70*c+10;i.push(`M35 ${d}`,"h"+(e-35)),r.push(`<text x="5" y="${d+3}" font-weight="400" font-size="10" font-family="${a}" component="gridline-label">${l}</text>`)}for(var s=`<path d="${i.join(" ")}" fill="none" stroke-width="0.35" component="gridline"/>`,f=1700,p=n.getDay(),h=t.repeated[p],v=t.scheduled,b=(0,u.f)(n,0,0,t.timeZoneOffset-n.getTimezoneOffset()),m=[b.getFullYear(),b.getMonth()+1,b.getDate()],g=v.length-1;g>=0;g--)m[0]===v[g].date[0]&&m[1]===v[g].date[1]&&m[2]===v[g].date[2]&&h.push({type:"repeated",time:v[g].time,interval:v[g].interval,count:v[g].count,day:p});for(var y=[],$=[],w=[],k=h.length-1;k>=0;k--){var A=h[k].time[0]/1440*f,x=e-35,C=(h[k].time[1]-h[k].time[0])/1440*f,T=h[k].time[0]%60,D=(h[k].time[0]-T)/60,L=h[k].time[1]%60,M=(h[k].time[1]-L)/60,S=`${D.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")} - ${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`,Y=`每${h[k].interval[0]===h[k].interval[1]?h[k].interval[0]:h[k].interval.join(" - ")}分鐘一班 | ${h[k].count[0]===h[k].count[1]?h[k].count[0]:h[k].count.join(" - ")}班`;Array.prototype.push.apply(y,(0,o.a)(35,A,x,C,5,!1)),$.push(`M38 ${A+3}`,"v"+(C-6)),w.push(`<text x="44" y="${A+3+17}" font-weight="500" font-size="15" font-family="${a}" component="event-title">${S}</text>`,`<text x="44" y="${A+3+17+17}" font-weight="500" font-size="15" font-family="${a}" component="event-description">${Y}</text>`)}var j=`<path d="${y.join(" ")}" stroke="none" component="event-box"/>`,F=`<path d="${$.join(" ")}" fill="none" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" component="event-decoration"/>`;return`<svg width="${e}" height="1700" viewBox="0 0 ${e} 1700" xmlns="http://www.w3.org/2000/svg">${s}${r.join("")}${j}${F}${w.join("")}</svg>`}function w(){return(w=(0,a.a)(function*(t){var n=(0,l.d)("window");g=n.width,v=new Date;var e=(0,c.c)(),a=yield(0,i.a)(t,e);b=a;for(var r=0;r<3;r++){var o=(0,u.f)(v,r-1,0,0);m[r]=$(a,o,g),h[r].innerHTML=m[r]}f.innerText=(0,u.c)(v,"YYYY-MM-DD WW"),y||(y=!0,p.addEventListener("scrollend",function(){var t=p.scrollLeft,n=Math.round(t/g);if(0===n){v=(0,u.f)(v,-1,0,0);var e=(0,u.f)(v,-1,0,0);h[0].before(h[2]),p.scrollTo({left:g});var a=[h[2],h[0],h[1]];h[0]=a[0],h[1]=a[1],h[2]=a[2];var i=[$(b,e,g),m[0],m[1]];m[0]=i[0],m[1]=i[1],m[2]=i[2],h[0].innerHTML=m[0],f.innerText=(0,u.c)(v,"YYYY-MM-DD WW")}else if(2===n){v=(0,u.f)(v,1,0,0);var r=(0,u.f)(v,1,0,0);h[2].after(h[0]),p.scrollTo({left:g});var o=[h[1],h[2],h[0]];h[0]=o[0],h[1]=o[1],h[2]=o[2];var c=[m[1],m[2],$(b,r,g)];m[0]=c[0],m[1]=c[1],m[2]=c[2],h[2].innerHTML=m[2],f.innerText=(0,u.c)(v,"YYYY-MM-DD WW")}}),p.scrollTo({left:g}))})).apply(this,arguments)}function k(){d.setAttribute("displayed","true")}function A(){d.setAttribute("displayed","false")}function x(t){(0,l.c)("RouteCalendar"),k(),function(t){w.apply(this,arguments)}(t),(0,l.b)()}function C(){A(),(0,l.i)(),(0,l.e)("RouteCalendar")}},4373(t,n,e){e.d(n,{a:()=>D,b:()=>C,c:()=>T,d:()=>L,e:()=>x,f:()=>S});var a=e(467),i=e(4293),r=e(6788),o=e(8621),c=e(3459),u=e(8179),l=e(8024),d=e(9469),s=e(251),f=e(4537),p=e(904),h=e(8279),v={},b=!1,m=!1,g=(0,u.c)(".k"),y=(0,u.e)(g,".l"),$=(0,u.e)(y,".m");function w(){var t=(0,u.a)();t.classList.add("n");var n=(0,u.a)();n.classList.add("o"),n.appendChild((0,f.a)()),t.appendChild(n);var e=(0,u.a)();return e.classList.add("p"),t.appendChild(e),t}function k(t,n,e){function a(t,a,i){function r(t,n){var e=(0,u.e)(t,".o");(0,f.c)(e,n.icon)}function o(t,n){(0,u.e)(t,".p").innerText=n.name}function c(t,n){t.onclick=n.action}function d(t,n){t.setAttribute("animation",(0,l.a)(n))}function s(t,n){t.setAttribute("skeleton-screen",(0,l.a)(n))}null==i?(r(t,a),o(t,a),c(t,a),d(t,e),s(t,n)):(i.key!==a.key&&(r(t,a),o(t,a),c(t,a)),e!==b&&d(t,e),n!==m&&s(t,n))}var i=t.actions,r=t.actionsQuantity,o=Array.from((0,u.d)($,".n")),c=o.length;if(r!==c){var d=c-r;if(d<0){for(var s=new DocumentFragment,p=0;p>d;p--){var h=w();s.appendChild(h),o.push(h)}$.append(s)}else if(d>0)for(var g=c-1,y=c-d-1;g>y;g--)o[g].remove(),o.splice(g,1)}for(var k=0;k<r;k++){var A=o[k],x=i[k];if((0,l.f)(v,"actions"))if(v.actions[k])a(A,x,v.actions[k]);else a(A,x,null);else a(A,x,null)}v=t,b=e,m=n}function A(){return(A=(0,a.a)(function*(t,n){var e=(0,c.b)("playing_animation"),a=(0,l.c)();!function(){for(var t=(0,c.b)("playing_animation"),n=[],e=0;e<4;e++)n.push({name:"",icon:"",key:`action-${e}`,action:function(){}});k({actions:n,actionsQuantity:4,RouteID:0},!0,t)}(),k(yield(0,o.a)(t,n,a),!1,e)})).apply(this,arguments)}function x(){g.setAttribute("displayed","true")}function C(){g.setAttribute("displayed","false")}function T(t,n){(0,p.c)("RouteDetails"),x(),function(t,n){A.apply(this,arguments)}(t,n),(0,p.b)()}function D(){C(),(0,p.i)(),(0,p.e)("RouteDetails")}function L(t){return M.apply(this,arguments)}function M(){return(M=(0,a.a)(function*(t){var n=(0,l.c)(),e=yield(0,i.a)(n,!0);(0,r.a)(n),(0,r.b)(n);var a=`r_${t}`;if((0,l.f)(e,a)){var o=e[a],c=(0,d.a)(0,{id:t,name:o.n});(0,s.b)(o.n,c)}})).apply(this,arguments)}function S(t){return Y.apply(this,arguments)}function Y(){return(Y=(0,a.a)(function*(t){var n=(0,l.c)(),e=yield(0,i.a)(n,!0);(0,r.a)(n),(0,r.b)(n);var a=`r_${t}`;if((0,l.f)(e,a)){var o=e[a],c=(0,d.a)(0,{id:t,name:o.n});(0,h.c)(c)}})).apply(this,arguments)}},3041(t,n,e){e.d(n,{a:()=>k,b:()=>$,c:()=>w,d:()=>y});var a=e(9566),i=e(8179),r=e(8024),o=e(6052),c=e(4537),u=e(904),l=e(9119),d=(0,i.c)(".q"),s=(0,i.e)(d,".r"),f=(0,i.e)(s,".s"),p=(0,i.e)(d,".t"),h=(0,i.e)(p,".u"),v="已儲存至資料夾",b="無法儲存";function m(t,n,e,o){var u=(0,i.a)();u.classList.add("v");var d=(0,i.a)();d.classList.add("w");var s=document.createElement("span");s.appendChild((0,c.b)(t.icon)),d.appendChild(s);var f=(0,i.a)();switch(f.classList.add("x"),f.innerText=t.name,u.appendChild(d),u.appendChild(f),n){case"stop":u.onclick=function(){(0,a.n)(t.id,e[0],e[1]).then(function(t){t?(0,a.e)("stop",e[0]).then(function(t){t&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(t)),(0,l.a)("folder",v),k())}):(0,l.a)("warning",b)})};break;case"route":u.onclick=function(){(0,a.m)(t.id,e[0]).then(function(t){t?(0,a.e)("route",e[0]).then(function(t){t&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(t)),(0,l.a)("folder",v),k())}):(0,l.a)("warning",b)})};break;case"location":u.onclick=function(){(0,a.l)(t.id,e[0]).then(function(t){t?(0,a.e)("location",e[0]).then(function(t){t&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(t)),(0,l.a)("folder",v),k())}):(0,l.a)("warning",b)})}}return u}function g(t,n,e){h.onclick=function(){(0,o.c)(function(){g(t,n,e)})};var i=(0,a.j)();f.innerHTML="";var r=new DocumentFragment;for(var c of i){var u=m(c,t,n,e);r.appendChild(u)}f.append(r)}function y(){d.setAttribute("displayed","true")}function $(){d.setAttribute("displayed","false")}function w(t,n,e){(0,u.c)("SaveToFolder"),y(),g(t,n,e),(0,u.b)()}function k(){$(),(0,u.i)(),(0,u.e)("SaveToFolder")}},752(t,n,e){e.d(n,{a:()=>v,b:()=>p,c:()=>h,d:()=>f});var a=e(3422),i=e(8179),r=e(4537),o=e(904),c=e(9119),u=(0,i.c)(".y"),l=(0,i.e)(u,".z"),d=(0,i.e)(l,"._");function s(t,n,e,o,u){var l=(0,i.a)();l.classList.add("aa");var d=(0,i.a)();d.classList.add("ba");var s=document.createElement("span");s.appendChild((0,r.b)(t.icon)),d.appendChild(s);var f=(0,i.a)();f.classList.add("ca"),f.innerText=t.name;var p=t.index;return l.onclick=function(){!function(t,n,e,i,r){(0,c.a)("manufacturing","處理中"),t.setAttribute("enabled","false"),v(),(0,a.m)(n,e,i,r).then(function(n){switch(n){case 0:(0,c.a)("error","設定失敗"),t.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),t.setAttribute("enabled","true"),t.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),t.setAttribute("enabled","true")}})}(n,e,o,u,p)},l.appendChild(d),l.appendChild(f),l}function f(){u.setAttribute("displayed","true")}function p(){u.setAttribute("displayed","false")}function h(t,n,e,i){(0,o.c)("ScheduleNotification"),f(),function(t,n,e,i){d.innerHTML="";var r=new DocumentFragment;for(var o of a.n){var c=s(o,t,n,e,i);r.appendChild(c)}d.append(r)}(t,n,e,i),(0,o.b)()}function v(){p(),(0,o.i)(),(0,o.e)("ScheduleNotification")}},4680(){},7820(){},1580(){},3377(){},9354(){},5328(){},3796(){},1828(){},6597(){},3777(){},9991(){},2421(){},2696(){},5461(){},5392(){},3534(){},6018(){},7225(){},1308(){},7723(){},1603(){},3749(){},7217(){},7287(){}}]);
//# sourceMappingURL=4bb0ef33ec5412e411d0.js.map