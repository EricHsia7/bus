{"version":3,"file":"74aa3980ab9102f3659c.js","mappings":"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","sources":["webpack://bus/./src/interface/schedule-notification/index.ts","webpack://bus/./src/interface/save-to-folder/index.ts","webpack://bus/./src/interface/route/details/actions.ts","webpack://bus/./src/interface/route/details/calendar.ts","webpack://bus/./src/interface/route/details/properties.ts","webpack://bus/./src/interface/route/details/index.ts"],"sourcesContent":["import { scheduleNotificationForStop, ScheduleNotificationOption, scheduleNotificationOptions } from '../../data/notification/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\nconst ScheduleNotificationField = documentQuerySelector('.css_schedule_notification_field');\nconst ScheduleNotificationBodyElement = elementQuerySelector(ScheduleNotificationField, '.css_schedule_notification_body');\nconst ScheduleNotificationListElement = elementQuerySelector(ScheduleNotificationBodyElement, '.css_schedule_notification_list');\n\ntype ScheduleNotificationType = 'stop-on-route' | 'stop-on-location';\n\nfunction generateElementOfItem(item: ScheduleNotificationOption, type: ScheduleNotificationType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_schedule_notification_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_schedule_notification_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_schedule_notification_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnRoute(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        scheduleNotificationForStopItemOnLocation(parameters[0], parameters[1], parameters[2], parameters[3], item.index);\n      };\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nfunction initializeScheduleNotificationField(type: ScheduleNotificationType, parameters: Array<any>): void {\n  ScheduleNotificationListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of scheduleNotificationOptions) {\n    const newElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newElement.element);\n  }\n  ScheduleNotificationListElement.append(fragment);\n}\n\nexport function openScheduleNotification(type: ScheduleNotificationType, parameters: Array<any>): void {\n  pushPageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'true');\n  initializeScheduleNotificationField(type, parameters);\n}\n\nexport function closeScheduleNotification(): void {\n  revokePageHistory('ScheduleNotification');\n  ScheduleNotificationField.setAttribute('displayed', 'false');\n}\n\nexport function scheduleNotificationForStopItemOnRoute(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nexport function scheduleNotificationForStopItemOnLocation(itemElementID: string, StopID: number, RouteID: number, EstimateTime: number, index: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const scheduleNotificationButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"schedule-notification\"]');\n  promptMessage('manufacturing', '處理中');\n  scheduleNotificationButtonElement.setAttribute('enabled', 'false');\n  closeScheduleNotification();\n  scheduleNotificationForStop(StopID, RouteID, EstimateTime, index).then((result) => {\n    switch (result) {\n      case 0:\n        promptMessage('error', '設定失敗');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      case 1:\n        promptMessage('check_circle', '設定成功');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        scheduleNotificationButtonElement.setAttribute('highlighted', 'true');\n        break;\n      case 2:\n        promptMessage('warning', '在設定中註冊後才可設定到站通知');\n        scheduleNotificationButtonElement.setAttribute('enabled', 'true');\n        break;\n      default:\n        break;\n    }\n  });\n}\n","import { FolderWithContent, isFolderContentSaved, listFoldersWithContent, saveLocation, saveRoute, saveStop } from '../../data/folder/index';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\nimport { booleanToString } from '../../tools/index';\nimport { getIconElement } from '../icons/index';\nimport { GeneratedElement, pushPageHistory, revokePageHistory } from '../index';\nimport { promptMessage } from '../prompt/index';\n\ntype SaveToFolderType = 'stop-on-route' | 'stop-on-location' | 'route' | 'route-on-route' | 'bus' | 'location' | 'location-on-route';\n\nconst SaveToFolderField = documentQuerySelector('.css_save_to_folder_field');\nconst SaveToFolderBodyElement = elementQuerySelector(SaveToFolderField, '.css_save_to_folder_body');\nconst SaveToFolderListElement = elementQuerySelector(SaveToFolderBodyElement, '.css_save_to_folder_list');\n\nconst successfulSaveMessage = '已儲存至資料夾';\nconst failedSaveMessage = '無法儲存';\n\nfunction generateElementOfItem(item: FolderWithContent, type: SaveToFolderType, parameters: Array<any>): GeneratedElement {\n  const itemElement = document.createElement('div');\n  itemElement.classList.add('css_save_to_folder_list_item');\n\n  // Icon element\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_save_to_folder_item_icon');\n  const iconSpanElement = document.createElement('span');\n  iconSpanElement.appendChild(getIconElement(item.icon));\n  iconElement.appendChild(iconSpanElement);\n\n  // Name element\n  const nameElement = document.createElement('div');\n  nameElement.classList.add('css_save_to_folder_item_name');\n  nameElement.appendChild(document.createTextNode(item.name));\n\n  // Event handler\n  switch (type) {\n    case 'stop-on-route':\n      itemElement.onclick = function () {\n        saveStopItemOnRoute(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'stop-on-location':\n      itemElement.onclick = function () {\n        saveStopItemOnLocation(parameters[0], item.id, parameters[1], parameters[2]);\n      };\n      break;\n    case 'route':\n      itemElement.onclick = function () {\n        saveRouteOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'route-on-route':\n      itemElement.onclick = function () {\n        saveRouteOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'location':\n      itemElement.onclick = function () {\n        saveLocationOnDetailsPage(item.id, parameters[0]);\n      };\n      break;\n    case 'location-on-route':\n      itemElement.onclick = function () {\n        saveLocationOnRoute(item.id, parameters[0]);\n      };\n      break;\n    case 'bus':\n      // No action\n      break;\n    default:\n      break;\n  }\n\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(nameElement);\n\n  return {\n    element: itemElement,\n    id: ''\n  };\n}\n\nasync function initializeSaveToFolderField(type: SaveToFolderType, parameters: Array<any>) {\n  const foldersWithContent = await listFoldersWithContent();\n  SaveToFolderListElement.innerHTML = '';\n  const fragment = new DocumentFragment();\n  for (const item of foldersWithContent) {\n    const newItemElement = generateElementOfItem(item, type, parameters);\n    fragment.appendChild(newItemElement.element);\n  }\n  SaveToFolderListElement.append(fragment);\n}\n\nexport function openSaveToFolder(type: SaveToFolderType, parameters: Array<any>): void {\n  pushPageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'true');\n  initializeSaveToFolderField(type, parameters);\n}\n\nexport function closeSaveToFolder(): void {\n  revokePageHistory('SaveToFolder');\n  SaveToFolderField.setAttribute('displayed', 'false');\n}\n\nfunction saveStopItemOnRoute(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_route_field .css_route_groups .css_route_group .css_route_group_tracks .css_route_group_items_track .css_route_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_route_group_item_body .css_route_group_item_buttons .css_route_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveStopItemOnLocation(itemElementID: string, folderID: string, StopID: number, RouteID: number): void {\n  const itemElement = documentQuerySelector(`.css_location_field .css_location_groups .css_location_group .css_location_group_items .css_location_group_item#${itemElementID}`);\n  const saveToFolderButtonElement = elementQuerySelector(itemElement, '.css_location_group_item_body .css_location_group_item_buttons .css_location_group_item_button[type=\"save-to-folder\"]');\n  saveStop(folderID, StopID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('stop', StopID).then((k) => {\n        if (k) {\n          saveToFolderButtonElement.setAttribute('highlighted', booleanToString(k));\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnDetailsPage(folderID: string, RouteID: number): void {\n  const actionButtonElement = documentQuerySelector('.css_route_details_field .css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"] .css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          actionButtonElement.setAttribute('highlighted', 'true');\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveRouteOnRoute(folderID: string, RouteID: number): void {\n  saveRoute(folderID, RouteID).then((e) => {\n    if (e) {\n      isFolderContentSaved('route', RouteID).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnDetailsPage(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n\nfunction saveLocationOnRoute(folderID: string, hash: string): void {\n  saveLocation(folderID, hash).then((e) => {\n    if (e) {\n      isFolderContentSaved('location', hash).then((k) => {\n        if (k) {\n          promptMessage('folder', successfulSaveMessage);\n          closeSaveToFolder();\n        }\n      });\n    } else {\n      promptMessage('warning', failedSaveMessage);\n    }\n  });\n}\n","import { searchRouteByRouteID } from '../../../data/search/index';\nimport { getPermalink } from '../../../tools/permalink';\nimport { promptMessage } from '../../prompt/index';\nimport { openQRCode } from '../../qrcode/index';\n\nexport async function shareRoutePermalink(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    if (navigator.share) {\n      navigator\n        .share({\n          title: thisRoute.n,\n          url: link\n        })\n        .then(() => {\n          promptMessage('check_circle', '已分享路線');\n        })\n        .catch((e) => {\n          promptMessage('cancel', '已取消分享');\n          console.error(e);\n        });\n    }\n  }\n}\n\nexport async function showRoutePermalinkQRCode(RouteID: number) {\n  const thisRoute = await searchRouteByRouteID(RouteID);\n  if (thisRoute !== false) {\n    const link = getPermalink(0, {\n      id: RouteID,\n      name: thisRoute.n\n    });\n    openQRCode(link);\n  }\n}\n","import { Calendar, CalendarDay, CalendarEvent, CalendarEventGroup } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { drawRoundedRect } from '../../../tools/graphic';\nimport { booleanToString } from '../../../tools/index';\nimport { getCSSVariableValue } from '../../../tools/style';\nimport { GeneratedElement, querySize } from '../../index';\nimport { CalendarDaysElement, CalendarEventGroupsElement } from './index';\n\nconst calendarRatio = 70;\nconst scaleLimit = 3150 / (calendarRatio * 24);\nconst gridlineBoxHeight = 10;\nconst gridlineWidth = 1.2;\nconst gridlineLabelWidthLimit = 45;\nconst fontFamily: string = '\"Noto Sans TC\", sans-serif';\n\nlet canvasSize = querySize('route-details-canvas');\nlet canvasWidth = canvasSize.width;\nlet canvasHeight = canvasSize.height;\nlet canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\nlet previousCalendar = {} as Calendar;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction resizeRouteDetailsCalendarCanvas(canvas: HTMLCanvasElement): void {\n  canvasSize = querySize('route-details-canvas');\n  canvasWidth = canvasSize.width;\n  canvasHeight = canvasSize.height;\n  canvasScale = Math.min(window.devicePixelRatio, scaleLimit) || 1;\n\n  // Set the new size\n  canvas.width = canvasWidth * canvasScale;\n  canvas.height = canvasHeight * canvasScale;\n\n  // Reset transformations before scaling\n  const context = canvas.getContext('2d');\n  context.setTransform(1, 0, 0, 1, 0, 0);\n  context.scale(canvasScale, canvasScale);\n}\n\nfunction generateElementOfDay(): GeneratedElement {\n  const element = document.createElement('div');\n  element.classList.add('css_route_details_calendar_day');\n\n  return {\n    element: element,\n    id: ''\n  };\n}\n\nfunction generateElementOfEventGroup(): GeneratedElement {\n  // Main event group element\n  const eventGroupElement = document.createElement('div');\n  eventGroupElement.classList.add('css_route_details_calendar_event_group');\n\n  // Canvas element\n  const canvasElement = document.createElement('canvas');\n  canvasElement.classList.add('css_route_details_calendar_event_group_canvas');\n  eventGroupElement.appendChild(canvasElement);\n\n  return {\n    element: eventGroupElement,\n    id: ''\n  };\n}\n\nexport function setUpCalendarGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultEventQuantity = {\n    d_0: 47,\n    d_1: 47,\n    d_2: 47,\n    d_3: 47,\n    d_4: 47,\n    d_5: 47,\n    d_6: 47\n  };\n  const defaultDayQuantity = 7;\n  let calendarEventGroups = {};\n  let calendarDays = {};\n  for (let i = 0; i < defaultDayQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    calendarEventGroups[eventGroupKey] = [];\n    calendarDays[eventGroupKey] = {\n      day: i,\n      code: `d_{i}`,\n      name: ''\n    };\n    for (let j = 0; j < defaultEventQuantity[eventGroupKey]; j++) {\n      const date = new Date();\n      date.setHours(0);\n      date.setMinutes(j * 30);\n      date.setSeconds(0);\n      date.setMilliseconds(0);\n      calendarEventGroups[eventGroupKey].push({\n        date: date,\n        dateString: '',\n        duration: 15\n      });\n    }\n  }\n  updateCalendarGroup(\n    {\n      calendarEventGroups: calendarEventGroups,\n      calendarDays: calendarDays,\n      calendarDayQuantity: defaultDayQuantity,\n      calendarEventQuantity: defaultEventQuantity\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateDay(thisDayElement: HTMLElement, thisDay: CalendarDay, currentDay: number, skeletonScreen: boolean, animation: boolean, index: number): void {\n  thisDayElement.innerText = thisDay.name;\n  thisDayElement.setAttribute('day', index.toString());\n  thisDayElement.onclick = function () {\n    switchCalendarDay(index);\n  };\n  thisDayElement.setAttribute('highlighted', currentDay === index ? 'true' : 'false');\n  thisDayElement.setAttribute('animation', booleanToString(animation));\n  thisDayElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n}\n\nfunction updateEventGroup(thisCalendarEventGroupElement: HTMLElement, thisCalendarEventGroup: CalendarEventGroup, currentDay: number, mainColor: string, mainColorR: string, mainColorG: string, mainColorB: string, mainColorA: string, gridColor: string, index: number): void {\n  function drawGridline(thisContext: CanvasRenderingContext2D, hours: number, gridColor: string): void {\n    const boxX = 0;\n    const boxY = hours * calendarRatio;\n\n    // Cache the color value once\n    thisContext.fillStyle = gridColor;\n\n    // Draw line\n    thisContext.fillRect(boxX + gridlineLabelWidthLimit, boxY + 5, canvasWidth - gridlineLabelWidthLimit, gridlineWidth);\n\n    // Draw label\n    thisContext.font = `400 ${12}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    const labelText = `${String(hours).padStart(2, '0')}:00`;\n    const labelMeasurement = thisContext.measureText(labelText);\n    const labelWidth = labelMeasurement.width;\n    const labelHeight = labelMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(labelText, (gridlineLabelWidthLimit - labelWidth) / 2, boxY + (gridlineBoxHeight - labelHeight) / 2, labelWidth);\n  }\n\n  function drawEvent(thisContext: CanvasRenderingContext2D, thisCalendarEvent: CalendarEvent, mainColor: string, mainColorR: string, mainColorG: string, mainColorB: string, mainColorA: string): void {\n    // Calculate the start of the day for this event only once.\n    const thisDayStart = new Date();\n    thisDayStart.setDate(1);\n    thisDayStart.setMonth(0);\n    thisDayStart.setFullYear(thisCalendarEvent.date.getFullYear());\n    thisDayStart.setMonth(thisCalendarEvent.date.getMonth());\n    thisDayStart.setDate(thisCalendarEvent.date.getDate());\n    thisDayStart.setHours(0);\n    thisDayStart.setMinutes(0);\n    thisDayStart.setSeconds(0);\n    thisDayStart.setMilliseconds(0);\n\n    const boxX = gridlineLabelWidthLimit;\n    const boxY = ((thisCalendarEvent.date.getTime() - thisDayStart.getTime()) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n    const boxWidth = canvasWidth - gridlineLabelWidthLimit;\n    const boxHeight = ((thisCalendarEvent.duration * 60 * 1000) / (24 * 60 * 60 * 1000)) * 24 * calendarRatio;\n\n    // Draw background with rounded rectangle\n    drawRoundedRect(thisContext, boxX, boxY, boxWidth, boxHeight, 3, `rgba(${mainColorR}, ${mainColorG}, ${mainColorB}, ${mainColorA})`);\n\n    // Draw decoration (a thin rounded rectangle)\n    drawRoundedRect(thisContext, boxX, boxY, 3, boxHeight, { tl: 3, tr: 0, bl: 3, br: 0 }, mainColor);\n\n    // Draw event text\n    thisContext.font = `400 ${14}px ${fontFamily}`;\n    thisContext.textBaseline = 'top';\n    thisContext.fillStyle = mainColor;\n    const text = thisCalendarEvent.dateString;\n    const textMeasurement = thisContext.measureText(text);\n    const textWidth = textMeasurement.width;\n    const textHeight = textMeasurement.actualBoundingBoxDescent;\n    thisContext.fillText(text, boxX + 8, boxY + (boxHeight - textHeight) / 2, textWidth);\n  }\n\n  function updateDisplayed(thisCalendarEventGroupElement: HTMLElement, currentDay: number, index: number): void {\n    // Set the displayed attribute based on whether it is the current day.\n    const isDisplayed = currentDay === index;\n    thisCalendarEventGroupElement.setAttribute('displayed', booleanToString(isDisplayed));\n  }\n\n  // Get the canvas and its 2D context.\n  const thisCalendarEventGroupCanvas = elementQuerySelector(thisCalendarEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n  const thisCalendarEventGroupCanvasContext = thisCalendarEventGroupCanvas.getContext('2d');\n\n  // Update the displayed attribute\n  updateDisplayed(thisCalendarEventGroupElement, currentDay, index);\n\n  // Always resize the canvas to ensure proper dimensions.\n  resizeRouteDetailsCalendarCanvas(thisCalendarEventGroupCanvas);\n\n  const isDisplayed = currentDay === index;\n  if (isDisplayed) {\n    // Clear the canvas and redraw the content when displayed.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    // Draw the gridlines.\n    for (let hours = 0; hours < 24; hours++) {\n      drawGridline(thisCalendarEventGroupCanvasContext, hours, gridColor);\n    }\n\n    // Draw all events for this group.\n    for (const thisCalendarEvent of thisCalendarEventGroup) {\n      drawEvent(thisCalendarEventGroupCanvasContext, thisCalendarEvent, mainColor, mainColorR, mainColorG, mainColorB, mainColorA);\n    }\n  } else {\n    // When not displayed, clear the canvas.\n    thisCalendarEventGroupCanvasContext.clearRect(0, 0, canvasWidth, canvasHeight);\n  }\n}\n\nexport function updateCalendarGroup(calendar: Calendar, skeletonScreen: boolean, animation: boolean): void {\n  // The default day to display.\n  const currentDay = new Date().getDay();\n\n  // Retrieve the CSS variable values just once\n  const mainColorR = getCSSVariableValue('--b-cssvar-main-color-r');\n  const mainColorG = getCSSVariableValue('--b-cssvar-main-color-g');\n  const mainColorB = getCSSVariableValue('--b-cssvar-main-color-b');\n  const mainColorA = getCSSVariableValue('--b-cssvar-main-color-opacity-e');\n  const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n  const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n  const eventGroups = calendar.calendarDays;\n  const eventGroupQuantity = calendar.calendarDayQuantity;\n  const calendarEventGroups = calendar.calendarEventGroups;\n  const eventQuantity = calendar.calendarEventQuantity;\n\n  const currentEventGroupCapacity = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group').length;\n  if (eventGroupQuantity !== currentEventGroupCapacity) {\n    const difference = currentEventGroupCapacity - eventGroupQuantity;\n    if (difference < 0) {\n      // Add missing day and event group elements.\n      const calendarDaysFragment = new DocumentFragment();\n      const calendarEventGroupsFragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const newDayElement = generateElementOfDay();\n        calendarDaysFragment.appendChild(newDayElement.element);\n        const newEventGroupElement = generateElementOfEventGroup();\n        calendarEventGroupsFragment.appendChild(newEventGroupElement.element);\n      }\n      CalendarDaysElement.append(calendarDaysFragment);\n      CalendarEventGroupsElement.append(calendarEventGroupsFragment);\n    } else {\n      // Remove extra elements.\n      const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n      const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const eventGroupIndex = currentEventGroupCapacity - 1 - o;\n        CalendarDayElements[eventGroupIndex].remove();\n        CalendarEventGroupElements[eventGroupIndex].remove();\n      }\n    }\n  }\n\n  // Update each day and its corresponding event group.\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (let i = 0; i < eventGroupQuantity; i++) {\n    const eventGroupKey = `d_${i}`;\n    const thisDay = eventGroups[eventGroupKey];\n    const thisEventGroup = calendarEventGroups[eventGroupKey];\n\n    const thisDayElement = CalendarDayElements[i];\n    const thisEventGroupElement = CalendarEventGroupElements[i];\n\n    updateDay(thisDayElement, thisDay, currentDay, skeletonScreen, animation, i);\n    updateEventGroup(thisEventGroupElement, thisEventGroup, currentDay, mainColor, mainColorR, mainColorG, mainColorB, mainColorA, gridColor, i);\n  }\n\n  previousCalendar = calendar;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nexport function switchCalendarDay(day: number): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const calendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (let i = 0; i < 7; i++) {\n    const thisCalendarDayElement = calendarDayElements[i];\n    // const thisCalendarDayElementDay = parseInt(thisCalendarDayElement.getAttribute('day'));\n    const thisEventGroupElement = CalendarEventGroupElements[i];\n    // if (thisCalendarDayElementDay === day) {\n    /*\n      thisCalendarDayElement.setAttribute('highlighted', 'true');\n      thisEventGroupElement.setAttribute('displayed', 'true');\n      */\n    const eventGroupKey = `d_${i}`;\n    const calendarEventGroup = previousCalendar?.calendarEventGroups[eventGroupKey];\n    const calendarDay = previousCalendar?.calendarDays[eventGroupKey];\n    if (calendarEventGroup && calendarDay) {\n      // Retrieve the CSS variable values just once\n      const mainColorR = getCSSVariableValue('--b-cssvar-main-color-r');\n      const mainColorG = getCSSVariableValue('--b-cssvar-main-color-g');\n      const mainColorB = getCSSVariableValue('--b-cssvar-main-color-b');\n      const mainColorA = getCSSVariableValue('--b-cssvar-main-color-opacity-e');\n      const mainColor = getCSSVariableValue('--b-cssvar-main-color');\n      const gridColor = getCSSVariableValue('--b-cssvar-ededf2');\n\n      // Reuse the drawing logic from updateEventGroup and updateDay for the visible event group.\n      updateDay(thisCalendarDayElement, calendarDay, day, false, playing_animation, i);\n      updateEventGroup(thisEventGroupElement, calendarEventGroup, day, mainColor, mainColorR, mainColorG, mainColorB, mainColorA, gridColor, i);\n    }\n    /*} else {\n      thisCalendarDayElement.setAttribute('highlighted', 'false');\n      thisEventGroupElement.setAttribute('displayed', 'false');\n\n      // Clear the canvas for non-displayed elements.\n      const canvas = elementQuerySelector(thisEventGroupElement, '.css_route_details_calendar_event_group_canvas') as HTMLCanvasElement;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    }*/\n  }\n}\n","import { getSettingOptionValue } from '../../../data/settings/index';\nimport { elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings } from '../../../tools/index';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { GeneratedElement } from '../../index';\nimport { PropertiesGroupBodyElement, PropertiesGroupElement } from './index';\n\nlet previousProperties = [];\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nfunction generateElementOfProperty(): GeneratedElement {\n  const propertyElement = document.createElement('div');\n  propertyElement.classList.add('css_route_details_property');\n\n  const iconElement = document.createElement('div');\n  iconElement.classList.add('css_route_details_property_icon');\n  iconElement.appendChild(getBlankIconElement());\n  propertyElement.appendChild(iconElement);\n\n  const valueElement = document.createElement('div');\n  valueElement.classList.add('css_route_details_property_value');\n  propertyElement.appendChild(valueElement);\n\n  return {\n    element: propertyElement,\n    id: ''\n  };\n}\n\nexport function setUppropertiesGroupSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const defaultPropertyQuantity = 5;\n  const properties = [];\n  for (let i = 0; i < defaultPropertyQuantity; i++) {\n    properties.push({\n      key: i,\n      icon: 'none',\n      value: ''\n    });\n  }\n  updatePropertiesField(properties, true, playing_animation);\n}\n\nexport function updatePropertiesField(properties: Array, skeletonScreen: boolean, animation: boolean): void {\n  function updateProperty(thisElement: HTMLElement, thisProperty: object, previousProperty: object): void {\n    function updateIcon(thisElement: HTMLElement, thisProperty: object): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_route_details_property_icon');\n      setIcon(thisIconElement, thisProperty.icon);\n    }\n\n    function updateValue(thisElement: HTMLElement, thisProperty: object): void {\n      elementQuerySelector(thisElement, '.css_route_details_property_value').innerText = thisProperty.value;\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousProperty === null || previousProperty === undefined) {\n      updateIcon(thisElement, thisProperty);\n      updateValue(thisElement, thisProperty);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateIcon(thisElement, thisProperty);\n      }\n      if (!compareThings(previousProperty, thisProperty)) {\n        updateValue(thisElement, thisProperty);\n      }\n      if (previousAnimation !== animation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (previousSkeletonScreen !== skeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const propertyQuantity = properties.length;\n\n  if (skeletonScreen !== previousSkeletonScreen) {\n    PropertiesGroupElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n  }\n\n  const currentPropertyCapacity = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property').length;\n  if (propertyQuantity !== currentPropertyCapacity) {\n    const difference = currentPropertyCapacity - propertyQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        // const propertyIndex = currentPropertyCapacity + o;\n        const newPropertyElement = generateElementOfProperty();\n        fragment.appendChild(newPropertyElement.element);\n      }\n      PropertiesGroupBodyElement.append(fragment);\n    } else {\n      const propertyElements = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property');\n      for (let o = 0, d = Math.abs(difference); o < d; o++) {\n        const propertyIndex = currentPropertyCapacity - 1 - o;\n        propertyElements[propertyIndex].remove();\n      }\n    }\n  }\n\n  const propertyElements = elementQuerySelectorAll(PropertiesGroupBodyElement, '.css_route_details_property');\n  for (let i = 0; i < propertyQuantity; i++) {\n    const thisPropertyElement = propertyElements[i];\n    const thisProperty = properties[i];\n    if (previousProperties.length === 0) {\n      updateProperty(thisPropertyElement, thisProperty, null);\n    } else {\n      updateProperty(thisPropertyElement, thisProperty, previousProperties[i]);\n    }\n  }\n\n  previousProperties = properties;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n","import { isFolderContentSaved } from '../../../data/folder/index';\nimport { integrateRouteDetails } from '../../../data/route/details';\nimport { getSettingOptionValue } from '../../../data/settings/index';\nimport { documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, generateIdentifier } from '../../../tools/index';\nimport { pushPageHistory, revokePageHistory } from '../../index';\nimport { openSaveToFolder } from '../../save-to-folder/index';\nimport { shareRoutePermalink, showRoutePermalinkQRCode } from './actions';\nimport { setUpCalendarGroupSkeletonScreen, updateCalendarGroup } from './calendar';\nimport { setUppropertiesGroupSkeletonScreen, updatePropertiesField } from './properties';\n\nexport const RouteDetailsField = documentQuerySelector('.css_route_details_field');\nexport const RouteDetailsBodyElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body');\nexport const RouteDetailsGroupsElement = elementQuerySelector(RouteDetailsBodyElement, '.css_route_details_groups');\n\nexport const CalendarGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"calendar\"]');\nexport const CalendarGroupBodyElement = elementQuerySelector(CalendarGroupElement, '.css_route_details_group_body');\nexport const CalendarDaysElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_days');\nexport const CalendarEventGroupsElement = elementQuerySelector(CalendarGroupBodyElement, '.css_route_details_calendar_event_groups');\n\nexport const ActionsGroupElement = elementQuerySelector(RouteDetailsField, '.css_route_details_body .css_route_details_groups .css_route_details_group[group=\"actions\"]');\nexport const svaeToFolderActionButtonElement = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"save-to-folder\"]');\nexport const getPermalinkActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"get-permalink\"]');\nexport const showPermalinkQRCodeActionButton = elementQuerySelector(ActionsGroupElement, '.css_route_details_group_body .css_route_details_action_button[action=\"show-permalink-qrcode\"]');\n\nexport const PropertiesGroupElement = elementQuerySelector(RouteDetailsGroupsElement, '.css_route_details_group[group=\"properties\"]');\nexport const PropertiesGroupBodyElement = elementQuerySelector(PropertiesGroupElement, '.css_route_details_group_body');\n\nasync function initializeRouteDetailsField(RouteID: number, PathAttributeId: Array<number>) {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const existence = await isFolderContentSaved('route', RouteID);\n  svaeToFolderActionButtonElement.setAttribute('animation', booleanToString(playing_animation));\n  svaeToFolderActionButtonElement.setAttribute('highlighted', booleanToString(existence));\n  svaeToFolderActionButtonElement.onclick = function () {\n    openSaveToFolder('route', [RouteID]);\n  };\n  getPermalinkActionButton.setAttribute('animation', booleanToString(playing_animation));\n  getPermalinkActionButton.onclick = function () {\n    shareRoutePermalink(RouteID);\n  };\n  showPermalinkQRCodeActionButton.setAttribute('animation', booleanToString(playing_animation));\n  showPermalinkQRCodeActionButton.onclick = function () {\n    showRoutePermalinkQRCode(RouteID);\n  };\n  setUppropertiesGroupSkeletonScreen(PropertiesGroupElement);\n  setUpCalendarGroupSkeletonScreen();\n  const requestID = generateIdentifier();\n  const integration = await integrateRouteDetails(RouteID, PathAttributeId, requestID);\n  updatePropertiesField(integration.properties, false, playing_animation);\n  updateCalendarGroup(integration.calendar, false, playing_animation);\n}\n\nexport function openRouteDetails(RouteID: number, PathAttributeId: Array<number>): void {\n  pushPageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'true');\n  initializeRouteDetailsField(RouteID, PathAttributeId);\n}\n\nexport function closeRouteDetails(): void {\n  revokePageHistory('RouteDetails');\n  RouteDetailsField.setAttribute('displayed', 'false');\n  const CalendarEventGroupElements = elementQuerySelectorAll(CalendarEventGroupsElement, '.css_route_details_calendar_event_group');\n  for (const CalendarEventGroupElement of CalendarEventGroupElements) {\n    CalendarEventGroupElement.remove();\n  }\n  const CalendarDayElements = elementQuerySelectorAll(CalendarDaysElement, '.css_route_details_calendar_day');\n  for (const CalendarDayElement of CalendarDayElements) {\n    CalendarDayElement.remove();\n  }\n}\n"],"names":["ScheduleNotificationField","documentQuerySelector","ScheduleNotificationBodyElement","elementQuerySelector","ScheduleNotificationListElement","generateElementOfItem","item","type","parameters","itemElement","document","createElement","classList","add","iconElement","iconSpanElement","appendChild","getIconElement","icon","nameElement","createTextNode","name","onclick","itemElementID","StopID","RouteID","EstimateTime","index","scheduleNotificationButtonElement","promptMessage","setAttribute","closeScheduleNotification","scheduleNotificationForStop","then","result","scheduleNotificationForStopItemOnRoute","scheduleNotificationForStopItemOnLocation","element","id","openScheduleNotification","pushPageHistory","innerHTML","_step","fragment","DocumentFragment","_iterator","_createForOfIteratorHelper","scheduleNotificationOptions","s","n","done","newElement","value","err","e","f","append","initializeScheduleNotificationField","revokePageHistory","SaveToFolderField","SaveToFolderBodyElement","SaveToFolderListElement","successfulSaveMessage","failedSaveMessage","folderID","saveToFolderButtonElement","saveStop","isFolderContentSaved","k","booleanToString","closeSaveToFolder","saveStopItemOnRoute","saveStopItemOnLocation","actionButtonElement","saveRoute","hash","saveLocation","_initializeSaveToFolderField","_asyncToGenerator","foldersWithContent","listFoldersWithContent","newItemElement","apply","arguments","openSaveToFolder","_x","_x2","initializeSaveToFolderField","_shareRoutePermalink","thisRoute","searchRouteByRouteID","link","getPermalink","navigator","share","title","url","_showRoutePermalinkQRCode","openQRCode","fontFamily","canvasSize","querySize","canvasWidth","width","canvasHeight","height","canvasScale","Math","min","window","devicePixelRatio","previousCalendar","generateElementOfDay","generateElementOfEventGroup","eventGroupElement","canvasElement","updateDay","thisDayElement","thisDay","currentDay","skeletonScreen","animation","innerText","toString","day","playing_animation","getSettingOptionValue","calendarDayElements","elementQuerySelectorAll","CalendarDaysElement","CalendarEventGroupElements","CalendarEventGroupsElement","i","_previousCalendar","_previousCalendar2","thisCalendarDayElement","thisEventGroupElement","eventGroupKey","calendarEventGroup","calendarEventGroups","calendarDay","calendarDays","mainColorR","getCSSVariableValue","mainColorG","mainColorB","mainColorA","mainColor","gridColor","updateEventGroup","switchCalendarDay","thisCalendarEventGroupElement","thisCalendarEventGroup","drawGridline","thisContext","hours","boxY","fillStyle","fillRect","boxX","font","textBaseline","labelText","String","padStart","labelMeasurement","measureText","labelWidth","labelHeight","actualBoundingBoxDescent","fillText","drawEvent","thisCalendarEvent","thisDayStart","Date","setDate","setMonth","setFullYear","date","getFullYear","getMonth","getDate","setHours","setMinutes","setSeconds","setMilliseconds","getTime","boxWidth","boxHeight","duration","drawRoundedRect","tl","tr","bl","br","text","dateString","textMeasurement","textWidth","textHeight","thisCalendarEventGroupCanvas","thisCalendarEventGroupCanvasContext","getContext","isDisplayed","updateDisplayed","canvas","context","setTransform","scale","resizeRouteDetailsCalendarCanvas","clearRect","updateCalendarGroup","calendar","getDay","eventGroups","eventGroupQuantity","calendarDayQuantity","currentEventGroupCapacity","calendarEventQuantity","length","difference","calendarDaysFragment","calendarEventGroupsFragment","o","d","abs","newDayElement","newEventGroupElement","CalendarDayElements","eventGroupIndex","remove","thisEventGroup","previousProperties","previousAnimation","previousSkeletonScreen","generateElementOfProperty","propertyElement","getBlankIconElement","valueElement","updatePropertiesField","properties","updateProperty","thisElement","thisProperty","previousProperty","updateIcon","thisIconElement","setIcon","updateValue","updateAnimation","updateSkeletonScreen","compareThings","propertyQuantity","PropertiesGroupElement","currentPropertyCapacity","PropertiesGroupBodyElement","newPropertyElement","propertyElements","thisPropertyElement","RouteDetailsField","RouteDetailsBodyElement","RouteDetailsGroupsElement","CalendarGroupElement","CalendarGroupBodyElement","ActionsGroupElement","svaeToFolderActionButtonElement","getPermalinkActionButton","showPermalinkQRCodeActionButton","_initializeRouteDetailsField","PathAttributeId","existence","shareRoutePermalink","showRoutePermalinkQRCode","push","key","setUppropertiesGroupSkeletonScreen","defaultEventQuantity","d_0","d_1","d_2","d_3","d_4","d_5","d_6","code","j","setUpCalendarGroupSkeletonScreen","requestID","generateIdentifier","integration","integrateRouteDetails","openRouteDetails","initializeRouteDetailsField","closeRouteDetails","_step2","_iterator2"],"ignoreList":[],"sourceRoot":""}