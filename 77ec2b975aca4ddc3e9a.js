"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{112(){},321(){},626(){},969(){},1078(){},1195(){},1452(){},1469(){},1484(){},1511(){},1542(){},2174(e,t,n){n.d(t,{Sv:()=>P,m_:()=>W});var r=n(467),i=n(5767),a=n(365),u=n(3422),l=n(3459),o=n(8179),d=n(8024),s=n(4537),c=n(904),f=n(9119),p=(0,o.bv)(".jl"),m=(0,o.aI)(p,".ml"),v=(0,o.aI)(m,".ql"),h=(0,o.aI)(v,".rl"),y=(0,o.aI)(p,".tl"),g=(0,o.aI)(y,".ul"),b={},A=!1,I=15e3,k=5e3,C=15e3,_=!0,w=0,x=0,E="",L=!1,S=!1,T=!1;function M(e){var t=e;if(L){var n=t.detail.progress-1;h.style.setProperty("--kl",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,M)}function $(){var e=(0,d.zx)(),t=document.createElement("div");t.classList.add("vl"),t.id=e;var n=document.createElement("div");n.classList.add("wl"),t.appendChild(n);var r=document.createElement("div");r.classList.add("xl");var i=document.createElement("div");i.classList.add("yl"),r.appendChild(i);var a=document.createElement("div");a.classList.add("zl"),r.appendChild(a);var u=document.createElement("div");u.classList.add("_l"),r.appendChild(u);var l=document.createElement("div");l.classList.add("am");var o=document.createElement("span");return o.appendChild((0,s.YC)("close")),l.appendChild(o),r.appendChild(l),t.appendChild(r),{element:t,id:e}}function j(e,t,n){function r(e,r,i){function a(e,t){(0,o.aI)(e,".wl").innerText=t.hours}function u(e,t){var n=(0,o.aI)(e,".xl");(0,o.aI)(n,".yl").innerText=t.minutes}function l(e,t){var n=(0,o.aI)(e,".xl");(0,o.aI)(n,"._l").innerText=t.name}function s(e,t){var n=(0,o.aI)(e,".xl");(0,o.aI)(n,".zl").innerText=`${t.route.name} - 往${t.route.direction}`}function c(e,t){var n=(0,o.aI)(e,".xl");(0,o.aI)(n,".am").onclick=function(){!function(e,t){D.apply(this,arguments)}(e.id,t.schedule_id)}}function f(e,t){e.setAttribute("first",(0,d.xZ)(t.is_first))}function p(e,t){e.setAttribute("animation",(0,d.xZ)(t))}function m(e,t){e.setAttribute("skeleton-screen",(0,d.xZ)(t))}null==i?(a(e,r),u(e,r),l(e,r),s(e,r),c(e,r),f(e,r),p(e,n),m(e,t)):(r.hours!==i.hours&&a(e,r),r.minutes!==i.minutes&&u(e,r),(0,d.hw)(i.schedule_id,r.schedule_id)||(l(e,r),s(e,r),c(e,r)),i.is_first!==r.is_first&&f(e,r),false!==n&&p(e,n),A!==t&&m(e,t))}var i=e.itemQuantity,a=e.items,u=(0,o.jg)(g,".vl").length;if(i!==u){var l=u-i;if(l<0){for(var s=new DocumentFragment,c=0,f=Math.abs(l);c<f;c++){var p=$();s.appendChild(p.element)}g.append(s)}else for(var m=(0,o.jg)(g,".vl"),v=0,h=Math.abs(l);v<h;v++){m[u-1-v].remove()}}for(var y=(0,o.jg)(g,".vl"),I=0;I<i;I++){var k=y[I],C=a[I];if((0,d.mQ)(b,"items"))if(b.items[I])r(k,C,b.items[I]);else r(k,C,null);else r(k,C,null)}b=e,A=t}function Z(){return R.apply(this,arguments)}function R(){return(R=(0,r.A)(function*(){var e=(0,l.Js)("playing_animation"),t=(0,l.Js)("refresh_interval");_=t.dynamic,I=t.baseInterval,L=!0,E=(0,d.zx)(),h.setAttribute("refreshing","true"),h.classList.remove("sl"),document.addEventListener(E,M);var n=yield(0,u.e3)(E);j(n,!1,e);var r=0;_&&(r=yield(0,i.wz)()),w=(new Date).getTime(),x=_?Math.max(w+k,n.dataUpdateTime+I/r):w+I,C=Math.max(k,x-w),L=!1,h.setAttribute("refreshing","false"),h.style.setProperty("--ll",`${C}ms`),h.classList.add("sl")})).apply(this,arguments)}function z(){return J.apply(this,arguments)}function J(){return(J=(0,r.A)(function*(){Z().then(function(){S?setTimeout(function(){z()},Math.max(k,x-(new Date).getTime())):T=!1}).catch(function(e){S?setTimeout(function(){z()},1e4):T=!1})})).apply(this,arguments)}function P(){(0,c.WR)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var e=(0,l.Js)("playing_animation"),t=(0,c.gO)("window"),n=(t.width,t.height),r=Math.floor(n/50)+5,i=[],a=0;a<r;a++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});j({items:i,itemQuantity:r,dataUpdateTime:0},!0,e)}(),S||(S=!0,T?Z():(T=!0,z())),(0,c.Z_)()}function W(){p.setAttribute("displayed","false"),S=!1,(0,c.l$)()}function D(){return(D=(0,r.A)(function*(e,t){if((0,f.a)("manufacturing","處理中"),yield(0,a.G)(t)){if((0,o.aI)(g,`.vl#${e}`).remove(),(0,f.a)("check_circle","已取消通知"),!L){var n=(0,l.Js)("playing_animation");j(yield(0,u.e3)(E),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},3011(){},3257(){},3382(){},3963(){},4263(){},4305(){},4721(){},4935(){},5068(){},5228(){},5374(){},5504(){},5666(){},5693(e,t,n){n.d(t,{Dn:()=>_,Xy:()=>C,bF:()=>k,gv:()=>b});var r=n(3453),i=n(467),a=n(5352),u=n(8179),l=n(5579),o=n(904),d=(0,u.bv)(".xk"),s=(0,u.aI)(d,".bl"),c=(0,u.aI)(d,".yk"),f=(0,u.aI)(c,".zk"),p=(0,u.aI)(s,".cl"),m=(0,u.aI)(p,'.dl[group="schedule-name"] .hl input'),v=(0,u.aI)(p,'.dl[group="schedule-start-time"] .hl input'),h=(0,u.aI)(p,'.dl[group="schedule-end-time"] .hl input'),y=(0,u.aI)(p,'.dl[group="schedule-days"] .hl'),g=(0,u.jg)(y,".il");function b(e){return A.apply(this,arguments)}function A(){return(A=(0,i.A)(function*(e){for(var t=m.value,n=v.value,i=h.value,u=String(n).split(":").map(function(e){return parseInt(e)}),l=(0,r.A)(u,2),o=l[0],d=l[1],s=String(i).split(":").map(function(e){return parseInt(e)}),c=(0,r.A)(s,2),f=c[0],p=c[1],y=[],b=0;b<7;b++){var A=g[b],I=A.getAttribute("highlighted"),k=parseInt(A.getAttribute("day"));"true"===I&&y.push(k)}var _=yield(0,a.qZ)(e);_.name=t,_.days=y,_.period.start.hours=o,_.period.start.minutes=d,_.period.end.hours=f,_.period.end.minutes=p,yield(0,a.nL)(_),C()})).apply(this,arguments)}function I(){return(I=(0,i.A)(function*(e){var t=yield(0,a.qZ)(e);m.value=t.name,v.value=(0,l.pn)(t.period.start),h.value=(0,l.pn)(t.period.end);for(var n=0;n<7;n++){var r=g[n];t.days.indexOf(n)>-1?r.setAttribute("highlighted","true"):r.setAttribute("highlighted","false")}f.onclick=function(){b(e)}})).apply(this,arguments)}function k(e){(0,o.WR)("PersonalScheduleEditor"),d.setAttribute("displayed","true"),function(e){I.apply(this,arguments)}(e),(0,o.Z_)()}function C(){d.setAttribute("displayed","false"),(0,o.l$)()}function _(e){var t=(0,u.aI)(y,`.il[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},5995(){},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(e,t,n){n.d(t,{Z:()=>y,z:()=>h});var r=n(467),i=n(5352),a=n(8179),u=n(4537),l=n(904),o=n(5693);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=(0,a.bv)(".ak"),f=(0,a.aI)(c,".fk"),p=(0,a.aI)(f,".gk");function m(e){var t=document.createElement("div");t.classList.add("hk"),t.onclick=function(){(0,o.bF)(e.id)};var n=document.createElement("div");n.classList.add("ik"),n.appendChild(document.createTextNode(e.name)),t.appendChild(n);var r=document.createElement("div");r.classList.add("jk");var i=document.createElement("span");return i.appendChild((0,u.YC)("arrow_forward_ios")),r.appendChild(i),t.appendChild(r),{element:t,id:""}}function v(){return(v=(0,r.A)(function*(){p.innerHTML="";var e,t=yield(0,i.ty)(),n=new DocumentFragment,r=d(t);try{for(r.s();!(e=r.n()).done;){var a=m(e.value);n.appendChild(a.element)}}catch(e){r.e(e)}finally{r.f()}p.append(n)})).apply(this,arguments)}function h(){(0,l.WR)("PersonalScheduleManager"),c.setAttribute("displayed","true"),function(){v.apply(this,arguments)}()}function y(){(0,l.kr)("PersonalScheduleManager"),c.setAttribute("displayed","false")}},7908(e,t,n){n.d(t,{NW:()=>y,XG:()=>v,hy:()=>h});var r=n(467),i=n(3937),a=n(3422),u=n(8179),l=n(8024),o=n(904),d=n(9119),s=(0,u.bv)(".bm"),c=(0,u.aI)(s,".gm"),f=(0,u.aI)(c,".hm"),p=(0,u.aI)(f,'.im[group="provider"] .mm input'),m=(0,u.aI)(f,'.im[group="registration-key"] .mm input');function v(){(0,o.WR)("RegisterNotification"),s.setAttribute("displayed","true"),p.value=(0,a.D7)(),m.value="",(0,o.Z_)()}function h(){s.setAttribute("displayed","false"),(0,o.l$)()}function y(){return g.apply(this,arguments)}function g(){return(g=(0,r.A)(function*(){(0,d.a)("manufacturing","處理中");var e=p.value,t=m.value;if((0,l.Gz)(e))return(0,a.Je)(e),(yield(0,i.e)(t))?void(0,d.a)("check_circle","註冊成功"):void(0,d.a)("error","註冊失敗");(0,d.a)("error","無效的提供者")})).apply(this,arguments)}},7943(){},8279(e,t,n){n.d(t,{Vc:()=>d,X8:()=>o});var r=n(8179),i=n(2648),a=n(904),u=(0,r.bv)(".nm"),l=(0,r.aI)(u,".sm");function o(e){(0,a.WR)("QRCode"),u.setAttribute("displayed","true"),function(e){var t=(0,i.$)(e,"M",.5,.3,1,"var(--a)",4);l.innerHTML=t}(e)}function d(){(0,a.kr)("QRCode"),u.setAttribute("displayed","false")}},8380(e,t,n){n.d(t,{GJ:()=>g,I1:()=>y,Ps:()=>h,om:()=>b});var r=n(3453),i=n(5352),a=n(8179),u=n(904),l=n(9119),o=(0,a.bv)(".kk"),d=(0,a.aI)(o,".pk"),s=(0,a.aI)(d,".qk"),c=(0,a.aI)(s,'.rk[group="schedule-name"] .vk input'),f=(0,a.aI)(s,'.rk[group="schedule-start-time"] .vk input'),p=(0,a.aI)(s,'.rk[group="schedule-end-time"] .vk input'),m=(0,a.aI)(s,'.rk[group="schedule-days"] .vk'),v=(0,a.jg)(m,".wk");function h(){for(var e=c.value,t=f.value,n=p.value,a=String(t).split(":").map(function(e){return parseInt(e)}),u=(0,r.A)(a,2),o=u[0],d=u[1],s=String(n).split(":").map(function(e){return parseInt(e)}),m=(0,r.A)(s,2),h=m[0],y=m[1],b=[],A=0;A<7;A++){var I=v[A],k=I.getAttribute("highlighted"),C=parseInt(I.getAttribute("day"));"true"===k&&b.push(C)}(0,i.Qh)(e,o,d,h,y,b).then(function(e){e?(g(),(0,l.a)("calendar_view_day","已建立個人化行程")):(0,l.a)("error","無法建立個人化行程")})}function y(){(0,u.WR)("PersonalScheduleCreator"),o.setAttribute("displayed","true"),(0,u.Z_)()}function g(){o.setAttribute("displayed","false"),(0,u.l$)()}function b(e){var t=(0,a.aI)(m,`.wk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8983(){},9119(e,t,n){n.d(t,{a:()=>s});var r=n(2284),i=n(3459),a=n(8179),u=n(8024),l=n(4537);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){var d=(0,a.e0)(".tm");if(null!==d){var s,c=o(d);try{for(c.s();!(s=c.n()).done;){s.value.remove()}}catch(e){c.e(e)}finally{c.f()}}var f=(0,i.Js)("playing_animation"),p=document.createElement("div");p.classList.add("tm"),p.setAttribute("animation",(0,u.xZ)(f));var m=document.createElement("div");m.classList.add("um"),m.appendChild((0,l.YC)(e)),p.appendChild(m);var v=document.createElement("div");if(v.classList.add("vm"),v.innerText=t,p.appendChild(v),"object"===(0,r.A)(n)&&null!=n&&"function"==typeof(null==n?void 0:n.action)){var h=document.createElement("div");h.classList.add("wm"),h.innerText=n.text,h.addEventListener("click",function(){n.action()},{once:!0}),p.appendChild(h)}p.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(p)}},9598(){}}]);