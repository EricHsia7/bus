"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[399],{4256:(r,t,n)=>{n.r(t),n.d(t,{addressToString:()=>f,extractCommonFeaturesFromAddresses:()=>s,generateLabelFromAddresses:()=>h,mergeAddressesIntoOne:()=>l});var e=n(2945),o=n(2129);function a(r){return function(r){if(Array.isArray(r))return c(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||i(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=i(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,o=function(){};return{s:o,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return u=r.done,r},e:function(r){c=!0,a=r},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(r,t){if(r){if("string"==typeof r)return c(r,t);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(r,t):void 0}}function c(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);n<t;n++)e[n]=r[n];return e}function l(r){var t=[{suffixes:"市",key:"city",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{suffixes:"區",key:"district",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{suffixes:"鄉鎮村里",key:"area",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{suffixes:"路街道",key:"road",process:function(r){return null===r?null:r.map((function(r){return r.replaceAll(/[\(\)（）]/gim,"").trim()}))},type:0},{suffixes:"段",key:"road_section",process:function(r){for(var t=function(r){switch(r){case"一":return 1;case"二":return 2;case"三":return 3;case"四":return 4;case"五":return 5;case"六":return 6;case"七":return 7;case"八":return 8;case"九":return 9;case"十":return 10}return isNaN(parseInt(r))?0:parseInt(r)},n=String(r).length,e=[],o=0;o<n;o++){var a=t(String(r).charAt(o));10===a?e.length>0&&(e=[10*e.reduce((function(r,t){return r+t}),0)]):e=[e.reduce((function(r,t){return r+t}),0)+a]}return e},type:0},{suffixes:"巷",key:"alley",process:function(r){return null===r?null:r.map((function(r){return parseInt(r.trim().replaceAll(/[巷]/gim))}))},type:0},{suffixes:"弄",key:"alley_branch",process:function(r){return null===r?null:r.map((function(r){return parseInt(r.trim().replaceAll(/[弄]/gim))}))},type:0},{suffixes:"號",key:"doorplate",process:function(r){var t,n=String(r).match(/[0-9]+/gim);return n=(null===(t=n)||void 0===t?void 0:t.map((function(r){return null===r?null:parseInt(r)})))||null},type:0},{suffixes:"樓",key:"floornumber",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:0},{key:"exit",process:function(r){return null===r?null:r.map((function(r){return r.trim()}))},type:2},{key:"direction",process:function(r){return null===r?null:r.map((function(r){return r.trim().replace(/[往向]/gim,"")}))},type:1}];function n(r){for(var n,e,o={},a=0,u=t;a<u.length;a++){var i,c=u[a],l=(n=null===(i=c)||void 0===i?void 0:i.suffixes,0===(e=c.type)?new RegExp("([^市區鄉鎮村里路段街道巷弄號樓與]+[".concat(n,"])"),"gmi"):1===e?new RegExp("([往向]+[東南西北])","gmi"):2===e?new RegExp("([0-9]+[號]出口)","gmi"):void 0);o[c.key]=c.process(String(r).match(l))}return o}return function(r){var e,o={},a=u(r);try{for(a.s();!(e=a.n()).done;)for(var i=n(e.value),c=0,l=t;c<l.length;c++){var f=l[c];o.hasOwnProperty(f.key)||(o[f.key]=[]),o[f.key]=o[f.key].concat(i[f.key])}}catch(r){a.e(r)}finally{a.f()}for(var s in o)o[s]=Array.from(new Set(o[s])).filter((function(r){return!!r})).sort((function(r,t){return"number"==typeof r&&"number"==typeof t?r-t:String(r).charCodeAt(0)-String(t).charCodeAt(0)}));return o}(r)}function f(r){return"".concat(r.city.join("")).concat(r.district.join("")).concat(r.road.join("、")).concat(r.road_section.sort((function(r,t){return r-t})).length>0?r.road_section.join("、")+"段":"").concat(r.alley.length>0?r.alley.sort((function(r,t){return r-t})).join("、")+"巷":"").concat(r.alley_branch.length>0?r.alley_branch.sort((function(r,t){return r-t})).join("、")+"弄":"").concat(r.doorplate.length>0?r.doorplate.sort((function(r,t){return r-t})).join("、")+"號":"").concat(r.floornumber.length>0?r.floornumber.join("、")+"樓":"").concat(r.direction.length>0?"（朝"+r.direction.join("、")+"）":"")}function s(r){var t,n={},e=new Set,o=u(r);try{for(o.s();!(t=o.n()).done;){var a=t.value,i=String(a).split("").filter((function(r){return""!==r.trim()})),c=i.join("");e.add(c);var l,f=0,s=u(i);try{for(s.s();!(l=s.n()).done;){var h=l.value;if(isNaN(parseInt(h))){var v,y="chars_".concat(f,"_").concat(h.charCodeAt(0));n[y]={count:((null===(v=n[y])||void 0===v?void 0:v.count)||0)+1,chars:h,index:f}}else{var d,p="digit_".concat(f,"_").concat(h.charCodeAt(0));n[p]={count:((null===(d=n[p])||void 0===d?void 0:d.count)||0)+1,chars:h,index:f}}f+=1}}catch(r){s.e(r)}finally{s.f()}}}catch(r){o.e(r)}finally{o.f()}var m=.6*r.length,g=1*r.length;return Object.entries(n).filter((function(r){return m<=r[1].count&&r[1].count<=g})).sort((function(r,t){return r[1].index-t[1].index})).map((function(r){return r[1].chars})).join("")}function h(r){var t,n=[],i={},c=u(r);try{for(c.s();!(t=c.n()).done;){var l=t.value;for(var f in l)i.hasOwnProperty(f)||(i[f]=0),l[f].length>0&&(i[f]=i[f]+1)}}catch(r){c.e(r)}finally{c.f()}var s=Object.entries(i).map((function(r){return{key:r[0],value:r[1]}})).filter((function(t){return t.value===r.length})).sort((function(r,t){return r.value-t.value}));if(s.length>0){var h,v=u(s);try{for(v.s();!(h=v.n()).done;){var y,d=h.value,p=[],m=u(r);try{for(m.s();!(y=m.n()).done;){var g=y.value;p.push(g[d.key].join(""))}}catch(r){m.e(r)}finally{m.f()}(0,o.areItemsDifferent)(p)&&n.push({components:p,len:Math.max.apply(Math,a(p.map((function(r){return r.length}))))})}}catch(r){v.e(r)}finally{v.f()}}if(n.length>0)return(n=n.sort((function(r,t){return r.len-t.len})))[0].components;var b=r.length;return(0,e.generateLetterLabels)(b)}},2129:(r,t,n)=>{function e(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,t){if(r){if("string"==typeof r)return o(r,t);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(r,t):void 0}}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,a=function(){};return{s:a,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return i=r.done,r},e:function(r){c=!0,u=r},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw u}}}}function o(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);n<t;n++)e[n]=r[n];return e}function a(r){for(var t=[],n=[],e=0;e<r.length;e++)0===e||r[e][0]-r[e-1][0]>0?(n.length>0&&t.push(n),n=[r[e]]):n.push(r[e]);return n.length>0&&t.push(n),t}function u(r){for(var t=0;t<r.length;t++)for(var n=t+1;n<r.length;n++)if(r[t]===r[n])return!1;return!0}function i(r,t){var n=[];if(r.length<=t.length){var o,a=e(r);try{for(a.s();!(o=a.n()).done;){var u=o.value;t.indexOf(u)>-1&&n.push(u)}}catch(r){a.e(r)}finally{a.f()}}else{var i,c=e(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;r.indexOf(l)>-1&&n.push(l)}}catch(r){c.e(r)}finally{c.f()}}return n}n.r(t),n.d(t,{areItemsDifferent:()=>u,getIntersection:()=>i,splitDataByDelta:()=>a})},7183:(r,t,n)=>{function e(r,t,n,e){var o=n*Math.PI/180-r*Math.PI/180,a=e*Math.PI/180-t*Math.PI/180,u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))))}function o(r){for(var t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=0;r>=1024&&n<t.length-1;)r/=1024,n++;return"".concat(r.toFixed(2)," ").concat(t[n])}function a(r){for(var t="";r>0;){var n=(r-1)%26;t=String.fromCharCode(n+65)+t,r=Math.floor((r-1)/26)}return t}n.r(t),n.d(t,{convertBytes:()=>o,convertNumberToLetters:()=>a,convertPositionsToDistance:()=>e})},8024:(r,t,n)=>{n.r(t),n.d(t,{booleanToString:()=>f,compareThings:()=>o,generateIdentifier:()=>a,getNoCacheParameter:()=>u,isRunningStandalone:()=>c,md5:()=>e,releaseFile:()=>i,supportTouch:()=>l});var e=n(3503);function o(r,t){function n(r){return JSON.stringify({e:r})}var o=n(r),a=n(t),u=o.length,i=a.length;if(u===i){if(u>32||i>32){for(var c=e(o),l=e(a),f=!0,s=0;s<8;s++){if(c.charAt(s)!==l.charAt(s)){f=!1;break}}return f}return o===a}return!1}function a(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t="".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","_"),n=0;n<16;n++){var e=Math.round(64*Math.random());t+=r.substring(e,e+1)}return t}function u(r){return(((new Date).getTime()/r).toFixed(0)*r).toString(36)}function i(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n=arguments.length>2?arguments[2]:void 0,e=new Blob([r],{type:t}),o=new File([e],n,{type:t});if(navigator.canShare&&navigator.canShare({files:[o]}))navigator.share({files:[o]}).catch((function(r){}));else{var a=URL.createObjectURL(e),u=document.createElement("a");u.href=a,u.download=n,document.body.appendChild(u),u.click(),u.remove(),setTimeout((function(){URL.revokeObjectURL(a)}),1e4)}}function c(){return window.matchMedia("(display-mode: standalone)").matches}function l(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)}function f(r){if("boolean"==typeof r)return r?"true":"false"}},2945:(r,t,n)=>{n.r(t),n.d(t,{generateDirectionLabels:()=>c,generateLetterLabels:()=>i});var e=n(7183),o=n(5428);function a(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,t){if(r){if("string"==typeof r)return u(r,t);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(r,t):void 0}}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,o=function(){};return{s:o,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return i=r.done,r},e:function(r){c=!0,a=r},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function u(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);n<t;n++)e[n]=r[n];return e}function i(r){for(var t=[],n=0;n<r;n++)t.push("地點".concat((0,e.convertNumberToLetters)(n+1)));return t}function c(r){var t,n=[],e=[{vector:[0,0],label:"未知"},{vector:[0,1],label:"北"},{vector:[1,0],label:"東"},{vector:[0,-1],label:"南"},{vector:[-1,0],label:"西"},{vector:[Math.sqrt(2)/2,Math.sqrt(2)/2],label:"東北"},{vector:[Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"東南"},{vector:[-Math.sqrt(2)/2,-Math.sqrt(2)/2],label:"西南"},{vector:[-Math.sqrt(2)/2,Math.sqrt(2)/2],label:"西北"}],u=a(r);try{for(u.s();!(t=u.n()).done;){var i,c=t.value,l=0,f=0,s=a(c);try{for(s.s();!(i=s.n()).done;){var h=i.value;l+=h[0],f+=h[1]}}catch(r){s.e(r)}finally{s.f()}var v,y=(0,o.convertToUnitVector)([l,f]),d=[],p=a(e);try{for(p.s();!(v=p.n()).done;){var m=v.value,g=m.vector[0]*y[0]+m.vector[1]*y[1];d.push({label:m.label,dotProduct:g})}}catch(r){p.e(r)}finally{p.f()}var b=(d=d.sort((function(r,t){return t.dotProduct-r.dotProduct})))[0];n.push(b.label)}}catch(r){u.e(r)}finally{u.f()}return n}},5428:(r,t,n)=>{function e(r){return function(r){if(Array.isArray(r))return a(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||o(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(r,t){if(r){if("string"==typeof r)return a(r,t);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(r,t):void 0}}function a(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);n<t;n++)e[n]=r[n];return e}function u(r){var t=r.reduce((function(r,t){return r+t}),0)/r.length,n=r.map((function(r){return Math.pow(r-t,2)})).reduce((function(r,t){return r+t}),0)/r.length;return Math.sqrt(n)}function i(r){var t=r.reduce((function(r,t){return r+t}),0)/r.length,n=u(r);return r.map((function(r){return(r-t)/n}))}function c(r,t){var n=r.length;if(n!==t.length)throw new Error("Arrays must have the same length");for(var e=0,o=0,a=0,u=0,i=0,c=0;c<n;c++)e+=r[c],o+=t[c],a+=r[c]*t[c],u+=Math.pow(r[c],2),i+=Math.pow(t[c],2);var l=n*a-e*o,f=Math.sqrt((n*u-Math.pow(e,2))*(n*i-Math.pow(o,2)));return 0===f?0:l/f}function l(r){var t=Math.hypot(r),n=[];if(t>0){var e,a=1/t,u=function(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=o(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,a=function(){};return{s:a,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return i=r.done,r},e:function(r){c=!0,u=r},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw u}}}}(r);try{for(u.s();!(e=u.n()).done;){var i=e.value;n.push(i*a)}}catch(r){u.e(r)}finally{u.f()}return n}return r}function f(r){for(var t=r.length,n=[],e=1;e<t;e+=3){var o=r[e],a=r[e-1]||o,u=r[e+1]||o;n.push((a+o+u)/3)}return n}function s(r){var t=Math.max.apply(Math,e(r)),n=r.map((function(r){return Math.exp(r-t)})),o=n.reduce((function(r,t){return r+t}),0);return n.map((function(r){return r/o}))}function h(r){return 0===r.length?0:r.reduce((function(r,t){return r+t}),0)/r.length}function v(r,t){var n=r.length;if(n<3)return r;for(var e=0,o=0;o<n;o++)e+=r[o];for(var a=e/n,u=0,i=0;i<n;i++)u+=Math.pow(r[i]-a,2);for(var c=Math.sqrt(u/n),l=[],f=0,s=0;s<n;s++){var h=Math.exp(r[s]/c);f+=h,l.push(h)}for(var v=Math.pow(n,t),y={},d=0;d<n;d++){var p="k_".concat(Math.floor(l[d]/f*v));y.hasOwnProperty(p)||(y[p]={sum:0,len:0}),y[p].sum+=r[d],y[p].len+=1}var m=[];for(var g in y){var b=y[g];m.push(Math.floor(b.sum/b.len))}return m.sort((function(r,t){return r-t})),m}n.r(t),n.d(t,{aggregateNumbers:()=>v,calculateAverage:()=>h,calculateStandardDeviation:()=>u,convertToUnitVector:()=>l,pearsonCorrelation:()=>c,smoothArray:()=>f,softmaxArray:()=>s,standardizeArray:()=>i})}}]);
//# sourceMappingURL=a50f825c198f932e16ab.js.map