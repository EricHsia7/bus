!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():t.bus=r()}(self,()=>(()=>{"use strict";var t,r,e={3525(t,r,e){function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,s=[],l=!0,f=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==r);l=!0);}catch(t){f=!0,o=t}finally{try{if(!l&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(f)throw o}}return s}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=e(2284);e(3503),e(4462).sha512;function i(t,r){return null!=t&&"object"===(0,a.A)(t)&&!Array.isArray(t)&&Object.prototype.hasOwnProperty.call(t,r)}function s(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return l(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(s)throw a}}}}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var f=[],u=!1;if("onconnect"in self)self.onconnect=function(t){var r=t.ports[0];r.onmessage=function(t){var e=o(t.data,5),n=e[0],a=e[1],i=e[2],s=e[3],l=e[4];f.push({personalSchedules:n,busArrivalTimeDataGroups:a,chartWidth:i,chartHeight:s,taskID:l,port:r}),y()}};else{var c=self;self.onmessage=function(t){var r=o(t.data,5),e=r[0],n=r[1],a=r[2],i=r[3],s=r[4];f.push({personalSchedules:e,busArrivalTimeDataGroups:n,chartWidth:a,chartHeight:i,taskID:s,port:c}),y()}}var p,h,d="'Noto Sans TC', sans-serif",v=!1;function y(){if(!u&&0!==f.length){u=!0;var t,r=f.shift(),e=r.personalSchedules,n=r.busArrivalTimeDataGroups,o=r.chartWidth,a=r.chartHeight,l=r.taskID,c=r.port,p={},b=s(e);try{for(b.s();!(t=b.n()).done;){var m,g=t.value,$=60*g.period.start.hours+g.period.start.minutes,w=60*g.period.end.hours+g.period.end.minutes,x=o/(w-$),O=s(n);try{for(O.s();!(m=O.n()).done;){var S=m.value;if(!(g.days.indexOf(S.day)<0)){var j=S.max,A=S.stats.slice($,w),k=A.length,C="",I="",T=0;T=k/30<=3?10:30;for(var D=Math.floor(k/T),M=o/D,L=D-1;L>=0;L--){var B=.175+L*M;I+=` M${B} 0`,I+=` L${B} ${a}`;var P=$+L*T,G=P%60,H=`${((P-G)/60).toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`,W=30,E=12;if(v){var F=h.measureText(H);W=F.width,E=F.actualBoundingBoxDescent}var U=(a-E)/2;C+=`<text x="${B+3}" y="${U}" transform="rotate(-90 ${(B+3+B+3+W)/2} ${(U+U+E)/2})" font-weight="400" font-size="10" font-family="${d}" component="label">${H}</text>`}var z=`<path d="${I}" fill="none" stroke-width="0.35" component="vertical-gridline"/>`,N=`<path d="${`M0 ${a} L${o} ${a-.175}`}" fill="none" stroke-width="0.35" component="bottom-line"/>`,Z="";if(Z+=`M${o} ${a}`,0!==j)for(var _=k-1;_>=0;_--){var q=(_+1)/k*o,J=(1-A[_]/j)*a;Z+=` L${q} ${J}`,Z+=` L${q-x} ${J}`,Z+=` L${q-x} ${a}`}var K=`<svg width="${o}" height="${a}" viewBox="0 0 ${o} ${a}" xmlns="http://www.w3.org/2000/svg">${z}${C}${N}${`<path d="${Z+=" Z"}" stroke="none" stroke-width="0" component="bars"/>`}</svg>`,Q=`s_${S.id}`;i(p,Q)||(p[Q]=[]),p[Q].push({personalSchedule:g,chart:K,day:S.day})}}}catch(t){O.e(t)}finally{O.f()}}}catch(t){b.e(t)}finally{b.f()}c.postMessage([p,l]),u=!1,y()}}"undefined"!=typeof OffscreenCanvas&&(p=new OffscreenCanvas(64,64),(h=p.getContext("2d")).font=`400 10px ${d}`,h.textBaseline="top",v=!0)}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.m=e,o.x=()=>{var t=o.O(void 0,[35],()=>o(3525));return t=o.O(t)},o.amdO={},t=[],o.O=(r,e,n,a)=>{if(!e){var i=1/0;for(u=0;u<t.length;u++){for(var[e,n,a]=t[u],s=!0,l=0;l<e.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every(t=>o.O[t](e[l]))?e.splice(l--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var f=n();void 0!==f&&(r=f)}}return r}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[e,n,a]},o.d=(t,r)=>{for(var e in r)o.o(r,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((r,e)=>(o.f[e](t,r),r),[])),o.u=t=>"bab9d51e76ce8399710e.js",o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),o.p="./",(()=>{var t={525:1,906:1};o.f.i=(r,e)=>{t[r]||importScripts(o.p+o.u(r))};var r=self.webpackChunkbus=self.webpackChunkbus||[],e=r.push.bind(r);r.push=r=>{var[n,a,i]=r;for(var s in a)o.o(a,s)&&(o.m[s]=a[s]);for(i&&i(o);n.length;)t[n.pop()]=1;e(r)}})(),r=o.x,o.x=()=>o.e(35).then(r);var a=o.x();return a=a.default})());
//# sourceMappingURL=2b4753778dc10c6bc8b9.js.map