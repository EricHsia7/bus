"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[838],{752(e,t,n){n.d(t,{Ho:()=>p,b$:()=>h});var r=n(3422),a=n(8179),i=n(4537),o=n(904),u=n(9119);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,a.bv)(".nd"),s=(0,a.aI)(d,".od"),f=(0,a.aI)(s,".pd");function v(e,t,n,a,o){var l=document.createElement("div");l.classList.add("qd");var c=document.createElement("div");c.classList.add("rd");var d=document.createElement("span");d.appendChild((0,i.YC)(e.icon)),c.appendChild(d);var s=document.createElement("div");s.classList.add("sd"),s.appendChild(document.createTextNode(e.name));var f=e.index;return l.onclick=function(){!function(e,t,n,a,i){(0,u.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),h(),(0,r.mD)(t,n,a,i).then(function(t){switch(t){case 0:(0,u.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,u.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,u.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,n,a,o,f)},l.appendChild(c),l.appendChild(s),{element:l,id:""}}function p(e,t,n,a){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(e,t,n,a){f.innerHTML="";var i,o=new DocumentFragment,u=l(r.FX);try{for(u.s();!(i=u.n()).done;){var c=v(i.value,e,t,n,a);o.appendChild(c.element)}}catch(e){u.e(e)}finally{u.f()}f.append(o)}(e,t,n,a)}function h(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},1078(){},1102(){},1306(){},1308(){},1511(){},1603(){},1743(){},2421(){},2696(){},3041(e,t,n){n.d(t,{B:()=>b,n:()=>A});var r=n(467),a=n(9566),i=n(8179),o=n(8024),u=n(4537),l=n(904),c=n(9119);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=(0,i.bv)(".td"),v=(0,i.aI)(f,".ud"),p=(0,i.aI)(v,".vd"),h="已儲存至資料夾",m="無法儲存";function y(e,t,n,r){var i=document.createElement("div");i.classList.add("wd");var l=document.createElement("div");l.classList.add("xd");var d=document.createElement("span");d.appendChild((0,u.YC)(e.icon)),l.appendChild(d);var s=document.createElement("div");switch(s.classList.add("yd"),s.innerText=e.name,i.appendChild(l),i.appendChild(s),t){case"stop":i.onclick=function(){(0,a.aq)(e.id,n[0],n[1]).then(function(e){e?(0,a.LH)("stop",n[0]).then(function(e){e&&(null!=r&&r.setAttribute("highlighted",(0,o.xZ)(e)),(0,c.a)("folder",h),A())}):(0,c.a)("warning",m)})};break;case"route":i.onclick=function(){(0,a.Fq)(e.id,n[0]).then(function(e){e?(0,a.LH)("route",n[0]).then(function(e){e&&(null!=r&&r.setAttribute("highlighted",(0,o.xZ)(e)),(0,c.a)("folder",h),A())}):(0,c.a)("warning",m)})};break;case"location":i.onclick=function(){(0,a.DW)(e.id,n[0]).then(function(e){e?(0,a.LH)("location",n[0]).then(function(e){e&&(null!=r&&r.setAttribute("highlighted",(0,o.xZ)(e)),(0,c.a)("folder",h),A())}):(0,c.a)("warning",m)})}}return{element:i,id:""}}function g(){return(g=(0,r.A)(function*(e,t,n){var r=yield(0,a.Xi)();p.innerHTML="";var i,o=new DocumentFragment,u=d(r);try{for(u.s();!(i=u.n()).done;){var l=y(i.value,e,t,n);o.appendChild(l.element)}}catch(e){u.e(e)}finally{u.f()}p.append(o)})).apply(this,arguments)}function b(e,t,n){(0,l.WR)("SaveToFolder"),f.setAttribute("displayed","true"),function(e,t,n){g.apply(this,arguments)}(e,t,n)}function A(){(0,l.kr)("SaveToFolder"),f.setAttribute("displayed","false")}},3058(){},3127(){},3534(){},3749(){},3777(){},4305(){},5228(){},5286(e,t,n){n.d(t,{kP:()=>W,zk:()=>J,VY:()=>V,b7:()=>P,GZ:()=>te,GS:()=>ee});var r=n(467),a=n(9566),i=n(8621),o=n(3459),u=n(8179),l=n(8024),c=n(904),d=n(3041),s=n(8134),f=n(9469),v=n(9119),p=n(8279);function h(){return(h=(0,r.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var n=(0,f.i)(0,{id:e,name:t.n});navigator.share&&navigator.share({title:t.n,url:n}).then(function(){(0,v.a)("check_circle","已分享路線")}).catch(function(e){(0,v.a)("cancel","已取消分享")})}})).apply(this,arguments)}function m(){return(m=(0,r.A)(function*(e){var t=yield(0,s.Rk)(e);if(!1!==t){var n=(0,f.i)(0,{id:e,name:t.n});(0,p.X8)(n)}})).apply(this,arguments)}var y=n(7968),g=n(6141);function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w='"Noto Sans TC", sans-serif',x=(0,c.gO)("route-details-canvas"),k=x.width,S=x.height,C=Math.min(window.devicePixelRatio,1.875)||1,E={};function I(){var e=document.createElement("div");return e.classList.add("zd"),{element:e,id:""}}function D(){var e=document.createElement("div");e.classList.add("_d");var t=document.createElement("canvas");return t.classList.add("ae"),e.appendChild(t),{element:e,id:""}}function _(e,t,n,r,a,i){e.innerText=t.name,e.setAttribute("day",i.toString()),e.onclick=function(){!function(e){for(var t=(0,o.Js)("playing_animation"),n=(0,u.jg)(W,".zd"),r=(0,u.jg)(J,"._d"),a=0;a<7;a++){var i,l,c=n[a],d=r[a],s=`d_${a}`,f=null===(i=E)||void 0===i?void 0:i.calendarEventGroups[s],v=null===(l=E)||void 0===l?void 0:l.calendarDays[s];if(f&&v){var p=(0,g.t)("--c"),h=(0,g.t)("--d"),m=(0,g.t)("--e"),y=(0,g.t)("--nc"),b=(0,g.t)("--b"),A=(0,g.t)("--ra");_(c,v,e,!1,t,a),T(d,f,e,b,p,h,m,y,A,a)}}}(i)},e.setAttribute("highlighted",n===i?"true":"false"),e.setAttribute("animation",(0,l.xZ)(a)),e.setAttribute("skeleton-screen",(0,l.xZ)(r))}function T(e,t,n,r,a,i,o,d,s,f){function v(e,t,n){var r=70*t;e.fillStyle=n,e.fillRect(45,r+5,k-45,1.2),e.font=`400 12px ${w}`,e.textBaseline="top";var a=`${String(t).padStart(2,"0")}:00`,i=e.measureText(a),o=i.width,u=i.actualBoundingBoxDescent;e.fillText(a,(45-o)/2,r+(10-u)/2,o)}function p(e,t,n,r,a,i,o){var u=new Date;u.setDate(1),u.setMonth(0),u.setFullYear(t.date.getFullYear()),u.setMonth(t.date.getMonth()),u.setDate(t.date.getDate()),u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);var l=(t.date.getTime()-u.getTime())/864e5*24*70,c=k-45,d=60*t.duration*1e3/864e5*24*70;(0,y.wg)(e,45,l,c,d,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,y.wg)(e,45,l,3,d,{tl:3,tr:0,bl:3,br:0},n),e.font=`400 14px ${w}`,e.textBaseline="top",e.fillStyle=n;var s=t.dateString,f=e.measureText(s),v=f.width,p=f.actualBoundingBoxDescent;e.fillText(s,53,l+(d-p)/2,v)}var h=(0,u.aI)(e,".ae"),m=h.getContext("2d");if(function(e,t,n){var r=t===n;e.setAttribute("displayed",(0,l.xZ)(r))}(e,n,f),function(e){x=(0,c.gO)("route-details-canvas"),k=x.width,S=x.height,C=Math.min(window.devicePixelRatio,1.875)||1,e.width=k*C,e.height=S*C;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(C,C)}(h),n===f){m.clearRect(0,0,k,S);for(var g=0;g<24;g++)v(m,g,s);var A,E=b(t);try{for(E.s();!(A=E.n()).done;){p(m,A.value,r,a,i,o,d)}}catch(e){E.e(e)}finally{E.f()}}else m.clearRect(0,0,k,S)}function M(e,t,n){var r=(new Date).getDay(),a=(0,g.t)("--c"),i=(0,g.t)("--d"),o=(0,g.t)("--e"),l=(0,g.t)("--nc"),c=(0,g.t)("--b"),d=(0,g.t)("--ra"),s=e.calendarDays,f=e.calendarDayQuantity,v=e.calendarEventGroups,p=(e.calendarEventQuantity,(0,u.jg)(J,"._d").length);if(f!==p){var h=p-f;if(h<0){for(var m=new DocumentFragment,y=new DocumentFragment,b=0,A=Math.abs(h);b<A;b++){var w=I();m.appendChild(w.element);var x=D();y.appendChild(x.element)}W.append(m),J.append(y)}else for(var k=(0,u.jg)(W,".zd"),S=(0,u.jg)(J,"._d"),C=0,M=Math.abs(h);C<M;C++){var L=p-1-C;k[L].remove(),S[L].remove()}}for(var j=(0,u.jg)(W,".zd"),$=(0,u.jg)(J,"._d"),Z=0;Z<f;Z++){var R=`d_${Z}`,F=s[R],H=v[R],z=j[Z],B=$[Z];_(z,F,r,t,n,Z),T(B,H,r,c,a,i,o,l,d,Z)}E=e}var L=n(4537),j=[],$=!1,Z=!1;function R(){var e=document.createElement("div");e.classList.add("be");var t=document.createElement("div");t.classList.add("ce"),t.appendChild((0,L.oC)()),e.appendChild(t);var n=document.createElement("div");return n.classList.add("de"),e.appendChild(n),{element:e,id:""}}function F(e,t,n){function r(e,r,a){function i(e,t){var n=(0,u.aI)(e,".ce");(0,L.yD)(n,t.icon)}function o(e,t){(0,u.aI)(e,".de").innerText=t.value}function c(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}null==a?(i(e,r),o(e,r),c(e,n),d(e,t)):((0,l.hw)(a,r)||i(e,r),(0,l.hw)(a,r)||o(e,r),$!==n&&c(e,n),Z!==t&&d(e,t))}var a=e.length;t!==Z&&P.setAttribute("skeleton-screen",(0,l.xZ)(t));var i=(0,u.jg)(V,".be").length;if(a!==i){var o=i-a;if(o<0){for(var c=new DocumentFragment,d=0,s=Math.abs(o);d<s;d++){var f=R();c.appendChild(f.element)}V.append(c)}else for(var v=(0,u.jg)(V,".be"),p=0,h=Math.abs(o);p<h;p++){v[i-1-p].remove()}}for(var m=(0,u.jg)(V,".be"),y=0;y<a;y++){var g=m[y],b=e[y];0===j.length?r(g,b,null):r(g,b,j[y])}j=e,$=n,Z=t}function H(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=(0,u.bv)(".ee"),G=(0,u.aI)(B,".fe"),q=(0,u.aI)(G,".ge"),N=(0,u.aI)(q,'.he[group="calendar"]'),O=(0,u.aI)(N,".ie"),W=(0,u.aI)(O,".je"),J=(0,u.aI)(O,".ke"),Y=(0,u.aI)(B,'.fe .ge .he[group="actions"]'),Q=(0,u.aI)(Y,'.ie .le[action="save-to-folder"]'),U=(0,u.aI)(Y,'.ie .le[action="get-permalink"]'),X=(0,u.aI)(Y,'.ie .le[action="show-permalink-qrcode"]'),P=(0,u.aI)(q,'.he[group="properties"]'),V=(0,u.aI)(P,".ie");function K(){return K=(0,r.A)(function*(e,t){var n=(0,o.Js)("playing_animation"),r=yield(0,a.LH)("route",e);Q.setAttribute("animation",(0,l.xZ)(n)),Q.setAttribute("highlighted",(0,l.xZ)(r)),Q.onclick=function(){(0,d.B)("route",[e],Q)},U.setAttribute("animation",(0,l.xZ)(n)),U.onclick=function(){!function(e){h.apply(this,arguments)}(e)},X.setAttribute("animation",(0,l.xZ)(n)),X.onclick=function(){!function(e){m.apply(this,arguments)}(e)},function(){for(var e=(0,o.Js)("playing_animation"),t=[],n=0;n<5;n++)t.push({key:n,icon:"none",value:""});F(t,!0,e)}(),function(){for(var e=(0,o.Js)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var i=`d_${a}`;n[i]=[],r[i]={day:a,code:"d_{i}",name:""};for(var u=0;u<t[i];u++){var l=new Date;l.setHours(0),l.setMinutes(30*u),l.setSeconds(0),l.setMilliseconds(0),n[i].push({date:l,dateString:"",duration:15})}}M({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var u=(0,l.zx)(),c=yield(0,i.p)(e,t,u);F(c.properties,!1,n),M(c.calendar,!1,n)}),K.apply(this,arguments)}function ee(e,t){(0,c.WR)("RouteDetails"),B.setAttribute("displayed","true"),function(e,t){K.apply(this,arguments)}(e,t)}function te(){(0,c.kr)("RouteDetails"),B.setAttribute("displayed","false");var e,t=H((0,u.jg)(J,"._d"));try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(e){t.e(e)}finally{t.f()}var n,r=H((0,u.jg)(W,".zd"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(e){r.e(e)}finally{r.f()}}},5392(){},5461(){},5995(){},6018(){},6388(){},6597(){},7217(){},7225(){},7287(){},7723(){},7868(){},7908(e,t,n){n.d(t,{NW:()=>y,XG:()=>h,hy:()=>m});var r=n(467),a=n(3937),i=n(3422),o=n(8179),u=n(8024),l=n(904),c=n(9119),d=(0,o.bv)(".me"),s=(0,o.aI)(d,".ne"),f=(0,o.aI)(s,".oe"),v=(0,o.aI)(f,'.pe[group="provider"] .qe input'),p=(0,o.aI)(f,'.pe[group="registration-key"] .qe input');function h(){(0,l.WR)("RegisterNotification"),d.setAttribute("displayed","true"),v.value=(0,i.D7)(),p.value="",(0,l.Z_)()}function m(){d.setAttribute("displayed","false"),(0,l.l$)()}function y(){return g.apply(this,arguments)}function g(){return(g=(0,r.A)(function*(){(0,c.a)("manufacturing","處理中");var e=v.value,t=p.value;if((0,u.Gz)(e))return(0,i.Je)(e),(yield(0,a.e)(t))?void(0,c.a)("check_circle","註冊成功"):void(0,c.a)("error","註冊失敗");(0,c.a)("error","無效的提供者")})).apply(this,arguments)}},8983(){},9991(){}}]);
//# sourceMappingURL=3c69e76e35d95c3a7af5.js.map