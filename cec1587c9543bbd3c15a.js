"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[601],{540(e,t,a){a.d(t,{a:()=>S,b:()=>P});var n=a(467),i=a(5767),r=a(9566),s=a(3459),o=a(8179),d=a(8024),c=a(9915),u=a(4537),l=a(904),f=a(3030),p=a(9119),m=a(4690),v=(0,o.c)(".jd"),h=(0,o.e)(v,".od"),b=(0,o.e)(v,".xd"),y=(0,o.e)(b,".je"),g=(0,o.e)(h,".td .ud"),k={},L=!1,w=!1,A=new c.a(function(){return I.apply(this,arguments)},15e3);function C(){var e=(0,o.a)();e.classList.add("pe"),e.setAttribute("type","stop");var t=(0,o.a)();t.classList.add("qe"),t.appendChild((0,u.b)("location_on"));var a=(0,o.a)();a.classList.add("re");var n=(0,o.a)();n.classList.add("se");var i=(0,o.a)();i.classList.add("te");var r=(0,o.a)();r.classList.add("we");var s=(0,o.a)();s.classList.add("xe"),s.setAttribute("code","0"),s.setAttribute("displayed","false");var d=(0,o.a)();d.classList.add("ye"),d.setAttribute("code","0"),d.setAttribute("displayed","true"),r.appendChild(s),r.appendChild(d);var c=(0,o.a)();c.classList.add("ue"),c.appendChild((0,u.b)("keyboard_arrow_right"));var l=(0,o.a)();return l.classList.add("ve"),i.appendChild(r),i.appendChild(c),i.appendChild(l),e.appendChild(t),e.appendChild(a),e.appendChild(n),e.appendChild(i),e}function x(){var e=(0,o.a)();e.classList.add("ke");var t=(0,o.a)();t.classList.add("le");var a=(0,o.a)();a.classList.add("me"),a.appendChild((0,u.a)());var n=(0,o.a)();n.classList.add("ne"),t.appendChild(a),t.appendChild(n);var i=(0,o.a)();return i.classList.add("oe"),e.appendChild(t),e.appendChild(i),e}function _(e){g.style.setProperty("--nd",`${e}ms`),g.classList.add("wd")}function T(e){var t=e;g.style.setProperty("--md",t.detail.progress.toString()),"end"===t.detail.stage&&document.removeEventListener(t.detail.target,T)}function P(){for(var e=(0,s.b)("playing_animation"),t=(0,l.d)("window"),a=(t.width,t.height),n=Math.floor(a/50/3)+2,i=[],r=0;r<3;r++){for(var o={name:"",icon:"",id:"",timestamp:0,content:[],contentLength:n},d=0;d<n;d++){o.content.push({type:"stop",id:0,timestamp:0,name:"",status:{code:8,text:"",time:-6},direction:0,route:{name:"",endPoints:{departure:"",destination:""},id:0,pathAttributeId:[]}})}i.push(o)}E({folders:i,dataUpdateTime:0},!0,e)}function E(e,t,a){function n(e,n,i){function r(e,t){e.setAttribute("type",t.type)}function s(e,t){var a=(0,o.e)(e,".qe"),n="";switch(t.type){case"stop":case"location":n="location_on";break;case"route":n="route";break;case"bus":n="directions_bus";break;case"empty":n="lightbulb";break;default:n=""}(0,u.c)(a,n)}function c(e,t,a){if("stop"===t.type){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,d=n.right,c=window.innerWidth,u=window.innerHeight,l=(0,o.e)(e,".te .we"),f=(0,o.e)(l,".xe"),p=(0,o.e)(l,".ye");f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,a&&s>0&&i<u&&d>0&&r<c?(p.addEventListener("animationend",function(){p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text,p.classList.remove("af"),f.setAttribute("displayed","false")},{once:!0}),f.setAttribute("displayed","true"),p.classList.add("af")):(p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text)}}function l(e,t){var a="";switch(t.type){case"stop":case"route":case"location":a=t.name;break;case"bus":a=t.busID;break;case"empty":a="沒有內容";break;default:a="null"}(0,o.e)(e,".se").innerText=a}function p(e,t){var a="";switch(t.type){case"stop":a=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`;break;case"route":a=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`;break;case"location":a="地點";break;case"bus":break;case"empty":a="提示";break;default:a="null"}(0,o.e)(e,".re").innerText=a}function v(e,t){var a=(0,o.e)(e,".te .ue");switch(t.type){case"stop":a.onclick=function(){(0,m.d)(t.route.id,t.route.pathAttributeId)};break;case"route":a.onclick=function(){(0,m.d)(t.id,t.pathAttributeId)};break;case"location":a.onclick=function(){(0,f.d)(t.id)}}}function h(e,t){e.setAttribute("animation",(0,d.a)(t))}function b(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}if(null==i)r(e,n),s(e,n),c(e,n,a),l(e,n),p(e,n),v(e,n),h(e,a),b(e,t);else if(n.type!==i.type)r(e,n),s(e,n),c(e,n,a),l(e,n),p(e,n),v(e,n),h(e,a),b(e,t);else{switch(n.type){case"stop":(0,d.b)(i.route,n.route)||(p(e,n),v(e,n)),i.name!==n.name&&l(e,n),i.status.time!==n.status.time&&c(e,n,a);break;case"route":i.id!==n.id&&v(e,n),(0,d.b)(i.endPoints,n.endPoints)||p(e,n),i.name!==n.name&&l(e,n);break;case"location":i.id!==n.id&&v(e,n),i.name!==n.name&&l(e,n);break;case"bus":default:break;case"empty":n.type!==i.type&&(p(e,n),l(e,n))}t!==w&&b(e,t),a!==L&&h(e,a)}}function i(e,n,i){function r(e,t){var a=(0,o.e)(e,".le");(0,o.e)(a,".ne").innerText=t.name}function s(e,t){var a=(0,o.e)(e,".le"),n=(0,o.e)(a,".me");(0,u.c)(n,t.icon)}function c(e,t){e.setAttribute("animation",(0,d.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}null==i?(r(e,n),s(e,n),c(e,a),l(e,t)):(n.name!==i.name&&r(e,n),n.icon!==i.icon&&s(e,n),a!==L&&c(e,a),t!==w&&l(e,t))}var r=e.folders,s=r.length,c=Array.from((0,o.d)(y,".ke")),l=c.length;if(s!==l){var p=l-s;if(p<0){for(var v=new DocumentFragment,h=0;h>p;h--){var b=x();v.appendChild(b),c.push(b)}y.append(v)}else if(p>0)for(var g=l-1,A=l-p-1;g>A;g--)c[g].remove(),c.splice(g,1)}for(var _=0;_<s;_++){var T=r[_],P=T.content,E=P.length,I=c[_],S=(0,o.e)(I,".oe"),M=Array.from((0,o.d)(S,".pe")),D=M.length;if(E!==D){var $=D-E;if($<0)for(var j=0;j>$;j--){var F=C();S.appendChild(F),M.push(F)}else if($>0)for(var R=D-1,U=D-$-1;R>U;R--)M[R].remove(),M.splice(R,1)}if((0,d.f)(k,"folders"))if(k.folders[_])i(I,T,k.folders[_]);else i(I,T,null);else i(I,T,null);for(var q=0;q<E;q++){var Q=M[q],B=P[q];if((0,d.f)(k,"folders"))if(k.folders[_])if(k.folders[_].content[q])n(Q,B,k.folders[_].content[q]);else n(Q,B,null);else n(Q,B,null);else n(Q,B,null)}}k=e,L=a,w=t}function I(){return(I=(0,n.a)(function*(){try{var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval"),a=(0,d.c)();g.setAttribute("refreshing","true"),g.classList.remove("wd"),document.addEventListener(a,T);var n=yield(0,r.d)(a);E(n,!1,e);var o=0;t.dynamic&&(o=yield(0,i.c)());var c=(new Date).getTime(),u=0;u=t.dynamic?Math.max(c+5e3,n.dataUpdateTime+t.baseInterval/o):c+t.baseInterval;var l=Math.max(5e3,u-c);return g.setAttribute("refreshing","false"),_(l),l}catch(e){var f=1e4;return(0,p.a)("error","資料夾發生錯誤，將在10秒後重試。"),_(f),f}})).apply(this,arguments)}function S(){A.isPaused?A.resume(!0):A.tick()}},6082(e,t,a){a.d(t,{a:()=>l,b:()=>b,c:()=>k,d:()=>g});var n=a(467),i=a(9734),r=a(8011),s=a(9218),o=a(4293),d=a(6788),c=a(8179),u="downloadData",l=!1,f=(0,c.c)(".jd"),p=(0,c.e)(f,".od"),m=(0,c.e)(p,".rd"),v=(0,c.e)(m,'svg#download-svg path[component="progress"]');function h(e){var t=e,a=189*(1-(0,d.d)(u));v.style.setProperty("--kd",`${a}px`),"end"===t.detail.stage&&(document.removeEventListener(t.detail.target,h),m.setAttribute("complete","true"),v.style.setProperty("--kd","0px"),l=!0)}function b(){return y.apply(this,arguments)}function y(){return(y=(0,n.a)(function*(){(0,d.f)(u,"getRoute_0",0,!1),(0,d.f)(u,"getRoute_1",0,!1),(0,d.f)(u,"getLocation_0",0,!1),(0,d.f)(u,"getLocation_1",0,!1),(0,d.f)(u,"getCarInfo_0",0,!1),(0,d.f)(u,"getCarInfo_1",0,!1),(0,d.f)(u,"getMaterialSymbolsSearchIndex",0,!1),document.addEventListener(u,h),yield Promise.all([(0,o.a)(u,!0),(0,r.a)(u,1),(0,i.a)(u,!0),(0,s.a)(u)]),(0,d.a)(u),(0,d.b)(u)})).apply(this,arguments)}function g(){f.setAttribute("displayed","true")}function k(){f.setAttribute("displayed","false")}},6091(e,t,a){a.d(t,{a:()=>_,b:()=>C});var n=a(467),i=a(5314),r=a(3459),s=a(8179),o=a(8024),d=a(9915),c=a(4884),u=a(4537),l=a(904),f=a(3030),p=a(4690),m=(0,s.c)(".jd"),v=(0,s.e)(m,".xd"),h=(0,s.e)(v,".yd"),b=(0,s.e)(h,".ce"),y={},g=!1,k=!1,L=new d.a(function(){return x.apply(this,arguments)},15e3);function w(){var e=(0,s.a)();e.classList.add("de");var t=(0,s.a)();t.classList.add("ee");var a=(0,s.a)();a.classList.add("fe"),a.appendChild((0,u.a)());var n=(0,s.a)();n.classList.add("ge");var i=(0,s.a)();i.classList.add("he"),t.appendChild(a),t.appendChild(n),t.appendChild(i);var r=(0,s.a)();return r.classList.add("ie"),e.appendChild(t),e.appendChild(r),e}function A(e,t,a){function n(e,n,i){function r(e,t){var a=(0,s.e)(e,".ee"),n=(0,s.e)(a,".fe"),i="";switch(t.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,u.c)(n,i)}function d(e,t){var a=(0,s.e)(e,".ee"),n=(0,s.e)(a,".ge"),i="";switch(t.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function l(e,t){var a=(0,s.e)(e,".ee");(0,s.e)(a,".he").innerText=t.time.relative}function m(e,t){(0,s.e)(e,".ie").innerText=t.name}function v(e,t){switch(t.type){case"route":e.onclick=function(){(0,p.d)(t.id,t.pid)};break;case"location":e.onclick=function(){(0,f.d)(t.hash)};break;case"bus":e.onclick=function(){(0,c.d)(t.id)};break;case"empty":e.onclick=null}}function h(e,t){e.setAttribute("animation",(0,o.a)(t))}function b(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}if(null==i)r(e,n),d(e,n),l(e,n),m(e,n),v(e,n),h(e,a),b(e,t);else if(n.type!==i.type)r(e,n),d(e,n),l(e,n),m(e,n),v(e,n),h(e,a),b(e,t);else{switch(n.type){case"location":(0,o.b)(i.name,n.name)||m(e,n),i.time!==n.time&&l(e,n),(0,o.b)(i.hash,n.hash)||v(e,n);break;case"route":i.name!==n.name&&m(e,n),i.time!==n.time&&l(e,n),i.id===n.id&&(0,o.b)(i.pid,n.pid)||v(e,n);break;case"bus":i.name!==n.name&&m(e,n),i.time!==n.time&&l(e,n),i.id!==n.id&&v(e,n);break;case"empty":i.time!==n.time&&l(e,n)}g!==a&&h(e,a),k!==t&&b(e,t)}}var i=e.itemQuantity,r=Array.from((0,s.d)(b,".de")),d=r.length;if(i!==d){var l=d-i;if(l<0){for(var m=new DocumentFragment,v=0;v>l;v--){var h=w();m.appendChild(h),r.push(h)}b.append(m)}else if(l>0)for(var L=d-1,A=d-l-1;L>A;L--)r[L].remove(),r.splice(L,1)}for(var C=0;C<i;C++){var x=r[C],_=e.items[C];if((0,o.f)(y,"items"))if(y.items[C])n(x,_,y.items[C]);else n(x,_,null);else n(x,_,null)}y=e,g=a,k=t}function C(){for(var e=(0,r.b)("playing_animation"),t=(0,l.d)("window"),a=Math.floor(t.height/70/3)+2,n=[],i=0;i<a;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});A({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function x(){return(x=(0,n.a)(function*(){try{var e=(0,r.b)("playing_animation"),t=(0,o.c)();return A(yield(0,i.c)(t),!1,e),15e3}catch(e){return 1e4}})).apply(this,arguments)}function _(){L.isPaused?L.resume(!0):L.tick()}},4294(e,t,a){a.d(t,{a:()=>S,b:()=>E,c:()=>_,d:()=>I,e:()=>P});var n,i=a(467),r=a(9218),s=a(6788),o=a(972),d=a(3459),c=a(8179),u=a(8024),l=a(4781),f=a(4537),p=a(904),m=(0,c.c)(".bf"),v=(0,c.e)(m,".cf"),h=(0,c.e)(v,"#search_material_symbols_input"),b=(0,c.e)(m,".ff"),y=(0,c.e)(b,".gf"),g=[],k=[],L=!1,w=!1;function A(){var e=(0,c.a)();return e.classList.add("hf"),e.appendChild((0,f.a)()),e}function C(e,t,a,i){function r(e,r,s){function o(e,t){(0,f.c)(e,t)}function d(e,t,a){e.onclick=function(){!function(e,t){t.value=e,S()}(t,a)}}function c(e,t){e.setAttribute("skeleton-screen",(0,u.a)(t))}function l(e,t){e.setAttribute("animation",(0,u.a)(t))}null==s?(o(e,r),d(e,r,t),c(e,a),l(e,i)):(s!==r?(o(e,r),d(e,r,t)):n!==t&&d(e,r,t),w!==a&&c(e,a),L!==i&&l(e,i))}var s=e.length,o=Array.from((0,c.d)(y,".hf")),d=o.length;if(s!==d){var l=d-s;if(l<0){for(var p=new DocumentFragment,m=0;m>l;m--){var v=A();p.appendChild(v),o.push(v)}y.append(p)}else if(l>0)for(var h=d-1,b=d-l-1;h>b;h--)o[h].remove(),o.splice(h,1)}for(var g=0;g<s;g++){var C=k[g],x=e[g],_=o[g];r(_,x,C||null)}k=e.slice(),n=t,w=a,L=i}function x(){return(x=(0,i.a)(function*(e){var t=(0,d.b)("playing_animation"),a=(0,u.c)();h.value="",function(e){for(var t=(0,d.b)("playing_animation"),a=(0,p.d)("window"),n=Math.floor(a.width/50)*(Math.floor(a.height/50)+3),i=[],r=0;r<n;r++)i.push("");C(i,e,!0,t)}(e);var n=yield(0,r.a)(a);for(var i in g=[],n.symbols)g.push(i);C(g,e,!1,t),(0,o.a)(n),(0,s.a)(a)})).apply(this,arguments)}function _(){h.addEventListener("paste",function(){T()}),h.addEventListener("cut",function(){T()}),h.addEventListener("selectionchange",function(){T()}),document.addEventListener("selectionchange",function(){T()}),h.addEventListener("keyup",function(){T()})}function T(){var e=h.value;if(!(0,l.a)(e)){for(var t=(0,o.b)(e),a=t.length-1;a>=0;a--){var i=t[a].item,r=g.indexOf(i);if(g[a]&&!(r<0)){var s=[g[r],g[a]];g[a]=s[0],g[r]=s[1]}}C(g,n,!1,L)}}function P(){m.setAttribute("displayed","true")}function E(){m.setAttribute("displayed","false")}function I(e){(0,p.c)("IconSelector"),P(),function(e){x.apply(this,arguments)}(e),(0,p.b)()}function S(){E(),(0,p.h)(),(0,p.e)("IconSelector")}},4537(e,t,a){a.d(t,{a:()=>r,b:()=>i,c:()=>s});var n=a(8179);function i(e){var t=document.createElement("span");return t.classList.add("ma"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("ma"),e}function s(e,t){(0,n.e)(e,"span.ma").innerText=t}},6971(){},2547(){},6110(){},9080(){},8933(){},6561(){},7336(){},4953(){},5297(){},7499(){},9657(){},7114(){},6764(){}}]);
//# sourceMappingURL=cec1587c9543bbd3c15a.js.map