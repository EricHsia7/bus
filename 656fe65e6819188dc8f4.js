!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,()=>(()=>{"use strict";var t,e,r={5106(t,e,r){var n=r(3453);function o(t,e,r){var n=r.x-e.x,o=r.y-e.y,a=n*n+o*o,s=((t.x-e.x)*n+(t.y-e.y)*o)/a;if(s<0)n=t.x-e.x,o=t.y-e.y;else if(s>1)n=t.x-r.x,o=t.y-r.y;else{var i={x:e.x+s*n,y:e.y+s*o};n=t.x-i.x,o=t.y-i.y}return Math.sqrt(n*n+o*o)}function a(t,e){if(t.length<3)return t;for(var r=0,n=0,s=1;s<t.length-1;s++){var i=o(t[s],t[0],t[t.length-1]);i>r&&(n=s,r=i)}if(r>e){var f=t.slice(0,n+1),l=t.slice(n),u=a(f,e),c=a(l,e);return u.slice(0,u.length-1).concat(c)}return[t[0],t[t.length-1]]}function s(t,e,r){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(e-1),n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}r(3790);function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){i=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}self.onmessage=function(t){var e=function(t){var e,r=(0,n.A)(t,4),o=r[0],f=r[1],u=r[2],c=r[3],v=o.length,y=[],d=0,p=i(o);try{for(p.s();!(e=p.n()).done;){var h=e.value;y.push(h.stats.max),y.push(h.stats.min),d+=h.stats.sum}}catch(t){p.e(t)}finally{p.f()}for(var x=function(t){var e=t.length;if(0===e)return[0,0];for(var r=1/0,n=-1/0,o=e-1;o>=0;o--){var a=t[o];a>n&&(n=a),a<r&&(r=a)}return[r,n]}(y),$=0===x[1]?1:x[1],b=0===x[0]?1:x[0],g=o[0].date,m=o[v-1].date,w=s(g[0],g[1],g[2]),k=s(m[0],m[1],m[2]),j=[],O=0;O<v;O++){var M=o[O];if(0!==M.stats.sum)for(var A=M.data,S=0;S<l;S++){var C=c+(O+S/l)/8*f,P=c+(1-A[S]/$)*u;j.push({x:C,y:P})}else{var D=c+O/8*f,F=c+(O+.9993055555555556)/8*f,I=c+u;j.push({x:D,y:I}),j.push({x:F,y:I})}}var L=`<line x1="${c}" y1="${u+c}" x2="${c+f}" y2="${u+c}" stroke="var(--a)" stroke-width="1" />`,T=`<line x1="${c}" y1="${c}" x2="${c}" y2="${u+c}" stroke="var(--a)" stroke-width="1" />`,z=`<text x="${c+f/2}" y="${c+u+c}" text-anchor="middle" font-size="12" fill="var(--a)">時間</text>`,G=`<text x="${c/2}" y="${c+u/2}" text-anchor="middle" font-size="12" fill="var(--a)" transform="rotate(-90, ${.7*c}, ${c+u/2})">傳輸量</text>`,q=function(t,e){if(t.length<1)return"";for(var r=`M${t[0].x*e} ${t[0].y*e}`,n=t.length-1,o=1;o<n;o++){var a=t[o],s=t[o+1]||a;r+=`Q${a.x*e} ${a.y*e} ${(a.x*e+s.x*e)/2} ${(a.y*e+s.y*e)/2}`}var i=t[n];return r+`L${i.x*e},${i.y*e}`}(a(j,1.1),1),B={stats:{max:$,min:b,sum:d},period:{start:w,end:k},chart:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${f+2*c} ${u+2*c}"><defs><linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.3);" /><stop offset="73%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.09);" /><stop offset="100%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0);" /></linearGradient></defs><path d="M${c},${u+c}${q}L${c+f},${u+c}L${c},${u+c}" stroke="none" stroke-width="0" fill="url(#grad1)"></path><path d="${q}" fill="none" stroke="var(--b)" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" opacity="1"></path>${L}${T}${z}${G}</svg>`};return B}(t.data);self.postMessage(e)};var l=1440}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;var a=n[t]={exports:{}};return r[t](a,a.exports,o),a.exports}o.m=r,o.x=()=>{var t=o.O(void 0,[453,790],()=>o(5106));return t=o.O(t)},t=[],o.O=(e,r,n,a)=>{if(!r){var s=1/0;for(u=0;u<t.length;u++){for(var[r,n,a]=t[u],i=!0,f=0;f<r.length;f++)(!1&a||s>=a)&&Object.keys(o.O).every(t=>o.O[t](r[f]))?r.splice(f--,1):(i=!1,a<s&&(s=a));if(i){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,n,a]},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((e,r)=>(o.f[r](t,e),e),[])),o.u=t=>({106:"656fe65e6819188dc8f4",453:"311dcdd1c805fa201012",790:"dab4a7542bdf2d6023ee"}[t]+".js"),o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.p="./",(()=>{o.b=self.location+"";var t={106:1};o.f.i=(e,r)=>{t[e]||importScripts(o.p+o.u(e))};var e=self.webpackChunkbus=self.webpackChunkbus||[],r=e.push.bind(e);e.push=e=>{var[n,a,s]=e;for(var i in a)o.o(a,i)&&(o.m[i]=a[i]);for(s&&s(o);n.length;)t[n.pop()]=1;r(e)}})(),e=o.x,o.x=()=>Promise.all([o.e(453),o.e(790)]).then(e);var a=o.x();return a=a.default})());
//# sourceMappingURL=656fe65e6819188dc8f4.js.map