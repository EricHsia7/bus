"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(t,e,a){a.d(e,{a:()=>ut,b:()=>ot,c:()=>G,d:()=>lt,e:()=>nt});var s=a(467),i=a(5767),r=a(9566),d=a(3422),n=a(5314),o=a(7123),l=a(3459),u=a(8179),p=a(7968),c=a(8024),h=a(9915),f=a(5579),v=a(4537),b=a(904),g=a(3030),m=a(9119),A=a(4373),y=a(3041),C=a(752),L=(0,u.c)(".ul"),x=(0,u.e)(L,".dm"),w=(0,u.e)(x,".gm"),T=(0,u.e)(w,"span"),k=(0,u.e)(x,".fm"),_=(0,u.e)(x,".mm .nm"),R=(0,u.e)(x,".hm"),P=(0,u.e)(R,".im"),$=(0,u.e)(x,".km"),S=(0,u.e)($,".lm"),I=(0,u.e)(L,".pm"),D={},E=!1,N=!1,B=0,j=0,M=0,F={},q=0,z=!1,Q=new h.a(function(){return rt.apply(this,arguments)},15e3),H=0,U=[],W=(0,c.e)();function G(){I.addEventListener("touchstart",function(){B=Math.round(I.scrollLeft/q)},{passive:!0}),I.addEventListener("scroll",function(t){z=!0;var e=t.target.scrollLeft/q;j=e>B?B+1:B-1;var a=e-B,s=Math.abs(a);s>1&&(a>0?(B=Math.floor(e),j=B+1):(B=Math.ceil(e),j=B-1),s=Math.abs(e-B));var i=F[`g_${B}`]||{width:0,offset:0},r=F[`g_${j}`]||{width:0,offset:0},d=i.width+(r.width-i.width)*s,n=-1*(i.offset+(r.offset-i.offset)*s)+.5*q-.5*d;J(M,n,d-20,e)},{passive:!0}),I.addEventListener("scrollend",function(t){var e=t.target.scrollLeft/q,a=e-j;-.01<a&&a<.01&&(B=Math.round(e),z=!1)},{passive:!0})}function J(t,e,a,s){I.style.setProperty("--tl",t.toString()),S.style.setProperty("--yl",a.toString()),P.style.setProperty("--zl",`${e.toFixed(W)}px`),P.style.setProperty("--am",s.toString())}function K(t){_.style.setProperty("--cm",`${t.toString()}ms`),_.classList.add("om")}function O(t){var e=t;_.style.setProperty("--bm",e.detail.progress.toString()),"end"===e.detail.stage&&document.removeEventListener(e.detail.target,O)}function V(t){var e=(0,u.a)();e.classList.add("ym"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0"),e.style.setProperty("--wm",t.toString());var a=(0,u.a)();a.classList.add("zm");var s=(0,u.a)();s.classList.add("cn");var i=(0,u.a)();i.classList.add("fn"),i.setAttribute("displayed","false"),s.appendChild(i);var r=(0,u.a)();r.classList.add("gn");var d=(0,u.a)();d.classList.add("we"),d.setAttribute("code","0"),d.setAttribute("displayed","false"),r.appendChild(d);var n=(0,u.a)();return n.classList.add("xe"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),r.appendChild(n),e.appendChild(a),e.appendChild(s),e.appendChild(r),e}function X(t){var e=(0,u.a)();e.classList.add("jn"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var a=(0,u.a)();a.classList.add("kn");var s=(0,u.a)();s.classList.add("ln"),a.appendChild(s);var i=(0,u.a)();i.classList.add("mn");var r=(0,u.a)();r.classList.add("yn");var d=(0,u.a)();d.classList.add("we"),d.setAttribute("code","0"),d.setAttribute("displayed","false"),r.appendChild(d);var n=(0,u.a)();n.classList.add("xe"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),r.appendChild(n),i.appendChild(r);var o=(0,u.a)();o.classList.add("zn"),o.appendChild((0,v.b)("keyboard_arrow_down")),o.onclick=function(){!function(t,e){var a=(0,u.e)(t,".ao"),s=t.parentElement,i=e.parentElement,r=(0,u.f)(e,"ym"),d=(0,u.f)(t,"jn"),n=d.length,o=s.getBoundingClientRect(),l=t.getBoundingClientRect(),p=i.getBoundingClientRect(),c=e.getBoundingClientRect(),h=c.top-p.top,f=l.top-o.top,v="true"===t.getAttribute("stretched"),b="true"===t.getAttribute("animation");if(b){var g=v?"2":"1";e.setAttribute("stretching","true"),e.style.setProperty("--vm",`${h}px`),t.setAttribute("stretching","true"),t.style.setProperty("--lp",`${f}px`);for(var m=0;m<n;m++){var A=d[m],y=r[m];y.setAttribute("push-direction",g),y.setAttribute("push-state","1"),A.setAttribute("push-direction",g),A.setAttribute("push-state","1")}a.addEventListener("transitionend",function(){for(var a=0;a<n;a++){var s=d[a],i=r[a];i.setAttribute("push-direction","0"),i.setAttribute("push-state","0"),s.setAttribute("push-direction","0"),s.setAttribute("push-state","0")}e.setAttribute("stretching","false"),t.setAttribute("stretching","false")},{once:!0}),a.addEventListener("transitionstart",function(){for(var t=0;t<n;t++){var e=d[t];r[t].setAttribute("push-state","2"),e.setAttribute("push-state","2")}},{once:!0})}v?(b?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"),e.setAttribute("stretched","true"))}(e,t)},i.appendChild(o);var l=(0,u.a)();l.classList.add("_n"),i.appendChild(l),a.appendChild(i);var p=(0,u.a)();p.classList.add("ao"),p.setAttribute("displayed","false");var c=(0,u.a)();c.classList.add("bo");var h=(0,u.a)();h.classList.add("co"),h.setAttribute("highlighted","true"),h.setAttribute("type","tab"),h.setAttribute("code","0"),h.onclick=function(){ct(e,0)};var f=(0,u.a)();f.classList.add("do"),f.appendChild((0,v.b)("directions_bus")),h.appendChild(f),h.appendChild(document.createTextNode("公車")),c.appendChild(h);var b=(0,u.a)();b.classList.add("co"),b.setAttribute("highlighted","false"),b.setAttribute("type","tab"),b.setAttribute("code","1"),b.onclick=function(){ct(e,1)};var g=(0,u.a)();g.classList.add("do"),g.appendChild((0,v.b)("departure_board")),b.appendChild(g),b.appendChild(document.createTextNode("抵達時間")),c.appendChild(b);var m=(0,u.a)();m.classList.add("co"),m.setAttribute("highlighted","false"),m.setAttribute("type","tab"),m.setAttribute("code","2"),m.onclick=function(){ct(e,2)};var A=(0,u.a)();A.classList.add("do"),A.appendChild((0,v.b)("route")),m.appendChild(A),m.appendChild(document.createTextNode("路線")),c.appendChild(m);var y=(0,u.a)();y.classList.add("co"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){ct(e,3)};var C=(0,u.a)();C.classList.add("do"),C.appendChild((0,v.b)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),c.appendChild(y);var L=(0,u.a)();L.classList.add("co"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var x=(0,u.a)();x.classList.add("do"),x.appendChild((0,v.b)("folder")),L.appendChild(x),L.appendChild(document.createTextNode("儲存")),c.appendChild(L);var w=(0,u.a)();w.classList.add("co"),w.setAttribute("highlighted","false"),w.setAttribute("type","schedule-notification"),w.setAttribute("enabled","true");var T=(0,u.a)();T.classList.add("do"),T.appendChild((0,v.b)("notifications")),w.appendChild(T),w.appendChild(document.createTextNode("通知")),c.appendChild(w),p.appendChild(c);var k=(0,u.a)();k.classList.add("eo"),k.setAttribute("displayed","true"),p.appendChild(k);var _=(0,u.a)();_.classList.add("fo"),_.setAttribute("displayed","false"),p.appendChild(_);var R=(0,u.a)();R.classList.add("go"),R.setAttribute("displayed","false"),p.appendChild(R);var P=(0,u.a)();return P.classList.add("ho"),P.setAttribute("displayed","false"),p.appendChild(P),e.appendChild(a),e.appendChild(p),e}function Y(){var t=(0,u.a)();t.classList.add("qm");var e=(0,u.a)();e.classList.add("rm");var a=(0,u.a)();a.classList.add("sm");var s=(0,u.a)();s.classList.add("xm");var i=(0,u.a)();i.classList.add("tm");var r=(0,u.a)();return r.classList.add("io"),i.appendChild(r),a.appendChild(s),e.appendChild(a),e.appendChild(i),t.appendChild(e),t}function Z(){var t=(0,u.a)();t.classList.add("jm");var e=document.createElement("span");return t.appendChild(e),t}function tt(){var t=(0,u.a)();t.classList.add("jo"),t.setAttribute("on-this-route","false");var e=(0,u.a)();e.classList.add("ko");var a=(0,u.a)();a.classList.add("lo"),a.appendChild((0,v.b)("directions_bus"));var s=(0,u.a)();s.classList.add("mo");var i=(0,u.a)();i.classList.add("no");var r=(0,u.a)();r.classList.add("oo");var d=(0,u.a)();d.classList.add("po");var n=(0,u.a)();return n.classList.add("qo"),e.appendChild(a),e.appendChild(s),t.appendChild(e),i.appendChild(r),i.appendChild(d),i.appendChild(n),t.appendChild(i),t}function et(){var t=(0,u.a)();t.classList.add("ro");var e=(0,u.a)();e.classList.add("so");var a=(0,u.a)();a.classList.add("to"),a.appendChild((0,v.b)("route"));var s=(0,u.a)();s.classList.add("uo");var i=(0,u.a)();i.classList.add("vo");var r=(0,u.a)();r.classList.add("wo");var d=(0,u.a)();d.classList.add("xo"),d.setAttribute("type","view-route"),d.innerText="查看路線";var n=(0,u.a)();return n.classList.add("xo"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存路線",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function at(){var t=(0,u.a)();t.classList.add("yo");var e=(0,u.a)();e.classList.add("zo");var a=(0,u.a)();a.classList.add("_o"),a.appendChild((0,v.b)("calendar_view_day"));var s=(0,u.a)();s.classList.add("ap");var i=(0,u.a)();i.classList.add("bp");var r=(0,u.a)();return r.classList.add("cp"),e.appendChild(a),e.appendChild(s),e.appendChild(i),t.appendChild(e),t.appendChild(r),t}function st(){var t=(0,u.a)();t.classList.add("dp");var e=(0,u.a)();e.classList.add("ep");var a=(0,u.a)();a.classList.add("fp"),a.appendChild((0,v.b)("location_on"));var s=(0,u.a)();s.classList.add("gp");var i=(0,u.a)();i.classList.add("hp");var r=(0,u.a)();r.classList.add("ip");var d=(0,u.a)();d.classList.add("jp"),d.setAttribute("type","view-location"),d.innerText="查看地點";var n=(0,u.a)();return n.classList.add("jp"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存地點",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function it(t,e,a){var s,i;function n(e,a,s,i,n,o){function l(t,e,a,s,i){var r=(0,u.e)(e,".gn"),d=(0,u.e)(r,".xe"),n=(0,u.e)(r,".we"),o=(0,u.e)(t,".yn"),l=(0,u.e)(o,".xe"),p=(0,u.e)(o,".we");if(n.setAttribute("code",a.status.code.toString()),p.setAttribute("code",a.status.code.toString()),p.innerText=a.status.text,!s&&i){var c=t.getBoundingClientRect(),h=c.top,f=c.left,v=c.bottom,b=c.right,g=window.innerWidth,m=window.innerHeight;if(v>0&&h<m&&b>0&&f<g)return d.addEventListener("animationend",function(){d.setAttribute("code",a.status.code.toString()),d.classList.remove("_e"),n.setAttribute("displayed","false")},{once:!0}),l.addEventListener("animationend",function(){l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text,l.classList.remove("_e"),p.setAttribute("displayed","false")},{once:!0}),p.setAttribute("displayed","true"),n.setAttribute("displayed","true"),d.classList.add("_e"),void l.classList.add("_e")}d.setAttribute("code",a.status.code.toString()),l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text}function p(t,e,a){t.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer)),e.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer))}function h(t,e){(0,u.e)(t,".ln").innerText=e.name}function v(t,e){var a=(0,u.e)(t,".eo"),s=Array.from((0,u.d)(a,".jo")),i=s.length,r=e.buses.length,d=i-r;if(d<0){for(var n=new DocumentFragment,o=0;o>d;o--){var l=tt();n.appendChild(l),s.push(l)}a.append(n)}else if(d>0)for(var p=i-1,h=i-d-1;p>h;p--)s[p].remove(),s.splice(p,1);for(var f=0;f<r;f++){var v=e.buses[f],b=s[f],g=(0,u.e)(b,".ko"),m=(0,u.e)(g,".mo"),A=(0,u.e)(b,".no"),y=(0,u.e)(A,".oo"),C=(0,u.e)(A,".po"),L=(0,u.e)(A,".qo");b.setAttribute("on-this-route",(0,c.a)(v.onThisRoute)),m.innerText=v.carNumber,y.innerText=`路線：${v.RouteName}`,C.innerText=`狀態：${v.status.text}`,L.innerText=`類型：${v.type}`}a.setAttribute("empty",(0,c.a)(0===r))}function b(t,e){var a=(0,u.e)(t,".fo"),s=Array.from((0,u.d)(a,".ro")),i=s.length,d=e.overlappingRoutes.length,n=i-d;if(n<0){for(var o=new DocumentFragment,l=0;l>n;l--){var p=et();o.appendChild(p),s.push(p)}a.append(o)}else if(n>0)for(var h=i-1,f=i-n-1;h>f;h--)s[h].remove(),s.splice(h,1);for(var v=0;v<d;v++){var b=e.overlappingRoutes[v],g=s[v],m=(0,u.e)(g,".so"),A=(0,u.e)(m,".uo"),C=(0,u.e)(g,".vo"),L=(0,u.e)(g,".wo"),x=(0,u.e)(L,'.xo[type="view-route"]'),w=(0,u.e)(L,'.xo[type="save-to-folder"]');A.innerText=b.name,C.innerText=b.RouteEndPoints.text,function(t,e,a){t.onclick=function(){pt(e,a)}}(x,b.RouteID,b.PathAttributeId),function(t,e){t.onclick=function(){(0,y.c)("route",[e],t)},(0,r.e)("route",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(w,b.RouteID)}a.setAttribute("empty",(0,c.a)(0===d))}function m(t,e){var a=(0,u.e)(t,".go"),s=Array.from((0,u.d)(a,".yo")),i=s.length,r=e.busArrivalTimes.length,d=i-r;if(d<0){for(var n=new DocumentFragment,o=0;o>d;o--){var l=at();n.appendChild(l),s.push(l)}a.append(n)}else if(d>0)for(var p=i-1,h=i-d-1;p>h;p--)s[p].remove(),s.splice(p,1);for(var v=0;v<r;v++){var b=e.busArrivalTimes[v],g=s[v],m=(0,u.e)(g,".zo"),A=(0,u.e)(m,".ap"),y=(0,u.e)(m,".bp"),C=(0,u.e)(g,".cp");A.innerText=b.personalSchedule.name,y.innerText=`週${(0,f.e)(b.day).name} ${(0,f.g)(b.personalSchedule.period.start)} - ${(0,f.g)(b.personalSchedule.period.end)}`,C.innerHTML=b.chart}a.setAttribute("empty",(0,c.a)(0===r))}function A(t,e){var a=(0,u.e)(t,".ho"),s=Array.from((0,u.d)(a,".dp")),i=s.length,d=e.nearbyLocations.length,n=i-d;if(n<0){for(var o=new DocumentFragment,l=0;l>n;l--){var p=st();o.appendChild(p),s.push(p)}a.append(o)}else if(n>0)for(var h=i-1,f=i-n-1;h>f;h--)s[h].remove(),s.splice(h,1);for(var v=0;v<d;v++){var b=e.nearbyLocations[v],m=s[v],A=(0,u.e)(m,".ep"),C=(0,u.e)(A,".gp"),L=(0,u.e)(m,".hp"),x=(0,u.e)(m,".ip"),w=(0,u.e)(x,'.jp[type="view-location"]'),T=(0,u.e)(x,'.jp[type="save-to-folder"]');C.innerText=b.name,L.innerText=`${b.distance}公尺`,function(t,e){t.onclick=function(){(0,g.d)(e)}}(w,b.hash),function(t,e){t.onclick=function(){(0,y.c)("location",[e],t)},(0,r.e)("location",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(T,b.hash)}a.setAttribute("empty",(0,c.a)(0===d))}function L(t,e,a){t.setAttribute("nearest",(0,c.a)(a.nearest)),e.setAttribute("nearest",(0,c.a)(a.nearest))}function x(t,e,a,s,i){var r=(null==a?void 0:a.progress)||0,d=(null==e?void 0:e.progress)||0,n=(0,u.e)(t,".cn .fn");if(!s&&i&&0!==r&&0===d&&Math.abs(d-r)>0)return n.style.setProperty("--bn","100%"),void n.addEventListener("transitionend",function(){n.setAttribute("displayed","false"),n.style.setProperty("--bn","-100%")},{once:!0});d>0?(n.setAttribute("displayed","true"),n.style.setProperty("--bn",100*(d-1)+"%")):n.setAttribute("displayed","false")}function w(t,e,a){a&&((0,u.e)(t,".ao").setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false"))}function T(t,e,a){t.setAttribute("animation",(0,c.a)(a)),e.setAttribute("animation",(0,c.a)(a))}function k(t,e,a){t.setAttribute("skeleton-screen",(0,c.a)(a)),e.setAttribute("skeleton-screen",(0,c.a)(a))}function _(e,a){var s=(0,u.e)(e,'.ao .bo .co[type="save-to-folder"]');s.onclick=function(){(0,y.c)("stop",[a.id,t.RouteID],s)},(0,r.e)("stop",a.id).then(function(t){s.setAttribute("highlighted",(0,c.a)(t))})}function R(e,a){var s=(0,u.e)(e,'.ao .bo .co[type="schedule-notification"]');s.onclick=function(){(0,C.c)(s,a.id,t.RouteID,a.status.time)};var i=(0,d.r)(a.id);s.setAttribute("highlighted",(0,c.a)(i))}null===i?(l(e,a,s,n,o),h(e,s),v(e,s),b(e,s),m(e,s),A(e,s),p(e,a,s),L(e,a,s),x(a,s,i,n,o),w(e,a,n),T(e,a,o),k(e,a,n),_(e,s),R(e,s)):(s.status.time!==i.status.time&&(l(e,a,s,n,o),R(e,s)),(0,c.b)(i.buses,s.buses)||v(e,s),(0,c.b)(i.busArrivalTimes,s.busArrivalTimes)||m(e,s),i.nearest!==s.nearest&&L(e,a,s),i.progress!==s.progress&&x(a,s,i,n,o),i.id!==s.id&&(h(e,s),p(e,a,s),b(e,s),A(e,s),_(e,s),R(e,s)),E!==o&&T(e,a,o),N!==n&&(w(e,a,n),k(e,a,n)))}var o=(0,b.d)("window"),l=o.width,h=o.height,v=t.groupQuantity,m=t.itemQuantity,L=t.groupedItems,x=t.groupNames;M=v,q=l;for(var _=0,S=0;S<v;S++){var j=`g_${S}`,Q=(0,p.c)(x[S],500,"17px",'"Noto Sans TC", sans-serif')+20;F[j]={width:Q,offset:_},_+=Q}if(F[`g_${v}`]={width:0,offset:_},!z){var H=F[`g_${B}`],U=-1*H.offset+.5*q-.5*H.width,W=H.width-20;J(M,U,W,B)}N!==e&&(w.setAttribute("skeleton-screen",(0,c.a)(e)),R.setAttribute("skeleton-screen",(0,c.a)(e)),$.setAttribute("skeleton-screen",(0,c.a)(e))),E!==a&&(w.setAttribute("animation",(0,c.a)(a)),R.setAttribute("animation",(0,c.a)(a)),$.setAttribute("animation",(0,c.a)(a))),(null===(s=D)||void 0===s?void 0:s.RouteID)!==t.RouteID&&(k.onclick=function(){(0,A.c)(t.RouteID,t.PathAttributeId)}),(null===(i=D)||void 0===i?void 0:i.RouteName)!==t.RouteName&&(T.innerText=t.RouteName);var G=Array.from((0,u.d)(I,".qm")),K=Array.from((0,u.d)(P,".jm")),O=G.length;if(v!==O){var it=O-v;if(it<0){for(var rt=new DocumentFragment,dt=new DocumentFragment,nt=0;nt>it;nt--){var ot=Y();rt.appendChild(ot),G.push(ot);var lt=Z();dt.appendChild(lt),K.push(lt)}I.append(rt),P.append(dt)}else if(it>0)for(var ut=O-1,ct=O-it-1;ut>ct;ut--)G[ut].remove(),G.splice(ut,1),K[ut].remove(),K.splice(ut,1)}for(var ht=0;ht<v;ht++){var ft=`g_${ht}`,vt=G[ht],bt=(0,u.e)(vt,".tm"),gt=(0,u.e)(vt,".sm"),mt=Array.from((0,u.d)(bt,".jn")),At=Array.from((0,u.d)(gt,".ym")),yt=mt.length;if(m[ft]!==yt){var Ct=yt-m[ft];if(Ct<0){for(var Lt=new DocumentFragment,xt=new DocumentFragment,wt=0;wt>Ct;wt--){var Tt=V(-1*yt+wt),kt=X(Tt);Lt.appendChild(kt),mt.push(kt),xt.appendChild(Tt),At.push(Tt)}bt.append(Lt),gt.append(xt)}else if(Ct>0)for(var _t=yt-1,Rt=yt-Ct-1;_t>Rt;_t--)mt[_t].remove(),mt.splice(_t,1),At[_t].remove(),At.splice(_t,1)}var Pt=K[ht];(0,u.e)(Pt,"span").innerText=x[ht],Pt.style.setProperty("--vl",`${F[ft].offset}px`),Pt.style.setProperty("--wl",`${F[ft].width}px`),Pt.style.setProperty("--xl",ht.toString()),e&&(vt.scrollTop=0);for(var $t=0;$t<m[ft];$t++){var St=mt[$t],It=At[$t],Dt=L[ft][$t];if((0,c.f)(D,"groupedItems"))if((0,c.f)(D.groupedItems,ft))if(D.groupedItems[ft][$t])n(St,It,Dt,D.groupedItems[ft][$t],e,a);else n(St,It,Dt,null,e,a);else n(St,It,Dt,null,e,a);else n(St,It,Dt,null,e,a)}}P.style.setProperty("--_l",`${_}px`),D=t,E=a,N=e}function rt(){return(rt=(0,s.a)(function*(){try{var t=(0,l.b)("playing_animation"),e=(0,l.b)("refresh_interval"),a=(0,b.d)("route-bus-arrival-time-chart"),s=(0,c.c)();_.setAttribute("refreshing","true"),_.classList.remove("om"),document.addEventListener(s,O);var r=yield(0,o.a)(H,U,a.width,a.height,s);it(r,!1,t);var d=0;e.dynamic&&(d=yield(0,i.c)());var n=(new Date).getTime(),u=0;u=e.dynamic?Math.max(n+5e3,r.dataUpdateTime+e.baseInterval/d):n+e.baseInterval,_.setAttribute("refreshing","false");var p=Math.max(5e3,u-n);return K(p),p}catch(t){var h=1e4;return(0,m.a)("error","路線發生錯誤，將在10秒後重試。"),K(h),h}})).apply(this,arguments)}function dt(t,e){H=t,U=e,B=0,F={},I.scrollLeft=0,I.focus(),function(t,e){for(var a=(0,l.b)("playing_animation"),s=(0,b.d)("window"),i=(s.width,s.height),r=Math.floor(i/50)+5,d={},n=0;n<2;n++){var o=`g_${n}`;d[o]=[];for(var u=0;u<r;u++)d[o].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:u,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}it({groupNames:["往載入中","往載入中"],groupedItems:d,groupQuantity:2,itemQuantity:{g_0:r,g_1:r},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:t,PathAttributeId:e,dataUpdateTime:0},!0,a)}(t,e),Q.isPaused?Q.resume(!0):Q.tick()}function nt(){L.setAttribute("displayed","true")}function ot(){L.setAttribute("displayed","false")}function lt(t,e){(0,b.c)("Route"),(0,n.e)("route",t),nt(),dt(t,e),(0,b.b)()}function ut(){ot(),Q.pause(),(0,b.h)(),(0,b.e)("Route")}function pt(t,e){Q.pause(),lt(t,e)}function ct(t,e){var a=(0,u.e)(t,".bo"),s=(0,u.d)(a,'.co[highlighted="true"][type="tab"]');for(var i of s)i.setAttribute("highlighted","false");switch((0,u.e)(a,`.co[code="${e}"]`).setAttribute("highlighted","true"),e){case 0:(0,u.e)(t,".eo").setAttribute("displayed","true"),(0,u.e)(t,".go").setAttribute("displayed","false"),(0,u.e)(t,".fo").setAttribute("displayed","false"),(0,u.e)(t,".ho").setAttribute("displayed","false");break;case 1:(0,u.e)(t,".eo").setAttribute("displayed","false"),(0,u.e)(t,".go").setAttribute("displayed","true"),(0,u.e)(t,".fo").setAttribute("displayed","false"),(0,u.e)(t,".ho").setAttribute("displayed","false");break;case 2:(0,u.e)(t,".eo").setAttribute("displayed","false"),(0,u.e)(t,".go").setAttribute("displayed","false"),(0,u.e)(t,".fo").setAttribute("displayed","true"),(0,u.e)(t,".ho").setAttribute("displayed","false");break;case 3:(0,u.e)(t,".eo").setAttribute("displayed","false"),(0,u.e)(t,".go").setAttribute("displayed","false"),(0,u.e)(t,".fo").setAttribute("displayed","false"),(0,u.e)(t,".ho").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=5ad071029519fe6ff28b.js.map