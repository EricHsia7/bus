"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[601],{540(e,t,a){a.d(t,{a:()=>S,b:()=>P});var n=a(467),i=a(5767),r=a(9566),s=a(3459),o=a(8179),d=a(8024),c=a(9915),u=a(4537),l=a(904),p=a(3030),f=a(9119),m=a(4690),v=(0,o.c)(".gd"),b=(0,o.e)(v,".ld"),h=(0,o.e)(v,".ud"),y=(0,o.e)(h,".ge"),g=(0,o.e)(b,".qd .rd"),k={},L=!1,w=!1,A=new c.a(function(){return I.apply(this,arguments)},15e3);function C(){var e=(0,o.a)();e.classList.add("me"),e.setAttribute("type","stop");var t=(0,o.a)();t.classList.add("ne"),t.appendChild((0,u.b)("location_on"));var a=(0,o.a)();a.classList.add("oe");var n=(0,o.a)();n.classList.add("pe");var i=(0,o.a)();i.classList.add("qe");var r=(0,o.a)();r.classList.add("ue");var s=(0,o.a)();s.classList.add("ve"),s.setAttribute("code","0"),s.setAttribute("displayed","false");var d=(0,o.a)();d.classList.add("we"),d.setAttribute("code","0"),d.setAttribute("displayed","true"),r.appendChild(s),r.appendChild(d);var c=(0,o.a)();c.classList.add("re"),c.appendChild((0,u.b)("keyboard_arrow_right"));var l=(0,o.a)();return l.classList.add("se"),i.appendChild(r),i.appendChild(c),i.appendChild(l),e.appendChild(t),e.appendChild(a),e.appendChild(n),e.appendChild(i),e}function _(){var e=(0,o.a)();e.classList.add("he");var t=(0,o.a)();t.classList.add("ie");var a=(0,o.a)();a.classList.add("je"),a.appendChild((0,u.a)());var n=(0,o.a)();n.classList.add("ke"),t.appendChild(a),t.appendChild(n);var i=(0,o.a)();return i.classList.add("le"),e.appendChild(t),e.appendChild(i),e}function x(e){g.style.setProperty("--kd",`${e}ms`),g.classList.add("td")}function T(e){var t=e;g.style.setProperty("--jd",t.detail.progress.toString()),"end"===t.detail.stage&&document.removeEventListener(t.detail.target,T)}function P(){for(var e=(0,s.b)("playing_animation"),t=(0,l.d)("window"),a=(t.width,t.height),n=Math.floor(a/50/3)+2,i=[],r=0;r<3;r++){for(var o={name:"",icon:"",id:"",timestamp:0,content:[],contentLength:n},d=0;d<n;d++){o.content.push({type:"stop",id:0,timestamp:0,name:"",status:{code:8,text:"",time:-6},direction:0,route:{name:"",endPoints:{departure:"",destination:""},id:0,pathAttributeId:[]}})}i.push(o)}E({folders:i,dataUpdateTime:0},!0,e)}function E(e,t,a){function n(e,n,i){function r(e,t){e.setAttribute("type",t.type)}function s(e,t){var a=(0,o.e)(e,".ne"),n="";switch(t.type){case"stop":case"location":n="location_on";break;case"route":n="route";break;case"bus":n="directions_bus";break;case"empty":n="lightbulb";break;default:n=""}(0,u.c)(a,n)}function c(e,t,a){if("stop"===t.type){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,d=n.right,c=window.innerWidth,u=window.innerHeight,l=(0,o.e)(e,".qe .ue"),p=(0,o.e)(l,".ve"),f=(0,o.e)(l,".we");p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text,a&&s>0&&i<u&&d>0&&r<c?(f.addEventListener("animationend",function(){f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text,f.classList.remove("ze"),p.setAttribute("displayed","false")},{once:!0}),p.setAttribute("displayed","true"),f.classList.add("ze")):(f.setAttribute("code",t.status.code.toString()),f.innerText=t.status.text)}}function l(e,t){var a="";switch(t.type){case"stop":case"route":case"location":a=t.name;break;case"bus":a=t.busID;break;case"empty":a="沒有內容";break;default:a="null"}(0,o.e)(e,".pe").innerText=a}function f(e,t){var a="";switch(t.type){case"stop":a=`${t.route?t.route.name:""} - 往${t.route?[t.route.endPoints.destination,t.route.endPoints.departure,""][t.direction?t.direction:0]:""}`;break;case"route":a=`${t.endPoints.departure} ↔ ${t.endPoints.destination}`;break;case"location":a="地點";break;case"bus":break;case"empty":a="提示";break;default:a="null"}(0,o.e)(e,".oe").innerText=a}function v(e,t){var a=(0,o.e)(e,".qe .re");switch(t.type){case"stop":a.onclick=function(){(0,m.d)(t.route.id,t.route.pathAttributeId)};break;case"route":a.onclick=function(){(0,m.d)(t.id,t.pathAttributeId)};break;case"location":a.onclick=function(){(0,p.d)(t.id)}}}function b(e,t){e.setAttribute("animation",(0,d.a)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}if(null==i)r(e,n),s(e,n),c(e,n,a),l(e,n),f(e,n),v(e,n),b(e,a),h(e,t);else if(n.type!==i.type)r(e,n),s(e,n),c(e,n,a),l(e,n),f(e,n),v(e,n),b(e,a),h(e,t);else{switch(n.type){case"stop":(0,d.b)(i.route,n.route)||(f(e,n),v(e,n)),i.name!==n.name&&l(e,n),i.status.time!==n.status.time&&c(e,n,a);break;case"route":i.id!==n.id&&v(e,n),(0,d.b)(i.endPoints,n.endPoints)||f(e,n),i.name!==n.name&&l(e,n);break;case"location":i.id!==n.id&&v(e,n),i.name!==n.name&&l(e,n);break;case"bus":default:break;case"empty":n.type!==i.type&&(f(e,n),l(e,n))}t!==w&&h(e,t),a!==L&&b(e,a)}}function i(e,n,i){function r(e,t){var a=(0,o.e)(e,".ie");(0,o.e)(a,".ke").innerText=t.name}function s(e,t){var a=(0,o.e)(e,".ie"),n=(0,o.e)(a,".je");(0,u.c)(n,t.icon)}function c(e,t){e.setAttribute("animation",(0,d.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}null==i?(r(e,n),s(e,n),c(e,a),l(e,t)):(n.name!==i.name&&r(e,n),n.icon!==i.icon&&s(e,n),a!==L&&c(e,a),t!==w&&l(e,t))}var r=e.folders,s=r.length,c=Array.from((0,o.d)(y,".he")),l=c.length;if(s!==l){var f=l-s;if(f<0){for(var v=new DocumentFragment,b=0;b>f;b--){var h=_();v.appendChild(h),c.push(h)}y.append(v)}else if(f>0)for(var g=l-1,A=l-f-1;g>A;g--)c[g].remove(),c.splice(g,1)}for(var x=0;x<s;x++){var T=r[x],P=T.content,E=P.length,I=c[x],S=(0,o.e)(I,".le"),M=Array.from((0,o.d)(S,".me")),D=M.length;if(E!==D){var $=D-E;if($<0)for(var q=0;q>$;q--){var j=C();S.appendChild(j),M.push(j)}else if($>0)for(var F=D-1,R=D-$-1;F>R;F--)M[F].remove(),M.splice(F,1)}if((0,d.f)(k,"folders"))if(k.folders[x])i(I,T,k.folders[x]);else i(I,T,null);else i(I,T,null);for(var U=0;U<E;U++){var z=M[U],Q=P[U];if((0,d.f)(k,"folders"))if(k.folders[x])if(k.folders[x].content[U])n(z,Q,k.folders[x].content[U]);else n(z,Q,null);else n(z,Q,null);else n(z,Q,null)}}k=e,L=a,w=t}function I(){return(I=(0,n.a)(function*(){try{var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval"),a=(0,d.c)();g.setAttribute("refreshing","true"),g.classList.remove("td"),document.addEventListener(a,T);var n=yield(0,r.d)(a);E(n,!1,e);var o=0;t.dynamic&&(o=yield(0,i.c)());var c=(new Date).getTime(),u=0;u=t.dynamic?Math.max(c+5e3,n.dataUpdateTime+t.baseInterval/o):c+t.baseInterval;var l=Math.max(5e3,u-c);return g.setAttribute("refreshing","false"),x(l),l}catch(e){var p=1e4;return(0,f.a)("error","資料夾發生錯誤，將在10秒後重試。"),x(p),p}})).apply(this,arguments)}function S(){A.isPaused?A.resume(!0):A.tick()}},6082(e,t,a){a.d(t,{a:()=>l,b:()=>h,c:()=>k,d:()=>g});var n=a(467),i=a(9734),r=a(8011),s=a(9218),o=a(4293),d=a(6788),c=a(8179),u="downloadData",l=!1,p=(0,c.c)(".gd"),f=(0,c.e)(p,".ld"),m=(0,c.e)(f,".od"),v=(0,c.e)(m,'svg#download-svg path[component="progress"]');function b(e){var t=e,a=189*(1-(0,d.d)(u));v.style.setProperty("--hd",`${a}px`),"end"===t.detail.stage&&(document.removeEventListener(t.detail.target,b),m.setAttribute("complete","true"),v.style.setProperty("--hd","0px"),l=!0)}function h(){return y.apply(this,arguments)}function y(){return(y=(0,n.a)(function*(){(0,d.f)(u,"getRoute_0",0,!1),(0,d.f)(u,"getRoute_1",0,!1),(0,d.f)(u,"getLocation_0",0,!1),(0,d.f)(u,"getLocation_1",0,!1),(0,d.f)(u,"getCarInfo_0",0,!1),(0,d.f)(u,"getCarInfo_1",0,!1),(0,d.f)(u,"getMaterialSymbolsSearchIndex",0,!1),document.addEventListener(u,b),yield Promise.all([(0,o.a)(u,!0),(0,r.a)(u,1),(0,i.a)(u,!0),(0,s.a)(u)]),(0,d.a)(u),(0,d.b)(u)})).apply(this,arguments)}function g(){p.setAttribute("displayed","true")}function k(){p.setAttribute("displayed","false")}},6091(e,t,a){a.d(t,{a:()=>x,b:()=>C});var n=a(467),i=a(5314),r=a(3459),s=a(8179),o=a(8024),d=a(9915),c=a(4884),u=a(4537),l=a(904),p=a(3030),f=a(4690),m=(0,s.c)(".gd"),v=(0,s.e)(m,".ud"),b=(0,s.e)(v,".vd"),h=(0,s.e)(b,"._d"),y={},g=!1,k=!1,L=new d.a(function(){return _.apply(this,arguments)},15e3);function w(){var e=(0,s.a)();e.classList.add("ae");var t=(0,s.a)();t.classList.add("be");var a=(0,s.a)();a.classList.add("ce"),a.appendChild((0,u.a)());var n=(0,s.a)();n.classList.add("de");var i=(0,s.a)();i.classList.add("ee"),t.appendChild(a),t.appendChild(n),t.appendChild(i);var r=(0,s.a)();return r.classList.add("fe"),e.appendChild(t),e.appendChild(r),e}function A(e,t,a){function n(e,n,i){function r(e,t){var a=(0,s.e)(e,".be"),n=(0,s.e)(a,".ce"),i="";switch(t.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,u.c)(n,i)}function d(e,t){var a=(0,s.e)(e,".be"),n=(0,s.e)(a,".de"),i="";switch(t.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function l(e,t){var a=(0,s.e)(e,".be");(0,s.e)(a,".ee").innerText=t.time.relative}function m(e,t){(0,s.e)(e,".fe").innerText=t.name}function v(e,t){switch(t.type){case"route":e.onclick=function(){(0,f.d)(t.id,t.pid)};break;case"location":e.onclick=function(){(0,p.d)(t.hash)};break;case"bus":e.onclick=function(){(0,c.d)(t.id)};break;case"empty":e.onclick=null}}function b(e,t){e.setAttribute("animation",(0,o.a)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}if(null==i)r(e,n),d(e,n),l(e,n),m(e,n),v(e,n),b(e,a),h(e,t);else if(n.type!==i.type)r(e,n),d(e,n),l(e,n),m(e,n),v(e,n),b(e,a),h(e,t);else{switch(n.type){case"location":(0,o.b)(i.name,n.name)||m(e,n),i.time!==n.time&&l(e,n),(0,o.b)(i.hash,n.hash)||v(e,n);break;case"route":i.name!==n.name&&m(e,n),i.time!==n.time&&l(e,n),i.id===n.id&&(0,o.b)(i.pid,n.pid)||v(e,n);break;case"bus":i.name!==n.name&&m(e,n),i.time!==n.time&&l(e,n),i.id!==n.id&&v(e,n);break;case"empty":i.time!==n.time&&l(e,n)}g!==a&&b(e,a),k!==t&&h(e,t)}}var i=e.itemQuantity,r=Array.from((0,s.d)(h,".ae")),d=r.length;if(i!==d){var l=d-i;if(l<0){for(var m=new DocumentFragment,v=0;v>l;v--){var b=w();m.appendChild(b),r.push(b)}h.append(m)}else if(l>0)for(var L=d-1,A=d-l-1;L>A;L--)r[L].remove(),r.splice(L,1)}for(var C=0;C<i;C++){var _=r[C],x=e.items[C];if((0,o.f)(y,"items"))if(y.items[C])n(_,x,y.items[C]);else n(_,x,null);else n(_,x,null)}y=e,g=a,k=t}function C(){for(var e=(0,r.b)("playing_animation"),t=(0,l.d)("window"),a=Math.floor(t.height/70/3)+2,n=[],i=0;i<a;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});A({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function _(){return(_=(0,n.a)(function*(){try{var e=(0,r.b)("playing_animation"),t=(0,o.c)();return A(yield(0,i.c)(t),!1,e),15e3}catch(e){return 1e4}})).apply(this,arguments)}function x(){L.isPaused?L.resume(!0):L.tick()}},4294(e,t,a){a.d(t,{a:()=>S,b:()=>E,c:()=>x,d:()=>I,e:()=>P});var n,i=a(467),r=a(9218),s=a(6788),o=a(972),d=a(3459),c=a(8179),u=a(8024),l=a(4781),p=a(4537),f=a(904),m=(0,c.c)("._e"),v=(0,c.e)(m,".af"),b=(0,c.e)(v,"#search_material_symbols_input"),h=(0,c.e)(m,".df"),y=(0,c.e)(h,".ef"),g=[],k=[],L=!1,w=!1;function A(){var e=(0,c.a)();return e.classList.add("ff"),e.appendChild((0,p.a)()),e}function C(e,t,a,i){function r(e,r,s){function o(e,t){(0,p.c)(e,t)}function d(e,t,a){e.onclick=function(){!function(e,t){t.value=e,S()}(t,a)}}function c(e,t){e.setAttribute("skeleton-screen",(0,u.a)(t))}function l(e,t){e.setAttribute("animation",(0,u.a)(t))}null==s?(o(e,r),d(e,r,t),c(e,a),l(e,i)):(s!==r?(o(e,r),d(e,r,t)):n!==t&&d(e,r,t),w!==a&&c(e,a),L!==i&&l(e,i))}var s=e.length,o=Array.from((0,c.d)(y,".ff")),d=o.length;if(s!==d){var l=d-s;if(l<0){for(var f=new DocumentFragment,m=0;m>l;m--){var v=A();f.appendChild(v),o.push(v)}y.append(f)}else if(l>0)for(var b=d-1,h=d-l-1;b>h;b--)o[b].remove(),o.splice(b,1)}for(var g=0;g<s;g++){var C=k[g],_=e[g],x=o[g];r(x,_,C||null)}k=e.slice(),n=t,w=a,L=i}function _(){return(_=(0,i.a)(function*(e){var t=(0,d.b)("playing_animation"),a=(0,u.c)();b.value="",function(e){for(var t=(0,d.b)("playing_animation"),a=(0,f.d)("window"),n=Math.floor(a.width/50)*(Math.floor(a.height/50)+3),i=[],r=0;r<n;r++)i.push("");C(i,e,!0,t)}(e);var n=yield(0,r.a)(a);for(var i in g=[],n.symbols)g.push(i);C(g,e,!1,t),(0,o.a)(n),(0,s.a)(a)})).apply(this,arguments)}function x(){b.addEventListener("paste",function(){T()}),b.addEventListener("cut",function(){T()}),b.addEventListener("selectionchange",function(){T()}),document.addEventListener("selectionchange",function(){T()}),b.addEventListener("keyup",function(){T()})}function T(){var e=b.value;if(!(0,l.a)(e)){for(var t=(0,o.b)(e),a=t.length-1;a>=0;a--){var i=t[a].item,r=g.indexOf(i);if(g[a]&&!(r<0)){var s=[g[r],g[a]];g[a]=s[0],g[r]=s[1]}}C(g,n,!1,L)}}function P(){m.setAttribute("displayed","true")}function E(){m.setAttribute("displayed","false")}function I(e){(0,f.c)("IconSelector"),P(),function(e){_.apply(this,arguments)}(e),(0,f.b)()}function S(){E(),(0,f.h)(),(0,f.e)("IconSelector")}},4537(e,t,a){a.d(t,{a:()=>r,b:()=>i,c:()=>s});var n=a(8179);function i(e){var t=document.createElement("span");return t.classList.add("ma"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("ma"),e}function s(e,t){(0,n.e)(e,"span.ma").innerText=t}},6971(){},2547(){},6110(){},9080(){},8933(){},6561(){},7336(){},4953(){},5297(){},7499(){},9657(){},7114(){},6764(){}}]);
//# sourceMappingURL=fba2acc609847424d42e.js.map