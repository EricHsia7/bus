"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[474],{4690(t,e,a){a.d(e,{a:()=>vt,b:()=>Z,c:()=>ht});var s=a(467),i=a(5767),r=a(9566),d=a(3422),n=a(5314),o=a(7123),l=a(3459),p=a(8179),u=a(7968),c=a(8024),f=a(5579),h=a(4537),v=a(904),b=a(3030),A=a(9119),g=a(3041),m=a(752),y=a(5286),C=(0,p.c)(".jm"),L=(0,p.e)(C,".tm"),w=(0,p.e)(L,".wm"),x=(0,p.e)(w,"span"),T=(0,p.e)(L,".vm"),k=(0,p.e)(L,".bn .cn"),R=(0,p.e)(L,".xm"),_=(0,p.e)(R,".ym"),P=(0,p.e)(L,"._m"),$=(0,p.e)(P,".an"),S=(0,p.e)(C,".en"),D={},I=!1,E=!1,N=0,B=0,M=0,z={},F=0,j=!1,q=15e3,Q=5e3,H=15e3,U=!0,W=0,G=0,J="",K=!1,O=!1,V=!1,X=0,Y=[];function Z(){S.addEventListener("touchstart",function(){N=Math.round(S.scrollLeft/F)},{passive:!0}),S.addEventListener("scroll",function(t){j=!0;var e=t.target.scrollLeft/F;B=e>N?N+1:N-1;var a=e-N,s=Math.abs(a);s>1&&(a>0?(N=Math.floor(e),B=N+1):(N=Math.ceil(e),B=N-1),s=Math.abs(e-N));var i=z[`g_${N}`]||{width:0,offset:0},r=z[`g_${B}`]||{width:0,offset:0},d=i.width+(r.width-i.width)*s,n=-1*(i.offset+(r.offset-i.offset)*s)+.5*F-.5*d;tt(M,n,d-20,e)},{passive:!0}),S.addEventListener("scrollend",function(t){var e=t.target.scrollLeft/F;N=Math.round(e),j=!1},{passive:!0})}function tt(t,e,a,s){S.style.setProperty("--im",t.toString()),$.style.setProperty("--nm",a.toString()),_.style.setProperty("--om",`${e.toString()}px`),_.style.setProperty("--qm",s.toString())}function et(t){var e=t;if(K){var a=e.detail.progress-1;k.style.setProperty("--rm",a.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,et)}function at(){var t=(0,p.a)();t.classList.add("nn"),t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var e=(0,p.a)();e.classList.add("on");var a=(0,p.a)();a.classList.add("yn"),a.setAttribute("displayed","false"),e.appendChild(a);var s=(0,p.a)();s.classList.add("pn");var i=(0,p.a)();i.classList.add("tf"),i.setAttribute("code","0"),i.setAttribute("displayed","false"),s.appendChild(i);var r=(0,p.a)();return r.classList.add("uf"),r.setAttribute("code","0"),r.setAttribute("displayed","true"),s.appendChild(r),t.appendChild(e),t.appendChild(s),t}function st(t){var e=(0,p.a)();e.classList.add("jn"),e.setAttribute("stretched","false"),e.setAttribute("stretching","false"),e.setAttribute("push-direction","0"),e.setAttribute("push-state","0");var a=(0,p.a)();a.classList.add("kn");var s=(0,p.a)();s.classList.add("ln"),a.appendChild(s);var i=(0,p.a)();i.classList.add("mn");var r=(0,p.a)();r.classList.add("zn");var d=(0,p.a)();d.classList.add("tf"),d.setAttribute("code","0"),d.setAttribute("displayed","false"),r.appendChild(d);var n=(0,p.a)();n.classList.add("uf"),n.setAttribute("code","0"),n.setAttribute("displayed","true"),r.appendChild(n),i.appendChild(r);var o=(0,p.a)();o.classList.add("_n"),o.appendChild((0,h.b)("keyboard_arrow_down")),o.onclick=function(){!function(t,e){var a=(0,p.e)(t,".bo"),s=t.parentElement,i=e.parentElement,r=(0,p.f)(e,"nn"),d=(0,p.f)(t,"jn"),n=d.length,o=s.getBoundingClientRect(),l=t.getBoundingClientRect(),u=i.getBoundingClientRect(),c=e.getBoundingClientRect(),f=c.top-u.top,h=l.top-o.top,v="true"===t.getAttribute("stretched"),b="true"===t.getAttribute("animation");if(b){var A=v?"2":"1";e.setAttribute("stretching","true"),e.style.setProperty("--op",`${f}px`),t.setAttribute("stretching","true"),t.style.setProperty("--qp",`${h}px`);for(var g=0;g<n;g++){var m=d[g],y=r[g];y.style.setProperty("--rp",(-1*g-1).toString()),y.setAttribute("push-direction",A),y.setAttribute("push-state","1"),m.setAttribute("push-direction",A),m.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var a=0;a<n;a++){var s=d[a],i=r[a];i.setAttribute("push-direction","0"),i.setAttribute("push-state","0"),s.setAttribute("push-direction","0"),s.setAttribute("push-state","0")}e.setAttribute("stretching","false"),t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var t=0;t<n;t++){var e=d[t];r[t].setAttribute("push-state","2"),e.setAttribute("push-state","2")}},{once:!0})}v?(b?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"),e.setAttribute("stretched","true"))}(e,t)},i.appendChild(o);var l=(0,p.a)();l.classList.add("ao"),i.appendChild(l),a.appendChild(i);var u=(0,p.a)();u.classList.add("bo"),u.setAttribute("displayed","false");var c=(0,p.a)();c.classList.add("co");var f=(0,p.a)();f.classList.add("do"),f.setAttribute("highlighted","true"),f.setAttribute("type","tab"),f.setAttribute("code","0"),f.onclick=function(){At(e,0)};var v=(0,p.a)();v.classList.add("eo"),v.appendChild((0,h.b)("directions_bus")),f.appendChild(v),f.appendChild(document.createTextNode("公車")),c.appendChild(f);var b=(0,p.a)();b.classList.add("do"),b.setAttribute("highlighted","false"),b.setAttribute("type","tab"),b.setAttribute("code","1"),b.onclick=function(){At(e,1)};var A=(0,p.a)();A.classList.add("eo"),A.appendChild((0,h.b)("departure_board")),b.appendChild(A),b.appendChild(document.createTextNode("抵達時間")),c.appendChild(b);var g=(0,p.a)();g.classList.add("do"),g.setAttribute("highlighted","false"),g.setAttribute("type","tab"),g.setAttribute("code","2"),g.onclick=function(){At(e,2)};var m=(0,p.a)();m.classList.add("eo"),m.appendChild((0,h.b)("route")),g.appendChild(m),g.appendChild(document.createTextNode("路線")),c.appendChild(g);var y=(0,p.a)();y.classList.add("do"),y.setAttribute("highlighted","false"),y.setAttribute("type","tab"),y.setAttribute("code","3"),y.onclick=function(){At(e,3)};var C=(0,p.a)();C.classList.add("eo"),C.appendChild((0,h.b)("location_on")),y.appendChild(C),y.appendChild(document.createTextNode("地點")),c.appendChild(y);var L=(0,p.a)();L.classList.add("do"),L.setAttribute("highlighted","false"),L.setAttribute("type","save-to-folder");var w=(0,p.a)();w.classList.add("eo"),w.appendChild((0,h.b)("folder")),L.appendChild(w),L.appendChild(document.createTextNode("儲存")),c.appendChild(L);var x=(0,p.a)();x.classList.add("do"),x.setAttribute("highlighted","false"),x.setAttribute("type","schedule-notification"),x.setAttribute("enabled","true");var T=(0,p.a)();T.classList.add("eo"),T.appendChild((0,h.b)("notifications")),x.appendChild(T),x.appendChild(document.createTextNode("通知")),c.appendChild(x),u.appendChild(c);var k=(0,p.a)();k.classList.add("fo"),k.setAttribute("displayed","true"),u.appendChild(k);var R=(0,p.a)();R.classList.add("go"),R.setAttribute("displayed","false"),u.appendChild(R);var _=(0,p.a)();_.classList.add("ho"),_.setAttribute("displayed","false"),u.appendChild(_);var P=(0,p.a)();return P.classList.add("io"),P.setAttribute("displayed","false"),u.appendChild(P),e.appendChild(a),e.appendChild(u),e}function it(){var t=(0,p.a)();t.classList.add("fn");var e=(0,p.a)();e.classList.add("gn");var a=(0,p.a)();a.classList.add("hn");var s=(0,p.a)();s.classList.add("jo");var i=(0,p.a)();i.classList.add("in");var r=(0,p.a)();return r.classList.add("ko"),i.appendChild(r),a.appendChild(s),e.appendChild(a),e.appendChild(i),t.appendChild(e),t}function rt(){var t=(0,p.a)();t.classList.add("zm");var e=document.createElement("span");return t.appendChild(e),t}function dt(){var t=(0,p.a)();t.classList.add("lo"),t.setAttribute("on-this-route","false");var e=(0,p.a)();e.classList.add("mo");var a=(0,p.a)();a.classList.add("no"),a.appendChild((0,h.b)("directions_bus"));var s=(0,p.a)();s.classList.add("oo");var i=(0,p.a)();i.classList.add("po");var r=(0,p.a)();r.classList.add("qo");var d=(0,p.a)();d.classList.add("ro");var n=(0,p.a)();return n.classList.add("so"),e.appendChild(a),e.appendChild(s),t.appendChild(e),i.appendChild(r),i.appendChild(d),i.appendChild(n),t.appendChild(i),t}function nt(){var t=(0,p.a)();t.classList.add("to");var e=(0,p.a)();e.classList.add("uo");var a=(0,p.a)();a.classList.add("vo"),a.appendChild((0,h.b)("route"));var s=(0,p.a)();s.classList.add("wo");var i=(0,p.a)();i.classList.add("xo");var r=(0,p.a)();r.classList.add("yo");var d=(0,p.a)();d.classList.add("zo"),d.setAttribute("type","view-route"),d.innerText="查看路線";var n=(0,p.a)();return n.classList.add("zo"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存路線",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function ot(){var t=(0,p.a)();t.classList.add("_o");var e=(0,p.a)();e.classList.add("ap");var a=(0,p.a)();a.classList.add("bp"),a.appendChild((0,h.b)("calendar_view_day"));var s=(0,p.a)();s.classList.add("cp");var i=(0,p.a)();i.classList.add("dp");var r=(0,p.a)();return r.classList.add("ep"),e.appendChild(a),e.appendChild(s),e.appendChild(i),t.appendChild(e),t.appendChild(r),t}function lt(){var t=(0,p.a)();t.classList.add("fp");var e=(0,p.a)();e.classList.add("gp");var a=(0,p.a)();a.classList.add("hp"),a.appendChild((0,h.b)("location_on"));var s=(0,p.a)();s.classList.add("ip");var i=(0,p.a)();i.classList.add("jp");var r=(0,p.a)();r.classList.add("kp");var d=(0,p.a)();d.classList.add("lp"),d.setAttribute("type","view-location"),d.innerText="查看地點";var n=(0,p.a)();return n.classList.add("lp"),n.setAttribute("type","save-to-folder"),n.setAttribute("highlighted","false"),n.innerText="儲存地點",e.appendChild(a),e.appendChild(s),t.appendChild(e),t.appendChild(i),r.appendChild(d),r.appendChild(n),t.appendChild(r),t}function pt(t,e,a){var s,i;function n(e,a,s,i,n,o){function l(t,e,a,s,i){var r=(0,p.e)(e,".pn"),d=(0,p.e)(r,".uf"),n=(0,p.e)(r,".tf"),o=(0,p.e)(t,".zn"),l=(0,p.e)(o,".uf"),u=(0,p.e)(o,".tf");if(n.setAttribute("code",a.status.code.toString()),u.setAttribute("code",a.status.code.toString()),u.innerText=a.status.text,!s&&i){var c=t.getBoundingClientRect(),f=c.top,h=c.left,v=c.bottom,b=c.right,A=window.innerWidth,g=window.innerHeight;if(v>0&&f<g&&b>0&&h<A)return d.addEventListener("animationend",function(){d.setAttribute("code",a.status.code.toString()),d.classList.remove("wf"),n.setAttribute("displayed","false")},{once:!0}),l.addEventListener("animationend",function(){l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text,l.classList.remove("wf"),u.setAttribute("displayed","false")},{once:!0}),u.setAttribute("displayed","true"),n.setAttribute("displayed","true"),d.classList.add("wf"),void l.classList.add("wf")}d.setAttribute("code",a.status.code.toString()),l.setAttribute("code",a.status.code.toString()),l.innerText=a.status.text}function u(t,e,a){t.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer)),e.setAttribute("segment-buffer",(0,c.a)(a.segmentBuffer.isSegmentBuffer))}function h(t,e){(0,p.e)(t,".ln").innerText=e.name}function v(t,e){var a=(0,p.e)(t,".fo"),s=Array.from((0,p.d)(a,".lo")),i=s.length,r=e.buses.length,d=i-r;if(d<0){for(var n=new DocumentFragment,o=0;o>d;o--){var l=dt();n.appendChild(l),s.push(l)}a.append(n)}else if(d>0)for(var u=i-1,f=i-d-1;u>f;u--)s[u].remove(),s.splice(u,1);for(var h=0;h<r;h++){var v=e.buses[h],b=s[h],A=(0,p.e)(b,".mo"),g=(0,p.e)(A,".oo"),m=(0,p.e)(b,".po"),y=(0,p.e)(m,".qo"),C=(0,p.e)(m,".ro"),L=(0,p.e)(m,".so");b.setAttribute("on-this-route",(0,c.a)(v.onThisRoute)),g.innerText=v.carNumber,y.innerText=`路線：${v.RouteName}`,C.innerText=`狀態：${v.status.text}`,L.innerText=`類型：${v.type}`}a.setAttribute("empty",(0,c.a)(0===r))}function A(t,e){var a=(0,p.e)(t,".go"),s=Array.from((0,p.d)(a,".to")),i=s.length,d=e.overlappingRoutes.length,n=i-d;if(n<0){for(var o=new DocumentFragment,l=0;l>n;l--){var u=nt();o.appendChild(u),s.push(u)}a.append(o)}else if(n>0)for(var f=i-1,h=i-n-1;f>h;f--)s[f].remove(),s.splice(f,1);for(var v=0;v<d;v++){var b=e.overlappingRoutes[v],A=s[v],m=(0,p.e)(A,".uo"),y=(0,p.e)(m,".wo"),C=(0,p.e)(A,".xo"),L=(0,p.e)(A,".yo"),w=(0,p.e)(L,'.zo[type="view-route"]'),x=(0,p.e)(L,'.zo[type="save-to-folder"]');y.innerText=b.name,C.innerText=b.RouteEndPoints.text,function(t,e,a){t.onclick=function(){bt(e,a)}}(w,b.RouteID,b.PathAttributeId),function(t,e){t.onclick=function(){(0,g.b)("route",[e],t)},(0,r.e)("route",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(x,b.RouteID)}a.setAttribute("empty",(0,c.a)(0===d))}function y(t,e){var a=(0,p.e)(t,".ho"),s=Array.from((0,p.d)(a,"._o")),i=s.length,r=e.busArrivalTimes.length,d=i-r;if(d<0){for(var n=new DocumentFragment,o=0;o>d;o--){var l=ot();n.appendChild(l),s.push(l)}a.append(n)}else if(d>0)for(var u=i-1,h=i-d-1;u>h;u--)s[u].remove(),s.splice(u,1);for(var v=0;v<r;v++){var b=e.busArrivalTimes[v],A=s[v],g=(0,p.e)(A,".ap"),m=(0,p.e)(g,".cp"),y=(0,p.e)(g,".dp"),C=(0,p.e)(A,".ep");m.innerText=b.personalSchedule.name,y.innerText=`週${(0,f.g)(b.day).name} ${(0,f.i)(b.personalSchedule.period.start)} - ${(0,f.i)(b.personalSchedule.period.end)}`,C.innerHTML=b.chart}a.setAttribute("empty",(0,c.a)(0===r))}function C(t,e){var a=(0,p.e)(t,".io"),s=Array.from((0,p.d)(a,".fp")),i=s.length,d=e.nearbyLocations.length,n=i-d;if(n<0){for(var o=new DocumentFragment,l=0;l>n;l--){var u=lt();o.appendChild(u),s.push(u)}a.append(o)}else if(n>0)for(var f=i-1,h=i-n-1;f>h;f--)s[f].remove(),s.splice(f,1);for(var v=0;v<d;v++){var A=e.nearbyLocations[v],m=s[v],y=(0,p.e)(m,".gp"),C=(0,p.e)(y,".ip"),L=(0,p.e)(m,".jp"),w=(0,p.e)(m,".kp"),x=(0,p.e)(w,'.lp[type="view-location"]'),T=(0,p.e)(w,'.lp[type="save-to-folder"]');C.innerText=A.name,L.innerText=`${A.distance}公尺`,function(t,e){t.onclick=function(){(0,b.c)(e)}}(x,A.hash),function(t,e){t.onclick=function(){(0,g.b)("location",[e],t)},(0,r.e)("location",e).then(function(e){t.setAttribute("highlighted",(0,c.a)(e))})}(T,A.hash)}a.setAttribute("empty",(0,c.a)(0===d))}function L(t,e,a){t.setAttribute("nearest",(0,c.a)(a.nearest)),e.setAttribute("nearest",(0,c.a)(a.nearest))}function w(t,e,a,s,i){var r=(null==a?void 0:a.progress)||0,d=(null==e?void 0:e.progress)||0,n=(0,p.e)(t,".on .yn");if(!s&&i&&0!==r&&0===d&&Math.abs(d-r)>0)return n.style.setProperty("--mp","100%"),void n.addEventListener("transitionend",function(){n.setAttribute("displayed","false"),n.style.setProperty("--mp","-100%")},{once:!0});d>0?(n.setAttribute("displayed","true"),n.style.setProperty("--mp",100*(d-1)+"%")):n.setAttribute("displayed","false")}function x(t,e,a){a&&((0,p.e)(t,".bo").setAttribute("displayed","false"),t.setAttribute("stretched","false"),e.setAttribute("stretched","false"))}function T(t,e,a){t.setAttribute("animation",(0,c.a)(a)),e.setAttribute("animation",(0,c.a)(a))}function k(t,e,a){t.setAttribute("skeleton-screen",(0,c.a)(a)),e.setAttribute("skeleton-screen",(0,c.a)(a))}function R(e,a){var s=(0,p.e)(e,'.bo .co .do[type="save-to-folder"]');s.onclick=function(){(0,g.b)("stop",[a.id,t.RouteID],s)},(0,r.e)("stop",a.id).then(function(t){s.setAttribute("highlighted",(0,c.a)(t))})}function _(e,a){var s=(0,p.e)(e,'.bo .co .do[type="schedule-notification"]');s.onclick=function(){(0,m.b)(s,a.id,t.RouteID,a.status.time)};var i=(0,d.r)(a.id);s.setAttribute("highlighted",(0,c.a)(i))}null===i?(l(e,a,s,n,o),h(e,s),v(e,s),A(e,s),y(e,s),C(e,s),u(e,a,s),L(e,a,s),w(a,s,i,n,o),x(e,a,n),T(e,a,o),k(e,a,n),R(e,s),_(e,s)):(s.status.time!==i.status.time&&(l(e,a,s,n,o),_(e,s)),(0,c.b)(i.buses,s.buses)||v(e,s),(0,c.b)(i.busArrivalTimes,s.busArrivalTimes)||y(e,s),i.nearest!==s.nearest&&L(e,a,s),i.progress!==s.progress&&w(a,s,i,n,o),i.id!==s.id&&(h(e,s),u(e,a,s),A(e,s),C(e,s),R(e,s),_(e,s)),I!==o&&T(e,a,o),E!==n&&(x(e,a,n),k(e,a,n)))}var o=(0,v.e)("window"),l=o.width,h=o.height,A=t.groupQuantity,C=t.itemQuantity,L=t.groupedItems,k=t.groupNames;M=A,F=l;for(var $=0,B=0;B<A;B++){var q=`g_${B}`,Q=(0,u.d)(k[B],500,"17px",'"Noto Sans TC", sans-serif')+20;z[q]={width:Q,offset:$},$+=Q}if(z[`g_${A}`]={width:0,offset:$},!j){var H=z[`g_${N}`],U=-1*H.offset+.5*F-.5*H.width,W=H.width-20;tt(M,U,W,N)}E!==e&&(w.setAttribute("skeleton-screen",(0,c.a)(e)),R.setAttribute("skeleton-screen",(0,c.a)(e)),P.setAttribute("skeleton-screen",(0,c.a)(e))),I!==a&&(w.setAttribute("animation",(0,c.a)(a)),R.setAttribute("animation",(0,c.a)(a)),P.setAttribute("animation",(0,c.a)(a))),(null===(s=D)||void 0===s?void 0:s.RouteID)!==t.RouteID&&(T.onclick=function(){(0,y.f)(t.RouteID,t.PathAttributeId)}),(null===(i=D)||void 0===i?void 0:i.RouteName)!==t.RouteName&&(x.innerText=t.RouteName);var G=Array.from((0,p.d)(S,".fn")),J=Array.from((0,p.d)(_,".zm")),K=G.length;if(A!==K){var O=K-A;if(O<0){for(var V=new DocumentFragment,X=new DocumentFragment,Y=0;Y>O;Y--){var Z=it();V.appendChild(Z),G.push(Z);var et=rt();X.appendChild(et),J.push(et)}S.append(V),_.append(X)}else if(O>0)for(var pt=K-1,ut=K-O-1;pt>ut;pt--)G[pt].remove(),G.splice(pt,1),J[pt].remove(),J.splice(pt,1)}for(var ct=0;ct<A;ct++){var ft=`g_${ct}`,ht=G[ct],vt=(0,p.e)(ht,".in"),At=(0,p.e)(ht,".hn"),gt=Array.from((0,p.d)(vt,".jn")),mt=Array.from((0,p.d)(At,".nn")),yt=gt.length;if(C[ft]!==yt){var Ct=yt-C[ft];if(Ct<0){for(var Lt=new DocumentFragment,wt=new DocumentFragment,xt=0;xt>Ct;xt--){var Tt=at(),kt=st(Tt);Lt.appendChild(kt),gt.push(kt),wt.appendChild(Tt),mt.push(Tt)}vt.append(Lt),At.append(wt)}else if(Ct>0)for(var Rt=yt-1,_t=yt-Ct-1;Rt>_t;Rt--)gt[Rt].remove(),gt.splice(Rt,1),mt[Rt].remove(),mt.splice(Rt,1)}var Pt=J[ct];(0,p.e)(Pt,"span").innerText=k[ct],Pt.style.setProperty("--km",`${z[ft].offset}px`),Pt.style.setProperty("--lm",`${z[ft].width}px`),Pt.style.setProperty("--mm",ct.toString()),e&&(ht.scrollTop=0);for(var $t=0;$t<C[ft];$t++){var St=gt[$t],Dt=mt[$t],It=L[ft][$t];if((0,c.e)(D,"groupedItems"))if((0,c.e)(D.groupedItems,ft))if(D.groupedItems[ft][$t])n(St,Dt,It,D.groupedItems[ft][$t],e,a);else n(St,Dt,It,null,e,a);else n(St,Dt,It,null,e,a);else n(St,Dt,It,null,e,a)}}_.style.setProperty("--pm",`${$}px`),D=t,I=a,E=e}function ut(){return ct.apply(this,arguments)}function ct(){return(ct=(0,s.a)(function*(){var t=(0,l.b)("playing_animation"),e=(0,l.b)("refresh_interval"),a=(0,v.e)("route-bus-arrival-time-chart");U=e.dynamic,q=e.baseInterval,K=!0,J=(0,c.c)(),k.setAttribute("refreshing","true"),k.classList.remove("dn"),document.addEventListener(J,et);var s=yield(0,o.a)(X,Y,a.width,a.height,J);pt(s,!1,t);var r=0;U&&(r=yield(0,i.c)()),W=(new Date).getTime(),G=U?Math.max(W+Q,s.dataUpdateTime+q/r):W+q,H=Math.max(Q,G-W),K=!1,k.setAttribute("refreshing","false"),k.style.setProperty("--sm",`${H}ms`),k.classList.add("dn")})).apply(this,arguments)}function ft(){ut().then(function(){O?setTimeout(function(){ft()},Math.max(Q,G-(new Date).getTime())):V=!1}).catch(function(t){O?((0,A.a)("error","路線網路連線中斷，將在10秒後重試。"),setTimeout(function(){ft()},1e4)):V=!1})}function ht(t,e){(0,v.d)("Route"),(0,n.e)("route",t),X=t,Y=e,N=0,z={},C.setAttribute("displayed","true"),S.scrollLeft=0,S.focus(),function(t,e){for(var a=(0,l.b)("playing_animation"),s=(0,v.e)("window"),i=(s.width,s.height),r=Math.floor(i/50)+5,d={},n=0;n<2;n++){var o=`g_${n}`;d[o]=[];for(var p=0;p<r;p++)d[o].push({name:"",goBack:"0",status:{code:8,text:"",time:-6},buses:[],overlappingRoutes:[],busArrivalTimes:[],nearbyLocations:[],sequence:p,position:{longitude:0,latitude:0},nearest:!1,progress:0,segmentBuffer:{isSegmentBuffer:!1,isStartingPoint:!1,isEndingPoint:!1},id:0})}pt({groupNames:["往載入中","往載入中"],groupedItems:d,groupQuantity:2,itemQuantity:{g_0:r,g_1:r},RouteName:"載入中",RouteEndPoints:["載入中","載入中"],RouteID:t,PathAttributeId:e,dataUpdateTime:0},!0,a)}(t,e),O||(O=!0,V?ut():(V=!0,ft())),(0,v.a)()}function vt(){C.setAttribute("displayed","false"),O=!1,(0,v.c)()}function bt(t,e){O=!1,ht(t,e)}function At(t,e){var a=(0,p.e)(t,".co"),s=(0,p.d)(a,'.do[highlighted="true"][type="tab"]');for(var i of s)i.setAttribute("highlighted","false");switch((0,p.e)(a,`.do[code="${e}"]`).setAttribute("highlighted","true"),e){case 0:(0,p.e)(t,".fo").setAttribute("displayed","true"),(0,p.e)(t,".ho").setAttribute("displayed","false"),(0,p.e)(t,".go").setAttribute("displayed","false"),(0,p.e)(t,".io").setAttribute("displayed","false");break;case 1:(0,p.e)(t,".fo").setAttribute("displayed","false"),(0,p.e)(t,".ho").setAttribute("displayed","true"),(0,p.e)(t,".go").setAttribute("displayed","false"),(0,p.e)(t,".io").setAttribute("displayed","false");break;case 2:(0,p.e)(t,".fo").setAttribute("displayed","false"),(0,p.e)(t,".ho").setAttribute("displayed","false"),(0,p.e)(t,".go").setAttribute("displayed","true"),(0,p.e)(t,".io").setAttribute("displayed","false");break;case 3:(0,p.e)(t,".fo").setAttribute("displayed","false"),(0,p.e)(t,".ho").setAttribute("displayed","false"),(0,p.e)(t,".go").setAttribute("displayed","false"),(0,p.e)(t,".io").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=7a026290d0.js.map