"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[638],{904(e,a,t){t.d(a,{a:()=>y,b:()=>T,c:()=>w,d:()=>k,e:()=>L,f:()=>g,g:()=>D,h:()=>S,i:()=>C});var n=t(8179),i=t(8024),c=t(4884),r=t(6052),s=t(9333),o=t(8379),d=t(5693),l=t(7891),u=t(7908),f=t(5009),p=t(6104),b=(0,n.c)(".g"),h=(0,n.c)(".l"),m=(new Date).getTime(),v=["Home"];function k(e){var a=v.length;v[a-1]!==e&&v.push(e)}function g(e){if(v.indexOf(e)>-1){var a=v.length;v[a-1]===e&&v.pop()}}function y(){var e=v.length;if(e>1)switch(v[e-2]){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,r.a)();break;case"FolderEditor":(0,s.a)();break;case"FolderManager":(0,o.a)();break;case"Search":(0,f.a)();break;case"Settings":(0,p.a)();break;case"PersonalScheduleManager":(0,l.a)();break;case"PersonalScheduleEditor":(0,d.a)();break;case"Bus":(0,c.b)();break;case"RegisterNotification":(0,u.a)()}}function w(){var e=v.length;if(e>1){var a=v[e-2];switch(v.pop(),a){case"Home":case"IconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,r.c)();break;case"FolderEditor":(0,s.b)();break;case"FolderManager":(0,o.b)();break;case"Search":(0,f.c)();break;case"Settings":(0,p.d)();break;case"PersonalScheduleManager":(0,l.b)();break;case"PersonalScheduleEditor":(0,d.b)();break;case"Bus":(0,c.c)();break;case"RegisterNotification":(0,u.b)()}}}function S(){var e=0;(0,i.f)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.c)(".g svg.h").style.setProperty("--i",`${e}px`)}function T(e){function a(){b.classList.add("j"),b.addEventListener("animationend",function(){b.setAttribute("displayed","false"),b.classList.remove("j"),"function"==typeof e&&e()},{once:!0})}var t=(new Date).getTime();t-m<100?setTimeout(a,Math.max(1,t-m)):a()}function C(){h.setAttribute("displayed","true")}function L(e){var a=0,t=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":a=n,t=i;break;case"head":a=n,t=55;break;case"head-one-button":a=n-55,t=55;break;case"head-two-button":a=n-110,t=55;break;case"route-details-canvas":a=n-20-20,t=1680;break;case"route-bus-arrival-time-chart":a=n-45-15-20,t=75;break;case"location-bus-arrival-time-chart":a=n-30-20,t=75;break;default:a=0,t=0}return{width:a,height:t}}function D(){window.scrollTo({top:0,behavior:"instant"})}},4294(e,a,t){t.d(a,{a:()=>S,b:()=>w,c:()=>y});var n=t(467),i=t(9218),c=t(6788),r=t(972),s=t(8179),o=t(8024),d=t(4781),l=t(6082),u=t(4537),f=t(904),p=t(9119),b="",h=(0,s.c)(".jd"),m=(0,s.c)(".kd"),v=(0,s.c)(".xb");function k(e){var a=(0,s.a)();return a.classList.add("dc"),a.onclick=function(){!function(e){var a;switch(b){case"editor":a=(0,s.e)(h,'.ld .md .nd[group="folder-icon"] .od .pd input');break;case"creator":a=(0,s.e)(m,'.qd .rd .sd[group="folder-icon"] .td .ud input')}a.value=e,S()}(e)},a.appendChild((0,u.b)(e)),a}function g(){return(g=(0,n.a)(function*(){var e=(0,s.e)(v,".ac .bc");e.innerHTML="";var a=(0,o.c)(),t=yield(0,i.a)(a);(0,c.a)(a);var n=new DocumentFragment,r=t.dictionary.split(",");for(var d in t.symbols){for(var l=d.split("_"),u=l.length-1;u>=0;u--)l.splice(u,1,r[parseInt(l[u])]);var f=k(l.join("_"));n.appendChild(f)}e.append(n)})).apply(this,arguments)}function y(e){var a=(0,s.e)(v,".ac .cc"),t=(0,s.e)(v,".ac .bc");if(!(0,d.a)(e)){var n=(0,r.b)(e),i=new DocumentFragment;for(var c of n){var o=k(c.item);i.appendChild(o)}a.innerHTML="",a.append(i),a.setAttribute("displayed",n.length>0?"true":"false"),t.setAttribute("displayed",n.length>0?"false":"true")}}function w(e){switch((0,f.d)("IconSelector"),e){case"editor":b="editor",(0,s.e)(h,'.ld .md .nd[group="folder-icon"] .od .pd .vd');break;case"creator":b="creator",(0,s.e)(m,'.qd .rd .sd[group="folder-icon"] .td .ud .wd')}l.a?(v.setAttribute("displayed","true"),function(){g.apply(this,arguments)}(b),(0,r.a)()):(0,p.a)("download_for_offline","資料還在下載中")}function S(){(0,f.f)("IconSelector"),v.setAttribute("displayed","false")}},4537(e,a,t){t.d(a,{a:()=>c,b:()=>i,c:()=>r});var n=t(8179);function i(e){var a=document.createElement("span");return a.classList.add("r"),a.innerText=e,a}function c(){var e=document.createElement("span");return e.classList.add("r"),e}function r(e,a){(0,n.e)(e,"span.r").innerText=a}},4953(){},5259(){},5297(){},6091(e,a,t){t.d(a,{a:()=>I,b:()=>A});var n=t(467),i=t(5767),c=t(5314),r=t(3459),s=t(8179),o=t(8024),d=t(4884),l=t(4537),u=t(904),f=t(3030),p=t(4690),b=(0,s.c)(".s"),h=(0,s.e)(b,".ia"),m=(0,s.e)(h,".ja"),v=(0,s.e)(m,".oa"),k={},g=!1,y=!1,w=15e3,S=5e3,T=!0,C=!1,L=0,D=0,M="",x=!1;function F(){var e=(0,s.a)();e.classList.add("wa");var a=(0,s.a)();a.classList.add("ya");var t=(0,s.a)();t.classList.add("za"),t.appendChild((0,l.a)());var n=(0,s.a)();n.classList.add("_a");var i=(0,s.a)();i.classList.add("ab"),a.appendChild(t),a.appendChild(n),a.appendChild(i);var c=(0,s.a)();return c.classList.add("bb"),e.appendChild(a),e.appendChild(c),e}function _(e,a,t){function n(e,n,i){function c(e,a){var t=(0,s.e)(e,".ya"),n=(0,s.e)(t,".za"),i="";switch(a.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,l.c)(n,i)}function r(e,a){var t=(0,s.e)(e,".ya"),n=(0,s.e)(t,"._a"),i="";switch(a.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function u(e,a){var t=(0,s.e)(e,".ya");(0,s.e)(t,".ab").innerText=a.time.relative}function b(e,a){(0,s.e)(e,".bb").innerText=a.name}function h(e,a){switch(a.type){case"route":e.onclick=function(){(0,p.c)(a.id,a.pid)};break;case"location":e.onclick=function(){(0,f.c)(a.hash)};break;case"bus":e.onclick=function(){(0,d.c)(a.id)};break;case"empty":e.onclick=null}}function m(e,a){e.setAttribute("animation",(0,o.a)(a))}function v(e,a){e.setAttribute("skeleton-screen",(0,o.a)(a))}if(null==i)c(e,n),r(e,n),u(e,n),b(e,n),h(e,n),m(e,t),v(e,a);else if(n.type!==i.type)c(e,n),r(e,n),u(e,n),b(e,n),h(e,n),m(e,t),v(e,a);else{switch(n.type){case"location":(0,o.b)(i.name,n.name)||b(e,n),i.time!==n.time&&u(e,n),(0,o.b)(i.hash,n.hash)||h(e,n);break;case"route":i.name!==n.name&&b(e,n),i.time!==n.time&&u(e,n),i.id===n.id&&(0,o.b)(i.pid,n.pid)||h(e,n);break;case"bus":i.name!==n.name&&b(e,n),i.time!==n.time&&u(e,n),i.id!==n.id&&h(e,n);break;case"empty":i.time!==n.time&&u(e,n)}g!==t&&m(e,t),y!==a&&v(e,a)}}var i=e.itemQuantity,c=Array.from((0,s.d)(v,".wa")),r=c.length;if(i!==r){var u=r-i;if(u<0){for(var b=new DocumentFragment,h=0;h>u;h--){var m=F();b.appendChild(m),c.push(m)}v.append(b)}else if(u>0)for(var w=r-1,S=r-u-1;w>S;w--)c[w].remove(),c.splice(w,1)}for(var T=0;T<i;T++){var C=c[T],L=e.items[T];if((0,o.e)(k,"items"))if(k.items[T])n(C,L,k.items[T]);else n(C,L,null);else n(C,L,null)}k=e,g=t,y=a}function A(){for(var e=(0,r.b)("playing_animation"),a=(0,u.e)("window"),t=Math.floor(a.height/70/3)+2,n=[],i=0;i<t;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});_({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function H(){return R.apply(this,arguments)}function R(){return(R=(0,n.a)(function*(){var e=(0,r.b)("playing_animation"),a=(0,r.b)("refresh_interval");T=a.dynamic,w=a.baseInterval,M=(0,o.c)();var t=yield(0,c.c)(M);_(t,!1,e);var n=0;T&&(n=yield(0,i.c)()),L=(new Date).getTime(),D=T?Math.max(L+S,t.dataUpdateTime+w/n):L+w,Math.max(S,D-L)})).apply(this,arguments)}function E(){return P.apply(this,arguments)}function P(){return(P=(0,n.a)(function*(){H().then(function(){C?setTimeout(function(){E()},Math.max(S,D-(new Date).getTime())):x=!1}).catch(function(e){C?setTimeout(function(){E()},1e4):x=!1})})).apply(this,arguments)}function I(){A(),C||(C=!0,x?H():(x=!0,E()))}},6561(){},6764(){},7114(){},7336(){},7499(){}}]);
//# sourceMappingURL=77f7e62d8093a6a4999f.js.map