!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():r.bus=e()}(self,()=>(()=>{"use strict";var r,e,n={3327(r,e,n){var t=n(2284),u=n(3503);n(4462).sha512;function o(r,e){return null!=r&&"object"===(0,t.a)(r)&&!Array.isArray(r)&&Object.prototype.hasOwnProperty.call(r,e)}function i(r){var e=[{suffixes:"市",key:"city",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"區",key:"district",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"鄉鎮村里",key:"area",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{suffixes:"路街道",key:"road",process:function(r){return null===r?null:r.map(function(r){return r.replaceAll(/[\(\)（）]/gim,"").trim()})},type:0},{suffixes:"段",key:"road_section",process:function(r){for(var e=function(r){switch(r){case"一":return 1;case"二":return 2;case"三":return 3;case"四":return 4;case"五":return 5;case"六":return 6;case"七":return 7;case"八":return 8;case"九":return 9;case"十":return 10}return isNaN(parseInt(r))?0:parseInt(r)},n=String(r).length,t=[],u=0;u<n;u++){var o=e(String(r).charAt(u));10===o?t.length>0&&(t=[10*t.reduce(function(r,e){return r+e},0)]):t=[t.reduce(function(r,e){return r+e},0)+o]}return t},type:0},{suffixes:"巷",key:"alley",process:function(r){return null===r?null:r.map(function(r){return parseInt(r.trim().replaceAll(/[巷]/gim))})},type:0},{suffixes:"弄",key:"alley_branch",process:function(r){return null===r?null:r.map(function(r){return parseInt(r.trim().replaceAll(/[弄]/gim))})},type:0},{suffixes:"號",key:"doorplate",process:function(r){var e,n=String(r).match(/[0-9]+/gim);return n=(null===(e=n)||void 0===e?void 0:e.map(function(r){return null===r?null:parseInt(r)}))||null},type:0},{suffixes:"樓",key:"floornumber",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:0},{key:"exit",process:function(r){return null===r?null:r.map(function(r){return r.trim()})},type:2},{key:"direction",process:function(r){return null===r?null:r.map(function(r){return r.trim().replace(/[往向]/gim,"")})},type:1}];function n(r){function n(r,e){return 0===e?new RegExp(`([^市區鄉鎮村里路段街道巷弄號樓與]+[${r}])`,"gmi"):1===e?new RegExp("([往向]+[東南西北])","gmi"):2===e?new RegExp("([0-9]+[號]出口)","gmi"):void 0}var t={};for(var u of e){var o,i=n(null===(o=u)||void 0===o?void 0:o.suffixes,u.type);t[u.key]=u.process(String(r).match(i))}return t}return function(r){var t={};for(var u of r){var i=n(u);for(var s of e)o(t,s.key)||(t[s.key]=[]),t[s.key]=t[s.key].concat(i[s.key])}for(var a in t)t[a]=Array.from(new Set(t[a])).filter(function(r){return!!r}).sort(function(r,e){return"number"==typeof r&&"number"==typeof e?r-e:String(r).charCodeAt(0)-String(e).charCodeAt(0)});return t}(r)}self.onmessage=function(r){var e=function(r){var e={};for(var n in r){var t=u(String(r[n].n).trim().replaceAll(/[\(（）\)\:：\~～]*/gim,"")),s=`ml_${t}`;o(e,s)?(e[s].lo.push(r[n].lo),e[s].la.push(r[n].la),e[s].g.indexOf(r[n].g)<0&&e[s].g.push(r[n].g),e[s].r.push(r[n].r),e[s].s.push(r[n].s),e[s].v.push(r[n].v),e[s].a.push(i(r[n].a)),e[s].id.push(r[n].id)):e[s]={n:r[n].n,lo:[r[n].lo],la:[r[n].la],g:[r[n].g],r:[r[n].r],s:[r[n].s],v:[r[n].v],a:[i(r[n].a)],id:[r[n].id],hash:t}}return e}(r.data);self.postMessage(e)}}},t={};function u(r){var e=t[r];if(void 0!==e)return e.exports;var o=t[r]={exports:{}};return n[r](o,o.exports,u),o.exports}u.m=n,u.x=()=>{var r=u.O(void 0,[35],()=>u(3327));return r=u.O(r)},u.amdO={},r=[],u.O=(e,n,t,o)=>{if(!n){var i=1/0;for(l=0;l<r.length;l++){for(var[n,t,o]=r[l],s=!0,a=0;a<n.length;a++)(!1&o||i>=o)&&Object.keys(u.O).every(r=>u.O[r](n[a]))?n.splice(a--,1):(s=!1,o<i&&(i=o));if(s){r.splice(l--,1);var f=t();void 0!==f&&(e=f)}}return e}o=o||0;for(var l=r.length;l>0&&r[l-1][2]>o;l--)r[l]=r[l-1];r[l]=[n,t,o]},u.d=(r,e)=>{for(var n in e)u.o(e,n)&&!u.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},u.f={},u.e=r=>Promise.all(Object.keys(u.f).reduce((e,n)=>(u.f[n](r,e),e),[])),u.u=r=>"43c3f1d376.js",u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),u.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),u.p="./",(()=>{var r={327:1};u.f.i=(e,n)=>{r[e]||importScripts(u.p+u.u(e))};var e=self.webpackChunkbus=self.webpackChunkbus||[],n=e.push.bind(e);e.push=e=>{var[t,o,i]=e;for(var s in o)u.o(o,s)&&(u.m[s]=o[s]);for(i&&i(u);t.length;)r[t.pop()]=1;n(e)}})(),e=u.x,u.x=()=>u.e(35).then(e);var o=u.x();return o=o.default})());
//# sourceMappingURL=327.5da2443f1b.js.map