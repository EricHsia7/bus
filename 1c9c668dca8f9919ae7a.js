"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[838],{752(t,e,n){n.d(e,{Ho:()=>p,b$:()=>h});var r=n(3422),a=n(8179),i=n(4537),o=n(904),u=n(9119);function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var d=(0,a.bv)(".nd"),s=(0,a.aI)(d,".od"),f=(0,a.aI)(s,".pd");function v(t,e,n,a,o){var c=document.createElement("div");c.classList.add("qd");var l=document.createElement("div");l.classList.add("rd");var d=document.createElement("span");d.appendChild((0,i.YC)(t.icon)),l.appendChild(d);var s=document.createElement("div");s.classList.add("sd"),s.innerText=t.name;var f=t.index;return c.onclick=function(){!function(t,e,n,a,i){(0,u.a)("manufacturing","處理中"),t.setAttribute("enabled","false"),h(),(0,r.mD)(e,n,a,i).then(function(e){switch(e){case 0:(0,u.a)("error","設定失敗"),t.setAttribute("enabled","true");break;case 1:(0,u.a)("check_circle","設定成功"),t.setAttribute("enabled","true"),t.setAttribute("highlighted","true");break;case 2:(0,u.a)("warning","在設定中註冊後才可設定到站通知"),t.setAttribute("enabled","true")}})}(e,n,a,o,f)},c.appendChild(l),c.appendChild(s),c}function p(t,e,n,a){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(t,e,n,a){f.innerHTML="";var i,o=new DocumentFragment,u=c(r.FX);try{for(u.s();!(i=u.n()).done;){var l=v(i.value,t,e,n,a);o.appendChild(l)}}catch(t){u.e(t)}finally{u.f()}f.append(o)}(t,e,n,a)}function h(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},1078(){},1102(){},1306(){},1308(){},1511(){},1603(){},1743(){},2421(){},2696(){},3041(t,e,n){n.d(e,{B:()=>g,n:()=>m});var r=n(9566),a=n(8179),i=n(8024),o=n(4537),u=n(904),c=n(9119);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s=(0,a.bv)(".td"),f=(0,a.aI)(s,".ud"),v=(0,a.aI)(f,".vd"),p="已儲存至資料夾",h="無法儲存";function y(t,e,n,a){var u=document.createElement("div");u.classList.add("wd");var l=document.createElement("div");l.classList.add("xd");var d=document.createElement("span");d.appendChild((0,o.YC)(t.icon)),l.appendChild(d);var s=document.createElement("div");switch(s.classList.add("yd"),s.innerText=t.name,u.appendChild(l),u.appendChild(s),e){case"stop":u.onclick=function(){(0,r.aq)(t.id,n[0],n[1]).then(function(t){t?(0,r.LH)("stop",n[0]).then(function(t){t&&(null!=a&&a.setAttribute("highlighted",(0,i.xZ)(t)),(0,c.a)("folder",p),m())}):(0,c.a)("warning",h)})};break;case"route":u.onclick=function(){(0,r.Fq)(t.id,n[0]).then(function(t){t?(0,r.LH)("route",n[0]).then(function(t){t&&(null!=a&&a.setAttribute("highlighted",(0,i.xZ)(t)),(0,c.a)("folder",p),m())}):(0,c.a)("warning",h)})};break;case"location":u.onclick=function(){(0,r.DW)(t.id,n[0]).then(function(t){t?(0,r.LH)("location",n[0]).then(function(t){t&&(null!=a&&a.setAttribute("highlighted",(0,i.xZ)(t)),(0,c.a)("folder",p),m())}):(0,c.a)("warning",h)})}}return u}function g(t,e,n){(0,u.WR)("SaveToFolder"),s.setAttribute("displayed","true"),function(t,e,n){var a=(0,r.uT)();v.innerHTML="";var i,o=new DocumentFragment,u=l(a);try{for(u.s();!(i=u.n()).done;){var c=y(i.value,t,e,n);o.appendChild(c)}}catch(t){u.e(t)}finally{u.f()}v.append(o)}(t,e,n)}function m(){(0,u.kr)("SaveToFolder"),s.setAttribute("displayed","false")}},3058(){},3127(){},3534(){},3749(){},3777(){},4305(){},5228(){},5286(t,e,n){n.d(e,{kP:()=>G,zk:()=>q,VY:()=>U,b7:()=>Q,GZ:()=>V,GS:()=>X});var r=n(467),a=n(9566),i=n(8621),o=n(3459),u=n(8179),c=n(8024),l=n(904),d=n(3041),s=n(8134),f=n(9469),v=n(9119),p=n(8279);function h(){return(h=(0,r.A)(function*(t){var e=yield(0,s.Rk)(t);if(!1!==e){var n=(0,f.i)(0,{id:t,name:e.n});navigator.share&&navigator.share({title:e.n,url:n}).then(function(){(0,v.a)("check_circle","已分享路線")}).catch(function(t){(0,v.a)("cancel","已取消分享")})}})).apply(this,arguments)}function y(){return(y=(0,r.A)(function*(t){var e=yield(0,s.Rk)(t);if(!1!==e){var n=(0,f.i)(0,{id:t,name:e.n});(0,p.X8)(n)}})).apply(this,arguments)}var g=n(7968),m=n(6141);function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return A(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var w='"Noto Sans TC", sans-serif',_=Math.min(window.devicePixelRatio,1.875)||1,x={};function C(){var t=document.createElement("div");return t.classList.add("zd"),t}function k(){var t=document.createElement("div");t.classList.add("_d");var e=document.createElement("canvas");return e.classList.add("ae"),t.appendChild(e),t}function S(t,e,n,r,a,i){t.innerText=e.name,t.setAttribute("day",i.toString()),t.onclick=function(){!function(t){for(var e=(0,o.Js)("playing_animation"),n=(0,u.jg)(G,".zd"),r=(0,u.jg)(q,"._d"),a=0;a<7;a++){var i,c,l=n[a],d=r[a],s=`d_${a}`,f=null===(i=x)||void 0===i?void 0:i.calendarEventGroups[s],v=null===(c=x)||void 0===c?void 0:c.calendarDays[s];if(f&&v){var p=(0,m.t)("--c"),h=(0,m.t)("--d"),y=(0,m.t)("--e"),g=(0,m.t)("--nc"),b=(0,m.t)("--b"),A=(0,m.t)("--ra");S(l,v,t,!1,e,a),E(d,f,t,b,p,h,y,g,A,a)}}}(i)},t.setAttribute("highlighted",n===i?"true":"false"),t.setAttribute("animation",(0,c.xZ)(a)),t.setAttribute("skeleton-screen",(0,c.xZ)(r))}function E(t,e,n,r,a,i,o,d,s,f){function v(t,e,n){var r=70*e;t.fillStyle=n,t.fillRect(45,r+5,(0,l.YC)("route_details_canvas")[0]-45,1.2),t.font=`400 12px ${w}`,t.textBaseline="top";var a=`${String(e).padStart(2,"0")}:00`,i=t.measureText(a),o=i.width,u=i.actualBoundingBoxDescent;t.fillText(a,(45-o)/2,r+(10-u)/2,o)}function p(t,e,n,r,a,i,o){var u=new Date;u.setDate(1),u.setMonth(0),u.setFullYear(e.date.getFullYear()),u.setMonth(e.date.getMonth()),u.setDate(e.date.getDate()),u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);var c=(e.date.getTime()-u.getTime())/864e5*24*70,d=(0,l.YC)("route_details_canvas")[0]-45,s=60*e.duration*1e3/864e5*24*70;(0,g.wg)(t,45,c,d,s,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,g.wg)(t,45,c,3,s,{tl:3,tr:0,bl:3,br:0},n),t.font=`400 14px ${w}`,t.textBaseline="top",t.fillStyle=n;var f=e.dateString,v=t.measureText(f),p=v.width,h=v.actualBoundingBoxDescent;t.fillText(f,53,c+(s-h)/2,p)}var h=(0,u.aI)(t,".ae"),y=h.getContext("2d");if(function(t,e,n){var r=e===n;t.setAttribute("displayed",(0,c.xZ)(r))}(t,n,f),function(t){_=Math.min(window.devicePixelRatio,1.875)||1;var e=(0,l.YC)("route_details_canvas");t.width=e[0]*_,t.height=e[1]*_;var n=t.getContext("2d");n.setTransform(1,0,0,1,0,0),n.scale(_,_)}(h),n===f){y.clearRect(0,0,(0,l.YC)("route_details_canvas")[0],(0,l.YC)("route_details_canvas")[1]);for(var m=0;m<24;m++)v(y,m,s);var A,x=b(e);try{for(x.s();!(A=x.n()).done;){p(y,A.value,r,a,i,o,d)}}catch(t){x.e(t)}finally{x.f()}}else y.clearRect(0,0,(0,l.YC)("route_details_canvas")[0],(0,l.YC)("route_details_canvas")[1])}function I(t,e,n){var r=(new Date).getDay(),a=(0,m.t)("--c"),i=(0,m.t)("--d"),o=(0,m.t)("--e"),c=(0,m.t)("--nc"),l=(0,m.t)("--b"),d=(0,m.t)("--ra"),s=t.calendarDays,f=t.calendarDayQuantity,v=t.calendarEventGroups,p=(t.calendarEventQuantity,(0,u.jg)(q,"._d").length);if(f!==p){var h=p-f;if(h<0){for(var y=new DocumentFragment,g=new DocumentFragment,b=0,A=Math.abs(h);b<A;b++){var w=C();y.appendChild(w);var _=k();g.appendChild(_)}G.append(y),q.append(g)}else for(var I=(0,u.jg)(G,".zd"),D=(0,u.jg)(q,"._d"),T=0,M=Math.abs(h);T<M;T++){var L=p-1-T;I[L].remove(),D[L].remove()}}for(var j=(0,u.jg)(G,".zd"),$=(0,u.jg)(q,"._d"),Z=0;Z<f;Z++){var R=`d_${Z}`,Y=s[R],F=v[R],H=j[Z],z=$[Z];S(H,Y,r,e,n,Z),E(z,F,r,l,a,i,o,c,d,Z)}x=t}var D=n(4537),T=[],M=!1,L=!1;function j(){var t=document.createElement("div");t.classList.add("be");var e=document.createElement("div");e.classList.add("ce"),e.appendChild((0,D.oC)()),t.appendChild(e);var n=document.createElement("div");return n.classList.add("de"),t.appendChild(n),t}function $(t,e,n){function r(t,r,a){function i(t,e){var n=(0,u.aI)(t,".ce");(0,D.yD)(n,e.icon)}function o(t,e){(0,u.aI)(t,".de").innerText=e.value}function l(t,e){t.setAttribute("animation",(0,c.xZ)(e))}function d(t,e){t.setAttribute("skeleton-screen",(0,c.xZ)(e))}null==a?(i(t,r),o(t,r),l(t,n),d(t,e)):((0,c.hw)(a,r)||i(t,r),(0,c.hw)(a,r)||o(t,r),M!==n&&l(t,n),L!==e&&d(t,e))}var a=t.length;e!==L&&Q.setAttribute("skeleton-screen",(0,c.xZ)(e));var i=(0,u.jg)(U,".be").length;if(a!==i){var o=i-a;if(o<0){for(var l=new DocumentFragment,d=0,s=Math.abs(o);d<s;d++){var f=j();l.appendChild(f)}U.append(l)}else for(var v=(0,u.jg)(U,".be"),p=0,h=Math.abs(o);p<h;p++){v[i-1-p].remove()}}for(var y=(0,u.jg)(U,".be"),g=0;g<a;g++){var m=y[g],b=t[g];0===T.length?r(m,b,null):r(m,b,T[g])}T=t,M=n,L=e}function Z(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return R(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Y=(0,u.bv)(".ee"),F=(0,u.aI)(Y,".fe"),H=(0,u.aI)(F,".ge"),z=(0,u.aI)(H,'.he[group="calendar"]'),B=(0,u.aI)(z,".ie"),G=(0,u.aI)(B,".je"),q=(0,u.aI)(B,".ke"),W=(0,u.aI)(Y,'.fe .ge .he[group="actions"]'),J=(0,u.aI)(W,'.ie .le[action="save-to-folder"]'),N=(0,u.aI)(W,'.ie .le[action="get-permalink"]'),O=(0,u.aI)(W,'.ie .le[action="show-permalink-qrcode"]'),Q=(0,u.aI)(H,'.he[group="properties"]'),U=(0,u.aI)(Q,".ie");function P(){return P=(0,r.A)(function*(t,e){var n=(0,o.Js)("playing_animation"),r=yield(0,a.LH)("route",t);J.setAttribute("animation",(0,c.xZ)(n)),J.setAttribute("highlighted",(0,c.xZ)(r)),J.onclick=function(){(0,d.B)("route",[t],J)},N.setAttribute("animation",(0,c.xZ)(n)),N.onclick=function(){!function(t){h.apply(this,arguments)}(t)},O.setAttribute("animation",(0,c.xZ)(n)),O.onclick=function(){!function(t){y.apply(this,arguments)}(t)},function(){for(var t=(0,o.Js)("playing_animation"),e=[],n=0;n<5;n++)e.push({key:n,icon:"none",value:""});$(e,!0,t)}(),function(){for(var t=(0,o.Js)("playing_animation"),e={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var i=`d_${a}`;n[i]=[],r[i]={day:a,code:"d_{i}",name:""};for(var u=0;u<e[i];u++){var c=new Date;c.setHours(0),c.setMinutes(30*u),c.setSeconds(0),c.setMilliseconds(0),n[i].push({date:c,dateString:"",duration:15})}}I({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:e},!0,t)}();var u=(0,c.zx)(),l=yield(0,i.p)(t,e,u);$(l.properties,!1,n),I(l.calendar,!1,n)}),P.apply(this,arguments)}function X(t,e){(0,l.WR)("RouteDetails"),Y.setAttribute("displayed","true"),function(t,e){P.apply(this,arguments)}(t,e)}function V(){(0,l.kr)("RouteDetails"),Y.setAttribute("displayed","false");var t,e=Z((0,u.jg)(q,"._d"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,r=Z((0,u.jg)(G,".zd"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(t){r.e(t)}finally{r.f()}}},5392(){},5461(){},5995(){},6018(){},6388(){},6597(){},7217(){},7225(){},7287(){},7723(){},7868(){},7908(t,e,n){n.d(e,{NW:()=>g,XG:()=>h,hy:()=>y});var r=n(467),a=n(3937),i=n(3422),o=n(8179),u=n(8024),c=n(904),l=n(9119),d=(0,o.bv)(".me"),s=(0,o.aI)(d,".ne"),f=(0,o.aI)(s,".oe"),v=(0,o.aI)(f,'.pe[group="provider"] .qe input'),p=(0,o.aI)(f,'.pe[group="registration-key"] .qe input');function h(){(0,c.WR)("RegisterNotification"),d.setAttribute("displayed","true"),v.value=(0,i.D7)(),p.value="",(0,c.Z_)()}function y(){d.setAttribute("displayed","false"),(0,c.l$)()}function g(){return m.apply(this,arguments)}function m(){return(m=(0,r.A)(function*(){(0,l.a)("manufacturing","處理中");var t=v.value,e=p.value;if((0,u.Gz)(t))return(0,i.Je)(t),(yield(0,a.e)(e))?void(0,l.a)("check_circle","註冊成功"):void(0,l.a)("error","註冊失敗");(0,l.a)("error","無效的提供者")})).apply(this,arguments)}},8983(){},9991(){}}]);
//# sourceMappingURL=1c9c668dca8f9919ae7a.js.map