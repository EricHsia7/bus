"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[327],{5427:(t,n,e)=>{e.d(n,{Qx:()=>b});var r=e(9566),i=e(5352),a=e(5314),o=e(3459),u=e(4311);function l(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return f(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function f(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function s(t,n,e,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void e(t)}u.done?n(l):Promise.resolve(l).then(r,i)}function c(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){s(a,r,i,o,u,"next",t)}function u(t){s(a,r,i,o,u,"throw",t)}o(void 0)}))}}function y(t){return p.apply(this,arguments)}function p(){return(p=c((function*(t){var n,e=l(t);try{for(e.s();!(n=e.n()).done;){var i=n.value,a=i,o=!1,f=!1,s=`f_${a.id}`;if((yield(0,u.Ct)(11,s))?o=yield(0,r.g$)(a.id,a.name,a.icon):f=yield(0,r.vV)(a.name,a.icon),o){var c,y=l(i.content);try{for(y.s();!(c=y.n()).done;){var p=c.value;yield(0,r.z$)(i.id,p)}}catch(t){y.e(t)}finally{y.f()}}if(f){var d,v=l(i.content);try{for(v.s();!(d=v.n()).done;){var h=d.value;yield(0,r.z$)(f,h)}}catch(t){v.e(t)}finally{v.f()}}}}catch(t){e.e(t)}finally{e.f()}}))).apply(this,arguments)}function d(t){return v.apply(this,arguments)}function v(){return(v=c((function*(t){var n,e=l(t);try{for(e.s();!(n=e.n()).done;){var r=n.value,i=(0,o.PL)(r.key);i&&"select"===i.type&&(yield(0,o.aN)(r.key,r.option))}}catch(t){e.e(t)}finally{e.f()}return!0}))).apply(this,arguments)}function h(t){return m.apply(this,arguments)}function m(){return(m=c((function*(t){var n,e=l(t);try{for(e.s();!(n=e.n()).done;){var r=n.value;(yield(0,i.qZ)(r.id))?yield(0,i.nL)(r):yield(0,i.Qh)(r.name,r.period.start.hours,r.period.start.minutes,r.period.end.hours,r.period.end.minutes,r.days)}}catch(t){e.e(t)}finally{e.f()}return!0}))).apply(this,arguments)}function g(){return(g=c((function*(t){var n,e=l(t);try{for(e.s();!(n=e.n()).done;){var r=n.value;switch(r.type){case"route":(yield(0,a.DF)("route",r.id))||(yield(0,a.XK)(r.type,r.id));break;case"location":(yield(0,a.DF)("location",r.hash))||(yield(0,a.XK)(r.type,r.hash));break;case"bus":(yield(0,a.DF)("bus",r.id))||(yield(0,a.XK)(r.type,r.id))}}}catch(t){e.e(t)}finally{e.f()}return!0}))).apply(this,arguments)}function b(t){return S.apply(this,arguments)}function S(){return S=c((function*(t){var n=JSON.parse(t);switch(n.version){case 1:return yield y(n.folders),!0;case 2:return yield y(n.folders),yield d(n.settings),!0;case 3:return yield y(n.folders),yield d(n.settings),yield h(n.personal_schedules),!0;case 4:return yield y(n.folders),yield d(n.settings),yield h(n.personal_schedules),yield function(t){return g.apply(this,arguments)}(n.recent_views),!0;default:return!1}})),S.apply(this,arguments)}},5976:(t,n,e)=>{e.d(n,{R:()=>l});var r=e(9566),i=e(5352),a=e(5314),o=e(3459);function u(t,n,e,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void e(t)}u.done?n(l):Promise.resolve(l).then(r,i)}function l(){return f.apply(this,arguments)}function f(){var t;return t=function*(){var t=yield(0,r.Xi)(),n=(0,o.Gn)(),e=yield(0,i.ty)(),u=yield(0,a.Qj)(),l={};return l.time=(new Date).toISOString(),l.version=4,l.folders=t,l.settings=n,l.personal_schedules=e,l.recent_views=u,JSON.stringify(l)},f=function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){u(a,r,i,o,l,"next",t)}function l(t){u(a,r,i,o,l,"throw",t)}o(void 0)}))},f.apply(this,arguments)}},6160:(t,n,e)=>{e.d(n,{i:()=>d});var r=e(6802),i=e(7810),a=e(9734),o=e(8011),u=e(424),l=e(2303),f=e(6788),s=e(8134);function c(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return y(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?y(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function y(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function p(t,n,e,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void e(t)}u.done?n(l):Promise.resolve(l).then(r,i)}function d(t,n){return v.apply(this,arguments)}function v(){var t;return t=function*(t,n){var e=`c_${t}`,y=yield(0,a.j)(n,!0),p=yield(0,r.d)(n),d=yield(0,i.J)(n),v=yield(0,u.T)(n),h=yield(0,o.g)(n,0),m={properties:[],LocationName:""},g={};if(!y.hasOwnProperty(e))return m;var b=(g=y[e]).CarNum;m.properties.push({key:"car_number",icon:"tag",value:b});var S=g.CarType,_=(0,l.Ov)(S);m.properties.push({key:"car_type",icon:"directions_bus",value:_});var w,$={},O=c(p);try{for(O.s();!(w=O.n()).done;){var C=w.value;if(C.BusID===b){$=C;break}}}catch(t){O.e(t)}finally{O.f()}var I,x=parseInt($.RouteID),A=$.BusStatus,J=(0,l.eu)(A),L=parseInt($.GoBack),N={},k=c(d);try{for(k.s();!(I=k.n()).done;){var P=I.value;if(P.BusID===b){N=P;break}}}catch(t){k.e(t)}finally{k.f()}var D=N.CarOnStop,T=(0,l.zi)(D);m.properties.push({key:"status",icon:"vital_signs",value:`${T} | ${J}`});var z=N.StopID,Q=yield(0,s.F6)(x),j={};if(!(Q.length>0))return m;var E=(j=Q[0]).id,M=j.pid,R=j.n,F=j.dep,B=[j.des,F,""][L||0];m.properties.push({key:"route",icon:"route",value:`${R} - å¾€${B}`}),m.RouteID=E,m.FullPathAttributeId=M;var X=`s_${z}`;if(!v.hasOwnProperty(X))return m;var q=h[`l_${v[X].stopLocationId}`].n;return m.properties.push({key:"location_name",icon:"location_on",value:q}),(0,f.LQ)(n),(0,f.gC)(n),m},v=function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){p(a,r,i,o,u,"next",t)}function u(t){p(a,r,i,o,u,"throw",t)}o(void 0)}))},v.apply(this,arguments)}},9566:(t,n,e)=>{e.d(n,{$j:()=>D,DW:()=>V,Fq:()=>K,L2:()=>x,LH:()=>M,NC:()=>F,R_:()=>z,Rh:()=>_,Xi:()=>k,aq:()=>X,bq:()=>G,eD:()=>A,g$:()=>C,vV:()=>$,z$:()=>j});var r=e(8024),i=e(6483),a=e(5767),o=e(2063),u=e(8011),l=e(9930),f=e(4293),s=e(424),c=e(2303),y=e(6788),p=e(3459),d=e(4311);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return m(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function m(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function g(t,n,e,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void e(t)}u.done?n(l):Promise.resolve(l).then(r,i)}function b(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function o(t){g(a,r,i,o,u,"next",t)}function u(t){g(a,r,i,o,u,"throw",t)}o(void 0)}))}}var S={};function _(){return w.apply(this,arguments)}function w(){return(w=b((function*(){var t,n=h(yield(0,d.Su)(11));try{for(n.s();!(t=n.n()).done;){var e=t.value,r=yield(0,d.Ct)(11,e);if(r){var i=JSON.parse(r);S.hasOwnProperty(e)||(S[e]=i)}}}catch(t){n.e(t)}finally{n.f()}}))).apply(this,arguments)}function $(t,n){return O.apply(this,arguments)}function O(){return(O=b((function*(t,n){var e=(0,r.zx)(),i=yield(0,l.z)(e);if((0,y.LQ)(e),i.indexOf(n)<0)return!1;var a=(0,r.zx)(),o=`f_${a}`;if(S.hasOwnProperty(o))return!1;if(yield(0,d.Ct)(11,o))return!1;var u={name:t,icon:n,id:a,timestamp:(new Date).getTime()};return S[o]=u,yield(0,d.mL)(11,o,JSON.stringify(u)),yield(0,d.mL)(12,o,JSON.stringify([])),a}))).apply(this,arguments)}function C(t,n,e){return I.apply(this,arguments)}function I(){return(I=b((function*(t,n,e){var i=`f_${t}`,a=yield(0,d.Ct)(11,i);if(!a)return!1;var o=JSON.parse(a),u=(0,r.zx)(),f=yield(0,l.z)(u);if((0,y.LQ)(u),f.indexOf(e)<0)return!1;var s={name:n,icon:e,id:t,timestamp:o.timestamp};return S[i]=s,yield(0,d.mL)(11,i,JSON.stringify(s)),!0}))).apply(this,arguments)}function x(t){var n=`f_${t}`;return!!S.hasOwnProperty(n)&&{name:S[n].name,icon:S[n].icon,id:S[n].id,timestamp:S[n].timestamp}}function A(t){return J.apply(this,arguments)}function J(){return(J=b((function*(t){var n=[],e=`f_${t}`,r=x(t);if("boolean"==typeof r&&!1===r)return n;var i=yield(0,d.Ct)(12,e);if(!i)return n;var a=JSON.parse(i);if(0===a.length){return n.push({type:"empty",id:0,index:0}),n}var o,u=h(a);try{for(u.s();!(o=u.n()).done;){var l=o.value,f=yield(0,d.Ct)(13,l);if(f){var s=JSON.parse(f);n.push(s)}}}catch(t){u.e(t)}finally{u.f()}return n}))).apply(this,arguments)}function L(t){return N.apply(this,arguments)}function N(){return(N=b((function*(t){var n=`f_${t}`,e=yield(0,d.Ct)(12,n);return e?JSON.parse(e).length:0}))).apply(this,arguments)}function k(){return P.apply(this,arguments)}function P(){return(P=b((function*(){var t,n=yield function(){var t=[];for(var n in S){var e={name:S[n].name,icon:S[n].icon,id:S[n].id,timestamp:S[n].timestamp};t.push(e)}return t.sort((function(t,n){return t.timestamp-n.timestamp})),t}(),e=[],r=h(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=yield A(i.id),o=yield L(i.id);e.push({name:i.name,icon:i.icon,id:i.id,timestamp:i.timestamp,content:a,contentLength:o})}}catch(t){r.e(t)}finally{r.f()}return e}))).apply(this,arguments)}function D(t){return T.apply(this,arguments)}function T(){return(T=b((function*(t){var n=!0;"object"===v(t)&&Array.isArray(t)||(n=!1);var e,r=[],i=h(yield(0,d.Su)(13));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=yield(0,d.Ct)(13,a);if(o){var u=JSON.parse(o);n?t.indexOf(u.type)>-1&&r.push(u):r.push(u)}}}catch(t){i.e(t)}finally{i.f()}return r}))).apply(this,arguments)}function z(t){return Q.apply(this,arguments)}function Q(){return(Q=b((function*(t){(0,y.Mf)(t,"getEstimateTime_0",0,!1),(0,y.Mf)(t,"getEstimateTime_1",0,!1),(0,y.Mf)(t,"getRoute_0",0,!1),(0,y.Mf)(t,"getRoute_1",0,!1);var n,e=yield(0,o.K)(t),r=yield(0,f.a)(t,!0),u=yield k(),l=(0,p.Js)("time_formatting_mode"),s=(0,p.Js)("power_saving"),d=(0,p.Js)("refresh_interval"),v=[],m=h(u);try{for(m.s();!(n=m.n()).done;){var g=n.value;v=v.concat(g.content.filter((function(t){return"stop"===t.type})).map((function(t){return t.id})))}}catch(t){m.e(t)}finally{m.f()}var b,S={},_=h(e);try{for(_.s();!(b=_.n()).done;){var w=b.value;if(v.indexOf(w.StopID)>-1)S[`s_${w.StopID}`]=w}}catch(t){_.e(t)}finally{_.f()}var $,O=[],C=h(u);try{for(C.s();!($=C.n()).done;){var I,x=$.value,A={name:x.name,icon:x.icon,id:x.id,timestamp:x.timestamp,content:[],contentLength:x.contentLength},J=h(x.content);try{for(J.s();!(I=J.n()).done;){var L=I.value;switch(L.type){case"stop":var N=`s_${L.id}`,P={};if(!S.hasOwnProperty(N))break;P=S[N],L.status=(0,c.$Q)(P.EstimateTime,l);var D=r[`r_${L.route.id}`];L.route.pathAttributeId=D.pid;break;case"route":var T=r[`r_${L.id}`];L.pathAttributeId=T.pid}A.content.push(L)}}catch(t){J.e(t)}finally{J.f()}O.push(A)}}catch(t){C.e(t)}finally{C.f()}var z={folders:O,dataUpdateTime:(0,y.Zt)(t)};return(0,y.LQ)(t),(0,y.gC)(t),s||(d.dynamic&&(yield(0,a.Eu)(e)),yield(0,i.VZ)(e)),z}))).apply(this,arguments)}function j(t,n){return E.apply(this,arguments)}function E(){return(E=b((function*(t,n){var e=`f_${t}`,r=`${n.type}_${n.id}`,i=x(t);if("boolean"==typeof i&&!1===i)return!1;var a=yield(0,d.Ct)(12,e);if(!a)return!1;var o=JSON.parse(a);return(0===o.length||o.indexOf(r)<0)&&(yield(0,d.mL)(12,e,JSON.stringify(o.concat(r))),yield(0,d.mL)(13,r,JSON.stringify(n)),!0)}))).apply(this,arguments)}function M(t,n){return R.apply(this,arguments)}function R(){return(R=b((function*(t,n){var e,r=`${t}_${n}`,i=h(yield(0,d.Su)(12));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=yield(0,d.Ct)(12,a);if(o)if(JSON.parse(o).indexOf(r)>-1)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}))).apply(this,arguments)}function F(t,n,e){return B.apply(this,arguments)}function B(){return(B=b((function*(t,n,e){var r=`f_${t}`,i=`${n}_${e}`,a=x(t);if("boolean"==typeof a&&!1===a)return!1;var o=yield(0,d.Ct)(12,r);if(!o)return!1;var u=JSON.parse(o),l=u.indexOf(i);return l>-1&&u.length>0&&(u.splice(l,1),yield(0,d.mL)(12,r,JSON.stringify(u))),!1===(yield M(n,e))&&(yield(0,d.iQ)(13,i)),!0}))).apply(this,arguments)}function X(t,n,e){return q.apply(this,arguments)}function q(){return(q=b((function*(t,n,e){var i=(0,r.zx)(),a=yield(0,s.T)(i),o=yield(0,u.g)(i,0),l=yield(0,f.a)(i,!0),c=a[`s_${n}`],y=parseInt(c.goBack),p=o[`l_${c.stopLocationId}`].n,d=l[`r_${e}`],v=d.n,h=d.dep,m=d.des,g={type:"stop",id:n,timestamp:(new Date).getTime(),name:p,direction:y,route:{name:v,endPoints:{departure:h,destination:m},id:e}};return yield j(t,g)}))).apply(this,arguments)}function K(t,n){return U.apply(this,arguments)}function U(){return(U=b((function*(t,n){var e=(0,r.zx)(),i=yield(0,f.a)(e,!0);(0,y.LQ)(e),(0,y.gC)(e);var a=`r_${n}`,o={};if(!i.hasOwnProperty(a))return!1;o=i[a];var u={type:"route",id:n,timestamp:(new Date).getTime(),name:o.n,endPoints:{departure:o.dep,destination:o.des}};return yield j(t,u)}))).apply(this,arguments)}function V(t,n){return Z.apply(this,arguments)}function Z(){return(Z=b((function*(t,n){var e=(0,r.zx)(),i=yield(0,u.g)(e,1);(0,y.LQ)(e),(0,y.gC)(e);var a=`ml_${n}`,o={};if(!i.hasOwnProperty(a))return!1;o=i[a];var l={type:"location",id:n,timestamp:(new Date).getTime(),name:o.n};return yield j(t,l)}))).apply(this,arguments)}function G(t,n,e,r){return H.apply(this,arguments)}function H(){return(H=b((function*(t,n,e,r){var i=`f_${t}`,a=`${n}_${e}`,o=x(t);if("boolean"==typeof o&&!1===o)return!1;var u=yield(0,d.Ct)(12,i);if(!u)return!1;var l=JSON.parse(u),f=l.indexOf(a);if(f>-1&&l.length>1){var s=0;switch(r){case"up":s=-1;break;case"down":s=1;break;default:s=0}return l.splice(f,1),l.splice(f+s,0,a),yield(0,d.mL)(12,i,JSON.stringify(l)),!0}return!1}))).apply(this,arguments)}}}]);
//# sourceMappingURL=d9408b886b94e85e3371.js.map