"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[600],{112(){},124(){},245(){},321(){},626(){},904(e,t,n){n.d(t,{AE:()=>w,BM:()=>I,WR:()=>y,Z_:()=>k,f1:()=>C,gO:()=>L,kr:()=>b,l$:()=>A,p9:()=>S});var a=n(8179),i=n(8024),r=n(4884),o=n(6052),s=n(9333),u=n(8379),c=n(5693),l=n(7891),d=n(7908),f=n(5009),h=n(6104),p=(0,a.bv)(".xf"),v=(0,a.bv)(".ag"),m=(new Date).getTime(),g=["Home"];function y(e){var t=g.length;g[t-1]!==e&&g.push(e)}function b(e){if(g.indexOf(e)>-1){var t=g.length;g[t-1]===e&&g.pop()}}function k(){var e=g.length;if(e>1)switch(g[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.z1)();break;case"FolderEditor":(0,s.I6)();break;case"FolderManager":(0,u.m)();break;case"Search":(0,f.Bb)();break;case"Settings":(0,h.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.FN)();break;case"RegisterNotification":(0,d.hy)()}}function A(){var e=g.length;if(e>1){var t=g[e-2];switch(g.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.pd)();break;case"FolderEditor":(0,s.uy)();break;case"FolderManager":(0,u.g)();break;case"Search":(0,f.rf)();break;case"Settings":(0,h.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$l)();break;case"RegisterNotification":(0,d.XG)()}}}function I(){var e=0;(0,i.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,a.bv)(".xf svg.yf").style.setProperty("--zf",`${e}px`)}function w(e){function t(){p.classList.add("_f"),p.addEventListener("animationend",function(){p.setAttribute("displayed","false"),p.classList.remove("_f"),"function"==typeof e&&e()},{once:!0})}var n=(new Date).getTime();n-m<100?setTimeout(t,Math.max(1,n-m)):t()}function C(){v.setAttribute("displayed","true")}function L(e){var t=0,n=0,a=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=a,n=i;break;case"head":t=a,n=55;break;case"head-one-button":t=a-55,n=55;break;case"head-two-button":t=a-110,n=55;break;case"route-details-canvas":t=a-20-20,n=1680;break;case"route-bus-arrival-time-chart":t=a-45-15-20,n=75;break;case"location-bus-arrival-time-chart":t=a-30-20,n=75;break;default:t=0,n=0}return{width:t,height:n}}function S(){window.scrollTo({top:0,behavior:"instant"})}},969(){},1003(){},1195(){},1351(e,t,n){n.d(t,{ID:()=>C,co:()=>L,k9:()=>S,qp:()=>_});var a=n(467),i=n(8011),r=n(6788),o=n(6983),s=n(3459),u=n(8179),c=n(8024),l=n(9469),d=n(4537),f=n(904),h=n(9119),p=n(8279),v={},m=!1,g=!1,y=(0,u.bv)(".hj"),b=(0,u.aI)(y,".mj"),k=(0,u.aI)(b,".nj");function A(){var e=document.createElement("div");e.classList.add("oj");var t=document.createElement("div");t.classList.add("pj"),t.appendChild((0,d.oC)()),e.appendChild(t);var n=document.createElement("div");return n.classList.add("qj"),e.appendChild(n),e}function I(e,t,n){function a(e,a,i){function r(e,t){var n=(0,u.aI)(e,".pj");(0,d.yD)(n,t.icon)}function o(e,t){(0,u.aI)(e,".qj").innerText=t.name}function s(e,t){e.onclick=t.action}function l(e,t){e.setAttribute("animation",(0,c.xZ)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,c.xZ)(t))}null==i?(r(e,a),o(e,a),s(e,a),l(e,n),f(e,t)):(i.key!==a.key&&(r(e,a),o(e,a),s(e,a)),n!==m&&l(e,n),t!==g&&f(e,t))}var i=e.actions,r=e.actionsQuantity,o=(0,u.jg)(k,".oj").length;if(r!==o){var s=o-r;if(s<0){for(var l=new DocumentFragment,f=0,h=Math.abs(s);f<h;f++){var p=A();l.appendChild(p)}k.append(l)}else for(var y=(0,u.jg)(k,".oj"),b=0,I=Math.abs(s);b<I;b++){y[o-1-b].remove()}}for(var w=(0,u.jg)(k,".oj"),C=0;C<r;C++){var L=w[C],S=i[C];if((0,c.mQ)(v,"actions"))if(v.actions[C])a(L,S,v.actions[C]);else a(L,S,null);else a(L,S,null)}v=e,m=n,g=t}function w(){return(w=(0,a.A)(function*(e){var t=(0,s.Js)("playing_animation"),n=(0,c.zx)();I(yield(0,o.v)(e,n),!1,t)})).apply(this,arguments)}function C(e){(0,f.WR)("LocationDetails"),y.setAttribute("displayed","true"),function(){for(var e=(0,s.Js)("playing_animation"),t=[],n=0;n<3;n++)t.push({name:"",icon:"",key:`action-${n}`,action:function(){}});I({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){w.apply(this,arguments)}(e)}function L(){(0,f.kr)("LocationDetails"),y.setAttribute("displayed","false")}function S(e){return E.apply(this,arguments)}function E(){return(E=(0,a.A)(function*(e){var t=(0,c.zx)(),n=yield(0,i.g)(t,1);(0,r.LQ)(t),(0,r.gC)(t);var a=`ml_${e}`;if((0,c.mQ)(n,a)){var o=n[a],s=(0,l.i)(1,{hash:e});navigator.share&&navigator.share({title:o.n,url:s}).then(function(){(0,h.a)("check_circle","已分享地點")}).catch(function(e){(0,h.a)("cancel","已取消分享")})}})).apply(this,arguments)}function _(e){return x.apply(this,arguments)}function x(){return(x=(0,a.A)(function*(e){var t=(0,c.zx)(),n=yield(0,i.g)(t,1);(0,r.LQ)(t),(0,r.gC)(t);var a=`ml_${e}`;if((0,c.mQ)(n,a)){var o=(0,l.i)(1,{hash:e});(0,p.X8)(o)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(e,t,n){n.d(t,{Sv:()=>P,m_:()=>Z});var a=n(467),i=n(5767),r=n(365),o=n(3422),s=n(3459),u=n(8179),c=n(8024),l=n(4537),d=n(904),f=n(9119),h=(0,u.bv)("._k"),p=(0,u.aI)(h,".cl"),v=(0,u.aI)(p,".gl"),m=(0,u.aI)(v,".hl"),g=(0,u.aI)(h,".jl"),y=(0,u.aI)(g,".kl"),b={},k=!1,A=15e3,I=5e3,w=15e3,C=!0,L=0,S=0,E="",_=!1,x=!1,j=!1;function T(e){var t=e;if(_){var n=t.detail.progress-1;m.style.setProperty("--al",n.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,T)}function M(){var e=document.createElement("div");e.classList.add("ll");var t=document.createElement("div");t.classList.add("ml"),e.appendChild(t);var n=document.createElement("div");n.classList.add("nl");var a=document.createElement("div");a.classList.add("ol"),n.appendChild(a);var i=document.createElement("div");i.classList.add("pl"),n.appendChild(i);var r=document.createElement("div");r.classList.add("ql"),n.appendChild(r);var o=document.createElement("div");o.classList.add("rl");var s=document.createElement("span");return s.appendChild((0,l.YC)("close")),o.appendChild(s),n.appendChild(o),e.appendChild(n),e}function D(e,t,n){function a(e,a,i){function r(e,t){(0,u.aI)(e,".ml").innerText=t.hours}function o(e,t){var n=(0,u.aI)(e,".nl");(0,u.aI)(n,".ol").innerText=t.minutes}function s(e,t){var n=(0,u.aI)(e,".nl");(0,u.aI)(n,".ql").innerText=t.name}function l(e,t){var n=(0,u.aI)(e,".nl");(0,u.aI)(n,".pl").innerText=`${t.route.name} - 往${t.route.direction}`}function d(e,t){var n=(0,u.aI)(e,".nl");(0,u.aI)(n,".rl").onclick=function(){!function(e,t){z.apply(this,arguments)}(e,t.schedule_id)}}function f(e,t){e.setAttribute("first",(0,c.xZ)(t.is_first))}function h(e,t){e.setAttribute("animation",(0,c.xZ)(t))}function p(e,t){e.setAttribute("skeleton-screen",(0,c.xZ)(t))}null==i?(r(e,a),o(e,a),s(e,a),l(e,a),d(e,a),f(e,a),h(e,n),p(e,t)):(a.hours!==i.hours&&r(e,a),a.minutes!==i.minutes&&o(e,a),(0,c.hw)(i.schedule_id,a.schedule_id)||(s(e,a),l(e,a),d(e,a)),i.is_first!==a.is_first&&f(e,a),false!==n&&h(e,n),k!==t&&p(e,t))}var i=e.itemQuantity,r=e.items,o=(0,u.jg)(y,".ll").length;if(i!==o){var s=o-i;if(s<0){for(var l=new DocumentFragment,d=0,f=Math.abs(s);d<f;d++){var h=M();l.appendChild(h)}y.append(l)}else for(var p=(0,u.jg)(y,".ll"),v=0,m=Math.abs(s);v<m;v++){p[o-1-v].remove()}}for(var g=(0,u.jg)(y,".ll"),A=0;A<i;A++){var I=g[A],w=r[A];if((0,c.mQ)(b,"items"))if(b.items[A])a(I,w,b.items[A]);else a(I,w,null);else a(I,w,null)}b=e,k=t}function F(){return R.apply(this,arguments)}function R(){return(R=(0,a.A)(function*(){var e=(0,s.Js)("playing_animation"),t=(0,s.Js)("refresh_interval");C=t.dynamic,A=t.baseInterval,_=!0,E=(0,c.zx)(),m.setAttribute("refreshing","true"),m.classList.remove("il"),document.addEventListener(E,T);var n=yield(0,o.e3)(E);D(n,!1,e);var a=0;C&&(a=yield(0,i.wz)()),L=(new Date).getTime(),S=C?Math.max(L+I,n.dataUpdateTime+A/a):L+A,w=Math.max(I,S-L),_=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--bl",`${w}ms`),m.classList.add("il")})).apply(this,arguments)}function $(){return Q.apply(this,arguments)}function Q(){return(Q=(0,a.A)(function*(){F().then(function(){x?setTimeout(function(){$()},Math.max(I,S-(new Date).getTime())):j=!1}).catch(function(e){x?setTimeout(function(){$()},1e4):j=!1})})).apply(this,arguments)}function P(){(0,d.WR)("NotificationScheduleManager"),h.setAttribute("displayed","true"),function(){for(var e=(0,s.Js)("playing_animation"),t=(0,d.gO)("window"),n=(t.width,t.height),a=Math.floor(n/50)+5,i=[],r=0;r<a;r++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});D({items:i,itemQuantity:a,dataUpdateTime:0},!0,e)}(),x||(x=!0,j?F():(j=!0,$())),(0,d.Z_)()}function Z(){h.setAttribute("displayed","false"),x=!1,(0,d.l$)()}function z(){return(z=(0,a.A)(function*(e,t){if((0,f.a)("manufacturing","處理中"),yield(0,r.G)(t)){if(e.remove(),(0,f.a)("check_circle","已取消通知"),!_){var n=(0,s.Js)("playing_animation");D(yield(0,o.e3)(E),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4537(e,t,n){n.d(t,{YC:()=>i,oC:()=>r,yD:()=>o});var a=n(8179);function i(e){var t=document.createElement("span");return t.classList.add("sa"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("sa"),e}function o(e,t){(0,a.aI)(e,"span.sa").innerText=t}},4620(){},4721(){},4935(){},5068(){},5135(){},5259(){},5374(){},5504(){},5666(){},5693(e,t,n){n.d(t,{Dn:()=>L,Xy:()=>C,bF:()=>w,gv:()=>k});var a=n(3453),i=n(467),r=n(5352),o=n(8179),s=n(5579),u=n(904),c=n(9119),l=(0,o.bv)(".nk"),d=(0,o.aI)(l,".sk"),f=(0,o.aI)(l,".ok"),h=(0,o.aI)(f,".pk"),p=(0,o.aI)(d,".tk"),v=(0,o.aI)(p,'.uk[group="schedule-name"] .yk input'),m=(0,o.aI)(p,'.uk[group="schedule-start-time"] .yk input'),g=(0,o.aI)(p,'.uk[group="schedule-end-time"] .yk input'),y=(0,o.aI)(p,'.uk[group="schedule-days"] .yk'),b=(0,o.jg)(y,".zk");function k(e){return A.apply(this,arguments)}function A(){return(A=(0,i.A)(function*(e){for(var t=v.value,n=m.value,i=g.value,o=String(n).split(":").map(function(e){return parseInt(e)}),s=(0,a.A)(o,2),u=s[0],l=s[1],d=String(i).split(":").map(function(e){return parseInt(e)}),f=(0,a.A)(d,2),h=f[0],p=f[1],y=[],k=0;k<7;k++){var A=b[k],I=A.getAttribute("highlighted"),w=parseInt(A.getAttribute("day"));"true"===I&&y.push(w)}var L=yield(0,r.qZ)(e);L.name=t,L.days=y,L.period.start.hours=u,L.period.start.minutes=l,L.period.end.hours=h,L.period.end.minutes=p,yield(0,r.nL)(L),(0,c.a)("check_circle","已儲存變更"),C()})).apply(this,arguments)}function I(){return(I=(0,i.A)(function*(e){var t=yield(0,r.qZ)(e);v.value=t.name,m.value=(0,s.pn)(t.period.start),g.value=(0,s.pn)(t.period.end);for(var n=0;n<7;n++){var a=b[n];t.days.indexOf(n)>-1?a.setAttribute("highlighted","true"):a.setAttribute("highlighted","false")}h.onclick=function(){k(e)}})).apply(this,arguments)}function w(e){(0,u.WR)("PersonalScheduleEditor"),l.setAttribute("displayed","true"),function(e){I.apply(this,arguments)}(e),(0,u.Z_)()}function C(){l.setAttribute("displayed","false"),(0,u.l$)()}function L(e){var t=(0,o.aI)(y,`.zk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6764(){},6780(){},6907(){},7537(){},7891(e,t,n){n.d(t,{Z:()=>g,z:()=>m});var a=n(467),i=n(5352),r=n(8179),o=n(4537),s=n(904),u=n(5693);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("E0")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var d=(0,r.bv)(".rj"),f=(0,r.aI)(d,".wj"),h=(0,r.aI)(f,".xj");function p(e){var t=document.createElement("div");t.classList.add("yj"),t.onclick=function(){(0,u.bF)(e.id)};var n=document.createElement("div");n.classList.add("zj"),n.innerText=e.name,t.appendChild(n);var a=document.createElement("div");a.classList.add("_j");var i=document.createElement("span");return i.appendChild((0,o.YC)("arrow_forward_ios")),a.appendChild(i),t.appendChild(a),t}function v(){return(v=(0,a.A)(function*(){h.innerHTML="";var e,t=yield(0,i.ty)(),n=new DocumentFragment,a=c(t);try{for(a.s();!(e=a.n()).done;){var r=p(e.value);n.appendChild(r)}}catch(e){a.e(e)}finally{a.f()}h.append(n)})).apply(this,arguments)}function m(){(0,s.WR)("PersonalScheduleManager"),d.setAttribute("displayed","true"),function(){v.apply(this,arguments)}()}function g(){(0,s.kr)("PersonalScheduleManager"),d.setAttribute("displayed","false")}},7943(){},8279(e,t,n){n.d(t,{Vc:()=>c,X8:()=>u});var a=n(8179),i=n(2648),r=n(904),o=(0,a.bv)(".zl"),s=(0,a.aI)(o,".dm");function u(e){(0,r.WR)("QRCode"),o.setAttribute("displayed","true"),function(e){var t=(0,i.$)(e,"M",.5,.3,1,"var(--a)",4);s.innerHTML=t}(e)}function c(){(0,r.kr)("QRCode"),o.setAttribute("displayed","false")}},8380(e,t,n){n.d(t,{GJ:()=>y,I1:()=>g,Ps:()=>m,om:()=>b});var a=n(3453),i=n(5352),r=n(8179),o=n(904),s=n(9119),u=(0,r.bv)(".ak"),c=(0,r.aI)(u,".fk"),l=(0,r.aI)(c,".gk"),d=(0,r.aI)(l,'.hk[group="schedule-name"] .lk input'),f=(0,r.aI)(l,'.hk[group="schedule-start-time"] .lk input'),h=(0,r.aI)(l,'.hk[group="schedule-end-time"] .lk input'),p=(0,r.aI)(l,'.hk[group="schedule-days"] .lk'),v=(0,r.jg)(p,".mk");function m(){for(var e=d.value,t=f.value,n=h.value,r=String(t).split(":").map(function(e){return parseInt(e)}),o=(0,a.A)(r,2),u=o[0],c=o[1],l=String(n).split(":").map(function(e){return parseInt(e)}),p=(0,a.A)(l,2),m=p[0],g=p[1],b=[],k=0;k<7;k++){var A=v[k],I=A.getAttribute("highlighted"),w=parseInt(A.getAttribute("day"));"true"===I&&b.push(w)}(0,i.Qh)(e,u,c,m,g,b).then(function(e){e?(y(),(0,s.a)("calendar_view_day","已建立個人化行程")):(0,s.a)("error","無法建立個人化行程")})}function g(){(0,o.WR)("PersonalScheduleCreator"),u.setAttribute("displayed","true"),(0,o.Z_)()}function y(){u.setAttribute("displayed","false"),(0,o.l$)()}function b(e){var t=(0,r.aI)(p,`.mk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8969(){},9119(e,t,n){n.d(t,{a:()=>l});var a=n(2284),i=n(3459),r=n(8179),o=n(8024),s=n(4537);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("E0")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n){var c=(0,r.e0)(".em");if(null!==c){var l,d=u(c);try{for(d.s();!(l=d.n()).done;){l.value.remove()}}catch(e){d.e(e)}finally{d.f()}}var f=(0,i.Js)("playing_animation"),h=document.createElement("div");h.classList.add("em"),h.setAttribute("animation",(0,o.xZ)(f));var p=document.createElement("div");p.classList.add("fm"),p.appendChild((0,s.YC)(e)),h.appendChild(p);var v=document.createElement("div");if(v.classList.add("gm"),v.innerText=t,h.appendChild(v),"object"===(0,a.A)(n)&&null!=n&&"function"==typeof(null==n?void 0:n.action)){var m=document.createElement("div");m.classList.add("hm"),m.innerText=n.text,m.addEventListener("click",function(){n.action()},{once:!0}),h.appendChild(m),h.setAttribute("button","true")}h.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(h)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=25dfc054241ceb8d6673.js.map