!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("bus",[],e):"object"==typeof exports?exports.bus=e():t.bus=e()}(self,()=>(()=>{"use strict";var t,e={574(t,e,r){r.d(e,{a:()=>o,b:()=>h});var n=r(5428),o={vector:[0,0],id:-1,name:"未知",symbol:"?",icon:"explore"},a={vector:[0,1],id:0,name:"北",symbol:"↑",icon:"north"},i={vector:[1,0],id:1,name:"東",symbol:"→",icon:"east"},u={vector:[0,-1],id:2,name:"南",symbol:"↓",icon:"south"},c={vector:[-1,0],id:3,name:"西",symbol:"←",icon:"west"},s={vector:[Math.SQRT1_2,Math.SQRT1_2],id:4,name:"東北",symbol:"↗",icon:"north_east"},l={vector:[Math.SQRT1_2,-Math.SQRT1_2],id:5,name:"東南",symbol:"↘",icon:"south_east"},f={vector:[-Math.SQRT1_2,-Math.SQRT1_2],id:6,name:"西南",symbol:"↙",icon:"south_west"},d={vector:[-Math.SQRT1_2,Math.SQRT1_2],id:7,name:"西北",symbol:"↖",icon:"north_west"};function h(t){var e=[o,a,c,u,i,s,l,f,d],r=(0,n.d)(t),h=-1/0,v=e[0];for(var p of e){var g=p.vector[0]*r[0]+p.vector[1]*r[1];g>h&&(h=g,v=p)}return v}},2129(t,e,r){function n(t){for(var e=0;e<t.length;e++)for(var r=e+1;r<t.length;r++)if(t[e]===t[r])return!1;return!0}function o(t,e){var r=[];if(t.length<=e.length)for(var n of t)e.indexOf(n)>-1&&r.push(n);else for(var o of e)t.indexOf(o)>-1&&r.push(o);return r}r.d(e,{a:()=>n,b:()=>o})},2648(t,e,r){r.d(e,{a:()=>a});var n=r(7968),o=r(157);function a(t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000000",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4,c=[[[-1,0],[0,-1]],[[0,-1],[1,0]],[[1,0],[0,1]],[[0,1],[-1,0]]],s=[[[-1,0],[-1,-1],[0,-1]],[[0,-1],[1,-1],[1,0]],[[1,0],[1,1],[0,1]],[[0,1],[-1,1],[-1,0]]],l=function(t,e){for(var r=o.create(t,{errorCorrectionLevel:e}),n=r.modules.size,a=[],i=0;i<n;i++){for(var u=[],c=0;c<n;c++){var s=r.modules.get(c,i);u.push(s)}a.push(u)}return a}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"L"),f=l.length,d=[],h=0;h<f;h++)for(var v=0;v<f;v++)if(1===l[h][v]){for(var p=new Uint8Array(4),g=0;g<4;g++){var b=c[g],m=1;for(var $ of b){var M;1===(null===(M=l[h+$[1]])||void 0===M?void 0:M[v+$[0]])&&(m*=0)}p[g]=m}d=d.concat((0,n.b)((v+a)*u,(h+a)*u,1*u,1*u,{tl:p[0]*e*u,tr:p[1]*e*u,br:p[2]*e*u,bl:p[3]*e*u},!1))}else{for(var y=new Uint8Array(4),w=0;w<4;w++){var S=s[w],j=1;for(var x of S){var T;null!==(T=l[h+x[1]])&&void 0!==T&&T[v+x[0]]||(j*=0)}y[w]=j}y.some(function(t){return 0!==t})&&(d=d.concat((0,n.b)((v+a)*u,(h+a)*u,1*u,1*u,{tl:y[0]*r*u,tr:y[1]*r*u,br:y[2]*r*u,bl:y[3]*r*u},!0)))}return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${(f+2*a)*u} ${(f+2*a)*u}" shape-rendering="geometricPrecision"><path d="${d.join(" ")}" fill="${i}" stroke="${i}" stroke-width="0.1" stroke-linejoin="round" fill-rule="nonzero" /></svg>`}},2945(t,e,r){r.d(e,{a:()=>a,b:()=>o});var n=r(7183);function o(t){for(var e=[],r=0;r<t;r++)e.push(`地點${(0,n.b)(r+1)}`);return e}function a(t){var e=[];for(var r of t)e.push(`向${r.name}${r.symbol}`);return e}},4256(t,e,r){r.d(e,{a:()=>i,b:()=>u});var n=r(2129),o=r(8024),a=r(2945);function i(t){return`${t.city.join("")}${t.district.join("")}${t.road.join("、")}${t.road_section.sort(function(t,e){return t-e}).length>0?t.road_section.join("、")+"段":""}${t.alley.length>0?t.alley.sort(function(t,e){return t-e}).join("、")+"巷":""}${t.alley_branch.length>0?t.alley_branch.sort(function(t,e){return t-e}).join("、")+"弄":""}${t.doorplate.length>0?t.doorplate.sort(function(t,e){return t-e}).join("、")+"號":""}${t.floornumber.length>0?t.floornumber.join("、")+"樓":""}${t.direction.length>0?"（朝"+t.direction.join("、")+"）":""}`}function u(t){var e=[],r={};for(var i of t)for(var u in i)(0,o.e)(r,u)||(r[u]=0),i[u].length>0&&(r[u]=r[u]+1);var c=Object.entries(r).map(function(t){return{key:t[0],value:t[1]}}).filter(function(e){return e.value===t.length}).sort(function(t,e){return t.value-e.value});if(c.length>0)for(var s of c){var l=[],f=-1/0;for(var d of t){var h=d[s.key].join("");l.push(h);var v=h.length;v>f&&(f=v)}(0,n.a)(l)&&e.push({components:l,len:f})}if(e.length>0)return e.sort(function(t,e){return t.len-e.len}),e[0].components;var p=t.length;return(0,a.b)(p)}},4750(t,e,r){r.d(e,{a:()=>l});var n,o=r(467),a=r(3453),i=r(8024),u={};if("undefined"!=typeof SharedWorker){var c=new SharedWorker(new URL(r.p+r.u(701),r.b));(n=c.port).start()}else{var s=new Worker(new URL(r.p+r.u(82),r.b));n=s}function l(t){return f.apply(this,arguments)}function f(){return(f=(0,o.a)(function*(t){var e=(0,i.c)();return yield new Promise(function(r,o){u[e]=r,n.onerror=function(t){o(t.message)},n.postMessage([t,e])})})).apply(this,arguments)}n.onmessage=function(t){var e=(0,a.a)(t.data,2),r=e[0],n=e[1];u[n]&&(u[n](r),delete u[n])},n.onerror=function(t){}},4781(t,e,r){function n(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];if("string"==typeof t)for(var n=t.length,o=0;o<n;o++){var a=t.charCodeAt(o);(r.indexOf(a)<0||!e)&&r.push(a)}return r}function o(t){return!!/[\u3100-\u312Fˇˋˊ˙]/gm.test(t)}r.d(e,{a:()=>o,b:()=>n})},5428(t,e,r){function n(t,e,r,n,o,a){var i=r+a,u=(r*t+a*n)/i,c=(r*(Math.pow(e,2)+Math.pow(t,2))+a*(Math.pow(o,2)+Math.pow(n,2)))/i-Math.pow(u,2);return Math.sqrt(c)}function o(t,e,r,o,a,i,u,c,s,l,f,d){var h=a+f;return(a*(r*o*i+t*e)+f*(s*l*d+u*c)-h*((a*t+f*u)/h)*((a*e+f*c)/h))/(h*n(t,r,a,u,s,f)*n(e,o,a,c,l,f))}function a(t){var e=Math.hypot(t),r=t.length,n=new Float32Array(r);if(e>0){for(var o=1/e,a=r;a>0;a--)n[a]=t[a]*o;return Array.from(n)}return t}function i(t){var e=t.length;if(0===e)return[0,0];for(var r=1/0,n=-1/0,o=e-1;o>=0;o--){var a=t[o];a>n&&(n=a),a<r&&(r=a)}return[r,n]}r.d(e,{a:()=>i,b:()=>o,c:()=>n,d:()=>a})},5579(t,e,r){function n(){var t=new Date,e=t.getDay(),r=t.getDate()-e,n=new Date;return n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function o(t,e,r,n){var o=new Date;return o.setDate(1),o.setMonth(0),o.setHours(r),o.setMinutes(n),o.setSeconds(0),o.setMilliseconds(0),o.setFullYear(t.getFullYear()),o.setMonth(t.getMonth()),o.setDate(t.getDate()),o.setDate(o.getDate()+e),o}function a(t){var e=t.match(/[0-9\.]*/gm);if(e){var r=parseInt(e[0]),n=parseInt(e[2]),o=parseInt(e[4]),a=parseInt(e[6]),i=parseInt(e[8]),u=parseInt(e[10]),c=new Date;return c.setDate(1),c.setMonth(0),c.setFullYear(r),c.setMonth(n-1),c.setDate(o),c.setHours(a),c.setMinutes(i),c.setSeconds(u),c.getTime()}return 0}function i(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss").replaceAll(/Y{4,4}/g,t.getFullYear()).replaceAll(/M{2,2}/g,String(t.getMonth()+1).padStart(2,"0")).replaceAll(/D{2,2}/g,String(t.getDate()).padStart(2,"0")).replaceAll(/h{2,2}/g,String(t.getHours()).padStart(2,"0")).replaceAll(/m{2,2}/g,String(t.getMinutes()).padStart(2,"0")).replaceAll(/s{2,2}/g,String(t.getSeconds()).padStart(2,"0"))}function u(t){var e=t.getTime(),r=Math.floor(((new Date).getTime()-e)/1e3),n=Math.floor(r/31536e3);return n>=1?`${n}年前`:(n=Math.floor(r/2592e3))>=1?`${n}個月前`:(n=Math.floor(r/86400))>=1?`${n}天前`:(n=Math.floor(r/3600))>=1?`${n}小時前`:(n=Math.floor(r/60))>=1?`${n}分鐘前`:r>0?`${r}秒前`:"現在"}function c(t,e){var r=0|t;switch(e){case 0:return`${r}秒`;case 1:return[String((r-r%60)/60),String(r%60)].map(function(t){return t.padStart(2,"0")}).join(":");case 2:return`${r/60|0}分`;case 3:if(r>=3600)return`${parseFloat((r/3600).toFixed(1))}時`;if(60<=r&&r<3600)return`${r/60|0}分`;if(r<60)return`${r}秒`;break;default:return"--"}}function s(t){return[{name:"日",day:0,code:"d_0"},{name:"一",day:1,code:"d_1"},{name:"二",day:2,code:"d_2"},{name:"三",day:3,code:"d_3"},{name:"四",day:4,code:"d_4"},{name:"五",day:5,code:"d_5"},{name:"六",day:6,code:"d_6"}][t]}function l(t){return s(parseInt(t)-1)}function f(t){return`${String(t.hours).padStart(2,"0")}:${String(t.minutes).padStart(2,"0")}`}function d(t,e,r){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(e-1),n.setDate(r),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}r.d(e,{a:()=>d,b:()=>u,c:()=>i,d:()=>l,e:()=>c,f:()=>n,g:()=>s,h:()=>o,i:()=>f,j:()=>a})},6141(t,e,r){r.d(e,{a:()=>a});var n=r(8024);var o={light:{},dark:{}};function a(t){var e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if((0,n.e)(o[e],t))return o[e][t];var r=getComputedStyle(document.documentElement).getPropertyValue(t);return o[e][t]=r,r}},7183(t,e,r){function n(t,e,r,n){var o=r*Math.PI/180-t*Math.PI/180,a=n*Math.PI/180-e*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 1e3*(6378.137*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))))}function o(t){for(var e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;t>=1e3&&r<e.length-1;)t/=1e3,r++;return`${Math.floor(100*t)/100} ${e[r]}`}function a(t){for(var e="";t>0;){var r=(t-1)%26;e=String.fromCharCode(r+65)+e,t=Math.floor((t-1)/26)}return e}r.d(e,{a:()=>o,b:()=>a,c:()=>n})},7968(t,e,r){function n(t,e,r,o){var a=(n.canvas||(n.canvas=document.createElement("canvas"))).getContext("2d"),i=`${e} ${r} ${o}`;return a.font=i,a.measureText(t).width}function o(t,e,r,n){var a=(o.canvas||(o.canvas=document.createElement("canvas"))).getContext("2d"),i=`${e} ${r} ${n}`;a.font=i;var u=a.measureText(t);return[Math.max(Math.abs(u.emHeightAscent||0),Math.abs(u.hangingBaseline||0),Math.abs(u.fontBoundingBoxAscent||0),Math.abs(u.actualBoundingBoxAscent||0)),u.width,u.fontBoundingBoxAscent+u.fontBoundingBoxDescent]}function a(t,e,r,n,o,a,i){a="number"==typeof a?{tl:a,tr:a,br:a,bl:a}:{tl:a.tl||0,tr:a.tr||0,br:a.br||0,bl:a.bl||0},t.beginPath(),t.moveTo(e+a.tl,r),t.lineTo(e+n-a.tr,r),t.quadraticCurveTo(e+n,r,e+n,r+a.tr),t.lineTo(e+n,r+o-a.br),t.quadraticCurveTo(e+n,r+o,e+n-a.br,r+o),t.lineTo(e+a.bl,r+o),t.quadraticCurveTo(e,r+o,e,r+o-a.bl),t.lineTo(e,r+a.tl),t.quadraticCurveTo(e,r,e+a.tl,r),t.closePath(),t.fillStyle=i,t.fill()}function i(t,e,r,n,o,a){var i=o="number"==typeof o?{tl:o,tr:o,br:o,bl:o}:{tl:o.tl||0,tr:o.tr||0,br:o.br||0,bl:o.bl||0},u=i.tl,c=i.tr,s=i.br,l=i.bl,f=[];return a?(0!==u&&f.push(`M${t} ${e+u}`,`Q${t} ${e} ${t+u} ${e}`,`H${t}`,`V${e+u}`),0!==c&&f.push(`M${t+r-c} ${e}`,`Q${t+r} ${e} ${t+r} ${e+c}`,`V${e}`,"H"+(t+r-c)),0!==s&&f.push(`M${t+r} ${e+n-s}`,`Q${t+r} ${e+n} ${t+r-s} ${e+n}`,`H${t+r}`,"V"+(e+n-s)),0!==l&&f.push(`M${t+l} ${e+n}`,`Q${t} ${e+n} ${t} ${e+n-l}`,`V${e+n}`,`H${t+l}`)):f.push(`M${t+u} ${e}`,"H"+(t+r-c),`Q${t+r} ${e} ${t+r} ${e+c}`,"V"+(e+n-s),`Q${t+r} ${e+n} ${t+r-s} ${e+n}`,`H${t+l}`,`Q${t} ${e+n} ${t} ${e+n-l}`,`V${e+u}`,`Q${t} ${e} ${t+u} ${e}`),f}r.d(e,{a:()=>a,b:()=>i,c:()=>o,d:()=>n})},8024(t,e,r){r.d(e,{a:()=>v,b:()=>u,c:()=>c,d:()=>s,e:()=>p,f:()=>d,g:()=>g,i:()=>f,j:()=>i,k:()=>h});var n=r(2284),o=r(9119),a=r(3503),i=r(4462).sha512;function u(t,e){function r(t){return JSON.stringify({e:t})}var n=r(t),o=r(e),i=n.length,u=o.length;if(i===u){if(i>32||u>32){for(var c=a(n),s=a(o),l=!0,f=0;f<8;f++){if(c.charAt(f)!==s.charAt(f)){l=!1;break}}return l}return n===o}return!1}function c(){var t=[[48,10],[97,26],[65,26]],e=Math.floor(268435456*Math.random()),r=Math.floor(268435456*Math.random()),n=new Uint8Array(17);n[0]=95;for(var o=16;o>0;o--){var a=t[r%3],i=a[0]+e%a[1];n[o]=i,e>>>=1,r>>>=1}return String.fromCharCode.apply(null,n)}function s(t){return((new Date).getTime()/t|0).toString(16)}function l(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32e3,n=URL.createObjectURL(t),o=document.createElement("a");return o.href=n,o.download=e,document.body.appendChild(o),o.click(),o.remove(),setTimeout(function(){URL.revokeObjectURL(n)},r),n}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r=arguments.length>2?arguments[2]:void 0,n=new Blob([t],{type:e}),a=new File([n],r,{type:e});navigator.canShare&&navigator.canShare({files:[a]})?navigator.share({files:[a]}).catch(function(t){(0,o.a)("download","下載資料",{text:"下載",action:function(){l(n,r)}})}):l(n,r)}function d(){return window.matchMedia("(display-mode: standalone)").matches}function h(){return!(!("ontouchstart"in window)&&!navigator.maxTouchPoints)}function v(t){return"boolean"==typeof t?t?"true":"false":"unsupported"}function p(t,e){return null!=t&&"object"===(0,n.a)(t)&&!Array.isArray(t)&&Object.prototype.hasOwnProperty.call(t,e)}function g(t){try{return new URL(t),!0}catch(t){return!1}}},8179(t,e,r){function n(t){return document.querySelector(t)}function o(t){return document.querySelectorAll(t)}function a(t,e){return t.querySelector(e)}function i(t,e){return t.querySelectorAll(e)}function u(t,e){for(var r=[],n=t.nextElementSibling;n;)n.classList.contains(e)&&r.push(n),n=n.nextElementSibling;return r}function c(){return document.createElement("div")}r.d(e,{a:()=>c,b:()=>o,c:()=>n,d:()=>i,e:()=>a,f:()=>u})},9469(t,e,r){r.d(e,{a:()=>u,b:()=>i});var n=r(8134),o=r(3030),a=r(4690);function i(){var t=new URL(location.href).searchParams.get("permalink");if(null!==t){var e=String(t);if(/^[0-1]\@(.*)(\~.*){0,1}/.test(e)){var r=e.split(/[\@\~]/);switch(parseInt(r[0])){case 0:(0,n.e)(parseInt(r[1],16)).then(function(t){!1!==t?(0,a.c)(t.id,t.pid):(0,n.c)(r[2]).then(function(t){t.length>0&&(0,a.c)(t[0].id,t[0].pid)})});break;case 1:(0,o.c)(r[1])}}}}function u(t,e){var r=new URL("https://erichsia7.github.io/bus/");switch(t){case 0:r.searchParams.set("permalink",`0@${parseInt(e.id).toString(16)}~${e.name}`);break;case 1:r.searchParams.set("permalink",`1@${e.hash}`)}return decodeURIComponent(r.toString())}},9519(t,e,r){r.d(e,{a:()=>n});var n=r(4668)}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var a=r[t]={exports:{}};return e[t](a,a.exports,n),a.exports}n.m=e,n.amdO={},t=[],n.O=(e,r,o,a)=>{if(!r){var i=1/0;for(l=0;l<t.length;l++){for(var[r,o,a]=t[l],u=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every(t=>n.O[t](r[c]))?r.splice(c--,1):(u=!1,a<i&&(i=a));if(u){t.splice(l--,1);var s=o();void 0!==s&&(e=s)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[r,o,a]},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.u=t=>t+"."+{82:"70d9eb66d5",132:"fcead8e1a2",234:"d8561224f2",281:"005a013b5b",319:"ef5daac75f",327:"5da2443f1b",355:"58288b1c2f",367:"7fbead3e18",525:"5b5290cc9c",611:"9aa30586b4",625:"6d2aa2382b",660:"2fbbf3fdfe",662:"005a013b5b",701:"70d9eb66d5",778:"36a1f3f35a",906:"5b5290cc9c",992:"9aa30586b4"}[t]+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="./",(()=>{n.b="undefined"!=typeof document&&document.baseURI||self.location.href;var t={289:0,423:0,821:0,112:0,225:0,226:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var o,a,[i,u,c]=r,s=0;if(i.some(e=>0!==t[e])){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(c)var l=c(n)}for(e&&e(r);s<i.length;s++)a=i[s],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(l)},r=self.webpackChunkbus=self.webpackChunkbus||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var o=n.O(void 0,[35,180,790,157,374,680,470,496,852,600,537,607,196,139,423,532,821,112,474,225,226,155],()=>n(3441));return o=(o=n.O(o)).default})());
//# sourceMappingURL=e7c61b65eb.js.map