"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[335],{904:(e,t,a)=>{a.d(t,{AE:()=>E,BM:()=>I,WR:()=>y,Z_:()=>L,f1:()=>S,gO:()=>k,kr:()=>w,l$:()=>A});var n=a(8024),i=a(3648),r=a(4927),o=a(6052),s=a(9333),d=a(8379),c=a(5693),l=a(7891),u=a(7908),v=a(5009),p=a(6104),h=(0,i.bv)(".f"),f=(0,i.bv)(".g"),m=100,b=(new Date).getTime(),g=["Home"];function y(e){var t=g.length;g[t-1]!==e&&g.push(e)}function w(e){if(g.indexOf(e)>-1){var t=g.length;g[t-1]===e&&g.pop()}}function L(){var e=g.length;if(e>1)switch(g[e-2]){case"Home":case"FolderIconSelector":case"Location":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.z1)();break;case"FolderEditor":(0,s.I6)();break;case"FolderManager":(0,d.m)();break;case"Search":(0,v.Bb)();break;case"Settings":(0,p.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.F)();break;case"RegisterNotification":(0,u.hy)()}}function A(){var e=g.length;if(e>1){var t=g[e-2];switch(g.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,o.pd)();break;case"FolderEditor":(0,s.uy)();break;case"FolderManager":(0,d.g)();break;case"Search":(0,v.rf)();break;case"Settings":(0,p.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$)();break;case"RegisterNotification":(0,u.XG)()}}}function I(){var e=0;(0,n.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,i.bv)(".f svg.h").style.setProperty("--i",`${e}px`)}function E(e){function t(){h.classList.add("j"),h.addEventListener("animationend",(function(){h.setAttribute("displayed","false"),h.classList.remove("j"),"function"==typeof e&&e()}),{once:!0})}var a=(new Date).getTime();a-b<m?setTimeout(t,Math.max(1,a-b)):t()}function S(){f.setAttribute("displayed","true")}function k(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1440;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}},3030:(e,t,a)=>{a.d(t,{az:()=>le,dM:()=>ue,eS:()=>ce,s_:()=>K,so:()=>de});var n=a(5767),i=a(9566),r=a(2757),o=a(4636),s=a(5314),d=a(3459),c=a(7968),l=a(8024),u=a(3648),v=a(5579),p=a(4537),h=a(904),f=a(9119),m=a(3041),b=a(752);function g(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return y(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function w(e,t,a,n,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void a(e)}s.done?t(d):Promise.resolve(d).then(n,i)}var L=(0,u.bv)(".k"),A=(0,u.aI)(L,".l"),I=(0,u.aI)(A,".m"),E=(0,u.aI)(L,".n"),S=(0,u.aI)(A,".o"),k=(0,u.aI)(S,".p"),C=(0,u.aI)(A,".q"),x=(0,u.aI)(C,".r"),T=(0,u.aI)(A,".s .t"),M={},_=!0,P=!1,F=0,R=0,$=0,j={},O=0,H=!1,N=1e4,Z=15e3,D=5e3,z=15e3,B=!0,q=0,Q=0,U="",W=!1,X=!1,G=!1,J="",V=20;function K(){E.addEventListener("touchstart",(function(){F=Math.round(E.scrollLeft/O)}),{passive:!0}),E.addEventListener("scroll",(function(e){H=!0;var t=e.target.scrollLeft/O;R=t>F?F+1:F-1;var a=j[`g_${F}`]||{width:0,offset:0},n=j[`g_${R}`]||{width:0,offset:0},i=a.width+(n.width-a.width)*Math.abs(t-F),r=-1*(a.offset+(n.offset-a.offset)*Math.abs(t-F))+.5*O-.5*i;Y($,r,i-V,t),t===R&&(F=Math.round(E.scrollLeft/O),H=!1)}),{passive:!0})}function Y(e,t,a,n){E.style.setProperty("--u",e.toString()),x.style.setProperty("--v",a.toString()),k.style.setProperty("--w",`${t.toFixed(5)}px`),k.style.setProperty("--x",n.toFixed(5))}function ee(e){var t=e;if(W){var a=t.detail.progress-1;T.style.setProperty("--_",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,ee)}function te(){var e=(0,l.zx)(),t=document.createElement("div");t.classList.add("aa"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var a=document.createElement("div");a.classList.add("ba");var n=document.createElement("div");n.classList.add("ca");var i=document.createElement("div");i.classList.add("da"),i.setAttribute("code","-1"),i.setAttribute("displayed","false");var r=document.createElement("div");r.classList.add("ea"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),n.appendChild(i),n.appendChild(r);var o=document.createElement("div");o.classList.add("fa");var s=document.createElement("div");s.classList.add("ga");var d=document.createElement("div");d.classList.add("ha");var c=document.createElement("div");c.classList.add("ia");var u=document.createElement("div");u.classList.add("ja"),u.setAttribute("code","0"),u.setAttribute("displayed","false");var v=document.createElement("div");v.classList.add("ka"),v.setAttribute("code","0"),v.setAttribute("displayed","true"),c.appendChild(u),c.appendChild(v);var h=document.createElement("div");h.classList.add("la"),h.innerHTML=(0,p.Z)("keyboard_arrow_down"),h.onclick=function(){le(e)};var f=document.createElement("div");f.classList.add("ma"),d.appendChild(c),d.appendChild(h),d.appendChild(f),a.appendChild(n),a.appendChild(o),a.appendChild(s),a.appendChild(d);var g=document.createElement("div");g.classList.add("na"),g.setAttribute("displayed","false");var y=document.createElement("div");y.classList.add("oa");var w=document.createElement("div");w.classList.add("pa"),w.setAttribute("highlighted","true"),w.setAttribute("type","tab"),w.setAttribute("code","0");var L=document.createElement("div");L.classList.add("qa"),L.innerHTML=(0,p.Z)("directions_bus"),w.appendChild(L),w.appendChild(document.createTextNode("公車")),w.onclick=function(){ue(e,0)};var A=document.createElement("div");A.classList.add("pa"),A.setAttribute("highlighted","false"),A.setAttribute("type","tab"),A.setAttribute("code","1");var I=document.createElement("div");I.classList.add("qa"),I.innerHTML=(0,p.Z)("departure_board"),A.appendChild(I),A.appendChild(document.createTextNode("抵達時間")),A.onclick=function(){ue(e,1)};var E=document.createElement("div");E.classList.add("pa"),E.setAttribute("highlighted","false"),E.setAttribute("type","save-to-folder");var S=document.createElement("div");S.classList.add("qa"),S.innerHTML=(0,p.Z)("folder"),E.appendChild(S),E.appendChild(document.createTextNode("儲存")),E.onclick=function(){(0,m.BI)("stop-on-location",[e,null,null])};var k=document.createElement("div");k.classList.add("pa"),k.setAttribute("highlighted","false"),k.setAttribute("type","schedule-notification"),k.setAttribute("enabled","true");var C=document.createElement("div");C.classList.add("qa"),C.innerHTML=(0,p.Z)("notifications"),k.appendChild(C),k.appendChild(document.createTextNode("到站通知")),k.onclick=function(){(0,b.Ho)("stop-on-location",[e,null,null,null])},y.appendChild(w),y.appendChild(A),y.appendChild(E),y.appendChild(k);var x=document.createElement("div");x.classList.add("ra"),x.setAttribute("displayed","true");var T=document.createElement("div");return T.classList.add("sa"),T.setAttribute("displayed","false"),g.appendChild(y),g.appendChild(x),g.appendChild(T),t.appendChild(a),t.appendChild(g),{element:t,id:e}}function ae(){var e=document.createElement("div");e.classList.add("ta");var t=document.createElement("div");t.classList.add("ua");var a=document.createElement("div");a.classList.add("va"),t.appendChild(a);var n=document.createElement("div");return n.classList.add("wa"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function ne(){var e=document.createElement("div");e.classList.add("ya");var t=document.createElement("div");t.classList.add("za");var a=document.createElement("div");return a.classList.add("_a"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function ie(e,t,a){function n(e,n,r){function s(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,o=n.bottom,s=n.right,d=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".ia"),v=(0,u.aI)(l,".ja"),p=(0,u.aI)(l,".ka");v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,a&&o>0&&i<c&&s>0&&r<d?(p.addEventListener("animationend",(function(){p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text,p.classList.remove("ab"),v.setAttribute("displayed","false")}),{once:!0}),v.setAttribute("displayed","true"),p.classList.add("ab")):(p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text)}function d(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,o=n.bottom,s=n.right,d=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".ca"),v=(0,u.aI)(l,".da"),p=(0,u.aI)(l,".ea");v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,a&&o>0&&i<c&&s>0&&r<d?(p.addEventListener("animationend",(function(){p.setAttribute("code",t.ranking.code.toString()),p.innerText=t.ranking.text,p.classList.remove("bb"),v.setAttribute("displayed","false")}),{once:!0}),v.setAttribute("displayed","true"),p.classList.add("bb")):(p.setAttribute("code",t.ranking.code.toString()),p.innerText=t.ranking.text)}function c(e,t){(0,u.aI)(e,".fa").innerText=t.route_direction}function h(e,t){(0,u.aI)(e,".ga").innerText=t.route_name}function f(e,t){(0,u.aI)(e,".ra").innerHTML=0===t.buses.length?'<div class="cb">目前沒有公車可顯示</div>':t.buses.map((function(e){return`<div class="db" on-this-route="${e.onThisRoute}"><div class="eb"><div class="fb">${(0,p.Z)("directions_bus")}</div><div class="gb">${e.carNumber}</div></div><div class="hb"><div class="ib">路線：${e.RouteName}</div><div class="jb">狀態：${e.status.text}</div><div class="kb">類型：${e.type}</div></div></div>`})).join("")}function g(e,t){(0,u.aI)(e,".sa").innerHTML=0===t.busArrivalTimes.length?'<div class="lb">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map((function(e){return`<div class="mb"><div class="nb"><div class="ob">${(0,p.Z)("calendar_view_day")}</div><div class="pb">${e.personalSchedule.name}</div><div class="qb">週${(0,v.kd)(e.day).name} ${(0,v.pn)(e.personalSchedule.period.start)} - ${(0,v.pn)(e.personalSchedule.period.end)}</div></div><div class="rb">${e.chart}</div></div>`})).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function w(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function L(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}function A(e,t){var a=(0,u.aI)(e,".na"),n=(0,u.aI)(a,".oa"),r=(0,u.aI)(n,'.pa[type="save-to-folder"]');r.onclick=function(){(0,m.BI)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,i.LH)("stop",t.stopId).then((function(e){r.setAttribute("highlighted",(0,l.xZ)(e))}))}function I(e,t){var a=(0,u.aI)(e,".na"),n=(0,u.aI)(a,".oa"),i=(0,u.aI)(n,'.pa[type="schedule-notification"]');i.onclick=function(){(0,b.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var r=(0,o.Zc)(t.stopId);i.setAttribute("highlighted",(0,l.xZ)(r))}null===r?(s(e,n,a),d(e,n,a),c(e,n),h(e,n),f(e,n),g(e,n),y(e,t),w(e,a),L(e,t),A(e,n),I(e,n)):(n.status.time!==r.status.time&&(s(e,n,a),I(e,n)),r.ranking.number===n.ranking.number&&r.ranking.code===n.ranking.code||d(e,n,a),r.stopId!==n.stopId&&(c(e,n),h(e,n),A(e,n)),(0,l.hw)(r.buses,n.buses)||f(e,n),(0,l.hw)(r.busArrivalTimes,n.busArrivalTimes)||g(e,n),a!==_&&w(e,a),t!==P&&(y(e,t),L(e,t)))}function r(e,n,i){function r(e,t){(0,u.aI)(e,".za").innerHTML=(0,p.Z)(t.icon)}function o(e,t){(0,u.aI)(e,"._a").innerHTML=t.value}function s(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function d(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}null===i?(r(e,n),o(e,n),s(e,a),d(e,t)):((0,l.hw)(i.icon,n.icon)||r(e,n),(0,l.hw)(i.value,n.value)||o(e,n),a!==_&&s(e,a),t!==P&&d(e,t))}var s=(0,h.gO)("window"),d=s.width,f=s.height,g=e.groupQuantity,y=e.itemQuantity,w=e.groupedItems,L=e.groups;$=g,O=d;for(var A=0,x=0;x<g;x++){var T=(0,c.q_)(L[`g_${x}`].name,500,"17px",'"Noto Sans TC", sans-serif')+V;j[`g_${x}`]={width:T,offset:A},A+=T}var R=-1*j[`g_${F}`].offset+.5*O-.5*j[`g_${F}`].width;H||Y($,R,j[`g_${F}`].width-V,F),I.innerHTML=`<span>${e.LocationName}</span>`,I.setAttribute("animation",(0,l.xZ)(a)),I.setAttribute("skeleton-screen",(0,l.xZ)(t)),S.setAttribute("animation",(0,l.xZ)(a)),S.setAttribute("skeleton-screen",(0,l.xZ)(t)),C.setAttribute("skeleton-screen",(0,l.xZ)(t));var N,Z=(0,u.jg)(E,".ta").length;if(g!==Z){var D=Z-g;if(D<0)for(var z=0;z<Math.abs(D);z++){var B=ae();E.appendChild(B.element);var q=(N=void 0,(N=document.createElement("div")).classList.add("xa"),{element:N,id:""});k.appendChild(q.element)}else for(var Q=(0,u.jg)(E,".ta"),U=(0,u.jg)(k,".xa"),W=0;W<Math.abs(D);W++){var X=Z-1-W;Q[X].remove(),U[X].remove()}}for(var G=(0,u.jg)(E,".ta"),J=0;J<g;J++){var K=`g_${J}`,ee=G[J],ie=(0,u.jg)(ee,".wa .aa").length;if(y[K]!==ie){var re=ie-y[K];if(re<0)for(var oe=(0,u.aI)(ee,".wa"),se=0;se<Math.abs(re);se++){var de=te();oe.appendChild(de.element)}else for(var ce=(0,u.jg)(ee,".wa .aa"),le=0;le<Math.abs(re);le++){ce[ie-1-le].remove()}}var ue=(0,u.jg)((0,u.jg)(E,".ta")[J],".ua .va .ya").length,ve=L[K].properties.length;if(ve!==ue){var pe=ue-ve;if(pe<0)for(var he=(0,u.aI)(ee,".ua"),fe=(0,u.aI)(he,".va"),me=0;me<Math.abs(pe);me++){var be=ne();fe.appendChild(be.element)}else for(var ge=(0,u.aI)(ee,".ua"),ye=(0,u.aI)(ge,".va"),we=(0,u.jg)(ye,".ya"),Le=0;Le<Math.abs(pe);Le++){we[ue-1-Le].remove()}}}for(var Ae=0;Ae<g;Ae++){var Ie=`g_${Ae}`,Ee=(0,u.jg)(k,".xa")[Ae];Ee.innerHTML=`<span>${L[Ie].name}</span>`,Ee.style.setProperty("--sb",`${j[Ie].width}px`),Ee.style.setProperty("--tb",Ae.toString());for(var Se=(0,u.jg)(E,".ta")[Ae],ke=L[Ie].properties.length,Ce=0;Ce<ke;Ce++){var xe=L[Ie].properties[Ce],Te=(0,u.jg)(Se,".ua .va .ya")[Ce];if(M.hasOwnProperty("groups"))if(M.groups.hasOwnProperty(Ie))if(M.groups[Ie].properties[Ce])r(Te,xe,M.groups[Ie].properties[Ce]);else r(Te,xe,null);else r(Te,xe,null);else r(Te,xe,null)}for(var Me=0;Me<y[Ie];Me++){var _e=(0,u.jg)(Se,".wa .aa")[Me],Pe=w[Ie][Me];if(M.hasOwnProperty("groupedItems"))if(M.groupedItems.hasOwnProperty(Ie))if(M.groupedItems[Ie][Me])n(_e,Pe,M.groupedItems[Ie][Me]);else n(_e,Pe,null);else n(_e,Pe,null);else n(_e,Pe,null)}}M=e,_=a,P=t}function re(){return oe.apply(this,arguments)}function oe(){var e;return e=function*(){var e=(0,d.Js)("playing_animation"),t=(0,d.Js)("refresh_interval"),a=(0,h.gO)("location-bus-arrival-time-chart");B=t.dynamic,Z=t.baseInterval,W=!0,U=(0,l.zx)(),T.setAttribute("refreshing","true"),T.classList.remove("z"),document.addEventListener(U,ee);var i=yield(0,r.R)(J,a.width,a.height,U);ie(i,!1,e);var o=0;B&&(o=yield(0,n.wz)()),q=(new Date).getTime(),Q=B?Math.max(q+D,i.dataUpdateTime+Z/o):q+Z,z=Math.max(D,Q-q),W=!1,T.setAttribute("refreshing","false"),T.style.setProperty("--y",`${z}ms`),T.classList.add("z")},oe=function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function o(e){w(r,n,i,o,s,"next",e)}function s(e){w(r,n,i,o,s,"throw",e)}o(void 0)}))},oe.apply(this,arguments)}function se(){re().then((function(){X?setTimeout((function(){se()}),Math.max(D,Q-(new Date).getTime())):G=!1})).catch((function(e){X?((0,f.a)(`地點網路連線中斷，將在${N/1e3}秒後重試。`,"error"),setTimeout((function(){se()}),N)):G=!1}))}function de(e){(0,h.WR)("Location"),(0,s.XK)("location",e),J=e,F=0,L.setAttribute("displayed","true"),E.scrollLeft=0,function(){for(var e=(0,d.Js)("playing_animation"),t=(0,h.gO)("window"),a=(t.width,t.height),n={g_0:Math.floor(a/50)+5,g_1:Math.floor(a/50)+5},i={},r=0;r<2;r++){var o=`g_${r}`;i[o]=[];for(var s=0;s<n[o];s++)i[o].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}ie({groupedItems:i,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:n,LocationName:"載入中",dataUpdateTime:0},!0,e)}(),X||(X=!0,G?re():(G=!0,se())),(0,h.Z_)()}function ce(){L.setAttribute("displayed","false"),X=!1,(0,h.l$)()}function le(e){var t=(0,u.aI)(E,`.ta .wa .aa#${e}`),a=(0,u.aI)(t,".na"),n=t.parentElement,i=(0,u.ji)(t,"aa"),r=i.length,o=n.getBoundingClientRect(),s=t.getBoundingClientRect().top-o.top,d="true"===t.getAttribute("stretched"),c="true"===t.getAttribute("animation");if(c){var l=d?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--vb",`${s}px`);for(var v=0;v<r;v++){var p=i[v];p.setAttribute("push-direction",l),p.setAttribute("push-state","1")}t.addEventListener("transitionend",(function(){for(var e=0;e<r;e++){var a=i[e];a.setAttribute("push-direction","0"),a.setAttribute("push-state","0")}t.setAttribute("stretching","false")}),{once:!0}),t.addEventListener("transitionstart",(function(){for(var e=0;e<r;e++){i[e].setAttribute("push-state","2")}}),{once:!0})}d?(c?a.addEventListener("transitionend",(function(){a.setAttribute("displayed","false")}),{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}function ue(e,t){var a,n=(0,u.aI)(E,`.ta .wa .aa#${e}`),i=(0,u.aI)(n,".na"),r=(0,u.aI)(i,".oa"),o=g((0,u.jg)(r,'.pa[highlighted="true"][type="tab"]'));try{for(o.s();!(a=o.n()).done;){a.value.setAttribute("highlighted","false")}}catch(e){o.e(e)}finally{o.f()}switch((0,u.aI)(r,`.pa[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,u.aI)(n,".ra").setAttribute("displayed","true"),(0,u.aI)(n,".sa").setAttribute("displayed","false");break;case 1:(0,u.aI)(n,".ra").setAttribute("displayed","false"),(0,u.aI)(n,".sa").setAttribute("displayed","true")}}},4356:(e,t,a)=>{a.d(t,{default:()=>q});var n=a(6483),i=a(8925),r=a(5767),o=a(9566),s=a(4636),d=a(5314),c=a(3459),l=a(3251),u=a(1238),v=a(1531),p=a(4927),h=a(9499),f=a(6052),m=a(9333),b=a(6189),g=a(8379),y=a(540),w=a(6082),L=a(6091),A=a(904),I=a(3030),E=a(2174),S=a(8380),k=a(5693),C=a(7891),x=a(8279),T=a(7908),M=a(8332),_=a(9009),P=a(4474),F=a(4690),R=a(3041),$=a(752),j=a(5009),O=a(6104),H=a(6166),N=a(2994),Z=a(9469),D=a(3648),z=!1,B=!1;window.bus={initialize:function(){!1===z&&(z=!0,(0,A.BM)(),(0,c.Yq)().then((function(){(0,L.Q)(),(0,y.F)(),(0,l.A)().then((function(e){if("ok"===e){(0,F.S5)(),(0,I.s_)(),(0,j.ld)(),window.addEventListener("resize",(function(){(0,j.ld)()})),screen&&screen.orientation&&screen.orientation.addEventListener("change",(function(){(0,j.ld)()})),(0,L.u)(),(0,o.Rh)().then((function(){(0,y.a)()}));var t=window.matchMedia("(prefers-color-scheme: dark)"),a=(0,D.bv)(".wb .xb .yb #search_input");t.addEventListener("change",(function(){(0,j.gn)(a.selectionStart,a.selectionEnd)})),a.addEventListener("paste",(function(){(0,j.RC)(),(0,j.gn)(a.selectionStart,a.selectionEnd)})),a.addEventListener("cut",(function(){(0,j.RC)(),(0,j.gn)(a.selectionStart,a.selectionEnd)})),a.addEventListener("selectionchange",(function(){(0,j.RC)(),(0,j.gn)(a.selectionStart,a.selectionEnd)})),document.addEventListener("selectionchange",(function(){(0,j.RC)(),(0,j.gn)(a.selectionStart,a.selectionEnd)})),a.addEventListener("keyup",(function(){(0,j.RC)(),(0,j.gn)(a.selectionStart,a.selectionEnd)}));var n=(0,D.bv)(".zb ._b .ac #search_material_symbols_input");n.addEventListener("paste",(function(){(0,b.Pk)(n.value)})),n.addEventListener("cut",(function(){(0,b.Pk)(n.value)})),n.addEventListener("selectionchange",(function(){(0,b.Pk)(n.value)})),document.addEventListener("selectionchange",(function(){(0,b.Pk)(n.value)})),n.addEventListener("keyup",(function(){(0,b.Pk)(n.value)})),(0,Z._)(),(0,A.AE)((function(){(0,s.Db)(),(0,s.cS)().then((function(){(0,s.z9)()})),document.addEventListener("click",(function(){(0,v.to)(),(0,u.q)()}),{once:!0})}))}"fetchError"!==e&&"unknownError"!==e||((0,A.f1)(),(0,A.AE)())})).catch((function(e){(0,A.f1)(),(0,A.AE)()}))})))},secondlyInitialize:function(){B||(B=!0,(0,w.X)(),(0,r.fV)(),(0,i.Ir)(),(0,n.$t)(),(0,d.FU)(),(0,r.fV)().then((function(){(0,r.MN)().then((function(){(0,r.cy)()}))})))},route:{stretchRouteItem:F.aU,openRoute:F.SR,closeRoute:F.U7,switchRoute:F.Ch,switchRouteBodyTab:F.py,closeRouteDetails:P.GZ,shareRoutePermalink:M.w,showRoutePermalinkQRCode:M.e,switchCalendarDay:_.f4},location:{openLocation:I.so,closeLocation:I.eS,stretchLocationItem:I.az,switchLocationBodyTab:I.dM},folder:{openSaveToFolder:R.BI,closeSaveToFolder:R.nS,openFolderManager:g.g,closeFolderManager:g.m,openFolderEditor:m.uy,closeFolderEditor:m.I6,openFolderIconSelector:b.r7,closeFolderIconSelector:b.jW,openFolderCreator:f.pd,closeFolderCreator:f.z1,createFormulatedFolder:f.c6,saveEditedFolder:m.Bo,selectFolderIcon:b.Ou,saveStopItemOnRoute:R.JL,saveStopItemOnLocation:R.Lb,saveRouteOnDetailsPage:R.Dh,saveRouteOnRoute:R.jD,removeItemOnFolderEditor:m.cG,moveItemOnFolderEditor:m.Lq},search:{openSearch:j.rf,closeSearch:j.Bb,typeTextIntoInput:j._O,deleteCharFromInput:j.mD,emptyInput:j.Wb,openSystemKeyboard:j.vp,switchSearchTypeFilter:j.H2},storage:{openStorage:N.G,closeStorage:N.Q},dataUsage:{openDataUsage:h.k,closeDataUsage:h.i},personalSchedule:{openPersonalScheduleManager:C.z,closePersonalScheduleManager:C.Z,openPersonalScheduleCreator:S.I1,closePersonalScheduleCreator:S.GJ,createFormulatedPersonalSchedule:S.Ps,switchPersonalScheduleCreatorDay:S.om,openPersonalScheduleEditor:k.bF,closePersonalScheduleEditor:k.Xy,switchPersonalScheduleEditorDay:k.Dn,saveEditedPersonalSchedule:k.gv},settings:{openSettings:O.Ow,closeSettings:O.os,openSettingsOptions:H.yH,closeSettingsOptions:H.wx,settingsOptionsHandler:H.Yi,downloadExportFile:O.vv,openFileToImportData:O.rY,viewCommitOfCurrentVersion:O.hP,showPromptToAskForPersistentStorage:O.jk},bus:{openBus:p.$,closeBus:p.F},notification:{openNotificationScheduleManager:E.Sv,closeNotificationScheduleManager:E.m_,openRegisterNotification:T.XG,closeRegisterNotification:T.hy,saveFormulatedRegisterNotification:T.NW,openScheduleNotification:$.Ho,closeScheduleNotification:$.b$,scheduleNotificationForStopItemOnRoute:$.H9,scheduleNotificationForStopItemOnLocation:$.b6,cancelNotificationOnNotificationScheduleManager:E.Gv},qrcode:{openQRCode:x.X8,closeQRCode:x.Vc}};const q=window.bus},4927:(e,t,a)=>{a.d(t,{F:()=>L,$:()=>w});var n=a(6160),i=a(5314),r=a(3459),o=a(8024),s=a(3648),d=a(904),c=a(4537),l=[],u=!1,v=!0;function p(){var e=document.createElement("div");e.classList.add("bc");var t=document.createElement("div");t.classList.add("cc");var a=document.createElement("div");return a.classList.add("dc"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function h(e,t,a,n){function i(e,t,i){function r(e,t){(0,s.aI)(e,".cc").innerHTML=(0,c.Z)(t.icon)}function d(e,t){(0,s.aI)(e,".dc").innerText=t.value}function l(e,t){e.setAttribute("animation",t)}function p(e,t){e.setAttribute("skeleton-screen",t)}null===i?(r(e,t),d(e,t),p(e,a),l(e,n)):((0,o.hw)(i,t)||r(e,t),(0,o.hw)(i,t)||d(e,t),a!==u&&p(e,a),n!==v&&l(e,n))}var r=t.length,d=(0,s.jg)(e,".ec .bc").length;if(r!==d){var h=d-r;if(h<0)for(var f=0;f<Math.abs(h);f++){var m=p();(0,s.aI)(e,".ec").appendChild(m.element)}else for(var b=0;b<Math.abs(h);b++){var g=d-1-b;(0,s.jg)(e,".ec .bc")[g].remove()}}for(var y=(0,s.jg)(e,".ec .bc"),w=0;w<r;w++){var L=y[w],A=t[w];0===l.length?i(L,A,null):i(L,A,l[w])}l=t,v=n,u=a}function f(e,t,a,n,i,r,o){try{var s=e[r](o),d=s.value}catch(e){return void a(e)}s.done?t(d):Promise.resolve(d).then(n,i)}var m=(0,s.bv)(".fc"),b=((0,s.aI)(m,".gc"),(0,s.aI)(m,".hc")),g=(0,s.aI)(b,".ic"),y=(0,s.aI)(g,'.jc[group="properties"]');(0,s.aI)(g,'.jc[group="location"]');function w(e){(0,d.WR)("Bus"),(0,i.XK)("bus",e),m.setAttribute("displayed","true"),function(e){A.apply(this,arguments)}(e),(0,d.Z_)()}function L(){m.setAttribute("displayed","false"),(0,d.l$)()}function A(){var e;return e=function*(e){!function(e){for(var t=(0,r.Js)("playing_animation"),a=[],n=0;n<5;n++)a.push({key:n,icon:"none",value:""});h(e,a,!0,t)}(y);var t=(0,r.Js)("playing_animation"),a=(0,o.zx)(),i=yield(0,n.i)(e,a);h(y,i.properties,!1,t)},A=function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function o(e){f(r,n,i,o,s,"next",e)}function s(e){f(r,n,i,o,s,"throw",e)}o(void 0)}))},A.apply(this,arguments)}}}]);
//# sourceMappingURL=4e13b5be10a9486b1966.js.map