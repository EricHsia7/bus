!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():t.bus=r()}(self,(()=>(()=>{"use strict";var t,r,e={5589:(t,r,e)=>{function n(t,r,e){var n=e.x-r.x,o=e.y-r.y,a=n*n+o*o,c=((t.x-r.x)*n+(t.y-r.y)*o)/a;if(c<0)n=t.x-r.x,o=t.y-r.y;else if(c>1)n=t.x-e.x,o=t.y-e.y;else{var i={x:r.x+c*n,y:r.y+c*o};n=t.x-i.x,o=t.y-i.y}return Math.sqrt(n*n+o*o)}function o(t,r){if(t.length<3)return t;for(var e=0,a=0,c=1;c<t.length-1;c++){var i=n(t[c],t[0],t[t.length-1]);i>e&&(a=c,e=i)}if(e>r){var s=t.slice(0,a+1),l=t.slice(a),f=o(s,r),u=o(l,r);return f.slice(0,f.length-1).concat(u)}return[t[0],t[t.length-1]]}function a(t,r,e){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(r-1),n.setDate(e),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}e(3790);function c(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,c,i=[],s=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;s=!1}else for(;!(s=(n=a.call(e)).done)&&(i.push(n.value),i.length!==r);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=e.return&&(c=e.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(t,r)||i(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){if(t){if("string"==typeof t)return s(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,r):void 0}}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}self.onmessage=function(t){var r=function(t){var r,e=c(t,4),n=e[0],s=e[1],f=e[2],u=e[3],v=n.length,y=[],d=0,h=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=i(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==e.return||e.return()}finally{if(s)throw a}}}}(n);try{for(h.s();!(r=h.n()).done;){var p=r.value;y.push(p.stats.max),y.push(p.stats.min),d+=p.stats.sum}}catch(t){h.e(t)}finally{h.f()}for(var x=function(t){var r=t.length;if(0===r)return[0,0];for(var e=1/0,n=-1/0,o=r-1;o>=0;o--){var a=t[o];a>n&&(n=a),a<e&&(e=a)}return[e,n]}(y),b=0===x[1]?1:x[1],g=0===x[0]?1:x[0],m=n[0].date,w=n[v-1].date,k=a(m[0],m[1],m[2]),j=a(w[0],w[1],w[2]),O=[],S=0;S<v;S++)for(var M=n[S].data,A=0;A<l;A++){var I=u+(S+A/l)/8*s,C=u+(1-M[A]/b)*f;O.push({x:I,y:C})}var T='<line x1="'.concat(u,'" y1="').concat(f+u,'" x2="').concat(u+s,'" y2="').concat(f+u,'" stroke="var(--a)" stroke-width="1" />'),D='<line x1="'.concat(u,'" y1="').concat(u,'" x2="').concat(u,'" y2="').concat(f+u,'" stroke="var(--a)" stroke-width="1" />'),F='<text x="'.concat(u+s/2,'" y="').concat(u+f+u,'" text-anchor="middle" font-size="12" fill="var(--a)">時間</text>'),L='<text x="'.concat(u/2,'" y="').concat(u+f/2,'" text-anchor="middle" font-size="12" fill="var(--a)" transform="rotate(-90, ').concat(.7*u,", ").concat(u+f/2,')">傳輸量</text>'),z=function(t,r){if(t.length<1)return"";for(var e="M".concat(t[0].x*r,",").concat(t[0].y*r),n=1;n<t.length-1;n++){var o=t[n],a=t[n+1]||o;e+="Q".concat(o.x*r,",").concat(o.y*r,",").concat((o.x*r+a.x*r)/2,",").concat((o.y*r+a.y*r)/2)}var c=t[t.length-1];return e+"L".concat(c.x*r,",").concat(c.y*r)}(o(O,1.1),1),E="M".concat(u,",").concat(f+u).concat(z,"L").concat(u+s,",").concat(f+u,"L").concat(u,",").concat(f+u),G='<path d="'.concat(z,'" fill="none" stroke="var(--b)" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" opacity="1"></path>'),P='<path d="'.concat(E,'" stroke="none" stroke-width="0" fill="url(#grad1)"></path>'),q='<linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.3);" /><stop offset="73%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.09);" /><stop offset="100%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0);" /></linearGradient>',B='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(s+2*u," ").concat(f+2*u,'"><defs>').concat(q,"</defs>").concat(P).concat(G).concat(T).concat(D).concat(F).concat(L,"</svg>"),H={stats:{max:b,min:g,sum:d},period:{start:k,end:j},chart:B};return H}(t.data);self.postMessage(r)};var l=1440}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.m=e,o.x=()=>{var t=o.O(void 0,[790],(()=>o(5589)));return t=o.O(t)},t=[],o.O=(r,e,n,a)=>{if(!e){var c=1/0;for(f=0;f<t.length;f++){for(var[e,n,a]=t[f],i=!0,s=0;s<e.length;s++)(!1&a||c>=a)&&Object.keys(o.O).every((t=>o.O[t](e[s])))?e.splice(s--,1):(i=!1,a<c&&(c=a));if(i){t.splice(f--,1);var l=n();void 0!==l&&(r=l)}}return r}a=a||0;for(var f=t.length;f>0&&t[f-1][2]>a;f--)t[f]=t[f-1];t[f]=[e,n,a]},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((r,e)=>(o.f[e](t,r),r)),[])),o.u=t=>({589:"490d45de0d76e89d781f",790:"dd282c91b8b9f5ae9ebe"}[t]+".js"),o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),o.p="./",(()=>{o.b=self.location+"";var t={589:1};o.f.i=(r,e)=>{t[r]||importScripts(o.p+o.u(r))};var r=self.webpackChunkbus=self.webpackChunkbus||[],e=r.push.bind(r);r.push=r=>{var[n,a,c]=r;for(var i in a)o.o(a,i)&&(o.m[i]=a[i]);for(c&&c(o);n.length;)t[n.pop()]=1;e(r)}})(),r=o.x,o.x=()=>o.e(790).then(r);var a=o.x();return a=a.default})()));
//# sourceMappingURL=490d45de0d76e89d781f.js.map