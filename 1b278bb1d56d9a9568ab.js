"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[13],{112(){},124(){},245(){},321(){},626(){},969(){},1003(){},1195(){},1351(e,t,i){i.d(t,{a:()=>x,b:()=>w,c:()=>k,d:()=>T,e:()=>j,f:()=>M});var n=i(467),a=i(8011),r=i(6788),u=i(6983),s=i(3459),d=i(8179),c=i(8024),o=i(9469),l=i(251),p=i(4537),h=i(904),f=i(8279),v={},m=!1,y=!1,g=(0,d.c)(".ag"),b=(0,d.e)(g,".fg"),A=(0,d.e)(b,".gg");function C(){var e=(0,d.a)();e.classList.add("hg");var t=(0,d.a)();t.classList.add("ig"),t.appendChild((0,p.a)()),e.appendChild(t);var i=(0,d.a)();return i.classList.add("jg"),e.appendChild(i),e}function _(e,t,i){function n(e,n,a){function r(e,t){var i=(0,d.e)(e,".ig");(0,p.c)(i,t.icon)}function u(e,t){(0,d.e)(e,".jg").innerText=t.name}function s(e,t){e.onclick=t.action}function o(e,t){e.setAttribute("animation",(0,c.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,c.a)(t))}null==a?(r(e,n),u(e,n),s(e,n),o(e,i),l(e,t)):(a.key!==n.key&&(r(e,n),u(e,n),s(e,n)),i!==m&&o(e,i),t!==y&&l(e,t))}var a=e.actions,r=e.actionsQuantity,u=Array.from((0,d.d)(A,".hg")),s=u.length;if(r!==s){var o=s-r;if(o<0){for(var l=new DocumentFragment,h=0;h>o;h--){var f=C();l.appendChild(f),u.push(f)}A.append(l)}else if(o>0)for(var g=s-1,b=s-o-1;g>b;g--)u[g].remove(),u.splice(g,1)}for(var _=0;_<r;_++){var L=u[_],j=a[_];if((0,c.e)(v,"actions"))if(v.actions[_])n(L,j,v.actions[_]);else n(L,j,null);else n(L,j,null)}v=e,m=i,y=t}function L(){return(L=(0,n.a)(function*(e){var t=(0,s.b)("playing_animation"),i=(0,c.c)();!function(){for(var e=(0,s.b)("playing_animation"),t=[],i=0;i<3;i++)t.push({name:"",icon:"",key:`action-${i}`,action:function(){}});_({actions:t,actionsQuantity:3,hash:""},!0,e)}(),_(yield(0,u.a)(e,i),!1,t)})).apply(this,arguments)}function j(){g.setAttribute("displayed","true")}function w(){g.setAttribute("displayed","false")}function k(e){(0,h.c)("LocationDetails"),j(),function(e){L.apply(this,arguments)}(e),(0,h.b)()}function x(){w(),(0,h.i)(),(0,h.e)("LocationDetails")}function T(e){return S.apply(this,arguments)}function S(){return(S=(0,n.a)(function*(e){var t=(0,c.c)(),i=yield(0,a.a)(t,1);(0,r.a)(t),(0,r.b)(t);var n=`ml_${e}`;if((0,c.e)(i,n)){var u=i[n],s=(0,o.a)(1,{hash:e});(0,l.b)(u.n,s)}})).apply(this,arguments)}function M(e){return E.apply(this,arguments)}function E(){return(E=(0,n.a)(function*(e){var t=(0,c.c)(),i=yield(0,a.a)(t,1);(0,r.a)(t),(0,r.b)(t);var n=`ml_${e}`;if((0,c.e)(i,n)){var u=(0,o.a)(1,{hash:e});(0,f.c)(u)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(e,t,i){i.d(t,{a:()=>N,b:()=>F,c:()=>H,d:()=>z});var n=i(467),a=i(5767),r=i(365),u=i(3422),s=i(3459),d=i(8179),c=i(8024),o=i(4537),l=i(904),p=i(9119),h=(0,d.c)(".ih"),f=(0,d.e)(h,".lh"),v=(0,d.e)(f,".ph"),m=(0,d.e)(v,".qh"),y=(0,d.e)(h,".sh"),g=(0,d.e)(y,".th"),b={},A=!1,C=15e3,_=5e3,L=15e3,j=!0,w=0,k=0,x="",T=!1,S=!1,M=!1;function E(e){var t=e;if(T){var i=t.detail.progress-1;m.style.setProperty("--jh",i.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,E)}function I(){var e=(0,d.a)();e.classList.add("uh");var t=(0,d.a)();t.classList.add("vh"),e.appendChild(t);var i=(0,d.a)();i.classList.add("wh");var n=(0,d.a)();n.classList.add("xh"),i.appendChild(n);var a=(0,d.a)();a.classList.add("yh"),i.appendChild(a);var r=(0,d.a)();r.classList.add("zh"),i.appendChild(r);var u=(0,d.a)();u.classList.add("_h");var s=document.createElement("span");return s.appendChild((0,o.b)("close")),u.appendChild(s),i.appendChild(u),e.appendChild(i),e}function P(e,t,i){function n(e,n,a){function r(e,t){(0,d.e)(e,".vh").innerText=t.hours}function u(e,t){var i=(0,d.e)(e,".wh");(0,d.e)(i,".xh").innerText=t.minutes}function s(e,t){var i=(0,d.e)(e,".wh");(0,d.e)(i,".zh").innerText=t.name}function o(e,t){var i=(0,d.e)(e,".wh");(0,d.e)(i,".yh").innerText=`${t.route.name} - 往${t.route.direction}`}function l(e,t){var i=(0,d.e)(e,".wh");(0,d.e)(i,"._h").onclick=function(){!function(e,t){R.apply(this,arguments)}(e,t.schedule_id)}}function p(e,t){e.setAttribute("first",(0,c.a)(t.is_first))}function h(e,t){e.setAttribute("animation",(0,c.a)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,c.a)(t))}null==a?(r(e,n),u(e,n),s(e,n),o(e,n),l(e,n),p(e,n),h(e,i),f(e,t)):(n.hours!==a.hours&&r(e,n),n.minutes!==a.minutes&&u(e,n),(0,c.b)(a.schedule_id,n.schedule_id)||(s(e,n),o(e,n),l(e,n)),a.is_first!==n.is_first&&p(e,n),false!==i&&h(e,i),A!==t&&f(e,t))}var a=e.itemQuantity,r=e.items,u=Array.from((0,d.d)(g,".uh")),s=u.length;if(a!==s){var o=s-a;if(o<0){for(var l=new DocumentFragment,p=0;p>o;p--){var h=I();l.appendChild(h),u.push(h)}g.append(l)}else if(o>0)for(var f=s-1,v=s-o-1;f>v;f--)u[f].remove(),u.splice(f,1)}for(var m=0;m<a;m++){var y=u[m],C=r[m];if((0,c.e)(b,"items"))if(b.items[m])n(y,C,b.items[m]);else n(y,C,null);else n(y,C,null)}b=e,A=t}function $(){return D.apply(this,arguments)}function D(){return(D=(0,n.a)(function*(){var e=(0,s.b)("playing_animation"),t=(0,s.b)("refresh_interval");j=t.dynamic,C=t.baseInterval,T=!0,x=(0,c.c)(),m.setAttribute("refreshing","true"),m.classList.remove("rh"),document.addEventListener(x,E);var i=yield(0,u.h)(x);P(i,!1,e);var n=0;j&&(n=yield(0,a.c)()),w=(new Date).getTime(),k=j?Math.max(w+_,i.dataUpdateTime+C/n):w+C,L=Math.max(_,k-w),T=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--kh",`${L}ms`),m.classList.add("rh")})).apply(this,arguments)}function Q(){return q.apply(this,arguments)}function q(){return(q=(0,n.a)(function*(){$().then(function(){S?setTimeout(function(){Q()},Math.max(_,k-(new Date).getTime())):M=!1}).catch(function(e){S?setTimeout(function(){Q()},1e4):M=!1})})).apply(this,arguments)}function z(){h.setAttribute("displayed","true")}function F(){h.setAttribute("displayed","false")}function H(){(0,l.c)("NotificationScheduleManager"),z(),function(){for(var e=(0,s.b)("playing_animation"),t=(0,l.d)("window"),i=(t.width,t.height),n=Math.floor(i/50)+5,a=[],r=0;r<n;r++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});P({items:a,itemQuantity:n,dataUpdateTime:0},!0,e)}(),S||(S=!0,M?$():(M=!0,Q())),(0,l.b)()}function N(){F(),S=!1,(0,l.i)(),(0,l.e)("NotificationScheduleManager")}function R(){return(R=(0,n.a)(function*(e,t){if((0,p.a)("manufacturing","處理中"),yield(0,r.a)(t)){if(e.remove(),(0,p.a)("check_circle","已取消通知"),!T){var i=(0,s.b)("playing_animation");P(yield(0,u.h)(x),!1,i)}}else(0,p.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},2684(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4620(){},4721(){},4935(){},5068(){},5135(){},5374(){},5504(){},5666(){},5693(e,t,i){i.d(t,{a:()=>x,b:()=>w,c:()=>k,d:()=>C,e:()=>j,f:()=>T});var n=i(3453),a=i(467),r=i(5352),u=i(8179),s=i(5579),d=i(904),c=i(7891),o=i(9119),l=(0,u.c)(".xi"),p=(0,u.e)(l,".bj"),h=(0,u.e)(l,".yi"),f=(0,u.e)(h,".zi"),v=(0,u.e)(p,".cj"),m=(0,u.e)(v,'.dj[group="schedule-name"] .hj input'),y=(0,u.e)(v,'.dj[group="schedule-start-time"] .hj input'),g=(0,u.e)(v,'.dj[group="schedule-end-time"] .hj input'),b=(0,u.e)(v,'.dj[group="schedule-days"] .hj'),A=(0,u.d)(b,".ij");function C(e){return _.apply(this,arguments)}function _(){return(_=(0,a.a)(function*(e){for(var t=m.value,i=y.value,a=g.value,u=String(i).split(":").map(function(e){return parseInt(e)}),s=(0,n.a)(u,2),d=s[0],l=s[1],p=String(a).split(":").map(function(e){return parseInt(e)}),h=(0,n.a)(p,2),f=h[0],v=h[1],b=[],C=0;C<7;C++){var _=A[C],L=_.getAttribute("highlighted"),j=parseInt(_.getAttribute("day"));"true"===L&&b.push(j)}var w=yield(0,r.b)(e);w.name=t,w.days=b,w.period.start.hours=d,w.period.start.minutes=l,w.period.end.hours=f,w.period.end.minutes=v,yield(0,r.e)(w),(0,o.a)("check_circle","已儲存變更"),x(),(0,c.c)()})).apply(this,arguments)}function L(){return(L=(0,a.a)(function*(e){var t=yield(0,r.b)(e);m.value=t.name,y.value=(0,s.i)(t.period.start),g.value=(0,s.i)(t.period.end);for(var i=0;i<7;i++){var n=A[i];t.days.indexOf(i)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}f.onclick=function(){C(e)}})).apply(this,arguments)}function j(){l.setAttribute("displayed","true")}function w(){l.setAttribute("displayed","false")}function k(e){(0,d.c)("PersonalScheduleEditor"),j(),function(e){L.apply(this,arguments)}(e),(0,d.b)()}function x(){w(),(0,d.i)(),(0,d.e)("PersonalScheduleEditor")}function T(e){var t=(0,u.e)(b,`.ij[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6780(){},6907(){},7537(){},7891(e,t,i){i.d(t,{a:()=>g,b:()=>m,c:()=>h,d:()=>y,e:()=>v});var n=i(467),a=i(5352),r=i(8179),u=i(4537),s=i(904),d=i(5693),c=(0,r.c)(".ai"),o=(0,r.e)(c,".fi"),l=(0,r.e)(o,".gi");function p(e){var t=(0,r.a)();t.classList.add("hi"),t.onclick=function(){(0,d.c)(e.id)};var i=(0,r.a)();i.classList.add("ii"),i.innerText=e.name,t.appendChild(i);var n=(0,r.a)();n.classList.add("ji");var a=document.createElement("span");return a.appendChild((0,u.b)("arrow_forward_ios")),n.appendChild(a),t.appendChild(n),t}function h(){return f.apply(this,arguments)}function f(){return(f=(0,n.a)(function*(){l.innerHTML="";var e=yield(0,a.d)(),t=new DocumentFragment;for(var i of e){var n=p(i);t.appendChild(n)}l.append(t)})).apply(this,arguments)}function v(){c.setAttribute("displayed","true")}function m(){c.setAttribute("displayed","false")}function y(){(0,s.c)("PersonalScheduleManager"),c.setAttribute("displayed","true"),h(),(0,s.b)()}function g(){c.setAttribute("displayed","false"),(0,s.i)(),(0,s.e)("PersonalScheduleManager")}},7943(){},8279(e,t,i){i.d(t,{a:()=>l,b:()=>c,c:()=>o,d:()=>d});var n=i(8179),a=i(2648),r=i(904),u=(0,n.c)(".jj"),s=(0,n.e)(u,".oj");function d(){u.setAttribute("displayed","true")}function c(){u.setAttribute("displayed","false")}function o(e){(0,r.c)("QRCode"),d(),function(e){var t=(0,a.a)(e,"M",.5,.3,1,"var(--a)",4);s.innerHTML=t}(e),(0,r.b)()}function l(){c(),(0,r.i)(),(0,r.e)("QRCode")}},8380(e,t,i){i.d(t,{a:()=>L,b:()=>g,c:()=>C,d:()=>_,e:()=>A,f:()=>j});var n=i(3453),a=i(467),r=i(5352),u=i(8179),s=i(904),d=i(7891),c=i(9119),o=(0,u.c)(".ki"),l=(0,u.e)(o,".pi"),p=(0,u.e)(l,".qi"),h=(0,u.e)(p,'.ri[group="schedule-name"] .vi input'),f=(0,u.e)(p,'.ri[group="schedule-start-time"] .vi input'),v=(0,u.e)(p,'.ri[group="schedule-end-time"] .vi input'),m=(0,u.e)(p,'.ri[group="schedule-days"] .vi'),y=(0,u.d)(m,".wi");function g(){return b.apply(this,arguments)}function b(){return(b=(0,a.a)(function*(){for(var e=h.value,t=f.value,i=v.value,a=String(t).split(":").map(function(e){return parseInt(e)}),u=(0,n.a)(a,2),s=u[0],o=u[1],l=String(i).split(":").map(function(e){return parseInt(e)}),p=(0,n.a)(l,2),m=p[0],g=p[1],b=[],A=0;A<7;A++){var C=y[A],_=C.getAttribute("highlighted"),j=parseInt(C.getAttribute("day"));"true"===_&&b.push(j)}(yield(0,r.a)(e,s,o,m,g,b))?(L(),(0,c.a)("calendar_view_day","已建立個人化行程"),(0,d.c)()):(0,c.a)("error","無法建立個人化行程")})).apply(this,arguments)}function A(){o.setAttribute("displayed","true")}function C(){o.setAttribute("displayed","false")}function _(){(0,s.c)("PersonalScheduleCreator"),A(),(0,s.b)()}function L(){C(),(0,s.i)(),(0,s.e)("PersonalScheduleCreator")}function j(e){var t=(0,u.e)(m,`.wi[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8969(){},9119(e,t,i){i.d(t,{a:()=>d});var n=i(2284),a=i(3459),r=i(8179),u=i(8024),s=i(4537);function d(e,t,i){var d=(0,r.b)(".pj");if(null!==d)for(var c of d)c.remove();var o=(0,a.b)("playing_animation"),l=(0,r.a)();l.classList.add("pj"),l.setAttribute("animation",(0,u.a)(o));var p=(0,r.a)();p.classList.add("qj"),p.appendChild((0,s.b)(e)),l.appendChild(p);var h=(0,r.a)();if(h.classList.add("rj"),h.innerText=t,l.appendChild(h),"object"===(0,n.a)(i)&&null!=i&&"function"==typeof(null==i?void 0:i.action)){var f=(0,r.a)();f.classList.add("sj"),f.innerText=i.text,f.addEventListener("click",function(){i.action()},{once:!0}),l.appendChild(f),l.setAttribute("button","true")}l.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(l)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=1b278bb1d56d9a9568ab.js.map