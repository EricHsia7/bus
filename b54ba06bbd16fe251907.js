"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[704],{4474:(t,n,e)=>{e.d(n,{kP:()=>S,zk:()=>_,GZ:()=>R,GS:()=>$});var r=e(9566),a=e(8621),i=e(3459),o=e(8024),u=e(3648),l=e(904),c=e(3041),s=e(8332),f=e(9009),d=e(4537),v=[],h=!0,y=!1;function p(t,n,e,r){function a(t,n,a){function i(t,n){(0,u.aI)(t,".bo").innerHTML=(0,d.Z)(n.icon)}function l(t,n){(0,u.aI)(t,".co").innerText=n.value}function c(t,n){t.setAttribute("animation",(0,o.xZ)(n))}function s(t,n){t.setAttribute("skeleton-screen",(0,o.xZ)(n))}null===a?(i(t,n),l(t,n),c(t,r),s(t,e)):((0,o.hw)(a,n)||i(t,n),(0,o.hw)(a,n)||l(t,n),h!==r&&c(t,r),y!==e&&s(t,e))}var i=n.length;t.setAttribute("skeleton-screen",e);var l,c=(0,u.jg)(t,".zn .ao").length;if(i!==c){var s=c-i;if(s<0)for(var f=0;f<Math.abs(s);f++){var p=(l=void 0,(l=document.createElement("div")).classList.add("ao"),l.innerHTML='<div class="bo"></div><div class="co"></div>',{element:l,id:""});(0,u.aI)(t,".zn").appendChild(p.element)}else for(var g=0;g<Math.abs(s);g++){var m=c-1-g;(0,u.jg)(t,".zn .ao")[m].remove()}}for(var b=0;b<i;b++){var w=(0,u.jg)(t,".zn .ao")[b],k=n[b];0===v.length?a(w,k,null):a(w,k,v[b])}v=n,h=r,y=e}function g(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return m(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw i}}}}function m(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function b(t,n,e,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void e(t)}u.done?n(l):Promise.resolve(l).then(r,a)}var w=(0,u.bv)(".on"),k=(0,u.aI)(w,".tn"),x=(0,u.aI)(k,".un"),A=(0,u.aI)(x,'.vn[group="calendar"]'),I=(0,u.aI)(A,".zn"),S=(0,u.aI)(I,".eo"),_=(0,u.aI)(I,".go"),M=(0,u.aI)(w,'.tn .un .vn[group="actions"]'),j=(0,u.aI)(M,'.zn ._n[action="save-to-folder"]'),D=(0,u.aI)(M,'.zn ._n[action="get-permalink"]'),z=(0,u.aI)(M,'.zn ._n[action="show-permalink-qrcode"]'),T=(0,u.aI)(w,'.tn .un .vn[group="properties"]');function P(){var t;return t=function*(t,n){var e=(0,i.Js)("playing_animation"),u=yield(0,r.LH)("route",t);j.setAttribute("animation",(0,o.xZ)(e)),j.setAttribute("highlighted",(0,o.xZ)(u)),j.onclick=function(){(0,c.BI)("route",[t])},D.setAttribute("animation",(0,o.xZ)(e)),D.onclick=function(){(0,s.w)(t)},z.setAttribute("animation",(0,o.xZ)(e)),z.onclick=function(){(0,s.e)(t)},function(t){for(var n=(0,i.Js)("playing_animation"),e=[],r=0;r<5;r++)e.push({key:r,icon:"none",value:""});p(t,e,!0,n)}(T),(0,f.OS)();var l=(0,o.zx)(),d=yield(0,a.p)(t,n,l);p(T,d.properties,!1,e),(0,f.fB)(d.calendar,!1,e)},P=function(){var n=this,e=arguments;return new Promise((function(r,a){var i=t.apply(n,e);function o(t){b(i,r,a,o,u,"next",t)}function u(t){b(i,r,a,o,u,"throw",t)}o(void 0)}))},P.apply(this,arguments)}function $(t,n){(0,l.WR)("RouteDetails"),w.setAttribute("displayed","true"),function(t,n){P.apply(this,arguments)}(t,n)}function R(){(0,l.kr)("RouteDetails"),w.setAttribute("displayed","false");var t,n=g((0,u.jg)(_,".ho"));try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(t){n.e(t)}finally{n.f()}var e,r=g((0,u.jg)(S,".fo"));try{for(r.s();!(e=r.n()).done;){e.value.remove()}}catch(t){r.e(t)}finally{r.f()}}},7908:(t,n,e)=>{e.d(n,{NW:()=>g,XG:()=>y,hy:()=>p});var r=e(3937),a=e(4636),i=e(8024),o=e(3648),u=e(904),l=e(9119);function c(t,n,e,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void e(t)}u.done?n(l):Promise.resolve(l).then(r,a)}var s=(0,o.bv)(".jo"),f=(0,o.aI)(s,".oo"),d=(0,o.aI)(f,".po"),v=(0,o.aI)(d,'.qo[group="provider"] .uo input'),h=(0,o.aI)(d,'.qo[group="registration-key"] .uo input');function y(){(0,u.WR)("RegisterNotification"),s.setAttribute("displayed","true"),v.value=(0,a.D7)(),h.value="",(0,u.Z_)()}function p(){s.setAttribute("displayed","false"),(0,u.l$)()}function g(){return m.apply(this,arguments)}function m(){var t;return t=function*(){(0,l.a)("處理中","manufacturing");var t=v.value,n=h.value;if((0,i.Gz)(t))return(0,a.Je)(t),(yield(0,r.e)(n))?void(0,l.a)("註冊成功","check_circle"):void(0,l.a)("註冊失敗","error");(0,l.a)("無效的提供者","error")},m=function(){var n=this,e=arguments;return new Promise((function(r,a){var i=t.apply(n,e);function o(t){c(i,r,a,o,u,"next",t)}function u(t){c(i,r,a,o,u,"throw",t)}o(void 0)}))},m.apply(this,arguments)}},8332:(t,n,e)=>{e.d(n,{e:()=>f,w:()=>c});var r=e(8134),a=e(9469),i=e(9119),o=e(8279);function u(t,n,e,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void e(t)}u.done?n(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var n=this,e=arguments;return new Promise((function(r,a){var i=t.apply(n,e);function o(t){u(i,r,a,o,l,"next",t)}function l(t){u(i,r,a,o,l,"throw",t)}o(void 0)}))}}function c(t){return s.apply(this,arguments)}function s(){return(s=l((function*(t){var n=yield(0,r.Rk)(t);if(!1!==n){var e=(0,a.i)(0,{id:t,name:n.n});navigator.share&&navigator.share({title:n.n,url:e}).then((function(){(0,i.a)("已分享路線連結","link")})).catch((function(t){(0,i.a)("已取消分享連結","cancel")}))}}))).apply(this,arguments)}function f(t){return d.apply(this,arguments)}function d(){return(d=l((function*(t){var n=yield(0,r.Rk)(t);if(!1!==n){var e=(0,a.i)(0,{id:t,name:n.n});(0,o.X8)(e)}}))).apply(this,arguments)}},9009:(t,n,e)=>{e.d(n,{OS:()=>I,f4:()=>j,fB:()=>M});var r=e(904),a=e(3648),i=e(3459),o=e(6141),u=e(7968),l=e(8024),c=e(4474);function s(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return f(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw i}}}}function f(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var d=60,v=Math.floor(3072/(24*d)),h=10,y=1.2,p=45,g='"Noto Sans TC", sans-serif',m=(0,r.gO)("route-details-canvas"),b=m.width,w=m.height,k=Math.min(window.devicePixelRatio,v)||1,x={};function A(){var t=document.createElement("div");return t.classList.add("ho"),t.innerHTML='<canvas class="io"></canvas>',{element:t,id:""}}function I(){for(var t=(0,i.Js)("playing_animation"),n={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},e={},r={},a=0;a<7;a++){var o=`d_${a}`;e[o]=[],r[o]={day:a,code:"d_{i}",name:""};for(var u=0;u<n[o];u++){var l=new Date;l.setHours(0),l.setMinutes(30*u),l.setSeconds(0),l.setMilliseconds(0),e[o].push({date:l,dateString:"",duration:15})}}M({calendarEventGroups:e,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:n},!0,t)}function S(t,n,e,r,a,i){t.innerText=n.name,t.setAttribute("day",i.toString()),t.onclick=function(){j(i)},t.setAttribute("highlighted",e===i?"true":"false"),t.setAttribute("animation",(0,l.xZ)(a)),t.setAttribute("skeleton-screen",(0,l.xZ)(r))}function _(t,n,e,i,o,c,f,x,A,I){function S(t,n,e){var r=n*d;t.fillStyle=e,t.fillRect(0+p,r+5,b-p,y),t.font=`400 12px ${g}`,t.textBaseline="top";var a=`${String(n).padStart(2,"0")}:00`,i=t.measureText(a),o=i.width,u=i.actualBoundingBoxDescent;t.fillText(a,(p-o)/2,r+(h-u)/2,o)}function _(t,n,e,r,a,i,o){var l=new Date;l.setDate(1),l.setMonth(0),l.setFullYear(n.date.getFullYear()),l.setMonth(n.date.getMonth()),l.setDate(n.date.getDate()),l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0);var c=p,s=(n.date.getTime()-l.getTime())/864e5*24*d,f=b-p,v=60*n.duration*1e3/864e5*24*d;(0,u.wg)(t,c,s,f,v,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,u.wg)(t,c,s,3,v,{tl:3,tr:0,bl:3,br:0},e),t.font=`400 14px ${g}`,t.textBaseline="top",t.fillStyle=e;var h=n.dateString,y=t.measureText(h),m=y.width,w=y.actualBoundingBoxDescent;t.fillText(h,c+8,s+(v-w)/2,m)}var M=(0,a.aI)(t,".io"),j=M.getContext("2d");if(function(t,n,e){var r=n===e;t.setAttribute("displayed",(0,l.xZ)(r))}(t,e,I),function(t){m=(0,r.gO)("route-details-canvas"),b=m.width,w=m.height,k=Math.min(window.devicePixelRatio,v)||1,t.width=b*k,t.height=w*k;var n=t.getContext("2d");n.setTransform(1,0,0,1,0,0),n.scale(k,k)}(M),e===I){j.clearRect(0,0,b,w);for(var D=0;D<24;D++)S(j,D,A);var z,T=s(n);try{for(T.s();!(z=T.n()).done;){_(j,z.value,i,o,c,f,x)}}catch(t){T.e(t)}finally{T.f()}}else j.clearRect(0,0,b,w)}function M(t,n,e){var r,i=(new Date).getDay(),u=(0,o.t)("--c"),l=(0,o.t)("--d"),s=(0,o.t)("--e"),f=(0,o.t)("--ve"),d=(0,o.t)("--b"),v=(0,o.t)("--bd"),h=t.calendarDays,y=t.calendarDayQuantity,p=t.calendarEventGroups,g=(t.calendarEventQuantity,(0,a.jg)(c.zk,".ho").length);if(y!==g){var m=g-y;if(m<0)for(var b=0;b<Math.abs(m);b++){var w=(r=void 0,(r=document.createElement("div")).classList.add("fo"),{element:r,id:""});c.kP.appendChild(w.element);var k=A();c.zk.appendChild(k.element)}else for(var I=(0,a.jg)(c.kP,".fo"),M=(0,a.jg)(c.zk,".ho"),j=0;j<Math.abs(m);j++){var D=g-1-j;I[D].remove(),M[D].remove()}}for(var z=(0,a.jg)(c.kP,".fo"),T=(0,a.jg)(c.zk,".ho"),P=0;P<y;P++){var $=`d_${P}`,R=h[$],Z=p[$],C=z[P],E=T[P];S(C,R,i,n,e,P),_(E,Z,i,d,u,l,s,f,v,P)}x=t}function j(t){for(var n=(0,i.Js)("playing_animation"),e=(0,a.jg)(c.kP,".fo"),r=(0,a.jg)(c.zk,".ho"),u=0;u<7;u++){var l,s,f=e[u],d=r[u],v=`d_${u}`,h=null===(l=x)||void 0===l?void 0:l.calendarEventGroups[v],y=null===(s=x)||void 0===s?void 0:s.calendarDays[v];if(h&&y){var p=(0,o.t)("--c"),g=(0,o.t)("--d"),m=(0,o.t)("--e"),b=(0,o.t)("--ve"),w=(0,o.t)("--b"),k=(0,o.t)("--bd");S(f,y,t,!1,n,u),_(d,h,t,w,p,g,m,b,k,u)}}}}}]);
//# sourceMappingURL=b54ba06bbd16fe251907.js.map