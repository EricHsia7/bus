"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[16],{112(){},124(){},245(){},321(){},626(){},904(e,t,a){a.d(t,{a:()=>k,b:()=>C,c:()=>A,d:()=>g,e:()=>E,f:()=>y,g:()=>_,h:()=>L,i:()=>w});var n=a(8179),i=a(8024),r=a(4884),s=a(6052),d=a(9333),c=a(8379),o=a(5693),u=a(7891),l=a(7908),f=a(5009),p=a(6104),h=(0,n.b)(".xf"),m=(0,n.b)(".ag"),v=(new Date).getTime(),b=["Home"];function g(e){var t=b.length;b[t-1]!==e&&b.push(e)}function y(e){if(b.indexOf(e)>-1){var t=b.length;b[t-1]===e&&b.pop()}}function k(){var e=b.length;if(e>1)switch(b[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.a)();break;case"FolderEditor":(0,d.a)();break;case"FolderManager":(0,c.a)();break;case"Search":(0,f.a)();break;case"Settings":(0,p.a)();break;case"PersonalScheduleManager":(0,u.a)();break;case"PersonalScheduleEditor":(0,o.a)();break;case"Bus":(0,r.b)();break;case"RegisterNotification":(0,l.a)()}}function A(){var e=b.length;if(e>1){var t=b[e-2];switch(b.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.c)();break;case"FolderEditor":(0,d.b)();break;case"FolderManager":(0,c.b)();break;case"Search":(0,f.c)();break;case"Settings":(0,p.d)();break;case"PersonalScheduleManager":(0,u.b)();break;case"PersonalScheduleEditor":(0,o.b)();break;case"Bus":(0,r.c)();break;case"RegisterNotification":(0,l.b)()}}}function L(){var e=0;(0,i.f)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.b)(".xf svg.yf").style.setProperty("--zf",`${e}px`)}function C(e){function t(){h.classList.add("_f"),h.addEventListener("animationend",function(){h.setAttribute("displayed","false"),h.classList.remove("_f"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-v<100?setTimeout(t,Math.max(1,a-v)):t()}function w(){m.setAttribute("displayed","true")}function E(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function _(){window.scrollTo({top:0,behavior:"instant"})}},969(){},1003(){},1195(){},1351(e,t,a){a.d(t,{a:()=>E,b:()=>w,c:()=>_,d:()=>T});var n=a(467),i=a(8011),r=a(6788),s=a(6983),d=a(3459),c=a(8179),o=a(8024),u=a(9469),l=a(4537),f=a(904),p=a(9119),h=a(8279),m={},v=!1,b=!1,g=(0,c.b)(".hj"),y=(0,c.d)(g,".mj"),k=(0,c.d)(y,".nj");function A(){var e=document.createElement("div");e.classList.add("oj");var t=document.createElement("div");t.classList.add("pj"),t.appendChild((0,l.a)()),e.appendChild(t);var a=document.createElement("div");return a.classList.add("qj"),e.appendChild(a),e}function L(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.d)(e,".pj");(0,l.c)(a,t.icon)}function s(e,t){(0,c.d)(e,".qj").innerText=t.name}function d(e,t){e.onclick=t.action}function u(e,t){e.setAttribute("animation",(0,o.a)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==i?(r(e,n),s(e,n),d(e,n),u(e,a),f(e,t)):(i.key!==n.key&&(r(e,n),s(e,n),d(e,n)),a!==v&&u(e,a),t!==b&&f(e,t))}var i=e.actions,r=e.actionsQuantity,s=Array.from((0,c.c)(k,".oj")),d=s.length;if(r!==d){var u=d-r;if(u<0){for(var f=new DocumentFragment,p=0;p>u;p--){var h=A();f.appendChild(h),s.push(h)}k.append(f)}else if(u>0)for(var g=d-1,y=d-u-1;g>y;g--)s[g].remove(),s.splice(g,1)}for(var L=0;L<r;L++){var C=s[L],w=i[L];if((0,o.e)(m,"actions"))if(m.actions[L])n(C,w,m.actions[L]);else n(C,w,null);else n(C,w,null)}m=e,v=a,b=t}function C(){return(C=(0,n.a)(function*(e){var t=(0,d.b)("playing_animation"),a=(0,o.c)();L(yield(0,s.a)(e,a),!1,t)})).apply(this,arguments)}function w(e){(0,f.d)("LocationDetails"),g.setAttribute("displayed","true"),function(){for(var e=(0,d.b)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});L({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){C.apply(this,arguments)}(e)}function E(){(0,f.f)("LocationDetails"),g.setAttribute("displayed","false")}function _(e){return S.apply(this,arguments)}function S(){return(S=(0,n.a)(function*(e){var t=(0,o.c)(),a=yield(0,i.a)(t,1);(0,r.a)(t),(0,r.b)(t);var n=`ml_${e}`;if((0,o.e)(a,n)){var s=a[n],d=(0,u.a)(1,{hash:e});navigator.share&&navigator.share({title:s.n,url:d}).then(function(){(0,p.a)("check_circle","已分享地點")}).catch(function(e){(0,p.a)("cancel","已取消分享")})}})).apply(this,arguments)}function T(e){return x.apply(this,arguments)}function x(){return(x=(0,n.a)(function*(e){var t=(0,o.c)(),a=yield(0,i.a)(t,1);(0,r.a)(t),(0,r.b)(t);var n=`ml_${e}`;if((0,o.e)(a,n)){var s=(0,u.a)(1,{hash:e});(0,h.b)(s)}})).apply(this,arguments)}},1452(){},1469(){},1484(){},1542(){},2174(e,t,a){a.d(t,{a:()=>Q,b:()=>H});var n=a(467),i=a(5767),r=a(365),s=a(3422),d=a(3459),c=a(8179),o=a(8024),u=a(4537),l=a(904),f=a(9119),p=(0,c.b)("._k"),h=(0,c.d)(p,".cl"),m=(0,c.d)(h,".gl"),v=(0,c.d)(m,".hl"),b=(0,c.d)(p,".jl"),g=(0,c.d)(b,".kl"),y={},k=!1,A=15e3,L=5e3,C=15e3,w=!0,E=0,_=0,S="",T=!1,x=!1,j=!1;function M(e){var t=e;if(T){var a=t.detail.progress-1;v.style.setProperty("--al",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,M)}function D(){var e=document.createElement("div");e.classList.add("ll");var t=document.createElement("div");t.classList.add("ml"),e.appendChild(t);var a=document.createElement("div");a.classList.add("nl");var n=document.createElement("div");n.classList.add("ol"),a.appendChild(n);var i=document.createElement("div");i.classList.add("pl"),a.appendChild(i);var r=document.createElement("div");r.classList.add("ql"),a.appendChild(r);var s=document.createElement("div");s.classList.add("rl");var d=document.createElement("span");return d.appendChild((0,u.b)("close")),s.appendChild(d),a.appendChild(s),e.appendChild(a),e}function F(e,t,a){function n(e,n,i){function r(e,t){(0,c.d)(e,".ml").innerText=t.hours}function s(e,t){var a=(0,c.d)(e,".nl");(0,c.d)(a,".ol").innerText=t.minutes}function d(e,t){var a=(0,c.d)(e,".nl");(0,c.d)(a,".ql").innerText=t.name}function u(e,t){var a=(0,c.d)(e,".nl");(0,c.d)(a,".pl").innerText=`${t.route.name} - 往${t.route.direction}`}function l(e,t){var a=(0,c.d)(e,".nl");(0,c.d)(a,".rl").onclick=function(){!function(e,t){N.apply(this,arguments)}(e,t.schedule_id)}}function f(e,t){e.setAttribute("first",(0,o.a)(t.is_first))}function p(e,t){e.setAttribute("animation",(0,o.a)(t))}function h(e,t){e.setAttribute("skeleton-screen",(0,o.a)(t))}null==i?(r(e,n),s(e,n),d(e,n),u(e,n),l(e,n),f(e,n),p(e,a),h(e,t)):(n.hours!==i.hours&&r(e,n),n.minutes!==i.minutes&&s(e,n),(0,o.b)(i.schedule_id,n.schedule_id)||(d(e,n),u(e,n),l(e,n)),i.is_first!==n.is_first&&f(e,n),false!==a&&p(e,a),k!==t&&h(e,t))}var i=e.itemQuantity,r=e.items,s=Array.from((0,c.c)(g,".ll")),d=s.length;if(i!==d){var u=d-i;if(u<0){for(var l=new DocumentFragment,f=0;f>u;f--){var p=D();l.appendChild(p),s.push(p)}g.append(l)}else if(u>0)for(var h=d-1,m=d-u-1;h>m;h--)s[h].remove(),s.splice(h,1)}for(var v=0;v<i;v++){var b=s[v],A=r[v];if((0,o.e)(y,"items"))if(y.items[v])n(b,A,y.items[v]);else n(b,A,null);else n(b,A,null)}y=e,k=t}function P(){return I.apply(this,arguments)}function I(){return(I=(0,n.a)(function*(){var e=(0,d.b)("playing_animation"),t=(0,d.b)("refresh_interval");w=t.dynamic,A=t.baseInterval,T=!0,S=(0,o.c)(),v.setAttribute("refreshing","true"),v.classList.remove("il"),document.addEventListener(S,M);var a=yield(0,s.h)(S);F(a,!1,e);var n=0;w&&(n=yield(0,i.c)()),E=(new Date).getTime(),_=w?Math.max(E+L,a.dataUpdateTime+A/n):E+A,C=Math.max(L,_-E),T=!1,v.setAttribute("refreshing","false"),v.style.setProperty("--bl",`${C}ms`),v.classList.add("il")})).apply(this,arguments)}function R(){return $.apply(this,arguments)}function $(){return($=(0,n.a)(function*(){P().then(function(){x?setTimeout(function(){R()},Math.max(L,_-(new Date).getTime())):j=!1}).catch(function(e){x?setTimeout(function(){R()},1e4):j=!1})})).apply(this,arguments)}function H(){(0,l.d)("NotificationScheduleManager"),p.setAttribute("displayed","true"),function(){for(var e=(0,d.b)("playing_animation"),t=(0,l.e)("window"),a=(t.width,t.height),n=Math.floor(a/50)+5,i=[],r=0;r<n;r++)i.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});F({items:i,itemQuantity:n,dataUpdateTime:0},!0,e)}(),x||(x=!0,j?P():(j=!0,R())),(0,l.a)()}function Q(){p.setAttribute("displayed","false"),x=!1,(0,l.c)()}function N(){return(N=(0,n.a)(function*(e,t){if((0,f.a)("manufacturing","處理中"),yield(0,r.a)(t)){if(e.remove(),(0,f.a)("check_circle","已取消通知"),!T){var a=(0,d.b)("playing_animation");F(yield(0,s.h)(S),!1,a)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2676(){},2681(){},3011(){},3257(){},3382(){},3963(){},4071(){},4263(){},4472(){},4537(e,t,a){a.d(t,{a:()=>r,b:()=>i,c:()=>s});var n=a(8179);function i(e){var t=document.createElement("span");return t.classList.add("sa"),t.innerText=e,t}function r(){var e=document.createElement("span");return e.classList.add("sa"),e}function s(e,t){(0,n.d)(e,"span.sa").innerText=t}},4620(){},4721(){},4935(){},5068(){},5135(){},5259(){},5374(){},5504(){},5666(){},5693(e,t,a){a.d(t,{a:()=>w,b:()=>C,c:()=>k,d:()=>E});var n=a(3453),i=a(467),r=a(5352),s=a(8179),d=a(5579),c=a(904),o=a(9119),u=(0,s.b)(".nk"),l=(0,s.d)(u,".sk"),f=(0,s.d)(u,".ok"),p=(0,s.d)(f,".pk"),h=(0,s.d)(l,".tk"),m=(0,s.d)(h,'.uk[group="schedule-name"] .yk input'),v=(0,s.d)(h,'.uk[group="schedule-start-time"] .yk input'),b=(0,s.d)(h,'.uk[group="schedule-end-time"] .yk input'),g=(0,s.d)(h,'.uk[group="schedule-days"] .yk'),y=(0,s.c)(g,".zk");function k(e){return A.apply(this,arguments)}function A(){return(A=(0,i.a)(function*(e){for(var t=m.value,a=v.value,i=b.value,s=String(a).split(":").map(function(e){return parseInt(e)}),d=(0,n.a)(s,2),c=d[0],u=d[1],l=String(i).split(":").map(function(e){return parseInt(e)}),f=(0,n.a)(l,2),p=f[0],h=f[1],g=[],k=0;k<7;k++){var A=y[k],L=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===L&&g.push(C)}var E=yield(0,r.b)(e);E.name=t,E.days=g,E.period.start.hours=c,E.period.start.minutes=u,E.period.end.hours=p,E.period.end.minutes=h,yield(0,r.e)(E),(0,o.a)("check_circle","已儲存變更"),w()})).apply(this,arguments)}function L(){return(L=(0,i.a)(function*(e){var t=yield(0,r.b)(e);m.value=t.name,v.value=(0,d.i)(t.period.start),b.value=(0,d.i)(t.period.end);for(var a=0;a<7;a++){var n=y[a];t.days.indexOf(a)>-1?n.setAttribute("highlighted","true"):n.setAttribute("highlighted","false")}p.onclick=function(){k(e)}})).apply(this,arguments)}function C(e){(0,c.d)("PersonalScheduleEditor"),u.setAttribute("displayed","true"),function(e){L.apply(this,arguments)}(e),(0,c.a)()}function w(){u.setAttribute("displayed","false"),(0,c.c)()}function E(e){var t=(0,s.d)(g,`.zk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},6153(){},6340(){},6384(){},6764(){},6780(){},6907(){},7537(){},7891(e,t,a){a.d(t,{a:()=>m,b:()=>h});var n=a(467),i=a(5352),r=a(8179),s=a(4537),d=a(904),c=a(5693),o=(0,r.b)(".rj"),u=(0,r.d)(o,".wj"),l=(0,r.d)(u,".xj");function f(e){var t=document.createElement("div");t.classList.add("yj"),t.onclick=function(){(0,c.b)(e.id)};var a=document.createElement("div");a.classList.add("zj"),a.innerText=e.name,t.appendChild(a);var n=document.createElement("div");n.classList.add("_j");var i=document.createElement("span");return i.appendChild((0,s.b)("arrow_forward_ios")),n.appendChild(i),t.appendChild(n),t}function p(){return(p=(0,n.a)(function*(){l.innerHTML="";var e=yield(0,i.d)(),t=new DocumentFragment;for(var a of e){var n=f(a);t.appendChild(n)}l.append(t)})).apply(this,arguments)}function h(){(0,d.d)("PersonalScheduleManager"),o.setAttribute("displayed","true"),function(){p.apply(this,arguments)}()}function m(){(0,d.f)("PersonalScheduleManager"),o.setAttribute("displayed","false")}},7943(){},8279(e,t,a){a.d(t,{a:()=>o,b:()=>c});var n=a(8179),i=a(2648),r=a(904),s=(0,n.b)(".zl"),d=(0,n.d)(s,".dm");function c(e){(0,r.d)("QRCode"),s.setAttribute("displayed","true"),function(e){var t=(0,i.a)(e,"M",.5,.3,1,"var(--a)",4);d.innerHTML=t}(e)}function o(){(0,r.f)("QRCode"),s.setAttribute("displayed","false")}},8380(e,t,a){a.d(t,{a:()=>g,b:()=>v,c:()=>b,d:()=>y});var n=a(3453),i=a(5352),r=a(8179),s=a(904),d=a(9119),c=(0,r.b)(".ak"),o=(0,r.d)(c,".fk"),u=(0,r.d)(o,".gk"),l=(0,r.d)(u,'.hk[group="schedule-name"] .lk input'),f=(0,r.d)(u,'.hk[group="schedule-start-time"] .lk input'),p=(0,r.d)(u,'.hk[group="schedule-end-time"] .lk input'),h=(0,r.d)(u,'.hk[group="schedule-days"] .lk'),m=(0,r.c)(h,".mk");function v(){for(var e=l.value,t=f.value,a=p.value,r=String(t).split(":").map(function(e){return parseInt(e)}),s=(0,n.a)(r,2),c=s[0],o=s[1],u=String(a).split(":").map(function(e){return parseInt(e)}),h=(0,n.a)(u,2),v=h[0],b=h[1],y=[],k=0;k<7;k++){var A=m[k],L=A.getAttribute("highlighted"),C=parseInt(A.getAttribute("day"));"true"===L&&y.push(C)}(0,i.a)(e,c,o,v,b,y).then(function(e){e?(g(),(0,d.a)("calendar_view_day","已建立個人化行程")):(0,d.a)("error","無法建立個人化行程")})}function b(){(0,s.d)("PersonalScheduleCreator"),c.setAttribute("displayed","true"),(0,s.a)()}function g(){c.setAttribute("displayed","false"),(0,s.c)()}function y(e){var t=(0,r.d)(h,`.mk[day="${e}"]`);"true"===t.getAttribute("highlighted")?t.setAttribute("highlighted","false"):t.setAttribute("highlighted","true")}},8558(){},8969(){},9119(e,t,a){a.d(t,{a:()=>c});var n=a(2284),i=a(3459),r=a(8179),s=a(8024),d=a(4537);function c(e,t,a){var c=(0,r.a)(".em");if(null!==c)for(var o of c)o.remove();var u=(0,i.b)("playing_animation"),l=document.createElement("div");l.classList.add("em"),l.setAttribute("animation",(0,s.a)(u));var f=document.createElement("div");f.classList.add("fm"),f.appendChild((0,d.b)(e)),l.appendChild(f);var p=document.createElement("div");if(p.classList.add("gm"),p.innerText=t,l.appendChild(p),"object"===(0,n.a)(a)&&null!=a&&"function"==typeof(null==a?void 0:a.action)){var h=document.createElement("div");h.classList.add("hm"),h.innerText=a.text,h.addEventListener("click",function(){a.action()},{once:!0}),l.appendChild(h),l.setAttribute("button","true")}l.addEventListener("animationend",function(e){null!=e&&e.target&&e.target.remove()},{once:!0}),document.body.appendChild(l)}},9598(){},9714(){},9731(){}}]);
//# sourceMappingURL=b064faaf2be99aa18105.js.map