"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[704],{4474:(t,e,n)=>{n.d(e,{kP:()=>A,zk:()=>I,GZ:()=>P,GS:()=>T});var r=n(8621),a=n(9009),i=n(8024),o=n(4537),l=n(3648),u=n(3459),c=[],s=!0,d=!1;function v(t,e,n,r){function a(t,e,a){function u(t,e){(0,l.aI)(t,".cl").innerHTML=(0,o.Z)(e.icon)}function c(t,e){(0,l.aI)(t,".dl").innerText=e.value}function v(t,e){t.setAttribute("animation",(0,i.xZ)(e))}function f(t,e){t.setAttribute("skeleton-screen",(0,i.xZ)(e))}null===a?(u(t,e),c(t,e),v(t,r),f(t,n)):((0,i.hw)(a,e)||u(t,e),(0,i.hw)(a,e)||c(t,e),s!==r&&v(t,r),d!==n&&f(t,n))}var u=e.length;t.setAttribute("skeleton-screen",n);var v,f=(0,l.jg)(t,"._k .bl").length;if(u!==f){var h=f-u;if(h<0)for(var y=0;y<Math.abs(h);y++){var p=(v=void 0,(v=document.createElement("div")).classList.add("bl"),v.innerHTML='<div class="cl"></div><div class="dl"></div>',{element:v,id:""});(0,l.aI)(t,"._k").appendChild(p.element)}else for(var g=0;g<Math.abs(h);g++){var m=f-1-g;(0,l.jg)(t,"._k .bl")[m].remove()}}for(var b=0;b<u;b++){var k=(0,l.jg)(t,"._k .bl")[b],w=e[b];0===c.length?a(k,w,null):a(k,w,c[b])}c=e,s=r,d=n}var f=n(9566),h=n(904);function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return p(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e,n,r,a,i,o){try{var l=t[i](o),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(r,a)}var m=(0,l.bv)(".pk"),b=(0,l.aI)(m,".uk"),k=(0,l.aI)(b,".vk"),w=(0,l.aI)(k,'.wk[group="calendar"]'),x=(0,l.aI)(w,"._k"),A=(0,l.aI)(x,".fl"),I=(0,l.aI)(x,".hl"),S=(0,l.aI)(m,'.uk .vk .wk[group="actions"]'),_=(0,l.aI)(S,'._k .al[action="save-to-folder"]'),M=(0,l.aI)(S,'._k .al[action="get-permalink"]'),j=(0,l.aI)(m,'.uk .vk .wk[group="properties"]');function D(){var t;return t=function*(t,e){var n=(0,u.Js)("playing_animation"),o=yield(0,f.LH)("route",t);_.setAttribute("animation",(0,i.xZ)(n)),_.setAttribute("highlighted",(0,i.xZ)(o)),_.setAttribute("onclick","bus.folder.openSaveToFolder('route', [".concat(t,"])")),M.setAttribute("animation",(0,i.xZ)(n)),M.setAttribute("onclick","bus.route.shareRoutePermalink(".concat(t,")")),function(t){for(var e=(0,u.Js)("playing_animation"),n=[],r=0;r<5;r++)n.push({key:r,icon:"none",value:""});v(t,n,!0,e)}(j),(0,a.OS)();var l=(0,i.zx)("r"),c=yield(0,r.p)(t,e,l);v(j,c.properties,!1,n),(0,a.fB)(c.calendar,!1,n)},D=function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){g(i,r,a,o,l,"next",t)}function l(t){g(i,r,a,o,l,"throw",t)}o(void 0)}))},D.apply(this,arguments)}function T(t,e){(0,h.WR)("RouteDetails"),m.setAttribute("displayed","true"),function(t,e){D.apply(this,arguments)}(t,e)}function P(){(0,h.kr)("RouteDetails"),m.setAttribute("displayed","false");var t,e=y((0,l.jg)(I,".il"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,r=y((0,l.jg)(A,".gl"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(t){r.e(t)}finally{r.f()}}},7908:(t,e,n)=>{n.d(e,{NW:()=>g,XG:()=>y,hy:()=>p});var r=n(3937),a=n(4636),i=n(8024),o=n(3648),l=n(904),u=n(9119);function c(t,e,n,r,a,i,o){try{var l=t[i](o),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(r,a)}var s=(0,o.bv)(".kl"),d=(0,o.aI)(s,".pl"),v=(0,o.aI)(d,".ql"),f=(0,o.aI)(v,'.rl[group="provider"] .vl input'),h=(0,o.aI)(v,'.rl[group="registration-key"] .vl input');function y(){(0,l.WR)("RegisterNotification"),s.setAttribute("displayed","true"),f.value=(0,a.D7)(),h.value="",(0,l.Z_)()}function p(){s.setAttribute("displayed","false"),(0,l.l$)()}function g(){return m.apply(this,arguments)}function m(){var t;return t=function*(){(0,u.a)("處理中","manufacturing");var t=f.value,e=h.value;if((0,i.Gz)(t))return(0,a.Je)(t),(yield(0,r.e)(e))?void(0,u.a)("註冊成功","check_circle"):void(0,u.a)("註冊失敗","error");(0,u.a)("無效的提供者","error")},m=function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){c(i,r,a,o,l,"next",t)}function l(t){c(i,r,a,o,l,"throw",t)}o(void 0)}))},m.apply(this,arguments)}},8332:(t,e,n)=>{n.d(e,{w:()=>l});var r=n(8134),a=n(9469),i=n(9119);function o(t,e,n,r,a,i,o){try{var l=t[i](o),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(r,a)}function l(t){return u.apply(this,arguments)}function u(){var t;return t=function*(t){var e=yield(0,r.Rk)(t);if(!1!==e){var n=(0,a.i)(0,{id:t,name:e.n});navigator.share&&navigator.share({title:e.n,url:n}).then((function(){(0,i.a)("已分享路線連結","link")})).catch((function(t){(0,i.a)("已取消分享連結","cancel"),console.error(t)}))}},u=function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function l(t){o(i,r,a,l,u,"next",t)}function u(t){o(i,r,a,l,u,"throw",t)}l(void 0)}))},u.apply(this,arguments)}},9009:(t,e,n)=>{n.d(e,{OS:()=>I,f4:()=>j,fB:()=>M});var r=n(904),a=n(3648),i=n(3459),o=n(6141),l=n(7968),u=n(8024),c=n(4474);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var v=60,f=Math.floor(4096/(24*v)),h=10,y=1.2,p=45,g='"Noto Sans TC", sans-serif',m=(0,r.gO)("route-details-canvas"),b=m.width,k=m.height,w=Math.min(window.devicePixelRatio,f)||1,x={};function A(){var t=document.createElement("div");return t.classList.add("il"),t.innerHTML='<canvas class="jl"></canvas>',{element:t,id:""}}function I(){for(var t=(0,i.Js)("playing_animation"),e={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var o="d_".concat(a);n[o]=[],r[o]={day:a,code:"d_{i}",name:""};for(var l=0;l<e[o];l++){var u=new Date;u.setHours(0),u.setMinutes(30*l),u.setSeconds(0),u.setMilliseconds(0),n[o].push({date:u,dateString:"",duration:15})}}M({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:e},!0,t)}function S(t,e,n,r,a,i){t.innerText=e.name,t.setAttribute("day",i.toString()),t.setAttribute("onclick","bus.route.switchCalendarDay(".concat(i,")")),t.setAttribute("highlighted",n===i?"true":"false"),t.setAttribute("animation",(0,u.xZ)(a)),t.setAttribute("skeleton-screen",(0,u.xZ)(r))}function _(t,e,n,i,o,c,d,x,A,I){function S(t,e,n){var r=e*v;t.fillStyle=n,t.fillRect(0+p,r+5,b-p,y),t.font="400 ".concat(12,"px ",g),t.textBaseline="top";var a="".concat(String(e).padStart(2,"0"),":00"),i=t.measureText(a),o=i.width,l=i.actualBoundingBoxDescent;t.fillText(a,(p-o)/2,r+(h-l)/2,o)}function _(t,e,n,r,a,i,o){var u=new Date;u.setDate(1),u.setMonth(0),u.setFullYear(e.date.getFullYear()),u.setMonth(e.date.getMonth()),u.setDate(e.date.getDate()),u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);var c=p,s=(e.date.getTime()-u.getTime())/864e5*24*v,d=b-p,f=60*e.duration*1e3/864e5*24*v;(0,l.wg)(t,c,s,d,f,3,"rgba(".concat(r,", ").concat(a,", ").concat(i,", ").concat(o,")")),(0,l.wg)(t,c,s,3,f,{tl:3,tr:0,bl:3,br:0},n),t.font="400 ".concat(14,"px ",g),t.textBaseline="top",t.fillStyle=n;var h=e.dateString,y=t.measureText(h),m=y.width,k=y.actualBoundingBoxDescent;t.fillText(h,c+8,s+(f-k)/2,m)}var M=(0,a.aI)(t,".jl"),j=M.getContext("2d");if(function(t,e,n){var r=e===n;t.setAttribute("displayed",(0,u.xZ)(r))}(t,n,I),function(t){m=(0,r.gO)("route-details-canvas"),b=m.width,k=m.height,w=Math.min(window.devicePixelRatio,f)||1,t.width=b*w,t.height=k*w;var e=t.getContext("2d");e.setTransform(1,0,0,1,0,0),e.scale(w,w)}(M),n===I){j.clearRect(0,0,b,k);for(var D=0;D<24;D++)S(j,D,A);var T,P=s(e);try{for(P.s();!(T=P.n()).done;){_(j,T.value,i,o,c,d,x)}}catch(t){P.e(t)}finally{P.f()}}else j.clearRect(0,0,b,k)}function M(t,e,n){var r,i=(new Date).getDay(),l=(0,o.t)("--c"),u=(0,o.t)("--d"),s=(0,o.t)("--e"),d=(0,o.t)("--yh"),v=(0,o.t)("--b"),f=(0,o.t)("--ee"),h=t.calendarDays,y=t.calendarDayQuantity,p=t.calendarEventGroups,g=(t.calendarEventQuantity,(0,a.jg)(c.zk,".il").length);if(y!==g){var m=g-y;if(m<0)for(var b=0;b<Math.abs(m);b++){var k=(r=void 0,(r=document.createElement("div")).classList.add("gl"),{element:r,id:""});c.kP.appendChild(k.element);var w=A();c.zk.appendChild(w.element)}else for(var I=(0,a.jg)(c.kP,".gl"),M=(0,a.jg)(c.zk,".il"),j=0;j<Math.abs(m);j++){var D=g-1-j;I[D].remove(),M[D].remove()}}for(var T=(0,a.jg)(c.kP,".gl"),P=(0,a.jg)(c.zk,".il"),R=0;R<y;R++){var C="d_".concat(R),Z=h[C],E=p[C],z=T[R],B=P[R];S(z,Z,i,e,n,R),_(B,E,i,v,l,u,s,d,f,R)}x=t}function j(t){for(var e=(0,i.Js)("playing_animation"),n=(0,a.jg)(c.kP,".gl"),r=(0,a.jg)(c.zk,".il"),l=0;l<7;l++){var u,s,d=n[l],v=r[l],f="d_".concat(l),h=null===(u=x)||void 0===u?void 0:u.calendarEventGroups[f],y=null===(s=x)||void 0===s?void 0:s.calendarDays[f];if(h&&y){var p=(0,o.t)("--c"),g=(0,o.t)("--d"),m=(0,o.t)("--e"),b=(0,o.t)("--yh"),k=(0,o.t)("--b"),w=(0,o.t)("--ee");S(d,y,t,!1,e,l),_(v,h,t,k,p,g,m,b,w,l)}}}}}]);
//# sourceMappingURL=bb5f69e4ae1cb55687d8.js.map