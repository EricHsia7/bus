{"version":3,"file":"1069512bf77cec03010e.js","mappings":"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","sources":["webpack://bus/./src/interface/home/index.ts","webpack://bus/./src/interface/home/folders/index.ts","webpack://bus/./src/interface/home/recent-views/index.ts"],"sourcesContent":["import { getCarInfo } from '../../data/apis/getCarInfo/index';\nimport { getLocation } from '../../data/apis/getLocation/index';\nimport { getMaterialSymbolsSearchIndex } from '../../data/apis/getMaterialSymbolsSearchIndex/index';\nimport { getRoute } from '../../data/apis/getRoute/index';\nimport { DataReceivingProgressEvent, deleteDataReceivingProgress, deleteDataUpdateTime, getDataReceivingProgress, setDataReceivingProgress } from '../../data/apis/loader';\nimport { documentQuerySelector, elementQuerySelector } from '../../tools/elements';\n\nconst dataDownloadRequestID = 'downloadData';\nexport let dataDownloadCompleted = false;\n\nconst HomeField = documentQuerySelector('.css_home_field');\nconst HomeHeadElement = elementQuerySelector(HomeField, '.css_home_head');\nconst homeButtonRightElement = elementQuerySelector(HomeHeadElement, '.css_home_button_right');\nconst progressElement = elementQuerySelector(homeButtonRightElement, 'svg#download-svg path[progress=\"progress\"]');\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  const pixels = (1 - getDataReceivingProgress(dataDownloadRequestID)) * 189;\n  progressElement.style.setProperty('--b-cssvar-stroke-dashoffset', `${pixels}px`);\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n    progressElement.addEventListener(\n      'transitionend',\n      function () {\n        homeButtonRightElement.setAttribute('complete', 'true');\n      },\n      { once: true }\n    );\n    progressElement.style.setProperty('--b-cssvar-stroke-dashoffset', `${0}px`);\n    dataDownloadCompleted = true;\n  }\n}\n\nexport async function downloadData() {\n  /*\n  setDataReceivingProgress(dataDownloadRequestID, 'getRoute_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getRoute_1', 0, false);\n  */\n  // eliminate duplicate downloads in integrateFolders\n  setDataReceivingProgress(dataDownloadRequestID, 'getLocation_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getLocation_1', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getCarInfo_0', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getCarInfo_1', 0, false);\n  setDataReceivingProgress(dataDownloadRequestID, 'getMaterialSymbolsSearchIndex', 0, false);\n  document.addEventListener(dataDownloadRequestID, handleDataReceivingProgressUpdates);\n  await getRoute(dataDownloadRequestID, true);\n  await getLocation(dataDownloadRequestID, 1);\n  await getCarInfo(dataDownloadRequestID, true);\n  await getMaterialSymbolsSearchIndex(dataDownloadRequestID);\n  deleteDataReceivingProgress(dataDownloadRequestID);\n  deleteDataUpdateTime(dataDownloadRequestID);\n}\n","import { getUpdateRate } from '../../../data/analytics/update-rate/index';\nimport { DataReceivingProgressEvent } from '../../../data/apis/loader';\nimport { Folder, integratedFolder, integratedFolderContent, integratedFolders, integrateFolders } from '../../../data/folder/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings, generateIdentifier, hasOwnProperty } from '../../../tools/index';\nimport { getBlankIconElement, getIconElement, setIcon } from '../../icons/index';\nimport { MaterialSymbols } from '../../icons/material-symbols-type';\nimport { querySize } from '../../index';\nimport { openLocation } from '../../location/index';\nimport { promptMessage } from '../../prompt/index';\nimport { openRoute } from '../../route/index';\n\nconst HomeField = documentQuerySelector('.css_home_field');\nconst HomeHeadElement = elementQuerySelector(HomeField, '.css_home_head');\nconst HomeBodyElement = elementQuerySelector(HomeField, '.css_home_body');\nconst HomeFoldersElement = elementQuerySelector(HomeBodyElement, '.css_home_folders');\nconst HomeUpdateTimerElement = elementQuerySelector(HomeHeadElement, '.css_home_update_timer_box .css_home_update_timer');\n\nlet previousIntegration = {} as integratedFolders;\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet foldersRefreshTimer_retryInterval: number = 10 * 1000;\nlet foldersRefreshTimer_baseInterval: number = 15 * 1000;\nlet foldersRefreshTimer_minInterval: number = 5 * 1000;\nlet foldersRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet foldersRefreshTimer_dynamic: boolean = true;\nlet foldersRefreshTimer_lastUpdate: number = 0;\nlet foldersRefreshTimer_nextUpdate: number = 0;\nlet foldersRefreshTimer_currentRequestID: string = '';\nlet foldersRefreshTimer_refreshing: boolean = false;\nlet foldersRefreshTimer_streaming: boolean = false;\nlet foldersRefreshTimer_streamStarted: boolean = false;\n\nfunction generateElementOfItem(): HTMLElement {\n  // Main container\n  const itemElement = documentCreateDivElement();\n  itemElement.classList.add('css_home_folder_item');\n  itemElement.setAttribute('type', 'stop');\n\n  // Icon\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_home_folder_item_icon');\n  iconElement.appendChild(getIconElement('location_on'));\n\n  // Context\n  const contextElement = documentCreateDivElement();\n  contextElement.classList.add('css_home_folder_item_context');\n\n  // Main\n  const mainElement = documentCreateDivElement();\n  mainElement.classList.add('css_home_folder_item_main');\n\n  // Capsule\n  const capsuleElement = documentCreateDivElement();\n  capsuleElement.classList.add('css_home_folder_item_capsule');\n\n  // Status\n  const statusElement = documentCreateDivElement();\n  statusElement.classList.add('css_home_folder_item_status');\n\n  const nextSlideElement = documentCreateDivElement();\n  nextSlideElement.classList.add('css_next_slide');\n  nextSlideElement.setAttribute('code', '0');\n  nextSlideElement.setAttribute('displayed', 'false');\n\n  const currentSlideElement = documentCreateDivElement();\n  currentSlideElement.classList.add('css_current_slide');\n  currentSlideElement.setAttribute('code', '0');\n  currentSlideElement.setAttribute('displayed', 'true');\n\n  statusElement.appendChild(nextSlideElement);\n  statusElement.appendChild(currentSlideElement);\n\n  // Button\n  const buttonElement = documentCreateDivElement();\n  buttonElement.classList.add('css_home_folder_item_button');\n  buttonElement.appendChild(getIconElement('keyboard_arrow_right'));\n\n  // Capsule separator\n  const capsuleSeparatorElement = documentCreateDivElement();\n  capsuleSeparatorElement.classList.add('css_home_folder_item_capsule_separator');\n\n  // Assemble capsule\n  capsuleElement.appendChild(statusElement);\n  capsuleElement.appendChild(buttonElement);\n  capsuleElement.appendChild(capsuleSeparatorElement);\n\n  // Assemble item\n  itemElement.appendChild(iconElement);\n  itemElement.appendChild(contextElement);\n  itemElement.appendChild(mainElement);\n  itemElement.appendChild(capsuleElement);\n\n  return itemElement;\n}\n\nfunction generateElementOfFolder(): HTMLElement {\n  // Main container\n  const folderElement = documentCreateDivElement();\n  folderElement.classList.add('css_home_folder');\n\n  // Head\n  const headElement = documentCreateDivElement();\n  headElement.classList.add('css_home_folder_head');\n\n  // Icon\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_home_folder_icon');\n  iconElement.appendChild(getBlankIconElement());\n\n  // Name\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_home_folder_name');\n\n  // Assemble head\n  headElement.appendChild(iconElement);\n  headElement.appendChild(nameElement);\n\n  // Content\n  const contentElement = documentCreateDivElement();\n  contentElement.classList.add('css_home_folder_content');\n\n  // Assemble folder\n  folderElement.appendChild(headElement);\n  folderElement.appendChild(contentElement);\n\n  return folderElement;\n}\n\nfunction animateUpdateTimer(): void {\n  HomeUpdateTimerElement.style.setProperty('--b-cssvar-home-update-timer-interval', `${foldersRefreshTimer_dynamicInterval}ms`);\n  HomeUpdateTimerElement.classList.add('css_home_update_timer_slide_rtl');\n}\n\nfunction handleDataReceivingProgressUpdates(event: Event): void {\n  const CustomEvent = event as DataReceivingProgressEvent;\n  if (foldersRefreshTimer_refreshing) {\n    const offsetRatio = CustomEvent.detail.progress - 1;\n    HomeUpdateTimerElement.style.setProperty('--b-cssvar-home-update-timer-offset-ratio', offsetRatio.toString());\n  }\n  if (CustomEvent.detail.stage === 'end') {\n    document.removeEventListener(CustomEvent.detail.target, handleDataReceivingProgressUpdates);\n  }\n}\n\nexport function setUpFolderFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const FieldWidth = WindowSize.width;\n  const FieldHeight = WindowSize.height;\n  const contentLength = Math.floor(FieldHeight / 50 / 3) + 2;\n  const folderQuantity = 3;\n\n  const folders: integratedFolders['folders'] = [];\n  for (let i = 0; i < folderQuantity; i++) {\n    const folder: integratedFolder = {\n      name: '',\n      icon: '',\n      id: '',\n      timestamp: 0,\n      content: [],\n      contentLength: contentLength\n    };\n\n    for (let j = 0; j < contentLength; j++) {\n      const folderContent: integratedFolderContent = {\n        type: 'stop',\n        id: 0,\n        timestamp: 0,\n        name: '',\n        status: {\n          code: 8,\n          text: '',\n          time: -6\n        },\n        direction: 0,\n        route: {\n          name: '',\n          endPoints: {\n            departure: '',\n            destination: ''\n          },\n          id: 0,\n          pathAttributeId: []\n        }\n      };\n      folder.content.push(folderContent);\n    }\n    folders.push(folder);\n  }\n\n  updateFoldersElement(\n    {\n      folders: folders,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nfunction updateFoldersElement(integration: integratedFolders, skeletonScreen: boolean, animation: boolean): void {\n  function updateItem(thisElement: HTMLElement, thisItem: integratedFolderContent, previousItem: integratedFolderContent | null) {\n    function updateType(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      thisElement.setAttribute('type', thisItem.type);\n    }\n\n    function updateIcon(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      const thisIconElement = elementQuerySelector(thisElement, '.css_home_folder_item_icon');\n      let icon = '' as MaterialSymbols;\n      switch (thisItem.type) {\n        case 'stop':\n          icon = 'location_on';\n          break;\n        case 'route':\n          icon = 'route';\n          break;\n        case 'location':\n          icon = 'location_on';\n          break;\n        case 'bus':\n          icon = 'directions_bus';\n          break;\n        case 'empty':\n          icon = 'lightbulb';\n          break;\n        default:\n          icon = '';\n          break;\n      }\n      setIcon(thisIconElement, icon);\n    }\n\n    function updateStatus(thisElement: HTMLElement, thisItem: integratedFolderContent, animation: boolean): void {\n      if (thisItem.type === 'stop') {\n        const thisElementRect = thisElement.getBoundingClientRect();\n        const top = thisElementRect.top;\n        const left = thisElementRect.left;\n        const bottom = thisElementRect.bottom;\n        const right = thisElementRect.right;\n        const windowWidth = window.innerWidth;\n        const windowHeight = window.innerHeight;\n\n        const thisItemStatusElement = elementQuerySelector(thisElement, '.css_home_folder_item_capsule .css_home_folder_item_status');\n        const nextSlideElement = elementQuerySelector(thisItemStatusElement, '.css_next_slide');\n        const currentSlideElement = elementQuerySelector(thisItemStatusElement, '.css_current_slide');\n\n        nextSlideElement.setAttribute('code', thisItem.status.code.toString());\n        nextSlideElement.innerText = thisItem.status.text;\n\n        if (animation && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth) {\n          currentSlideElement.addEventListener(\n            'animationend',\n            function () {\n              currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n              currentSlideElement.innerText = thisItem.status.text;\n              currentSlideElement.classList.remove('css_slide_fade_out');\n              nextSlideElement.setAttribute('displayed', 'false');\n            },\n            { once: true }\n          );\n          nextSlideElement.setAttribute('displayed', 'true');\n          currentSlideElement.classList.add('css_slide_fade_out');\n        } else {\n          currentSlideElement.setAttribute('code', thisItem.status.code.toString());\n          currentSlideElement.innerText = thisItem.status.text;\n        }\n      }\n    }\n\n    function updateMain(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      let main: string = '';\n      switch (thisItem.type) {\n        case 'stop':\n          main = thisItem.name;\n          break;\n        case 'route':\n          main = thisItem.name;\n          break;\n        case 'location':\n          main = thisItem.name;\n          break;\n        case 'bus':\n          main = thisItem.busID;\n          break;\n        case 'empty':\n          main = '沒有內容';\n          break;\n        default:\n          main = 'null';\n          break;\n      }\n      elementQuerySelector(thisElement, '.css_home_folder_item_main').innerText = main;\n    }\n\n    function updateContext(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      let context: string = '';\n      switch (thisItem.type) {\n        case 'stop':\n          context = `${thisItem.route ? thisItem.route.name : ''} - 往${thisItem.route ? [thisItem.route.endPoints.destination, thisItem.route.endPoints.departure, ''][thisItem.direction ? thisItem.direction : 0] : ''}`;\n          break;\n        case 'route':\n          context = `${thisItem.endPoints.departure} \\u2194 ${thisItem.endPoints.destination}`;\n          break;\n        case 'location':\n          context = '地點';\n          break;\n        case 'bus':\n          // context = thisItem.currentRoute.name; // TODO: integration\n          break;\n        case 'empty':\n          context = '提示';\n          break;\n        default:\n          context = 'null';\n          break;\n      }\n      elementQuerySelector(thisElement, '.css_home_folder_item_context').innerText = context;\n    }\n\n    function updateButton(thisElement: HTMLElement, thisItem: integratedFolderContent): void {\n      const buttonElement = elementQuerySelector(thisElement, '.css_home_folder_item_capsule .css_home_folder_item_button');\n      switch (thisItem.type) {\n        case 'stop':\n          buttonElement.onclick = function () {\n            openRoute(thisItem.route.id, thisItem.route.pathAttributeId);\n          };\n          break;\n        case 'route':\n          buttonElement.onclick = function () {\n            openRoute(thisItem.id, thisItem.pathAttributeId);\n          };\n          break;\n        case 'location':\n          buttonElement.onclick = function () {\n            openLocation(thisItem.id);\n          };\n          break;\n        case 'bus':\n          break;\n        case 'empty':\n          break;\n        default:\n          break;\n      }\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateType(thisElement, thisItem);\n      updateIcon(thisElement, thisItem);\n      updateStatus(thisElement, thisItem, animation);\n      updateMain(thisElement, thisItem);\n      updateContext(thisElement, thisItem);\n      updateButton(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (thisItem.type !== previousItem.type) {\n        updateType(thisElement, thisItem);\n        updateIcon(thisElement, thisItem);\n        updateStatus(thisElement, thisItem, animation);\n        updateMain(thisElement, thisItem);\n        updateContext(thisElement, thisItem);\n        updateButton(thisElement, thisItem);\n        updateAnimation(thisElement, animation);\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      } else {\n        switch (thisItem.type) {\n          case 'stop':\n            if (!compareThings(previousItem.route, thisItem.route)) {\n              updateContext(thisElement, thisItem);\n              updateButton(thisElement, thisItem);\n            }\n            if (previousItem.name !== thisItem.name) {\n              updateMain(thisElement, thisItem);\n            }\n            if (previousItem.status.time !== thisItem.status.time) {\n              updateStatus(thisElement, thisItem, animation);\n            }\n            break;\n          case 'route':\n            if (previousItem.id !== thisItem.id) {\n              updateButton(thisElement, thisItem);\n            }\n            if (!compareThings(previousItem.endPoints, thisItem.endPoints)) {\n              updateContext(thisElement, thisItem);\n            }\n            if (previousItem.name !== thisItem.name) {\n              updateMain(thisElement, thisItem);\n            }\n            break;\n          case 'location':\n            if (previousItem.id !== thisItem.id) {\n              updateButton(thisElement, thisItem);\n            }\n            if (previousItem.name !== thisItem.name) {\n              updateMain(thisElement, thisItem);\n            }\n            /*\n            if (!compareThings(previousItem.labels, thisItem.labels)) {\n              updateContext(thisElement, thisItem);\n            }\n            */\n            break;\n          case 'bus':\n            /*\n            if (!compareThings(previousItem.currentRoute, thisItem.currentRoute)) {\n              updateContext(thisElement, thisItem);\n            }\n            if (!compareThings(previousItem.busID, thisItem.busID)) {\n              updateMain(thisElement, thisItem);\n            }\n            */\n            break;\n          case 'empty':\n            if (thisItem.type !== previousItem.type) {\n              updateContext(thisElement, thisItem);\n              updateMain(thisElement, thisItem);\n            }\n            break;\n          default:\n            break;\n        }\n        if (skeletonScreen !== previousSkeletonScreen) {\n          updateSkeletonScreen(thisElement, skeletonScreen);\n        }\n        if (animation !== previousAnimation) {\n          updateAnimation(thisElement, animation);\n        }\n      }\n    }\n  }\n\n  function updateFolder(thisElement: HTMLElement, thisFolder: Folder, previousFolder: Folder | null): void {\n    function updateName(thisElement: HTMLElement, thisFolder: Folder): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_folder_head');\n      const thisNameElement = elementQuerySelector(thisHeadElement, '.css_home_folder_name');\n      thisNameElement.innerText = thisFolder.name;\n    }\n\n    function updateIcon(thisElement: HTMLElement, thisFolder: Folder): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_folder_head');\n      const thisIconElement = elementQuerySelector(thisHeadElement, '.css_home_folder_icon');\n      setIcon(thisIconElement, thisFolder.icon);\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousFolder === null || previousFolder === undefined) {\n      updateName(thisElement, thisFolder);\n      updateIcon(thisElement, thisFolder);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (thisFolder.name !== previousFolder.name) {\n        updateName(thisElement, thisFolder);\n      }\n      if (thisFolder.icon !== previousFolder.icon) {\n        updateIcon(thisElement, thisFolder);\n      }\n      if (animation !== previousAnimation) {\n        updateAnimation(thisElement, animation);\n      }\n      if (skeletonScreen !== previousSkeletonScreen) {\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      }\n    }\n  }\n\n  const folders = integration.folders;\n  const foldersLength = folders.length;\n\n  const folderElements = Array.from(elementQuerySelectorAll(HomeFoldersElement, '.css_home_folder'));\n  const currentFolderElementsLength = folderElements.length;\n  if (foldersLength !== currentFolderElementsLength) {\n    const difference = currentFolderElementsLength - foldersLength;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newFolderElement = generateElementOfFolder();\n        fragment.appendChild(newFolderElement);\n        folderElements.push(newFolderElement);\n      }\n      HomeFoldersElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentFolderElementsLength - 1, q = currentFolderElementsLength - difference - 1; p > q; p--) {\n        folderElements[p].remove();\n        folderElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < foldersLength; i++) {\n    const thisFolder = folders[i];\n    const thisFolderContent = thisFolder.content;\n    const thisFolderContentLength = thisFolderContent.length;\n\n    const thisFolderElement = folderElements[i];\n    const thisFolderContentElement = elementQuerySelector(thisFolderElement, '.css_home_folder_content');\n    const thisFolderContentItemElements = Array.from(elementQuerySelectorAll(thisFolderContentElement, '.css_home_folder_item'));\n\n    const currentFolderContentItemElementsLength = thisFolderContentItemElements.length;\n    if (thisFolderContentLength !== currentFolderContentItemElementsLength) {\n      const difference = currentFolderContentItemElementsLength - thisFolderContentLength;\n      if (difference < 0) {\n        for (let o = 0; o > difference; o--) {\n          const newItemElement = generateElementOfItem();\n          thisFolderContentElement.appendChild(newItemElement);\n          thisFolderContentItemElements.push(newItemElement);\n        }\n      } else if (difference > 0) {\n        for (let p = currentFolderContentItemElementsLength - 1, q = currentFolderContentItemElementsLength - difference - 1; p > q; p--) {\n          thisFolderContentItemElements[p].remove();\n          thisFolderContentItemElements.splice(p, 1);\n        }\n      }\n    }\n\n    if (hasOwnProperty(previousIntegration, 'folders')) {\n      if (previousIntegration.folders[i]) {\n        const previousFolder = previousIntegration.folders[i];\n        updateFolder(thisFolderElement, thisFolder, previousFolder);\n      } else {\n        updateFolder(thisFolderElement, thisFolder, null);\n      }\n    } else {\n      updateFolder(thisFolderElement, thisFolder, null);\n    }\n\n    for (let j = 0; j < thisFolderContentLength; j++) {\n      const thisElement = thisFolderContentItemElements[j];\n      const thisItem = thisFolderContent[j];\n      if (hasOwnProperty(previousIntegration, 'folders')) {\n        if (previousIntegration.folders[i]) {\n          if (previousIntegration.folders[i].content[j]) {\n            const previousItem = previousIntegration.folders[i].content[j];\n            updateItem(thisElement, thisItem, previousItem);\n          } else {\n            updateItem(thisElement, thisItem, null);\n          }\n        } else {\n          updateItem(thisElement, thisItem, null);\n        }\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nasync function refreshFolders() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  foldersRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  foldersRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  foldersRefreshTimer_refreshing = true;\n  foldersRefreshTimer_currentRequestID = generateIdentifier();\n  HomeUpdateTimerElement.setAttribute('refreshing', 'true');\n  HomeUpdateTimerElement.classList.remove('css_home_update_timer_slide_rtl');\n  document.addEventListener(foldersRefreshTimer_currentRequestID, handleDataReceivingProgressUpdates);\n  const integration = await integrateFolders(foldersRefreshTimer_currentRequestID);\n  updateFoldersElement(integration, false, playing_animation);\n  let updateRate = 0;\n  if (foldersRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  foldersRefreshTimer_lastUpdate = new Date().getTime();\n  if (foldersRefreshTimer_dynamic) {\n    foldersRefreshTimer_nextUpdate = Math.max(foldersRefreshTimer_lastUpdate + foldersRefreshTimer_minInterval, integration.dataUpdateTime + foldersRefreshTimer_baseInterval / updateRate);\n  } else {\n    foldersRefreshTimer_nextUpdate = foldersRefreshTimer_lastUpdate + foldersRefreshTimer_baseInterval;\n  }\n  foldersRefreshTimer_dynamicInterval = Math.max(foldersRefreshTimer_minInterval, foldersRefreshTimer_nextUpdate - foldersRefreshTimer_lastUpdate);\n  foldersRefreshTimer_refreshing = false;\n  HomeUpdateTimerElement.setAttribute('refreshing', 'false');\n  animateUpdateTimer();\n}\n\nasync function streamFolders() {\n  refreshFolders()\n    .then(function () {\n      if (foldersRefreshTimer_streaming) {\n        setTimeout(\n          function () {\n            streamFolders();\n          },\n          Math.max(foldersRefreshTimer_minInterval, foldersRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        foldersRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (foldersRefreshTimer_streaming) {\n        promptMessage('error', `資料夾網路連線中斷，將在${foldersRefreshTimer_retryInterval / 1000}秒後重試。`);\n        setTimeout(function () {\n          streamFolders();\n        }, foldersRefreshTimer_retryInterval);\n      } else {\n        foldersRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function initializeFolders(): void {\n  setUpFolderFieldSkeletonScreen();\n  if (!foldersRefreshTimer_streaming) {\n    foldersRefreshTimer_streaming = true;\n    if (!foldersRefreshTimer_streamStarted) {\n      foldersRefreshTimer_streamStarted = true;\n      streamFolders();\n    } else {\n      refreshFolders();\n    }\n  }\n}\n","import { getUpdateRate } from '../../../data/analytics/update-rate/index';\nimport { integratedRecentView, integratedRecentViews, integrateRecentViews } from '../../../data/recent-views/index';\nimport { getSettingOptionValue, SettingSelectOptionRefreshIntervalValue } from '../../../data/settings/index';\nimport { documentCreateDivElement, documentQuerySelector, elementQuerySelector, elementQuerySelectorAll } from '../../../tools/elements';\nimport { booleanToString, compareThings, generateIdentifier, hasOwnProperty } from '../../../tools/index';\nimport { openBus } from '../../bus/index';\nimport { getBlankIconElement, setIcon } from '../../icons/index';\nimport { querySize } from '../../index';\nimport { openLocation } from '../../location/index';\nimport { openRoute } from '../../route/index';\n\nconst HomeField = documentQuerySelector('.css_home_field');\nconst HomeBodyElement = elementQuerySelector(HomeField, '.css_home_body');\nconst RecentViewsField = elementQuerySelector(HomeBodyElement, '.css_home_recent_views');\nconst RecentViewsContentElement = elementQuerySelector(RecentViewsField, '.css_home_recent_views_content');\n\nlet previousIntegration = {};\nlet previousAnimation: boolean = false;\nlet previousSkeletonScreen: boolean = false;\n\nlet recentViewsRefreshTimer_retryInterval: number = 10 * 1000;\nlet recentViewsRefreshTimer_baseInterval: number = 15 * 1000;\nlet recentViewsRefreshTimer_minInterval: number = 5 * 1000;\nlet recentViewsRefreshTimer_dynamicInterval: number = 15 * 1000;\nlet recentViewsRefreshTimer_dynamic: boolean = true;\nlet recentViewsRefreshTimer_streaming: boolean = false;\nlet recentViewsRefreshTimer_lastUpdate: number = 0;\nlet recentViewsRefreshTimer_nextUpdate: number = 0;\nlet recentViewsRefreshTimer_refreshing: boolean = false;\nlet recentViewsRefreshTimer_currentRequestID: string = '';\nlet recentViewsRefreshTimer_streamStarted: boolean = false;\nlet recentViewsRefreshTimer_timer: ReturnType<typeof setTimeout>;\n\nfunction generateElementOfRecentViewItem(): HTMLElement {\n  // Main container\n  const recentViewsItemElement = documentCreateDivElement();\n  recentViewsItemElement.classList.add('css_home_recent_views_item');\n\n  // Head\n  const headElement = documentCreateDivElement();\n  headElement.classList.add('css_home_recent_views_item_head');\n\n  // Icon\n  const iconElement = documentCreateDivElement();\n  iconElement.classList.add('css_home_recent_views_item_icon');\n  iconElement.appendChild(getBlankIconElement());\n\n  // Title\n  const titleElement = documentCreateDivElement();\n  titleElement.classList.add('css_home_recent_views_item_title');\n\n  // Time\n  const timeElement = documentCreateDivElement();\n  timeElement.classList.add('css_home_recent_views_item_time');\n\n  // Assemble head\n  headElement.appendChild(iconElement);\n  headElement.appendChild(titleElement);\n  headElement.appendChild(timeElement);\n\n  // Name\n  const nameElement = documentCreateDivElement();\n  nameElement.classList.add('css_home_recent_views_item_name');\n\n  // Assemble item\n  recentViewsItemElement.appendChild(headElement);\n  recentViewsItemElement.appendChild(nameElement);\n\n  return recentViewsItemElement;\n}\n\nfunction updateRecentViewsField(integration: integratedRecentViews, skeletonScreen: boolean, animation: boolean) {\n  function updateItem(thisElement: HTMLElement, thisItem: integratedRecentView, previousItem: integratedRecentView): void {\n    function updateIcon(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_head');\n      const thisIconElement = elementQuerySelector(thisHeadElement, '.css_home_recent_views_item_icon');\n      let icon = '';\n      switch (thisItem.type) {\n        case 'route':\n          icon = 'route';\n          break;\n        case 'location':\n          icon = 'location_on';\n          break;\n        case 'bus':\n          icon = 'directions_bus';\n          break;\n        case 'empty':\n          icon = 'lightbulb';\n          break;\n        default:\n          break;\n      }\n      setIcon(thisIconElement, icon);\n    }\n\n    function updateTitle(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_head');\n      const thisTitleElement = elementQuerySelector(thisHeadElement, '.css_home_recent_views_item_title');\n      let title = '';\n      switch (thisItem.type) {\n        case 'route':\n          title = '路線';\n          break;\n        case 'location':\n          title = '地點';\n          break;\n        case 'bus':\n          title = '公車';\n          break;\n        case 'empty':\n          title = '提示';\n          break;\n        default:\n          break;\n      }\n      thisTitleElement.innerText = title;\n    }\n\n    function updateTime(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisHeadElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_head');\n      const thisTimeElement = elementQuerySelector(thisHeadElement, '.css_home_recent_views_item_time');\n      thisTimeElement.innerText = thisItem.time.relative;\n    }\n\n    function updateName(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      const thisNameElement = elementQuerySelector(thisElement, '.css_home_recent_views_item_name');\n      thisNameElement.innerText = thisItem.name;\n    }\n\n    function updateOnclick(thisElement: HTMLElement, thisItem: integratedRecentView): void {\n      switch (thisItem.type) {\n        case 'route':\n          thisElement.onclick = function () {\n            openRoute(thisItem.id, thisItem.pid);\n          };\n          break;\n        case 'location':\n          thisElement.onclick = function () {\n            openLocation(thisItem.hash);\n          };\n          break;\n        case 'bus':\n          thisElement.onclick = function () {\n            openBus(thisItem.id);\n          };\n          break;\n        case 'empty':\n          thisElement.onclick = null;\n          break;\n        default:\n          break;\n      }\n    }\n\n    function updateAnimation(thisElement: HTMLElement, animation: boolean): void {\n      thisElement.setAttribute('animation', booleanToString(animation));\n    }\n\n    function updateSkeletonScreen(thisElement: HTMLElement, skeletonScreen: boolean): void {\n      thisElement.setAttribute('skeleton-screen', booleanToString(skeletonScreen));\n    }\n\n    if (previousItem === null || previousItem === undefined) {\n      updateIcon(thisElement, thisItem);\n      updateTitle(thisElement, thisItem);\n      updateTime(thisElement, thisItem);\n      updateName(thisElement, thisItem);\n      updateOnclick(thisElement, thisItem);\n      updateAnimation(thisElement, animation);\n      updateSkeletonScreen(thisElement, skeletonScreen);\n    } else {\n      if (thisItem.type !== previousItem.type) {\n        updateIcon(thisElement, thisItem);\n        updateTitle(thisElement, thisItem);\n        updateTime(thisElement, thisItem);\n        updateName(thisElement, thisItem);\n        updateOnclick(thisElement, thisItem);\n        updateAnimation(thisElement, animation);\n        updateSkeletonScreen(thisElement, skeletonScreen);\n      } else {\n        switch (thisItem.type) {\n          case 'location':\n            if (!compareThings(previousItem.name, thisItem.name)) {\n              updateName(thisElement, thisItem);\n            }\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            if (!compareThings(previousItem.hash, thisItem.hash)) {\n              updateOnclick(thisElement, thisItem);\n            }\n            break;\n          case 'route':\n            if (previousItem.name !== thisItem.name) {\n              updateName(thisElement, thisItem);\n            }\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            if (previousItem.id !== thisItem.id || !compareThings(previousItem.pid, thisItem.pid)) {\n              updateOnclick(thisElement, thisItem);\n            }\n            break;\n          case 'bus':\n            if (previousItem.name !== thisItem.name) {\n              updateName(thisElement, thisItem);\n            }\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            if (previousItem.id !== thisItem.id) {\n              updateOnclick(thisElement, thisItem);\n            }\n            break;\n          case 'empty':\n            if (previousItem.time !== thisItem.time) {\n              updateTime(thisElement, thisItem);\n            }\n            break;\n          default:\n            break;\n        }\n        if (previousAnimation !== animation) {\n          updateAnimation(thisElement, animation);\n        }\n        if (previousSkeletonScreen !== skeletonScreen) {\n          updateSkeletonScreen(thisElement, skeletonScreen);\n        }\n      }\n    }\n  }\n\n  const itemQuantity = integration.itemQuantity;\n\n  const itemElements = Array.from(elementQuerySelectorAll(RecentViewsContentElement, '.css_home_recent_views_item'));\n  const currentItemElementsLength = itemElements.length;\n  if (itemQuantity !== currentItemElementsLength) {\n    const difference = currentItemElementsLength - itemQuantity;\n    if (difference < 0) {\n      const fragment = new DocumentFragment();\n      for (let o = 0; o > difference; o--) {\n        const newRecentViewItemElement = generateElementOfRecentViewItem();\n        fragment.appendChild(newRecentViewItemElement);\n        itemElements.push(newRecentViewItemElement);\n      }\n      RecentViewsContentElement.append(fragment);\n    } else if (difference > 0) {\n      for (let p = currentItemElementsLength - 1, q = currentItemElementsLength - difference - 1; p > q; p--) {\n        itemElements[p].remove();\n        itemElements.splice(p, 1);\n      }\n    }\n  }\n\n  for (let i = 0; i < itemQuantity; i++) {\n    const thisElement = itemElements[i];\n    const thisItem = integration.items[i];\n    if (hasOwnProperty(previousIntegration, 'items')) {\n      if (previousIntegration.items[i]) {\n        const previousItem = previousIntegration.items[i];\n        updateItem(thisElement, thisItem, previousItem);\n      } else {\n        updateItem(thisElement, thisItem, null);\n      }\n    } else {\n      updateItem(thisElement, thisItem, null);\n    }\n  }\n\n  previousIntegration = integration;\n  previousAnimation = animation;\n  previousSkeletonScreen = skeletonScreen;\n}\n\nexport function setUpRecentViewsFieldSkeletonScreen(): void {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const WindowSize = querySize('window');\n  const defaultItemQuantity = Math.floor(WindowSize.height / 70 / 3) + 2;\n  const items: Array<integratedRecentView> = [];\n  for (let i = 0; i < defaultItemQuantity; i++) {\n    items.push({\n      type: 'route',\n      id: 0,\n      pid: [],\n      time: {\n        absolute: 0,\n        relative: ''\n      },\n      name: ''\n    });\n  }\n  updateRecentViewsField(\n    {\n      items: items,\n      itemQuantity: items.length,\n      dataUpdateTime: 0\n    },\n    true,\n    playing_animation\n  );\n}\n\nasync function refreshRecentViews() {\n  const playing_animation = getSettingOptionValue('playing_animation') as boolean;\n  const refresh_interval_setting = getSettingOptionValue('refresh_interval') as SettingSelectOptionRefreshIntervalValue;\n  recentViewsRefreshTimer_dynamic = refresh_interval_setting.dynamic;\n  recentViewsRefreshTimer_baseInterval = refresh_interval_setting.baseInterval;\n  recentViewsRefreshTimer_refreshing = true;\n  recentViewsRefreshTimer_currentRequestID = generateIdentifier();\n  // documentQuerySelector('.css_home_update_timer').setAttribute('refreshing', 'true');\n  const integration = await integrateRecentViews(recentViewsRefreshTimer_currentRequestID);\n  updateRecentViewsField(integration, false, playing_animation);\n  let updateRate = 0;\n  if (recentViewsRefreshTimer_dynamic) {\n    updateRate = await getUpdateRate();\n  }\n  recentViewsRefreshTimer_lastUpdate = new Date().getTime();\n  if (recentViewsRefreshTimer_dynamic) {\n    recentViewsRefreshTimer_nextUpdate = Math.max(recentViewsRefreshTimer_lastUpdate + recentViewsRefreshTimer_minInterval, integration.dataUpdateTime + recentViewsRefreshTimer_baseInterval / updateRate);\n  } else {\n    recentViewsRefreshTimer_nextUpdate = recentViewsRefreshTimer_lastUpdate + recentViewsRefreshTimer_baseInterval;\n  }\n  recentViewsRefreshTimer_dynamicInterval = Math.max(recentViewsRefreshTimer_minInterval, recentViewsRefreshTimer_nextUpdate - recentViewsRefreshTimer_lastUpdate);\n  recentViewsRefreshTimer_refreshing = false;\n  // documentQuerySelector('.css_home_update_timer').setAttribute('refreshing', 'false');\n}\n\nasync function streamRecentViews() {\n  refreshRecentViews()\n    .then(function () {\n      if (recentViewsRefreshTimer_streaming) {\n        recentViewsRefreshTimer_timer = setTimeout(\n          function () {\n            streamRecentViews();\n          },\n          Math.max(recentViewsRefreshTimer_minInterval, recentViewsRefreshTimer_nextUpdate - new Date().getTime())\n        );\n      } else {\n        recentViewsRefreshTimer_streamStarted = false;\n      }\n    })\n    .catch((err) => {\n      console.error(err);\n      if (recentViewsRefreshTimer_streaming) {\n        recentViewsRefreshTimer_timer = setTimeout(function () {\n          streamRecentViews();\n        }, recentViewsRefreshTimer_retryInterval);\n      } else {\n        recentViewsRefreshTimer_streamStarted = false;\n      }\n    });\n}\n\nexport function initializeRecentViews(): void {\n  setUpRecentViewsFieldSkeletonScreen();\n  if (!recentViewsRefreshTimer_streaming) {\n    recentViewsRefreshTimer_streaming = true;\n    if (!recentViewsRefreshTimer_streamStarted) {\n      recentViewsRefreshTimer_streamStarted = true;\n      streamRecentViews();\n    } else {\n      refreshRecentViews();\n    }\n  }\n}\n"],"names":["dataDownloadRequestID","dataDownloadCompleted","HomeField","documentQuerySelector","HomeHeadElement","elementQuerySelector","homeButtonRightElement","progressElement","handleDataReceivingProgressUpdates","event","CustomEvent","pixels","getDataReceivingProgress","style","setProperty","detail","stage","document","removeEventListener","target","addEventListener","setAttribute","once","downloadData","_downloadData","apply","arguments","_asyncToGenerator","setDataReceivingProgress","getRoute","getLocation","getCarInfo","getMaterialSymbolsSearchIndex","deleteDataReceivingProgress","deleteDataUpdateTime","HomeBodyElement","HomeFoldersElement","HomeUpdateTimerElement","previousIntegration","previousAnimation","previousSkeletonScreen","foldersRefreshTimer_baseInterval","foldersRefreshTimer_minInterval","foldersRefreshTimer_dynamicInterval","foldersRefreshTimer_dynamic","foldersRefreshTimer_lastUpdate","foldersRefreshTimer_nextUpdate","foldersRefreshTimer_currentRequestID","foldersRefreshTimer_refreshing","foldersRefreshTimer_streaming","foldersRefreshTimer_streamStarted","generateElementOfItem","itemElement","documentCreateDivElement","classList","add","iconElement","appendChild","getIconElement","contextElement","mainElement","capsuleElement","statusElement","nextSlideElement","currentSlideElement","buttonElement","capsuleSeparatorElement","generateElementOfFolder","folderElement","headElement","getBlankIconElement","nameElement","contentElement","offsetRatio","progress","toString","setUpFolderFieldSkeletonScreen","playing_animation","getSettingOptionValue","WindowSize","querySize","FieldHeight","width","height","contentLength","Math","floor","folders","i","folder","name","icon","id","timestamp","content","j","push","type","status","code","text","time","direction","route","endPoints","departure","destination","pathAttributeId","updateFoldersElement","dataUpdateTime","integration","skeletonScreen","animation","updateItem","thisElement","thisItem","previousItem","updateType","updateIcon","thisIconElement","setIcon","updateStatus","thisElementRect","getBoundingClientRect","top","left","bottom","right","windowWidth","window","innerWidth","windowHeight","innerHeight","thisItemStatusElement","innerText","remove","updateMain","main","busID","updateContext","context","updateButton","onclick","openRoute","openLocation","updateAnimation","booleanToString","updateSkeletonScreen","compareThings","updateFolder","thisFolder","previousFolder","updateName","thisHeadElement","foldersLength","length","folderElements","Array","from","elementQuerySelectorAll","currentFolderElementsLength","difference","fragment","DocumentFragment","o","newFolderElement","append","p","q","splice","thisFolderContent","thisFolderContentLength","thisFolderElement","thisFolderContentElement","thisFolderContentItemElements","currentFolderContentItemElementsLength","newItemElement","hasOwnProperty","refreshFolders","_refreshFolders","refresh_interval_setting","dynamic","baseInterval","generateIdentifier","integrateFolders","updateRate","getUpdateRate","Date","getTime","max","streamFolders","_streamFolders","then","setTimeout","err","promptMessage","initializeFolders","RecentViewsField","RecentViewsContentElement","recentViewsRefreshTimer_baseInterval","recentViewsRefreshTimer_minInterval","recentViewsRefreshTimer_dynamic","recentViewsRefreshTimer_streaming","recentViewsRefreshTimer_lastUpdate","recentViewsRefreshTimer_nextUpdate","recentViewsRefreshTimer_currentRequestID","recentViewsRefreshTimer_streamStarted","generateElementOfRecentViewItem","recentViewsItemElement","titleElement","timeElement","updateRecentViewsField","updateTitle","thisTitleElement","title","updateTime","relative","updateOnclick","pid","hash","openBus","itemQuantity","itemElements","currentItemElementsLength","newRecentViewItemElement","items","setUpRecentViewsFieldSkeletonScreen","defaultItemQuantity","absolute","refreshRecentViews","_refreshRecentViews","integrateRecentViews","streamRecentViews","_streamRecentViews","initializeRecentViews"],"ignoreList":[],"sourceRoot":""}