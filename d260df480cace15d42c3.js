"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[537],{4131(e,t,a){a.d(t,{a:()=>u,b:()=>l,c:()=>d});var n=a(8179),i=a(904),r=(0,n.c)(".f"),o=(0,n.e)(r,".g"),c=((0,n.e)(o,".h"),(0,n.e)(r,".i"));Array.from((0,n.d)(c,".j")),new Date;function d(){r.setAttribute("displayed","true")}function l(){r.setAttribute("displayed","false")}function u(){l(),(0,i.i)(),(0,i.e)("RouteCalendar")}},5286(e,t,a){a.d(t,{a:()=>G,b:()=>N,c:()=>O,d:()=>K,e:()=>Z,f:()=>W,g:()=>X,h:()=>V});var n=a(467),i=a(9566),r=a(8621),o=a(3459),c=a(8179),d=a(8024),l=a(904),u=a(3041),s=a(8134),f=a(9469),p=a(251),v=a(8279);function h(){return(h=(0,n.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,p.b)(t.n,a)}})).apply(this,arguments)}function b(){return(b=(0,n.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var a=(0,f.a)(0,{id:e,name:t.n});(0,v.c)(a)}})).apply(this,arguments)}var m=a(7968),g=a(6141),y='"Noto Sans TC", sans-serif',w=(0,l.d)("route-details-canvas"),A=w.width,k=w.height,C=Math.min(window.devicePixelRatio,1.875)||1,D={};function x(){var e=(0,c.a)();return e.classList.add("k"),e}function _(){var e=(0,c.a)();e.classList.add("l");var t=document.createElement("canvas");return t.classList.add("m"),e.appendChild(t),e}function T(e,t,a,n,i,r){e.innerText=t.name,e.setAttribute("day",r.toString()),e.onclick=function(){!function(e){for(var t=(0,o.b)("playing_animation"),a=(0,c.d)(G,".k"),n=(0,c.d)(N,".l"),i=0;i<7;i++){var r,d,l=a[i],u=n[i],s=`d_${i}`,f=null===(r=D)||void 0===r?void 0:r.calendarEventGroups[s],p=null===(d=D)||void 0===d?void 0:d.calendarDays[s];if(f&&p){var v=(0,g.a)("--b"),h=(0,g.a)("--n"),b=(0,g.a)("--o");T(l,p,e,!1,t,i),L(u,f,e,v,h,b,i)}}}(r)},e.setAttribute("highlighted",a===r?"true":"false"),e.setAttribute("animation",(0,d.a)(i)),e.setAttribute("skeleton-screen",(0,d.a)(n))}function L(e,t,a,n,i,r,o){function u(e,t,a){var n=70*t;e.fillStyle=a,e.fillRect(45,n+5,A-45,1.2),e.font=`400 12px ${y}`,e.textBaseline="top";var i=`${String(t).padStart(2,"0")}:00`,r=e.measureText(i),o=r.width,c=r.actualBoundingBoxDescent;e.fillText(i,(45-o)/2,n+(10-c)/2,o)}function s(e,t,a,n){var i=new Date;i.setDate(1),i.setMonth(0),i.setFullYear(t.date.getFullYear()),i.setMonth(t.date.getMonth()),i.setDate(t.date.getDate()),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0);var r=(t.date.getTime()-i.getTime())/864e5*24*70,o=A-45,c=60*t.duration*1e3/864e5*24*70;(0,m.a)(e,45,r,o,c,3,n),(0,m.a)(e,45,r,3,c,{tl:3,tr:0,bl:3,br:0},a),e.font=`400 14px ${y}`,e.textBaseline="top",e.fillStyle=a;var d=t.dateString,l=e.measureText(d),u=l.width,s=l.actualBoundingBoxDescent;e.fillText(d,53,r+(c-s)/2,u)}var f=(0,c.e)(e,".m"),p=f.getContext("2d");if(function(e,t,a){var n=t===a;e.setAttribute("displayed",(0,d.a)(n))}(e,a,o),function(e){w=(0,l.d)("route-details-canvas"),A=w.width,k=w.height,C=Math.min(window.devicePixelRatio,1.875)||1,e.width=A*C,e.height=k*C;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(C,C)}(f),a===o){p.clearRect(0,0,A,k);for(var v=0;v<24;v++)u(p,v,r);for(var h of t)s(p,h,n,i)}else p.clearRect(0,0,A,k)}function S(e,t,a){var n=(new Date).getDay(),i=(0,g.a)("--b"),r=(0,g.a)("--n"),o=(0,g.a)("--o"),d=e.calendarDays,l=e.calendarDayQuantity,u=e.calendarEventGroups,s=(e.calendarEventQuantity,Array.from((0,c.d)(N,".l"))),f=Array.from((0,c.d)(G,".k")),p=s.length;if(l!==p){var v=p-l;if(v<0){for(var h=new DocumentFragment,b=new DocumentFragment,m=0;m>v;m--){var y=x();h.appendChild(y),f.push(y);var w=_();b.appendChild(w),s.push(w)}G.append(h),N.append(b)}else if(v>0)for(var A=p-1,k=p-v-1;A>k;A--)f[A].remove(),f.splice(A,1),s[A].remove(),s.splice(A,1)}for(var C=0;C<l;C++){var S=`d_${C}`,M=d[S],F=u[S],E=f[C],R=s[C];T(E,M,n,t,a,C),L(R,F,n,i,r,o,C)}D=e}var M=a(4537),F=[],E=!1,R=!1;function B(){var e=(0,c.a)();e.classList.add("p");var t=(0,c.a)();t.classList.add("q"),t.appendChild((0,M.a)()),e.appendChild(t);var a=(0,c.a)();return a.classList.add("r"),e.appendChild(a),e}function $(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.e)(e,".q");(0,M.c)(a,t.icon)}function o(e,t){(0,c.e)(e,".r").innerText=t.value}function l(e,t){e.setAttribute("animation",(0,d.a)(t))}function u(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}null==i?(r(e,n),o(e,n),l(e,a),u(e,t)):((0,d.b)(i,n)||r(e,n),(0,d.b)(i,n)||o(e,n),E!==a&&l(e,a),R!==t&&u(e,t))}var i=e.length;t!==R&&K.setAttribute("skeleton-screen",(0,d.a)(t));var r=Array.from((0,c.d)(O,".p")),o=r.length;if(i!==o){var l=o-i;if(l<0){for(var u=new DocumentFragment,s=0;s>l;s--){var f=B();u.appendChild(f),r.push(f)}O.append(u)}else if(l>0)for(var p=o-1,v=o-l-1;p>v;p--)r[p].remove(),r.splice(p,1)}for(var h=0;h<i;h++){var b=r[h],m=e[h];0===F.length?n(b,m,null):n(b,m,F[h])}F=e,E=a,R=t}var H=(0,c.c)(".s"),Q=(0,c.e)(H,".t"),j=(0,c.e)(Q,".u"),q=(0,c.e)(j,'.v[group="calendar"]'),z=(0,c.e)(q,".w"),G=(0,c.e)(z,".x"),N=(0,c.e)(z,".y"),P=(0,c.e)(H,'.t .u .v[group="actions"]'),Y=(0,c.e)(P,'.w .z[action="save-to-folder"]'),I=(0,c.e)(P,'.w .z[action="get-permalink"]'),J=(0,c.e)(P,'.w .z[action="show-permalink-qrcode"]'),K=(0,c.e)(j,'.v[group="properties"]'),O=(0,c.e)(K,".w");function U(){return U=(0,n.a)(function*(e,t){var a=(0,o.b)("playing_animation"),n=yield(0,i.e)("route",e);Y.setAttribute("animation",(0,d.a)(a)),Y.setAttribute("highlighted",(0,d.a)(n)),Y.onclick=function(){(0,u.c)("route",[e],Y)},I.setAttribute("animation",(0,d.a)(a)),I.onclick=function(){!function(e){h.apply(this,arguments)}(e)},J.setAttribute("animation",(0,d.a)(a)),J.onclick=function(){!function(e){b.apply(this,arguments)}(e)},function(){for(var e=(0,o.b)("playing_animation"),t=[],a=0;a<5;a++)t.push({key:a,icon:"none",value:""});$(t,!0,e)}(),function(){for(var e=(0,o.b)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},a={},n={},i=0;i<7;i++){var r=`d_${i}`;a[r]=[],n[r]={day:i,code:"d_{i}",name:""};for(var c=0;c<t[r];c++){var d=new Date;d.setHours(0),d.setMinutes(30*c),d.setSeconds(0),d.setMilliseconds(0),a[r].push({date:d,dateString:"",duration:15})}}S({calendarEventGroups:a,calendarDays:n,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var c=(0,d.c)(),l=yield(0,r.a)(e,t,c);$(l.properties,!1,a),S(l.calendar,!1,a)}),U.apply(this,arguments)}function V(){H.setAttribute("displayed","true")}function W(){H.setAttribute("displayed","false")}function X(e,t){(0,l.c)("RouteDetails"),V(),function(e,t){U.apply(this,arguments)}(e,t),(0,l.b)()}function Z(){W(),(0,l.i)(),(0,l.e)("RouteDetails");var e=(0,c.d)(N,".l");for(var t of e)t.remove();var a=(0,c.d)(G,".k");for(var n of a)n.remove()}},3041(e,t,a){a.d(t,{a:()=>k,b:()=>w,c:()=>A,d:()=>y});var n=a(9566),i=a(8179),r=a(8024),o=a(6052),c=a(4537),d=a(904),l=a(9119),u=(0,i.c)("._"),s=(0,i.e)(u,".aa"),f=(0,i.e)(s,".ba"),p=(0,i.e)(u,".ca"),v=(0,i.e)(p,".da"),h="已儲存至資料夾",b="無法儲存";function m(e,t,a,o){var d=(0,i.a)();d.classList.add("ea");var u=(0,i.a)();u.classList.add("fa");var s=document.createElement("span");s.appendChild((0,c.b)(e.icon)),u.appendChild(s);var f=(0,i.a)();switch(f.classList.add("ga"),f.innerText=e.name,d.appendChild(u),d.appendChild(f),t){case"stop":d.onclick=function(){(0,n.n)(e.id,a[0],a[1]).then(function(e){e?(0,n.e)("stop",a[0]).then(function(e){e&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(e)),(0,l.a)("folder",h),k())}):(0,l.a)("warning",b)})};break;case"route":d.onclick=function(){(0,n.m)(e.id,a[0]).then(function(e){e?(0,n.e)("route",a[0]).then(function(e){e&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(e)),(0,l.a)("folder",h),k())}):(0,l.a)("warning",b)})};break;case"location":d.onclick=function(){(0,n.l)(e.id,a[0]).then(function(e){e?(0,n.e)("location",a[0]).then(function(e){e&&(null!=o&&o.setAttribute("highlighted",(0,r.a)(e)),(0,l.a)("folder",h),k())}):(0,l.a)("warning",b)})}}return d}function g(e,t,a){v.onclick=function(){(0,o.c)(function(){g(e,t,a)})};var i=(0,n.j)();f.innerHTML="";var r=new DocumentFragment;for(var c of i){var d=m(c,e,t,a);r.appendChild(d)}f.append(r)}function y(){u.setAttribute("displayed","true")}function w(){u.setAttribute("displayed","false")}function A(e,t,a){(0,d.c)("SaveToFolder"),y(),g(e,t,a),(0,d.b)()}function k(){w(),(0,d.i)(),(0,d.e)("SaveToFolder")}},752(e,t,a){a.d(t,{a:()=>h,b:()=>p,c:()=>v,d:()=>f});var n=a(3422),i=a(8179),r=a(4537),o=a(904),c=a(9119),d=(0,i.c)(".ha"),l=(0,i.e)(d,".ia"),u=(0,i.e)(l,".ja");function s(e,t,a,o,d){var l=(0,i.a)();l.classList.add("ka");var u=(0,i.a)();u.classList.add("la");var s=document.createElement("span");s.appendChild((0,r.b)(e.icon)),u.appendChild(s);var f=(0,i.a)();f.classList.add("ma"),f.innerText=e.name;var p=e.index;return l.onclick=function(){!function(e,t,a,i,r){(0,c.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),h(),(0,n.m)(t,a,i,r).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,a,o,d,p)},l.appendChild(u),l.appendChild(f),l}function f(){d.setAttribute("displayed","true")}function p(){d.setAttribute("displayed","false")}function v(e,t,a,i){(0,o.c)("ScheduleNotification"),f(),function(e,t,a,i){u.innerHTML="";var r=new DocumentFragment;for(var o of n.n){var c=s(o,e,t,a,i);r.appendChild(c)}u.append(r)}(e,t,a,i),(0,o.b)()}function h(){p(),(0,o.i)(),(0,o.e)("ScheduleNotification")}},4680(){},7820(){},1580(){},3127(){},7868(){},1306(){},3058(){},6388(){},1102(){},1743(){},6597(){},3777(){},9991(){},2421(){},2696(){},5461(){},5392(){},3534(){},6018(){},7225(){},1308(){},7723(){},1603(){},3749(){},7217(){},7287(){}}]);
//# sourceMappingURL=d260df480cace15d42c3.js.map