!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():e.bus=r()}(self,()=>(()=>{"use strict";var e,r,t={7367(e,r,t){t(25276),t(23792),t(44114),t(26910),t(78459),t(47764),t(62953),t(13611);var o=t(55241).encode;function a(e,r,t){return o(e,r,t)}var n=t(82284);t(76918),t(64346),t(54743),t(11745),t(38309),t(16573),t(78100),t(77936),t(60739),t(23288),t(33110),t(8085),t(26099),t(38781),t(21489),t(48140),t(81630),t(72170),t(75044),t(69539),t(31694),t(89955),t(21903),t(91134),t(33206),t(44496),t(66651),t(12887),t(19369),t(66812),t(8995),t(31575),t(36072),t(88747),t(28845),t(29423),t(57301),t(373),t(86614),t(41405),t(37467),t(44732),t(33684),t(79577),t(41549),t(49797),t(49631),t(35623),t(76031),t(3296),t(27208),t(48408),t(14603),t(47566),t(98721),t(83503),t(34462).sha512;function s(e,r){return null!=e&&"object"===(0,n.a)(e)&&!Array.isArray(e)&&Object.prototype.hasOwnProperty.call(e,r)}t(16280),t(23418),t(62062),t(72712),t(18111),t(61701),t(18237),t(39469),t(34594);function f(e){var r=Math.hypot(e),t=e.length,o=new Float32Array(t);if(r>0){for(var a=1/r,n=t;n>0;n--)o[n]=e[n]*a;return Array.from(o)}return e}self.onmessage=function(e){var r=function(e){var r={};for(var t of e){var o=`r_${t.routeId}`;s(r,o)||(r[o]=[]),r[o].push(t)}for(var n in r)r[n].sort(function(e,r){return e.seqNo-r.seqNo});var u={};for(var i of e){for(var d=`r_${i.routeId}`,l=parseFloat(i.longitude),p=parseFloat(i.latitude),c=[0,0],b=r[d],v=b.length,h=null,y=0;y<v;y++)if(b[y].Id===i.Id){var g=0;y<v-1&&(g=y+1),h=b[g]}if(h)c=f([parseFloat(h.longitude)-l,parseFloat(h.latitude)-p]);var x=`l_${i.stopLocationId}`;if(s(u,x))u[x].r.indexOf(i.routeId)<0&&u[x].r.push(i.routeId),u[x].s.indexOf(i.Id)<0&&(u[x].s.push(i.Id),u[x].v.push(c)),u[x].a.push(i.address);else{var O={};O.n=i.nameZh,O.lo=l,O.la=p,O.g=a(p,l,6),O.r=[i.routeId],O.s=[i.Id],O.v=[c],O.a=[i.address],O.id=i.stopLocationId,u[x]=O}}return u}(e.data);self.postMessage(r)}}},o={};function a(e){var r=o[e];if(void 0!==r)return r.exports;var n=o[e]={exports:{}};return t[e].call(n.exports,n,n.exports,a),n.exports}a.m=t,a.x=()=>{var e=a.O(void 0,[333,9735,8738,5149,7425,2944,4631,7410,6532,1577],()=>a(7367));return e=a.O(e)},a.amdO={},e=[],a.O=(r,t,o,n)=>{if(!t){var s=1/0;for(d=0;d<e.length;d++){for(var[t,o,n]=e[d],f=!0,u=0;u<t.length;u++)(!1&n||s>=n)&&Object.keys(a.O).every(e=>a.O[e](t[u]))?t.splice(u--,1):(f=!1,n<s&&(s=n));if(f){e.splice(d--,1);var i=o();void 0!==i&&(r=i)}}return r}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[t,o,n]},a.d=(e,r)=>{for(var t in r)a.o(r,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((r,t)=>(a.f[t](e,r),r),[])),a.u=e=>({333:"dcb7d670eedfad5c7d21",1577:"eed88ab2b48a37b309be",2944:"30bcb0d7a8edc6266700",4631:"4e85a763949280762c8b",5149:"5ce470ce1b767aa6e156",6532:"c3c124829deb1142b296",7410:"aac8b37a46402ab04195",7425:"511444c4280df75074e2",8738:"4df2b0d53b7e034cce3e",9735:"849a20607ace6bfeb56a"}[e]+".js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),a.p="./",(()=>{var e={7367:1};a.f.i=(r,t)=>{e[r]||importScripts(a.p+a.u(r))};var r=self.webpackChunkbus=self.webpackChunkbus||[],t=r.push.bind(r);r.push=r=>{var[o,n,s]=r;for(var f in n)a.o(n,f)&&(a.m[f]=n[f]);for(s&&s(a);o.length;)e[o.pop()]=1;t(r)}})(),r=a.x,a.x=()=>Promise.all([333,9735,8738,5149,7425,2944,4631,7410,6532,1577].map(a.e,a)).then(r);var n=a.x();return n=n.default})());
//# sourceMappingURL=bde5e82fd9aac2b7e894.js.map