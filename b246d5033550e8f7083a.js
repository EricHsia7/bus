"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[821],{313(t,e,r){r.d(e,{s:()=>c});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=!1,l={};function c(t){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(t){function e(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var e,r=[],n=u([[0,9],[1,9]].map(function(t){return{url:(0,a.y)(t[0],t[1]),e:t}}));try{for(n.s();!(e=n.n()).done;){var i=e.value,f=yield(0,o.Fd)(i.url,t,`getProvider_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){n.e(t)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_provider_cache",c=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===c){var y=yield e();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(y)),s||(s=!0,l=y),y}if((new Date).getTime()-parseInt(c)>5184e6){var p=yield e();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(p)),p}if(!s){var m=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(m)}return(0,o.Mf)(t,"getProvider_0",0,!0),(0,o.Mf)(t,"getProvider_1",0,!0),(0,o.ZL)(t,-1),l}),y.apply(this,arguments)}},424(t,e,r){r.d(e,{T:()=>p});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=!1,l={};function c(t){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(t){var e=new Worker(new URL(r.p+r.u(132),r.b));return yield new Promise(function(r,n){e.onmessage=function(t){r(t.data),e.terminate()},e.onerror=function(t){n(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return m=(0,n.A)(function*(t){function e(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var e,r=[],n=u([[0,11],[1,11]].map(function(t){return{url:(0,a.y)(t[0],t[1]),e:t}}));try{for(n.s();!(e=n.n()).done;){var i=e.value,f=yield(0,o.Fd)(i.url,t,`getStop_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){n.e(t)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_stop_cache",y=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===y){var p=yield e(),m=yield c(p);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(m)),s||(s=!0,l=m),m}if((new Date).getTime()-parseInt(y)>3888e6){var d=yield e(),v=yield c(d);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(v)),v}if(!s){var h=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(h)}return(0,o.Mf)(t,"getStop_0",0,!0),(0,o.Mf)(t,"getStop_1",0,!0),(0,o.ZL)(t,-1),l}),m.apply(this,arguments)}},1932(t,e,r){r.d(e,{L:()=>d});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=!1,l={};function c(t){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(t){var e=new Worker(new URL(r.p+r.u(332),r.b));return yield new Promise(function(r,n){e.onmessage=function(t){r(t.data),e.terminate()},e.onerror=function(t){n(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return(m=(0,n.A)(function*(t){var e=new Worker(new URL(r.p+r.u(892),r.b));return yield new Promise(function(r,n){e.onmessage=function(t){r(t.data),e.terminate()},e.onerror=function(t){n(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function d(t){return v.apply(this,arguments)}function v(){return v=(0,n.A)(function*(t){function e(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var e,r="",n=u([[0,15],[1,15]].map(function(t){return{url:(0,a.y)(t[0],t[1]),e:t}}));try{for(n.s();!(e=n.n()).done;){var i=e.value;r+=(yield(0,o.Fd)(i.url,t,`getSegmentBuffers_${i.e[0]}`,"xml")),(0,o.ZL)(t,-1)}}catch(t){n.e(t)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_segment_buffers_cache",y=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===y){var m=yield e(),d=yield c(m),v=yield p(d);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(v)),s||(s=!0,l=v),v}if((new Date).getTime()-parseInt(y)>2592e6){var h=yield e(),g=yield c(h),b=yield p(g);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(b)),b}if(!s){var w=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(w)}return(0,o.Mf)(t,"getSegmentBuffers_0",0,!0),(0,o.Mf)(t,"getSegmentBuffers_1",0,!0),(0,o.ZL)(t,-1),l}),v.apply(this,arguments)}},2303(t,e,r){r.d(e,{$Q:()=>o,AS:()=>s,Ov:()=>l,aU:()=>u,eu:()=>y,s$:()=>p,w_:()=>f,zi:()=>c});var n=r(5579);function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,f=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){f=!0,o=t},f:function(){try{u||null==r.return||r.return()}finally{if(f)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if("string"==typeof t){var r=parseInt(t);if(-3===r)return{code:6,text:"末班駛離",time:r};if(-4===r)return{code:5,text:"今日停駛",time:r};if(-2===r)return{code:4,text:"交通管制",time:r};if(-1===r)return{code:3,text:"未發車",time:r};if(0<=r&&r<=10)return{code:2,text:"進站中",time:r};if(10<r&&r<=180)return{code:1,text:(0,n.fU)(r,e),time:r};if(180<r&&r<=250)return{code:.5,text:(0,n.fU)(r,e),time:r};if(250<r)return{code:0,text:(0,n.fU)(r,e),time:r}}return{code:7,text:"發生錯誤",time:-5}}function u(t,e){var r=t.length;if(0===e){var n=0,i=0;return 4===r&&(n=parseInt(t.substring(0,2)),i=parseInt(t.substring(2,4))),2===r&&(i=parseInt(t)),{type:"moment",hours:n,minutes:i}}if(1===e){var a=0,o=0;if(4===r){var u=parseInt(t.substring(0,2)),f=parseInt(t.substring(2,4));a=Math.min(u,f),o=Math.max(u,f)}if(2===r){var s=parseInt(t);a=s,o=s}return{type:"range",min:a,max:o}}}function f(t,e,r,n,a){var o,u={},f={},s=i(e);try{for(s.s();!(o=s.n()).done;){var l=o.value;f[l.BusID]=l}}catch(t){s.e(t)}finally{s.f()}var c,y=i(t);try{for(y.s();!(c=y.n()).done;){var p=c.value,m={};m.CarType=p.CarType,m.BusStatus=p.BusStatus,m.BusID=p.BusID,m.CarOnStop=p.CarOnStop;var d=parseInt(p.RouteID),v=String(p.BusID),h=!1,g=0;d===n||a.indexOf(d)>-1||d===10*n?(h=!0,g=v.charCodeAt(0)*Math.pow(10,-5)):(h=!1,g=v.charCodeAt(0)),m.onThisRoute=h,m.index=g;var b={};if(f.hasOwnProperty(v)){b=f[v],m.position={latitude:parseFloat(b.Latitude),longitude:parseFloat(b.Longitude)};var w={},S=!1;for(var A in r){var I=r[A];if(I.pid.indexOf(d)>-1){w=I,S=!0;break}}m.RouteName=S?w.n:"未知路線",m.RouteID=S?w.id:null;var T=`s_${p.StopID}`;u.hasOwnProperty(T)||(u[T]=[]),u[T].push(m)}}}catch(t){y.e(t)}finally{y.f()}return u}function s(t,e,r,n){var a,o={},u={},f=i(e);try{for(f.s();!(a=f.n()).done;){var s=a.value;u[s.BusID]=s}}catch(t){f.e(t)}finally{f.f()}var l,c=i(t);try{for(c.s();!(l=c.n()).done;){var y=l.value,p={},m=parseInt(y.StopID),d=parseInt(y.RouteID),v=String(y.BusID);if(!(n.indexOf(m)<0)){p.index=v.charCodeAt(0),p.onThisRoute=!0,p.CarType=y.CarType,p.BusStatus=y.BusStatus,p.BusID=y.BusID,p.CarOnStop=y.CarOnStop;var h={};if(u.hasOwnProperty(v)){h=u[v],p.position={latitude:parseFloat(h.Latitude),longitude:parseFloat(h.Longitude)};var g={},b=!1;for(var w in r){var S=r[w];if(S.pid.indexOf(d)>-1){g=S,b=!0;break}}p.RouteName=b?g.n:"未知路線",p.RouteID=b?g.id:null;var A=`s_${m}`;o.hasOwnProperty(A)||(o[A]=[]),o[A].push(p)}}}}catch(t){c.e(t)}finally{c.f()}return o}function l(t){var e="";switch(t){case"0":e="一般";break;case"1":e="低底盤";break;case"2":e="大復康巴士";break;case"3":e="狗狗友善專車";break;default:e="未知類型"}return e}function c(t){var e="";switch(t){case"0":e="離站";break;case"1":e="進站";break;default:e="未知狀態"}return e}function y(t){var e="";switch(t){case"0":e="正常";break;case"1":e="車禍";break;case"2":e="故障";break;case"3":e="塞車";break;case"4":e="緊急求援";break;case"5":e="加油";break;case"99":e="非營運狀態";break;default:e="未知狀態"}return e}function p(t){var e={},r=l(t.CarType);e.type=r;var n=c(t.CarOnStop),i=y(t.BusStatus);return e.carNumber=t.BusID,e.status={onStop:n,situation:i,text:`${n} | ${i}`},e.RouteName=t.RouteName,e.onThisRoute=t.onThisRoute,e.index=t.index,e.position=t.position,e}},4293(t,e,r){r.d(e,{a:()=>p});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=!1,l={};function c(t){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(function*(t){var e=new Worker(new URL(r.p+r.u(148),r.b));return yield new Promise(function(r,n){e.onmessage=function(t){r(t.data),e.terminate()},e.onerror=function(t){n(t.message),e.terminate()},e.postMessage(t)})})).apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return m=(0,n.A)(function*(t){function e(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var e,r=[],n=u([[0,10],[1,10]].map(function(t){return{url:(0,a.y)(t[0],t[1]),e:t}}));try{for(n.s();!(e=n.n()).done;){var i=e.value,f=yield(0,o.Fd)(i.url,t,`getRoute_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){n.e(t)}finally{n.f()}return r}),r.apply(this,arguments)}if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return yield e();var f="bus_route_cache",y=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===y){var p=yield e(),m=yield c(p);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(m)),s||(s=!0,l=m),m}if((new Date).getTime()-parseInt(y)>864e5){var d=yield e(),v=yield c(d);return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(v)),s||(s=!0,l=v),v}if(!s){var h=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(h)}return(0,o.Mf)(t,"getRoute_0",0,!0),(0,o.Mf)(t,"getRoute_1",0,!0),(0,o.ZL)(t,-1),l}),m.apply(this,arguments)}},6788(t,e,r){r.d(e,{Fd:()=>c,LQ:()=>h,Mf:()=>d,ZL:()=>w,Zt:()=>S,_M:()=>v,gC:()=>A});var n=r(2284),i=r(467),a=r(4750),o=r(5579),u=r(8925);function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return s(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var l={};function c(t,e,r,n){return y.apply(this,arguments)}function y(){return(y=(0,i.A)(function*(t,e,r,n){var i=new Error("FetchError");if(l.hasOwnProperty(t)){if(l[t].processing)return yield new Promise(function(n,i){l[t].requests.push([n,i,e,r])});if(null!==l[t].result&&(new Date).getTime()<=l[t].timestamp)return l[t].result}else l[t]={processing:!0,requests:[],failed:!1,timestamp:-1,result:null};var o=yield fetch(t);if(!o.ok)throw d(e,r,0,!0),new Error(`HTTP error! status: ${o.status}`);for(var s=parseInt(String(o.headers.get("content-length"))),y=o.body.getReader(),m=[],v=0;;){var h=yield y.read(),g=h.done,b=h.value;if(g)break;m.push(b);var w=(v+=b.length)/s;if(d(e,r,w,!1),l.hasOwnProperty(t)){var S,A=f(l[t].requests);try{for(A.s();!(S=A.n()).done;){var I=S.value;d(I[2],I[3],w,!1)}}catch(t){A.e(t)}finally{A.f()}}}for(var T=new Uint8Array(v),_=0,O=0,L=m;O<L.length;O++){var $=L[O];T.set($,_),_+=$.length}var C,D=new Blob([T],{type:"application/gzip"}),x=yield D.arrayBuffer(),M=yield(0,a.h)(x);switch(n){case"json":C=/^<!doctype html>/.test(M)?yield c(t.replace("https://tcgbusfs.blob.core.windows.net/","https://erichsia7.github.io/bus-alternative-static-apis/"),e,r,n):JSON.parse(M);break;case"xml":C=M}var N=new Date;if(yield(0,u.N$)(s,N),C){if(l.hasOwnProperty(t)){for(var k=v/s,P=l[t].requests.shift();P;)P[0](C),d(P[2],P[3],k,!1),P=l[t].requests.shift();l[t].result=C,l[t].timestamp=N.getTime()+3e4,l[t].processing=!1}return p(),C}if(l.hasOwnProperty(t)){for(var B=l[t].requests.shift();B;)B[1](i),d(B[2],B[3],0,!0),B=l[t].requests.shift();l[t].failed=!0}throw p(),i})).apply(this,arguments)}function p(){var t=(new Date).getTime();for(var e in l)l.hasOwnProperty(e)&&(l[e].processing||t-l[e].timestamp>5e3&&delete l[e],l[e].failed&&delete l[e])}var m={};function d(t,e,r,n){m.hasOwnProperty(t)||(m[t]={});var i=`t_${e}`;m[t].hasOwnProperty(i)?(n?m[t][i].expel=!0:(m[t][i].expel=!1,m[t][i].progress=r),g(t,"run")):(m[t][i]={expel:!1,progress:r,total:1},g(t,"start"))}function v(t){if(m.hasOwnProperty(t)&&"object"===(0,n.A)(m[t])){var e=0,r=0;for(var i in m[t])m[t][i].expel||(e+=m[t][i].total,r+=m[t][i].progress);var a=Math.min(Math.max(r/e,0),1);return a===1/0||isNaN(a)?1:a}return 1}function h(t){m.hasOwnProperty(t)&&(delete m[t],g(t,"end"))}function g(t,e){var r={target:t,stage:e,progress:v(t)},n=new CustomEvent(t,{detail:r});document.dispatchEvent(n)}var b={};function w(t,e){b.hasOwnProperty(t)||(b[t]=0);var r=0;"string"==typeof e&&(r=(0,o.Zn)(e)),r>b[t]&&(b[t]=r)}function S(t){return b.hasOwnProperty(t)?1*b[t]:0}function A(t){b.hasOwnProperty(t)&&delete b[t]}},8201(t,e,r){r.d(e,{Y:()=>c});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=!1,l={};function c(t){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(t){function e(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var e,r=[],n=u([[0,12],[1,12]].map(function(t){return{url:(0,a.y)(t[0],t[1]),e:t}}));try{for(n.s();!(e=n.n()).done;){var i=e.value,f=yield(0,o.Fd)(i.url,t,`getSemiTimeTable_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){n.e(t)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_semi_timetable_cache",c=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===c){var y=yield e();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(y)),s||(s=!0,l=y),y}if((new Date).getTime()-parseInt(c)>12096e5){var p=yield e();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(p)),p}if(!s){var m=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(m)}return(0,o.Mf)(t,"getSemiTimeTable_0",0,!0),(0,o.Mf)(t,"getSemiTimeTable_1",0,!0),(0,o.ZL)(t,-1),l}),y.apply(this,arguments)}},8671(t,e,r){r.d(e,{s:()=>c});var n=r(467),i=r(4311),a=r(3153),o=r(6788);function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=!1,l={};function c(t){return y.apply(this,arguments)}function y(){return y=(0,n.A)(function*(t){function e(){return r.apply(this,arguments)}function r(){return r=(0,n.A)(function*(){var e,r=[],n=u([[0,14],[1,14]].map(function(t){return{url:(0,a.y)(t[0],t[1]),e:t}}));try{for(n.s();!(e=n.n()).done;){var i=e.value,f=yield(0,o.Fd)(i.url,t,`getTimeTable_${i.e[0]}`,"json");r=r.concat(f.BusInfo),(0,o.ZL)(t,f.EssentialInfo.UpdateTime)}}catch(t){n.e(t)}finally{n.f()}return r}),r.apply(this,arguments)}var f="bus_timetable_cache",c=yield(0,i.Ct)(0,`${f}_timestamp`);if(null===c){var y=yield e();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(y)),s||(s=!0,l=y),y}if((new Date).getTime()-parseInt(c)>12096e5){var p=yield e();return yield(0,i.mL)(0,`${f}_timestamp`,(new Date).getTime()),yield(0,i.mL)(0,f,JSON.stringify(p)),p}if(!s){var m=yield(0,i.Ct)(0,f);s=!0,l=JSON.parse(m)}return(0,o.Mf)(t,"getTimeTable_0",0,!0),(0,o.Mf)(t,"getTimeTable_1",0,!0),(0,o.ZL)(t,-1),l}),y.apply(this,arguments)}}}]);
//# sourceMappingURL=b246d5033550e8f7083a.js.map