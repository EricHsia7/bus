"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[642],{904(e,t,a){a.d(t,{AE:()=>k,BM:()=>I,WR:()=>b,Z_:()=>A,f1:()=>L,gO:()=>C,kr:()=>y,l$:()=>w,p9:()=>x});var n=a(8024),i=a(8179),r=a(4927),s=a(6052),d=a(9333),o=a(8379),c=a(5693),l=a(7891),u=a(7908),f=a(5009),v=a(6104),p=(0,i.bv)(".rd"),h=(0,i.bv)(".sd"),m=(new Date).getTime(),g=["Home"];function b(e){var t=g.length;g[t-1]!==e&&g.push(e)}function y(e){if(g.indexOf(e)>-1){var t=g.length;g[t-1]===e&&g.pop()}}function A(){var e=g.length;if(e>1)switch(g[e-2]){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.z1)();break;case"FolderEditor":(0,d.I6)();break;case"FolderManager":(0,o.m)();break;case"Search":(0,f.Bb)();break;case"Settings":(0,v.os)();break;case"PersonalScheduleManager":(0,l.Z)();break;case"PersonalScheduleEditor":(0,c.Xy)();break;case"Bus":(0,r.F)();break;case"RegisterNotification":(0,u.hy)()}}function w(){var e=g.length;if(e>1){var t=g[e-2];switch(g.pop(),t){case"Home":case"FolderIconSelector":case"Location":case"LocationDetails":case"Route":case"RouteDetails":case"SaveToFolder":case"SettingsOptions":case"DataUsage":case"PersonalScheduleCreator":case"ScheduleNotification":case"NotificationScheduleManager":case"QRCode":default:break;case"FolderCreator":(0,s.pd)();break;case"FolderEditor":(0,d.uy)();break;case"FolderManager":(0,o.g)();break;case"Search":(0,f.rf)();break;case"Settings":(0,v.Ow)();break;case"PersonalScheduleManager":(0,l.z)();break;case"PersonalScheduleEditor":(0,c.bF)();break;case"Bus":(0,r.$)();break;case"RegisterNotification":(0,u.XG)()}}}function I(){var e=0;(0,n.t9)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,i.bv)(".rd svg.td").style.setProperty("--ud",`${e}px`)}function k(e){function t(){p.classList.add("vd"),p.addEventListener("animationend",function(){p.setAttribute("displayed","false"),p.classList.remove("vd"),"function"==typeof e&&e()},{once:!0})}var a=(new Date).getTime();a-m<100?setTimeout(t,Math.max(1,a-m)):t()}function L(){h.setAttribute("displayed","true")}function C(e){var t=0,a=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":t=n,a=i;break;case"head":t=n,a=55;break;case"head-one-button":t=n-55,a=55;break;case"head-two-button":t=n-110,a=55;break;case"route-details-canvas":t=n-20-20,a=1680;break;case"route-bus-arrival-time-chart":t=n-45-15-20,a=75;break;case"location-bus-arrival-time-chart":t=n-30-20,a=75;break;default:t=0,a=0}return{width:t,height:a}}function x(){window.scrollTo({top:0,behavior:"instant"})}},1351(e,t,a){a.d(t,{ID:()=>C,co:()=>x,k9:()=>E,qp:()=>_});var n=a(8011),i=a(6788),r=a(6983),s=a(3459),d=a(8024),o=a(9469),c=a(8179),l=a(4537),u=a(904),f=a(9119),v=a(8279);function p(e,t,a,n,i,r,s){try{var d=e[r](s),o=d.value}catch(e){return void a(e)}d.done?t(o):Promise.resolve(o).then(n,i)}function h(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){p(r,n,i,s,d,"next",e)}function d(e){p(r,n,i,s,d,"throw",e)}s(void 0)})}}var m={},g=!0,b=!1,y=(0,c.bv)(".wd"),A=(0,c.aI)(y,".xd"),w=(0,c.aI)(A,".yd");function I(){var e=document.createElement("div");e.classList.add("zd");var t=document.createElement("div");t.classList.add("_d"),e.appendChild(t);var a=document.createElement("div");return a.classList.add("ae"),e.appendChild(a),{element:e,id:""}}function k(e,t,a){function n(e,n,i){function r(e,t){var a=(0,c.aI)(e,"._d");null!==a.firstChild&&a.removeChild(a.firstChild),a.appendChild((0,l.Y)(t.icon))}function s(e,t){(0,c.aI)(e,".ae").innerText=t.name}function o(e,t){e.onclick=t.action}function u(e,t){e.setAttribute("animation",(0,d.xZ)(t))}function f(e,t){e.setAttribute("skeleton-screen",(0,d.xZ)(t))}null===i?(r(e,n),s(e,n),o(e,n),u(e,a),f(e,t)):(i.key!==n.key&&(r(e,n),s(e,n),o(e,n)),a!==g&&u(e,a),t!==b&&f(e,t))}var i=e.actions,r=e.actionsQuantity,s=(0,c.jg)(w,".zd").length;if(r!==s){var o=s-r;if(o<0){for(var u=new DocumentFragment,f=0;f<Math.abs(o);f++){var v=I();u.appendChild(v.element)}w.append(u)}else for(var p=(0,c.jg)(w,".zd"),h=0;h<Math.abs(o);h++){p[s-1-h].remove()}}for(var y=(0,c.jg)(w,".zd"),A=0;A<r;A++){var k=y[A],L=i[A];if(m.hasOwnProperty("actions"))if(m.actions[A])n(k,L,m.actions[A]);else n(k,L,null);else n(k,L,null)}m=e,g=a,b=t}function L(){return(L=h(function*(e){var t=(0,s.Js)("playing_animation"),a=(0,d.zx)();k(yield(0,r.v)(e,a),!1,t)})).apply(this,arguments)}function C(e){(0,u.WR)("LocationDetails"),y.setAttribute("displayed","true"),function(){for(var e=(0,s.Js)("playing_animation"),t=[],a=0;a<3;a++)t.push({name:"",icon:"",key:`action-${a}`,action:function(){}});k({actions:t,actionsQuantity:3,hash:""},!0,e)}(),function(e){L.apply(this,arguments)}(e)}function x(){(0,u.kr)("LocationDetails"),y.setAttribute("displayed","false")}function E(e){return S.apply(this,arguments)}function S(){return(S=h(function*(e){var t=(0,d.zx)(),a=yield(0,n.g)(t,1);(0,i.LQ)(t),(0,i.gC)(t);var r=`ml_${e}`;if(a.hasOwnProperty(r)){var s=a[r],c=(0,o.i)(1,{hash:e});navigator.share&&navigator.share({title:s.n,url:c}).then(function(){(0,f.a)("已分享地點","check_circle")}).catch(function(e){(0,f.a)("已取消分享","cancel")})}})).apply(this,arguments)}function _(e){return T.apply(this,arguments)}function T(){return(T=h(function*(e){var t=(0,d.zx)(),a=yield(0,n.g)(t,1);(0,i.LQ)(t),(0,i.gC)(t);var r=`ml_${e}`;if(a.hasOwnProperty(r)){var s=(0,o.i)(1,{hash:e});(0,v.X8)(s)}})).apply(this,arguments)}},3030(e,t,a){a.d(t,{eS:()=>ue,s_:()=>V,so:()=>le});var n=a(5767),i=a(9566),r=a(2757),s=a(77),d=a(5314),o=a(3459),c=a(7968),l=a(8024),u=a(8179),f=a(5579),v=a(4537),p=a(904),h=a(9119),m=a(3041),g=a(752),b=a(1351);function y(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return A(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,d=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){d=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(d)throw r}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function w(e,t,a,n,i,r,s){try{var d=e[r](s),o=d.value}catch(e){return void a(e)}d.done?t(o):Promise.resolve(o).then(n,i)}var I=(0,u.bv)(".be"),k=(0,u.aI)(I,".ce"),L=(0,u.aI)(k,".de"),C=(0,u.aI)(L,"span"),x=(0,u.aI)(k,".ee"),E=(0,u.aI)(I,".fe"),S=(0,u.aI)(k,".ge"),_=(0,u.aI)(S,".he"),T=(0,u.aI)(k,".ie"),$=(0,u.aI)(T,".je"),j=(0,u.aI)(k,".ke .le"),M={},P=!1,Z=!1,R=0,D=0,F=0,O={},z=0,N=!1,H=15e3,Q=5e3,B=15e3,Y=!0,W=0,q=0,J="",U=!1,X=!1,G=!1,K="";function V(){E.addEventListener("touchstart",function(){R=Math.round(E.scrollLeft/z)},{passive:!0}),E.addEventListener("scroll",function(e){N=!0;var t=e.target.scrollLeft/z;D=t>R?R+1:R-1;var a=O[`g_${R}`]||{width:0,offset:0},n=O[`g_${D}`]||{width:0,offset:0},i=a.width+(n.width-a.width)*Math.abs(t-R),r=-1*(a.offset+(n.offset-a.offset)*Math.abs(t-R))+.5*z-.5*i;ee(F,r,i-20,t),t===D&&(R=Math.round(E.scrollLeft/z),N=!1)},{passive:!0})}function ee(e,t,a,n){E.style.setProperty("--me",e.toString()),$.style.setProperty("--ne",a.toString()),_.style.setProperty("--oe",`${t.toFixed(5)}px`),_.style.setProperty("--pe",n.toFixed(5))}function te(e){var t=e;if(U){var a=t.detail.progress-1;j.style.setProperty("--se",a.toString())}"end"===t.detail.stage&&document.removeEventListener(t.detail.target,te)}function ae(){var e=(0,l.zx)(),t=document.createElement("div");t.classList.add("te"),t.id=e,t.setAttribute("stretched","false"),t.setAttribute("stretching","false"),t.setAttribute("push-direction","0"),t.setAttribute("push-state","0");var a=document.createElement("div");a.classList.add("ue");var n=document.createElement("div");n.classList.add("ve");var i=document.createElement("div");i.classList.add("we"),i.setAttribute("code","-1"),i.setAttribute("displayed","false");var r=document.createElement("div");r.classList.add("xe"),r.setAttribute("code","-1"),r.setAttribute("displayed","true"),n.appendChild(i),n.appendChild(r);var s=document.createElement("div");s.classList.add("ye");var d=document.createElement("div");d.classList.add("ze");var o=document.createElement("div");o.classList.add("_e");var c=document.createElement("div");c.classList.add("af");var f=document.createElement("div");f.classList.add("_a"),f.setAttribute("code","0"),f.setAttribute("displayed","false");var p=document.createElement("div");p.classList.add("ab"),p.setAttribute("code","0"),p.setAttribute("displayed","true"),c.appendChild(f),c.appendChild(p);var h=document.createElement("div");h.classList.add("bf"),h.appendChild((0,v.Y)("keyboard_arrow_down")),h.onclick=function(){!function(e){var t=(0,u.aI)(E,`.jf .mf .te#${e}`),a=(0,u.aI)(t,".df"),n=t.parentElement,i=(0,u.ji)(t,"te"),r=i.length,s=n.getBoundingClientRect(),d=t.getBoundingClientRect(),o=d.top-s.top,c="true"===t.getAttribute("stretched"),l="true"===t.getAttribute("animation");if(l){var f=c?"2":"1";t.setAttribute("stretching","true"),t.style.setProperty("--kg",`${o}px`);for(var v=0;v<r;v++){var p=i[v];p.setAttribute("push-direction",f),p.setAttribute("push-state","1")}t.addEventListener("transitionend",function(){for(var e=0;e<r;e++){var a=i[e];a.setAttribute("push-direction","0"),a.setAttribute("push-state","0")}t.setAttribute("stretching","false")},{once:!0}),t.addEventListener("transitionstart",function(){for(var e=0;e<r;e++){i[e].setAttribute("push-state","2")}},{once:!0})}c?(l?a.addEventListener("transitionend",function(){a.setAttribute("displayed","false")},{once:!0}):a.setAttribute("displayed","false"),t.setAttribute("stretched","false")):(a.setAttribute("displayed","true"),t.setAttribute("stretched","true"))}(e)};var m=document.createElement("div");m.classList.add("cf"),o.appendChild(c),o.appendChild(h),o.appendChild(m),a.appendChild(n),a.appendChild(s),a.appendChild(d),a.appendChild(o);var g=document.createElement("div");g.classList.add("df"),g.setAttribute("displayed","false");var b=document.createElement("div");b.classList.add("ef");var y=document.createElement("div");y.classList.add("ff"),y.setAttribute("highlighted","true"),y.setAttribute("type","tab"),y.setAttribute("code","0");var A=document.createElement("div");A.classList.add("gf"),A.appendChild((0,v.Y)("directions_bus")),y.appendChild(A),y.appendChild(document.createTextNode("公車")),y.onclick=function(){fe(e,0)};var w=document.createElement("div");w.classList.add("ff"),w.setAttribute("highlighted","false"),w.setAttribute("type","tab"),w.setAttribute("code","1");var I=document.createElement("div");I.classList.add("gf"),I.appendChild((0,v.Y)("departure_board")),w.appendChild(I),w.appendChild(document.createTextNode("抵達時間")),w.onclick=function(){fe(e,1)};var k=document.createElement("div");k.classList.add("ff"),k.setAttribute("highlighted","false"),k.setAttribute("type","save-to-folder");var L=document.createElement("div");L.classList.add("gf"),L.appendChild((0,v.Y)("folder")),k.appendChild(L),k.appendChild(document.createTextNode("儲存"));var C=document.createElement("div");C.classList.add("ff"),C.setAttribute("highlighted","false"),C.setAttribute("type","schedule-notification"),C.setAttribute("enabled","true");var x=document.createElement("div");x.classList.add("gf"),x.appendChild((0,v.Y)("notifications")),C.appendChild(x),C.appendChild(document.createTextNode("到站通知")),b.appendChild(y),b.appendChild(w),b.appendChild(k),b.appendChild(C);var S=document.createElement("div");S.classList.add("hf"),S.setAttribute("displayed","true");var _=document.createElement("div");return _.classList.add("if"),_.setAttribute("displayed","false"),g.appendChild(b),g.appendChild(S),g.appendChild(_),t.appendChild(a),t.appendChild(g),{element:t,id:e}}function ne(){var e=document.createElement("div");e.classList.add("jf");var t=document.createElement("div");t.classList.add("kf");var a=document.createElement("div");a.classList.add("lf"),t.appendChild(a);var n=document.createElement("div");return n.classList.add("mf"),e.appendChild(t),e.appendChild(n),{element:e,id:""}}function ie(){var e=document.createElement("div");e.classList.add("nf");var t=document.createElement("span");return e.appendChild(t),{element:e,id:""}}function re(){var e=document.createElement("div");e.classList.add("of");var t=document.createElement("div");t.classList.add("pf");var a=document.createElement("div");return a.classList.add("qf"),e.appendChild(t),e.appendChild(a),{element:e,id:""}}function se(e,t,a){var n;function r(e,n,r){function d(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,d=n.right,o=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".ue"),f=(0,u.aI)(l,".af"),v=(0,u.aI)(f,"._a"),p=(0,u.aI)(f,".ab");v.setAttribute("code",t.status.code.toString()),v.innerText=t.status.text,a&&s>0&&i<c&&d>0&&r<o?(p.addEventListener("animationend",function(){p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text,p.classList.remove("kb"),v.setAttribute("displayed","false")},{once:!0}),v.setAttribute("displayed","true"),p.classList.add("kb")):(p.setAttribute("code",t.status.code.toString()),p.innerText=t.status.text)}function o(e,t,a){var n=e.getBoundingClientRect(),i=n.top,r=n.left,s=n.bottom,d=n.right,o=window.innerWidth,c=window.innerHeight,l=(0,u.aI)(e,".ue"),f=(0,u.aI)(l,".ve"),v=(0,u.aI)(f,".we"),p=(0,u.aI)(f,".xe");v.setAttribute("code",t.ranking.code.toString()),v.innerText=t.ranking.text,a&&s>0&&i<c&&d>0&&r<o?(p.addEventListener("animationend",function(){p.setAttribute("code",t.ranking.code.toString()),p.innerText=t.ranking.text,p.classList.remove("rf"),v.setAttribute("displayed","false")},{once:!0}),v.setAttribute("displayed","true"),p.classList.add("rf")):(p.setAttribute("code",t.ranking.code.toString()),p.innerText=t.ranking.text)}function c(e,t){var a=(0,u.aI)(e,".ue");(0,u.aI)(a,".ye").innerText=t.route_direction}function p(e,t){var a=(0,u.aI)(e,".ue");(0,u.aI)(a,".ze").innerText=t.route_name}function h(e,t){var a=(0,u.aI)(e,".df");(0,u.aI)(a,".hf").innerHTML=0===t.buses.length?'<div class="sf">目前沒有公車可顯示</div>':t.buses.map(function(e){return`<div class="tf" on-this-route="${e.onThisRoute}"><div class="uf"><div class="vf">${(0,v.Z)("directions_bus")}</div><div class="wf">${e.carNumber}</div></div><div class="xf"><div class="yf">路線：${e.RouteName}</div><div class="zf">狀態：${e.status.text}</div><div class="_f">類型：${e.type}</div></div></div>`}).join("")}function b(e,t){var a=(0,u.aI)(e,".df");(0,u.aI)(a,".if").innerHTML=0===t.busArrivalTimes.length?'<div class="ag">目前沒有抵達時間可顯示</div>':t.busArrivalTimes.map(function(e){return`<div class="bg"><div class="cg"><div class="dg">${(0,v.Z)("calendar_view_day")}</div><div class="eg">${e.personalSchedule.name}</div><div class="fg">週${(0,f.kd)(e.day).name} ${(0,f.pn)(e.personalSchedule.period.start)} - ${(0,f.pn)(e.personalSchedule.period.end)}</div></div><div class="gg">${e.chart}</div></div>`}).join("")}function y(e,t){t&&e.setAttribute("stretched","false")}function A(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function w(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}function I(e,t){var a=(0,u.aI)(e,".df"),n=(0,u.aI)(a,".ef"),r=(0,u.aI)(n,'.ff[type="save-to-folder"]');r.onclick=function(){(0,m.B)("stop-on-location",[e.id,t.stopId,t.routeId])},(0,i.LH)("stop",t.stopId).then(function(e){r.setAttribute("highlighted",(0,l.xZ)(e))})}function k(e,t){var a=(0,u.aI)(e,".df"),n=(0,u.aI)(a,".ef"),i=(0,u.aI)(n,'.ff[type="schedule-notification"]');i.onclick=function(){(0,g.Ho)("stop-on-location",[e.id,t.stopId,t.routeId,t.status.time])};var r=(0,s.Zc)(t.stopId);i.setAttribute("highlighted",(0,l.xZ)(r))}null===r?(d(e,n,a),o(e,n,a),c(e,n),p(e,n),h(e,n),b(e,n),y(e,t),A(e,a),w(e,t),I(e,n),k(e,n)):(n.status.time!==r.status.time&&(d(e,n,a),k(e,n)),r.ranking.number===n.ranking.number&&r.ranking.code===n.ranking.code||o(e,n,a),r.stopId!==n.stopId&&(c(e,n),p(e,n),I(e,n)),(0,l.hw)(r.buses,n.buses)||h(e,n),(0,l.hw)(r.busArrivalTimes,n.busArrivalTimes)||b(e,n),a!==P&&A(e,a),t!==Z&&(y(e,t),w(e,t)))}function d(e,n,i){function r(e,t){var a=(0,u.aI)(e,".pf");null!==a.firstChild&&a.removeChild(a.firstChild),a.appendChild((0,v.Y)(t.icon))}function s(e,t){(0,u.aI)(e,".qf").innerHTML=t.value}function d(e,t){e.setAttribute("animation",(0,l.xZ)(t))}function o(e,t){e.setAttribute("skeleton-screen",(0,l.xZ)(t))}null===i?(r(e,n),s(e,n),d(e,a),o(e,t)):((0,l.hw)(i.icon,n.icon)||r(e,n),(0,l.hw)(i.value,n.value)||s(e,n),a!==P&&d(e,a),t!==Z&&o(e,t))}var o=(0,p.gO)("window"),h=o.width,y=o.height,A=e.groupQuantity,w=e.itemQuantity,I=e.groupedItems,k=e.groups;F=A,z=h;for(var $=0,j=0;j<A;j++){var D=`g_${j}`,H=(0,c.q_)(k[D].name,500,"17px",'"Noto Sans TC", sans-serif')+20;O[D]={width:H,offset:$},$+=H}if(!N){var Q=O[`g_${R}`],B=-1*Q.offset+.5*z-.5*Q.width,Y=Q.width-20;ee(F,B,Y,R)}(null===(n=M)||void 0===n?void 0:n.hash)!==e.hash&&(C.innerText=e.LocationName,x.onclick=function(){(0,b.ID)(e.hash)}),P!==a&&(L.setAttribute("animation",(0,l.xZ)(a)),S.setAttribute("animation",(0,l.xZ)(a))),Z!==t&&(L.setAttribute("skeleton-screen",(0,l.xZ)(t)),S.setAttribute("skeleton-screen",(0,l.xZ)(t)),T.setAttribute("skeleton-screen",(0,l.xZ)(t)));var W=(0,u.jg)(E,".jf").length;if(A!==W){var q=W-A;if(q<0){for(var J=new DocumentFragment,U=new DocumentFragment,X=0;X<Math.abs(q);X++){var G=ne();J.appendChild(G.element);var K=ie();U.appendChild(K.element)}E.append(J),_.append(U)}else for(var V=(0,u.jg)(E,".jf"),te=(0,u.jg)(_,".nf"),se=0;se<Math.abs(q);se++){var de=W-1-se;V[de].remove(),te[de].remove()}}for(var oe=(0,u.jg)(E,".jf"),ce=0;ce<A;ce++){var le=`g_${ce}`,ue=oe[ce],fe=(0,u.jg)(ue,".mf .te").length;if(w[le]!==fe){var ve=fe-w[le];if(ve<0)for(var pe=(0,u.aI)(ue,".mf"),he=0;he<Math.abs(ve);he++){var me=ae();pe.appendChild(me.element)}else for(var ge=(0,u.jg)(ue,".mf .te"),be=0;be<Math.abs(ve);be++){ge[fe-1-be].remove()}}var ye=(0,u.jg)((0,u.jg)(E,".jf")[ce],".kf .lf .of").length,Ae=k[le].properties.length;if(Ae!==ye){var we=ye-Ae;if(we<0)for(var Ie=(0,u.aI)(ue,".kf"),ke=(0,u.aI)(Ie,".lf"),Le=0;Le<Math.abs(we);Le++){var Ce=re();ke.appendChild(Ce.element)}else for(var xe=(0,u.aI)(ue,".kf"),Ee=(0,u.aI)(xe,".lf"),Se=(0,u.jg)(Ee,".of"),_e=0;_e<Math.abs(we);_e++){Se[ye-1-_e].remove()}}}for(var Te=(0,u.jg)(_,".nf"),$e=(0,u.jg)(E,".jf"),je=0;je<A;je++){var Me=`g_${je}`,Pe=Te[je];(0,u.aI)(Pe,"span").innerText=k[Me].name,Pe.style.setProperty("--hg",`${O[Me].width}px`),Pe.style.setProperty("--ig",je.toString());for(var Ze=$e[je],Re=(0,u.jg)(Ze,".kf .lf .of"),De=(0,u.jg)(Ze,".mf .te"),Fe=k[Me].properties.length,Oe=0;Oe<Fe;Oe++){var ze=k[Me].properties[Oe],Ne=Re[Oe];if(M.hasOwnProperty("groups"))if(M.groups.hasOwnProperty(Me))if(M.groups[Me].properties[Oe])d(Ne,ze,M.groups[Me].properties[Oe]);else d(Ne,ze,null);else d(Ne,ze,null);else d(Ne,ze,null)}for(var He=0;He<w[Me];He++){var Qe=De[He],Be=I[Me][He];if(M.hasOwnProperty("groupedItems"))if(M.groupedItems.hasOwnProperty(Me))if(M.groupedItems[Me][He])r(Qe,Be,M.groupedItems[Me][He]);else r(Qe,Be,null);else r(Qe,Be,null);else r(Qe,Be,null)}}M=e,P=a,Z=t}function de(){return oe.apply(this,arguments)}function oe(){var e;return e=function*(){var e=(0,o.Js)("playing_animation"),t=(0,o.Js)("refresh_interval"),a=(0,p.gO)("location-bus-arrival-time-chart");Y=t.dynamic,H=t.baseInterval,U=!0,J=(0,l.zx)(),j.setAttribute("refreshing","true"),j.classList.remove("re"),document.addEventListener(J,te);var i=yield(0,r.R)(K,a.width,a.height,J);se(i,!1,e);var s=0;Y&&(s=yield(0,n.wz)()),W=(new Date).getTime(),q=Y?Math.max(W+Q,i.dataUpdateTime+H/s):W+H,B=Math.max(Q,q-W),U=!1,j.setAttribute("refreshing","false"),j.style.setProperty("--qe",`${B}ms`),j.classList.add("re")},oe=function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){w(r,n,i,s,d,"next",e)}function d(e){w(r,n,i,s,d,"throw",e)}s(void 0)})},oe.apply(this,arguments)}function ce(){de().then(function(){X?setTimeout(function(){ce()},Math.max(Q,q-(new Date).getTime())):G=!1}).catch(function(e){X?((0,h.a)("地點網路連線中斷，將在10秒後重試。","error"),setTimeout(function(){ce()},1e4)):G=!1})}function le(e){(0,p.WR)("Location"),(0,d.XK)("location",e),K=e,R=0,I.setAttribute("displayed","true"),E.scrollLeft=0,E.focus(),function(){for(var e=(0,o.Js)("playing_animation"),t=(0,p.gO)("window"),a=(t.width,t.height),n={g_0:Math.floor(a/50)+5,g_1:Math.floor(a/50)+5},i={},r=0;r<2;r++){var s=`g_${r}`;i[s]=[];for(var d=0;d<n[s];d++)i[s].push({route_name:"",route_direction:"",routeId:0,stopId:0,status:{code:8,text:"",time:-6},ranking:{number:0,text:"--",code:-1},buses:[],busArrivalTimes:[]})}se({groupedItems:i,groupQuantity:2,groups:{g_0:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]},g_1:{name:"載入中",properties:[{key:"0",icon:"",value:""},{key:"1",icon:"",value:""},{key:"2",icon:"",value:""}]}},itemQuantity:n,LocationName:"載入中",hash:"loading",dataUpdateTime:0},!0,e)}(),X||(X=!0,G?de():(G=!0,ce())),(0,p.Z_)()}function ue(){I.setAttribute("displayed","false"),X=!1,(0,p.l$)()}function fe(e,t){var a,n=(0,u.aI)(E,`.jf .mf .te#${e}`),i=(0,u.aI)(n,".df"),r=(0,u.aI)(i,".ef"),s=y((0,u.jg)(r,'.ff[highlighted="true"][type="tab"]'));try{for(s.s();!(a=s.n()).done;){a.value.setAttribute("highlighted","false")}}catch(e){s.e(e)}finally{s.f()}switch((0,u.aI)(r,`.ff[code="${t}"]`).setAttribute("highlighted","true"),t){case 0:(0,u.aI)(n,".hf").setAttribute("displayed","true"),(0,u.aI)(n,".if").setAttribute("displayed","false");break;case 1:(0,u.aI)(n,".hf").setAttribute("displayed","false"),(0,u.aI)(n,".if").setAttribute("displayed","true")}}}}]);
//# sourceMappingURL=decb1e28640c04f29873.js.map