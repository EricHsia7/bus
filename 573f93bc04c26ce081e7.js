"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[1775,5155],{752(t,e,n){n.d(e,{Ho:()=>v,b$:()=>p});var r=n(77),a=n(8179),i=n(4537),o=n(904),c=n(9119);function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var d=(0,a.bv)(".zs"),s=(0,a.aI)(d,".ct"),f=(0,a.aI)(s,".dt");function h(t,e,n){var o=document.createElement("div");o.classList.add("et");var u=document.createElement("div");u.classList.add("ft");var l=document.createElement("span");l.appendChild((0,i.YC)(t.icon)),u.appendChild(l);var d=document.createElement("div");switch(d.classList.add("gt"),d.appendChild(document.createTextNode(t.name)),e){case"stop-on-route":o.onclick=function(){!function(t,e,n,i,o){var u=(0,a.bv)(`.vl .wl .xl .yl ._l .do#${t}`),l=(0,a.aI)(u,'.ko .lo .mo[type="schedule-notification"]');(0,c.a)("manufacturing","處理中"),l.setAttribute("enabled","false"),p(),(0,r.mD)(e,n,i,o).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),l.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),l.setAttribute("enabled","true"),l.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),l.setAttribute("enabled","true")}})}(n[0],n[1],n[2],n[3],t.index)};break;case"stop-on-location":o.onclick=function(){!function(t,e,n,i,o){var u=(0,a.bv)(`.ih .di .ei .ni .oi#${t}`),l=(0,a.aI)(u,'.ij .jj .kj[type="schedule-notification"]');(0,c.a)("manufacturing","處理中"),l.setAttribute("enabled","false"),p(),(0,r.mD)(e,n,i,o).then(function(t){switch(t){case 0:(0,c.a)("error","設定失敗"),l.setAttribute("enabled","true");break;case 1:(0,c.a)("check_circle","設定成功"),l.setAttribute("enabled","true"),l.setAttribute("highlighted","true");break;case 2:(0,c.a)("warning","在設定中註冊後才可設定到站通知"),l.setAttribute("enabled","true")}})}(n[0],n[1],n[2],n[3],t.index)}}return o.appendChild(u),o.appendChild(d),{element:o,id:""}}function v(t,e){(0,o.WR)("ScheduleNotification"),d.setAttribute("displayed","true"),function(t,e){f.innerHTML="";var n,a=new DocumentFragment,i=u(r.FX);try{for(i.s();!(n=i.n()).done;){var o=h(n.value,t,e);a.appendChild(o.element)}}catch(t){i.e(t)}finally{i.f()}f.append(a)}(t,e)}function p(){(0,o.kr)("ScheduleNotification"),d.setAttribute("displayed","false")}},2994(t,e,n){n.d(e,{G:()=>y,Q:()=>g});var r=n(4225),a=n(3459),i=n(8179),o=n(8024),c=n(904);function u(t,e,n,r,a,i,o){try{var c=t[i](o),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}var l=[],d=!1,s=!1,f=(0,i.bv)(".ht"),h=(0,i.aI)(f,".lt"),v=(0,i.aI)(h,".mt");function p(){var t=document.createElement("div");t.classList.add("nt");var e=document.createElement("div");e.classList.add("ot");var n=document.createElement("div");return n.classList.add("pt"),t.appendChild(e),t.appendChild(n),{element:t,id:""}}function m(t,e,n){function r(t,r,a){function c(t,e){(0,i.aI)(t,".pt").innerText=e.size}function u(t,e){(0,i.aI)(t,".ot").innerText=e.category.name}function l(t,e){t.setAttribute("animation",(0,o.xZ)(e))}function f(t,e){t.setAttribute("skeleton-screen",(0,o.xZ)(e))}a?(r.category.key!==a.category.key&&(u(t,r),c(t,r)),r.size!==a.size&&c(t,r),d!==n&&l(t,n),s!==e&&f(t,e)):(c(t,r),u(t,r),l(t,n),f(t,e))}var a=[];for(var c in t.categorizedSizes){var u=t.categorizedSizes[c];a.push(u)}var f=a.length,h=(0,i.jg)(v,".nt").length;if(f!==h){var m=h-f;if(m<0){for(var b=new DocumentFragment,y=0,g=Math.abs(m);y<g;y++){var w=p();b.appendChild(w.element)}v.appendChild(b)}else for(var A=(0,i.jg)(v,".nt"),k=0,C=Math.abs(m);k<C;k++){A[h-1-k].remove()}}for(var x=(0,i.jg)(v,".nt"),I=0;I<f;I++){var S=l[I],L=a[I],E=x[I];r(E,L,S||null)}l=a,s=e,d=n}function b(){var t;return t=function*(){var t=(0,a.Js)("playing_animation");!function(){for(var t=(0,a.Js)("playing_animation"),e=(0,c.gO)("window").height,n=Math.min(7,Math.floor(e/55)+2),r={categorizedSizes:{},totalSize:0},i=0;i<n;i++){var o=`store-${i}`;r.categorizedSizes[o]={category:{name:"",key:o},size:`size-${i}`}}m(r,!0,t)}(),m(yield(0,r.F)(),!1,t)},b=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,c,"next",t)}function c(t){u(i,r,a,o,c,"throw",t)}o(void 0)})},b.apply(this,arguments)}function y(){f.setAttribute("displayed","true"),function(){b.apply(this,arguments)}()}function g(){f.setAttribute("displayed","false")}},3041(t,e,n){n.d(e,{B:()=>g,n:()=>w});var r=n(9566),a=n(8179),i=n(8024),o=n(4537),c=n(904),u=n(9119);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n,r,a,i,o){try{var c=t[i](o),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}var f=(0,a.bv)(".qs"),h=(0,a.aI)(f,".us"),v=(0,a.aI)(h,".vs"),p="已儲存至資料夾",m="無法儲存";function b(t,e,n){var c=document.createElement("div");c.classList.add("ws");var l=document.createElement("div");l.classList.add("xs");var d=document.createElement("span");d.appendChild((0,o.YC)(t.icon)),l.appendChild(d);var s=document.createElement("div");switch(s.classList.add("ys"),s.appendChild(document.createTextNode(t.name)),e){case"stop-on-route":c.onclick=function(){!function(t,e,n,o){var c=(0,a.bv)(`.vl .wl .xl .yl ._l .do#${t}`),l=(0,a.aI)(c,'.ko .lo .mo[type="save-to-folder"]');(0,r.aq)(e,n,o).then(function(t){t?(0,r.LH)("stop",n).then(function(t){t&&(l.setAttribute("highlighted",(0,i.xZ)(t)),(0,u.a)("folder",p),w())}):(0,u.a)("warning",m)})}(n[0],t.id,n[1],n[2])};break;case"stop-on-location":c.onclick=function(){!function(t,e,n,o){var c=(0,a.bv)(`.ih .di .ei .ni .oi#${t}`),l=(0,a.aI)(c,'.ij .jj .kj[type="save-to-folder"]');(0,r.aq)(e,n,o).then(function(t){t?(0,r.LH)("stop",n).then(function(t){t&&(l.setAttribute("highlighted",(0,i.xZ)(t)),(0,u.a)("folder",p),w())}):(0,u.a)("warning",m)})}(n[0],t.id,n[1],n[2])};break;case"route":c.onclick=function(){var e,i,o;e=t.id,i=n[0],o=(0,a.bv)('.ta .ua .va .wa[group="actions"] .xa ._a[action="save-to-folder"]'),(0,r.Fq)(e,i).then(function(t){t?(0,r.LH)("route",i).then(function(t){t&&(o.setAttribute("highlighted","true"),(0,u.a)("folder",p),w())}):(0,u.a)("warning",m)})};break;case"route-on-route":c.onclick=function(){var e,a;e=t.id,a=n[0],(0,r.Fq)(e,a).then(function(t){t?(0,r.LH)("route",a).then(function(t){t&&((0,u.a)("folder",p),w())}):(0,u.a)("warning",m)})};break;case"location":case"location-on-route":c.onclick=function(){var e,a;e=t.id,a=n[0],(0,r.DW)(e,a).then(function(t){t?(0,r.LH)("location",a).then(function(t){t&&((0,u.a)("folder",p),w())}):(0,u.a)("warning",m)})}}return c.appendChild(l),c.appendChild(s),{element:c,id:""}}function y(){var t;return t=function*(t,e){var n=yield(0,r.Xi)();v.innerHTML="";var a,i=new DocumentFragment,o=l(n);try{for(o.s();!(a=o.n()).done;){var c=b(a.value,t,e);i.appendChild(c.element)}}catch(t){o.e(t)}finally{o.f()}v.append(i)},y=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,c,"next",t)}function c(t){s(i,r,a,o,c,"throw",t)}o(void 0)})},y.apply(this,arguments)}function g(t,e){(0,c.WR)("SaveToFolder"),f.setAttribute("displayed","true"),function(t,e){y.apply(this,arguments)}(t,e)}function w(){(0,c.kr)("SaveToFolder"),f.setAttribute("displayed","false")}},5009(t,e,n){n.d(e,{Bb:()=>ut,H2:()=>ot,RC:()=>it,gn:()=>et,ld:()=>nt,rf:()=>ct});var r=n(8134),a=n(8179),i=n(7968),o=n(8024),c=n(6141),u=n(4781),l=n(4884),d=n(6082),s=n(4537),f=n(904),h=n(3030),v=n(9119),p=n(4690);function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return b(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var y=[],g=(0,a.bv)(".hf"),w=(0,a.aI)(g,".if"),A=(0,a.aI)(g,".tr"),k=(0,a.aI)(w,".jf #search_input"),C=(0,a.aI)(w,".jf canvas"),x=(0,a.aI)(w,".sr"),I=(0,a.aI)(A,".ur"),S=(0,a.aI)(A,".yr"),L=C.getContext("2d"),E=window.devicePixelRatio,j=15*E,T=1.8*E,M=.9*E,_=4*E,z=25*E,$=20*E,D=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],F=(0,c.t)("--a"),H=(0,c.t)("--ae"),O=(0,c.t)("--b"),N=0,R=0,P=0,q=!1,U=0,W=(0,f.gO)("head-two-button"),Z=W.width*E,Y=W.height*E,B=!1,G=!1;function J(){var t=tt(),e=t.substring(0,t.length-1);k.value=e,it(),et(-1,-1),(0,f.p9)()}function X(){k.value="",it(),et(-1,-1),(0,f.p9)()}function Q(t){t.preventDefault(),k.focus(),(0,f.p9)()}function K(){!function(){if(!G){G=!0;var t,e=new DocumentFragment,n=m(D);try{for(n.s();!(t=n.n()).done;){var r,a=m(t.value);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=document.createElement("button");c.classList.add("zr");var u=(0,o.p1)()?"touchstart":"mousedown";switch(i){case"刪除":c.addEventListener(u,J),c.appendChild((0,s.YC)("backspace"));break;case"清空":c.addEventListener(u,X),c.appendChild(document.createTextNode(i));break;case"鍵盤":c.addEventListener(u,Q),c.appendChild((0,s.YC)("keyboard"));break;default:c.addEventListener(u,function(t){return function(){var e,n;e=t,n=`${tt()}${e}`,k.value=n,it(),et(-1,-1),(0,f.p9)()}}(i)),c.appendChild(document.createTextNode(i))}e.appendChild(c)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}S.append(e)}}(),S.setAttribute("displayed","true"),B=!0,rt(),et(-1,-1)}function V(){return parseInt(x.getAttribute("type"))}function tt(){return String(k.value)}function et(t,e){var n=tt(),r=!1;0===n.length?(n="搜尋路線、地點、公車",r=!0,t=0,e=0):-1===t&&-1===e&&(e=1*(t=n.length)),W=(0,f.gO)("head-two-button"),Z=W.width*E,Y=W.height*E,F=(0,c.t)("--a"),H=(0,c.t)("--ae"),O=(0,c.t)("--b"),L.font=`400 ${$}px "Noto Sans TC", sans-serif`,L.textAlign="center",L.textBaseline="middle",N=L.measureText(n).width,R=L.measureText(n.substring(0,t)).width,P=L.measureText(n.substring(t,e)).width,U=r?1:Math.max(1,R),L.clearRect(0,0,Z,Y),t===e?(q=!0,L.globalAlpha=1,L.fillStyle=r?H:F,L.fillText(n,N/2+(Math.min(U,Z-j)-U),Y/2),(0,i.wg)(L,Math.min(U,Z-j),(Y-z)/2,T,z,M,O)):(q=!1,L.globalAlpha=.27,(0,i.wg)(L,Math.min(U,Z-j),(Y-z)/2,P,z,_,O),L.globalAlpha=1,L.fillStyle=r?H:F,L.fillText(n,N/2+(Math.min(U,Z-j)-U),Y/2),L.globalAlpha=.08,(0,i.wg)(L,Math.min(U,Z-j),(Y-z)/2,P,z,_,O))}function nt(){W=(0,f.gO)("head-two-button"),Z=W.width,Y=W.height,C.width=Z*E,C.height=Y*E,et(-1,-1)}function rt(){var t=performance.now(),e=1-Math.pow(Math.sin(Math.PI*t/960),4);q&&(L.globalAlpha=e,L.clearRect(Math.min(U,Z-j)-1,0,T+2,Y),(0,i.wg)(L,Math.min(U,Z-j),(Y-z)/2,T,z,M,O)),B&&window.requestAnimationFrame(rt)}function at(){var t=document.createElement("div");t.classList.add("vr");var e=document.createElement("div");e.classList.add("xr");var n=document.createElement("div");return n.classList.add("wr"),n.appendChild((0,s.oC)()),t.appendChild(n),t.appendChild(e),{element:t,id:""}}function it(){var t=["route","location_on","directions_bus"];function e(e,n,r){function i(e,n){var r=(0,a.aI)(n,".wr");(0,s.yD)(r,t[e.item.type])}function o(t,e){(0,a.aI)(e,".xr").innerText=t.item.n}function c(t,e){switch(t.item.type){case 0:e.onclick=function(){(0,p.SR)(t.item.id,t.item.pid)};break;case 1:e.onclick=function(){(0,h.so)(t.item.hash)};break;case 2:e.onclick=function(){(0,l.$l)(t.item.id)}}}r?(n.item.type!==r.item.type&&i(n,e),n.item.id!==r.item.id&&(o(n,e),c(n,e))):(i(n,e),o(n,e),c(n,e))}var n=V(),i=tt();if(!(0,u.iO)(i)){var o=(0,r.GU)(i,n,30),c=o.length,d=(0,a.jg)(I,".vr").length;if(c!==d){var f=d-c;if(f<0){for(var v=new DocumentFragment,m=0,b=Math.abs(f);m<b;m++){var g=at();v.appendChild(g.element)}I.appendChild(v)}else for(var w=(0,a.jg)(I,".vr"),A=0,k=Math.abs(f);A<k;A++){w[d-1-A].remove()}}for(var C=(0,a.jg)(I,".vr"),x=0;x<c;x++){var S=y[x],L=o[x],E=C[x];e(E,L,S||null)}y=o}}function ot(){var t=V(),e=-1;e=t>=-1&&t<2?t+1:-1;(0,s.yD)(x,["filter_list","route","location_on","directions_bus"][e+1]),x.setAttribute("type",e.toString()),it()}function ct(){d.m?((0,f.WR)("Search"),g.setAttribute("displayed","true"),K(),(0,r.dD)()):(0,v.a)("download_for_offline","資料還在下載中")}function ut(){(0,f.kr)("Search"),S.setAttribute("displayed","false"),B=!1,g.setAttribute("displayed","false")}},6166(t,e,n){n.d(e,{wx:()=>m,yH:()=>p});var r=n(3459),a=n(8179),i=n(904);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var u=(0,a.bv)("._r"),l=(0,a.aI)(u,".is"),d=(0,a.aI)(l,".js"),s=(0,a.aI)(l,".ps"),f=(0,a.aI)(u,".bs"),h=(0,a.aI)(f,".hs");function v(t,e,n){var i=document.createElement("div");i.classList.add("ks");var c=document.createElement("div");c.classList.add("ls"),c.appendChild(document.createTextNode(e.name));var u=document.createElement("div");u.classList.add("ms");var l=document.createElement("input");return l.type="checkbox",l.checked=t.option===n,l.onclick=function(e){!function(t,e,n){var i,c=o((0,a.e0)('._r .is .js .ks .ms input[type="checkbox"]'));try{for(c.s();!(i=c.n()).done;){i.value.checked=!1}}catch(t){c.e(t)}finally{c.f()}var u=t.target;u.checked=!0,(0,r.aN)(e,n)}(e,t.key,n)},u.appendChild(l),i.appendChild(c),i.appendChild(u),{element:i,id:""}}function p(t){(0,i.WR)("SettingsOptions"),u.setAttribute("displayed","true"),function(t){var e=(0,r.PL)(t);h.innerText=e.name,s.innerText=e.description,d.innerHTML="";var n,a=new DocumentFragment,i=0,c=o(e.options);try{for(c.s();!(n=c.n()).done;){var u=v(e,n.value,i);a.appendChild(u.element),i+=1}}catch(t){c.e(t)}finally{c.f()}d.append(a)}(t),(0,i.Z_)()}function m(){u.setAttribute("displayed","false"),(0,i.l$)()}}}]);
//# sourceMappingURL=573f93bc04c26ce081e7.js.map