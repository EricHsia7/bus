"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[638],{904(e,a,t){t.d(a,{a:()=>I,b:()=>P,c:()=>_,d:()=>U,e:()=>R,f:()=>O,g:()=>N,h:()=>Q,i:()=>H});var n=t(8179),i=t(8024),r=t(4884),c=t(9499),s=t(6052),o=t(9333),u=t(8379),d=t(6082),l=t(4294),b=t(1351),f=t(3030),h=t(2174),p=t(8380),k=t(5693),m=t(7891),v=t(8279),g=t(7908),y=t(5286),w=t(4690),S=t(3041),L=t(752),C=t(5009),T=t(6104),M=t(6166),D=t(2994),E=(0,n.c)(".f"),x=(0,n.c)(".k"),A=(new Date).getTime(),F=["Home"];function _(e){var a=F.length;F[a-1]!==e&&F.push(e)}function R(e){var a=F.length;a>1&&F[a-1]===e&&F.pop()}function P(){var e=F.length;if(e>1)switch(F[e-2]){case"Home":(0,d.c)();break;case"FolderCreator":(0,s.b)();break;case"FolderEditor":(0,o.a)();break;case"IconSelector":(0,l.b)();break;case"FolderManager":(0,u.b)();break;case"Location":(0,f.b)();break;case"LocationDetails":(0,b.b)();break;case"Route":(0,w.b)();break;case"RouteDetails":(0,y.f)();break;case"SaveToFolder":(0,S.b)();break;case"Search":(0,C.b)();break;case"Settings":(0,T.c)();break;case"SettingsOptions":(0,M.b)();break;case"DataUsage":(0,c.b)();break;case"PersonalScheduleManager":(0,m.b)();break;case"PersonalScheduleCreator":(0,p.c)();break;case"PersonalScheduleEditor":(0,k.b)();break;case"Bus":(0,r.c)();break;case"RegisterNotification":(0,g.a)();break;case"ScheduleNotification":(0,L.b)();break;case"NotificationScheduleManager":(0,h.b)();break;case"QRCode":(0,v.b)();break;case"Storage":(0,D.b)()}}function H(){var e=F.length;if(e>1)switch(F[e-2]){case"Home":(0,d.d)();break;case"FolderCreator":(0,s.d)();break;case"FolderEditor":(0,o.c)();break;case"IconSelector":(0,l.e)();break;case"FolderManager":(0,u.d)();break;case"Location":(0,f.e)();break;case"LocationDetails":(0,b.e)();break;case"Route":(0,w.e)();break;case"RouteDetails":(0,y.h)();break;case"SaveToFolder":(0,S.d)();break;case"Search":(0,C.f)();break;case"Settings":(0,T.h)();break;case"SettingsOptions":(0,M.d)();break;case"DataUsage":(0,c.d)();break;case"PersonalScheduleManager":(0,m.e)();break;case"PersonalScheduleCreator":(0,p.e)();break;case"PersonalScheduleEditor":(0,k.e)();break;case"Bus":(0,r.e)();break;case"RegisterNotification":(0,g.c)();break;case"ScheduleNotification":(0,L.d)();break;case"NotificationScheduleManager":(0,h.d)();break;case"QRCode":(0,v.d)();break;case"Storage":(0,D.d)()}}function N(){var e=0;(0,i.g)()&&(e=-1*(window.outerHeight-window.innerHeight)/2),(0,n.c)(".f svg.g").style.setProperty("--h",`${e}px`)}function I(e){function a(){E.classList.add("i"),E.addEventListener("animationend",function(){E.setAttribute("displayed","false"),E.classList.remove("i"),"function"==typeof e&&e()},{once:!0})}var t=(new Date).getTime();t-A<100?setTimeout(a,Math.max(1,t-A)):a()}function Q(){x.setAttribute("displayed","true")}function U(e){var a=0,t=0,n=window.innerWidth,i=window.innerHeight;switch(e){case"window":a=n,t=i;break;case"head":a=n,t=55;break;case"head-one-button":a=n-55,t=55;break;case"head-two-button":a=n-110,t=55;break;case"route-details-canvas":a=n-20-20,t=1680;break;case"route-bus-arrival-time-chart":a=n-45-15-20,t=75;break;case"location-bus-arrival-time-chart":a=n-30-20,t=75;break;default:a=0,t=0}return{width:a,height:t}}function O(){window.scrollTo({top:0,behavior:"instant"})}},4294(e,a,t){t.d(a,{a:()=>F,b:()=>x,c:()=>M,d:()=>A,e:()=>E});var n,i=t(467),r=t(9218),c=t(6788),s=t(972),o=t(3459),u=t(8179),d=t(8024),l=t(4781),b=t(4537),f=t(904),h=(0,u.c)(".ob"),p=(0,u.e)(h,".pb"),k=(0,u.e)(p,"#search_material_symbols_input"),m=(0,u.e)(h,".sb"),v=(0,u.e)(m,".tb"),g=[],y=[],w=!1,S=!1;function L(){var e=(0,u.a)();return e.classList.add("ub"),e.appendChild((0,b.a)()),e}function C(e,a,t,i){function r(e,r,c){function s(e,a){(0,b.c)(e,a)}function o(e,a,t){e.onclick=function(){!function(e,a){a.value=e,F()}(a,t)}}function u(e,a){e.setAttribute("skeleton-screen",(0,d.a)(a))}function l(e,a){e.setAttribute("animation",(0,d.a)(a))}null==c?(s(e,r),o(e,r,a),u(e,t),l(e,i)):(c!==r?(s(e,r),o(e,r,a)):n!==a&&o(e,r,a),S!==t&&u(e,t),w!==i&&l(e,i))}var c=e.length,s=Array.from((0,u.d)(v,".ub")),o=s.length;if(c!==o){var l=o-c;if(l<0){for(var f=new DocumentFragment,h=0;h>l;h--){var p=L();f.appendChild(p),s.push(p)}v.append(f)}else if(l>0)for(var k=o-1,m=o-l-1;k>m;k--)s[k].remove(),s.splice(k,1)}for(var g=0;g<c;g++){var C=y[g],T=e[g],M=s[g];r(M,T,C||null)}y=e.slice(),n=a,S=t,w=i}function T(){return(T=(0,i.a)(function*(e){var a=(0,o.b)("playing_animation"),t=(0,d.c)();k.value="",function(e){for(var a=(0,o.b)("playing_animation"),t=(0,f.d)("window"),n=Math.floor(t.width/50)*(Math.floor(t.height/50)+3),i=[],r=0;r<n;r++)i.push("");C(i,e,!0,a)}(e);var n=yield(0,r.a)(t);for(var i in g=[],n.symbols)g.push(i);C(g,e,!1,a),(0,s.a)(n),(0,c.a)(t)})).apply(this,arguments)}function M(){k.addEventListener("paste",function(){D()}),k.addEventListener("cut",function(){D()}),k.addEventListener("selectionchange",function(){D()}),document.addEventListener("selectionchange",function(){D()}),k.addEventListener("keyup",function(){D()})}function D(){var e=k.value;if(!(0,l.a)(e)){for(var a=(0,s.b)(e),t=a.length-1;t>=0;t--){var i=a[t].item,r=g.indexOf(i);if(g[t]&&!(r<0)){var c=[g[r],g[t]];g[t]=c[0],g[r]=c[1]}}C(g,n,!1,w)}}function E(){h.setAttribute("displayed","true")}function x(){h.setAttribute("displayed","false")}function A(e){(0,f.c)("IconSelector"),E(),function(e){T.apply(this,arguments)}(e),(0,f.b)()}function F(){x(),(0,f.i)(),(0,f.e)("IconSelector")}},4537(e,a,t){t.d(a,{a:()=>r,b:()=>i,c:()=>c});var n=t(8179);function i(e){var a=document.createElement("span");return a.classList.add("n"),a.innerText=e,a}function r(){var e=document.createElement("span");return e.classList.add("n"),e}function c(e,a){(0,n.e)(e,"span.n").innerText=a}},4953(){},5259(){},5297(){},6091(e,a,t){t.d(a,{a:()=>N,b:()=>F});var n=t(467),i=t(5767),r=t(5314),c=t(3459),s=t(8179),o=t(8024),u=t(4884),d=t(4537),l=t(904),b=t(3030),f=t(4690),h=(0,s.c)(".o"),p=(0,s.e)(h,".ea"),k=(0,s.e)(p,".fa"),m=(0,s.e)(k,".ka"),v={},g=!1,y=!1,w=15e3,S=5e3,L=!0,C=!1,T=0,M=0,D="",E=!1;function x(){var e=(0,s.a)();e.classList.add("oa");var a=(0,s.a)();a.classList.add("pa");var t=(0,s.a)();t.classList.add("qa"),t.appendChild((0,d.a)());var n=(0,s.a)();n.classList.add("ra");var i=(0,s.a)();i.classList.add("sa"),a.appendChild(t),a.appendChild(n),a.appendChild(i);var r=(0,s.a)();return r.classList.add("ta"),e.appendChild(a),e.appendChild(r),e}function A(e,a,t){function n(e,n,i){function r(e,a){var t=(0,s.e)(e,".pa"),n=(0,s.e)(t,".qa"),i="";switch(a.type){case"route":i="route";break;case"location":i="location_on";break;case"bus":i="directions_bus";break;case"empty":i="lightbulb"}(0,d.c)(n,i)}function c(e,a){var t=(0,s.e)(e,".pa"),n=(0,s.e)(t,".ra"),i="";switch(a.type){case"route":i="路線";break;case"location":i="地點";break;case"bus":i="公車";break;case"empty":i="提示"}n.innerText=i}function l(e,a){var t=(0,s.e)(e,".pa");(0,s.e)(t,".sa").innerText=a.time.relative}function h(e,a){(0,s.e)(e,".ta").innerText=a.name}function p(e,a){switch(a.type){case"route":e.onclick=function(){(0,f.d)(a.id,a.pid)};break;case"location":e.onclick=function(){(0,b.d)(a.hash)};break;case"bus":e.onclick=function(){(0,u.d)(a.id)};break;case"empty":e.onclick=null}}function k(e,a){e.setAttribute("animation",(0,o.a)(a))}function m(e,a){e.setAttribute("skeleton-screen",(0,o.a)(a))}if(null==i)r(e,n),c(e,n),l(e,n),h(e,n),p(e,n),k(e,t),m(e,a);else if(n.type!==i.type)r(e,n),c(e,n),l(e,n),h(e,n),p(e,n),k(e,t),m(e,a);else{switch(n.type){case"location":(0,o.b)(i.name,n.name)||h(e,n),i.time!==n.time&&l(e,n),(0,o.b)(i.hash,n.hash)||p(e,n);break;case"route":i.name!==n.name&&h(e,n),i.time!==n.time&&l(e,n),i.id===n.id&&(0,o.b)(i.pid,n.pid)||p(e,n);break;case"bus":i.name!==n.name&&h(e,n),i.time!==n.time&&l(e,n),i.id!==n.id&&p(e,n);break;case"empty":i.time!==n.time&&l(e,n)}g!==t&&k(e,t),y!==a&&m(e,a)}}var i=e.itemQuantity,r=Array.from((0,s.d)(m,".oa")),c=r.length;if(i!==c){var l=c-i;if(l<0){for(var h=new DocumentFragment,p=0;p>l;p--){var k=x();h.appendChild(k),r.push(k)}m.append(h)}else if(l>0)for(var w=c-1,S=c-l-1;w>S;w--)r[w].remove(),r.splice(w,1)}for(var L=0;L<i;L++){var C=r[L],T=e.items[L];if((0,o.f)(v,"items"))if(v.items[L])n(C,T,v.items[L]);else n(C,T,null);else n(C,T,null)}v=e,g=t,y=a}function F(){for(var e=(0,c.b)("playing_animation"),a=(0,l.d)("window"),t=Math.floor(a.height/70/3)+2,n=[],i=0;i<t;i++)n.push({type:"route",id:0,pid:[],time:{absolute:0,relative:""},name:""});A({items:n,itemQuantity:n.length,dataUpdateTime:0},!0,e)}function _(){return R.apply(this,arguments)}function R(){return(R=(0,n.a)(function*(){var e=(0,c.b)("playing_animation"),a=(0,c.b)("refresh_interval");L=a.dynamic,w=a.baseInterval,D=(0,o.c)();var t=yield(0,r.c)(D);A(t,!1,e);var n=0;L&&(n=yield(0,i.c)()),T=(new Date).getTime(),M=L?Math.max(T+S,t.dataUpdateTime+w/n):T+w,Math.max(S,M-T)})).apply(this,arguments)}function P(){return H.apply(this,arguments)}function H(){return(H=(0,n.a)(function*(){_().then(function(){C?setTimeout(function(){P()},Math.max(S,M-(new Date).getTime())):E=!1}).catch(function(e){C?setTimeout(function(){P()},1e4):E=!1})})).apply(this,arguments)}function N(){C||(C=!0,E?_():(E=!0,P()))}},6561(){},6764(){},7114(){},7336(){},7499(){},9657(){}}]);
//# sourceMappingURL=7a2ee70c7bfe8bd48c71.js.map