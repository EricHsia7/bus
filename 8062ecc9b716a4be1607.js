"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[155],{928(){},1077(){},1818(){},1844(){},2239(){},2994(t,e,n){n.d(e,{G:()=>b,Q:()=>g});var r=n(467),a=n(4225),i=n(3459),o=n(8179),c=n(8024),s=n(904),u=[],d=!1,l=!1,f=(0,o.bv)(".et"),p=(0,o.aI)(f,".it"),v=(0,o.aI)(p,".jt");function h(){var t=document.createElement("div");t.classList.add("kt");var e=document.createElement("div");e.classList.add("lt");var n=document.createElement("div");return n.classList.add("mt"),t.appendChild(e),t.appendChild(n),t}function m(t,e,n){function r(t,r,a){function i(t,e){(0,o.aI)(t,".mt").innerText=e.size}function s(t,e){(0,o.aI)(t,".lt").innerText=e.category.name}function u(t,e){t.setAttribute("animation",(0,c.xZ)(e))}function f(t,e){t.setAttribute("skeleton-screen",(0,c.xZ)(e))}a?(r.category.key!==a.category.key&&(s(t,r),i(t,r)),r.size!==a.size&&i(t,r),d!==n&&u(t,n),l!==e&&f(t,e)):(i(t,r),s(t,r),u(t,n),f(t,e))}var a=[];for(var i in t.categorizedSizes){var s=t.categorizedSizes[i];a.push(s)}var f=a.length,p=(0,o.jg)(v,".kt").length;if(f!==p){var m=p-f;if(m<0){for(var y=new DocumentFragment,b=0,g=Math.abs(m);b<g;b++){var A=h();y.appendChild(A)}v.appendChild(y)}else for(var w=(0,o.jg)(v,".kt"),k=0,E=Math.abs(m);k<E;k++){w[p-1-k].remove()}}for(var C=(0,o.jg)(v,".kt"),x=0;x<f;x++){var L=u[x],I=a[x],S=C[x];r(S,I,L||null)}u=a,l=e,d=n}function y(){return(y=(0,r.A)(function*(){var t=(0,i.Js)("playing_animation");!function(){for(var t=(0,i.Js)("playing_animation"),e=(0,s.gO)("window").height,n=Math.min(7,Math.floor(e/55)+2),r={categorizedSizes:{},totalSize:0},a=0;a<n;a++){var o=`store-${a}`;r.categorizedSizes[o]={category:{name:"",key:o},size:`size-${a}`}}m(r,!0,t)}(),m(yield(0,a.F)(),!1,t)})).apply(this,arguments)}function b(){f.setAttribute("displayed","true"),function(){y.apply(this,arguments)}()}function g(){f.setAttribute("displayed","false")}},3381(){},3425(){},4800(){},5009(t,e,n){n.d(e,{Bb:()=>V,H2:()=>P,HI:()=>G,rf:()=>Q,x6:()=>U});var r=n(8134),a=n(8179),i=n(7968),o=n(8024),c=n(4781),s=n(4884),u=n(6082),d=n(4537),l=n(904),f=n(3030),p=n(9119),v=n(4690);function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var y=[],b=(0,a.bv)(".ur"),g=(0,a.aI)(b,".vr"),A=(0,a.aI)(b,".zr"),w=(0,a.aI)(g,".wr #search_input"),k=(0,a.aI)(g,".wr svg"),E=(0,a.aI)(k,'text[component="text"]'),C=(0,a.aI)(k,'path[component="cursor"]'),x=(0,a.aI)(g,".yr"),L=(0,a.aI)(A,"._r"),I=(0,a.aI)(A,".ds"),S="400",z="20px",_='"Noto Sans TC", sans-serif',T=[["紅","藍","1","2","3"],["綠","棕","4","5","6"],["橘","小","7","8","9"],["鍵盤","幹線","清空","0","刪除"]],$=(0,l.gO)("head-two-button"),j=$.width,M=$.height,D=!1,O="",R=0;function F(){var t=w.value,e=t.substring(0,t.length-1);w.value=e,N(),B(),q(),(0,l.p9)()}function H(){w.value="",N(),B(),q(),(0,l.p9)()}function Z(t){t.preventDefault(),w.focus(),(0,l.p9)()}function Y(){!function(){if(!D){D=!0;var t,e=new DocumentFragment,n=h(T);try{for(n.s();!(t=n.n()).done;){var r,a=h(t.value);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=document.createElement("button");c.classList.add("es");var s=(0,o.p1)()?"touchstart":"mousedown";switch(i){case"刪除":c.addEventListener(s,F),c.appendChild((0,d.YC)("backspace"));break;case"清空":c.addEventListener(s,H),c.innerText=i;break;case"鍵盤":c.addEventListener(s,Z),c.appendChild((0,d.YC)("keyboard"));break;default:c.addEventListener(s,function(t){return function(){var e,n;e=t,n=`${w.value}${e}`,w.value=n,N(),B(),q(),(0,l.p9)()}}(i)),c.innerText=i}e.appendChild(c)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}I.append(e)}}(),I.setAttribute("displayed","true"),B()}function U(){w.addEventListener("paste",function(){q(),N()}),w.addEventListener("cut",function(){q(),N()}),w.addEventListener("selectionchange",function(){q(),N()}),document.addEventListener("selectionchange",function(){q(),N()}),w.addEventListener("keyup",function(){q(),N()}),w.addEventListener("scroll",function(){q()})}function W(){return parseInt(x.getAttribute("type"))}function q(){var t=w.scrollLeft,e=w.value,n=w.selectionStart,r=w.selectionEnd,a=0===e.length,c=a?"搜尋路線、地點、公車":e,s=a?0:n,u=s!==(a?0:r),d=(0,i.z7)(c,S,z,_),l=(0,i.z7)(c.substring(0,s),S,z,_),f=-1*t,p=d[0]+(M-d[2])/2;E.textContent=c,E.setAttribute("transform",`translate(${f} ${p})`),C.setAttribute("transform",`translate(${a?1:Math.max(Math.min(l[1]+f,j-1),1)} 0)`),E.setAttribute("empty",(0,o.xZ)(a)),C.setAttribute("selection",(0,o.xZ)(u)),w.setAttribute("selection",(0,o.xZ)(u))}function B(){var t=w.value,e=t.length,n=(0,i.z7)(t,S,z,_);w.setSelectionRange(e,e),w.scrollTo({left:n[1]-j})}function G(){$=(0,l.gO)("head-two-button"),j=$.width,M=$.height,k.setAttribute("viewBox",`0 0 ${j} ${M}`),B(),q()}function J(){var t=document.createElement("div");t.classList.add("as");var e=document.createElement("div");e.classList.add("cs");var n=document.createElement("div");return n.classList.add("bs"),n.appendChild((0,d.oC)()),t.appendChild(n),t.appendChild(e),t}function N(){var t=["route","location_on","directions_bus"];function e(e,n,r){function i(e,n){var r=(0,a.aI)(n,".bs");(0,d.yD)(r,t[e.item.type])}function o(t,e){(0,a.aI)(e,".cs").innerText=t.item.n}function c(t,e){switch(t.item.type){case 0:e.onclick=function(){(0,v.SR)(t.item.id,t.item.pid)};break;case 1:e.onclick=function(){(0,f.so)(t.item.hash)};break;case 2:e.onclick=function(){(0,s.$l)(t.item.id)}}}r?(n.item.type!==r.item.type&&i(n,e),n.item.id!==r.item.id&&(o(n,e),c(n,e))):(i(n,e),o(n,e),c(n,e))}var n=W(),i=w.value;if(!(0,c.iO)(i)&&(i!==O||n!==R)){var o=(0,r.GU)(i,n,30),u=o.length,l=(0,a.jg)(L,".as").length;if(u!==l){var p=l-u;if(p<0){for(var h=new DocumentFragment,m=0,b=Math.abs(p);m<b;m++){var g=J();h.appendChild(g)}L.appendChild(h)}else for(var A=(0,a.jg)(L,".as"),k=0,E=Math.abs(p);k<E;k++){A[l-1-k].remove()}}for(var C=(0,a.jg)(L,".as"),x=0;x<u;x++){var I=y[x],S=o[x],z=C[x];e(z,S,I||null)}y=o}O=i,R=n}function P(){var t=W(),e=-1;e=t>=-1&&t<2?t+1:-1;(0,d.yD)(x,["filter_list","route","location_on","directions_bus"][e+1]),x.setAttribute("type",e.toString()),N()}function Q(){u.m?((0,l.WR)("Search"),b.setAttribute("displayed","true"),Y(),(0,r.dD)()):(0,p.a)("download_for_offline","資料還在下載中")}function V(){(0,l.kr)("Search"),I.setAttribute("displayed","false"),b.setAttribute("displayed","false")}},6104(t,e,n){n.d(e,{Ow:()=>w,gE:()=>L,jk:()=>S,os:()=>k,rY:()=>x,vv:()=>E,ze:()=>I});var r=n(467),a=n(5976),i=n(5427),o=n(3459),c=n(3251),s=n(4311),u=n(8179),d=n(8024),l=n(4537),f=n(904),p=n(9119);function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var m=(0,u.bv)(".fs"),y=(0,u.aI)(m,".ps"),b=(0,u.aI)(y,".rs");function g(t){var e=document.createElement("div");e.classList.add("ts"),e.setAttribute("type",t.type);var n=document.createElement("div");n.classList.add("vs");var r=document.createElement("span");r.appendChild((0,l.YC)(t.icon)),n.appendChild(r);var a=document.createElement("div");a.classList.add("ws"),a.innerText=t.name;var i=document.createElement("div");i.classList.add("ys"),i.innerText=t.status;var o=document.createElement("div");o.classList.add("zs");var c=document.createElement("span");return c.appendChild((0,l.YC)("arrow_forward_ios")),o.appendChild(c),"function"==typeof t.action?e.onclick=function(){t.action()}:"string"==typeof t.action&&e.setAttribute("onclick",t.action),e.appendChild(n),e.appendChild(a),e.appendChild(i),e.appendChild(o),e}function A(){return(A=(0,r.A)(function*(){var t=yield(0,o.cl)();b.innerHTML="";var e,n=new DocumentFragment,r=v(t);try{for(r.s();!(e=r.n()).done;){var a=g(e.value);n.appendChild(a)}}catch(t){r.e(t)}finally{r.f()}b.append(n)})).apply(this,arguments)}function w(){(0,f.WR)("Settings"),m.setAttribute("displayed","true"),function(){A.apply(this,arguments)}()}function k(){(0,f.kr)("Settings"),m.setAttribute("displayed","false")}function E(){return C.apply(this,arguments)}function C(){return(C=(0,r.A)(function*(){(0,p.a)("manufacturing","資料匯出中");var t=yield(0,a.R)();(0,d.MR)(t,"application/json","bus-export.json")})).apply(this,arguments)}function x(){var t=(0,d.zx)(),e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","application/json"),e.setAttribute("name",t),e.id=t,e.classList.add("dt"),e.addEventListener("change",function(e){if(0===e.target.files.length)(0,u.bv)(`body #${t}`).remove();else{var n=e.target.files[0],r=new FileReader;r.onload=function(e){var n=e.target.result;(0,i.Qx)(n).then(function(e){e?(0,p.a)("check_circle","已匯入資料"):(0,p.a)("error","無法匯入資料"),(0,u.bv)(`body #${t}`).remove()})},r.readAsText(n)}},{once:!0}),e.addEventListener("cancel",function(){(0,u.bv)(`body #${t}`).remove()},{once:!0}),document.body.append(e),(0,u.bv)(`body #${t}`).click()}function L(){var t=(0,c._P)();window.open(t)}function I(){window.open("https://github.com/EricHsia7/bus")}function S(){(0,s.VC)().then(function(t){switch(t){case"granted":(0,p.a)("check_circle","已開啟永久儲存");break;case"denied":(0,p.a)("cancel","永久儲存權限已被拒絕");break;case"unsupported":(0,p.a)("warning","此瀏覽器不支援永久儲存");break;default:(0,p.a)("error","發生錯誤")}})}},6166(t,e,n){n.d(e,{wx:()=>m,yH:()=>h});var r=n(3459),a=n(8179),i=n(904);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("E0")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s=(0,a.bv)(".gs"),u=(0,a.aI)(s,".qs"),d=(0,a.aI)(u,".ss"),l=(0,a.aI)(u,".ct"),f=(0,a.aI)(s,".is"),p=(0,a.aI)(f,".os");function v(t,e,n){var i=document.createElement("div");i.classList.add("us");var c=document.createElement("div");c.classList.add("xs"),c.innerText=e.name;var s=document.createElement("div");s.classList.add("_s");var u=document.createElement("input");return u.type="checkbox",u.checked=t.option===n,u.onclick=function(e){!function(t,e,n){var i,c=o((0,a.e0)('.gs .qs .ss .us ._s input[type="checkbox"]'));try{for(c.s();!(i=c.n()).done;){i.value.checked=!1}}catch(t){c.e(t)}finally{c.f()}var s=t.target;s.checked=!0,(0,r.aN)(e,n)}(e,t.key,n)},s.appendChild(u),i.appendChild(c),i.appendChild(s),i}function h(t){(0,i.WR)("SettingsOptions"),s.setAttribute("displayed","true"),function(t){var e=(0,r.PL)(t);p.innerText=e.name,l.innerText=e.description,d.innerHTML="";var n,a=new DocumentFragment,i=0,c=o(e.options);try{for(c.s();!(n=c.n()).done;){var s=v(e,n.value,i);a.appendChild(s),i+=1}}catch(t){c.e(t)}finally{c.f()}d.append(a)}(t),(0,i.Z_)()}function m(){s.setAttribute("displayed","false"),(0,i.l$)()}},6171(){},7037(){},7113(){},8073(){},9205(){},9351(){},9590(){}}]);
//# sourceMappingURL=8062ecc9b716a4be1607.js.map