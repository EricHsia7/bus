"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[704],{4474:(t,e,n)=>{n.d(e,{kP:()=>j,zk:()=>_,GZ:()=>$,GS:()=>Z});var r=n(9566),a=n(8621),i=n(3459),o=n(8024),u=n(3648),l=n(904),c=n(3041),s=n(8332),d=n(9009),f=n(4537),v=[],p=!0,h=!1;function y(){var t=document.createElement("div");t.classList.add("wo");var e=document.createElement("div");e.classList.add("xo"),t.appendChild(e);var n=document.createElement("div");return n.classList.add("yo"),t.appendChild(n),{element:t,id:""}}function m(t,e,n,r){function a(t,e,a){function i(t,e){(0,u.aI)(t,".xo").innerHTML=(0,f.Z)(e.icon)}function l(t,e){(0,u.aI)(t,".yo").innerText=e.value}function c(t,e){t.setAttribute("animation",(0,o.xZ)(e))}function s(t,e){t.setAttribute("skeleton-screen",(0,o.xZ)(e))}null===a?(i(t,e),l(t,e),c(t,r),s(t,n)):((0,o.hw)(a,e)||i(t,e),(0,o.hw)(a,e)||l(t,e),p!==r&&c(t,r),h!==n&&s(t,n))}var i=e.length;t.setAttribute("skeleton-screen",(0,o.xZ)(n));var l=(0,u.jg)(t,".uo .wo").length;if(i!==l){var c=l-i;if(c<0)for(var s=0;s<Math.abs(c);s++){var d=y();(0,u.aI)(t,".uo").appendChild(d.element)}else for(var m=0;m<Math.abs(c);m++){var g=l-1-m;(0,u.jg)(t,".uo .wo")[g].remove()}}for(var b=0;b<i;b++){var w=(0,u.jg)(t,".uo .wo")[b],x=e[b];0===v.length?a(w,x,null):a(w,x,v[b])}v=e,p=r,h=n}function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return b(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}var x=(0,u.bv)(".jo"),k=(0,u.aI)(x,".oo"),A=(0,u.aI)(k,".po"),I=(0,u.aI)(A,'.qo[group="calendar"]'),S=(0,u.aI)(I,".uo"),j=(0,u.aI)(S,"._o"),_=(0,u.aI)(S,".bp"),D=(0,u.aI)(x,'.oo .po .qo[group="actions"]'),M=(0,u.aI)(D,'.uo .vo[action="save-to-folder"]'),C=(0,u.aI)(D,'.uo .vo[action="get-permalink"]'),E=(0,u.aI)(D,'.uo .vo[action="show-permalink-qrcode"]'),P=(0,u.aI)(x,'.oo .po .qo[group="properties"]');function T(){var t;return t=function*(t,e){var n=(0,i.Js)("playing_animation"),u=yield(0,r.LH)("route",t);M.setAttribute("animation",(0,o.xZ)(n)),M.setAttribute("highlighted",(0,o.xZ)(u)),M.onclick=function(){(0,c.BI)("route",[t])},C.setAttribute("animation",(0,o.xZ)(n)),C.onclick=function(){(0,s.w)(t)},E.setAttribute("animation",(0,o.xZ)(n)),E.onclick=function(){(0,s.e)(t)},function(t){for(var e=(0,i.Js)("playing_animation"),n=[],r=0;r<5;r++)n.push({key:r,icon:"none",value:""});m(t,n,!0,e)}(P),(0,d.OS)();var l=(0,o.zx)(),f=yield(0,a.p)(t,e,l);m(P,f.properties,!1,n),(0,d.fB)(f.calendar,!1,n)},T=function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){w(i,r,a,o,u,"next",t)}function u(t){w(i,r,a,o,u,"throw",t)}o(void 0)}))},T.apply(this,arguments)}function Z(t,e){(0,l.WR)("RouteDetails"),x.setAttribute("displayed","true"),function(t,e){T.apply(this,arguments)}(t,e)}function $(){(0,l.kr)("RouteDetails"),x.setAttribute("displayed","false");var t,e=g((0,u.jg)(_,".cp"));try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}var n,r=g((0,u.jg)(j,".ap"));try{for(r.s();!(n=r.n()).done;){n.value.remove()}}catch(t){r.e(t)}finally{r.f()}}},7908:(t,e,n)=>{n.d(e,{NW:()=>m,XG:()=>h,hy:()=>y});var r=n(3937),a=n(4636),i=n(8024),o=n(3648),u=n(904),l=n(9119);function c(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}var s=(0,o.bv)(".ep"),d=(0,o.aI)(s,".jp"),f=(0,o.aI)(d,".kp"),v=(0,o.aI)(f,'.lp[group="provider"] .pp input'),p=(0,o.aI)(f,'.lp[group="registration-key"] .pp input');function h(){(0,u.WR)("RegisterNotification"),s.setAttribute("displayed","true"),v.value=(0,a.D7)(),p.value="",(0,u.Z_)()}function y(){s.setAttribute("displayed","false"),(0,u.l$)()}function m(){return g.apply(this,arguments)}function g(){var t;return t=function*(){(0,l.a)("處理中","manufacturing");var t=v.value,e=p.value;if((0,i.Gz)(t))return(0,a.Je)(t),(yield(0,r.e)(e))?void(0,l.a)("註冊成功","check_circle"):void(0,l.a)("註冊失敗","error");(0,l.a)("無效的提供者","error")},g=function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){c(i,r,a,o,u,"next",t)}function u(t){c(i,r,a,o,u,"throw",t)}o(void 0)}))},g.apply(this,arguments)}},8332:(t,e,n)=>{n.d(e,{e:()=>d,w:()=>c});var r=n(8134),a=n(9469),i=n(9119),o=n(8279);function u(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,l,"next",t)}function l(t){u(i,r,a,o,l,"throw",t)}o(void 0)}))}}function c(t){return s.apply(this,arguments)}function s(){return(s=l((function*(t){var e=yield(0,r.Rk)(t);if(!1!==e){var n=(0,a.i)(0,{id:t,name:e.n});navigator.share&&navigator.share({title:e.n,url:n}).then((function(){(0,i.a)("已分享路線連結","link")})).catch((function(t){(0,i.a)("已取消分享連結","cancel")}))}}))).apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return(f=l((function*(t){var e=yield(0,r.Rk)(t);if(!1!==e){var n=(0,a.i)(0,{id:t,name:e.n});(0,o.X8)(n)}}))).apply(this,arguments)}},9009:(t,e,n)=>{n.d(e,{OS:()=>I,f4:()=>D,fB:()=>_});var r=n(904),a=n(3648),i=n(3459),o=n(6141),u=n(7968),l=n(8024),c=n(4474);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var f=60,v=Math.floor(3072/(24*f)),p=10,h=1.2,y=45,m='"Noto Sans TC", sans-serif',g=(0,r.gO)("route-details-canvas"),b=g.width,w=g.height,x=Math.min(window.devicePixelRatio,v)||1,k={};function A(){var t=document.createElement("div");t.classList.add("cp");var e=document.createElement("canvas");return e.classList.add("dp"),t.appendChild(e),{element:t,id:""}}function I(){for(var t=(0,i.Js)("playing_animation"),e={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},r={},a=0;a<7;a++){var o=`d_${a}`;n[o]=[],r[o]={day:a,code:"d_{i}",name:""};for(var u=0;u<e[o];u++){var l=new Date;l.setHours(0),l.setMinutes(30*u),l.setSeconds(0),l.setMilliseconds(0),n[o].push({date:l,dateString:"",duration:15})}}_({calendarEventGroups:n,calendarDays:r,calendarDayQuantity:7,calendarEventQuantity:e},!0,t)}function S(t,e,n,r,a,i){t.innerText=e.name,t.setAttribute("day",i.toString()),t.onclick=function(){D(i)},t.setAttribute("highlighted",n===i?"true":"false"),t.setAttribute("animation",(0,l.xZ)(a)),t.setAttribute("skeleton-screen",(0,l.xZ)(r))}function j(t,e,n,i,o,c,d,k,A,I){function S(t,e,n){var r=e*f;t.fillStyle=n,t.fillRect(0+y,r+5,b-y,h),t.font=`400 12px ${m}`,t.textBaseline="top";var a=`${String(e).padStart(2,"0")}:00`,i=t.measureText(a),o=i.width,u=i.actualBoundingBoxDescent;t.fillText(a,(y-o)/2,r+(p-u)/2,o)}function j(t,e,n,r,a,i,o){var l=new Date;l.setDate(1),l.setMonth(0),l.setFullYear(e.date.getFullYear()),l.setMonth(e.date.getMonth()),l.setDate(e.date.getDate()),l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0);var c=y,s=(e.date.getTime()-l.getTime())/864e5*24*f,d=b-y,v=60*e.duration*1e3/864e5*24*f;(0,u.wg)(t,c,s,d,v,3,`rgba(${r}, ${a}, ${i}, ${o})`),(0,u.wg)(t,c,s,3,v,{tl:3,tr:0,bl:3,br:0},n),t.font=`400 14px ${m}`,t.textBaseline="top",t.fillStyle=n;var p=e.dateString,h=t.measureText(p),g=h.width,w=h.actualBoundingBoxDescent;t.fillText(p,c+8,s+(v-w)/2,g)}var _=(0,a.aI)(t,".dp"),D=_.getContext("2d");if(function(t,e,n){var r=e===n;t.setAttribute("displayed",(0,l.xZ)(r))}(t,n,I),function(t){g=(0,r.gO)("route-details-canvas"),b=g.width,w=g.height,x=Math.min(window.devicePixelRatio,v)||1,t.width=b*x,t.height=w*x;var e=t.getContext("2d");e.setTransform(1,0,0,1,0,0),e.scale(x,x)}(_),n===I){D.clearRect(0,0,b,w);for(var M=0;M<24;M++)S(D,M,A);var C,E=s(e);try{for(E.s();!(C=E.n()).done;){j(D,C.value,i,o,c,d,k)}}catch(t){E.e(t)}finally{E.f()}}else D.clearRect(0,0,b,w)}function _(t,e,n){var r,i=(new Date).getDay(),u=(0,o.t)("--c"),l=(0,o.t)("--d"),s=(0,o.t)("--e"),d=(0,o.t)("--ve"),f=(0,o.t)("--b"),v=(0,o.t)("--bd"),p=t.calendarDays,h=t.calendarDayQuantity,y=t.calendarEventGroups,m=(t.calendarEventQuantity,(0,a.jg)(c.zk,".cp").length);if(h!==m){var g=m-h;if(g<0)for(var b=0;b<Math.abs(g);b++){var w=(r=void 0,(r=document.createElement("div")).classList.add("ap"),{element:r,id:""});c.kP.appendChild(w.element);var x=A();c.zk.appendChild(x.element)}else for(var I=(0,a.jg)(c.kP,".ap"),_=(0,a.jg)(c.zk,".cp"),D=0;D<Math.abs(g);D++){var M=m-1-D;I[M].remove(),_[M].remove()}}for(var C=(0,a.jg)(c.kP,".ap"),E=(0,a.jg)(c.zk,".cp"),P=0;P<h;P++){var T=`d_${P}`,Z=p[T],$=y[T],R=C[P],B=E[P];S(R,Z,i,e,n,P),j(B,$,i,f,u,l,s,d,v,P)}k=t}function D(t){for(var e=(0,i.Js)("playing_animation"),n=(0,a.jg)(c.kP,".ap"),r=(0,a.jg)(c.zk,".cp"),u=0;u<7;u++){var l,s,d=n[u],f=r[u],v=`d_${u}`,p=null===(l=k)||void 0===l?void 0:l.calendarEventGroups[v],h=null===(s=k)||void 0===s?void 0:s.calendarDays[v];if(p&&h){var y=(0,o.t)("--c"),m=(0,o.t)("--d"),g=(0,o.t)("--e"),b=(0,o.t)("--ve"),w=(0,o.t)("--b"),x=(0,o.t)("--bd");S(d,h,t,!1,e,u),j(f,p,t,w,y,m,g,b,x,u)}}}}}]);
//# sourceMappingURL=ab56c564bc5f7381ae55.js.map