!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bus",[],r):"object"==typeof exports?exports.bus=r():t.bus=r()}(self,()=>(()=>{"use strict";var t,r,e={7425(t,r,e){var n=e(3453);function o(t,r,e){var n=e[0]-r[0],o=e[1]-r[1],a=n*n+o*o,s=((t[0]-r[0])*n+(t[1]-r[1])*o)/a;if(s<0)n=t[0]-r[0],o=t[1]-r[1];else if(s>1)n=t[0]-e[0],o=t[1]-e[1];else{var i=[r[0]+s*n,r[1]+s*o];n=t[0]-i[0],o=t[1]-i[1]}return Math.sqrt(n*n+o*o)}function a(t,r){var e=t.length-1;if(e<2)return t;for(var n=0,s=0,i=1;i<e;i++){var f=o(t[i],t[0],t[e]);f>n&&(s=i,n=f)}if(n>r){var u=t.slice(0,s+1),l=t.slice(s),c=a(u,r),v=a(l,r);return c.pop(),c.concat(v)}return[t[0],t[e]]}function s(t,r,e){var n=new Date;return n.setDate(1),n.setMonth(0),n.setFullYear(t),n.setMonth(r-1),n.setDate(e),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}e(3790);function i(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return f(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){i=!0,a=t},f:function(){try{s||null==e.return||e.return()}finally{if(i)throw a}}}}function f(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}self.onmessage=function(t){var r=function(t){var r,e=(0,n.A)(t,4),o=e[0],f=e[1],l=e[2],c=e[3],v=o.length,p=[],d=0,h=i(o);try{for(h.s();!(r=h.n()).done;){var y=r.value;p.push(y.stats.max,y.stats.min),d+=y.stats.sum}}catch(t){h.e(t)}finally{h.f()}for(var $=function(t){var r=t.length;if(0===r)return[0,0];for(var e=1/0,n=-1/0,o=r-1;o>=0;o--){var a=t[o];a>n&&(n=a),a<e&&(e=a)}return[e,n]}(p),b=$[1],m=$[0],x=o[0].date,g=o[v-1].date,w=s(x[0],x[1],x[2]),k=s(g[0],g[1],g[2]),j=[],O=0,M=0,A=0;A<v;A++){var S=o[A];if(0!==S.stats.sum)for(var C=S.data,P=0;P<u;P++){O+=C[P];var D=c+(A+P/u)/8*f,F=c+(1-O/d)*l;j.push([D,F]),M=D}else{var I=c+A/8*f,L=c+(A+.9993055555555556)/8*f,T=c+l;j.push([I,T]),j.push([L,T]),M=L}}var z=`<line x1="${c}" y1="${l+c}" x2="${c+f}" y2="${l+c}" stroke="var(--a)" stroke-width="1" />`,G=`<line x1="${c}" y1="${c}" x2="${c}" y2="${l+c}" stroke="var(--a)" stroke-width="1" />`,q=`<text x="${c+f/2}" y="${c+l+c}" text-anchor="middle" font-size="12" fill="var(--a)">時間</text>`,B=`<text x="${c/2}" y="${c+l/2}" text-anchor="middle" font-size="12" fill="var(--a)" transform="rotate(-90, ${.7*c}, ${c+l/2})">累計傳輸量</text>`,E=function(t){var r=t.length-1;if(r<0)return"";for(var e=[`M${t[0][0]} ${t[0][1]}`],n=1;n<r;n++){var o=t[n],a=t[n+1]||o;e.push(`Q${o[0]} ${o[1]} ${(o[0]+a[0])/2} ${(o[1]+a[1])/2}`)}var s=t[r];return e.push(`L${s[0]} ${s[1]}`),e.join(" ")}(a(j,1.1)),H={stats:{max:b,min:m,sum:d},period:{start:w,end:k},chart:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${f+2*c} ${l+2*c}"><defs><linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.3);" /><stop offset="73%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0.09);" /><stop offset="100%" style="stop-color:rgba(var(--c), var(--d), var(--e), 0);" /></linearGradient></defs><path d="M${c},${l+c} ${E} L${M},${l+c} L${c},${l+c}" stroke="none" stroke-width="0" fill="url(#grad1)"></path><path d="${E}" fill="none" stroke="var(--b)" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" opacity="1"></path>${z}${G}${q}${B}</svg>`};return H}(t.data);self.postMessage(r)};var u=1440}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.m=e,o.x=()=>{var t=o.O(void 0,[3453,3790],()=>o(7425));return t=o.O(t)},t=[],o.O=(r,e,n,a)=>{if(!e){var s=1/0;for(l=0;l<t.length;l++){for(var[e,n,a]=t[l],i=!0,f=0;f<e.length;f++)(!1&a||s>=a)&&Object.keys(o.O).every(t=>o.O[t](e[f]))?e.splice(f--,1):(i=!1,a<s&&(s=a));if(i){t.splice(l--,1);var u=n();void 0!==u&&(r=u)}}return r}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[e,n,a]},o.d=(t,r)=>{for(var e in r)o.o(r,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((r,e)=>(o.f[e](t,r),r),[])),o.u=t=>7425===t?"7425.ee147659.js":{3453:"714b6af5",3790:"009e15b3"}[t]+".js",o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),o.p="./",(()=>{o.b=self.location+"";var t={7425:1};o.f.i=(r,e)=>{t[r]||importScripts(o.p+o.u(r))};var r=self.webpackChunkbus=self.webpackChunkbus||[],e=r.push.bind(r);r.push=r=>{var[n,a,s]=r;for(var i in a)o.o(a,i)&&(o.m[i]=a[i]);for(s&&s(o);n.length;)t[n.pop()]=1;e(r)}})(),r=o.x,o.x=()=>Promise.all([o.e(3453),o.e(3790)]).then(r);var a=o.x();return a=a.default})());
//# sourceMappingURL=7425.ee147659.js.map