"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[605],{752(e,t,n){n.d(t,{a:()=>h,b:()=>p,c:()=>v,d:()=>f});var a=n(3422),i=n(8179),r=n(4537),c=n(904),o=n(9119),d=(0,i.c)(".wb"),u=(0,i.e)(d,".xb"),l=(0,i.e)(u,".yb");function s(e,t,n,c,d){var u=(0,i.a)();u.classList.add("zb");var l=(0,i.a)();l.classList.add("_b");var s=document.createElement("span");s.appendChild((0,r.b)(e.icon)),l.appendChild(s);var f=(0,i.a)();f.classList.add("ac"),f.innerText=e.name;var p=e.index;return u.onclick=function(){!function(e,t,n,i,r){(0,o.a)("manufacturing","處理中"),e.setAttribute("enabled","false"),h(),(0,a.m)(t,n,i,r).then(function(t){switch(t){case 0:(0,o.a)("error","設定失敗"),e.setAttribute("enabled","true");break;case 1:(0,o.a)("check_circle","設定成功"),e.setAttribute("enabled","true"),e.setAttribute("highlighted","true");break;case 2:(0,o.a)("warning","在設定中註冊後才可設定到站通知"),e.setAttribute("enabled","true")}})}(t,n,c,d,p)},u.appendChild(l),u.appendChild(f),u}function f(){d.setAttribute("displayed","true")}function p(){d.setAttribute("displayed","false")}function v(e,t,n,i){(0,c.c)("ScheduleNotification"),f(),function(e,t,n,i){l.innerHTML="";var r=new DocumentFragment;for(var c of a.n){var o=s(c,e,t,n,i);r.appendChild(o)}l.append(r)}(e,t,n,i),(0,c.b)()}function h(){p(),(0,c.i)(),(0,c.e)("ScheduleNotification")}},1078(){},1102(){},1306(){},1308(){},1511(){},1603(){},1743(){},2421(){},2696(){},3041(e,t,n){n.d(t,{a:()=>w,b:()=>k,c:()=>A,d:()=>y});var a=n(9566),i=n(8179),r=n(8024),c=n(6052),o=n(4537),d=n(904),u=n(9119),l=(0,i.c)(".bc"),s=(0,i.e)(l,".cc"),f=(0,i.e)(s,".dc"),p=(0,i.e)(l,".ec"),v=(0,i.e)(p,".fc"),h="已儲存至資料夾",b="無法儲存";function g(e,t,n,c){var d=(0,i.a)();d.classList.add("gc");var l=(0,i.a)();l.classList.add("hc");var s=document.createElement("span");s.appendChild((0,o.b)(e.icon)),l.appendChild(s);var f=(0,i.a)();switch(f.classList.add("ic"),f.innerText=e.name,d.appendChild(l),d.appendChild(f),t){case"stop":d.onclick=function(){(0,a.n)(e.id,n[0],n[1]).then(function(e){e?(0,a.e)("stop",n[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,u.a)("folder",h),w())}):(0,u.a)("warning",b)})};break;case"route":d.onclick=function(){(0,a.m)(e.id,n[0]).then(function(e){e?(0,a.e)("route",n[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,u.a)("folder",h),w())}):(0,u.a)("warning",b)})};break;case"location":d.onclick=function(){(0,a.l)(e.id,n[0]).then(function(e){e?(0,a.e)("location",n[0]).then(function(e){e&&(null!=c&&c.setAttribute("highlighted",(0,r.a)(e)),(0,u.a)("folder",h),w())}):(0,u.a)("warning",b)})}}return d}function m(e,t,n){v.onclick=function(){(0,c.c)(function(){m(e,t,n)})};var i=(0,a.j)();f.innerHTML="";var r=new DocumentFragment;for(var o of i){var d=g(o,e,t,n);r.appendChild(d)}f.append(r)}function y(){l.setAttribute("displayed","true")}function k(){l.setAttribute("displayed","false")}function A(e,t,n){(0,d.c)("SaveToFolder"),y(),m(e,t,n),(0,d.b)()}function w(){k(),(0,d.i)(),(0,d.e)("SaveToFolder")}},3058(){},3127(){},3534(){},3749(){},3777(){},4305(){},5228(){},5286(e,t,n){n.d(t,{a:()=>q,b:()=>z,c:()=>O,d:()=>K,e:()=>Z,f:()=>W,g:()=>X,h:()=>V});var a=n(467),i=n(9566),r=n(8621),c=n(3459),o=n(8179),d=n(8024),u=n(904),l=n(3041),s=n(8134),f=n(9469),p=n(251),v=n(8279);function h(){return(h=(0,a.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var n=(0,f.a)(0,{id:e,name:t.n});(0,p.b)(t.n,n)}})).apply(this,arguments)}function b(){return(b=(0,a.a)(function*(e){var t=yield(0,s.e)(e);if(!1!==t){var n=(0,f.a)(0,{id:e,name:t.n});(0,v.c)(n)}})).apply(this,arguments)}var g=n(7968),m=n(6141),y='"Noto Sans TC", sans-serif',k=(0,u.d)("route-details-canvas"),A=k.width,w=k.height,x=Math.min(window.devicePixelRatio,1.875)||1,C={};function D(){var e=(0,o.a)();return e.classList.add("jc"),e}function _(){var e=(0,o.a)();e.classList.add("kc");var t=document.createElement("canvas");return t.classList.add("lc"),e.appendChild(t),e}function T(e,t,n,a,i,r){e.innerText=t.name,e.setAttribute("day",r.toString()),e.onclick=function(){!function(e){for(var t=(0,c.b)("playing_animation"),n=(0,o.d)(q,".jc"),a=(0,o.d)(z,".kc"),i=0;i<7;i++){var r,d,u=n[i],l=a[i],s=`d_${i}`,f=null===(r=C)||void 0===r?void 0:r.calendarEventGroups[s],p=null===(d=C)||void 0===d?void 0:d.calendarDays[s];if(f&&p){var v=(0,m.a)("--b"),h=(0,m.a)("--mc"),b=(0,m.a)("--ba");T(u,p,e,!1,t,i),L(l,f,e,v,h,b,i)}}}(r)},e.setAttribute("highlighted",n===r?"true":"false"),e.setAttribute("animation",(0,d.a)(i)),e.setAttribute("skeleton-screen",(0,d.a)(a))}function L(e,t,n,a,i,r,c){function l(e,t,n){var a=70*t;e.fillStyle=n,e.fillRect(45,a+5,A-45,1.2),e.font=`400 12px ${y}`,e.textBaseline="top";var i=`${String(t).padStart(2,"0")}:00`,r=e.measureText(i),c=r.width,o=r.actualBoundingBoxDescent;e.fillText(i,(45-c)/2,a+(10-o)/2,c)}function s(e,t,n,a){var i=new Date;i.setDate(1),i.setMonth(0),i.setFullYear(t.date.getFullYear()),i.setMonth(t.date.getMonth()),i.setDate(t.date.getDate()),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0);var r=(t.date.getTime()-i.getTime())/864e5*24*70,c=A-45,o=60*t.duration*1e3/864e5*24*70;(0,g.a)(e,45,r,c,o,3,a),(0,g.a)(e,45,r,3,o,{tl:3,tr:0,bl:3,br:0},n),e.font=`400 14px ${y}`,e.textBaseline="top",e.fillStyle=n;var d=t.dateString,u=e.measureText(d),l=u.width,s=u.actualBoundingBoxDescent;e.fillText(d,53,r+(o-s)/2,l)}var f=(0,o.e)(e,".lc"),p=f.getContext("2d");if(function(e,t,n){var a=t===n;e.setAttribute("displayed",(0,d.a)(a))}(e,n,c),function(e){k=(0,u.d)("route-details-canvas"),A=k.width,w=k.height,x=Math.min(window.devicePixelRatio,1.875)||1,e.width=A*x,e.height=w*x;var t=e.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(x,x)}(f),n===c){p.clearRect(0,0,A,w);for(var v=0;v<24;v++)l(p,v,r);for(var h of t)s(p,h,a,i)}else p.clearRect(0,0,A,w)}function S(e,t,n){var a=(new Date).getDay(),i=(0,m.a)("--b"),r=(0,m.a)("--mc"),c=(0,m.a)("--ba"),d=e.calendarDays,u=e.calendarDayQuantity,l=e.calendarEventGroups,s=(e.calendarEventQuantity,Array.from((0,o.d)(z,".kc"))),f=Array.from((0,o.d)(q,".jc")),p=s.length;if(u!==p){var v=p-u;if(v<0){for(var h=new DocumentFragment,b=new DocumentFragment,g=0;g>v;g--){var y=D();h.appendChild(y),f.push(y);var k=_();b.appendChild(k),s.push(k)}q.append(h),z.append(b)}else if(v>0)for(var A=p-1,w=p-v-1;A>w;A--)f[A].remove(),f.splice(A,1),s[A].remove(),s.splice(A,1)}for(var x=0;x<u;x++){var S=`d_${x}`,M=d[S],F=l[S],R=f[x],E=s[x];T(R,M,a,t,n,x),L(E,F,a,i,r,c,x)}C=e}var M=n(4537),F=[],R=!1,E=!1;function B(){var e=(0,o.a)();e.classList.add("nc");var t=(0,o.a)();t.classList.add("oc"),t.appendChild((0,M.a)()),e.appendChild(t);var n=(0,o.a)();return n.classList.add("pc"),e.appendChild(n),e}function $(e,t,n){function a(e,a,i){function r(e,t){var n=(0,o.e)(e,".oc");(0,M.c)(n,t.icon)}function c(e,t){(0,o.e)(e,".pc").innerText=t.value}function u(e,t){e.setAttribute("animation",(0,d.a)(t))}function l(e,t){e.setAttribute("skeleton-screen",(0,d.a)(t))}null==i?(r(e,a),c(e,a),u(e,n),l(e,t)):((0,d.b)(i,a)||r(e,a),(0,d.b)(i,a)||c(e,a),R!==n&&u(e,n),E!==t&&l(e,t))}var i=e.length;t!==E&&K.setAttribute("skeleton-screen",(0,d.a)(t));var r=Array.from((0,o.d)(O,".nc")),c=r.length;if(i!==c){var u=c-i;if(u<0){for(var l=new DocumentFragment,s=0;s>u;s--){var f=B();l.appendChild(f),r.push(f)}O.append(l)}else if(u>0)for(var p=c-1,v=c-u-1;p>v;p--)r[p].remove(),r.splice(p,1)}for(var h=0;h<i;h++){var b=r[h],g=e[h];0===F.length?a(b,g,null):a(b,g,F[h])}F=e,R=n,E=t}var j=(0,o.c)(".qc"),N=(0,o.e)(j,".rc"),H=(0,o.e)(N,".sc"),Q=(0,o.e)(H,'.tc[group="calendar"]'),G=(0,o.e)(Q,".uc"),q=(0,o.e)(G,".vc"),z=(0,o.e)(G,".wc"),P=(0,o.e)(j,'.rc .sc .tc[group="actions"]'),Y=(0,o.e)(P,'.uc .xc[action="save-to-folder"]'),I=(0,o.e)(P,'.uc .xc[action="get-permalink"]'),J=(0,o.e)(P,'.uc .xc[action="show-permalink-qrcode"]'),K=(0,o.e)(H,'.tc[group="properties"]'),O=(0,o.e)(K,".uc");function U(){return U=(0,a.a)(function*(e,t){var n=(0,c.b)("playing_animation"),a=yield(0,i.e)("route",e);Y.setAttribute("animation",(0,d.a)(n)),Y.setAttribute("highlighted",(0,d.a)(a)),Y.onclick=function(){(0,l.c)("route",[e],Y)},I.setAttribute("animation",(0,d.a)(n)),I.onclick=function(){!function(e){h.apply(this,arguments)}(e)},J.setAttribute("animation",(0,d.a)(n)),J.onclick=function(){!function(e){b.apply(this,arguments)}(e)},function(){for(var e=(0,c.b)("playing_animation"),t=[],n=0;n<5;n++)t.push({key:n,icon:"none",value:""});$(t,!0,e)}(),function(){for(var e=(0,c.b)("playing_animation"),t={d_0:47,d_1:47,d_2:47,d_3:47,d_4:47,d_5:47,d_6:47},n={},a={},i=0;i<7;i++){var r=`d_${i}`;n[r]=[],a[r]={day:i,code:"d_{i}",name:""};for(var o=0;o<t[r];o++){var d=new Date;d.setHours(0),d.setMinutes(30*o),d.setSeconds(0),d.setMilliseconds(0),n[r].push({date:d,dateString:"",duration:15})}}S({calendarEventGroups:n,calendarDays:a,calendarDayQuantity:7,calendarEventQuantity:t},!0,e)}();var o=(0,d.c)(),u=yield(0,r.a)(e,t,o);$(u.properties,!1,n),S(u.calendar,!1,n)}),U.apply(this,arguments)}function V(){j.setAttribute("displayed","true")}function W(){j.setAttribute("displayed","false")}function X(e,t){(0,u.c)("RouteDetails"),V(),function(e,t){U.apply(this,arguments)}(e,t),(0,u.b)()}function Z(){W(),(0,u.i)(),(0,u.e)("RouteDetails");var e=(0,o.d)(z,".kc");for(var t of e)t.remove();var n=(0,o.d)(q,".jc");for(var a of n)a.remove()}},5392(){},5461(){},5995(){},6018(){},6388(){},6597(){},7217(){},7225(){},7287(){},7723(){},7868(){},7908(e,t,n){n.d(t,{a:()=>D,b:()=>_,c:()=>C});var a=n(467),i=n(3937),r=n(3422),c=n(8179),o=n(8024),d=n(904),u=n(9119),l=n(6104),s=(0,c.c)(".yc"),f=(0,c.e)(s,".zc"),p=(0,c.e)(f,"._c"),v=(0,c.e)(p,'.ad[group="provider"]'),h=(0,c.e)(v,".bd"),b=(0,c.e)(h,"input"),g=(0,c.e)(p,'.ad[group="registration-key"]'),m=(0,c.e)(g,".bd"),y=(0,c.e)(m,"input"),k=(0,c.e)(s,".cd"),A=(0,c.e)(k,".dd"),w=(0,c.e)(k,".ed");function x(){A.onclick=function(){D(),(0,d.i)(),(0,d.e)("RegisterNotification"),(0,l.d)()},w.onclick=function(){!function(){T.apply(this,arguments)}()},b.value=(0,r.f)(),y.value=""}function C(){s.setAttribute("displayed","true")}function D(){s.setAttribute("displayed","false")}function _(){(0,d.c)("RegisterNotification"),C(),x(),(0,d.b)()}function T(){return(T=(0,a.a)(function*(){(0,u.a)("manufacturing","處理中");var e=b.value,t=y.value;if((0,o.h)(e))return(0,r.p)(e),(yield(0,i.a)(t))?void(0,u.a)("check_circle","註冊成功"):void(0,u.a)("error","註冊失敗");(0,u.a)("error","無效的提供者")})).apply(this,arguments)}},8983(){},9991(){}}]);
//# sourceMappingURL=11fa43a9b65cd61e795a.js.map