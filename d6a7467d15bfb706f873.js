"use strict";(self.webpackChunkbus=self.webpackChunkbus||[]).push([[13],{124(){},245(){},321(){},1003(){},1351(t,e,n){n.d(e,{a:()=>x,b:()=>T,c:()=>w,d:()=>E,e:()=>A,f:()=>M});var i=n(467),a=n(8011),c=n(6788),s=n(6983),r=n(3459),o=n(8179),d=n(8024),u=n(9469),l=n(251),f=n(4537),p=n(904),v=n(8279),h={},m=!1,y=!1,b=(0,o.c)(".gc"),L=(0,o.e)(b,".hc"),g=(0,o.e)(L,".ic");function _(){var t=(0,o.a)();t.classList.add("jc");var e=(0,o.a)();e.classList.add("kc"),e.appendChild((0,f.a)()),t.appendChild(e);var n=(0,o.a)();return n.classList.add("lc"),t.appendChild(n),t}function C(t,e,n){function i(t,i,a){function c(t,e){var n=(0,o.e)(t,".kc");(0,f.c)(n,e.icon)}function s(t,e){(0,o.e)(t,".lc").innerText=e.name}function r(t,e){t.onclick=e.action}function u(t,e){t.setAttribute("animation",(0,d.a)(e))}function l(t,e){t.setAttribute("skeleton-screen",(0,d.a)(e))}null==a?(c(t,i),s(t,i),r(t,i),u(t,n),l(t,e)):(a.key!==i.key&&(c(t,i),s(t,i),r(t,i)),n!==m&&u(t,n),e!==y&&l(t,e))}var a=t.actions,c=t.actionsQuantity,s=Array.from((0,o.d)(g,".jc")),r=s.length;if(c!==r){var u=r-c;if(u<0){for(var l=new DocumentFragment,p=0;p>u;p--){var v=_();l.appendChild(v),s.push(v)}g.append(l)}else if(u>0)for(var b=r-1,L=r-u-1;b>L;b--)s[b].remove(),s.splice(b,1)}for(var C=0;C<c;C++){var k=s[C],A=a[C];if((0,d.e)(h,"actions"))if(h.actions[C])i(k,A,h.actions[C]);else i(k,A,null);else i(k,A,null)}h=t,m=n,y=e}function k(){return(k=(0,i.a)(function*(t){var e=(0,r.b)("playing_animation"),n=(0,d.c)();!function(){for(var t=(0,r.b)("playing_animation"),e=[],n=0;n<3;n++)e.push({name:"",icon:"",key:`action-${n}`,action:function(){}});C({actions:e,actionsQuantity:3,hash:""},!0,t)}(),C(yield(0,s.a)(t,n),!1,e)})).apply(this,arguments)}function A(t){var e=t?"mc":"nc";b.addEventListener("animationend",function(){b.classList.remove(e)},{once:!0}),b.classList.add(e),b.setAttribute("displayed","true")}function T(t){var e="ltr"===t?"oc":"pc";b.addEventListener("animationend",function(){b.setAttribute("displayed","false"),b.classList.remove(e)},{once:!0}),b.classList.add(e)}function w(t){(0,p.c)("LocationDetails"),A("rtl"),function(t){k.apply(this,arguments)}(t),(0,p.b)()}function x(){T("ltr"),(0,p.i)(),(0,p.e)("LocationDetails")}function E(t){return D.apply(this,arguments)}function D(){return(D=(0,i.a)(function*(t){var e=(0,d.c)(),n=yield(0,a.a)(e,1);(0,c.a)(e),(0,c.b)(e);var i=`ml_${t}`;if((0,d.e)(n,i)){var s=n[i],r=(0,u.a)(1,{hash:t});(0,l.b)(s.n,r)}})).apply(this,arguments)}function M(t){return $.apply(this,arguments)}function $(){return($=(0,i.a)(function*(t){var e=(0,d.c)(),n=yield(0,a.a)(e,1);(0,c.a)(e),(0,c.b)(e);var i=`ml_${t}`;if((0,d.e)(n,i)){var s=(0,u.a)(1,{hash:t});(0,v.c)(s)}})).apply(this,arguments)}},2174(t,e,n){n.d(e,{a:()=>q,b:()=>P,c:()=>U,d:()=>N});var i=n(467),a=n(5767),c=n(365),s=n(3422),r=n(3459),o=n(8179),d=n(8024),u=n(4537),l=n(904),f=n(9119),p=(0,o.c)(".qc"),v=(0,o.e)(p,".rc"),h=(0,o.e)(v,".sc"),m=(0,o.e)(h,".tc"),y=(0,o.e)(p,".uc"),b=(0,o.e)(y,".vc"),L={},g=!1,_=15e3,C=5e3,k=15e3,A=!0,T=0,w=0,x="",E=!1,D=!1,M=!1;function $(t){var e=t;if(E){var n=e.detail.progress-1;m.style.setProperty("--yc",n.toString())}"end"===e.detail.stage&&document.removeEventListener(e.detail.target,$)}function Q(){var t=(0,o.a)();t.classList.add("zc");var e=(0,o.a)();e.classList.add("_c"),t.appendChild(e);var n=(0,o.a)();n.classList.add("ad");var i=(0,o.a)();i.classList.add("bd"),n.appendChild(i);var a=(0,o.a)();a.classList.add("cd"),n.appendChild(a);var c=(0,o.a)();c.classList.add("dd"),n.appendChild(c);var s=(0,o.a)();s.classList.add("ed");var r=document.createElement("span");return r.appendChild((0,u.b)("close")),s.appendChild(r),n.appendChild(s),t.appendChild(n),t}function S(t,e,n){function i(t,i,a){function c(t,e){(0,o.e)(t,"._c").innerText=e.hours}function s(t,e){var n=(0,o.e)(t,".ad");(0,o.e)(n,".bd").innerText=e.minutes}function r(t,e){var n=(0,o.e)(t,".ad");(0,o.e)(n,".dd").innerText=e.name}function u(t,e){var n=(0,o.e)(t,".ad");(0,o.e)(n,".cd").innerText=`${e.route.name} - 往${e.route.direction}`}function l(t,e){var n=(0,o.e)(t,".ad");(0,o.e)(n,".ed").onclick=function(){!function(t,e){B.apply(this,arguments)}(t,e.schedule_id)}}function f(t,e){t.setAttribute("first",(0,d.a)(e.is_first))}function p(t,e){t.setAttribute("animation",(0,d.a)(e))}function v(t,e){t.setAttribute("skeleton-screen",(0,d.a)(e))}null==a?(c(t,i),s(t,i),r(t,i),u(t,i),l(t,i),f(t,i),p(t,n),v(t,e)):(i.hours!==a.hours&&c(t,i),i.minutes!==a.minutes&&s(t,i),(0,d.b)(a.schedule_id,i.schedule_id)||(r(t,i),u(t,i),l(t,i)),a.is_first!==i.is_first&&f(t,i),false!==n&&p(t,n),g!==e&&v(t,e))}var a=t.itemQuantity,c=t.items,s=Array.from((0,o.d)(b,".zc")),r=s.length;if(a!==r){var u=r-a;if(u<0){for(var l=new DocumentFragment,f=0;f>u;f--){var p=Q();l.appendChild(p),s.push(p)}b.append(l)}else if(u>0)for(var v=r-1,h=r-u-1;v>h;v--)s[v].remove(),s.splice(v,1)}for(var m=0;m<a;m++){var y=s[m],_=c[m];if((0,d.e)(L,"items"))if(L.items[m])i(y,_,L.items[m]);else i(y,_,null);else i(y,_,null)}L=t,g=e}function j(){return z.apply(this,arguments)}function z(){return(z=(0,i.a)(function*(){var t=(0,r.b)("playing_animation"),e=(0,r.b)("refresh_interval");A=e.dynamic,_=e.baseInterval,E=!0,x=(0,d.c)(),m.setAttribute("refreshing","true"),m.classList.remove("xc"),document.addEventListener(x,$);var n=yield(0,s.h)(x);S(n,!1,t);var i=0;A&&(i=yield(0,a.c)()),T=(new Date).getTime(),w=A?Math.max(T+C,n.dataUpdateTime+_/i):T+_,k=Math.max(C,w-T),E=!1,m.setAttribute("refreshing","false"),m.style.setProperty("--wc",`${k}ms`),m.classList.add("xc")})).apply(this,arguments)}function F(){return I.apply(this,arguments)}function I(){return(I=(0,i.a)(function*(){j().then(function(){D?setTimeout(function(){F()},Math.max(C,w-(new Date).getTime())):M=!1}).catch(function(t){D?setTimeout(function(){F()},1e4):M=!1})})).apply(this,arguments)}function N(t){var e=t?"mc":"nc";p.addEventListener("animationend",function(){p.classList.remove(e)},{once:!0}),p.classList.add(e),p.setAttribute("displayed","true")}function P(t){var e="ltr"===t?"oc":"pc";p.addEventListener("animationend",function(){p.setAttribute("displayed","false"),p.classList.remove(e)},{once:!0}),p.classList.add(e)}function U(){(0,l.c)("NotificationScheduleManager"),N("rtl"),function(){for(var t=(0,r.b)("playing_animation"),e=(0,l.d)("window"),n=(e.width,e.height),i=Math.floor(n/50)+5,a=[],c=0;c<i;c++)a.push({name:"",stop_id:0,estimate_time:0,schedule_id:"null",scheduled_time:0,route:{name:"",direction:"",id:0,pathAttributeId:[]},is_first:!0,date:"",hours:"",minutes:""});S({items:a,itemQuantity:i,dataUpdateTime:0},!0,t)}(),D||(D=!0,M?j():(M=!0,F())),(0,l.b)()}function q(){P("ltr"),D=!1,(0,l.i)(),(0,l.e)("NotificationScheduleManager")}function B(){return(B=(0,i.a)(function*(t,e){if((0,f.a)("manufacturing","處理中"),yield(0,c.a)(e)){if(t.remove(),(0,f.a)("check_circle","已取消通知"),!E){var n=(0,r.b)("playing_animation");S(yield(0,s.h)(x),!1,n)}}else(0,f.a)("error","取消失敗")})).apply(this,arguments)}},2503(){},2681(){},2684(){},3257(){},4071(){},4472(){},4620(){},5135(){},6907(){},7537(){},8969(){},9714(){},9731(){}}]);
//# sourceMappingURL=d6a7467d15bfb706f873.js.map